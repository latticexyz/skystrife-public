import{p as p$7,A as A$5,S as Subject,m as map$1,N as Ne$2,B as BehaviorSubject,a as pipe$1,u as ur,b as mergeMap,f as from$5,o as observe,$ as $r,c as observable$1,d as fromEvent$1,e as filter$2,g as merge$2,h as bufferCount,t as throttleTime,i as pairwise,s as scan,j as distinctUntilChanged,r as runInAction,k as computed,l as reaction,Y as Yr,n as ie$4,P as P$1,q as ft$2,v as m$8,w as te$4,R as ReplaySubject,x as defineChain,y as getAddress$2,U as UserRejectedRequestError,z as ResourceUnavailableRpcError,C as createWalletClient,D as numberToHex,E as SwitchChainError,F as custom,G as createPublicClient,H as fallback,I as http,J as webSocket,K as ContractFunctionExecutionError,L as hexToString,M as trim,O as formatUnits,Q as weiUnits,_ as __assign$2,T as __rest$3,V as __spreadArray$4,W as __vitePreload,X as shareReplay,Z as concatMap,a0 as w$8,a1 as TransactionReceiptNotFoundError,a2 as firstValueFrom,a3 as E$4,a4 as w$9,a5 as Dr,a6 as Oe$3,a7 as ge$2,a8 as v$6,a9 as share,aa as toAccount,ab as g$7,ac as A$6,ad as Je$2,ae as Ye$3,af as ue$1,ag as E$5,ah as se$4,ai as de$2,aj as lodash,ak as getTransaction,al as formatEther,am as _$4,an as k$5,ao as concatHex,ap as encodePacked,aq as size$1,ar as padHex,as as N$6,at as hexToBool,au as hexToBigInt,av as a$2,aw as sliceHex,ax as isHex,ay as hexToNumber$1,az as stringToHex,aA as ft$3,aB as Ge$2,aC as a$3,aD as le$3,aE as I$4,aF as at$2,aG as lodashExports,aH as ce$4,aI as X$4,aJ as yt$2,aK as ue$2,aL as pt$2,aM as interval,aN as f$7,aO as f$8,aP as K$4,aQ as Ke$1,aR as x$6,aS as Tt$2,aT as mt$2,aU as xt$2,aV as jsxRuntimeExports,aW as ut$3,aX as zipWith,aY as of,aZ as delay$2,a_ as find,a$ as V$4,b0 as debug,b1 as createTRPCProxyClient,b2 as httpBatchLink,b3 as parseEther,b4 as H$4,b5 as te$5,b6 as X$5,b7 as k$6,b8 as lr,b9 as U$4,ba as ot$1,bb as se$5,bc as encodeFunctionData,bd as maxUint256,be as P$2,bf as i$5,bg as recs,bh as sha512$2,bi as sha256$7,bj as hmac$6,bk as pbkdf2$4,bl as keccak_256,bm as ripemd160$3,bn as asyncLoop$1,bo as checkOpts$2,bp as number$5,bq as u32$2,br as secp256k1$1,bs as hmac$7,bt as pbkdf2$5,bu as sha256$8,bv as sha512$3,bw as sha3$3,bx as ripemd160$4,by as secp256k1$2,bz as PQueue$1,bA as EventEmitter$2,bB as M$4,bC as concat$8,bD as ae$4,bE as decodeFunctionData,bF as maxInt32,bG as isAddress,bH as __awaiter$d,bI as __generator$4,bJ as __spread$2,bK as y$7,bL as pe$3}from"./mud-3b4b7775.js";import{a as reactDomExports,r as reactExports,$ as $2AODx$react,g as getDefaultExportFromCjs,R as React,b as getAugmentedNamespace,c as commonjsGlobal,d as $7SXl2$reactdom}from"./react-60d820b0.js";import"./phaser-f1ffc97e.js";(function(){const ar=document.createElement("link").relList;if(ar&&ar.supports&&ar.supports("modulepreload"))return;for(const hr of document.querySelectorAll('link[rel="modulepreload"]'))fr(hr);new MutationObserver(hr=>{for(const pr of hr)if(pr.type==="childList")for(const mr of pr.addedNodes)mr.tagName==="LINK"&&mr.rel==="modulepreload"&&fr(mr)}).observe(document,{childList:!0,subtree:!0});function dr(hr){const pr={};return hr.integrity&&(pr.integrity=hr.integrity),hr.referrerPolicy&&(pr.referrerPolicy=hr.referrerPolicy),hr.crossOrigin==="use-credentials"?pr.credentials="include":hr.crossOrigin==="anonymous"?pr.credentials="omit":pr.credentials="same-origin",pr}function fr(hr){if(hr.ep)return;hr.ep=!0;const pr=dr(hr);fetch(hr.href,pr)}})();const index$2="",tailwind="";var client$1={},m$7=reactDomExports;client$1.createRoot=m$7.createRoot,client$1.hydrateRoot=m$7.hydrateRoot;/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(cr){for(var ar=1;ar<arguments.length;ar++){var dr=arguments[ar];for(var fr in dr)Object.prototype.hasOwnProperty.call(dr,fr)&&(cr[fr]=dr[fr])}return cr},_extends$4.apply(this,arguments)}var Action;(function(cr){cr.Pop="POP",cr.Push="PUSH",cr.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(cr){cr===void 0&&(cr={});function ar(fr,hr){let{pathname:pr,search:mr,hash:gr}=fr.location;return createLocation("",{pathname:pr,search:mr,hash:gr},hr.state&&hr.state.usr||null,hr.state&&hr.state.key||"default")}function dr(fr,hr){return typeof hr=="string"?hr:createPath(hr)}return getUrlBasedHistory(ar,dr,null,cr)}function invariant(cr,ar){if(cr===!1||cr===null||typeof cr>"u")throw new Error(ar)}function warning(cr,ar){if(!cr){typeof console<"u"&&console.warn(ar);try{throw new Error(ar)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(cr,ar){return{usr:cr.state,key:cr.key,idx:ar}}function createLocation(cr,ar,dr,fr){return dr===void 0&&(dr=null),_extends$4({pathname:typeof cr=="string"?cr:cr.pathname,search:"",hash:""},typeof ar=="string"?parsePath(ar):ar,{state:dr,key:ar&&ar.key||fr||createKey()})}function createPath(cr){let{pathname:ar="/",search:dr="",hash:fr=""}=cr;return dr&&dr!=="?"&&(ar+=dr.charAt(0)==="?"?dr:"?"+dr),fr&&fr!=="#"&&(ar+=fr.charAt(0)==="#"?fr:"#"+fr),ar}function parsePath(cr){let ar={};if(cr){let dr=cr.indexOf("#");dr>=0&&(ar.hash=cr.substr(dr),cr=cr.substr(0,dr));let fr=cr.indexOf("?");fr>=0&&(ar.search=cr.substr(fr),cr=cr.substr(0,fr)),cr&&(ar.pathname=cr)}return ar}function getUrlBasedHistory(cr,ar,dr,fr){fr===void 0&&(fr={});let{window:hr=document.defaultView,v5Compat:pr=!1}=fr,mr=hr.history,gr=Action.Pop,yr=null,xr=wr();xr==null&&(xr=0,mr.replaceState(_extends$4({},mr.state,{idx:xr}),""));function wr(){return(mr.state||{idx:null}).idx}function br(){gr=Action.Pop;let _r=wr(),Cr=_r==null?null:_r-xr;xr=_r,yr&&yr({action:gr,location:Ar.location,delta:Cr})}function Sr(_r,Cr){gr=Action.Push;let kr=createLocation(Ar.location,_r,Cr);dr&&dr(kr,_r),xr=wr()+1;let Rr=getHistoryState(kr,xr),Ir=Ar.createHref(kr);try{mr.pushState(Rr,"",Ir)}catch(Nr){if(Nr instanceof DOMException&&Nr.name==="DataCloneError")throw Nr;hr.location.assign(Ir)}pr&&yr&&yr({action:gr,location:Ar.location,delta:1})}function vr(_r,Cr){gr=Action.Replace;let kr=createLocation(Ar.location,_r,Cr);dr&&dr(kr,_r),xr=wr();let Rr=getHistoryState(kr,xr),Ir=Ar.createHref(kr);mr.replaceState(Rr,"",Ir),pr&&yr&&yr({action:gr,location:Ar.location,delta:0})}function Er(_r){let Cr=hr.location.origin!=="null"?hr.location.origin:hr.location.href,kr=typeof _r=="string"?_r:createPath(_r);return invariant(Cr,"No window.location.(origin|href) available to create URL for href: "+kr),new URL(kr,Cr)}let Ar={get action(){return gr},get location(){return cr(hr,mr)},listen(_r){if(yr)throw new Error("A history only accepts one active listener");return hr.addEventListener(PopStateEventType,br),yr=_r,()=>{hr.removeEventListener(PopStateEventType,br),yr=null}},createHref(_r){return ar(hr,_r)},createURL:Er,encodeLocation(_r){let Cr=Er(_r);return{pathname:Cr.pathname,search:Cr.search,hash:Cr.hash}},push:Sr,replace:vr,go(_r){return mr.go(_r)}};return Ar}var ResultType;(function(cr){cr.data="data",cr.deferred="deferred",cr.redirect="redirect",cr.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(cr){return cr.index===!0}function convertRoutesToDataRoutes(cr,ar,dr,fr){return dr===void 0&&(dr=[]),fr===void 0&&(fr={}),cr.map((hr,pr)=>{let mr=[...dr,pr],gr=typeof hr.id=="string"?hr.id:mr.join("-");if(invariant(hr.index!==!0||!hr.children,"Cannot specify children on an index route"),invariant(!fr[gr],'Found a route id collision on id "'+gr+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(hr)){let yr=_extends$4({},hr,ar(hr),{id:gr});return fr[gr]=yr,yr}else{let yr=_extends$4({},hr,ar(hr),{id:gr,children:void 0});return fr[gr]=yr,hr.children&&(yr.children=convertRoutesToDataRoutes(hr.children,ar,mr,fr)),yr}})}function matchRoutes(cr,ar,dr){dr===void 0&&(dr="/");let fr=typeof ar=="string"?parsePath(ar):ar,hr=stripBasename(fr.pathname||"/",dr);if(hr==null)return null;let pr=flattenRoutes(cr);rankRouteBranches(pr);let mr=null;for(let gr=0;mr==null&&gr<pr.length;++gr)mr=matchRouteBranch(pr[gr],safelyDecodeURI(hr));return mr}function convertRouteMatchToUiMatch(cr,ar){let{route:dr,pathname:fr,params:hr}=cr;return{id:dr.id,pathname:fr,params:hr,data:ar[dr.id],handle:dr.handle}}function flattenRoutes(cr,ar,dr,fr){ar===void 0&&(ar=[]),dr===void 0&&(dr=[]),fr===void 0&&(fr="");let hr=(pr,mr,gr)=>{let yr={relativePath:gr===void 0?pr.path||"":gr,caseSensitive:pr.caseSensitive===!0,childrenIndex:mr,route:pr};yr.relativePath.startsWith("/")&&(invariant(yr.relativePath.startsWith(fr),'Absolute route path "'+yr.relativePath+'" nested under path '+('"'+fr+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),yr.relativePath=yr.relativePath.slice(fr.length));let xr=joinPaths([fr,yr.relativePath]),wr=dr.concat(yr);pr.children&&pr.children.length>0&&(invariant(pr.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+xr+'".')),flattenRoutes(pr.children,ar,wr,xr)),!(pr.path==null&&!pr.index)&&ar.push({path:xr,score:computeScore$1(xr,pr.index),routesMeta:wr})};return cr.forEach((pr,mr)=>{var gr;if(pr.path===""||!((gr=pr.path)!=null&&gr.includes("?")))hr(pr,mr);else for(let yr of explodeOptionalSegments(pr.path))hr(pr,mr,yr)}),ar}function explodeOptionalSegments(cr){let ar=cr.split("/");if(ar.length===0)return[];let[dr,...fr]=ar,hr=dr.endsWith("?"),pr=dr.replace(/\?$/,"");if(fr.length===0)return hr?[pr,""]:[pr];let mr=explodeOptionalSegments(fr.join("/")),gr=[];return gr.push(...mr.map(yr=>yr===""?pr:[pr,yr].join("/"))),hr&&gr.push(...mr),gr.map(yr=>cr.startsWith("/")&&yr===""?"/":yr)}function rankRouteBranches(cr){cr.sort((ar,dr)=>ar.score!==dr.score?dr.score-ar.score:compareIndexes(ar.routesMeta.map(fr=>fr.childrenIndex),dr.routesMeta.map(fr=>fr.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=cr=>cr==="*";function computeScore$1(cr,ar){let dr=cr.split("/"),fr=dr.length;return dr.some(isSplat)&&(fr+=splatPenalty),ar&&(fr+=indexRouteValue),dr.filter(hr=>!isSplat(hr)).reduce((hr,pr)=>hr+(paramRe.test(pr)?dynamicSegmentValue:pr===""?emptySegmentValue:staticSegmentValue),fr)}function compareIndexes(cr,ar){return cr.length===ar.length&&cr.slice(0,-1).every((fr,hr)=>fr===ar[hr])?cr[cr.length-1]-ar[ar.length-1]:0}function matchRouteBranch(cr,ar){let{routesMeta:dr}=cr,fr={},hr="/",pr=[];for(let mr=0;mr<dr.length;++mr){let gr=dr[mr],yr=mr===dr.length-1,xr=hr==="/"?ar:ar.slice(hr.length)||"/",wr=matchPath({path:gr.relativePath,caseSensitive:gr.caseSensitive,end:yr},xr);if(!wr)return null;Object.assign(fr,wr.params);let br=gr.route;pr.push({params:fr,pathname:joinPaths([hr,wr.pathname]),pathnameBase:normalizePathname(joinPaths([hr,wr.pathnameBase])),route:br}),wr.pathnameBase!=="/"&&(hr=joinPaths([hr,wr.pathnameBase]))}return pr}function matchPath(cr,ar){typeof cr=="string"&&(cr={path:cr,caseSensitive:!1,end:!0});let[dr,fr]=compilePath(cr.path,cr.caseSensitive,cr.end),hr=ar.match(dr);if(!hr)return null;let pr=hr[0],mr=pr.replace(/(.)\/+$/,"$1"),gr=hr.slice(1);return{params:fr.reduce((xr,wr,br)=>{if(wr==="*"){let Sr=gr[br]||"";mr=pr.slice(0,pr.length-Sr.length).replace(/(.)\/+$/,"$1")}return xr[wr]=safelyDecodeURIComponent(gr[br]||"",wr),xr},{}),pathname:pr,pathnameBase:mr,pattern:cr}}function compilePath(cr,ar,dr){ar===void 0&&(ar=!1),dr===void 0&&(dr=!0),warning(cr==="*"||!cr.endsWith("*")||cr.endsWith("/*"),'Route path "'+cr+'" will be treated as if it were '+('"'+cr.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+cr.replace(/\*$/,"/*")+'".'));let fr=[],hr="^"+cr.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(mr,gr)=>(fr.push(gr),"/([^\\/]+)"));return cr.endsWith("*")?(fr.push("*"),hr+=cr==="*"||cr==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):dr?hr+="\\/*$":cr!==""&&cr!=="/"&&(hr+="(?:(?=\\/|$))"),[new RegExp(hr,ar?void 0:"i"),fr]}function safelyDecodeURI(cr){try{return decodeURI(cr)}catch(ar){return warning(!1,'The URL path "'+cr+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+ar+").")),cr}}function safelyDecodeURIComponent(cr,ar){try{return decodeURIComponent(cr)}catch(dr){return warning(!1,'The value for the URL param "'+ar+'" will not be decoded because'+(' the string "'+cr+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+dr+").")),cr}}function stripBasename(cr,ar){if(ar==="/")return cr;if(!cr.toLowerCase().startsWith(ar.toLowerCase()))return null;let dr=ar.endsWith("/")?ar.length-1:ar.length,fr=cr.charAt(dr);return fr&&fr!=="/"?null:cr.slice(dr)||"/"}function resolvePath(cr,ar){ar===void 0&&(ar="/");let{pathname:dr,search:fr="",hash:hr=""}=typeof cr=="string"?parsePath(cr):cr;return{pathname:dr?dr.startsWith("/")?dr:resolvePathname(dr,ar):ar,search:normalizeSearch(fr),hash:normalizeHash(hr)}}function resolvePathname(cr,ar){let dr=ar.replace(/\/+$/,"").split("/");return cr.split("/").forEach(hr=>{hr===".."?dr.length>1&&dr.pop():hr!=="."&&dr.push(hr)}),dr.length>1?dr.join("/"):"/"}function getInvalidPathError(cr,ar,dr,fr){return"Cannot include a '"+cr+"' character in a manually specified "+("`to."+ar+"` field ["+JSON.stringify(fr)+"].  Please separate it out to the ")+("`to."+dr+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(cr){return cr.filter((ar,dr)=>dr===0||ar.route.path&&ar.route.path.length>0)}function resolveTo(cr,ar,dr,fr){fr===void 0&&(fr=!1);let hr;typeof cr=="string"?hr=parsePath(cr):(hr=_extends$4({},cr),invariant(!hr.pathname||!hr.pathname.includes("?"),getInvalidPathError("?","pathname","search",hr)),invariant(!hr.pathname||!hr.pathname.includes("#"),getInvalidPathError("#","pathname","hash",hr)),invariant(!hr.search||!hr.search.includes("#"),getInvalidPathError("#","search","hash",hr)));let pr=cr===""||hr.pathname==="",mr=pr?"/":hr.pathname,gr;if(fr||mr==null)gr=dr;else{let br=ar.length-1;if(mr.startsWith("..")){let Sr=mr.split("/");for(;Sr[0]==="..";)Sr.shift(),br-=1;hr.pathname=Sr.join("/")}gr=br>=0?ar[br]:"/"}let yr=resolvePath(hr,gr),xr=mr&&mr!=="/"&&mr.endsWith("/"),wr=(pr||mr===".")&&dr.endsWith("/");return!yr.pathname.endsWith("/")&&(xr||wr)&&(yr.pathname+="/"),yr}const joinPaths=cr=>cr.join("/").replace(/\/\/+/g,"/"),normalizePathname=cr=>cr.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=cr=>!cr||cr==="?"?"":cr.startsWith("?")?cr:"?"+cr,normalizeHash=cr=>!cr||cr==="#"?"":cr.startsWith("#")?cr:"#"+cr;class ErrorResponseImpl{constructor(ar,dr,fr,hr){hr===void 0&&(hr=!1),this.status=ar,this.statusText=dr||"",this.internal=hr,fr instanceof Error?(this.data=fr.toString(),this.error=fr):this.data=fr}}function isRouteErrorResponse(cr){return cr!=null&&typeof cr.status=="number"&&typeof cr.statusText=="string"&&typeof cr.internal=="boolean"&&"data"in cr}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=cr=>({hasErrorBoundary:!!cr.hasErrorBoundary});function createRouter(cr){const ar=cr.window?cr.window:typeof window<"u"?window:void 0,dr=typeof ar<"u"&&typeof ar.document<"u"&&typeof ar.document.createElement<"u",fr=!dr;invariant(cr.routes.length>0,"You must provide a non-empty routes array to createRouter");let hr;if(cr.mapRouteProperties)hr=cr.mapRouteProperties;else if(cr.detectErrorBoundary){let $s=cr.detectErrorBoundary;hr=Rs=>({hasErrorBoundary:$s(Rs)})}else hr=defaultMapRouteProperties;let pr={},mr=convertRoutesToDataRoutes(cr.routes,hr,void 0,pr),gr,yr=cr.basename||"/",xr=_extends$4({v7_normalizeFormMethod:!1,v7_prependBasename:!1},cr.future),wr=null,br=new Set,Sr=null,vr=null,Er=null,Ar=cr.hydrationData!=null,_r=matchRoutes(mr,cr.history.location,yr),Cr=null;if(_r==null){let $s=getInternalRouterError(404,{pathname:cr.history.location.pathname}),{matches:Rs,route:Bs}=getShortCircuitMatches(mr);_r=Rs,Cr={[Bs.id]:$s}}let kr=!_r.some($s=>$s.route.lazy)&&(!_r.some($s=>$s.route.loader)||cr.hydrationData!=null),Rr,Ir={historyAction:cr.history.action,location:cr.history.location,matches:_r,initialized:kr,navigation:IDLE_NAVIGATION,restoreScrollPosition:cr.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:cr.hydrationData&&cr.hydrationData.loaderData||{},actionData:cr.hydrationData&&cr.hydrationData.actionData||null,errors:cr.hydrationData&&cr.hydrationData.errors||Cr,fetchers:new Map,blockers:new Map},Nr=Action.Pop,Pr=!1,Tr,Br=!1,Fr=!1,jr=[],Ur=[],qr=new Map,Hr=0,Or=-1,Mr=new Map,Lr=new Set,Vr=new Map,Jr=new Map,es=new Map,ns=!1;function Qr(){return wr=cr.history.listen($s=>{let{action:Rs,location:Bs,delta:Ds}=$s;if(ns){ns=!1;return}warning(es.size===0||Ds!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ls=ls({currentLocation:Ir.location,nextLocation:Bs,historyAction:Rs});if(Ls&&Ds!=null){ns=!0,cr.history.go(Ds*-1),Cs(Ls,{state:"blocked",location:Bs,proceed(){Cs(Ls,{state:"proceeding",proceed:void 0,reset:void 0,location:Bs}),cr.history.go(Ds)},reset(){let Fs=new Map(Ir.blockers);Fs.set(Ls,IDLE_BLOCKER),ss({blockers:Fs})}});return}return rs(Rs,Bs)}),Ir.initialized||rs(Action.Pop,Ir.location),Rr}function zr(){wr&&wr(),br.clear(),Tr&&Tr.abort(),Ir.fetchers.forEach(($s,Rs)=>gs(Rs)),Ir.blockers.forEach(($s,Rs)=>Hs(Rs))}function Wr($s){return br.add($s),()=>br.delete($s)}function ss($s){Ir=_extends$4({},Ir,$s),br.forEach(Rs=>Rs(Ir))}function Xr($s,Rs){var Bs,Ds;let Ls=Ir.actionData!=null&&Ir.navigation.formMethod!=null&&isMutationMethod(Ir.navigation.formMethod)&&Ir.navigation.state==="loading"&&((Bs=$s.state)==null?void 0:Bs._isRedirect)!==!0,Fs;Rs.actionData?Object.keys(Rs.actionData).length>0?Fs=Rs.actionData:Fs=null:Ls?Fs=Ir.actionData:Fs=null;let js=Rs.loaderData?mergeLoaderData(Ir.loaderData,Rs.loaderData,Rs.matches||[],Rs.errors):Ir.loaderData,Us=Ir.blockers;Us.size>0&&(Us=new Map(Us),Us.forEach((ni,Js)=>Us.set(Js,IDLE_BLOCKER)));let Vs=Pr===!0||Ir.navigation.formMethod!=null&&isMutationMethod(Ir.navigation.formMethod)&&((Ds=$s.state)==null?void 0:Ds._isRedirect)!==!0;gr&&(mr=gr,gr=void 0),Br||Nr===Action.Pop||(Nr===Action.Push?cr.history.push($s,$s.state):Nr===Action.Replace&&cr.history.replace($s,$s.state)),ss(_extends$4({},Rs,{actionData:Fs,loaderData:js,historyAction:Nr,location:$s,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:Es($s,Rs.matches||Ir.matches),preventScrollReset:Vs,blockers:Us})),Nr=Action.Pop,Pr=!1,Br=!1,Fr=!1,jr=[],Ur=[]}async function ts($s,Rs){if(typeof $s=="number"){cr.history.go($s);return}let Bs=normalizeTo(Ir.location,Ir.matches,yr,xr.v7_prependBasename,$s,Rs?.fromRouteId,Rs?.relative),{path:Ds,submission:Ls,error:Fs}=normalizeNavigateOptions(xr.v7_normalizeFormMethod,!1,Bs,Rs),js=Ir.location,Us=createLocation(Ir.location,Ds,Rs&&Rs.state);Us=_extends$4({},Us,cr.history.encodeLocation(Us));let Vs=Rs&&Rs.replace!=null?Rs.replace:void 0,ni=Action.Push;Vs===!0?ni=Action.Replace:Vs===!1||Ls!=null&&isMutationMethod(Ls.formMethod)&&Ls.formAction===Ir.location.pathname+Ir.location.search&&(ni=Action.Replace);let Js=Rs&&"preventScrollReset"in Rs?Rs.preventScrollReset===!0:void 0,Ys=ls({currentLocation:js,nextLocation:Us,historyAction:ni});if(Ys){Cs(Ys,{state:"blocked",location:Us,proceed(){Cs(Ys,{state:"proceeding",proceed:void 0,reset:void 0,location:Us}),ts($s,Rs)},reset(){let Xs=new Map(Ir.blockers);Xs.set(Ys,IDLE_BLOCKER),ss({blockers:Xs})}});return}return await rs(ni,Us,{submission:Ls,pendingError:Fs,preventScrollReset:Js,replace:Rs&&Rs.replace})}function fs(){if(ws(),ss({revalidation:"loading"}),Ir.navigation.state!=="submitting"){if(Ir.navigation.state==="idle"){rs(Ir.historyAction,Ir.location,{startUninterruptedRevalidation:!0});return}rs(Nr||Ir.historyAction,Ir.navigation.location,{overrideNavigation:Ir.navigation})}}async function rs($s,Rs,Bs){Tr&&Tr.abort(),Tr=null,Nr=$s,Br=(Bs&&Bs.startUninterruptedRevalidation)===!0,ys(Ir.location,Ir.matches),Pr=(Bs&&Bs.preventScrollReset)===!0;let Ds=gr||mr,Ls=Bs&&Bs.overrideNavigation,Fs=matchRoutes(Ds,Rs,yr);if(!Fs){let Xs=getInternalRouterError(404,{pathname:Rs.pathname}),{matches:Qs,route:ai}=getShortCircuitMatches(Ds);Kr(),Xr(Rs,{matches:Qs,loaderData:{},errors:{[ai.id]:Xs}});return}if(Ir.initialized&&!Fr&&isHashChangeOnly(Ir.location,Rs)&&!(Bs&&Bs.submission&&isMutationMethod(Bs.submission.formMethod))){Xr(Rs,{matches:Fs});return}Tr=new AbortController;let js=createClientSideRequest(cr.history,Rs,Tr.signal,Bs&&Bs.submission),Us,Vs;if(Bs&&Bs.pendingError)Vs={[findNearestBoundary(Fs).route.id]:Bs.pendingError};else if(Bs&&Bs.submission&&isMutationMethod(Bs.submission.formMethod)){let Xs=await as(js,Rs,Bs.submission,Fs,{replace:Bs.replace});if(Xs.shortCircuited)return;Us=Xs.pendingActionData,Vs=Xs.pendingActionError,Ls=getLoadingNavigation(Rs,Bs.submission),js=new Request(js.url,{signal:js.signal})}let{shortCircuited:ni,loaderData:Js,errors:Ys}=await ps(js,Rs,Fs,Ls,Bs&&Bs.submission,Bs&&Bs.fetcherSubmission,Bs&&Bs.replace,Us,Vs);ni||(Tr=null,Xr(Rs,_extends$4({matches:Fs},Us?{actionData:Us}:{},{loaderData:Js,errors:Ys})))}async function as($s,Rs,Bs,Ds,Ls){Ls===void 0&&(Ls={}),ws();let Fs=getSubmittingNavigation(Rs,Bs);ss({navigation:Fs});let js,Us=getTargetMatch(Ds,Rs);if(!Us.route.action&&!Us.route.lazy)js={type:ResultType.error,error:getInternalRouterError(405,{method:$s.method,pathname:Rs.pathname,routeId:Us.route.id})};else if(js=await callLoaderOrAction("action",$s,Us,Ds,pr,hr,yr),$s.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(js)){let Vs;return Ls&&Ls.replace!=null?Vs=Ls.replace:Vs=js.location===Ir.location.pathname+Ir.location.search,await os(Ir,js,{submission:Bs,replace:Vs}),{shortCircuited:!0}}if(isErrorResult(js)){let Vs=findNearestBoundary(Ds,Us.route.id);return(Ls&&Ls.replace)!==!0&&(Nr=Action.Push),{pendingActionData:{},pendingActionError:{[Vs.route.id]:js.error}}}if(isDeferredResult(js))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[Us.route.id]:js.data}}}async function ps($s,Rs,Bs,Ds,Ls,Fs,js,Us,Vs){let ni=Ds||getLoadingNavigation(Rs,Ls),Js=Ls||Fs||getSubmissionFromNavigation(ni),Ys=gr||mr,[Xs,Qs]=getMatchesToLoad(cr.history,Ir,Bs,Js,Rs,Fr,jr,Ur,Vr,Lr,Ys,yr,Us,Vs);if(Kr(ii=>!(Bs&&Bs.some(si=>si.route.id===ii))||Xs&&Xs.some(si=>si.route.id===ii)),Or=++Hr,Xs.length===0&&Qs.length===0){let ii=Os();return Xr(Rs,_extends$4({matches:Bs,loaderData:{},errors:Vs||null},Us?{actionData:Us}:{},ii?{fetchers:new Map(Ir.fetchers)}:{})),{shortCircuited:!0}}if(!Br){Qs.forEach(si=>{let di=Ir.fetchers.get(si.key),xi=getLoadingFetcher(void 0,di?di.data:void 0);Ir.fetchers.set(si.key,xi)});let ii=Us||Ir.actionData;ss(_extends$4({navigation:ni},ii?Object.keys(ii).length===0?{actionData:null}:{actionData:ii}:{},Qs.length>0?{fetchers:new Map(Ir.fetchers)}:{}))}Qs.forEach(ii=>{qr.has(ii.key)&&vs(ii.key),ii.controller&&qr.set(ii.key,ii.controller)});let ai=()=>Qs.forEach(ii=>vs(ii.key));Tr&&Tr.signal.addEventListener("abort",ai);let{results:hi,loaderResults:li,fetcherResults:fi}=await bs(Ir.matches,Bs,Xs,Qs,$s);if($s.signal.aborted)return{shortCircuited:!0};Tr&&Tr.signal.removeEventListener("abort",ai),Qs.forEach(ii=>qr.delete(ii.key));let gi=findRedirect(hi);if(gi){if(gi.idx>=Xs.length){let ii=Qs[gi.idx-Xs.length].key;Lr.add(ii)}return await os(Ir,gi.result,{replace:js}),{shortCircuited:!0}}let{loaderData:ui,errors:pi}=processLoaderData(Ir,Bs,Xs,li,Vs,Qs,fi,Jr);Jr.forEach((ii,si)=>{ii.subscribe(di=>{(di||ii.done)&&Jr.delete(si)})});let wi=Os(),ei=Ms(Or),ci=wi||ei||Qs.length>0;return _extends$4({loaderData:ui,errors:pi},ci?{fetchers:new Map(Ir.fetchers)}:{})}function xs($s){return Ir.fetchers.get($s)||IDLE_FETCHER}function Ss($s,Rs,Bs,Ds){if(fr)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");qr.has($s)&&vs($s);let Ls=gr||mr,Fs=normalizeTo(Ir.location,Ir.matches,yr,xr.v7_prependBasename,Bs,Rs,Ds?.relative),js=matchRoutes(Ls,Fs,yr);if(!js){As($s,Rs,getInternalRouterError(404,{pathname:Fs}));return}let{path:Us,submission:Vs,error:ni}=normalizeNavigateOptions(xr.v7_normalizeFormMethod,!0,Fs,Ds);if(ni){As($s,Rs,ni);return}let Js=getTargetMatch(js,Us);if(Pr=(Ds&&Ds.preventScrollReset)===!0,Vs&&isMutationMethod(Vs.formMethod)){Ns($s,Rs,Us,Js,js,Vs);return}Vr.set($s,{routeId:Rs,path:Us}),Ts($s,Rs,Us,Js,js,Vs)}async function Ns($s,Rs,Bs,Ds,Ls,Fs){if(ws(),Vr.delete($s),!Ds.route.action&&!Ds.route.lazy){let ri=getInternalRouterError(405,{method:Fs.formMethod,pathname:Bs,routeId:Rs});As($s,Rs,ri);return}let js=Ir.fetchers.get($s),Us=getSubmittingFetcher(Fs,js);Ir.fetchers.set($s,Us),ss({fetchers:new Map(Ir.fetchers)});let Vs=new AbortController,ni=createClientSideRequest(cr.history,Bs,Vs.signal,Fs);qr.set($s,Vs);let Js=Hr,Ys=await callLoaderOrAction("action",ni,Ds,Ls,pr,hr,yr);if(ni.signal.aborted){qr.get($s)===Vs&&qr.delete($s);return}if(isRedirectResult(Ys))if(qr.delete($s),Or>Js){let ri=getDoneFetcher(void 0);Ir.fetchers.set($s,ri),ss({fetchers:new Map(Ir.fetchers)});return}else{Lr.add($s);let ri=getLoadingFetcher(Fs);return Ir.fetchers.set($s,ri),ss({fetchers:new Map(Ir.fetchers)}),os(Ir,Ys,{fetcherSubmission:Fs})}if(isErrorResult(Ys)){As($s,Rs,Ys.error);return}if(isDeferredResult(Ys))throw getInternalRouterError(400,{type:"defer-action"});let Xs=Ir.navigation.location||Ir.location,Qs=createClientSideRequest(cr.history,Xs,Vs.signal),ai=gr||mr,hi=Ir.navigation.state!=="idle"?matchRoutes(ai,Ir.navigation.location,yr):Ir.matches;invariant(hi,"Didn't find any matches after fetcher action");let li=++Hr;Mr.set($s,li);let fi=getLoadingFetcher(Fs,Ys.data);Ir.fetchers.set($s,fi);let[gi,ui]=getMatchesToLoad(cr.history,Ir,hi,Fs,Xs,Fr,jr,Ur,Vr,Lr,ai,yr,{[Ds.route.id]:Ys.data},void 0);ui.filter(ri=>ri.key!==$s).forEach(ri=>{let mi=ri.key,Ai=Ir.fetchers.get(mi),Ti=getLoadingFetcher(void 0,Ai?Ai.data:void 0);Ir.fetchers.set(mi,Ti),qr.has(mi)&&vs(mi),ri.controller&&qr.set(mi,ri.controller)}),ss({fetchers:new Map(Ir.fetchers)});let pi=()=>ui.forEach(ri=>vs(ri.key));Vs.signal.addEventListener("abort",pi);let{results:wi,loaderResults:ei,fetcherResults:ci}=await bs(Ir.matches,hi,gi,ui,Qs);if(Vs.signal.aborted)return;Vs.signal.removeEventListener("abort",pi),Mr.delete($s),qr.delete($s),ui.forEach(ri=>qr.delete(ri.key));let ii=findRedirect(wi);if(ii){if(ii.idx>=gi.length){let ri=ui[ii.idx-gi.length].key;Lr.add(ri)}return os(Ir,ii.result)}let{loaderData:si,errors:di}=processLoaderData(Ir,Ir.matches,gi,ei,void 0,ui,ci,Jr);if(Ir.fetchers.has($s)){let ri=getDoneFetcher(Ys.data);Ir.fetchers.set($s,ri)}let xi=Ms(li);Ir.navigation.state==="loading"&&li>Or?(invariant(Nr,"Expected pending action"),Tr&&Tr.abort(),Xr(Ir.navigation.location,{matches:hi,loaderData:si,errors:di,fetchers:new Map(Ir.fetchers)})):(ss(_extends$4({errors:di,loaderData:mergeLoaderData(Ir.loaderData,si,hi,di)},xi||ui.length>0?{fetchers:new Map(Ir.fetchers)}:{})),Fr=!1)}async function Ts($s,Rs,Bs,Ds,Ls,Fs){let js=Ir.fetchers.get($s),Us=getLoadingFetcher(Fs,js?js.data:void 0);Ir.fetchers.set($s,Us),ss({fetchers:new Map(Ir.fetchers)});let Vs=new AbortController,ni=createClientSideRequest(cr.history,Bs,Vs.signal);qr.set($s,Vs);let Js=Hr,Ys=await callLoaderOrAction("loader",ni,Ds,Ls,pr,hr,yr);if(isDeferredResult(Ys)&&(Ys=await resolveDeferredData(Ys,ni.signal,!0)||Ys),qr.get($s)===Vs&&qr.delete($s),ni.signal.aborted)return;if(isRedirectResult(Ys))if(Or>Js){let Qs=getDoneFetcher(void 0);Ir.fetchers.set($s,Qs),ss({fetchers:new Map(Ir.fetchers)});return}else{Lr.add($s),await os(Ir,Ys);return}if(isErrorResult(Ys)){let Qs=findNearestBoundary(Ir.matches,Rs);Ir.fetchers.delete($s),ss({fetchers:new Map(Ir.fetchers),errors:{[Qs.route.id]:Ys.error}});return}invariant(!isDeferredResult(Ys),"Unhandled fetcher deferred data");let Xs=getDoneFetcher(Ys.data);Ir.fetchers.set($s,Xs),ss({fetchers:new Map(Ir.fetchers)})}async function os($s,Rs,Bs){let{submission:Ds,fetcherSubmission:Ls,replace:Fs}=Bs===void 0?{}:Bs;Rs.revalidate&&(Fr=!0);let js=createLocation($s.location,Rs.location,{_isRedirect:!0});if(invariant(js,"Expected a location on the redirect navigation"),dr){let Xs=!1;if(Rs.reloadDocument)Xs=!0;else if(ABSOLUTE_URL_REGEX.test(Rs.location)){const Qs=cr.history.createURL(Rs.location);Xs=Qs.origin!==ar.location.origin||stripBasename(Qs.pathname,yr)==null}if(Xs){Fs?ar.location.replace(Rs.location):ar.location.assign(Rs.location);return}}Tr=null;let Us=Fs===!0?Action.Replace:Action.Push,{formMethod:Vs,formAction:ni,formEncType:Js}=$s.navigation;!Ds&&!Ls&&Vs&&ni&&Js&&(Ds=getSubmissionFromNavigation($s.navigation));let Ys=Ds||Ls;if(redirectPreserveMethodStatusCodes.has(Rs.status)&&Ys&&isMutationMethod(Ys.formMethod))await rs(Us,js,{submission:_extends$4({},Ys,{formAction:Rs.location}),preventScrollReset:Pr});else{let Xs=getLoadingNavigation(js,Ds);await rs(Us,js,{overrideNavigation:Xs,fetcherSubmission:Ls,preventScrollReset:Pr})}}async function bs($s,Rs,Bs,Ds,Ls){let Fs=await Promise.all([...Bs.map(Vs=>callLoaderOrAction("loader",Ls,Vs,Rs,pr,hr,yr)),...Ds.map(Vs=>Vs.matches&&Vs.match&&Vs.controller?callLoaderOrAction("loader",createClientSideRequest(cr.history,Vs.path,Vs.controller.signal),Vs.match,Vs.matches,pr,hr,yr):{type:ResultType.error,error:getInternalRouterError(404,{pathname:Vs.path})})]),js=Fs.slice(0,Bs.length),Us=Fs.slice(Bs.length);return await Promise.all([resolveDeferredResults($s,Bs,js,js.map(()=>Ls.signal),!1,Ir.loaderData),resolveDeferredResults($s,Ds.map(Vs=>Vs.match),Us,Ds.map(Vs=>Vs.controller?Vs.controller.signal:null),!0)]),{results:Fs,loaderResults:js,fetcherResults:Us}}function ws(){Fr=!0,jr.push(...Kr()),Vr.forEach(($s,Rs)=>{qr.has(Rs)&&(Ur.push(Rs),vs(Rs))})}function As($s,Rs,Bs){let Ds=findNearestBoundary(Ir.matches,Rs);gs($s),ss({errors:{[Ds.route.id]:Bs},fetchers:new Map(Ir.fetchers)})}function gs($s){let Rs=Ir.fetchers.get($s);qr.has($s)&&!(Rs&&Rs.state==="loading"&&Mr.has($s))&&vs($s),Vr.delete($s),Mr.delete($s),Lr.delete($s),Ir.fetchers.delete($s)}function vs($s){let Rs=qr.get($s);invariant(Rs,"Expected fetch controller: "+$s),Rs.abort(),qr.delete($s)}function Ps($s){for(let Rs of $s){let Bs=xs(Rs),Ds=getDoneFetcher(Bs.data);Ir.fetchers.set(Rs,Ds)}}function Os(){let $s=[],Rs=!1;for(let Bs of Lr){let Ds=Ir.fetchers.get(Bs);invariant(Ds,"Expected fetcher: "+Bs),Ds.state==="loading"&&(Lr.delete(Bs),$s.push(Bs),Rs=!0)}return Ps($s),Rs}function Ms($s){let Rs=[];for(let[Bs,Ds]of Mr)if(Ds<$s){let Ls=Ir.fetchers.get(Bs);invariant(Ls,"Expected fetcher: "+Bs),Ls.state==="loading"&&(vs(Bs),Mr.delete(Bs),Rs.push(Bs))}return Ps(Rs),Rs.length>0}function zs($s,Rs){let Bs=Ir.blockers.get($s)||IDLE_BLOCKER;return es.get($s)!==Rs&&es.set($s,Rs),Bs}function Hs($s){Ir.blockers.delete($s),es.delete($s)}function Cs($s,Rs){let Bs=Ir.blockers.get($s)||IDLE_BLOCKER;invariant(Bs.state==="unblocked"&&Rs.state==="blocked"||Bs.state==="blocked"&&Rs.state==="blocked"||Bs.state==="blocked"&&Rs.state==="proceeding"||Bs.state==="blocked"&&Rs.state==="unblocked"||Bs.state==="proceeding"&&Rs.state==="unblocked","Invalid blocker state transition: "+Bs.state+" -> "+Rs.state);let Ds=new Map(Ir.blockers);Ds.set($s,Rs),ss({blockers:Ds})}function ls($s){let{currentLocation:Rs,nextLocation:Bs,historyAction:Ds}=$s;if(es.size===0)return;es.size>1&&warning(!1,"A router only supports one blocker at a time");let Ls=Array.from(es.entries()),[Fs,js]=Ls[Ls.length-1],Us=Ir.blockers.get(Fs);if(!(Us&&Us.state==="proceeding")&&js({currentLocation:Rs,nextLocation:Bs,historyAction:Ds}))return Fs}function Kr($s){let Rs=[];return Jr.forEach((Bs,Ds)=>{(!$s||$s(Ds))&&(Bs.cancel(),Rs.push(Ds),Jr.delete(Ds))}),Rs}function Zr($s,Rs,Bs){if(Sr=$s,Er=Rs,vr=Bs||null,!Ar&&Ir.navigation===IDLE_NAVIGATION){Ar=!0;let Ds=Es(Ir.location,Ir.matches);Ds!=null&&ss({restoreScrollPosition:Ds})}return()=>{Sr=null,Er=null,vr=null}}function hs($s,Rs){return vr&&vr($s,Rs.map(Ds=>convertRouteMatchToUiMatch(Ds,Ir.loaderData)))||$s.key}function ys($s,Rs){if(Sr&&Er){let Bs=hs($s,Rs);Sr[Bs]=Er()}}function Es($s,Rs){if(Sr){let Bs=hs($s,Rs),Ds=Sr[Bs];if(typeof Ds=="number")return Ds}return null}function Is($s){pr={},gr=convertRoutesToDataRoutes($s,hr,void 0,pr)}return Rr={get basename(){return yr},get state(){return Ir},get routes(){return mr},initialize:Qr,subscribe:Wr,enableScrollRestoration:Zr,navigate:ts,fetch:Ss,revalidate:fs,createHref:$s=>cr.history.createHref($s),encodeLocation:$s=>cr.history.encodeLocation($s),getFetcher:xs,deleteFetcher:gs,dispose:zr,getBlocker:zs,deleteBlocker:Hs,_internalFetchControllers:qr,_internalActiveDeferreds:Jr,_internalSetRoutes:Is},Rr}function isSubmissionNavigation(cr){return cr!=null&&("formData"in cr&&cr.formData!=null||"body"in cr&&cr.body!==void 0)}function normalizeTo(cr,ar,dr,fr,hr,pr,mr){let gr,yr;if(pr!=null&&mr!=="path"){gr=[];for(let wr of ar)if(gr.push(wr),wr.route.id===pr){yr=wr;break}}else gr=ar,yr=ar[ar.length-1];let xr=resolveTo(hr||".",getPathContributingMatches(gr).map(wr=>wr.pathnameBase),stripBasename(cr.pathname,dr)||cr.pathname,mr==="path");return hr==null&&(xr.search=cr.search,xr.hash=cr.hash),(hr==null||hr===""||hr===".")&&yr&&yr.route.index&&!hasNakedIndexQuery(xr.search)&&(xr.search=xr.search?xr.search.replace(/^\?/,"?index&"):"?index"),fr&&dr!=="/"&&(xr.pathname=xr.pathname==="/"?dr:joinPaths([dr,xr.pathname])),createPath(xr)}function normalizeNavigateOptions(cr,ar,dr,fr){if(!fr||!isSubmissionNavigation(fr))return{path:dr};if(fr.formMethod&&!isValidMethod(fr.formMethod))return{path:dr,error:getInternalRouterError(405,{method:fr.formMethod})};let hr=()=>({path:dr,error:getInternalRouterError(400,{type:"invalid-body"})}),pr=fr.formMethod||"get",mr=cr?pr.toUpperCase():pr.toLowerCase(),gr=stripHashFromPath(dr);if(fr.body!==void 0){if(fr.formEncType==="text/plain"){if(!isMutationMethod(mr))return hr();let Sr=typeof fr.body=="string"?fr.body:fr.body instanceof FormData||fr.body instanceof URLSearchParams?Array.from(fr.body.entries()).reduce((vr,Er)=>{let[Ar,_r]=Er;return""+vr+Ar+"="+_r+`
`},""):String(fr.body);return{path:dr,submission:{formMethod:mr,formAction:gr,formEncType:fr.formEncType,formData:void 0,json:void 0,text:Sr}}}else if(fr.formEncType==="application/json"){if(!isMutationMethod(mr))return hr();try{let Sr=typeof fr.body=="string"?JSON.parse(fr.body):fr.body;return{path:dr,submission:{formMethod:mr,formAction:gr,formEncType:fr.formEncType,formData:void 0,json:Sr,text:void 0}}}catch{return hr()}}}invariant(typeof FormData=="function","FormData is not available in this environment");let yr,xr;if(fr.formData)yr=convertFormDataToSearchParams(fr.formData),xr=fr.formData;else if(fr.body instanceof FormData)yr=convertFormDataToSearchParams(fr.body),xr=fr.body;else if(fr.body instanceof URLSearchParams)yr=fr.body,xr=convertSearchParamsToFormData(yr);else if(fr.body==null)yr=new URLSearchParams,xr=new FormData;else try{yr=new URLSearchParams(fr.body),xr=convertSearchParamsToFormData(yr)}catch{return hr()}let wr={formMethod:mr,formAction:gr,formEncType:fr&&fr.formEncType||"application/x-www-form-urlencoded",formData:xr,json:void 0,text:void 0};if(isMutationMethod(wr.formMethod))return{path:dr,submission:wr};let br=parsePath(dr);return ar&&br.search&&hasNakedIndexQuery(br.search)&&yr.append("index",""),br.search="?"+yr,{path:createPath(br),submission:wr}}function getLoaderMatchesUntilBoundary(cr,ar){let dr=cr;if(ar){let fr=cr.findIndex(hr=>hr.route.id===ar);fr>=0&&(dr=cr.slice(0,fr))}return dr}function getMatchesToLoad(cr,ar,dr,fr,hr,pr,mr,gr,yr,xr,wr,br,Sr,vr){let Er=vr?Object.values(vr)[0]:Sr?Object.values(Sr)[0]:void 0,Ar=cr.createURL(ar.location),_r=cr.createURL(hr),Cr=vr?Object.keys(vr)[0]:void 0,Rr=getLoaderMatchesUntilBoundary(dr,Cr).filter((Nr,Pr)=>{if(Nr.route.lazy)return!0;if(Nr.route.loader==null)return!1;if(isNewLoader(ar.loaderData,ar.matches[Pr],Nr)||mr.some(Fr=>Fr===Nr.route.id))return!0;let Tr=ar.matches[Pr],Br=Nr;return shouldRevalidateLoader(Nr,_extends$4({currentUrl:Ar,currentParams:Tr.params,nextUrl:_r,nextParams:Br.params},fr,{actionResult:Er,defaultShouldRevalidate:pr||Ar.pathname+Ar.search===_r.pathname+_r.search||Ar.search!==_r.search||isNewRouteInstance(Tr,Br)}))}),Ir=[];return yr.forEach((Nr,Pr)=>{if(!dr.some(Ur=>Ur.route.id===Nr.routeId))return;let Tr=matchRoutes(wr,Nr.path,br);if(!Tr){Ir.push({key:Pr,routeId:Nr.routeId,path:Nr.path,matches:null,match:null,controller:null});return}let Br=ar.fetchers.get(Pr),Fr=getTargetMatch(Tr,Nr.path),jr=!1;xr.has(Pr)?jr=!1:gr.includes(Pr)?jr=!0:Br&&Br.state!=="idle"&&Br.data===void 0?jr=pr:jr=shouldRevalidateLoader(Fr,_extends$4({currentUrl:Ar,currentParams:ar.matches[ar.matches.length-1].params,nextUrl:_r,nextParams:dr[dr.length-1].params},fr,{actionResult:Er,defaultShouldRevalidate:pr})),jr&&Ir.push({key:Pr,routeId:Nr.routeId,path:Nr.path,matches:Tr,match:Fr,controller:new AbortController})}),[Rr,Ir]}function isNewLoader(cr,ar,dr){let fr=!ar||dr.route.id!==ar.route.id,hr=cr[dr.route.id]===void 0;return fr||hr}function isNewRouteInstance(cr,ar){let dr=cr.route.path;return cr.pathname!==ar.pathname||dr!=null&&dr.endsWith("*")&&cr.params["*"]!==ar.params["*"]}function shouldRevalidateLoader(cr,ar){if(cr.route.shouldRevalidate){let dr=cr.route.shouldRevalidate(ar);if(typeof dr=="boolean")return dr}return ar.defaultShouldRevalidate}async function loadLazyRouteModule(cr,ar,dr){if(!cr.lazy)return;let fr=await cr.lazy();if(!cr.lazy)return;let hr=dr[cr.id];invariant(hr,"No route found in manifest");let pr={};for(let mr in fr){let yr=hr[mr]!==void 0&&mr!=="hasErrorBoundary";warning(!yr,'Route "'+hr.id+'" has a static property "'+mr+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+mr+'" will be ignored.')),!yr&&!immutableRouteKeys.has(mr)&&(pr[mr]=fr[mr])}Object.assign(hr,pr),Object.assign(hr,_extends$4({},ar(hr),{lazy:void 0}))}async function callLoaderOrAction(cr,ar,dr,fr,hr,pr,mr,gr){gr===void 0&&(gr={});let yr,xr,wr,br=Er=>{let Ar,_r=new Promise((Cr,kr)=>Ar=kr);return wr=()=>Ar(),ar.signal.addEventListener("abort",wr),Promise.race([Er({request:ar,params:dr.params,context:gr.requestContext}),_r])};try{let Er=dr.route[cr];if(dr.route.lazy)if(Er){let Ar,_r=await Promise.all([br(Er).catch(Cr=>{Ar=Cr}),loadLazyRouteModule(dr.route,pr,hr)]);if(Ar)throw Ar;xr=_r[0]}else if(await loadLazyRouteModule(dr.route,pr,hr),Er=dr.route[cr],Er)xr=await br(Er);else if(cr==="action"){let Ar=new URL(ar.url),_r=Ar.pathname+Ar.search;throw getInternalRouterError(405,{method:ar.method,pathname:_r,routeId:dr.route.id})}else return{type:ResultType.data,data:void 0};else if(Er)xr=await br(Er);else{let Ar=new URL(ar.url),_r=Ar.pathname+Ar.search;throw getInternalRouterError(404,{pathname:_r})}invariant(xr!==void 0,"You defined "+(cr==="action"?"an action":"a loader")+" for route "+('"'+dr.route.id+"\" but didn't return anything from your `"+cr+"` ")+"function. Please return a value or `null`.")}catch(Er){yr=ResultType.error,xr=Er}finally{wr&&ar.signal.removeEventListener("abort",wr)}if(isResponse(xr)){let Er=xr.status;if(redirectStatusCodes.has(Er)){let Cr=xr.headers.get("Location");if(invariant(Cr,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX.test(Cr))Cr=normalizeTo(new URL(ar.url),fr.slice(0,fr.indexOf(dr)+1),mr,!0,Cr);else if(!gr.isStaticRequest){let kr=new URL(ar.url),Rr=Cr.startsWith("//")?new URL(kr.protocol+Cr):new URL(Cr),Ir=stripBasename(Rr.pathname,mr)!=null;Rr.origin===kr.origin&&Ir&&(Cr=Rr.pathname+Rr.search+Rr.hash)}if(gr.isStaticRequest)throw xr.headers.set("Location",Cr),xr;return{type:ResultType.redirect,status:Er,location:Cr,revalidate:xr.headers.get("X-Remix-Revalidate")!==null,reloadDocument:xr.headers.get("X-Remix-Reload-Document")!==null}}if(gr.isRouteRequest)throw{type:yr===ResultType.error?ResultType.error:ResultType.data,response:xr};let Ar,_r=xr.headers.get("Content-Type");return _r&&/\bapplication\/json\b/.test(_r)?Ar=await xr.json():Ar=await xr.text(),yr===ResultType.error?{type:yr,error:new ErrorResponseImpl(Er,xr.statusText,Ar),headers:xr.headers}:{type:ResultType.data,data:Ar,statusCode:xr.status,headers:xr.headers}}if(yr===ResultType.error)return{type:yr,error:xr};if(isDeferredData(xr)){var Sr,vr;return{type:ResultType.deferred,deferredData:xr,statusCode:(Sr=xr.init)==null?void 0:Sr.status,headers:((vr=xr.init)==null?void 0:vr.headers)&&new Headers(xr.init.headers)}}return{type:ResultType.data,data:xr}}function createClientSideRequest(cr,ar,dr,fr){let hr=cr.createURL(stripHashFromPath(ar)).toString(),pr={signal:dr};if(fr&&isMutationMethod(fr.formMethod)){let{formMethod:mr,formEncType:gr}=fr;pr.method=mr.toUpperCase(),gr==="application/json"?(pr.headers=new Headers({"Content-Type":gr}),pr.body=JSON.stringify(fr.json)):gr==="text/plain"?pr.body=fr.text:gr==="application/x-www-form-urlencoded"&&fr.formData?pr.body=convertFormDataToSearchParams(fr.formData):pr.body=fr.formData}return new Request(hr,pr)}function convertFormDataToSearchParams(cr){let ar=new URLSearchParams;for(let[dr,fr]of cr.entries())ar.append(dr,typeof fr=="string"?fr:fr.name);return ar}function convertSearchParamsToFormData(cr){let ar=new FormData;for(let[dr,fr]of cr.entries())ar.append(dr,fr);return ar}function processRouteLoaderData(cr,ar,dr,fr,hr){let pr={},mr=null,gr,yr=!1,xr={};return dr.forEach((wr,br)=>{let Sr=ar[br].route.id;if(invariant(!isRedirectResult(wr),"Cannot handle redirect results in processLoaderData"),isErrorResult(wr)){let vr=findNearestBoundary(cr,Sr),Er=wr.error;fr&&(Er=Object.values(fr)[0],fr=void 0),mr=mr||{},mr[vr.route.id]==null&&(mr[vr.route.id]=Er),pr[Sr]=void 0,yr||(yr=!0,gr=isRouteErrorResponse(wr.error)?wr.error.status:500),wr.headers&&(xr[Sr]=wr.headers)}else isDeferredResult(wr)?(hr.set(Sr,wr.deferredData),pr[Sr]=wr.deferredData.data):pr[Sr]=wr.data,wr.statusCode!=null&&wr.statusCode!==200&&!yr&&(gr=wr.statusCode),wr.headers&&(xr[Sr]=wr.headers)}),fr&&(mr=fr,pr[Object.keys(fr)[0]]=void 0),{loaderData:pr,errors:mr,statusCode:gr||200,loaderHeaders:xr}}function processLoaderData(cr,ar,dr,fr,hr,pr,mr,gr){let{loaderData:yr,errors:xr}=processRouteLoaderData(ar,dr,fr,hr,gr);for(let wr=0;wr<pr.length;wr++){let{key:br,match:Sr,controller:vr}=pr[wr];invariant(mr!==void 0&&mr[wr]!==void 0,"Did not find corresponding fetcher result");let Er=mr[wr];if(!(vr&&vr.signal.aborted))if(isErrorResult(Er)){let Ar=findNearestBoundary(cr.matches,Sr?.route.id);xr&&xr[Ar.route.id]||(xr=_extends$4({},xr,{[Ar.route.id]:Er.error})),cr.fetchers.delete(br)}else if(isRedirectResult(Er))invariant(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(Er))invariant(!1,"Unhandled fetcher deferred data");else{let Ar=getDoneFetcher(Er.data);cr.fetchers.set(br,Ar)}}return{loaderData:yr,errors:xr}}function mergeLoaderData(cr,ar,dr,fr){let hr=_extends$4({},ar);for(let pr of dr){let mr=pr.route.id;if(ar.hasOwnProperty(mr)?ar[mr]!==void 0&&(hr[mr]=ar[mr]):cr[mr]!==void 0&&pr.route.loader&&(hr[mr]=cr[mr]),fr&&fr.hasOwnProperty(mr))break}return hr}function findNearestBoundary(cr,ar){return(ar?cr.slice(0,cr.findIndex(fr=>fr.route.id===ar)+1):[...cr]).reverse().find(fr=>fr.route.hasErrorBoundary===!0)||cr[0]}function getShortCircuitMatches(cr){let ar=cr.find(dr=>dr.index||!dr.path||dr.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:ar}],route:ar}}function getInternalRouterError(cr,ar){let{pathname:dr,routeId:fr,method:hr,type:pr}=ar===void 0?{}:ar,mr="Unknown Server Error",gr="Unknown @remix-run/router error";return cr===400?(mr="Bad Request",hr&&dr&&fr?gr="You made a "+hr+' request to "'+dr+'" but '+('did not provide a `loader` for route "'+fr+'", ')+"so there is no way to handle the request.":pr==="defer-action"?gr="defer() is not supported in actions":pr==="invalid-body"&&(gr="Unable to encode submission body")):cr===403?(mr="Forbidden",gr='Route "'+fr+'" does not match URL "'+dr+'"'):cr===404?(mr="Not Found",gr='No route matches URL "'+dr+'"'):cr===405&&(mr="Method Not Allowed",hr&&dr&&fr?gr="You made a "+hr.toUpperCase()+' request to "'+dr+'" but '+('did not provide an `action` for route "'+fr+'", ')+"so there is no way to handle the request.":hr&&(gr='Invalid request method "'+hr.toUpperCase()+'"')),new ErrorResponseImpl(cr||500,mr,new Error(gr),!0)}function findRedirect(cr){for(let ar=cr.length-1;ar>=0;ar--){let dr=cr[ar];if(isRedirectResult(dr))return{result:dr,idx:ar}}}function stripHashFromPath(cr){let ar=typeof cr=="string"?parsePath(cr):cr;return createPath(_extends$4({},ar,{hash:""}))}function isHashChangeOnly(cr,ar){return cr.pathname!==ar.pathname||cr.search!==ar.search?!1:cr.hash===""?ar.hash!=="":cr.hash===ar.hash?!0:ar.hash!==""}function isDeferredResult(cr){return cr.type===ResultType.deferred}function isErrorResult(cr){return cr.type===ResultType.error}function isRedirectResult(cr){return(cr&&cr.type)===ResultType.redirect}function isDeferredData(cr){let ar=cr;return ar&&typeof ar=="object"&&typeof ar.data=="object"&&typeof ar.subscribe=="function"&&typeof ar.cancel=="function"&&typeof ar.resolveData=="function"}function isResponse(cr){return cr!=null&&typeof cr.status=="number"&&typeof cr.statusText=="string"&&typeof cr.headers=="object"&&typeof cr.body<"u"}function isValidMethod(cr){return validRequestMethods.has(cr.toLowerCase())}function isMutationMethod(cr){return validMutationMethods.has(cr.toLowerCase())}async function resolveDeferredResults(cr,ar,dr,fr,hr,pr){for(let mr=0;mr<dr.length;mr++){let gr=dr[mr],yr=ar[mr];if(!yr)continue;let xr=cr.find(br=>br.route.id===yr.route.id),wr=xr!=null&&!isNewRouteInstance(xr,yr)&&(pr&&pr[yr.route.id])!==void 0;if(isDeferredResult(gr)&&(hr||wr)){let br=fr[mr];invariant(br,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(gr,br,hr).then(Sr=>{Sr&&(dr[mr]=Sr||dr[mr])})}}}async function resolveDeferredData(cr,ar,dr){if(dr===void 0&&(dr=!1),!await cr.deferredData.resolveData(ar)){if(dr)try{return{type:ResultType.data,data:cr.deferredData.unwrappedData}}catch(hr){return{type:ResultType.error,error:hr}}return{type:ResultType.data,data:cr.deferredData.data}}}function hasNakedIndexQuery(cr){return new URLSearchParams(cr).getAll("index").some(ar=>ar==="")}function getTargetMatch(cr,ar){let dr=typeof ar=="string"?parsePath(ar).search:ar.search;if(cr[cr.length-1].route.index&&hasNakedIndexQuery(dr||""))return cr[cr.length-1];let fr=getPathContributingMatches(cr);return fr[fr.length-1]}function getSubmissionFromNavigation(cr){let{formMethod:ar,formAction:dr,formEncType:fr,text:hr,formData:pr,json:mr}=cr;if(!(!ar||!dr||!fr)){if(hr!=null)return{formMethod:ar,formAction:dr,formEncType:fr,formData:void 0,json:void 0,text:hr};if(pr!=null)return{formMethod:ar,formAction:dr,formEncType:fr,formData:pr,json:void 0,text:void 0};if(mr!==void 0)return{formMethod:ar,formAction:dr,formEncType:fr,formData:void 0,json:mr,text:void 0}}}function getLoadingNavigation(cr,ar){return ar?{state:"loading",location:cr,formMethod:ar.formMethod,formAction:ar.formAction,formEncType:ar.formEncType,formData:ar.formData,json:ar.json,text:ar.text}:{state:"loading",location:cr,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(cr,ar){return{state:"submitting",location:cr,formMethod:ar.formMethod,formAction:ar.formAction,formEncType:ar.formEncType,formData:ar.formData,json:ar.json,text:ar.text}}function getLoadingFetcher(cr,ar){return cr?{state:"loading",formMethod:cr.formMethod,formAction:cr.formAction,formEncType:cr.formEncType,formData:cr.formData,json:cr.json,text:cr.text,data:ar}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:ar}}function getSubmittingFetcher(cr,ar){return{state:"submitting",formMethod:cr.formMethod,formAction:cr.formAction,formEncType:cr.formEncType,formData:cr.formData,json:cr.json,text:cr.text,data:ar?ar.data:void 0}}function getDoneFetcher(cr){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:cr}}/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(cr){for(var ar=1;ar<arguments.length;ar++){var dr=arguments[ar];for(var fr in dr)Object.prototype.hasOwnProperty.call(dr,fr)&&(cr[fr]=dr[fr])}return cr},_extends$3.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useRoutesImpl(cr,ar,dr){useInRouterContext()||invariant(!1);let{navigator:fr}=reactExports.useContext(NavigationContext),{matches:hr}=reactExports.useContext(RouteContext),pr=hr[hr.length-1],mr=pr?pr.params:{};pr&&pr.pathname;let gr=pr?pr.pathnameBase:"/";pr&&pr.route;let yr=useLocation(),xr;if(ar){var wr;let Ar=typeof ar=="string"?parsePath(ar):ar;gr==="/"||(wr=Ar.pathname)!=null&&wr.startsWith(gr)||invariant(!1),xr=Ar}else xr=yr;let br=xr.pathname||"/",Sr=gr==="/"?br:br.slice(gr.length)||"/",vr=matchRoutes(cr,{pathname:Sr}),Er=_renderMatches(vr&&vr.map(Ar=>Object.assign({},Ar,{params:Object.assign({},mr,Ar.params),pathname:joinPaths([gr,fr.encodeLocation?fr.encodeLocation(Ar.pathname).pathname:Ar.pathname]),pathnameBase:Ar.pathnameBase==="/"?gr:joinPaths([gr,fr.encodeLocation?fr.encodeLocation(Ar.pathnameBase).pathname:Ar.pathnameBase])})),hr,dr);return ar&&Er?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$3({pathname:"/",search:"",hash:"",state:null,key:"default"},xr),navigationType:Action.Pop}},Er):Er}function DefaultErrorComponent(){let cr=useRouteError(),ar=isRouteErrorResponse(cr)?cr.status+" "+cr.statusText:cr instanceof Error?cr.message:JSON.stringify(cr),dr=cr instanceof Error?cr.stack:null,hr={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},pr=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},ar),dr?reactExports.createElement("pre",{style:hr},dr):null,pr)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(ar){super(ar),this.state={location:ar.location,revalidation:ar.revalidation,error:ar.error}}static getDerivedStateFromError(ar){return{error:ar}}static getDerivedStateFromProps(ar,dr){return dr.location!==ar.location||dr.revalidation!=="idle"&&ar.revalidation==="idle"?{error:ar.error,location:ar.location,revalidation:ar.revalidation}:{error:ar.error||dr.error,location:dr.location,revalidation:ar.revalidation||dr.revalidation}}componentDidCatch(ar,dr){console.error("React Router caught the following error during render",ar,dr)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(cr){let{routeContext:ar,match:dr,children:fr}=cr,hr=reactExports.useContext(DataRouterContext);return hr&&hr.static&&hr.staticContext&&(dr.route.errorElement||dr.route.ErrorBoundary)&&(hr.staticContext._deepestRenderedBoundaryId=dr.route.id),reactExports.createElement(RouteContext.Provider,{value:ar},fr)}function _renderMatches(cr,ar,dr){var fr;if(ar===void 0&&(ar=[]),dr===void 0&&(dr=null),cr==null){var hr;if((hr=dr)!=null&&hr.errors)cr=dr.matches;else return null}let pr=cr,mr=(fr=dr)==null?void 0:fr.errors;if(mr!=null){let gr=pr.findIndex(yr=>yr.route.id&&mr?.[yr.route.id]);gr>=0||invariant(!1),pr=pr.slice(0,Math.min(pr.length,gr+1))}return pr.reduceRight((gr,yr,xr)=>{let wr=yr.route.id?mr?.[yr.route.id]:null,br=null;dr&&(br=yr.route.errorElement||defaultErrorElement);let Sr=ar.concat(pr.slice(0,xr+1)),vr=()=>{let Er;return wr?Er=br:yr.route.Component?Er=reactExports.createElement(yr.route.Component,null):yr.route.element?Er=yr.route.element:Er=gr,reactExports.createElement(RenderedRoute,{match:yr,routeContext:{outlet:gr,matches:Sr,isDataRoute:dr!=null},children:Er})};return dr&&(yr.route.ErrorBoundary||yr.route.errorElement||xr===0)?reactExports.createElement(RenderErrorBoundary,{location:dr.location,revalidation:dr.revalidation,component:br,error:wr,children:vr(),routeContext:{outlet:null,matches:Sr,isDataRoute:!0}}):vr()},null)}var DataRouterStateHook$1=function(cr){return cr.UseBlocker="useBlocker",cr.UseLoaderData="useLoaderData",cr.UseActionData="useActionData",cr.UseRouteError="useRouteError",cr.UseNavigation="useNavigation",cr.UseRouteLoaderData="useRouteLoaderData",cr.UseMatches="useMatches",cr.UseRevalidator="useRevalidator",cr.UseNavigateStable="useNavigate",cr.UseRouteId="useRouteId",cr}(DataRouterStateHook$1||{});function useDataRouterState(cr){let ar=reactExports.useContext(DataRouterStateContext);return ar||invariant(!1),ar}function useRouteContext(cr){let ar=reactExports.useContext(RouteContext);return ar||invariant(!1),ar}function useCurrentRouteId(cr){let ar=useRouteContext(),dr=ar.matches[ar.matches.length-1];return dr.route.id||invariant(!1),dr.route.id}function useRouteError(){var cr;let ar=reactExports.useContext(RouteErrorContext),dr=useDataRouterState(DataRouterStateHook$1.UseRouteError),fr=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return ar||((cr=dr.errors)==null?void 0:cr[fr])}const START_TRANSITION="startTransition",startTransitionImpl=$2AODx$react[START_TRANSITION];function RouterProvider(cr){let{fallbackElement:ar,router:dr,future:fr}=cr,[hr,pr]=reactExports.useState(dr.state),{v7_startTransition:mr}=fr||{},gr=reactExports.useCallback(br=>{mr&&startTransitionImpl?startTransitionImpl(()=>pr(br)):pr(br)},[pr,mr]);reactExports.useLayoutEffect(()=>dr.subscribe(gr),[dr,gr]);let yr=reactExports.useMemo(()=>({createHref:dr.createHref,encodeLocation:dr.encodeLocation,go:br=>dr.navigate(br),push:(br,Sr,vr)=>dr.navigate(br,{state:Sr,preventScrollReset:vr?.preventScrollReset}),replace:(br,Sr,vr)=>dr.navigate(br,{replace:!0,state:Sr,preventScrollReset:vr?.preventScrollReset})}),[dr]),xr=dr.basename||"/",wr=reactExports.useMemo(()=>({router:dr,navigator:yr,static:!1,basename:xr}),[dr,yr,xr]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:wr},reactExports.createElement(DataRouterStateContext.Provider,{value:hr},reactExports.createElement(Router,{basename:xr,location:hr.location,navigationType:hr.historyAction,navigator:yr},hr.initialized?reactExports.createElement(DataRoutes,{routes:dr.routes,state:hr}):ar))),null)}function DataRoutes(cr){let{routes:ar,state:dr}=cr;return useRoutesImpl(ar,void 0,dr)}function Router(cr){let{basename:ar="/",children:dr=null,location:fr,navigationType:hr=Action.Pop,navigator:pr,static:mr=!1}=cr;useInRouterContext()&&invariant(!1);let gr=ar.replace(/^\/*/,"/"),yr=reactExports.useMemo(()=>({basename:gr,navigator:pr,static:mr}),[gr,pr,mr]);typeof fr=="string"&&(fr=parsePath(fr));let{pathname:xr="/",search:wr="",hash:br="",state:Sr=null,key:vr="default"}=fr,Er=reactExports.useMemo(()=>{let Ar=stripBasename(xr,gr);return Ar==null?null:{location:{pathname:Ar,search:wr,hash:br,state:Sr,key:vr},navigationType:hr}},[gr,xr,wr,br,Sr,vr,hr]);return Er==null?null:reactExports.createElement(NavigationContext.Provider,{value:yr},reactExports.createElement(LocationContext.Provider,{children:dr,value:Er}))}new Promise(()=>{});function mapRouteProperties(cr){let ar={hasErrorBoundary:cr.ErrorBoundary!=null||cr.errorElement!=null};return cr.Component&&Object.assign(ar,{element:reactExports.createElement(cr.Component),Component:void 0}),cr.ErrorBoundary&&Object.assign(ar,{errorElement:reactExports.createElement(cr.ErrorBoundary),ErrorBoundary:void 0}),ar}/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(cr){for(var ar=1;ar<arguments.length;ar++){var dr=arguments[ar];for(var fr in dr)Object.prototype.hasOwnProperty.call(dr,fr)&&(cr[fr]=dr[fr])}return cr},_extends$2.apply(this,arguments)}function createBrowserRouter(cr,ar){return createRouter({basename:ar?.basename,future:_extends$2({},ar?.future,{v7_prependBasename:!0}),history:createBrowserHistory({window:ar?.window}),hydrationData:ar?.hydrationData||parseHydrationData(),routes:cr,mapRouteProperties}).initialize()}function parseHydrationData(){var cr;let ar=(cr=window)==null?void 0:cr.__staticRouterHydrationData;return ar&&ar.errors&&(ar=_extends$2({},ar,{errors:deserializeErrors(ar.errors)})),ar}function deserializeErrors(cr){if(!cr)return null;let ar=Object.entries(cr),dr={};for(let[fr,hr]of ar)if(hr&&hr.__type==="RouteErrorResponse")dr[fr]=new ErrorResponseImpl(hr.status,hr.statusText,hr.data,hr.internal===!0);else if(hr&&hr.__type==="Error"){if(hr.__subType){let pr=window[hr.__subType];if(typeof pr=="function")try{let mr=new pr(hr.message);mr.stack="",dr[fr]=mr}catch{}}if(dr[fr]==null){let pr=new Error(hr.message);pr.stack="",dr[fr]=pr}}else dr[fr]=hr;return dr}var DataRouterHook;(function(cr){cr.UseScrollRestoration="useScrollRestoration",cr.UseSubmit="useSubmit",cr.UseSubmitFetcher="useSubmitFetcher",cr.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(cr){cr.UseFetchers="useFetchers",cr.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));const createStoreImpl=cr=>{let ar;const dr=new Set,fr=(yr,xr)=>{const wr=typeof yr=="function"?yr(ar):yr;if(!Object.is(wr,ar)){const br=ar;ar=xr??typeof wr!="object"?wr:Object.assign({},ar,wr),dr.forEach(Sr=>Sr(ar,br))}},hr=()=>ar,gr={setState:fr,getState:hr,subscribe:yr=>(dr.add(yr),()=>dr.delete(yr)),destroy:()=>{dr.clear()}};return ar=cr(fr,hr,gr),gr},createStore=cr=>cr?createStoreImpl(cr):createStoreImpl;var withSelector={exports:{}},withSelector_production_min={},shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$4=reactExports;function h$7(cr,ar){return cr===ar&&(cr!==0||1/cr===1/ar)||cr!==cr&&ar!==ar}var k$4=typeof Object.is=="function"?Object.is:h$7,l$5=e$4.useState,m$6=e$4.useEffect,n$7=e$4.useLayoutEffect,p$6=e$4.useDebugValue;function q$7(cr,ar){var dr=ar(),fr=l$5({inst:{value:dr,getSnapshot:ar}}),hr=fr[0].inst,pr=fr[1];return n$7(function(){hr.value=dr,hr.getSnapshot=ar,r$8(hr)&&pr({inst:hr})},[cr,dr,ar]),m$6(function(){return r$8(hr)&&pr({inst:hr}),cr(function(){r$8(hr)&&pr({inst:hr})})},[cr]),p$6(dr),dr}function r$8(cr){var ar=cr.getSnapshot;cr=cr.value;try{var dr=ar();return!k$4(cr,dr)}catch{return!0}}function t$6(cr,ar){return ar()}var u$3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$6:q$7;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$4.useSyncExternalStore!==void 0?e$4.useSyncExternalStore:u$3;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$6=reactExports,n$6=shimExports;function p$5(cr,ar){return cr===ar&&(cr!==0||1/cr===1/ar)||cr!==cr&&ar!==ar}var q$6=typeof Object.is=="function"?Object.is:p$5,r$7=n$6.useSyncExternalStore,t$5=h$6.useRef,u$2=h$6.useEffect,v$5=h$6.useMemo,w$7=h$6.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(cr,ar,dr,fr,hr){var pr=t$5(null);if(pr.current===null){var mr={hasValue:!1,value:null};pr.current=mr}else mr=pr.current;pr=v$5(function(){function yr(vr){if(!xr){if(xr=!0,wr=vr,vr=fr(vr),hr!==void 0&&mr.hasValue){var Er=mr.value;if(hr(Er,vr))return br=Er}return br=vr}if(Er=br,q$6(wr,vr))return Er;var Ar=fr(vr);return hr!==void 0&&hr(Er,Ar)?Er:(wr=vr,br=Ar)}var xr=!1,wr,br,Sr=dr===void 0?null:dr;return[function(){return yr(ar())},Sr===null?void 0:function(){return yr(Sr())}]},[ar,dr,fr,hr]);var gr=r$7(cr,pr[0],pr[1]);return u$2(function(){mr.hasValue=!0,mr.value=gr},[gr]),w$7(gr),gr};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports;let didWarnAboutEqualityFn=!1;function useStore$1(cr,ar=cr.getState,dr){const fr=useSyncExternalStoreWithSelector(cr.subscribe,cr.getState,cr.getServerState||cr.getState,ar,dr);return reactExports.useDebugValue(fr),fr}const createImpl=cr=>{const ar=typeof cr=="function"?createStore(cr):cr,dr=(fr,hr)=>useStore$1(ar,fr,hr);return Object.assign(dr,ar),dr},create$7=cr=>cr?createImpl(cr):createImpl,useStore=create$7(()=>({networkLayer:null,headlessLayer:null,localLayer:null,phaserLayer:null,externalWalletClient:null,externalWorldContract:null,writes:[]}));async function Ae$3(cr,ar){let[dr,,fr]=p$7(),{targets:hr}=cr;if(!(!hr.scene||!hr.scene.tweens))return ar?.keepExistingTweens||H$3(hr),hr.scene.tweens.add({...cr,onComplete:(pr,mr)=>{cr.onComplete&&cr.onComplete(pr,mr),dr()}}),fr}function H$3(cr){let ar=cr.scene.tweens;for(let dr of ar.tweens)dr.hasTarget(cr)&&dr.stop()}function I$3(cr,ar){return(cr%ar+ar)%ar}var Oe$2={x:0,y:0};function q$5(cr,ar){return!cr&&!ar?!0:!cr||!ar?!1:cr.x===ar.x&&cr.y===ar.y}function z$4(cr,ar){return{x:Math.floor(cr.x/ar),y:Math.floor(cr.y/ar)}}function $$5(cr,ar){return{x:cr.x*ar,y:cr.y*ar}}function se$3(cr,ar,dr){return{x:Math.floor(cr.x/ar),y:Math.floor(cr.y/dr)}}function B$4(cr,ar,dr){return{x:cr.x*ar,y:cr.y*dr}}function W$2(cr,ar,dr,fr){let hr=B$4(cr,ar,dr);return z$4(hr,fr)}function X$3(cr,ar,dr,fr){let hr=$$5(cr,fr);return se$3(hr,ar,dr)}async function Y$2(cr,ar){let dr=cr.load;ar(dr),dr.start();let[fr,,hr]=p$7();return dr.on("complete",()=>{fr()}),hr}function U$3(cr,ar){let dr={x:cr.x,y:cr.y},fr={x:cr.x+cr.width,y:cr.y+cr.height},hr=z$4(dr,ar),pr=z$4(fr,ar),mr=pr.x-hr.x+1,gr=pr.y-hr.y+1,yr=new A$5;for(let xr=0;xr<mr;xr++)for(let wr=0;wr<gr;wr++)yr.set({x:hr.x+xr,y:hr.y+wr},!0);return yr}function Z$3(cr,ar){return ar.prefix&&ar.suffix?cr.generateFrameNames(ar.assetKey,{start:ar.startFrame,end:ar.endFrame,prefix:ar.prefix,suffix:ar.suffix}):cr.generateFrameNumbers(ar.assetKey,{start:ar.startFrame,end:ar.endFrame})}function ie$3(cr){let{preload:ar,create:dr,update:fr,key:hr}=cr;return class extends Phaser.Scene{constructor(){super({key:hr})}preload(){ar&&ar(this)}create(){dr&&dr(this)}update(){fr&&fr(this)}}}function ae$3(cr){return{type:Phaser.WEBGL,scale:cr.scale,pixelArt:!0,autoFocus:!0,render:{antialiasGL:!1,pixelArt:!0},scene:cr.scenes}}var ce$3=(cr=>(cr[cr.Image=0]="Image",cr[cr.SpriteSheet=1]="SpriteSheet",cr[cr.MultiAtlas=2]="MultiAtlas",cr))(ce$3||{}),J$3={Sprite:Phaser.GameObjects.Sprite,Rectangle:Phaser.GameObjects.Rectangle,Line:Phaser.GameObjects.Line,Text:Phaser.GameObjects.Text};function Q$3(cr,ar,dr=100){let fr={current:new A$5},hr=new Subject,pr=new Subject;return cr.pipe(map$1(({x:mr,y:gr,width:yr,height:xr})=>U$3({x:mr-dr,y:gr-dr,width:yr+2*dr,height:xr+2*dr},ar))).subscribe(mr=>{let gr=Ne$2(mr,fr.current);for(let xr of gr.coords())hr.next(xr);let yr=Ne$2(fr.current,mr);for(let xr of yr.coords())pr.next(xr);fr.current=mr}),{addedChunks$:hr.asObservable(),removedChunks$:pr.asObservable(),chunkSize:ar,visibleChunks:fr}}function le$2(cr){document.addEventListener("gesturestart",xr=>xr.preventDefault()),document.addEventListener("gesturechange",xr=>xr.preventDefault());let ar=new BehaviorSubject(cr.worldView),dr=new BehaviorSubject(cr.zoom),fr=()=>{requestAnimationFrame(()=>ar.next(cr.worldView))};cr.scene.scale.addListener("resize",fr);function hr(xr){cr.setZoom(xr),ar.next(cr.worldView),dr.next(xr)}function pr(xr,wr){xr.ignoreCamera(cr.id,wr)}function mr(xr,wr,br){let Sr=B$4(xr,wr,br);gr(Sr.x,Sr.y)}function gr(xr,wr){cr.centerOn(Math.floor(xr),Math.floor(wr)),requestAnimationFrame(()=>ar.next(cr.worldView))}function yr(xr,wr){cr.setScroll(Math.floor(xr),Math.floor(wr)),requestAnimationFrame(()=>ar.next(cr.worldView))}return{phaserCamera:cr,worldView$:ar,zoom$:dr,ignore:pr,dispose:()=>{cr.scene.scale.removeListener("resize",fr)},centerOnCoord:mr,centerOn:gr,setScroll:yr,setZoom:hr}}function He$2(){let cr=new A$5,ar=new Map;function dr(pr){let mr=cr.get(pr);return mr||(mr=new Set,cr.set(pr,mr)),mr}function fr(pr,mr){let gr=ar.get(pr);(gr&&dr(gr))?.delete(pr),dr(mr).add(pr),ar.set(pr,mr)}function hr(pr){let mr=ar.get(pr);(mr&&dr(mr))?.delete(pr),ar.delete(pr)}return{set:fr,remove:hr,get:dr}}function pe$2(cr,ar,dr){let fr=He$2(),hr=new Map,pr=pipe$1(map$1(wr=>from$5(fr.get(wr))),mergeMap(wr=>wr),map$1(wr=>cr.get(wr,"Existing")),ur()),mr=dr.addedChunks$.pipe(pr).subscribe(wr=>wr.spawn()),gr=dr.removedChunks$.pipe(pr).subscribe(wr=>wr.despawn());function yr(wr){hr.get(wr.id)&&console.error("Entity is being tracked multiple times",wr);let br=computed(()=>z$4(wr.position,dr.chunkSize),{equals:q$5}),Sr=reaction(()=>br.get(),vr=>{fr.set(wr.id,vr),dr.visibleChunks.current.get(vr)?wr.spawn():wr.despawn()},{fireImmediately:!0});hr.set(wr.id,Sr)}let xr=observe(cr.objects,wr=>{if(wr.type==="add"&&yr(wr.newValue),wr.type==="delete"){fr.remove(wr.oldValue.id);let br=hr.get(wr.oldValue.id);br&&br(),hr.delete(wr.oldValue.id)}});return{dispose:()=>{for(let wr of hr.values())wr();xr(),mr.unsubscribe(),gr.unsubscribe()}}}function _t$2(cr){return cr}function qt$2(cr){return cr}function Xt$2(cr){return cr}function Yt$2(cr){return cr}function ee$3(cr,ar){return ar==="Sprite"}function ye$2(cr,ar){return ar==="Rectangle"}function xe$2(cr,ar,dr,fr=0){let hr=observable$1({x:0,y:0}),pr=new Map,mr=new Map,gr,yr={current:fr};function xr(Cr){return he$2(Cr)?kr=>{Cr(kr),runInAction(()=>{hr.x=kr.x,hr.y=kr.y})}:Cr}async function wr({id:Cr,now:kr,once:Rr,update:Ir}){let Nr=Rr&&he$2(Rr);Nr&&runInAction(()=>{hr.x=Nr.x??hr.x,hr.y=Nr.y??hr.y}),Rr&&pr.set(Cr,xr(Rr)),Ir&&mr.set(Cr,xr(Ir)),gr&&kr&&await xr(kr)(gr),gr&&Rr&&Rr(gr)}function br(Cr){return pr.has(Cr)||mr.has(Cr)}function Sr(Cr,kr){pr.delete(Cr),mr.delete(Cr),gr&&(vr(gr,kr),Ce$2(gr,pr.values()))}function vr(Cr,kr=!0){kr&&(ee$3(Cr,dr)&&Cr.stop(),H$3(Cr)),Cr.setDepth(10),Cr.cameraFilter=yr.current,Cr.setScale(1,1),Cr.setOrigin(0,0),Cr.setAlpha(1),Cr.setScrollFactor(1),Cr.clearMask(),Cr.setData("objectPoolId",null),ee$3(Cr,dr)&&(Cr.clearTint(),Cr.setTexture(""),Cr.flipX=!1,Cr.flipY=!1),ye$2(Cr,dr)&&(Cr.width=0,Cr.height=0)}function Er(Cr){yr.current=Cr,gr&&(gr.cameraFilter=Cr)}function Ar(){if(gr)return;let Cr=ar.get();vr(Cr),Ce$2(Cr,pr.values()),Cr.setActive(!0),Cr.setVisible(!0),Cr.setData("objectPoolId",cr),gr=Cr}function _r(){gr&&ar.killAndHide(gr),gr=void 0}return{setComponent:wr,hasComponent:br,removeComponent:Sr,spawn:Ar,despawn:_r,position:hr,id:cr,setCameraFilter:Er,type:dr}}function Ce$2(cr,ar){if(cr)for(let dr of ar)dr(cr)}function he$2(cr){let ar,dr=new Proxy({x:void 0,y:void 0},{get:(fr,hr)=>hr==="setPosition"?(pr,mr)=>ar={x:pr,y:mr}:hr==="setX"?pr=>ar={x:pr}:hr==="setY"?pr=>ar={y:pr}:()=>{},set:(fr,hr,pr)=>(hr==="x"&&(ar=ar?{...ar,x:pr}:{x:pr}),hr==="y"&&(ar=ar?{...ar,y:pr}:{y:pr}),!0)});return cr(dr),ar}function Xe$2(cr){return Object.keys(J$3).includes(cr)}function Te$3(cr){let ar=$r(J$3,gr=>cr.add.group({classType:gr})),dr=observable$1(new Map),fr={current:0};function hr(gr,yr){typeof gr=="number"&&(gr=String(gr));let xr=dr.get(gr);return Xe$2(yr)?(xr||(xr=xe$2(gr,ar[yr],yr,fr.current)),dr.has(gr)||dr.set(gr,xr),xr):xr||void 0}function pr(gr){typeof gr=="number"&&(gr=String(gr));let yr=dr.get(gr);yr&&yr.despawn(),dr.delete(gr)}function mr(gr,yr){yr?fr.current|=gr:fr.current&=~gr;for(let xr of dr.values())xr.setCameraFilter(fr.current)}return{get:hr,remove:pr,objects:dr,groups:ar,ignoreCamera:mr}}function te$3(cr){let{scene:ar,tilesets:dr,layerConfig:fr,chunks:hr,backgroundTile:pr,tiles:mr,tileWidth:gr,tileHeight:yr}=cr,xr=Object.keys(fr.layers).map(jr=>fr.layers[jr].tilesets).flat();if(I$3(hr.chunkSize,gr)!==0||I$3(hr.chunkSize,yr)!==0)throw new Error("Chunks pixel size must be a multiple of tile width and height to be used with chunked tilemap");let wr=new A$5,br={x:hr.chunkSize/gr,y:hr.chunkSize/yr},Sr=new Set,vr={current:!0};for(let jr of hr.visibleChunks.current.coords())Pr(jr);let Er=hr.addedChunks$.subscribe(jr=>{Pr(jr)}),Ar=hr.removedChunks$.subscribe(jr=>{Ir(jr)});Sr.add(()=>Er?.unsubscribe()),Sr.add(()=>Ar?.unsubscribe);function _r(jr,Ur,qr,Hr,Or,Mr){let Lr={};for(let Vr of Object.keys(fr.layers)){let Jr=fr.layers[Vr],es=jr.createBlankLayer(Vr,Jr.tilesets.map(ns=>dr[ns]),qr,Hr,Or,Mr);if(!es){console.error(`Adding tilemap layer ${Vr} failed.`);continue}Lr[Vr]=es}return{layers:Object.values(Lr),defaultLayer:Lr[fr.defaultLayer]}}function Cr(jr){let Ur=new Phaser.Tilemaps.MapData({tileHeight:yr,tileWidth:gr,width:br.x,height:br.y,tilesets:Object.entries(dr).filter(([Mr])=>xr.includes(Mr)).map(([,Mr])=>Mr)}),qr=new Phaser.Tilemaps.Tilemap(ar,Ur),Hr=$$5(jr,hr.chunkSize),{defaultLayer:Or}=_r(qr,ar,Hr.x,Hr.y,br.x,br.y);return qr.setLayer(Or),wr.set(jr,qr),qr}function kr(jr){return wr.get(jr)||Cr(jr)}function Rr(jr){let Ur=W$2(jr,gr,yr,hr.chunkSize);return kr(Ur)}function Ir(jr,Ur){!vr.current&&!Ur||!wr.has(jr)||(kr(jr).destroy(),wr.delete(jr))}function Nr(jr,Ur,qr,Hr){if(!vr.current)return;let Or=Rr(jr),Mr=Or.putTileAt(Ur,I$3(jr.x,br.x),I$3(jr.y,br.y),void 0,qr);if(Mr==null)throw new Error("putTileAt failed");Mr.width=Or.tileWidth,Mr.height=Or.tileHeight,Hr&&(Mr.tint=Hr)}function Pr(jr){if(!vr.current)return;let Ur=kr(jr),qr=X$3(jr,gr,yr,hr.chunkSize);for(let Hr of Object.keys(fr.layers))Ur.forEachTile(Or=>{let Mr={x:qr.x+Or.x,y:qr.y+Or.y},Lr=Hr===fr.defaultLayer?Yr(pr):-1,Vr=mr[Hr].get(Mr)||Lr;Or.index=Vr},void 0,void 0,void 0,void 0,void 0,void 0,Hr)}function Tr(){for(let jr of wr.values())jr.destroy();wr.clear();for(let jr of Sr)jr()}function Br(){return wr.size}function Fr(jr){if(jr!==vr.current){vr.current=jr;for(let Ur of hr.visibleChunks.current.coords())vr.current?Pr(Ur):Ir(Ur,!0)}}return{size:Br,putTileAt:Nr,dispose:Tr,setVisible:Fr,visible:vr,tileWidth:gr,tileHeight:yr}}function oe$3(cr){let{chunks:ar,layerConfig:{layers:dr,defaultLayer:fr},tileWidth:hr,tileHeight:pr}=cr,mr={};for(let xr of Object.keys(dr))mr[xr]=new A$5;let gr=te$3({...cr,tiles:mr});function yr(xr,wr,br,Sr){mr[br||fr].set(xr,wr);let vr=W$2(xr,hr,pr,ar.chunkSize);gr.visible&&ar.visibleChunks.current.get(vr)&&gr.putTileAt(xr,wr,br,Sr)}return{...gr,putTileAt:yr,tiles:mr}}function ne$2(cr){let{layerConfig:{layers:ar,defaultLayer:dr},animationInterval:fr,scene:hr}=cr,pr=dr,mr=0,gr={},yr={};for(let Rr of Object.keys(ar))yr[Rr]=new A$5;let xr={};for(let Rr of Object.keys(ar))xr[Rr]=new A$5;let wr=oe$3(cr);function br(Rr,Ir){gr[Rr]={frames:Ir,index:0}}function Sr(Rr,Ir,Nr=pr){yr[Nr].set(Rr,Ir)}function vr(Rr,Ir=pr){let Nr=yr[Ir].get(Rr),Pr=Nr&&gr[Nr];yr[Ir].delete(Rr),Pr&&wr.putTileAt(Rr,Pr.frames[0],Ir)}function Er(Rr,Ir=pr){let Nr=yr[Ir].get(Rr);Nr&&(xr[Ir].set(Rr,Nr),vr(Rr,Ir))}function Ar(Rr,Ir=pr){let Nr=xr[Ir].get(Rr);Nr&&(xr[Ir].delete(Rr),Sr(Rr,Nr,Ir))}function _r(){for(let Rr of Object.keys(gr)){let Ir=gr[Rr];Ir&&(Ir.index=I$3(Ir.index+1,Ir.frames.length))}for(let Rr of Object.keys(yr)){let Ir=yr[Rr];for(let Nr of Ir.coords()){let Pr=Ir.get(Nr),Tr=Pr&&gr[Pr];if(!Tr)continue;let Br=Tr.frames[Tr.index];wr.putTileAt(Nr,Br,Rr)}}}function Cr(Rr){Rr<mr+fr||(mr=Rr,_r())}function kr(){hr.events.removeListener("update",Cr),wr.dispose()}return hr.events.addListener("update",Cr),{...wr,putAnimationAt:Sr,removeAnimationAt:vr,pauseAnimationAt:Er,resumeAnimationAt:Ar,registerAnimation:br,dispose:kr}}function ve$2(cr){let ar=new Set,dr={current:!0};cr.mouse?.disableContextMenu();function fr(){dr.current=!1}function hr(){dr.current=!0}function pr(Pr){cr.setDefaultCursor(Pr)}let mr=new Subject,gr=fromEvent$1(document,"mousemove").pipe(filter$2(()=>dr.current),map$1(()=>({pointer:cr.manager?.activePointer})),ur()),yr=fromEvent$1(document,"mousedown").pipe(filter$2(()=>dr.current),map$1(Pr=>({pointer:cr.manager?.activePointer,event:Pr})),ur()),xr=fromEvent$1(document,"mouseup").pipe(filter$2(()=>dr.current),map$1(Pr=>({pointer:cr.manager?.activePointer,event:Pr})),ur()),wr=merge$2(yr,xr).pipe(filter$2(()=>dr.current),map$1(({event:Pr})=>[Pr.type==="mousedown"&&Pr.button===0,Date.now()]),bufferCount(2,1),filter$2(([Pr,Tr])=>Pr[0]&&!Tr[0]&&Tr[1]-Pr[1]<250),map$1(()=>cr.manager?.activePointer),ur()),br=yr.pipe(filter$2(()=>dr.current),map$1(()=>Date.now()),bufferCount(2,1),filter$2(([Pr,Tr])=>Tr-Pr<500),throttleTime(500),map$1(()=>cr.manager?.activePointer),ur()),Sr=merge$2(yr,xr).pipe(filter$2(({pointer:Pr})=>dr.current&&Pr.rightButtonDown()),map$1(()=>cr.manager?.activePointer),ur()),vr=merge$2(yr.pipe(map$1(()=>{})),merge$2(xr,gr).pipe(pairwise(),scan((Pr,[{pointer:Tr},{pointer:Br}])=>Br.leftButtonDown()?Tr.leftButtonDown()&&Pr?{...Pr,width:Br.worldX-Pr.x,height:Br.worldY-Pr.y}:{x:Br.worldX,y:Br.worldY,width:0,height:0}:void 0,void 0),ur(),filter$2(Pr=>Math.abs(Pr.width)>10&&Math.abs(Pr.height)>10))).pipe(filter$2(()=>dr.current),distinctUntilChanged()),Er=observable$1(new Set),Ar=cr.keyboard,_r=new Map;for(let Pr of Object.keys(Phaser.Input.Keyboard.KeyCodes))Rr(Pr);let Cr=mr.pipe(filter$2(()=>dr.current)).subscribe(Pr=>{let Tr=_r.get(Pr.keyCode);Tr&&runInAction(()=>{Pr.isDown&&Er.add(Tr),Pr.isUp&&Er.delete(Tr)})});ar.add(()=>Cr?.unsubscribe());let kr=merge$2(yr,xr).subscribe(({pointer:Pr})=>{runInAction(()=>{Pr.leftButtonDown()?Er.add("POINTER_LEFT"):Er.delete("POINTER_LEFT"),Pr.rightButtonDown()?Er.add("POINTER_RIGHT"):Er.delete("POINTER_RIGHT")})});ar.add(()=>kr?.unsubscribe());function Rr(Pr){if(!Ar){console.warn(`Adding key ${Pr} failed. No phaser keyboard detected.`);return}let Tr=Ar.addKey(Pr,!1);_r.set(Tr.keyCode,Pr),Tr.removeAllListeners(),Tr.emitOnRepeat=!0,Tr.on("down",Br=>mr.next(Br)),Tr.on("up",Br=>mr.next(Br))}function Ir(Pr,Tr){let Br=reaction(()=>Pr(Er),Fr=>{Fr&&Tr()},{fireImmediately:!0});ar.add(Br)}function Nr(){for(let Pr of ar)Pr()}return{keyboard$:mr.asObservable(),pointermove$:gr,pointerdown$:yr,pointerup$:xr,click$:wr,doubleClick$:br,rightClick$:Sr,drag$:vr,pressedKeys:Er,dispose:Nr,disableInput:fr,enableInput:hr,setCursor:pr,enabled:dr,onKeyPress:Ir}}async function Vo(cr){let{scale:ar,sceneConfig:dr,cullingChunkSize:fr}=cr,hr=Object.keys(dr).map(Sr=>{let{preload:vr,create:Er,update:Ar}=dr[Sr];return ie$3({key:Sr,preload:vr,create:Er,update:Ar})}),pr=ae$3({scenes:hr,scale:ar}),mr=new Phaser.Game(pr),[gr,,yr]=p$7();mr.events.on("ready",gr),pr.type===Phaser.HEADLESS&&mr.textures.emit("ready"),await yr;function xr(){let Sr=window.innerWidth/mr.scale.zoom,vr=window.innerHeight/mr.scale.zoom;mr.scale.resize(Sr,vr)}xr(),window.addEventListener("resize",xr);let wr={};for(let Sr of mr.scene.getScenes(!1)){let vr=Sr.scene.key,Er=dr[vr];for(let[Fr,jr]of Object.entries(dr[vr].assets))await Y$2(Sr,Ur=>{jr.type===0?Ur.image(Fr,jr.path):jr.type===1?Ur.spritesheet(Fr,jr.path,jr.options):jr.type===2&&Ur.multiatlas(Fr,jr.path,jr.options.imagePath)});let Ar=Te$3(Sr),_r=le$2(Sr.cameras.main),Cr=Q$3(_r.worldView$,fr),kr=pe$2(Ar,_r,Cr);for(let Fr of Er.animations)Sr.anims.create({key:Fr.key,frames:Z$3(Sr.anims,Fr),frameRate:Fr.frameRate,repeat:Fr.repeat});let Rr=new Phaser.Tilemaps.Tilemap(Sr,new Phaser.Tilemaps.MapData),Ir={};for(let[Fr,{assetKey:jr,tileWidth:Ur,tileHeight:qr}]of Object.entries(dr[vr].tilesets)){let Hr=Rr.addTilesetImage(Fr,jr,Ur,qr);if(!Hr){console.error(`Adding tileset ${Fr} failed.`);continue}Ir[Fr]=Hr}let Nr=Ir,Pr={};for(let Fr of Object.keys(Er.maps)){let{layers:jr,backgroundTile:Ur,tileWidth:qr,tileHeight:Hr,animationInterval:Or,tileAnimations:Mr,chunkSize:Lr}=Er.maps[Fr],Vr=Q$3(_r.worldView$,Lr),Jr=ne$2({scene:Sr,tilesets:Nr,layerConfig:jr,chunks:Vr,tileWidth:qr,tileHeight:Hr,backgroundTile:Ur,animationInterval:Or});if(Mr)for(let[es,ns]of Object.entries(Mr))Jr.registerAnimation(es,ns);Pr[Fr]=Jr}let Tr=Pr,Br=ve$2(Sr.input);wr[vr]={phaserScene:Sr,objectPool:Ar,camera:_r,culling:kr,maps:Tr,input:Br,config:dr[vr]}}let br=wr;return{game:mr,scenes:br,dispose:()=>{mr.destroy(!0);for(let Sr of Object.keys(br)){let vr=br[Sr];vr.camera.dispose(),vr.culling.dispose(),vr.input.dispose();for(let Er of Object.values(vr.maps))Er.dispose()}window.removeEventListener("resize",xr)}}}function createClientComponents({components:cr,world:ar}){return{...cr,NetworkChargeCap:cr.ChargeCap,ChargeCap:ie$4(ar,cr.ChargeCap.schema,{metadata:cr.ChargeCap.metadata}),Transaction:ie$4(ar,{entity:P$1.OptionalEntity,systemCall:P$1.String,systemId:P$1.String,gasEstimate:P$1.OptionalBigInt,manualGasEstimate:P$1.Boolean,gasPrice:P$1.OptionalBigInt,status:P$1.String,hash:P$1.OptionalString,error:P$1.OptionalString,submittedBlock:P$1.OptionalBigInt,completedBlock:P$1.OptionalBigInt,submittedTimestamp:P$1.OptionalBigInt,completedTimestamp:P$1.OptionalBigInt}),MatchJoinable:ie$4(ar,{value:P$1.Boolean}),OwnedByCurrentPlayer:ie$4(ar,{value:P$1.Boolean},{id:"OwnedByCurrentPlayer"}),BuildingUnit:ie$4(ar,{factory:P$1.Entity,unitType:P$1.Number,staminaCost:P$1.Number,prototypeId:P$1.Entity},{id:"BuildingUnit"})}}const world=ft$2(),mudConfig=m$8({userTypes:{PackedCounter:{filePath:"@latticexyz/store/src/PackedCounter.sol",internalType:"bytes32"},ResourceId:{filePath:"@latticexyz/store/src/ResourceId.sol",internalType:"bytes32"}},enums:{UnitTypes:["Unknown","Swordsman","Pikeman","Golem","Rider","Knight","Dragon","Archer","Catapult","Wizard","Brute"],CombatArchetypes:["Unknown","Swordsman","Pikeman","Golem","Rider","Knight","Dragon","Archer","Catapult","Wizard","Settlement","SpawnSettlement","GoldMine","Brute"],TerrainTypes:["Unknown","Grass","Mountain","Water","Wall","Forest","StoneWall","LavaGround","LavaMountain","LavaForest","Lava","RockWall"],StructureTypes:["Unknown","Settlement","SpawnSettlement","GoldShrine","EscapePortal","Portal","Container","SummoningAltar","BlazingHeartShrine","WoodenWall","GoldMine","Village","EmberCrownShrine","CrystalGenerator","MetalGenerator","FossilGenerator","WidgetGenerator"],ItemTypes:["Unknown","Gold","EmberCrown","BlazingHeart","MovementBanner","SwordBanner","StaminaBanner","Crystal","Metal","Fossil","Widget"]},systems:{AttackSystem:{openAccess:!1,accessList:[],name:"AttackSystem"},CombatOutcomeSystem:{openAccess:!1,accessList:[],name:"CombatOutcomeSystem"},FinishSystem:{openAccess:!1,accessList:[],name:"FinishSystem"},PlayerSetupSystem:{openAccess:!1,accessList:[],name:"PlayerSetupSystem"}},excludeSystems:["SeasonPassOnlySystem"],tables:{Match:{offchainOnly:!0,keySchema:{matchEntityKey:"bytes32",entity:"bytes32"},valueSchema:{matchEntity:"bytes32"}},ArmorModifier:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"int32"},Capturable:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"bool"},ChargedByStart:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"uint256"},Chargee:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"bytes32"},Chargers:{keySchema:{matchEntity:"bytes32",chargee:"bytes32"},valueSchema:{chargers:"bytes32[]"}},Charger:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"int32"},ChargeCap:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:{cap:"int32",totalCharged:"int32"}},Combat:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:{health:"int32",maxHealth:"int32",armor:"int32",strength:"int32",structureStrength:"int32",counterStrength:"int32"}},CombatArchetype:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"CombatArchetypes"},ArchetypeModifier:{keySchema:{attacker:"CombatArchetypes",defender:"CombatArchetypes"},valueSchema:{mod:"int32",attackerArchetype:"CombatArchetypes",defenderArchetype:"CombatArchetypes"}},StaminaOnKill:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"int32"},CombatOutcome:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:{attacker:"bytes32",defender:"bytes32",attackerDamageReceived:"int32",defenderDamageReceived:"int32",attackerDamage:"int32",defenderDamage:"int32",ranged:"bool",attackerDied:"bool",defenderDied:"bool",defenderCaptured:"bool",blockNumber:"uint256",timestamp:"uint256"}},Factory:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:{prototypeIds:"bytes32[]",staminaCosts:"int32[]"}},ItemType:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"ItemTypes"},LastAction:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"uint256"},MapCenter:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"bool"},Movable:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"int32"},MoveDifficulty:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"int32"},OwnedBy:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"bytes32"},Player:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"uint32"},PlayerReady:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"uint256"},Position:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:{x:"int32",y:"int32"}},EntitiesAtPosition:{keySchema:{matchEntity:"bytes32",x:"int32",y:"int32"},valueSchema:{entities:"bytes32[]"}},Range:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:{min:"int32",max:"int32"}},RequiresSetup:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"bool"},SpawnReservedBy:{keySchema:{matchEntity:"bytes32",index:"uint256"},valueSchema:"bytes32"},SpawnPoint:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"bool"},Stamina:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:{current:"int32"}},StructureType:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"StructureTypes"},TerrainType:{offchainOnly:!0,keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"TerrainTypes"},UnitType:{offchainOnly:!0,keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"UnitTypes"},Untraversable:{keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"bool"},Tier:{offchainOnly:!0,keySchema:{matchEntity:"bytes32",entity:"bytes32"},valueSchema:"uint32"},MatchPlayer:{keySchema:{matchEntity:"bytes32",playerAddress:"address"},valueSchema:{playerEntity:"bytes32"}},Name:"string",Admin:"bool",HeroInRotation:"bool",HeroInSeasonPassRotation:"bool",SkyPoolConfig:{keySchema:{},valueSchema:{cost:"uint256",window:"uint256",orbToken:"address",seasonPassToken:"address",skyKeyToken:"address"}},MatchRewardPercentages:{keySchema:{numPlayers:"uint256"},valueSchema:{percentages:"uint256[]"}},OfficialLevel:{offchainOnly:!0,keySchema:{levelId:"bytes32"},valueSchema:"bool"},LevelInStandardRotation:{keySchema:{levelId:"bytes32"},valueSchema:"bool"},LevelInSeasonPassRotation:{keySchema:{levelId:"bytes32"},valueSchema:"bool"},LastMatchIndex:{keySchema:{},valueSchema:{matchIndex:"uint32"}},MatchIndex:{keySchema:{matchEntity:"bytes32"},valueSchema:{matchIndex:"uint32"}},MatchIndexToEntity:{keySchema:{matchIndex:"uint32"},valueSchema:{matchEntity:"bytes32"}},SeasonPassIndex:{keySchema:{},valueSchema:{tokenIndex:"uint256"}},SeasonPassConfig:{dataStruct:!1,keySchema:{},valueSchema:{minPrice:"uint256",startingPrice:"uint256",rate:"uint256",multiplier:"uint256",mintCutoff:"uint256"}},SeasonTimes:{keySchema:{},dataStruct:!1,valueSchema:{seasonStart:"uint256",seasonEnd:"uint256"}},SeasonPassLastSaleAt:{keySchema:{},valueSchema:{lastSaleAt:"uint256"}},MatchEntityCounter:{keySchema:{matchEntity:"bytes32"},valueSchema:{entityCounter:"uint32"}},MatchSpawnPoints:"bytes32[]",MatchPlayers:"bytes32[]",MatchSky:{valueSchema:{createdAt:"uint256",reward:"uint256"}},MatchName:"string",MatchConfig:{valueSchema:{registrationTime:"uint256",startTime:"uint256",turnLength:"uint256",levelId:"bytes32",createdBy:"bytes32",escrowContract:"address"}},MatchAccessControl:{valueSchema:{systemId:"ResourceId"}},MatchAllowed:{keySchema:{matchEntity:"bytes32",account:"address"},valueSchema:"bool"},MatchFinished:"bool",MatchMapCopyProgress:"uint256",MatchReady:"uint256",MatchRanking:{valueSchema:"bytes32[]"},MatchSweepstake:{dataStruct:!1,valueSchema:{entranceFee:"uint256",rewardPercentages:"uint256[]"}},MatchReward:{keySchema:{entity:"bytes32",rank:"uint256"},valueSchema:"uint256"},TemplateTables:"bytes32[]",TemplateContent:{dataStruct:!1,keySchema:{templateId:"bytes32",tableId:"ResourceId"},valueSchema:{encodedLengths:"PackedCounter",staticData:"bytes",dynamicData:"bytes"}},LevelTemplates:"bytes32[]",LevelTemplatesIndex:{keySchema:{levelId:"bytes32",templateId:"bytes32"},valueSchema:"uint256[]"},LevelPosition:{dataStruct:!1,keySchema:{levelId:"bytes32",index:"uint256"},valueSchema:{x:"int32",y:"int32"}},LevelPositionIndex:{keySchema:{levelId:"bytes32",x:"int32",y:"int32"},valueSchema:"uint256[]"},VirtualLevelTemplates:"bool"},modules:[{name:"KeysWithValueModule",root:!0,args:[te$4("Name")]}]}),IWorldAbi=[{type:"function",name:"adminDestroyMatch",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"attack",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"attacker",type:"bytes32",internalType:"bytes32"},{name:"defender",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"batchCall",inputs:[{name:"systemCalls",type:"tuple[]",internalType:"struct SystemCallData[]",components:[{name:"systemId",type:"bytes32",internalType:"ResourceId"},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"returnDatas",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"nonpayable"},{type:"function",name:"batchCallFrom",inputs:[{name:"systemCalls",type:"tuple[]",internalType:"struct SystemCallFromData[]",components:[{name:"from",type:"address",internalType:"address"},{name:"systemId",type:"bytes32",internalType:"ResourceId"},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"returnDatas",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"nonpayable"},{type:"function",name:"build",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"factoryEntity",type:"bytes32",internalType:"bytes32"},{name:"templateId",type:"bytes32",internalType:"bytes32"},{name:"coord",type:"tuple",internalType:"struct PositionData",components:[{name:"x",type:"int32",internalType:"int32"},{name:"y",type:"int32",internalType:"int32"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"nonpayable"},{type:"function",name:"buySeasonPass",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[],stateMutability:"payable"},{type:"function",name:"call",inputs:[{name:"systemId",type:"bytes32",internalType:"ResourceId"},{name:"callData",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes",internalType:"bytes"}],stateMutability:"payable"},{type:"function",name:"callFrom",inputs:[{name:"delegator",type:"address",internalType:"address"},{name:"systemId",type:"bytes32",internalType:"ResourceId"},{name:"callData",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes",internalType:"bytes"}],stateMutability:"payable"},{type:"function",name:"copyMap",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"createMatch",inputs:[{name:"name",type:"string",internalType:"string"},{name:"claimedFirstMatchInWindow",type:"bytes32",internalType:"bytes32"},{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"levelId",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"createMatchSeasonPass",inputs:[{name:"name",type:"string",internalType:"string"},{name:"claimedFirstMatchInWindow",type:"bytes32",internalType:"bytes32"},{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"levelId",type:"bytes32",internalType:"bytes32"},{name:"systemId",type:"bytes32",internalType:"ResourceId"},{name:"entranceFee",type:"uint256",internalType:"uint256"},{name:"rewardPercentages",type:"uint256[]",internalType:"uint256[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"createMatchSkyKey",inputs:[{name:"name",type:"string",internalType:"string"},{name:"claimedFirstMatchInWindow",type:"bytes32",internalType:"bytes32"},{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"levelId",type:"bytes32",internalType:"bytes32"},{name:"systemId",type:"bytes32",internalType:"ResourceId"},{name:"entranceFee",type:"uint256",internalType:"uint256"},{name:"rewardPercentages",type:"uint256[]",internalType:"uint256[]"},{name:"registrationTime",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"createNewSeasonPass",inputs:[{name:"name",type:"bytes14",internalType:"bytes14"},{name:"seasonStart",type:"uint256",internalType:"uint256"},{name:"seasonEnd",type:"uint256",internalType:"uint256"},{name:"mintEnd",type:"uint256",internalType:"uint256"},{name:"priceDecreaseRate",type:"uint256",internalType:"uint256"},{name:"startingPrice",type:"uint256",internalType:"uint256"},{name:"minPrice",type:"uint256",internalType:"uint256"},{name:"buyMultiplier",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"creator",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"deleteRecord",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"fight",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"entity",type:"bytes32",internalType:"bytes32"},{name:"target",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"finish",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"loser",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getDynamicField",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"dynamicFieldIndex",type:"uint8",internalType:"uint8"}],outputs:[{name:"",type:"bytes",internalType:"bytes"}],stateMutability:"view"},{type:"function",name:"getDynamicFieldLength",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"dynamicFieldIndex",type:"uint8",internalType:"uint8"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDynamicFieldSlice",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"dynamicFieldIndex",type:"uint8",internalType:"uint8"},{name:"start",type:"uint256",internalType:"uint256"},{name:"end",type:"uint256",internalType:"uint256"}],outputs:[{name:"data",type:"bytes",internalType:"bytes"}],stateMutability:"view"},{type:"function",name:"getField",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"fieldIndex",type:"uint8",internalType:"uint8"},{name:"fieldLayout",type:"bytes32",internalType:"FieldLayout"}],outputs:[{name:"data",type:"bytes",internalType:"bytes"}],stateMutability:"view"},{type:"function",name:"getField",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"fieldIndex",type:"uint8",internalType:"uint8"}],outputs:[{name:"data",type:"bytes",internalType:"bytes"}],stateMutability:"view"},{type:"function",name:"getFieldLayout",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"}],outputs:[{name:"fieldLayout",type:"bytes32",internalType:"FieldLayout"}],stateMutability:"view"},{type:"function",name:"getFieldLength",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"fieldIndex",type:"uint8",internalType:"uint8"},{name:"fieldLayout",type:"bytes32",internalType:"FieldLayout"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getFieldLength",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"fieldIndex",type:"uint8",internalType:"uint8"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getKeySchema",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"}],outputs:[{name:"keySchema",type:"bytes32",internalType:"Schema"}],stateMutability:"view"},{type:"function",name:"getRecord",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"fieldLayout",type:"bytes32",internalType:"FieldLayout"}],outputs:[{name:"staticData",type:"bytes",internalType:"bytes"},{name:"encodedLengths",type:"bytes32",internalType:"PackedCounter"},{name:"dynamicData",type:"bytes",internalType:"bytes"}],stateMutability:"view"},{type:"function",name:"getRecord",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"}],outputs:[{name:"staticData",type:"bytes",internalType:"bytes"},{name:"encodedLengths",type:"bytes32",internalType:"PackedCounter"},{name:"dynamicData",type:"bytes",internalType:"bytes"}],stateMutability:"view"},{type:"function",name:"getStaticField",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"fieldIndex",type:"uint8",internalType:"uint8"},{name:"fieldLayout",type:"bytes32",internalType:"FieldLayout"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getValueSchema",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"}],outputs:[{name:"valueSchema",type:"bytes32",internalType:"Schema"}],stateMutability:"view"},{type:"function",name:"grantAccess",inputs:[{name:"resourceId",type:"bytes32",internalType:"ResourceId"},{name:"grantee",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"initialize",inputs:[{name:"coreModule",type:"address",internalType:"contract IModule"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"installModule",inputs:[{name:"module",type:"address",internalType:"contract IModule"},{name:"args",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"installRootModule",inputs:[{name:"module",type:"address",internalType:"contract IModule"},{name:"args",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"isAllowed",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"move",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"entity",type:"bytes32",internalType:"bytes32"},{name:"path",type:"tuple[]",internalType:"struct PositionData[]",components:[{name:"x",type:"int32",internalType:"int32"},{name:"y",type:"int32",internalType:"int32"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"moveAndAttack",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"entity",type:"bytes32",internalType:"bytes32"},{name:"path",type:"tuple[]",internalType:"struct PositionData[]",components:[{name:"x",type:"int32",internalType:"int32"},{name:"y",type:"int32",internalType:"int32"}]},{name:"target",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"popFromDynamicField",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"dynamicFieldIndex",type:"uint8",internalType:"uint8"},{name:"byteLengthToPop",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"prependRanking",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"entity",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"pushToDynamicField",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"dynamicFieldIndex",type:"uint8",internalType:"uint8"},{name:"dataToPush",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"register",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"spawnIndex",type:"uint256",internalType:"uint256"},{name:"heroChoice",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"nonpayable"},{type:"function",name:"registerDelegation",inputs:[{name:"delegatee",type:"address",internalType:"address"},{name:"delegationControlId",type:"bytes32",internalType:"ResourceId"},{name:"initCallData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"registerFunctionSelector",inputs:[{name:"systemId",type:"bytes32",internalType:"ResourceId"},{name:"systemFunctionSignature",type:"string",internalType:"string"}],outputs:[{name:"worldFunctionSelector",type:"bytes4",internalType:"bytes4"}],stateMutability:"nonpayable"},{type:"function",name:"registerNamespace",inputs:[{name:"namespaceId",type:"bytes32",internalType:"ResourceId"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"registerNamespaceDelegation",inputs:[{name:"namespaceId",type:"bytes32",internalType:"ResourceId"},{name:"delegationControlId",type:"bytes32",internalType:"ResourceId"},{name:"initCallData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"registerRootFunctionSelector",inputs:[{name:"systemId",type:"bytes32",internalType:"ResourceId"},{name:"worldFunctionSignature",type:"string",internalType:"string"},{name:"systemFunctionSelector",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"worldFunctionSelector",type:"bytes4",internalType:"bytes4"}],stateMutability:"nonpayable"},{type:"function",name:"registerStoreHook",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"hookAddress",type:"address",internalType:"contract IStoreHook"},{name:"enabledHooksBitmap",type:"uint8",internalType:"uint8"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"registerSystem",inputs:[{name:"systemId",type:"bytes32",internalType:"ResourceId"},{name:"system",type:"address",internalType:"contract WorldContextConsumer"},{name:"publicAccess",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"registerSystemHook",inputs:[{name:"systemId",type:"bytes32",internalType:"ResourceId"},{name:"hookAddress",type:"address",internalType:"contract ISystemHook"},{name:"enabledHooksBitmap",type:"uint8",internalType:"uint8"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"registerTable",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"fieldLayout",type:"bytes32",internalType:"FieldLayout"},{name:"keySchema",type:"bytes32",internalType:"Schema"},{name:"valueSchema",type:"bytes32",internalType:"Schema"},{name:"keyNames",type:"string[]",internalType:"string[]"},{name:"fieldNames",type:"string[]",internalType:"string[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"revokeAccess",inputs:[{name:"resourceId",type:"bytes32",internalType:"ResourceId"},{name:"grantee",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setCombatOutcome",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"combatOutcomeData",type:"tuple",internalType:"struct CombatOutcomeData",components:[{name:"attacker",type:"bytes32",internalType:"bytes32"},{name:"defender",type:"bytes32",internalType:"bytes32"},{name:"attackerDamageReceived",type:"int32",internalType:"int32"},{name:"defenderDamageReceived",type:"int32",internalType:"int32"},{name:"attackerDamage",type:"int32",internalType:"int32"},{name:"defenderDamage",type:"int32",internalType:"int32"},{name:"ranged",type:"bool",internalType:"bool"},{name:"attackerDied",type:"bool",internalType:"bool"},{name:"defenderDied",type:"bool",internalType:"bool"},{name:"defenderCaptured",type:"bool",internalType:"bool"},{name:"blockNumber",type:"uint256",internalType:"uint256"},{name:"timestamp",type:"uint256",internalType:"uint256"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setDynamicField",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"dynamicFieldIndex",type:"uint8",internalType:"uint8"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setField",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"fieldIndex",type:"uint8",internalType:"uint8"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setField",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"fieldIndex",type:"uint8",internalType:"uint8"},{name:"data",type:"bytes",internalType:"bytes"},{name:"fieldLayout",type:"bytes32",internalType:"FieldLayout"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setHeroInRotation",inputs:[{name:"template",type:"bytes32",internalType:"bytes32"},{name:"inRotation",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setHeroInSeasonPassRotation",inputs:[{name:"template",type:"bytes32",internalType:"bytes32"},{name:"inRotation",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setMembers",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"accounts",type:"address[]",internalType:"address[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setName",inputs:[{name:"name",type:"string",internalType:"string"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setOfficial",inputs:[{name:"levelId",type:"bytes32",internalType:"bytes32"},{name:"official",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setRecord",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"staticData",type:"bytes",internalType:"bytes"},{name:"encodedLengths",type:"bytes32",internalType:"PackedCounter"},{name:"dynamicData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setRotationSeasonPass",inputs:[{name:"levelId",type:"bytes32",internalType:"bytes32"},{name:"inRotation",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setRotationStandard",inputs:[{name:"levelId",type:"bytes32",internalType:"bytes32"},{name:"inRotation",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setStaticField",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"fieldIndex",type:"uint8",internalType:"uint8"},{name:"data",type:"bytes",internalType:"bytes"},{name:"fieldLayout",type:"bytes32",internalType:"FieldLayout"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setup",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"spawnIndex",type:"uint256",internalType:"uint256"},{name:"heroChoice",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"player",type:"bytes32",internalType:"bytes32"}],stateMutability:"nonpayable"},{type:"function",name:"spawnTemplate",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"},{name:"prototypeId",type:"bytes32",internalType:"bytes32"},{name:"ownerId",type:"bytes32",internalType:"bytes32"},{name:"position",type:"tuple",internalType:"struct PositionData",components:[{name:"x",type:"int32",internalType:"int32"},{name:"y",type:"int32",internalType:"int32"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"spliceDynamicData",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"dynamicFieldIndex",type:"uint8",internalType:"uint8"},{name:"startWithinField",type:"uint40",internalType:"uint40"},{name:"deleteCount",type:"uint40",internalType:"uint40"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"spliceStaticData",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",internalType:"bytes32[]"},{name:"start",type:"uint48",internalType:"uint48"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"storeVersion",inputs:[],outputs:[{name:"version",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"toggleReady",inputs:[{name:"matchEntity",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferBalanceToAddress",inputs:[{name:"fromNamespaceId",type:"bytes32",internalType:"ResourceId"},{name:"toAddress",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferBalanceToNamespace",inputs:[{name:"fromNamespaceId",type:"bytes32",internalType:"ResourceId"},{name:"toNamespaceId",type:"bytes32",internalType:"ResourceId"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{name:"namespaceId",type:"bytes32",internalType:"ResourceId"},{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unregisterDelegation",inputs:[{name:"delegatee",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unregisterStoreHook",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"hookAddress",type:"address",internalType:"contract IStoreHook"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unregisterSystemHook",inputs:[{name:"systemId",type:"bytes32",internalType:"ResourceId"},{name:"hookAddress",type:"address",internalType:"contract ISystemHook"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"uploadLevel",inputs:[{name:"levelId",type:"bytes32",internalType:"bytes32"},{name:"templateIds",type:"bytes32[]",internalType:"bytes32[]"},{name:"xs",type:"int32[]",internalType:"int32[]"},{name:"ys",type:"int32[]",internalType:"int32[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawEth",inputs:[{name:"to",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"worldVersion",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"event",name:"HelloStore",inputs:[{name:"storeVersion",type:"bytes32",indexed:!0,internalType:"bytes32"}],anonymous:!1},{type:"event",name:"HelloWorld",inputs:[{name:"worldVersion",type:"bytes32",indexed:!0,internalType:"bytes32"}],anonymous:!1},{type:"event",name:"Store_DeleteRecord",inputs:[{name:"tableId",type:"bytes32",indexed:!0,internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",indexed:!1,internalType:"bytes32[]"}],anonymous:!1},{type:"event",name:"Store_SetRecord",inputs:[{name:"tableId",type:"bytes32",indexed:!0,internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",indexed:!1,internalType:"bytes32[]"},{name:"staticData",type:"bytes",indexed:!1,internalType:"bytes"},{name:"encodedLengths",type:"bytes32",indexed:!1,internalType:"PackedCounter"},{name:"dynamicData",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"Store_SpliceDynamicData",inputs:[{name:"tableId",type:"bytes32",indexed:!0,internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",indexed:!1,internalType:"bytes32[]"},{name:"start",type:"uint48",indexed:!1,internalType:"uint48"},{name:"deleteCount",type:"uint40",indexed:!1,internalType:"uint40"},{name:"encodedLengths",type:"bytes32",indexed:!1,internalType:"PackedCounter"},{name:"data",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"Store_SpliceStaticData",inputs:[{name:"tableId",type:"bytes32",indexed:!0,internalType:"ResourceId"},{name:"keyTuple",type:"bytes32[]",indexed:!1,internalType:"bytes32[]"},{name:"start",type:"uint48",indexed:!1,internalType:"uint48"},{name:"data",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"error",name:"Store_IndexOutOfBounds",inputs:[{name:"length",type:"uint256",internalType:"uint256"},{name:"accessedIndex",type:"uint256",internalType:"uint256"}]},{type:"error",name:"Store_InvalidDynamicDataLength",inputs:[{name:"expected",type:"uint256",internalType:"uint256"},{name:"received",type:"uint256",internalType:"uint256"}]},{type:"error",name:"Store_InvalidFieldNamesLength",inputs:[{name:"expected",type:"uint256",internalType:"uint256"},{name:"received",type:"uint256",internalType:"uint256"}]},{type:"error",name:"Store_InvalidKeyNamesLength",inputs:[{name:"expected",type:"uint256",internalType:"uint256"},{name:"received",type:"uint256",internalType:"uint256"}]},{type:"error",name:"Store_InvalidResourceType",inputs:[{name:"expected",type:"bytes2",internalType:"bytes2"},{name:"resourceId",type:"bytes32",internalType:"ResourceId"},{name:"resourceIdString",type:"string",internalType:"string"}]},{type:"error",name:"Store_InvalidSplice",inputs:[{name:"startWithinField",type:"uint40",internalType:"uint40"},{name:"deleteCount",type:"uint40",internalType:"uint40"},{name:"fieldLength",type:"uint40",internalType:"uint40"}]},{type:"error",name:"Store_InvalidValueSchemaLength",inputs:[{name:"expected",type:"uint256",internalType:"uint256"},{name:"received",type:"uint256",internalType:"uint256"}]},{type:"error",name:"Store_TableAlreadyExists",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"tableIdString",type:"string",internalType:"string"}]},{type:"error",name:"Store_TableNotFound",inputs:[{name:"tableId",type:"bytes32",internalType:"ResourceId"},{name:"tableIdString",type:"string",internalType:"string"}]},{type:"error",name:"World_AccessDenied",inputs:[{name:"resource",type:"string",internalType:"string"},{name:"caller",type:"address",internalType:"address"}]},{type:"error",name:"World_AlreadyInitialized",inputs:[]},{type:"error",name:"World_CallbackNotAllowed",inputs:[{name:"functionSelector",type:"bytes4",internalType:"bytes4"}]},{type:"error",name:"World_DelegationNotFound",inputs:[{name:"delegator",type:"address",internalType:"address"},{name:"delegatee",type:"address",internalType:"address"}]},{type:"error",name:"World_FunctionSelectorAlreadyExists",inputs:[{name:"functionSelector",type:"bytes4",internalType:"bytes4"}]},{type:"error",name:"World_FunctionSelectorNotFound",inputs:[{name:"functionSelector",type:"bytes4",internalType:"bytes4"}]},{type:"error",name:"World_InsufficientBalance",inputs:[{name:"balance",type:"uint256",internalType:"uint256"},{name:"amount",type:"uint256",internalType:"uint256"}]},{type:"error",name:"World_InterfaceNotSupported",inputs:[{name:"contractAddress",type:"address",internalType:"address"},{name:"interfaceId",type:"bytes4",internalType:"bytes4"}]},{type:"error",name:"World_InvalidResourceId",inputs:[{name:"resourceId",type:"bytes32",internalType:"ResourceId"},{name:"resourceIdString",type:"string",internalType:"string"}]},{type:"error",name:"World_InvalidResourceType",inputs:[{name:"expected",type:"bytes2",internalType:"bytes2"},{name:"resourceId",type:"bytes32",internalType:"ResourceId"},{name:"resourceIdString",type:"string",internalType:"string"}]},{type:"error",name:"World_ResourceAlreadyExists",inputs:[{name:"resourceId",type:"bytes32",internalType:"ResourceId"},{name:"resourceIdString",type:"string",internalType:"string"}]},{type:"error",name:"World_ResourceNotFound",inputs:[{name:"resourceId",type:"bytes32",internalType:"ResourceId"},{name:"resourceIdString",type:"string",internalType:"string"}]},{type:"error",name:"World_SystemAlreadyExists",inputs:[{name:"system",type:"address",internalType:"address"}]},{type:"error",name:"World_UnlimitedDelegationNotAllowed",inputs:[]}];function createClock(cr){const{initialTime:ar,period:dr}=cr,fr={currentTime:ar,lastUpdateTime:ar,time$:new ReplaySubject(1),dispose:()=>clearInterval(hr),update:gr};let hr=mr();pr();function pr(){fr.time$.next(fr.currentTime)}function mr(){return setInterval(()=>{fr.currentTime+=dr,pr()},dr)}function gr(yr){clearInterval(hr),fr.currentTime=yr,fr.lastUpdateTime=yr,pr(),hr=mr()}return fr}function createSyncStoragePersister({storage:cr,key:ar="REACT_QUERY_OFFLINE_CACHE",throttleTime:dr=1e3,serialize:fr=JSON.stringify,deserialize:hr=JSON.parse,retry:pr}){if(cr){const mr=gr=>{try{cr.setItem(ar,fr(gr));return}catch(yr){return yr}};return{persistClient:throttle(gr=>{let yr=gr,xr=mr(yr),wr=0;for(;xr&&yr;)wr++,yr=pr?.({persistedClient:yr,error:xr,errorCount:wr}),yr&&(xr=mr(yr))},dr),restoreClient:()=>{const gr=cr.getItem(ar);if(gr)return hr(gr)},removeClient:()=>{cr.removeItem(ar)}}}return{persistClient:noop$6,restoreClient:()=>{},removeClient:noop$6}}function throttle(cr,ar=100){let dr=null,fr;return function(...hr){fr=hr,dr===null&&(dr=setTimeout(()=>{cr(...fr),dr=null},ar))}}function noop$6(){}class Subscribable{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(ar){const dr={listener:ar};return this.listeners.add(dr),this.onSubscribe(),()=>{this.listeners.delete(dr),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const isServer=typeof window>"u"||"Deno"in window;function noop$5(){}function functionalUpdate(cr,ar){return typeof cr=="function"?cr(ar):cr}function isValidTimeout(cr){return typeof cr=="number"&&cr>=0&&cr!==1/0}function timeUntilStale(cr,ar){return Math.max(cr+(ar||0)-Date.now(),0)}function parseQueryArgs$1(cr,ar,dr){return isQueryKey$1(cr)?typeof ar=="function"?{...dr,queryKey:cr,queryFn:ar}:{...ar,queryKey:cr}:cr}function parseMutationArgs(cr,ar,dr){return isQueryKey$1(cr)?typeof ar=="function"?{...dr,mutationKey:cr,mutationFn:ar}:{...ar,mutationKey:cr}:typeof cr=="function"?{...ar,mutationFn:cr}:{...cr}}function parseFilterArgs(cr,ar,dr){return isQueryKey$1(cr)?[{...ar,queryKey:cr},dr]:[cr||{},ar]}function matchQuery(cr,ar){const{type:dr="all",exact:fr,fetchStatus:hr,predicate:pr,queryKey:mr,stale:gr}=cr;if(isQueryKey$1(mr)){if(fr){if(ar.queryHash!==hashQueryKeyByOptions(mr,ar.options))return!1}else if(!partialMatchKey(ar.queryKey,mr))return!1}if(dr!=="all"){const yr=ar.isActive();if(dr==="active"&&!yr||dr==="inactive"&&yr)return!1}return!(typeof gr=="boolean"&&ar.isStale()!==gr||typeof hr<"u"&&hr!==ar.state.fetchStatus||pr&&!pr(ar))}function matchMutation(cr,ar){const{exact:dr,fetching:fr,predicate:hr,mutationKey:pr}=cr;if(isQueryKey$1(pr)){if(!ar.options.mutationKey)return!1;if(dr){if(hashQueryKey(ar.options.mutationKey)!==hashQueryKey(pr))return!1}else if(!partialMatchKey(ar.options.mutationKey,pr))return!1}return!(typeof fr=="boolean"&&ar.state.status==="loading"!==fr||hr&&!hr(ar))}function hashQueryKeyByOptions(cr,ar){return(ar?.queryKeyHashFn||hashQueryKey)(cr)}function hashQueryKey(cr){return JSON.stringify(cr,(ar,dr)=>isPlainObject$2(dr)?Object.keys(dr).sort().reduce((fr,hr)=>(fr[hr]=dr[hr],fr),{}):dr)}function partialMatchKey(cr,ar){return partialDeepEqual(cr,ar)}function partialDeepEqual(cr,ar){return cr===ar?!0:typeof cr!=typeof ar?!1:cr&&ar&&typeof cr=="object"&&typeof ar=="object"?!Object.keys(ar).some(dr=>!partialDeepEqual(cr[dr],ar[dr])):!1}function replaceEqualDeep(cr,ar){if(cr===ar)return cr;const dr=isPlainArray(cr)&&isPlainArray(ar);if(dr||isPlainObject$2(cr)&&isPlainObject$2(ar)){const fr=dr?cr.length:Object.keys(cr).length,hr=dr?ar:Object.keys(ar),pr=hr.length,mr=dr?[]:{};let gr=0;for(let yr=0;yr<pr;yr++){const xr=dr?yr:hr[yr];mr[xr]=replaceEqualDeep(cr[xr],ar[xr]),mr[xr]===cr[xr]&&gr++}return fr===pr&&gr===fr?cr:mr}return ar}function shallowEqualObjects(cr,ar){if(cr&&!ar||ar&&!cr)return!1;for(const dr in cr)if(cr[dr]!==ar[dr])return!1;return!0}function isPlainArray(cr){return Array.isArray(cr)&&cr.length===Object.keys(cr).length}function isPlainObject$2(cr){if(!hasObjectPrototype$1(cr))return!1;const ar=cr.constructor;if(typeof ar>"u")return!0;const dr=ar.prototype;return!(!hasObjectPrototype$1(dr)||!dr.hasOwnProperty("isPrototypeOf"))}function hasObjectPrototype$1(cr){return Object.prototype.toString.call(cr)==="[object Object]"}function isQueryKey$1(cr){return Array.isArray(cr)}function sleep(cr){return new Promise(ar=>{setTimeout(ar,cr)})}function scheduleMicrotask(cr){sleep(0).then(cr)}function getAbortController(){if(typeof AbortController=="function")return new AbortController}function replaceData(cr,ar,dr){return dr.isDataEqual!=null&&dr.isDataEqual(cr,ar)?cr:typeof dr.structuralSharing=="function"?dr.structuralSharing(cr,ar):dr.structuralSharing!==!1?replaceEqualDeep(cr,ar):ar}class FocusManager extends Subscribable{constructor(){super(),this.setup=ar=>{if(!isServer&&window.addEventListener){const dr=()=>ar();return window.addEventListener("visibilitychange",dr,!1),window.addEventListener("focus",dr,!1),()=>{window.removeEventListener("visibilitychange",dr),window.removeEventListener("focus",dr)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var ar;(ar=this.cleanup)==null||ar.call(this),this.cleanup=void 0}}setEventListener(ar){var dr;this.setup=ar,(dr=this.cleanup)==null||dr.call(this),this.cleanup=ar(fr=>{typeof fr=="boolean"?this.setFocused(fr):this.onFocus()})}setFocused(ar){this.focused!==ar&&(this.focused=ar,this.onFocus())}onFocus(){this.listeners.forEach(({listener:ar})=>{ar()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const focusManager=new FocusManager,onlineEvents=["online","offline"];class OnlineManager extends Subscribable{constructor(){super(),this.setup=ar=>{if(!isServer&&window.addEventListener){const dr=()=>ar();return onlineEvents.forEach(fr=>{window.addEventListener(fr,dr,!1)}),()=>{onlineEvents.forEach(fr=>{window.removeEventListener(fr,dr)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var ar;(ar=this.cleanup)==null||ar.call(this),this.cleanup=void 0}}setEventListener(ar){var dr;this.setup=ar,(dr=this.cleanup)==null||dr.call(this),this.cleanup=ar(fr=>{typeof fr=="boolean"?this.setOnline(fr):this.onOnline()})}setOnline(ar){this.online!==ar&&(this.online=ar,this.onOnline())}onOnline(){this.listeners.forEach(({listener:ar})=>{ar()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const onlineManager=new OnlineManager;function defaultRetryDelay(cr){return Math.min(1e3*2**cr,3e4)}function canFetch(cr){return(cr??"online")==="online"?onlineManager.isOnline():!0}class CancelledError{constructor(ar){this.revert=ar?.revert,this.silent=ar?.silent}}function isCancelledError(cr){return cr instanceof CancelledError}function createRetryer(cr){let ar=!1,dr=0,fr=!1,hr,pr,mr;const gr=new Promise((_r,Cr)=>{pr=_r,mr=Cr}),yr=_r=>{fr||(vr(new CancelledError(_r)),cr.abort==null||cr.abort())},xr=()=>{ar=!0},wr=()=>{ar=!1},br=()=>!focusManager.isFocused()||cr.networkMode!=="always"&&!onlineManager.isOnline(),Sr=_r=>{fr||(fr=!0,cr.onSuccess==null||cr.onSuccess(_r),hr?.(),pr(_r))},vr=_r=>{fr||(fr=!0,cr.onError==null||cr.onError(_r),hr?.(),mr(_r))},Er=()=>new Promise(_r=>{hr=Cr=>{const kr=fr||!br();return kr&&_r(Cr),kr},cr.onPause==null||cr.onPause()}).then(()=>{hr=void 0,fr||cr.onContinue==null||cr.onContinue()}),Ar=()=>{if(fr)return;let _r;try{_r=cr.fn()}catch(Cr){_r=Promise.reject(Cr)}Promise.resolve(_r).then(Sr).catch(Cr=>{var kr,Rr;if(fr)return;const Ir=(kr=cr.retry)!=null?kr:3,Nr=(Rr=cr.retryDelay)!=null?Rr:defaultRetryDelay,Pr=typeof Nr=="function"?Nr(dr,Cr):Nr,Tr=Ir===!0||typeof Ir=="number"&&dr<Ir||typeof Ir=="function"&&Ir(dr,Cr);if(ar||!Tr){vr(Cr);return}dr++,cr.onFail==null||cr.onFail(dr,Cr),sleep(Pr).then(()=>{if(br())return Er()}).then(()=>{ar?vr(Cr):Ar()})})};return canFetch(cr.networkMode)?Ar():Er().then(Ar),{promise:gr,cancel:yr,continue:()=>hr?.()?gr:Promise.resolve(),cancelRetry:xr,continueRetry:wr}}const defaultLogger$1=console;function createNotifyManager(){let cr=[],ar=0,dr=wr=>{wr()},fr=wr=>{wr()};const hr=wr=>{let br;ar++;try{br=wr()}finally{ar--,ar||gr()}return br},pr=wr=>{ar?cr.push(wr):scheduleMicrotask(()=>{dr(wr)})},mr=wr=>(...br)=>{pr(()=>{wr(...br)})},gr=()=>{const wr=cr;cr=[],wr.length&&scheduleMicrotask(()=>{fr(()=>{wr.forEach(br=>{dr(br)})})})};return{batch:hr,batchCalls:mr,schedule:pr,setNotifyFunction:wr=>{dr=wr},setBatchNotifyFunction:wr=>{fr=wr}}}const notifyManager=createNotifyManager();class Removable{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(ar){this.cacheTime=Math.max(this.cacheTime||0,ar??(isServer?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class Query extends Removable{constructor(ar){super(),this.abortSignalConsumed=!1,this.defaultOptions=ar.defaultOptions,this.setOptions(ar.options),this.observers=[],this.cache=ar.cache,this.logger=ar.logger||defaultLogger$1,this.queryKey=ar.queryKey,this.queryHash=ar.queryHash,this.initialState=ar.state||getDefaultState$1(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(ar){this.options={...this.defaultOptions,...ar},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(ar,dr){const fr=replaceData(this.state.data,ar,this.options);return this.dispatch({data:fr,type:"success",dataUpdatedAt:dr?.updatedAt,manual:dr?.manual}),fr}setState(ar,dr){this.dispatch({type:"setState",state:ar,setStateOptions:dr})}cancel(ar){var dr;const fr=this.promise;return(dr=this.retryer)==null||dr.cancel(ar),fr?fr.then(noop$5).catch(noop$5):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(ar=>ar.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(ar=>ar.getCurrentResult().isStale)}isStaleByTime(ar=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!timeUntilStale(this.state.dataUpdatedAt,ar)}onFocus(){var ar;const dr=this.observers.find(fr=>fr.shouldFetchOnWindowFocus());dr&&dr.refetch({cancelRefetch:!1}),(ar=this.retryer)==null||ar.continue()}onOnline(){var ar;const dr=this.observers.find(fr=>fr.shouldFetchOnReconnect());dr&&dr.refetch({cancelRefetch:!1}),(ar=this.retryer)==null||ar.continue()}addObserver(ar){this.observers.includes(ar)||(this.observers.push(ar),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:ar}))}removeObserver(ar){this.observers.includes(ar)&&(this.observers=this.observers.filter(dr=>dr!==ar),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:ar}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(ar,dr){var fr,hr;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&dr!=null&&dr.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var pr;return(pr=this.retryer)==null||pr.continueRetry(),this.promise}}if(ar&&this.setOptions(ar),!this.options.queryFn){const vr=this.observers.find(Er=>Er.options.queryFn);vr&&this.setOptions(vr.options)}const mr=getAbortController(),gr={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},yr=vr=>{Object.defineProperty(vr,"signal",{enumerable:!0,get:()=>{if(mr)return this.abortSignalConsumed=!0,mr.signal}})};yr(gr);const xr=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(gr)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),wr={fetchOptions:dr,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:xr};if(yr(wr),(fr=this.options.behavior)==null||fr.onFetch(wr),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((hr=wr.fetchOptions)==null?void 0:hr.meta)){var br;this.dispatch({type:"fetch",meta:(br=wr.fetchOptions)==null?void 0:br.meta})}const Sr=vr=>{if(isCancelledError(vr)&&vr.silent||this.dispatch({type:"error",error:vr}),!isCancelledError(vr)){var Er,Ar,_r,Cr;(Er=(Ar=this.cache.config).onError)==null||Er.call(Ar,vr,this),(_r=(Cr=this.cache.config).onSettled)==null||_r.call(Cr,this.state.data,vr,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=createRetryer({fn:wr.fetchFn,abort:mr?.abort.bind(mr),onSuccess:vr=>{var Er,Ar,_r,Cr;if(typeof vr>"u"){Sr(new Error(this.queryHash+" data is undefined"));return}this.setData(vr),(Er=(Ar=this.cache.config).onSuccess)==null||Er.call(Ar,vr,this),(_r=(Cr=this.cache.config).onSettled)==null||_r.call(Cr,vr,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:Sr,onFail:(vr,Er)=>{this.dispatch({type:"failed",failureCount:vr,error:Er})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:wr.options.retry,retryDelay:wr.options.retryDelay,networkMode:wr.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(ar){const dr=fr=>{var hr,pr;switch(ar.type){case"failed":return{...fr,fetchFailureCount:ar.failureCount,fetchFailureReason:ar.error};case"pause":return{...fr,fetchStatus:"paused"};case"continue":return{...fr,fetchStatus:"fetching"};case"fetch":return{...fr,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(hr=ar.meta)!=null?hr:null,fetchStatus:canFetch(this.options.networkMode)?"fetching":"paused",...!fr.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...fr,data:ar.data,dataUpdateCount:fr.dataUpdateCount+1,dataUpdatedAt:(pr=ar.dataUpdatedAt)!=null?pr:Date.now(),error:null,isInvalidated:!1,status:"success",...!ar.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const mr=ar.error;return isCancelledError(mr)&&mr.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...fr,error:mr,errorUpdateCount:fr.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:fr.fetchFailureCount+1,fetchFailureReason:mr,fetchStatus:"idle",status:"error"};case"invalidate":return{...fr,isInvalidated:!0};case"setState":return{...fr,...ar.state}}};this.state=dr(this.state),notifyManager.batch(()=>{this.observers.forEach(fr=>{fr.onQueryUpdate(ar)}),this.cache.notify({query:this,type:"updated",action:ar})})}}function getDefaultState$1(cr){const ar=typeof cr.initialData=="function"?cr.initialData():cr.initialData,dr=typeof ar<"u",fr=dr?typeof cr.initialDataUpdatedAt=="function"?cr.initialDataUpdatedAt():cr.initialDataUpdatedAt:0;return{data:ar,dataUpdateCount:0,dataUpdatedAt:dr?fr??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:dr?"success":"loading",fetchStatus:"idle"}}class QueryCache extends Subscribable{constructor(ar){super(),this.config=ar||{},this.queries=[],this.queriesMap={}}build(ar,dr,fr){var hr;const pr=dr.queryKey,mr=(hr=dr.queryHash)!=null?hr:hashQueryKeyByOptions(pr,dr);let gr=this.get(mr);return gr||(gr=new Query({cache:this,logger:ar.getLogger(),queryKey:pr,queryHash:mr,options:ar.defaultQueryOptions(dr),state:fr,defaultOptions:ar.getQueryDefaults(pr)}),this.add(gr)),gr}add(ar){this.queriesMap[ar.queryHash]||(this.queriesMap[ar.queryHash]=ar,this.queries.push(ar),this.notify({type:"added",query:ar}))}remove(ar){const dr=this.queriesMap[ar.queryHash];dr&&(ar.destroy(),this.queries=this.queries.filter(fr=>fr!==ar),dr===ar&&delete this.queriesMap[ar.queryHash],this.notify({type:"removed",query:ar}))}clear(){notifyManager.batch(()=>{this.queries.forEach(ar=>{this.remove(ar)})})}get(ar){return this.queriesMap[ar]}getAll(){return this.queries}find(ar,dr){const[fr]=parseFilterArgs(ar,dr);return typeof fr.exact>"u"&&(fr.exact=!0),this.queries.find(hr=>matchQuery(fr,hr))}findAll(ar,dr){const[fr]=parseFilterArgs(ar,dr);return Object.keys(fr).length>0?this.queries.filter(hr=>matchQuery(fr,hr)):this.queries}notify(ar){notifyManager.batch(()=>{this.listeners.forEach(({listener:dr})=>{dr(ar)})})}onFocus(){notifyManager.batch(()=>{this.queries.forEach(ar=>{ar.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.queries.forEach(ar=>{ar.onOnline()})})}}class Mutation extends Removable{constructor(ar){super(),this.defaultOptions=ar.defaultOptions,this.mutationId=ar.mutationId,this.mutationCache=ar.mutationCache,this.logger=ar.logger||defaultLogger$1,this.observers=[],this.state=ar.state||getDefaultState(),this.setOptions(ar.options),this.scheduleGc()}setOptions(ar){this.options={...this.defaultOptions,...ar},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(ar){this.dispatch({type:"setState",state:ar})}addObserver(ar){this.observers.includes(ar)||(this.observers.push(ar),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:ar}))}removeObserver(ar){this.observers=this.observers.filter(dr=>dr!==ar),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:ar})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var ar,dr;return(ar=(dr=this.retryer)==null?void 0:dr.continue())!=null?ar:this.execute()}async execute(){const ar=()=>{var Tr;return this.retryer=createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(Br,Fr)=>{this.dispatch({type:"failed",failureCount:Br,error:Fr})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(Tr=this.options.retry)!=null?Tr:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},dr=this.state.status==="loading";try{var fr,hr,pr,mr,gr,yr,xr,wr;if(!dr){var br,Sr,vr,Er;this.dispatch({type:"loading",variables:this.options.variables}),await((br=(Sr=this.mutationCache.config).onMutate)==null?void 0:br.call(Sr,this.state.variables,this));const Br=await((vr=(Er=this.options).onMutate)==null?void 0:vr.call(Er,this.state.variables));Br!==this.state.context&&this.dispatch({type:"loading",context:Br,variables:this.state.variables})}const Tr=await ar();return await((fr=(hr=this.mutationCache.config).onSuccess)==null?void 0:fr.call(hr,Tr,this.state.variables,this.state.context,this)),await((pr=(mr=this.options).onSuccess)==null?void 0:pr.call(mr,Tr,this.state.variables,this.state.context)),await((gr=(yr=this.mutationCache.config).onSettled)==null?void 0:gr.call(yr,Tr,null,this.state.variables,this.state.context,this)),await((xr=(wr=this.options).onSettled)==null?void 0:xr.call(wr,Tr,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:Tr}),Tr}catch(Tr){try{var Ar,_r,Cr,kr,Rr,Ir,Nr,Pr;throw await((Ar=(_r=this.mutationCache.config).onError)==null?void 0:Ar.call(_r,Tr,this.state.variables,this.state.context,this)),await((Cr=(kr=this.options).onError)==null?void 0:Cr.call(kr,Tr,this.state.variables,this.state.context)),await((Rr=(Ir=this.mutationCache.config).onSettled)==null?void 0:Rr.call(Ir,void 0,Tr,this.state.variables,this.state.context,this)),await((Nr=(Pr=this.options).onSettled)==null?void 0:Nr.call(Pr,void 0,Tr,this.state.variables,this.state.context)),Tr}finally{this.dispatch({type:"error",error:Tr})}}}dispatch(ar){const dr=fr=>{switch(ar.type){case"failed":return{...fr,failureCount:ar.failureCount,failureReason:ar.error};case"pause":return{...fr,isPaused:!0};case"continue":return{...fr,isPaused:!1};case"loading":return{...fr,context:ar.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!canFetch(this.options.networkMode),status:"loading",variables:ar.variables};case"success":return{...fr,data:ar.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...fr,data:void 0,error:ar.error,failureCount:fr.failureCount+1,failureReason:ar.error,isPaused:!1,status:"error"};case"setState":return{...fr,...ar.state}}};this.state=dr(this.state),notifyManager.batch(()=>{this.observers.forEach(fr=>{fr.onMutationUpdate(ar)}),this.mutationCache.notify({mutation:this,type:"updated",action:ar})})}}function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class MutationCache extends Subscribable{constructor(ar){super(),this.config=ar||{},this.mutations=[],this.mutationId=0}build(ar,dr,fr){const hr=new Mutation({mutationCache:this,logger:ar.getLogger(),mutationId:++this.mutationId,options:ar.defaultMutationOptions(dr),state:fr,defaultOptions:dr.mutationKey?ar.getMutationDefaults(dr.mutationKey):void 0});return this.add(hr),hr}add(ar){this.mutations.push(ar),this.notify({type:"added",mutation:ar})}remove(ar){this.mutations=this.mutations.filter(dr=>dr!==ar),this.notify({type:"removed",mutation:ar})}clear(){notifyManager.batch(()=>{this.mutations.forEach(ar=>{this.remove(ar)})})}getAll(){return this.mutations}find(ar){return typeof ar.exact>"u"&&(ar.exact=!0),this.mutations.find(dr=>matchMutation(ar,dr))}findAll(ar){return this.mutations.filter(dr=>matchMutation(ar,dr))}notify(ar){notifyManager.batch(()=>{this.listeners.forEach(({listener:dr})=>{dr(ar)})})}resumePausedMutations(){var ar;return this.resuming=((ar=this.resuming)!=null?ar:Promise.resolve()).then(()=>{const dr=this.mutations.filter(fr=>fr.state.isPaused);return notifyManager.batch(()=>dr.reduce((fr,hr)=>fr.then(()=>hr.continue().catch(noop$5)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function infiniteQueryBehavior(){return{onFetch:cr=>{cr.fetchFn=()=>{var ar,dr,fr,hr,pr,mr;const gr=(ar=cr.fetchOptions)==null||(dr=ar.meta)==null?void 0:dr.refetchPage,yr=(fr=cr.fetchOptions)==null||(hr=fr.meta)==null?void 0:hr.fetchMore,xr=yr?.pageParam,wr=yr?.direction==="forward",br=yr?.direction==="backward",Sr=((pr=cr.state.data)==null?void 0:pr.pages)||[],vr=((mr=cr.state.data)==null?void 0:mr.pageParams)||[];let Er=vr,Ar=!1;const _r=Pr=>{Object.defineProperty(Pr,"signal",{enumerable:!0,get:()=>{var Tr;if((Tr=cr.signal)!=null&&Tr.aborted)Ar=!0;else{var Br;(Br=cr.signal)==null||Br.addEventListener("abort",()=>{Ar=!0})}return cr.signal}})},Cr=cr.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+cr.options.queryHash+"'")),kr=(Pr,Tr,Br,Fr)=>(Er=Fr?[Tr,...Er]:[...Er,Tr],Fr?[Br,...Pr]:[...Pr,Br]),Rr=(Pr,Tr,Br,Fr)=>{if(Ar)return Promise.reject("Cancelled");if(typeof Br>"u"&&!Tr&&Pr.length)return Promise.resolve(Pr);const jr={queryKey:cr.queryKey,pageParam:Br,meta:cr.options.meta};_r(jr);const Ur=Cr(jr);return Promise.resolve(Ur).then(Hr=>kr(Pr,Br,Hr,Fr))};let Ir;if(!Sr.length)Ir=Rr([]);else if(wr){const Pr=typeof xr<"u",Tr=Pr?xr:getNextPageParam(cr.options,Sr);Ir=Rr(Sr,Pr,Tr)}else if(br){const Pr=typeof xr<"u",Tr=Pr?xr:getPreviousPageParam(cr.options,Sr);Ir=Rr(Sr,Pr,Tr,!0)}else{Er=[];const Pr=typeof cr.options.getNextPageParam>"u";Ir=(gr&&Sr[0]?gr(Sr[0],0,Sr):!0)?Rr([],Pr,vr[0]):Promise.resolve(kr([],vr[0],Sr[0]));for(let Br=1;Br<Sr.length;Br++)Ir=Ir.then(Fr=>{if(gr&&Sr[Br]?gr(Sr[Br],Br,Sr):!0){const Ur=Pr?vr[Br]:getNextPageParam(cr.options,Fr);return Rr(Fr,Pr,Ur)}return Promise.resolve(kr(Fr,vr[Br],Sr[Br]))})}return Ir.then(Pr=>({pages:Pr,pageParams:Er}))}}}}function getNextPageParam(cr,ar){return cr.getNextPageParam==null?void 0:cr.getNextPageParam(ar[ar.length-1],ar)}function getPreviousPageParam(cr,ar){return cr.getPreviousPageParam==null?void 0:cr.getPreviousPageParam(ar[0],ar)}class QueryClient{constructor(ar={}){this.queryCache=ar.queryCache||new QueryCache,this.mutationCache=ar.mutationCache||new MutationCache,this.logger=ar.logger||defaultLogger$1,this.defaultOptions=ar.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=focusManager.subscribe(()=>{focusManager.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=onlineManager.subscribe(()=>{onlineManager.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var ar,dr;this.mountCount--,this.mountCount===0&&((ar=this.unsubscribeFocus)==null||ar.call(this),this.unsubscribeFocus=void 0,(dr=this.unsubscribeOnline)==null||dr.call(this),this.unsubscribeOnline=void 0)}isFetching(ar,dr){const[fr]=parseFilterArgs(ar,dr);return fr.fetchStatus="fetching",this.queryCache.findAll(fr).length}isMutating(ar){return this.mutationCache.findAll({...ar,fetching:!0}).length}getQueryData(ar,dr){var fr;return(fr=this.queryCache.find(ar,dr))==null?void 0:fr.state.data}ensureQueryData(ar,dr,fr){const hr=parseQueryArgs$1(ar,dr,fr),pr=this.getQueryData(hr.queryKey);return pr?Promise.resolve(pr):this.fetchQuery(hr)}getQueriesData(ar){return this.getQueryCache().findAll(ar).map(({queryKey:dr,state:fr})=>{const hr=fr.data;return[dr,hr]})}setQueryData(ar,dr,fr){const hr=this.queryCache.find(ar),pr=hr?.state.data,mr=functionalUpdate(dr,pr);if(typeof mr>"u")return;const gr=parseQueryArgs$1(ar),yr=this.defaultQueryOptions(gr);return this.queryCache.build(this,yr).setData(mr,{...fr,manual:!0})}setQueriesData(ar,dr,fr){return notifyManager.batch(()=>this.getQueryCache().findAll(ar).map(({queryKey:hr})=>[hr,this.setQueryData(hr,dr,fr)]))}getQueryState(ar,dr){var fr;return(fr=this.queryCache.find(ar,dr))==null?void 0:fr.state}removeQueries(ar,dr){const[fr]=parseFilterArgs(ar,dr),hr=this.queryCache;notifyManager.batch(()=>{hr.findAll(fr).forEach(pr=>{hr.remove(pr)})})}resetQueries(ar,dr,fr){const[hr,pr]=parseFilterArgs(ar,dr,fr),mr=this.queryCache,gr={type:"active",...hr};return notifyManager.batch(()=>(mr.findAll(hr).forEach(yr=>{yr.reset()}),this.refetchQueries(gr,pr)))}cancelQueries(ar,dr,fr){const[hr,pr={}]=parseFilterArgs(ar,dr,fr);typeof pr.revert>"u"&&(pr.revert=!0);const mr=notifyManager.batch(()=>this.queryCache.findAll(hr).map(gr=>gr.cancel(pr)));return Promise.all(mr).then(noop$5).catch(noop$5)}invalidateQueries(ar,dr,fr){const[hr,pr]=parseFilterArgs(ar,dr,fr);return notifyManager.batch(()=>{var mr,gr;if(this.queryCache.findAll(hr).forEach(xr=>{xr.invalidate()}),hr.refetchType==="none")return Promise.resolve();const yr={...hr,type:(mr=(gr=hr.refetchType)!=null?gr:hr.type)!=null?mr:"active"};return this.refetchQueries(yr,pr)})}refetchQueries(ar,dr,fr){const[hr,pr]=parseFilterArgs(ar,dr,fr),mr=notifyManager.batch(()=>this.queryCache.findAll(hr).filter(yr=>!yr.isDisabled()).map(yr=>{var xr;return yr.fetch(void 0,{...pr,cancelRefetch:(xr=pr?.cancelRefetch)!=null?xr:!0,meta:{refetchPage:hr.refetchPage}})}));let gr=Promise.all(mr).then(noop$5);return pr!=null&&pr.throwOnError||(gr=gr.catch(noop$5)),gr}fetchQuery(ar,dr,fr){const hr=parseQueryArgs$1(ar,dr,fr),pr=this.defaultQueryOptions(hr);typeof pr.retry>"u"&&(pr.retry=!1);const mr=this.queryCache.build(this,pr);return mr.isStaleByTime(pr.staleTime)?mr.fetch(pr):Promise.resolve(mr.state.data)}prefetchQuery(ar,dr,fr){return this.fetchQuery(ar,dr,fr).then(noop$5).catch(noop$5)}fetchInfiniteQuery(ar,dr,fr){const hr=parseQueryArgs$1(ar,dr,fr);return hr.behavior=infiniteQueryBehavior(),this.fetchQuery(hr)}prefetchInfiniteQuery(ar,dr,fr){return this.fetchInfiniteQuery(ar,dr,fr).then(noop$5).catch(noop$5)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(ar){this.defaultOptions=ar}setQueryDefaults(ar,dr){const fr=this.queryDefaults.find(hr=>hashQueryKey(ar)===hashQueryKey(hr.queryKey));fr?fr.defaultOptions=dr:this.queryDefaults.push({queryKey:ar,defaultOptions:dr})}getQueryDefaults(ar){if(!ar)return;const dr=this.queryDefaults.find(fr=>partialMatchKey(ar,fr.queryKey));return dr?.defaultOptions}setMutationDefaults(ar,dr){const fr=this.mutationDefaults.find(hr=>hashQueryKey(ar)===hashQueryKey(hr.mutationKey));fr?fr.defaultOptions=dr:this.mutationDefaults.push({mutationKey:ar,defaultOptions:dr})}getMutationDefaults(ar){if(!ar)return;const dr=this.mutationDefaults.find(fr=>partialMatchKey(ar,fr.mutationKey));return dr?.defaultOptions}defaultQueryOptions(ar){if(ar!=null&&ar._defaulted)return ar;const dr={...this.defaultOptions.queries,...this.getQueryDefaults(ar?.queryKey),...ar,_defaulted:!0};return!dr.queryHash&&dr.queryKey&&(dr.queryHash=hashQueryKeyByOptions(dr.queryKey,dr)),typeof dr.refetchOnReconnect>"u"&&(dr.refetchOnReconnect=dr.networkMode!=="always"),typeof dr.useErrorBoundary>"u"&&(dr.useErrorBoundary=!!dr.suspense),dr}defaultMutationOptions(ar){return ar!=null&&ar._defaulted?ar:{...this.defaultOptions.mutations,...this.getMutationDefaults(ar?.mutationKey),...ar,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class QueryObserver extends Subscribable{constructor(ar,dr){super(),this.client=ar,this.options=dr,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(dr)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),shouldFetchOnMount(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(ar,dr){const fr=this.options,hr=this.currentQuery;if(this.options=this.client.defaultQueryOptions(ar),shallowEqualObjects(fr,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=fr.queryKey),this.updateQuery();const pr=this.hasListeners();pr&&shouldFetchOptionally(this.currentQuery,hr,this.options,fr)&&this.executeFetch(),this.updateResult(dr),pr&&(this.currentQuery!==hr||this.options.enabled!==fr.enabled||this.options.staleTime!==fr.staleTime)&&this.updateStaleTimeout();const mr=this.computeRefetchInterval();pr&&(this.currentQuery!==hr||this.options.enabled!==fr.enabled||mr!==this.currentRefetchInterval)&&this.updateRefetchInterval(mr)}getOptimisticResult(ar){const dr=this.client.getQueryCache().build(this.client,ar),fr=this.createResult(dr,ar);return shouldAssignObserverCurrentProperties(this,fr,ar)&&(this.currentResult=fr,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),fr}getCurrentResult(){return this.currentResult}trackResult(ar){const dr={};return Object.keys(ar).forEach(fr=>{Object.defineProperty(dr,fr,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(fr),ar[fr])})}),dr}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:ar,...dr}={}){return this.fetch({...dr,meta:{refetchPage:ar}})}fetchOptimistic(ar){const dr=this.client.defaultQueryOptions(ar),fr=this.client.getQueryCache().build(this.client,dr);return fr.isFetchingOptimistic=!0,fr.fetch().then(()=>this.createResult(fr,dr))}fetch(ar){var dr;return this.executeFetch({...ar,cancelRefetch:(dr=ar.cancelRefetch)!=null?dr:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(ar){this.updateQuery();let dr=this.currentQuery.fetch(this.options,ar);return ar!=null&&ar.throwOnError||(dr=dr.catch(noop$5)),dr}updateStaleTimeout(){if(this.clearStaleTimeout(),isServer||this.currentResult.isStale||!isValidTimeout(this.options.staleTime))return;const dr=timeUntilStale(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},dr)}computeRefetchInterval(){var ar;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(ar=this.options.refetchInterval)!=null?ar:!1}updateRefetchInterval(ar){this.clearRefetchInterval(),this.currentRefetchInterval=ar,!(isServer||this.options.enabled===!1||!isValidTimeout(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(ar,dr){const fr=this.currentQuery,hr=this.options,pr=this.currentResult,mr=this.currentResultState,gr=this.currentResultOptions,yr=ar!==fr,xr=yr?ar.state:this.currentQueryInitialState,wr=yr?this.currentResult:this.previousQueryResult,{state:br}=ar;let{dataUpdatedAt:Sr,error:vr,errorUpdatedAt:Er,fetchStatus:Ar,status:_r}=br,Cr=!1,kr=!1,Rr;if(dr._optimisticResults){const Br=this.hasListeners(),Fr=!Br&&shouldFetchOnMount(ar,dr),jr=Br&&shouldFetchOptionally(ar,fr,dr,hr);(Fr||jr)&&(Ar=canFetch(ar.options.networkMode)?"fetching":"paused",Sr||(_r="loading")),dr._optimisticResults==="isRestoring"&&(Ar="idle")}if(dr.keepPreviousData&&!br.dataUpdatedAt&&wr!=null&&wr.isSuccess&&_r!=="error")Rr=wr.data,Sr=wr.dataUpdatedAt,_r=wr.status,Cr=!0;else if(dr.select&&typeof br.data<"u")if(pr&&br.data===mr?.data&&dr.select===this.selectFn)Rr=this.selectResult;else try{this.selectFn=dr.select,Rr=dr.select(br.data),Rr=replaceData(pr?.data,Rr,dr),this.selectResult=Rr,this.selectError=null}catch(Br){this.selectError=Br}else Rr=br.data;if(typeof dr.placeholderData<"u"&&typeof Rr>"u"&&_r==="loading"){let Br;if(pr!=null&&pr.isPlaceholderData&&dr.placeholderData===gr?.placeholderData)Br=pr.data;else if(Br=typeof dr.placeholderData=="function"?dr.placeholderData():dr.placeholderData,dr.select&&typeof Br<"u")try{Br=dr.select(Br),this.selectError=null}catch(Fr){this.selectError=Fr}typeof Br<"u"&&(_r="success",Rr=replaceData(pr?.data,Br,dr),kr=!0)}this.selectError&&(vr=this.selectError,Rr=this.selectResult,Er=Date.now(),_r="error");const Ir=Ar==="fetching",Nr=_r==="loading",Pr=_r==="error";return{status:_r,fetchStatus:Ar,isLoading:Nr,isSuccess:_r==="success",isError:Pr,isInitialLoading:Nr&&Ir,data:Rr,dataUpdatedAt:Sr,error:vr,errorUpdatedAt:Er,failureCount:br.fetchFailureCount,failureReason:br.fetchFailureReason,errorUpdateCount:br.errorUpdateCount,isFetched:br.dataUpdateCount>0||br.errorUpdateCount>0,isFetchedAfterMount:br.dataUpdateCount>xr.dataUpdateCount||br.errorUpdateCount>xr.errorUpdateCount,isFetching:Ir,isRefetching:Ir&&!Nr,isLoadingError:Pr&&br.dataUpdatedAt===0,isPaused:Ar==="paused",isPlaceholderData:kr,isPreviousData:Cr,isRefetchError:Pr&&br.dataUpdatedAt!==0,isStale:isStale(ar,dr),refetch:this.refetch,remove:this.remove}}updateResult(ar){const dr=this.currentResult,fr=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,shallowEqualObjects(fr,dr))return;this.currentResult=fr;const hr={cache:!0},pr=()=>{if(!dr)return!0;const{notifyOnChangeProps:mr}=this.options,gr=typeof mr=="function"?mr():mr;if(gr==="all"||!gr&&!this.trackedProps.size)return!0;const yr=new Set(gr??this.trackedProps);return this.options.useErrorBoundary&&yr.add("error"),Object.keys(this.currentResult).some(xr=>{const wr=xr;return this.currentResult[wr]!==dr[wr]&&yr.has(wr)})};ar?.listeners!==!1&&pr()&&(hr.listeners=!0),this.notify({...hr,...ar})}updateQuery(){const ar=this.client.getQueryCache().build(this.client,this.options);if(ar===this.currentQuery)return;const dr=this.currentQuery;this.currentQuery=ar,this.currentQueryInitialState=ar.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(dr?.removeObserver(this),ar.addObserver(this))}onQueryUpdate(ar){const dr={};ar.type==="success"?dr.onSuccess=!ar.manual:ar.type==="error"&&!isCancelledError(ar.error)&&(dr.onError=!0),this.updateResult(dr),this.hasListeners()&&this.updateTimers()}notify(ar){notifyManager.batch(()=>{if(ar.onSuccess){var dr,fr,hr,pr;(dr=(fr=this.options).onSuccess)==null||dr.call(fr,this.currentResult.data),(hr=(pr=this.options).onSettled)==null||hr.call(pr,this.currentResult.data,null)}else if(ar.onError){var mr,gr,yr,xr;(mr=(gr=this.options).onError)==null||mr.call(gr,this.currentResult.error),(yr=(xr=this.options).onSettled)==null||yr.call(xr,void 0,this.currentResult.error)}ar.listeners&&this.listeners.forEach(({listener:wr})=>{wr(this.currentResult)}),ar.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function shouldLoadOnMount(cr,ar){return ar.enabled!==!1&&!cr.state.dataUpdatedAt&&!(cr.state.status==="error"&&ar.retryOnMount===!1)}function shouldFetchOnMount(cr,ar){return shouldLoadOnMount(cr,ar)||cr.state.dataUpdatedAt>0&&shouldFetchOn(cr,ar,ar.refetchOnMount)}function shouldFetchOn(cr,ar,dr){if(ar.enabled!==!1){const fr=typeof dr=="function"?dr(cr):dr;return fr==="always"||fr!==!1&&isStale(cr,ar)}return!1}function shouldFetchOptionally(cr,ar,dr,fr){return dr.enabled!==!1&&(cr!==ar||fr.enabled===!1)&&(!dr.suspense||cr.state.status!=="error")&&isStale(cr,dr)}function isStale(cr,ar){return cr.isStaleByTime(ar.staleTime)}function shouldAssignObserverCurrentProperties(cr,ar,dr){return dr.keepPreviousData?!1:dr.placeholderData!==void 0?ar.isPlaceholderData:!shallowEqualObjects(cr.getCurrentResult(),ar)}let MutationObserver$1=class extends Subscribable{constructor(ar,dr){super(),this.client=ar,this.setOptions(dr),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(ar){var dr;const fr=this.options;this.options=this.client.defaultMutationOptions(ar),shallowEqualObjects(fr,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(dr=this.currentMutation)==null||dr.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var ar;(ar=this.currentMutation)==null||ar.removeObserver(this)}}onMutationUpdate(ar){this.updateResult();const dr={listeners:!0};ar.type==="success"?dr.onSuccess=!0:ar.type==="error"&&(dr.onError=!0),this.notify(dr)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(ar,dr){return this.mutateOptions=dr,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof ar<"u"?ar:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const ar=this.currentMutation?this.currentMutation.state:getDefaultState(),dr={...ar,isLoading:ar.status==="loading",isSuccess:ar.status==="success",isError:ar.status==="error",isIdle:ar.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=dr}notify(ar){notifyManager.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(ar.onSuccess){var dr,fr,hr,pr;(dr=(fr=this.mutateOptions).onSuccess)==null||dr.call(fr,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(hr=(pr=this.mutateOptions).onSettled)==null||hr.call(pr,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(ar.onError){var mr,gr,yr,xr;(mr=(gr=this.mutateOptions).onError)==null||mr.call(gr,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(yr=(xr=this.mutateOptions).onSettled)==null||yr.call(xr,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}ar.listeners&&this.listeners.forEach(({listener:wr})=>{wr(this.currentResult)})})}};function dehydrateMutation(cr){return{mutationKey:cr.options.mutationKey,state:cr.state}}function dehydrateQuery(cr){return{state:cr.state,queryKey:cr.queryKey,queryHash:cr.queryHash}}function defaultShouldDehydrateMutation(cr){return cr.state.isPaused}function defaultShouldDehydrateQuery(cr){return cr.state.status==="success"}function dehydrate(cr,ar={}){const dr=[],fr=[];if(ar.dehydrateMutations!==!1){const hr=ar.shouldDehydrateMutation||defaultShouldDehydrateMutation;cr.getMutationCache().getAll().forEach(pr=>{hr(pr)&&dr.push(dehydrateMutation(pr))})}if(ar.dehydrateQueries!==!1){const hr=ar.shouldDehydrateQuery||defaultShouldDehydrateQuery;cr.getQueryCache().getAll().forEach(pr=>{hr(pr)&&fr.push(dehydrateQuery(pr))})}return{mutations:dr,queries:fr}}function hydrate(cr,ar,dr){if(typeof ar!="object"||ar===null)return;const fr=cr.getMutationCache(),hr=cr.getQueryCache(),pr=ar.mutations||[],mr=ar.queries||[];pr.forEach(gr=>{var yr;fr.build(cr,{...dr==null||(yr=dr.defaultOptions)==null?void 0:yr.mutations,mutationKey:gr.mutationKey},gr.state)}),mr.forEach(({queryKey:gr,state:yr,queryHash:xr})=>{var wr;const br=hr.get(xr);if(br){if(br.state.dataUpdatedAt<yr.dataUpdatedAt){const{fetchStatus:Sr,...vr}=yr;br.setState(vr)}return}hr.build(cr,{...dr==null||(wr=dr.defaultOptions)==null?void 0:wr.queries,queryKey:gr,queryHash:xr},{...yr,fetchStatus:"idle"})})}const useSyncExternalStore=shimExports.useSyncExternalStore,defaultContext=reactExports.createContext(void 0),QueryClientSharingContext=reactExports.createContext(!1);function getQueryClientContext(cr,ar){return cr||(ar&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=defaultContext),window.ReactQueryClientContext):defaultContext)}const useQueryClient=({context:cr}={})=>{const ar=reactExports.useContext(getQueryClientContext(cr,reactExports.useContext(QueryClientSharingContext)));if(!ar)throw new Error("No QueryClient set, use QueryClientProvider to set one");return ar},QueryClientProvider=({client:cr,children:ar,context:dr,contextSharing:fr=!1})=>{reactExports.useEffect(()=>(cr.mount(),()=>{cr.unmount()}),[cr]);const hr=getQueryClientContext(dr,fr);return reactExports.createElement(QueryClientSharingContext.Provider,{value:!dr&&fr},reactExports.createElement(hr.Provider,{value:cr},ar))},IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext);IsRestoringContext.Provider;function createValue(){let cr=!1;return{clearReset:()=>{cr=!1},reset:()=>{cr=!0},isReset:()=>cr}}const QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext);function shouldThrowError$1(cr,ar){return typeof cr=="function"?cr(...ar):!!cr}function useMutation$1(cr,ar,dr){const fr=parseMutationArgs(cr,ar,dr),hr=useQueryClient({context:fr.context}),[pr]=reactExports.useState(()=>new MutationObserver$1(hr,fr));reactExports.useEffect(()=>{pr.setOptions(fr)},[pr,fr]);const mr=useSyncExternalStore(reactExports.useCallback(yr=>pr.subscribe(notifyManager.batchCalls(yr)),[pr]),()=>pr.getCurrentResult(),()=>pr.getCurrentResult()),gr=reactExports.useCallback((yr,xr)=>{pr.mutate(yr,xr).catch(noop$4)},[pr]);if(mr.error&&shouldThrowError$1(pr.options.useErrorBoundary,[mr.error]))throw mr.error;return{...mr,mutate:gr,mutateAsync:mr.mutate}}function noop$4(){}const cacheableEventTypes=["added","removed","updated"];function isCacheableEventType(cr){return cacheableEventTypes.includes(cr)}async function persistQueryClientRestore({queryClient:cr,persister:ar,maxAge:dr=1e3*60*60*24,buster:fr="",hydrateOptions:hr}){try{const pr=await ar.restoreClient();if(pr)if(pr.timestamp){const mr=Date.now()-pr.timestamp>dr,gr=pr.buster!==fr;mr||gr?ar.removeClient():hydrate(cr,pr.clientState,hr)}else ar.removeClient()}catch{ar.removeClient()}}async function persistQueryClientSave({queryClient:cr,persister:ar,buster:dr="",dehydrateOptions:fr}){const hr={buster:dr,timestamp:Date.now(),clientState:dehydrate(cr,fr)};await ar.persistClient(hr)}function persistQueryClientSubscribe(cr){const ar=cr.queryClient.getQueryCache().subscribe(fr=>{isCacheableEventType(fr.type)&&persistQueryClientSave(cr)}),dr=cr.queryClient.getMutationCache().subscribe(fr=>{isCacheableEventType(fr.type)&&persistQueryClientSave(cr)});return()=>{ar(),dr()}}function persistQueryClient(cr){let ar=!1,dr;const fr=()=>{ar=!0,dr?.()},hr=persistQueryClientRestore(cr).then(()=>{ar||(dr=persistQueryClientSubscribe(cr))});return[fr,hr]}var eventemitter3={exports:{}};(function(cr){var ar=Object.prototype.hasOwnProperty,dr="~";function fr(){}Object.create&&(fr.prototype=Object.create(null),new fr().__proto__||(dr=!1));function hr(yr,xr,wr){this.fn=yr,this.context=xr,this.once=wr||!1}function pr(yr,xr,wr,br,Sr){if(typeof wr!="function")throw new TypeError("The listener must be a function");var vr=new hr(wr,br||yr,Sr),Er=dr?dr+xr:xr;return yr._events[Er]?yr._events[Er].fn?yr._events[Er]=[yr._events[Er],vr]:yr._events[Er].push(vr):(yr._events[Er]=vr,yr._eventsCount++),yr}function mr(yr,xr){--yr._eventsCount===0?yr._events=new fr:delete yr._events[xr]}function gr(){this._events=new fr,this._eventsCount=0}gr.prototype.eventNames=function(){var xr=[],wr,br;if(this._eventsCount===0)return xr;for(br in wr=this._events)ar.call(wr,br)&&xr.push(dr?br.slice(1):br);return Object.getOwnPropertySymbols?xr.concat(Object.getOwnPropertySymbols(wr)):xr},gr.prototype.listeners=function(xr){var wr=dr?dr+xr:xr,br=this._events[wr];if(!br)return[];if(br.fn)return[br.fn];for(var Sr=0,vr=br.length,Er=new Array(vr);Sr<vr;Sr++)Er[Sr]=br[Sr].fn;return Er},gr.prototype.listenerCount=function(xr){var wr=dr?dr+xr:xr,br=this._events[wr];return br?br.fn?1:br.length:0},gr.prototype.emit=function(xr,wr,br,Sr,vr,Er){var Ar=dr?dr+xr:xr;if(!this._events[Ar])return!1;var _r=this._events[Ar],Cr=arguments.length,kr,Rr;if(_r.fn){switch(_r.once&&this.removeListener(xr,_r.fn,void 0,!0),Cr){case 1:return _r.fn.call(_r.context),!0;case 2:return _r.fn.call(_r.context,wr),!0;case 3:return _r.fn.call(_r.context,wr,br),!0;case 4:return _r.fn.call(_r.context,wr,br,Sr),!0;case 5:return _r.fn.call(_r.context,wr,br,Sr,vr),!0;case 6:return _r.fn.call(_r.context,wr,br,Sr,vr,Er),!0}for(Rr=1,kr=new Array(Cr-1);Rr<Cr;Rr++)kr[Rr-1]=arguments[Rr];_r.fn.apply(_r.context,kr)}else{var Ir=_r.length,Nr;for(Rr=0;Rr<Ir;Rr++)switch(_r[Rr].once&&this.removeListener(xr,_r[Rr].fn,void 0,!0),Cr){case 1:_r[Rr].fn.call(_r[Rr].context);break;case 2:_r[Rr].fn.call(_r[Rr].context,wr);break;case 3:_r[Rr].fn.call(_r[Rr].context,wr,br);break;case 4:_r[Rr].fn.call(_r[Rr].context,wr,br,Sr);break;default:if(!kr)for(Nr=1,kr=new Array(Cr-1);Nr<Cr;Nr++)kr[Nr-1]=arguments[Nr];_r[Rr].fn.apply(_r[Rr].context,kr)}}return!0},gr.prototype.on=function(xr,wr,br){return pr(this,xr,wr,br,!1)},gr.prototype.once=function(xr,wr,br){return pr(this,xr,wr,br,!0)},gr.prototype.removeListener=function(xr,wr,br,Sr){var vr=dr?dr+xr:xr;if(!this._events[vr])return this;if(!wr)return mr(this,vr),this;var Er=this._events[vr];if(Er.fn)Er.fn===wr&&(!Sr||Er.once)&&(!br||Er.context===br)&&mr(this,vr);else{for(var Ar=0,_r=[],Cr=Er.length;Ar<Cr;Ar++)(Er[Ar].fn!==wr||Sr&&!Er[Ar].once||br&&Er[Ar].context!==br)&&_r.push(Er[Ar]);_r.length?this._events[vr]=_r.length===1?_r[0]:_r:mr(this,vr)}return this},gr.prototype.removeAllListeners=function(xr){var wr;return xr?(wr=dr?dr+xr:xr,this._events[wr]&&mr(this,wr)):(this._events=new fr,this._eventsCount=0),this},gr.prototype.off=gr.prototype.removeListener,gr.prototype.addListener=gr.prototype.on,gr.prefixed=dr,gr.EventEmitter=gr,cr.exports=gr})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter$1=getDefaultExportFromCjs(eventemitter3Exports),foundry=defineChain({id:31337,name:"Foundry",network:"foundry",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["http://127.0.0.1:8545"],webSocket:["ws://127.0.0.1:8545"]},public:{http:["http://127.0.0.1:8545"],webSocket:["ws://127.0.0.1:8545"]}}}),goerli=defineChain({id:5,network:"goerli",name:"Goerli",nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-goerli.g.alchemy.com/v2"],webSocket:["wss://eth-goerli.g.alchemy.com/v2"]},infura:{http:["https://goerli.infura.io/v3"],webSocket:["wss://goerli.infura.io/ws/v3"]},default:{http:["https://rpc.ankr.com/eth_goerli"]},public:{http:["https://rpc.ankr.com/eth_goerli"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://goerli.etherscan.io"},default:{name:"Etherscan",url:"https://goerli.etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0x56522D00C410a43BFfDF00a9A569489297385790",blockCreated:8765204},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:6507670}},testnet:!0}),mainnet$1=defineChain({id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc0497E381f536Be9ce14B0dD3817cBcAe57d2F62",blockCreated:16966585},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});var __defProp=Object.defineProperty,__defNormalProp=(cr,ar,dr)=>ar in cr?__defProp(cr,ar,{enumerable:!0,configurable:!0,writable:!0,value:dr}):cr[ar]=dr,__publicField=(cr,ar,dr)=>(__defNormalProp(cr,typeof ar!="symbol"?ar+"":ar,dr),dr),__accessCheck$1=(cr,ar,dr)=>{if(!ar.has(cr))throw TypeError("Cannot "+dr)},__privateGet$1=(cr,ar,dr)=>(__accessCheck$1(cr,ar,"read from private field"),dr?dr.call(cr):ar.get(cr)),__privateAdd$1=(cr,ar,dr)=>{if(ar.has(cr))throw TypeError("Cannot add the same private member more than once");ar instanceof WeakSet?ar.add(cr):ar.set(cr,dr)},__privateSet$1=(cr,ar,dr,fr)=>(__accessCheck$1(cr,ar,"write to private field"),fr?fr.call(cr,dr):ar.set(cr,dr),dr),__privateMethod$1=(cr,ar,dr)=>(__accessCheck$1(cr,ar,"access private method"),dr),Connector=class extends EventEmitter$1{constructor({chains:cr=[mainnet$1,goerli],options:ar}){super(),__publicField(this,"chains"),__publicField(this,"options"),__publicField(this,"storage"),this.chains=cr,this.options=ar}getBlockExplorerUrls(cr){const{default:ar,...dr}=cr.blockExplorers??{};if(ar)return[ar.url,...Object.values(dr).map(fr=>fr.url)]}isChainUnsupported(cr){return!this.chains.some(ar=>ar.id===cr)}setStorage(cr){this.storage=cr}},ChainNotConfiguredForConnectorError=class extends Error{constructor({chainId:cr,connectorId:ar}){super(`Chain "${cr}" not configured for connector "${ar}".`),__publicField(this,"name","ChainNotConfiguredForConnectorError")}},ConnectorNotFoundError=class extends Error{constructor(){super(...arguments),__publicField(this,"name","ConnectorNotFoundError"),__publicField(this,"message","Connector not found")}};function normalizeChainId(cr){return typeof cr=="string"?Number.parseInt(cr,cr.trim().substring(0,2)==="0x"?16:10):typeof cr=="bigint"?Number(cr):cr}function getInjectedName(cr){if(!cr)return"Injected";const ar=dr=>{if(dr.isApexWallet)return"Apex Wallet";if(dr.isAvalanche)return"Core Wallet";if(dr.isBackpack)return"Backpack";if(dr.isBifrost)return"Bifrost Wallet";if(dr.isBitKeep)return"BitKeep";if(dr.isBitski)return"Bitski";if(dr.isBlockWallet)return"BlockWallet";if(dr.isBraveWallet)return"Brave Wallet";if(dr.isCoin98)return"Coin98 Wallet";if(dr.isCoinbaseWallet)return"Coinbase Wallet";if(dr.isDawn)return"Dawn Wallet";if(dr.isDefiant)return"Defiant";if(dr.isDesig)return"Desig Wallet";if(dr.isEnkrypt)return"Enkrypt";if(dr.isExodus)return"Exodus";if(dr.isFordefi)return"Fordefi";if(dr.isFrame)return"Frame";if(dr.isFrontier)return"Frontier Wallet";if(dr.isGamestop)return"GameStop Wallet";if(dr.isHaqqWallet)return"HAQQ Wallet";if(dr.isHyperPay)return"HyperPay Wallet";if(dr.isImToken)return"ImToken";if(dr.isHaloWallet)return"Halo Wallet";if(dr.isKuCoinWallet)return"KuCoin Wallet";if(dr.isMathWallet)return"MathWallet";if(dr.isNovaWallet)return"Nova Wallet";if(dr.isOkxWallet||dr.isOKExWallet)return"OKX Wallet";if(dr.isOneInchIOSWallet||dr.isOneInchAndroidWallet)return"1inch Wallet";if(dr.isOpera)return"Opera";if(dr.isPhantom)return"Phantom";if(dr.isPortal)return"Ripio Portal";if(dr.isRabby)return"Rabby Wallet";if(dr.isRainbow)return"Rainbow";if(dr.isStatus)return"Status";if(dr.isSubWallet)return"SubWallet";if(dr.isTalisman)return"Talisman";if(dr.isTally)return"Taho";if(dr.isTokenPocket)return"TokenPocket";if(dr.isTokenary)return"Tokenary";if(dr.isTrust||dr.isTrustWallet)return"Trust Wallet";if(dr.isTTWallet)return"TTWallet";if(dr.isXDEFI)return"XDEFI Wallet";if(dr.isZerion)return"Zerion";if(dr.isMetaMask)return"MetaMask"};if(cr.providers?.length){const dr=new Set;let fr=1;for(const pr of cr.providers){let mr=ar(pr);mr||(mr=`Unknown Wallet #${fr}`,fr+=1),dr.add(mr)}const hr=[...dr];return hr.length?hr:hr[0]??"Injected"}return ar(cr)??"Injected"}var _provider$2,InjectedConnector=class extends Connector{constructor({chains:cr,options:ar}={}){const dr={shimDisconnect:!0,getProvider(){if(typeof window>"u")return;const hr=window.ethereum;return hr?.providers?hr.providers[0]:hr},...ar};super({chains:cr,options:dr}),__publicField(this,"id","injected"),__publicField(this,"name"),__publicField(this,"ready"),__privateAdd$1(this,_provider$2,void 0),__publicField(this,"shimDisconnectKey",`${this.id}.shimDisconnect`),__publicField(this,"onAccountsChanged",hr=>{hr.length===0?this.emit("disconnect"):this.emit("change",{account:getAddress$2(hr[0])})}),__publicField(this,"onChainChanged",hr=>{const pr=normalizeChainId(hr),mr=this.isChainUnsupported(pr);this.emit("change",{chain:{id:pr,unsupported:mr}})}),__publicField(this,"onDisconnect",async hr=>{hr.code===1013&&await this.getProvider()&&await this.getAccount()||(this.emit("disconnect"),this.options.shimDisconnect&&this.storage?.removeItem(this.shimDisconnectKey))});const fr=dr.getProvider();if(typeof dr.name=="string")this.name=dr.name;else if(fr){const hr=getInjectedName(fr);dr.name?this.name=dr.name(hr):typeof hr=="string"?this.name=hr:this.name=hr[0]}else this.name="Injected";this.ready=!!fr}async connect({chainId:cr}={}){try{const ar=await this.getProvider();if(!ar)throw new ConnectorNotFoundError;ar.on&&(ar.on("accountsChanged",this.onAccountsChanged),ar.on("chainChanged",this.onChainChanged),ar.on("disconnect",this.onDisconnect)),this.emit("message",{type:"connecting"});const dr=await ar.request({method:"eth_requestAccounts"}),fr=getAddress$2(dr[0]);let hr=await this.getChainId(),pr=this.isChainUnsupported(hr);return cr&&hr!==cr&&(hr=(await this.switchChain(cr)).id,pr=this.isChainUnsupported(hr)),this.options.shimDisconnect&&this.storage?.setItem(this.shimDisconnectKey,!0),{account:fr,chain:{id:hr,unsupported:pr}}}catch(ar){throw this.isUserRejectedRequestError(ar)?new UserRejectedRequestError(ar):ar.code===-32002?new ResourceUnavailableRpcError(ar):ar}}async disconnect(){const cr=await this.getProvider();cr?.removeListener&&(cr.removeListener("accountsChanged",this.onAccountsChanged),cr.removeListener("chainChanged",this.onChainChanged),cr.removeListener("disconnect",this.onDisconnect),this.options.shimDisconnect&&this.storage?.removeItem(this.shimDisconnectKey))}async getAccount(){const cr=await this.getProvider();if(!cr)throw new ConnectorNotFoundError;const ar=await cr.request({method:"eth_accounts"});return getAddress$2(ar[0])}async getChainId(){const cr=await this.getProvider();if(!cr)throw new ConnectorNotFoundError;return cr.request({method:"eth_chainId"}).then(normalizeChainId)}async getProvider(){const cr=this.options.getProvider();return cr&&__privateSet$1(this,_provider$2,cr),__privateGet$1(this,_provider$2)}async getWalletClient({chainId:cr}={}){const[ar,dr]=await Promise.all([this.getProvider(),this.getAccount()]),fr=this.chains.find(hr=>hr.id===cr);if(!ar)throw new Error("provider is required.");return createWalletClient({account:dr,chain:fr,transport:custom(ar)})}async isAuthorized(){try{if(this.options.shimDisconnect&&!this.storage?.getItem(this.shimDisconnectKey))return!1;if(!await this.getProvider())throw new ConnectorNotFoundError;return!!await this.getAccount()}catch{return!1}}async switchChain(cr){const ar=await this.getProvider();if(!ar)throw new ConnectorNotFoundError;const dr=numberToHex(cr);try{return await Promise.all([ar.request({method:"wallet_switchEthereumChain",params:[{chainId:dr}]}),new Promise(fr=>this.on("change",({chain:hr})=>{hr?.id===cr&&fr()}))]),this.chains.find(fr=>fr.id===cr)??{id:cr,name:`Chain ${dr}`,network:`${dr}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}}}catch(fr){const hr=this.chains.find(pr=>pr.id===cr);if(!hr)throw new ChainNotConfiguredForConnectorError({chainId:cr,connectorId:this.id});if(fr.code===4902||fr?.data?.originalError?.code===4902)try{if(await ar.request({method:"wallet_addEthereumChain",params:[{chainId:dr,chainName:hr.name,nativeCurrency:hr.nativeCurrency,rpcUrls:[hr.rpcUrls.public?.http[0]??""],blockExplorerUrls:this.getBlockExplorerUrls(hr)}]}),await this.getChainId()!==cr)throw new UserRejectedRequestError(new Error("User rejected switch after adding network."));return hr}catch(pr){throw new UserRejectedRequestError(pr)}throw this.isUserRejectedRequestError(fr)?new UserRejectedRequestError(fr):new SwitchChainError(fr)}}async watchAsset({address:cr,decimals:ar=18,image:dr,symbol:fr}){const hr=await this.getProvider();if(!hr)throw new ConnectorNotFoundError;return hr.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:cr,decimals:ar,image:dr,symbol:fr}}})}isUserRejectedRequestError(cr){return cr.code===4001}};_provider$2=new WeakMap;var __accessCheck=(cr,ar,dr)=>{if(!ar.has(cr))throw TypeError("Cannot "+dr)},__privateGet=(cr,ar,dr)=>(__accessCheck(cr,ar,"read from private field"),dr?dr.call(cr):ar.get(cr)),__privateAdd=(cr,ar,dr)=>{if(ar.has(cr))throw TypeError("Cannot add the same private member more than once");ar instanceof WeakSet?ar.add(cr):ar.set(cr,dr)},__privateSet=(cr,ar,dr,fr)=>(__accessCheck(cr,ar,"write to private field"),fr?fr.call(cr,dr):ar.set(cr,dr),dr),__privateMethod=(cr,ar,dr)=>(__accessCheck(cr,ar,"access private method"),dr);const subscribeWithSelectorImpl=cr=>(ar,dr,fr)=>{const hr=fr.subscribe;return fr.subscribe=(mr,gr,yr)=>{let xr=mr;if(gr){const wr=yr?.equalityFn||Object.is;let br=mr(fr.getState());xr=Sr=>{const vr=mr(Sr);if(!wr(br,vr)){const Er=br;gr(br=vr,Er)}},yr?.fireImmediately&&gr(br,br)}return hr(xr)},cr(ar,dr,fr)},subscribeWithSelector=subscribeWithSelectorImpl;function createJSONStorage(cr,ar){let dr;try{dr=cr()}catch{return}return{getItem:hr=>{var pr;const mr=yr=>yr===null?null:JSON.parse(yr,ar?.reviver),gr=(pr=dr.getItem(hr))!=null?pr:null;return gr instanceof Promise?gr.then(mr):mr(gr)},setItem:(hr,pr)=>dr.setItem(hr,JSON.stringify(pr,ar?.replacer)),removeItem:hr=>dr.removeItem(hr)}}const toThenable=cr=>ar=>{try{const dr=cr(ar);return dr instanceof Promise?dr:{then(fr){return toThenable(fr)(dr)},catch(fr){return this}}}catch(dr){return{then(fr){return this},catch(fr){return toThenable(fr)(dr)}}}},oldImpl=(cr,ar)=>(dr,fr,hr)=>{let pr={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_r=>_r,version:0,merge:(_r,Cr)=>({...Cr,..._r}),...ar},mr=!1;const gr=new Set,yr=new Set;let xr;try{xr=pr.getStorage()}catch{}if(!xr)return cr((..._r)=>{console.warn(`[zustand persist middleware] Unable to update item '${pr.name}', the given storage is currently unavailable.`),dr(..._r)},fr,hr);const wr=toThenable(pr.serialize),br=()=>{const _r=pr.partialize({...fr()});let Cr;const kr=wr({state:_r,version:pr.version}).then(Rr=>xr.setItem(pr.name,Rr)).catch(Rr=>{Cr=Rr});if(Cr)throw Cr;return kr},Sr=hr.setState;hr.setState=(_r,Cr)=>{Sr(_r,Cr),br()};const vr=cr((..._r)=>{dr(..._r),br()},fr,hr);let Er;const Ar=()=>{var _r;if(!xr)return;mr=!1,gr.forEach(kr=>kr(fr()));const Cr=((_r=pr.onRehydrateStorage)==null?void 0:_r.call(pr,fr()))||void 0;return toThenable(xr.getItem.bind(xr))(pr.name).then(kr=>{if(kr)return pr.deserialize(kr)}).then(kr=>{if(kr)if(typeof kr.version=="number"&&kr.version!==pr.version){if(pr.migrate)return pr.migrate(kr.state,kr.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return kr.state}).then(kr=>{var Rr;return Er=pr.merge(kr,(Rr=fr())!=null?Rr:vr),dr(Er,!0),br()}).then(()=>{Cr?.(Er,void 0),mr=!0,yr.forEach(kr=>kr(Er))}).catch(kr=>{Cr?.(void 0,kr)})};return hr.persist={setOptions:_r=>{pr={...pr,..._r},_r.getStorage&&(xr=_r.getStorage())},clearStorage:()=>{xr?.removeItem(pr.name)},getOptions:()=>pr,rehydrate:()=>Ar(),hasHydrated:()=>mr,onHydrate:_r=>(gr.add(_r),()=>{gr.delete(_r)}),onFinishHydration:_r=>(yr.add(_r),()=>{yr.delete(_r)})},Ar(),Er||vr},newImpl=(cr,ar)=>(dr,fr,hr)=>{let pr={storage:createJSONStorage(()=>localStorage),partialize:Ar=>Ar,version:0,merge:(Ar,_r)=>({..._r,...Ar}),...ar},mr=!1;const gr=new Set,yr=new Set;let xr=pr.storage;if(!xr)return cr((...Ar)=>{console.warn(`[zustand persist middleware] Unable to update item '${pr.name}', the given storage is currently unavailable.`),dr(...Ar)},fr,hr);const wr=()=>{const Ar=pr.partialize({...fr()});return xr.setItem(pr.name,{state:Ar,version:pr.version})},br=hr.setState;hr.setState=(Ar,_r)=>{br(Ar,_r),wr()};const Sr=cr((...Ar)=>{dr(...Ar),wr()},fr,hr);let vr;const Er=()=>{var Ar,_r;if(!xr)return;mr=!1,gr.forEach(kr=>{var Rr;return kr((Rr=fr())!=null?Rr:Sr)});const Cr=((_r=pr.onRehydrateStorage)==null?void 0:_r.call(pr,(Ar=fr())!=null?Ar:Sr))||void 0;return toThenable(xr.getItem.bind(xr))(pr.name).then(kr=>{if(kr)if(typeof kr.version=="number"&&kr.version!==pr.version){if(pr.migrate)return pr.migrate(kr.state,kr.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return kr.state}).then(kr=>{var Rr;return vr=pr.merge(kr,(Rr=fr())!=null?Rr:Sr),dr(vr,!0),wr()}).then(()=>{Cr?.(vr,void 0),vr=fr(),mr=!0,yr.forEach(kr=>kr(vr))}).catch(kr=>{Cr?.(void 0,kr)})};return hr.persist={setOptions:Ar=>{pr={...pr,...Ar},Ar.storage&&(xr=Ar.storage)},clearStorage:()=>{xr?.removeItem(pr.name)},getOptions:()=>pr,rehydrate:()=>Er(),hasHydrated:()=>mr,onHydrate:Ar=>(gr.add(Ar),()=>{gr.delete(Ar)}),onFinishHydration:Ar=>(yr.add(Ar),()=>{yr.delete(Ar)})},pr.skipHydration||Er(),vr||Sr},persistImpl=(cr,ar)=>"getStorage"in ar||"serialize"in ar||"deserialize"in ar?oldImpl(cr,ar):newImpl(cr,ar),persist=persistImpl;function shallow(cr,ar){if(Object.is(cr,ar))return!0;if(typeof cr!="object"||cr===null||typeof ar!="object"||ar===null)return!1;if(cr instanceof Map&&ar instanceof Map){if(cr.size!==ar.size)return!1;for(const[fr,hr]of cr)if(!Object.is(hr,ar.get(fr)))return!1;return!0}if(cr instanceof Set&&ar instanceof Set){if(cr.size!==ar.size)return!1;for(const fr of cr)if(!ar.has(fr))return!1;return!0}const dr=Object.keys(cr);if(dr.length!==Object.keys(ar).length)return!1;for(let fr=0;fr<dr.length;fr++)if(!Object.prototype.hasOwnProperty.call(ar,dr[fr])||!Object.is(cr[dr[fr]],ar[dr[fr]]))return!1;return!0}function decode_arithmetic$1(cr){let ar=0;function dr(){return cr[ar++]<<8|cr[ar++]}let fr=dr(),hr=1,pr=[0,1];for(let Nr=1;Nr<fr;Nr++)pr.push(hr+=dr());let mr=dr(),gr=ar;ar+=mr;let yr=0,xr=0;function wr(){return yr==0&&(xr=xr<<8|cr[ar++],yr=8),xr>>--yr&1}const br=31,Sr=2**br,vr=Sr>>>1,Er=vr>>1,Ar=Sr-1;let _r=0;for(let Nr=0;Nr<br;Nr++)_r=_r<<1|wr();let Cr=[],kr=0,Rr=Sr;for(;;){let Nr=Math.floor(((_r-kr+1)*hr-1)/Rr),Pr=0,Tr=fr;for(;Tr-Pr>1;){let jr=Pr+Tr>>>1;Nr<pr[jr]?Tr=jr:Pr=jr}if(Pr==0)break;Cr.push(Pr);let Br=kr+Math.floor(Rr*pr[Pr]/hr),Fr=kr+Math.floor(Rr*pr[Pr+1]/hr)-1;for(;!((Br^Fr)&vr);)_r=_r<<1&Ar|wr(),Br=Br<<1&Ar,Fr=Fr<<1&Ar|1;for(;Br&~Fr&Er;)_r=_r&vr|_r<<1&Ar>>>1|wr(),Br=Br<<1^vr,Fr=(Fr^vr)<<1|vr|1;kr=Br,Rr=1+Fr-Br}let Ir=fr-4;return Cr.map(Nr=>{switch(Nr-Ir){case 3:return Ir+65792+(cr[gr++]<<16|cr[gr++]<<8|cr[gr++]);case 2:return Ir+256+(cr[gr++]<<8|cr[gr++]);case 1:return Ir+cr[gr++];default:return Nr-1}})}function read_payload$1(cr){let ar=0;return()=>cr[ar++]}function read_compressed_payload$1(cr){return read_payload$1(decode_arithmetic$1(unsafe_atob$1(cr)))}function unsafe_atob$1(cr){let ar=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((hr,pr)=>ar[hr.charCodeAt(0)]=pr);let dr=cr.length,fr=new Uint8Array(6*dr>>3);for(let hr=0,pr=0,mr=0,gr=0;hr<dr;hr++)gr=gr<<6|ar[cr.charCodeAt(hr)],mr+=6,mr>=8&&(fr[pr++]=gr>>(mr-=8));return fr}function signed$1(cr){return cr&1?~cr>>1:cr>>1}function read_deltas$1(cr,ar){let dr=Array(cr);for(let fr=0,hr=0;fr<cr;fr++)dr[fr]=hr+=signed$1(ar());return dr}function read_sorted$1(cr,ar=0){let dr=[];for(;;){let fr=cr(),hr=cr();if(!hr)break;ar+=fr;for(let pr=0;pr<hr;pr++)dr.push(ar+pr);ar+=hr+1}return dr}function read_sorted_arrays$1(cr){return read_array_while$1(()=>{let ar=read_sorted$1(cr);if(ar.length)return ar})}function read_mapped$1(cr){let ar=[];for(;;){let dr=cr();if(dr==0)break;ar.push(read_linear_table$1(dr,cr))}for(;;){let dr=cr()-1;if(dr<0)break;ar.push(read_replacement_table$1(dr,cr))}return ar.flat()}function read_array_while$1(cr){let ar=[];for(;;){let dr=cr(ar.length);if(!dr)break;ar.push(dr)}return ar}function read_transposed$1(cr,ar,dr){let fr=Array(cr).fill().map(()=>[]);for(let hr=0;hr<ar;hr++)read_deltas$1(cr,dr).forEach((pr,mr)=>fr[mr].push(pr));return fr}function read_linear_table$1(cr,ar){let dr=1+ar(),fr=ar(),hr=read_array_while$1(ar);return read_transposed$1(hr.length,1+cr,ar).flatMap((mr,gr)=>{let[yr,...xr]=mr;return Array(hr[gr]).fill().map((wr,br)=>{let Sr=br*fr;return[yr+br*dr,xr.map(vr=>vr+Sr)]})})}function read_replacement_table$1(cr,ar){let dr=1+ar();return read_transposed$1(dr,1+cr,ar).map(hr=>[hr[0],hr.slice(1)])}function read_trie$1(cr){let ar=[],dr=read_sorted$1(cr);return hr(fr([]),[]),ar;function fr(pr){let mr=cr(),gr=read_array_while$1(()=>{let yr=read_sorted$1(cr).map(xr=>dr[xr]);if(yr.length)return fr(yr)});return{S:mr,B:gr,Q:pr}}function hr({S:pr,B:mr},gr,yr){if(!(pr&4&&yr===gr[gr.length-1])){pr&2&&(yr=gr[gr.length-1]),pr&1&&ar.push(gr);for(let xr of mr)for(let wr of xr.Q)hr(xr,[...gr,wr],yr)}}}var r$1$1=read_compressed_payload$1("AEITLAk1DSsBxwKEAQMBOQDpATAAngDUAHsAoABoAM4AagCNAEQAhABMAHIAOwA9ACsANgAmAGIAHgAvACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGAAeABMAFwAXBOcF2QEXE943ygXaALgArkYBbgCsCAPMAK6GNjY2NgE/rgwQ8gAEB0YG6zgFXgVfAD0yOQf2vRgFDc/IABUDz546AswKNgKOqAKG3z+Vb5ACxdICg/kBJuYQAPK0AUgCNJQKRpYA6gDpChwAHtvAzxMSRKQEIn4BBAJAGMQP8hAGMPAMBIhuDSIHNACyAHCY76ychgBiBpoCKgbwACIAQgyaFwKqAspCINYIwjADuBRCAPc0cqoAqIQfAB4ELALeHQEkAMAZ1AUBECBTPgmeCY8lIlZgTOqDSQAaABMAHAAVclsAKAAVAE71HN89+gI5X8qc5jUKFyRfVAJfPfMAGgATABwAFXIgY0CeAMPyACIAQAzMFsKqAgHavwViBekC0KYCxLcCClMjpGwUehp0TPwAwhRuAugAEjQ0kBfQmAKBggETIgDEFG4C6AASNAFPUCyYTBEDLgIFLxDecB60Ad5KAHgyEn4COBYoAy4uwD5yAEDoAfwsAM4O0rwBImqIALgMAAwCAIraUAUi3HIeAKgu2AGoBgYGBgYrNAOiAG4BCiA+9Dd7BB8eALEBzgIoAgDmMhJ6OvpQtzOoLjVPBQAGAS4FYAVftr8FcDtkQhlBWEiee5pmZqH/EhoDzA4s+H4qBKpSAlpaAnwisi4BlqqsPGIDTB4EimgQANgCBrJGNioCBzACQGQAcgFoJngAiiQgAJwBUL4ALnAeAbbMAz40KEoEWgF2YAZsAmwA+FAeAzAIDABQSACyAABkAHoAMrwGDvr2IJSGBgAQKAAwALoiTgHYAeIOEjiXf4HvABEAGAA7AEQAPzp3gNrHEGYQYwgFTRBMc0EVEgKzD60L7BEcDNgq0tPfADSwB/IDWgfyA1oDWgfyB/IDWgfyA1oDWgNaA1ocEfAh2scQZg9PBHQFlQWSBN0IiiZQEYgHLwjZVBR0JRxOA0wBAyMsSSM7mjMSJUlME00KCAM2SWyufT8DTjGyVPyQqQPSMlY5cwgFHngSpwAxD3ojNbxOhXpOcacKUk+1tYZJaU5uAsU6rz//CigJmm/Cd1UGRBAeJ6gQ+gw2AbgBPg3wS9sE9AY+BMwfgBkcD9CVnwioLeAM8CbmLqSAXSP4KoYF8Ev3POALUFFrD1wLaAnmOmaBUQMkARAijgrgDTwIcBD2CsxuDegRSAc8A9hJnQCoBwQLFB04FbgmE2KvCww5egb+GvkLkiayEyx6/wXWGiQGUAEsGwIA0i7qhbNaNFwfT2IGBgsoI8oUq1AjDShAunhLGh4HGCWsApRDc0qKUTkeliH5PEANaS4WUX8H+DwIGVILhDyhRq5FERHVPpA9SyJMTC8EOIIsMieOCdIPiAy8fHUBXAkkCbQMdBM0ERo3yAg8BxwwlycnGAgkRphgnQT6ogP2E9QDDgVCCUQHFgO4HDATMRUsBRCBJ9oC9jbYLrYCklaDARoFzg8oH+IQU0fjDuwIngJoA4Yl7gAwFSQAGiKeCEZmAGKP21MILs4IympvI3cDahTqZBF2B5QOWgeqHDYVwhzkcMteDoYLKKayCV4BeAmcAWIE5ggMNV6MoyBEZ1aLWxieIGRBQl3/AjQMaBWiRMCHewKOD24SHgE4AXYHPA0EAnoR8BFuEJgI7oYHNbgz+zooBFIhhiAUCioDUmzRCyom/Az7bAGmEmUDDzRAd/FnrmC5JxgABxwyyEFjIfQLlU/QDJ8axBhFVDEZ5wfCA/Ya9iftQVoGAgOmBhY6UDPxBMALbAiOCUIATA6mGgfaGG0KdIzTATSOAbqcA1qUhgJykgY6Bw4Aag6KBXzoACACqgimAAgA0gNaADwCsAegABwAiEQBQAMqMgEk6AKSA5YINM4BmDIB9iwEHsYMGAD6Om5NAsO0AoBtZqUF4FsCkQJMOAFQKAQIUUpUA7J05ADeAE4GFuJKARiuTc4d5kYB4nIuAMoA/gAIOAcIRAHQAfZwALoBYgs0CaW2uAFQ7CwAhgAYbgHaAowA4AA4AIL0AVYAUAVc/AXWAlJMARQ0Gy5aZAG+AyIBNgEQAHwGzpCozAoiBHAH1gIQHhXkAu8xB7gEAyLiE9BCyAK94VgAMhkKOwqqCqlgXmM2CTR1PVMAER+rPso/UQVUO1Y7WztWO1s7VjtbO1Y7WztWO1sDmsLlwuUKb19IYe4MqQ3XRMs6TBPeYFRgNRPLLboUxBXRJVkZQBq/Jwgl51UMDwct1mYzCC80eBe/AEIpa4NEY4keMwpOHOpTlFT7LR4AtEulM7INrxsYREMFSnXwYi0WEQolAmSEAmJFXlCyAF43IwKh+gJomwJmDAKfhzgeDgJmPgJmKQRxBIIDfxYDfpU5CTl6GjmFOiYmAmwgAjI5OA0CbcoCbbHyjQI2akguAWoA4QDkAE0IB5sMkAEBDsUAELgCdzICdqVCAnlORgJ4vSBf3kWxRvYCfEICessCfQwCfPNIA0iAZicALhhJW0peGBpKzwLRBALQz0sqA4hSA4fpRMiRNQLypF0GAwOxS9FMMCgG0k1PTbICi0ICitvEHgogRmoIugKOOgKOX0OahAKO3AKOX3tRt1M4AA1S11SIApP+ApMPAOwAH1UhVbJV0wksHimYiTLkeGlFPjwCl6IC77VYJKsAXCgClpICln+fAKxZr1oMhFAAPgKWuAKWUVxHXNQCmc4CmWdczV0KHAKcnjnFOqACnBkCn54CnruNACASNC0SAp30Ap6VALhAYTdh8gKe1gKgcQGsAp6iIgKeUahjy2QqKC4CJ7ICJoECoP4CoE/aAqYyAqXRAqgCAIACp/Vof2i0AAZMah9q1AKs5gKssQKtagKtBQJXIAJV3wKx5NoDH1FsmgKywBACsusabONtZm1LYgMl0AK2Xz5CbpMDKUgCuGECuUoYArktenA5cOQCvRwDLbUDMhQCvotyBQMzdAK+HXMlc1ICw84CwwdzhXROOEh04wM8qgADPJ0DPcICxX8CxkoCxhOMAshsVALIRwLJUgLJMQJkoALd1Xh8ZHixeShL0wMYpmcFAmH3GfaVJ3sOXpVevhQCz24Cz28yTlbV9haiAMmwAs92ASztA04Vfk4IAtwqAtuNAtJSA1JfA1NiAQQDVY+AjEIDzhnwY0h4AoLRg5AC2soC2eGEE4RMpz8DhqgAMgNkEYZ0XPwAWALfaALeu3Z6AuIy7RcB8zMqAfSeAfLVigLr9gLpc3wCAur8AurnAPxKAbwC7owC65+WrZcGAu5CA4XjmHxw43GkAvMGAGwDjhmZlgL3FgORcQOSigL3mwL53AL4aZofmq6+OpshA52GAv79AR4APJ8fAJ+2AwWQA6ZtA6bcANTIAwZtoYuiCAwDDEwBEgEiB3AGZLxqCAC+BG7CFI4ethAAGng8ACYDNhJQA4yCAWYqJACM8gAkAOamCqKUCLoGIqbIBQCuBRjCBfAkREUEFn8Fbz5FRzJCKEK7X3gYX8MAlswFOQCQUyCbwDstYDkYutYONhjNGJDJ/QVeBV8FXgVfBWoFXwVeBV8FXgVfBV4FXwVeBV9NHAjejG4JCQkKa17wMgTQA7gGNsLCAMIErsIA7kcwFrkFTT5wPndCRkK9X3w+X+8AWBgzsgCNBcxyzAOm7kaBRC0qCzIdLj08fnTfccH4GckscAFy13U3HgVmBXHJyMm/CNZQYgcHBwqDXoSSxQA6P4gAChbYBuy0KgwAjMoSAwgUAOVsJEQrJlFCuELDSD8qXy5gPS4/KgnIRAUKSz9KPn8+iD53PngCkELDUElCX9JVVnFUETNyWzYCcQASdSZf5zpBIgluogppKjJDJC1CskLDMswIzANf0BUmNRAPEAMGAQYpfqTfcUE0UR7JssmzCWzI0tMKZ0FmD+wQqhgAk5QkTEIsG7BtQM4/Cjo/Sj53QkYcDhEkU05zYjM0Wui8GQqE9CQyQkYcZA9REBU6W0pJPgs7SpwzCogiNEJGG/wPWikqHzc4BwyPaPBlCnhk0GASYDQqdQZKYCBACSIlYLoNCXIXbFVgVBgIBQZk7mAcYJxghGC6YFJgmG8WHga8FdxcsLxhC0MdsgHCMtTICSYcByMKJQGAAnMBNjecWYcCAZEKv04hAOsqdJUR0RQErU3xAaICjqNWBUdmAP4ARBEHOx1egRKsEysmwbZOAFYTOwMAHBO+NVsC2RJLbBEiAN9VBnwEESVhADgAvQKhLgsWdrI5P6YgAWIBjQoDA+D0FgaxBlEGwAAky1ywYRC7aBOQCy1GDsIBwgEpCU4DYQUvLy8nJSYoMxktDSgTlABbAnVel1CcCHUmBA94TgHadRbVWCcgsLdN8QcYBVNmAP4ARBEHgQYNK3MRjhKsPzc0zrZdFBIAZsMSAGpKblAoIiLGADgAvQKhLi1CFdUClxiCAVDCWM90eY7epaIO/KAVRBvzEuASDQ8iAwHOCUEQmgwXMhM9EgBCALrVAQkAqwDoAJuRNgAbAGIbzTVzfTEUyAIXCUIrStroIyUSG4QCggTIEbHxcwA+QDQOrT8u1agjB8IQABBBLtUYIAB9suEjD8IhThzUqHclAUQqZiMC8qAPBFPz6x9sDMMNAQhDCkUABccLRAJSDcIIww1DCUMKwy7VqDEOwgyYCCIPkhroBCILwhZCAKcLQhDCCwUYp3vjADtyDEMAAq0JwwUi1/UMBQ110QaCAAfCEmIYEsMBCADxCAAAexViDRbSG/x2F8IYQgAuwgLyqMIAHsICXCcxhgABwgAC6hVDFcIr8qPCz6hCCgKlJ1IAAmIA5+QZwg+lYhW/ywD7GoIIqAUR/3cA38KnwhjiARrCo5J5eQcCqaKKABLCDRsSAAOaAG3CDQALwqdCCBpCAsEIqJzRDwIHx6lCBQDhgi+9bcUDTwAD8gAVwgAHAgAJwgBpkgAawgAOwgkYwo5wFgIAAWIADnIALlIlAAbCABfCCCgADVEAusItAAPCAA6iKvIAsmEAHCIAG8IAAfIKqAAFzQscFeIAB6IAQsIBCQBpwgALggAdwgAIwgmoAAXRAG6mGdwAmAgoAAXRAAFCAAfiAB2iCCgABqEACYIAGzIAbSIA5sKHAAhiAAhCABTCAwBpAgkoAAbRAOOSAAlCC6gOy/tmAAdCAG6jQE8ATgAKwgsAA0IACbQDPgAHIgAZggACEqcCAAoiAApCAAoCp/IGwgAJIgADEgAQQgcAFEIAEXIAD5IADfIADcIAGRINFiIAFUIAbqIWugHCAMEAE0IKAGkyEQDhUgACQgAEWQAXggUiAAbXABjCBCUBgi9ZAEBMALYPBxQMeQAvMXcBqwwIZQJzKhMGBBAOdlJzZjGQJgWHGwVpND0DqAq7BgjfAB0DAgp1AX15TlkbKANWAhxFATMGCnpNxIJZgUcAMAA4CAACAAAAWhHiAIKXMwEyAH3sFBg5TQhRAF4MAAhXAQ6R0wB/QgQnrABhAN0cAJxvPiaSANRyuADW2wEdD8l8eiIfXSQQ2AGPl7IpWlpUTxlDyZAAAACGIz5HMDLnGJ5WAHkBMCw3KUkgFgM3XAT+zPUAUmzjAHECeAJGEYE6zng1NdwCAQwXGSYLGw60tQIBAQEABQIEAgIAGdMCACwBAAUFBQUFBQQEBAQEBAMEBQYHCAMEBAQEAwEBIQCMAI8AlDwA6QC6ANsAo0MAwQCxAKwApwDtAKUA2QCiAOYBBwECAMYAgABhANEA0wECAN0A8QCPAKgBMADpAN4A2woACA4xOtnZ2dm7xeHS1dNINxwBUQFbNEwBWQFoAWcBWgFLUEhKbRIBUhoMDwo5PRINACYTKiwuMT0/P0JCQkNEE0UFI1ZWVlZYWFdYLllaXFtbImJmZmVnZilrbXV0d3d3d3d3eXl5eXl5eXl5eXl7e3x7emEAQ/EASACZAHcAMQBl9wCNAFYAVgA2AnXuAIoABPf3AGMAkvEAngBOAGEAY/7+rwCEAIQAaABVALAAIwC1AIICPwJCAPsA5gD9AP0A5wD+AOgA6ADnAOUALgJ6AVABPwE9AVMBPQE9AT0BOAE3ATcBNwEbAVcWADAPBwAAUh4RHQocHRUAjQCVAKUAUABpHwIwAHUAbgCWAxQDJjEDIEhFTjAAkAJOAMYCVgKjAL8ClQKVApUClQKVApUCigKVApUClQKVApUClQKUApQClwKfApYClQKVApMCkwKTApMCkQKUAnQB0wKWAp4ClQKVApQdgBIEAP0MA54CYAI5HgFTFzwC4RgRMhoBTT4aVJgBeqtDAWhgAQQDQE4BBQCYMB4flnEAMGcAcAA1AJADm8yS8LWLYQzBMhXJARgIpNx7MQsEKmFzAbkA5IWHhoWHhYiJiYWKjYuFjI+Nh46Jj4mQhZGFkoWTkZSFlYWWiZeFmIWZhZqFm4qcj52JnoUAiXMrc6cAinNzBEIEPwRBBEQEQgRIBEUEQARGBEgERwRDBEUESACqA45zANBYc3MA1nMCE3MA/WFzAP0BIAD9APsA+wD8APvbA4sqbMUA/QD7APsA/AD7I3NzAJBhcwD9AJABIAD9AJAC8wD9AJDbA4sqbMUjcwD+YXMBIAD9AP0A+wD7APwA+wD+APsA+wD8APvbA4sqbMUjc3MAkGFzASAA/QCQAP0AkALzAP0AkNsDiypsxSNzAkoBPXMCUQFAcwJSyHNzA6UC8wOl2wOLKmzFI3NzAJBhcwEgA6UAkAOlAJAC8wOlAJDbA4sqbMUjcwQ3cwCQBDgAkA2UOHQnATNz3QdFdQoqcwEEAM1hCXNzAFthAAUaOQlzcwCQCXNE3wBQc90JcwCdbXNzQ4CD8BW5tNbewS6T/Np1iIh1Iy3DtPDAAXjPx9ENpwOgreI1z2BewtbX8Yi21FG1bBeCk7aB4sFY/Hi+/ekcwwyBHP+f0YI9G/iFY/5bObtuyY4MTYyHeQiZ62eBq/P8+68/rJI6cCQTfucgoskxeeDzvfo6MGQtbufZbw0FPGPpUNSG9SSs7NDWGUbpnlDGReZvnpkqvyGbE9edMaFydt2lujOB9XLYEAXRfM2Kx0lHbXJ4cszHh5aoooqxDeYXz4qvSy3ahNyE6DBY8J7v31dfMFEdiyjfirJ6hX3Pa2ygMOeuVytsRijRhyF9mVnMu2RxuZv3hI/Amu/2xe54SmySPFpHGxTUY0pe8SZ3I+HauujP4GbIzZYg6enubuUlyP0funGhg8HHYTHFSQD9Hm7HGbFy4n0sziYcpwdArgmsyy41VMV2ppGXMiMR4deCi34NNmlnftVdxoyCJzK+r1GvJvWDtbf4dPnrf0G9qOgEs2CpD3n+1P6MHu+kHtsR6lMcf3NcCDlg2BVcCpSVRHQRiw7qolVbxHeM9xvBMbdwjpFKXi7QUZOi6YaKam2q+tP/4Q5El2aNNWkj5UfSZY4ugEdPUnNXG3TnvpCSZ5IpiIvjM/Q7pZNYYv80gD+OdT5J+D+8K7RPkhzH4w8mJHEG67poqLR0JygXeOe4Qz7fpS6uh/vOXaryaHpamD78JfCU/VdaCwy9bCrfgh13NQynhoIdWRr1IQREtBfsr9bRjkodN4IdiTUMDdlCuM8mKFhoQzu5fn+1PZwtWpT+RAfPcOYqFvyg15NH3r44CwuiNOuJa3QiXx/LenV02OWmQIs/SX/g9e97kXeFyzzC5o3GZEj1A4edoQL/Hfudd5DbKP9jRl8TN4J6Kc1PFyNVAX5Xac6bdFhUIzF/y2fxEOMqCLdbgMjAScVBfo62Fi65kWkU5AuSnpXNEa53A8jiHAFWPQRbvChz7XzIQ1/JFkW4oI8xBV6UfjKIPDLC7squNvW2nzcUx+fOUY3Ocin2ftqIvHfTUJTRNcd7Ke70yAIwvqOtwoyPaZMBpoXD8wnXXhGcZwxMUx5c5bPIUoEI0NmMFTasTLrC3msRFOTj05Bautfl1sY/SvMF/LAsyI9YLxLDyLAdk5DR3UM3aUic2osD5OeVdqZVW/Q1m1ebiFPdS2jIqNLulNQ8bGE2SLfELriR1KiTO9P5+lrvWYO1fSrGrUt2bWuylLbZPkwOvWGZpLOHyarck2ZRqWS6sCGey7WyzKtSLDf8N998dc1hh6BN4lUthsFzHww9KK8RpC1vUV1amMjRDMR+KvY6u8hOpZEzHdLMb13izFQP3ijwSQCEFVH7Js8hL21h1Vgxap8exSPY1CBI89DYkx6Tv5XhsKTqejQ6qbBFVPb0FeZ+D1SdjxYgqAq6uvJHq7PW8hluldBOJ7puqANPsXDOtG/su5LwU1PnRExiBpZNO+7blORJ7i9gQYmu2AXSSiKxSZIyyJ+0umdON6y4aPTTM0FbgQzMWfO3PXOymBuZ9DjNH4dcMJSwm9PsU05clrl3w1WkZ04jCxhragJpQ4w9q2B/PX0G25bXPNnUGKSL3EAHAUkcsOzO66BRomJQr0Z8uQAcdKYDE3iFkuZQy+yZq2C3vghrwhw2d8jCgn3V2SEF0Obph80afZ5zohDVBkZps5UEZmSaeyACcgZ6Ecj/Z3Shx0cxedqpF4rbvSD14by33Qb4gSiKqHx0WH7WjNWW+fZz2t1PtJAPWvC6IaLarFyTSGtiv46IG1Q3YMBw5bDrisQFBnBi22oUgsO/eSzcLI5+wpv1ZX3aTHBQ79qiLoPd5uu6JrnhGzEeM0/gRT5wwCJ6uPDv35Qi4MGUO2s9+aimuET6TexV/KC9BGv9ibvW0+9hFedmTLXfrk2/sgHRe5wZPR6ao7kFwN3Egab8d2ApFPLOUgTY+d32/+XKglFsszuassqJBzo6MTbCwlYKO4yYdfk2gfjuHXxxdIjaUUcqePg/jf4AWUOsz7EjkKaPqLCzwTwkuPoskO+HPvSSIj56NBqwhlukh/SUlBPCAvpc+1hWM5aIt7e+NWicwHeXmf7JihSLmAxjDWNDmv6lSpQAYgl3KGYcLR/SwD/UbzS+YBYGKLhVlwwyGYf2autLOFuC7hdVncxFH6lx4+53/q/z8ukeP5C9jWhZLQvvvXJkWbnwQUbH8WW8VDTl7dYYgEw/d8e8PZVIP8QO8aJwNBObbcAh1bZg/ev/mIcRpHqvapWZBZJccfvQ55WYxxTdBLqYbSDjLNfI0d/IB7j1JaX07Z1abn2SGfV7zm8TU65Tqui5ZG/m8fTS7ZJVkQbJqcHfdRPbFKgIm9Q6lqhbspKIufB0JN5lyRQHiZp5cOyRLL44fHhfM56Ukt8hCMN0cSOYZcp5mvcoAcpVNPjMcA/siqAhaIn3EO6j0+ArsfN/wEexl90dGjecxE+R4JAHU9hBGZrDrJJ0L3FasUPVvPdmvrRUYY0LSEJpgUBo4pykiQr4GRZ9cAVKhzBxs86T9E+h0iOclANvJaS1ozReL9coKT4XJH2R15ed78yO6xqF3vPVSvwW+hApUYHspT4xNknEfEBks2ZT80sBfcq+kKqQeraVh2FtwOkIyPZc2PIZqDVqS2OfSXUEJ+aPajbV+aVHDMxPd4ak0ln8Lm3mlBsJjoNzm1LCOw1FWMbUNFmAyj82fesmdYwbtO9hz97ErIjkGBD8ojAOzSZzPT7bq7FxmZzdfzjVX5lq0DgHNm/HtOP0Fha40VmytaL4VvkkkmaH1vfbxgid+hNPqf//ggLAH9wOu9cN3TPGf7RkhvnFBg9Ue9dEMIY0QnUn6WfZwgFnf37KcfXeA/7qvv2NJesfukMgngn3pyJLjhbJ8DGZvbF61Q19ZVHZ/HfiOf3XZwiD/xlEDb+fuGzUrWRq7IMm/Qsd6SJc6Lqt4i6YC+L5h62FwYHiS63//p0lyL3iAb18QEPtnpbEUty0Zrt0fktA9L/YFLfrzYT6atdQjL6OMhCrZ4O3UUaYR0yme/4GNO/yHHufyAVpH/OIPEf2OzptXJ19+tA+NpivJNqCKOwUsJHqTzrT2G77O9dBe4ZcGyF0mPkzzJEpTJOjkgCt47TXZnFahlCXR9VbZ0lb1c1wAqXTKUqyPVaxz4Eu3rPJHiM3IXQQ0NjTvzUPG258V7vbrgoezETHlADY7B1WeyNMFYVE/LaWY7bSfQb7lKJ/KMRmoFwCrkwMEEkDen5KTEXCfVJrN+v4OeBxxE44mtzJOKdlLb7tqPfXrxftovGQyuaJhwlI3qpYBgfatKX2BJFeGTK5b4b9aSrMIv0QoyWUKQxoWaM41bP4QW5RbSawNQdN/0wv7aL9Jkk5J66IDpo7KQGXAKznLFeMn7t0F83ZTXPCDUhEjgWM2SA9ChmM5YEHa5l1hI1fsf77dxeRWfVHKPsN3Pbl3Dy5b4QIYb6N4Pm9jAAQLmQlaBBhZw5Ia7PfQ+xKgKJFQbR4F32mFfupbsbWLM9jDeqYdACLyf6uAKgVu9AJQpYtNbCj5wj9nXAWUWbWQL1cXcTXoVZqxjtyS/BsoaURCQi3dk09KVzUA0V6ZlrQ53Kj5AnQOcl+5F45QK+I7z2+zhbRVGq2VwcLCugx3BCQZwoiwsqtS8RQRixu4k8uRiaKZ/k7rmghRah8nMGZhmN6r12o0TqdMaPiD/n4TLE9VhVaO0KPZEGCIhU8QX+UXBAqICxssIsyKn1OrvUgTYYTO4jXEpu2+kVS6L6T5gjC1tufk8YssX4CRRcvyMaWoJuzmhC3Bq/DBUCuPaMuhQPIQfcmps2oqp9AqlngtSCo26+n5fKqSzEU3lpH1SMPRDrw6OdD/LhpNrs1YTHgMmP068bb8qMgF+/ASQedI7CvWdu04rAtlsP7kSnTDkyMw2LiZnpMx+i+ayXB7c3ckJcjFuig7H00vq2OQzM5PPevRdYi+cZJifcz1t3cNSD0yuvsuFXD/Nk2j60H5RpUU+Zrlp99wSgKEAkuC8nBJJnZ9PR+DkXPe3s4UeOKoq99964VWB9Pnva6uKI779pgq9oaspNcGV8vSOMCM8ACQn9kUPweu9UwI2n5+goo05CFaR5kALF5jhYmybPavdtAxmaC//LVF0ZLRkIcU+NGJzY3OdUKILkQKUDGABumIZHHzKw/jCOmPL+Zl8t46Wkz0WFvi9Gu4zuSn4okuXcj0BSeDVzHIf7sqCBjmC4zCJ+jyS/+Gq2fPUkgfW0bxdgVFMY+zY3TQuMfygLLiF9MzfKQiZXIgzRm4z85AALjRtWp3nO7kFP7ApIqqe2zn0NfjROHgw/hqbhgKGKjsXzu+rrdu5HeSlhWO8hxwDmVaQObSdcyTFMG/YiFD6lJGKdFb4NNS1HnW8T1P6nNQPqraOBTSnQKxz5tTGqNrbaAE4Iio3Cj50ZUqo6/O5OAtJ6Bznp4gKMgBetgD11fCO++j1RdcFdTbD0tkgfxXgzJTUtWCUmdYjl93RR27ifZGYzgK23MdwF4zvKNem782m0dQnmh47Rxz3+2MVhiiS85nTOXxmaODvzAWBE2IQowSrbzE12IJ82fOrvritWvRIF0aLCLdEytK+NVdDxLvmdW+dFeKOa/ocw1Son0O6OzX0lBLmjYSMQSrFe5X5yf6WE2ehsLrv6M8Cqjvwr+u9X+kP/f3iAk31TV+K9yZKQqAn3QOWy+9Hz7iVWRMuM9hs35+avVy4pXASFbOjGdXM1fSQkLOWmFUhyadKWYPjRZoZo0g3CS0qhz+mjygAvmtkYRBcGNpYAEYoIDEwQaswtATb9HLzTetQL8aK79YSb0vJNPSYzsij3FcXbmfnMiaOJIGrrBJnAPRqg2lmCZFXOFah9l2GRBm8HJMGeiupFvR0aRN41otN6X6tGTxS53wk+2+w+Q5ABTdCd15LYZm/a/3bxe9RDQJ5HZhLzr5x1ccTkxBkbxlYBGd8AKvkL2IR3V283R5noyhAM5o/2rKEi4U6kxCV5efr8llvLFrgjPIwS8iES5jxmV5zyPzj7TyzJTJze+9tgDNGYRyyXPkU4mtAh8XUy9vMigfO+1+ZKYW2WCFjDUfvyNiplha4LliPPg8Rc890ZT+F9pMYPAmEg3JJVUm3fp5N0IPNMAYKmbdj8dkIpjDhDJUd6o3G858DgYwPhSC+z3a78QpEmqq+tRaHEcQ30ZN5KVVdASN8NMTnLKoA+IJdapqCRgooGTkhyjB1yEmjSy52110hPaqe1upiUeObsTXtGELTk2p2NZw/3PzU281tafWNmFUPAmooj83DhoQgKPIB7f+NGTDlTOtyPgN8pIB/lnFLL/gcwigZPKDW7p6hnW/GnAzyNS46gLJAl0Eyhqx6UWLeQTU7odMYORK5zf/FV79JGVPOQpNUA58rlB0ugHsyeub8Lnf9QQ4/N5sRKaUjEEhdpF28vfgPZACBbg5UHuVHl8Lby8mVGsrtI7TjL9U3mbtcF+cXQI/5AxT2i0MyciXEKZ8OjvPoQHHU/YSnCXtEp2r08SJxUAHIz1zM+FwdRCYPffQNi2NhkPWTiYTxJ00WVZIrHwmG7jzOLcfWnquJkpOmdPzXfAu+s5EADm0X4VmatqLjVa86dS7Os55qXuRa1Y7dWGvv57LjBlKKgqsbI7lwfyBN3qkKBqe7nwUDn6xqhGPiUPT7j7s+oD52AF6oj6SFXhYWlRXy+1FL7YSbjFxfFvJt5tVXMAr8/voIg8YRiBsKB6eLeIG5Y/KmGmFBxxYzSH7W0IaK3IId+cBlEk6H3Y5BqIBfvhOOBtInLWnsAoRpqlkxd7o/+LP9UXEahdcYlifFlURgUJl0Ly6LHjSZN1CfHB7OORacnBdpIM1lRpBcvwkeyXUvndU4zrfqwtuBEpxqvk4PZPJMByJXUbXie52mfUB689h9GRV99U4gzn1aTbHPWjbB0DQ0Aes2E/ZzoCTxCef56sExSu8ynaPxuDOOeD31OWT0zHo1XxSPQbclDivD+4/v1aWdhGXLR1Ui+NzuQK1NTedznX44c5T3b+2GZZjl5RqH8KR7FTVjLAXvg64Gpc1RROH24J9jrNDyvrMxY453DRUjZ/K3zYJC+M1JxcvLkuZALsXVQ4Z7sj0EuLbRnhTKzRGwFrpXcixvnCgRbJrCl3+RjyWVipph0VLB0nDop/tvjfFmysZ+d2/k6baJMxYoqnE7PFceicrxUYyoJ2LMxicgJqrgvSR3mNJTkvfTU8BIoZz3PpSIS+Y7Ey3MXecxcxYZTeX62egI5Nub2z8Bj4Eg71YCz8Oiapkinw4RRlL+0c2/6jDqc8UK4Zzi1X4aIpgYsPJQOEz2YWBdvH6z5CuY7UvWK2F0Mg4ofRVBArX1p9Gv5VLqWYyL/raRVWkPNI4FEv9+ePcdmBSQR4CFSO6TG13hIV+cm1dkd0/Nt3r28H4NU2knSniDCeozM/Btc4i/ni4H83S2/ktAAvUM7UKJPT+RO8LOlvxhuI8HQmAuJCzVH23R/0JovidxgdJ7g7whCdVQa9/TLFUJWmNSYAaPRAXW/kk2UBmAz6f6POK1zcMlmI8P9tqW2qVXABN0L0zHarXbWHlhtYpXMEda/pIHLwu8RHqmWWMgMzkyKicSFKK10UvZRdcO8fCiSijtFIY8qW7CscvtzpP92lm+c648urehw35v1EOfO3kdny+CQm/Y0u+zPuevhCrQKhTsUq4G1rNPoGuVzvhf2Ui1f8jzvx9fJbQR69A0ETLUUC2ndk1YFQNi22yLwyZyw4xU8P3RGLM5qojKNwHAZAMAEudzg8UdfV6i4VktOLbhhHUPqpCn6dtpnr16rINs5hWJGMYXaEn0irFCuoYnJEVhdJ4PZLKuTkrP1UUVWZ0SMgJ3F2I8YRhtLwK4dhh/oKk0hdVgEH/l2/0c+cLlF7kpDuF3lC4fsFw3V0QrwH3GLNb2waS18OmYB07yaLEqhd58bSaGJZzePoroV5v3UK46/sWdKczstFIiYLmmKeaVGRNo3IWk+dYUqWy5aJClXj5tf/v47ijlkmMDP+ROUxoGk7LFzne4/0CRPl/5SUyOa679jibvdVQFZ1o0H9kBux7OSC9B+qVKE1trxr4xqTkjc1ZGZBpY0zyKBiu8wr+/KXc37u0cdXGJwY/aTic3kGj4jt3y4ZwleKskyXMFHKGwVhqpFH3ba02boSzGHyPMAe/reVqWSTT2Uz47+uYvHZGNASqYQ23uZoxalHK+PGoH9trTVaw2KB4dH8fNrXRLhiyxGdRtS0x8k3feeOvsOdKEdaOf3IrfWCZM/n3+hVJizA4zoX8MzsIf6bDfuFXIIRR2RN0rICZcMRmnRxUXT+YMOid50gg+Nt4Uucemmbd9kvJG/O04PVC0vm5gGDlIY3THI2+l1rZcMOuSDWBp6I4Eltp7naHZCdaPUWnQ07VqO49znDgCmtu5Tb+SSEQJV+rJsiXgCqoeeQciher8cqF616P8qlZeonKihdVkj+RTnjOcnoERWubvyaeFO6Ub3dhh0qmm2RD4enszxE1JaAaiezuSoCayJQP931HGcy0NmuVr/UV0pvbwICLpBbVkxC6qebjLGRXucTG0dbQDFPz049hMem2pb/FOTGYRLR0uPCa0oIwc9Z/g+Iy/zYFDThHi1cqbK824savKGMLMj7j87RT9NMwxaI0eKTfMFioi9SyLq5sN9pV8be2FrOc7xMOdv6btXyqFx63y9fIGMBP2T9Wmeeg61ZGdTE4IwybcGlXLJ3qLbRRpQ8vSzcqFobN+QPtL+51hadAWtRbF6aJpeb7Gca4/Ldh7BDvEbrUuEm+gTyVMeRQ3Ypf9uyFjVstrQIcdY+aur3LC5I5OOnJck1zLUKxLobjy9slG3hv6zylhtKbAbpX5p8Hc910fCT7FNH5/t9xEJX9kkeZ9IMCHAk9zn7L3pXEGZVvdaf85NtlemPpY7iSgSC7zRGsI5W6/UEwX6jDtNVZ9VqPDBe/EqmEEsGcs7jZPQPhi3xpj9UXWQLiy6tsxv/ft9aKQnUg0Sps/x3AZ2uK3ETGTQogPTMQPOnoU6p5KuS3uY6DfW0GeGQ1wNpGzGoUdRJRvHP9MDQpWRSZqZkE/rcNnQ5lS9BmMDW/umgZQD1C2YXfZMy7fIVXo121293Gfx9n7DQP6OxSqiSTNx48KId9kfGYOnV2Wg2TQQywNBRB0mSmqa/jwoBDYVDl6B0XFrVEAwbnhLyqGp5BH9bzsWrrFlu0x285RpqTylTZk3rgcm57prav0DUAKUd02vXdYyNBf7sfX7VYn0Syug9++ey/dHoG7GQzMbhXhtEuRXv6YR20SQgSOrgDUGPR4HhS+Qvk2zOtyH8N/lHYfQxNKt/f7uCpsBBh5eGZaeWNRTBdOObWOvyKJMfD8FLEX1v/5ywtRV27weRzSNaHEQFE0hIzzS4VPzgWtg/4bcetwXpabsePP192muNPyXiRzRZkoeudA9D9x/oVWfRieLfjdXbi/41RGNB3aIj0IxCBHSvUN7LzntO6Oh910zV9u4Glrouyr5odjs8/fW9r0buiTMWTjjLbi2k5tZ3m/134ci/d9f8zuv+4BI7F13Mjb7DTTD5ukfqNTlNC4V9PnfbGAJdKLEDJgBPKyYXCaAL9U5Cxi2j5j+IWmNg6NSnWcATzmOO4+dNBmefy6ceyd8J9/Q7amUWVVkuNVSq3iWEb3UJP7kG+P8wfL4xS0ZNuSKYuo9KpdkJ3b4PYRNSzF+8OXKDWqXuWsan/wconybIRBoGWHMuCkb35BtGfiqZ4hc2CCapKiLmrWnBLlRT+9GA0Qcykkg1B6C3kESJMu2dWyGabbhRwxUeMxARHqbXzHmHpr4Z3vmOxHZ6b1q6MJ0Vb/XKkaPF4xn/VindEJ3S8/9xcGF+PNFuAXc2Jf9uZLLtjxDAEeohd7wjie66LHvcNT0UpWif4uCox2YR/liegMgx8vEbvQClJBMBub7zJQMCr1C/Vf8siWQASp0Ewd7D2uP6f9YTISdEaUAzF9rST9JTHxez310BfdgtWKU1ZYoRuDZvGn2tj9DPjXrkgCr/13OHsP4MOC5b6YqHSedYMW9bEfS5M3nO7zTGS85BzpLTIFqAGhZJLEyLFcZXS7hDhDYVvlm10RLEslMK0cUL/9xqTMOX2iR65umsC8dW4hT0Sg6Tf3T2HAxsHKcNzoqFwuM9k3/LpYekhRc0C+f1I+vMQ4thkfSotx9GUt/cdRosaE8XwqV0k+8ZtU+jv8nn3lbcNxfXXKi5l0SL5kMmrCdrxeVVqxBobrFF+tb0wtkN+DMm88I4jWH/DcdJOjcMOLEsN70vlsfIi+NexpaT0ZsnfewPoTvUSXqqfhRcRk3jA7AdYHEFk4l6O3fe65uZNIMf1lbtJNCNaK2+c5hGKLcTSrBmwWv9TP6JDfZ6UY96g4baayVCbrDpXePgXTG6xO3rT0DAXG9OuPxkSEPLJnqxQViyYQhCp36Q2yFpF6cR04RO7Ab5HPrECqGR0Fnr2gzmjx49XjQf8N5Bk5XH0dh8NOoB62acHwMhlBM8duW9tghc7CN7oz91UEyd8fOtwDK/j7SykdllCAN5kUrcawufMV9y/EqUoKHtP5i8MgQY9RlZFZzi0BeT9Ang4mMIvWAFChZCNnb4tT5cS20jeit8JEN4tz4mUmZxDwiWkEucI1KF/FyAnvE4wybWvbaxBYjT2jdhlzd4y/eTmTl3im5YImADc2unOtmNTcgMdOb9kUgJmgzY/hDaAxqvwLEulLsjq0bsfSE3tRYCRn6xb0uv5B5yFshhewdO5KgoLcaGeqeg0pa9k2RXM32g1jE1UDWO0CaMobavPk+4u26Tmgg6VindBdYdRxpGqlvkxai0K/atC5CWUxlHuukX5b+hg83khzsZK7AVRVptyVNicu0sfQToTDEeIeDdFvDrReJUiJGZcXAhpRL3OufhL4aDfO1zsCmfGq8qFspBiJe13lgS9GguiMsdmgpWOhHkSTVkWnMOnUeIJgqZks/AwL/1yKPm00t6x6qLXQrCJrysUwR+ILJdyyyuUN4BuEtCDUXMXPU5srsAnDUhSfFM/j4RK+cK01o6lXAVbhiOLaaQtpYN6mCOwtJNcVqEpyrxXuWxvE4mbVCytBu/qKO4X2BI1NUSlj/g6FQEiYsXMAQuM9wnHngXKLZRWFHcgroF7URRzLPrMQUfALjbga6S+tGc3Tshv6PA6xeSqRPDbLG+X+0qt9crNzbaxGbStSCfYhdRY4t5BSVY9Pxl9trcYFiUdsV1BSwaZM5u8K+hUm8HV6PoLD/jlsRRzgUq6O+Qw3asFkTKm3clSTo8VtXdpTdzFAZP+tVvAjkfGq3MkSLyTYi08pvQ3h/L9o0JpUnnQeKxXk3qIsGGsH1BXzcZT+voCNv39FSdg6gNY51z9Cyq5Dql8wER5ylTwnLVeHlHAn/HNwxGYeUqrrc2gcmIybVKVD1XAPXjKks2+oHZk4OXYP6+LwVaFEApqEMyEusTgVFTzdjVa2BAaELvpyVhOSMW/ae3NwMfWId4Ue28z5IzumOF/CmY1GmXBOWBf2hgp/r3qS0GU7nGETmj+7Tudbjd1cKhgP39tVtWogjxHt6NLXz8OCbV1nIBG+mmrrZDCbH/o4Vgn3gZkRkq+iHOVW82LunJPXBZjX/ntmptWsqP8nDZBSb3TzAD4vSQeQ1GmtgGWAYfB951YKUnFVJb0z1YRjQqVksL5VpD4N/Vy31vtYY/2g9TmyMADPgCwwA6MhjQ9bd1JFJ3Vls7lD2RYjdIwQwhWzBRPfrxpKcYeu03F0/odRbEc9RZ11TxVY8mXqgJx/vDk0eF4MPV7lgBxYqxoGfEtGZBC1kZlxbcez4Ts4/TuXJ/QsfWT95Fwpc4CtiGCgU4i7LHgoDalqmBabvzV5xvq2pMVourJYZ4paytzilEG+lADOGx7qf9O5/4cP5SqyTCMG4I16I/6I5o4Y/QkWX9ctABry/8Adxz+ZB8AI1yUyNXk1Z073ECiDJ1EuVT69eIDEAlbnv24j4DJGeqIV1b1GDCHJ+OFD4W0gXUs/1bMkNESNKl2ON6DZzAXvqmr8X68yRDgIReKbX1SUwtzYnyadBLhEWS0WTE7T1IxC2SHChb1NFD+2rtJSN8OPTIZRqiizaoh7OSSNpBXJMkKcUQZV8sXw8VkU5ea8j0WZ/YK35loUxE1aG30SL/JYxZWlUenDyKrfbHWJ+z6JOsV0e1Xfw7VGavtHACLwn0tTG9e3lf++w1MCVjFIyU57uOlbTkUSnxAjzmA71qvjTzHeMDWcK099tm9rS8cnfuwxq+YRWANkfmLbCl+74mg4bccPsNY5zz7cjbaFAL0hAwId61yM5uqhMBr4Wcew3b2spG5tkKFOnADeXkGkH4vk+f+an92mWXemOFCpjRsFeEnPEAIsLemM3QfMoME5/w+7Y48y/SvkBN6/KSRVmB7/rHiW7iVkXF6Y1T853OaDg66cIfWkD5TqCDugrlaXlEL1fFjxPoKRHkP5GD/xDiscNH+Dp2fXEKUpwAvC8JTNC+k9JpaMXUB7oj4p77qiAOjXD2pT4v/v0Ukid02LpuYsS7/ScDL1SxB9hxxbkeGOMyPyL4HZPAbyagOgP5Xe2pCqMPyj/KJ0blDHzFVBqzeLIO5D4yq7IpSi9p/QlHa50sCHzGoMqrBS8l9IfRyhq8IDQtOZzjgdvgQDwH7cqa/sybwdfcQse9THS08maKkkgnOi0ShO8Gyf+WL4K9DX11CF9uIbVwJUaCv8r/6FDVOdsEjeumisIJlLJQsjjkEL2QfEc68oqsevnNAEdp4YMJivwBJnE0R2GiBFRTJZNkq/MHDP9O5unQoRoivMJkPm+A0K8CQNXL6V3apC4ROBTyJSW9oOGNF4YrwoTFyz/pexIkeWQADpi+M7q8gBlmGRUune0k7cXyacdbOsD0Q1JQat9T8nmHhyO8PNd2k4qjZsQCs6lEcmaThpVUzGzWOJQGGf2oz7+F/bMfUMARo1PD0/yIhVDK+8MGRo/uByG5UAwPfNeHAd09gkMFpZmTN2rZgoqdSjwv1SbFnFRAqYuzwW8P4+Rk9fE3PVu80HKcXyIEvPfit+o+pnlHDUKKo32HapcVtQhsNiIdH80j/lRnJ2y5RYRbECyY4vl20j/NiBAD0Z5jxWWiL6xAZIonSEJb1qhwmdRp3hISLL9Q1QYOt6C/OixU3eUtXblgBu+fGPAQE0o");const FENCED$1=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),NSM_MAX$1=4;function hex_cp$1(cr){return cr.toString(16).toUpperCase().padStart(2,"0")}function quote_cp$1(cr){return`{${hex_cp$1(cr)}}`}function explode_cp$1(cr){let ar=[];for(let dr=0,fr=cr.length;dr<fr;){let hr=cr.codePointAt(dr);dr+=hr<65536?1:2,ar.push(hr)}return ar}function str_from_cps$1(cr){let dr=cr.length;if(dr<4096)return String.fromCodePoint(...cr);let fr=[];for(let hr=0;hr<dr;)fr.push(String.fromCodePoint(...cr.slice(hr,hr+=4096)));return fr.join("")}function compare_arrays$1(cr,ar){let dr=cr.length,fr=dr-ar.length;for(let hr=0;fr==0&&hr<dr;hr++)fr=cr[hr]-ar[hr];return fr}var r$6=read_compressed_payload$1("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");function unpack_cc$1(cr){return cr>>24&255}function unpack_cp$1(cr){return cr&16777215}const SHIFTED_RANK$1=new Map(read_sorted_arrays$1(r$6).flatMap((cr,ar)=>cr.map(dr=>[dr,ar+1<<24]))),EXCLUSIONS$1=new Set(read_sorted$1(r$6)),DECOMP$1=new Map,RECOMP$1=new Map;for(let[cr,ar]of read_mapped$1(r$6)){if(!EXCLUSIONS$1.has(cr)&&ar.length==2){let[dr,fr]=ar,hr=RECOMP$1.get(dr);hr||(hr=new Map,RECOMP$1.set(dr,hr)),hr.set(fr,cr)}DECOMP$1.set(cr,ar.reverse())}const S0$1=44032,L0$1=4352,V0$1=4449,T0$1=4519,L_COUNT$1=19,V_COUNT$1=21,T_COUNT$1=28,N_COUNT$1=V_COUNT$1*T_COUNT$1,S_COUNT$1=L_COUNT$1*N_COUNT$1,S1$1=S0$1+S_COUNT$1,L1$1=L0$1+L_COUNT$1,V1$1=V0$1+V_COUNT$1,T1$2=T0$1+T_COUNT$1;function is_hangul$1(cr){return cr>=S0$1&&cr<S1$1}function compose_pair$1(cr,ar){if(cr>=L0$1&&cr<L1$1&&ar>=V0$1&&ar<V1$1)return S0$1+(cr-L0$1)*N_COUNT$1+(ar-V0$1)*T_COUNT$1;if(is_hangul$1(cr)&&ar>T0$1&&ar<T1$2&&(cr-S0$1)%T_COUNT$1==0)return cr+(ar-T0$1);{let dr=RECOMP$1.get(cr);return dr&&(dr=dr.get(ar),dr)?dr:-1}}function decomposed$1(cr){let ar=[],dr=[],fr=!1;function hr(pr){let mr=SHIFTED_RANK$1.get(pr);mr&&(fr=!0,pr|=mr),ar.push(pr)}for(let pr of cr)for(;;){if(pr<128)ar.push(pr);else if(is_hangul$1(pr)){let mr=pr-S0$1,gr=mr/N_COUNT$1|0,yr=mr%N_COUNT$1/T_COUNT$1|0,xr=mr%T_COUNT$1;hr(L0$1+gr),hr(V0$1+yr),xr>0&&hr(T0$1+xr)}else{let mr=DECOMP$1.get(pr);mr?dr.push(...mr):hr(pr)}if(!dr.length)break;pr=dr.pop()}if(fr&&ar.length>1){let pr=unpack_cc$1(ar[0]);for(let mr=1;mr<ar.length;mr++){let gr=unpack_cc$1(ar[mr]);if(gr==0||pr<=gr){pr=gr;continue}let yr=mr-1;for(;;){let xr=ar[yr+1];if(ar[yr+1]=ar[yr],ar[yr]=xr,!yr||(pr=unpack_cc$1(ar[--yr]),pr<=gr))break}pr=unpack_cc$1(ar[mr])}}return ar}function composed_from_decomposed$1(cr){let ar=[],dr=[],fr=-1,hr=0;for(let pr of cr){let mr=unpack_cc$1(pr),gr=unpack_cp$1(pr);if(fr==-1)mr==0?fr=gr:ar.push(gr);else if(hr>0&&hr>=mr)mr==0?(ar.push(fr,...dr),dr.length=0,fr=gr):dr.push(gr),hr=mr;else{let yr=compose_pair$1(fr,gr);yr>=0?fr=yr:hr==0&&mr==0?(ar.push(fr),fr=gr):(dr.push(gr),hr=mr)}}return fr>=0&&ar.push(fr,...dr),ar}function nfd$1(cr){return decomposed$1(cr).map(unpack_cp$1)}function nfc$1(cr){return composed_from_decomposed$1(decomposed$1(cr))}const FE0F$1=65039,STOP_CH$1=".",UNIQUE_PH$1=1,HYPHEN$1=45;function read_set(){return new Set(read_sorted$1(r$1$1))}const MAPPED$1=new Map(read_mapped$1(r$1$1)),IGNORED$1=read_set(),CM$1=read_set(),NSM$1=new Set(read_sorted$1(r$1$1).map(function(cr){return this[cr]},[...CM$1])),ESCAPE$1=read_set();read_set();const CHUNKS=read_sorted_arrays$1(r$1$1);function read_chunked(){return new Set([read_sorted$1(r$1$1).map(cr=>CHUNKS[cr]),read_sorted$1(r$1$1)].flat(2))}const UNRESTRICTED=r$1$1(),GROUPS$1=read_array_while$1(cr=>{let ar=read_array_while$1(r$1$1).map(dr=>dr+96);if(ar.length){let dr=cr>=UNRESTRICTED;ar[0]-=32,ar=str_from_cps$1(ar),dr&&(ar=`Restricted[${ar}]`);let fr=read_chunked(),hr=read_chunked(),pr=[...fr,...hr].sort((gr,yr)=>gr-yr),mr=!r$1$1();return{N:ar,P:fr,M:mr,R:dr,V:new Set(pr)}}}),WHOLE_VALID$1=read_set(),WHOLE_MAP$1=new Map;[...WHOLE_VALID$1,...read_set()].sort((cr,ar)=>cr-ar).map((cr,ar,dr)=>{let fr=r$1$1(),hr=dr[ar]=fr?dr[ar-fr]:{V:[],M:new Map};hr.V.push(cr),WHOLE_VALID$1.has(cr)||WHOLE_MAP$1.set(cr,hr)});for(let{V:cr,M:ar}of new Set(WHOLE_MAP$1.values())){let dr=[];for(let hr of cr){let pr=GROUPS$1.filter(gr=>gr.V.has(hr)),mr=dr.find(({G:gr})=>pr.some(yr=>gr.has(yr)));mr||(mr={G:new Set,V:[]},dr.push(mr)),mr.V.push(hr),pr.forEach(gr=>mr.G.add(gr))}let fr=dr.flatMap(({G:hr})=>[...hr]);for(let{G:hr,V:pr}of dr){let mr=new Set(fr.filter(gr=>!hr.has(gr)));for(let gr of pr)ar.set(gr,mr)}}let union=new Set,multi=new Set;for(let cr of GROUPS$1)for(let ar of cr.V)(union.has(ar)?multi:union).add(ar);for(let cr of union)!WHOLE_MAP$1.has(cr)&&!multi.has(cr)&&WHOLE_MAP$1.set(cr,UNIQUE_PH$1);const VALID$1=new Set([...union,...nfd$1(union)]);let Emoji$1=class extends Array{get is_emoji(){return!0}};const EMOJI_LIST$1=read_trie$1(r$1$1).map(cr=>Emoji$1.from(cr)).sort(compare_arrays$1),EMOJI_ROOT$1=new Map;for(let cr of EMOJI_LIST$1){let ar=[EMOJI_ROOT$1];for(let dr of cr){let fr=ar.map(hr=>{let pr=hr.get(dr);return pr||(pr=new Map,hr.set(dr,pr)),pr});dr===FE0F$1?ar.push(...fr):ar=fr}for(let dr of ar)dr.V=cr}function safe_str_from_cps$1(cr,ar=quote_cp$1){let dr=[];is_combining_mark$1(cr[0])&&dr.push("");let fr=0,hr=cr.length;for(let pr=0;pr<hr;pr++){let mr=cr[pr];should_escape$1(mr)&&(dr.push(str_from_cps$1(cr.slice(fr,pr))),dr.push(ar(mr)),fr=pr+1)}return dr.push(str_from_cps$1(cr.slice(fr,hr))),dr.join("")}function quoted_cp$1(cr){return(should_escape$1(cr)?"":`${bidi_qq$1(safe_str_from_cps$1([cr]))} `)+quote_cp$1(cr)}function bidi_qq$1(cr){return`"${cr}"`}function check_label_extension$1(cr){if(cr.length>=4&&cr[2]==HYPHEN$1&&cr[3]==HYPHEN$1)throw new Error(`invalid label extension: "${str_from_cps$1(cr.slice(0,4))}"`)}function check_leading_underscore$1(cr){for(let dr=cr.lastIndexOf(95);dr>0;)if(cr[--dr]!==95)throw new Error("underscore allowed only at start")}function check_fenced$1(cr){let ar=cr[0],dr=FENCED$1.get(ar);if(dr)throw error_placement$1(`leading ${dr}`);let fr=cr.length,hr=-1;for(let pr=1;pr<fr;pr++){ar=cr[pr];let mr=FENCED$1.get(ar);if(mr){if(hr==pr)throw error_placement$1(`${dr} + ${mr}`);hr=pr+1,dr=mr}}if(hr==fr)throw error_placement$1(`trailing ${dr}`)}function is_combining_mark$1(cr){return CM$1.has(cr)}function should_escape$1(cr){return ESCAPE$1.has(cr)}function ens_normalize$1(cr){return flatten$4(split$3(cr,nfc$1,filter_fe0f$1))}function split$3(cr,ar,dr){if(!cr)return[];let fr=0;return cr.split(STOP_CH$1).map(hr=>{let pr=explode_cp$1(hr),mr={input:pr,offset:fr};fr+=pr.length+1;let gr;try{let yr=mr.tokens=process$1(pr,ar,dr),xr=yr.length,wr;if(xr)if(gr=yr.flat(),check_leading_underscore$1(gr),!(mr.emoji=xr>1||yr[0].is_emoji)&&gr.every(Sr=>Sr<128))check_label_extension$1(gr),wr="ASCII";else{let Sr=yr.flatMap(vr=>vr.is_emoji?[]:vr);if(!Sr.length)wr="Emoji";else{if(CM$1.has(gr[0]))throw error_placement$1("leading combining mark");for(let Ar=1;Ar<xr;Ar++){let _r=yr[Ar];if(!_r.is_emoji&&CM$1.has(_r[0]))throw error_placement$1(`emoji + combining mark: "${str_from_cps$1(yr[Ar-1])} + ${safe_str_from_cps$1([_r[0]])}"`)}check_fenced$1(gr);let vr=[...new Set(Sr)],[Er]=determine_group$1(vr);check_group$1(Er,Sr),check_whole$1(Er,vr),wr=Er.N}}else throw new Error("empty label");mr.type=wr}catch(yr){mr.error=yr}return mr.output=gr,mr})}function check_whole$1(cr,ar){let dr,fr=[];for(let hr of ar){let pr=WHOLE_MAP$1.get(hr);if(pr===UNIQUE_PH$1)return;if(pr){let mr=pr.M.get(hr);if(dr=dr?dr.filter(gr=>mr.has(gr)):[...mr],!dr.length)return}else fr.push(hr)}if(dr){for(let hr of dr)if(fr.every(pr=>hr.V.has(pr)))throw new Error(`whole-script confusable: ${cr.N}/${hr.N}`)}}function determine_group$1(cr){let ar=GROUPS$1;for(let dr of cr){let fr=ar.filter(hr=>hr.V.has(dr));if(!fr.length)throw GROUPS$1.some(hr=>hr.V.has(dr))?error_group_member$1(ar[0],dr):error_disallowed$1(dr);if(ar=fr,fr.length==1)break}return ar}function flatten$4(cr){return cr.map(({input:ar,error:dr,output:fr})=>{if(dr){let hr=dr.message;throw new Error(cr.length==1?hr:`Invalid label ${bidi_qq$1(safe_str_from_cps$1(ar))}: ${hr}`)}return str_from_cps$1(fr)}).join(STOP_CH$1)}function error_disallowed$1(cr){return new Error(`disallowed character: ${quoted_cp$1(cr)}`)}function error_group_member$1(cr,ar){let dr=quoted_cp$1(ar),fr=GROUPS$1.find(hr=>hr.P.has(ar));return fr&&(dr=`${fr.N} ${dr}`),new Error(`illegal mixture: ${cr.N} + ${dr}`)}function error_placement$1(cr){return new Error(`illegal placement: ${cr}`)}function check_group$1(cr,ar){let{V:dr,M:fr}=cr;for(let hr of ar)if(!dr.has(hr))throw error_group_member$1(cr,hr);if(fr){let hr=nfd$1(ar);for(let pr=1,mr=hr.length;pr<mr;pr++)if(NSM$1.has(hr[pr])){let gr=pr+1;for(let yr;gr<mr&&NSM$1.has(yr=hr[gr]);gr++)for(let xr=pr;xr<gr;xr++)if(hr[xr]==yr)throw new Error(`duplicate non-spacing marks: ${quoted_cp$1(yr)}`);if(gr-pr>NSM_MAX$1)throw new Error(`excessive non-spacing marks: ${bidi_qq$1(safe_str_from_cps$1(hr.slice(pr-1,gr)))} (${gr-pr}/${NSM_MAX$1})`);pr=gr}}}function process$1(cr,ar,dr){let fr=[],hr=[];for(cr=cr.slice().reverse();cr.length;){let pr=consume_emoji_reversed$1(cr);if(pr)hr.length&&(fr.push(ar(hr)),hr=[]),fr.push(dr(pr));else{let mr=cr.pop();if(VALID$1.has(mr))hr.push(mr);else{let gr=MAPPED$1.get(mr);if(gr)hr.push(...gr);else if(!IGNORED$1.has(mr))throw error_disallowed$1(mr)}}}return hr.length&&fr.push(ar(hr)),fr}function filter_fe0f$1(cr){return cr.filter(ar=>ar!=FE0F$1)}function consume_emoji_reversed$1(cr,ar){let dr=EMOJI_ROOT$1,fr,hr=cr.length;for(;hr&&(dr=dr.get(cr[--hr]),!!dr);){let{V:pr}=dr;pr&&(fr=pr,ar&&ar.push(...cr.slice(hr).reverse()),cr.length=hr)}return fr}function normalize(cr){return ens_normalize$1(cr)}function configureChains(cr,ar,{batch:dr={multicall:{wait:32}},pollingInterval:fr=4e3,rank:hr,retryCount:pr,retryDelay:mr,stallTimeout:gr}={}){if(!cr.length)throw new Error("must have at least one chain");let yr=[];const xr={},wr={};for(const br of cr){let Sr=!1;for(const vr of ar){const Er=vr(br);Er&&(Sr=!0,yr.some(({id:Ar})=>Ar===br.id)||(yr=[...yr,Er.chain]),xr[br.id]=[...xr[br.id]||[],...Er.rpcUrls.http],Er.rpcUrls.webSocket&&(wr[br.id]=[...wr[br.id]||[],...Er.rpcUrls.webSocket]))}if(!Sr)throw new Error([`Could not find valid provider configuration for chain "${br.name}".
`,"You may need to add `jsonRpcProvider` to `configureChains` with the chain's RPC URLs.","Read more: https://wagmi.sh/core/providers/jsonRpc"].join(`
`))}return{chains:yr,publicClient:({chainId:br})=>{const Sr=yr.find(Ar=>Ar.id===br)??cr[0],vr=xr[Sr.id];if(!vr||!vr[0])throw new Error(`No providers configured for chain "${Sr.id}"`);const Er=createPublicClient({batch:dr,chain:Sr,transport:fallback(vr.map(Ar=>http(Ar,{timeout:gr})),{rank:hr,retryCount:pr,retryDelay:mr}),pollingInterval:fr});return Object.assign(Er,{chains:yr})},webSocketPublicClient:({chainId:br})=>{const Sr=yr.find(Ar=>Ar.id===br)??cr[0],vr=wr[Sr.id];if(!vr||!vr[0])return;const Er=createPublicClient({batch:dr,chain:Sr,transport:fallback(vr.map(Ar=>webSocket(Ar,{timeout:gr})),{rank:hr,retryCount:pr,retryDelay:mr}),pollingInterval:fr});return Object.assign(Er,{chains:yr})}}}var ChainNotConfiguredError=class extends Error{constructor({chainId:cr,connectorId:ar}){super(`Chain "${cr}" not configured${ar?` for connector "${ar}"`:""}.`),this.name="ChainNotConfigured"}},ConnectorAlreadyConnectedError=class extends Error{constructor(){super(...arguments),this.name="ConnectorAlreadyConnectedError",this.message="Connector already connected"}},ConfigChainsNotFound=class extends Error{constructor(){super(...arguments),this.name="ConfigChainsNotFound",this.message="No chains were found on the wagmi config. Some functions that require a chain may not work."}},SwitchChainNotSupportedError=class extends Error{constructor({connector:cr}){super(`"${cr.name}" does not support programmatic chain switching.`),this.name="SwitchChainNotSupportedError"}};function deepEqual$1(cr,ar){if(cr===ar)return!0;if(cr&&ar&&typeof cr=="object"&&typeof ar=="object"){if(cr.constructor!==ar.constructor)return!1;let dr,fr;if(Array.isArray(cr)&&Array.isArray(ar)){if(dr=cr.length,dr!=ar.length)return!1;for(fr=dr;fr--!==0;)if(!deepEqual$1(cr[fr],ar[fr]))return!1;return!0}if(cr.valueOf!==Object.prototype.valueOf)return cr.valueOf()===ar.valueOf();if(cr.toString!==Object.prototype.toString)return cr.toString()===ar.toString();const hr=Object.keys(cr);if(dr=hr.length,dr!==Object.keys(ar).length)return!1;for(fr=dr;fr--!==0;)if(!Object.prototype.hasOwnProperty.call(ar,hr[fr]))return!1;for(fr=dr;fr--!==0;){const pr=hr[fr];if(pr&&!deepEqual$1(cr[pr],ar[pr]))return!1}return!0}return cr!==cr&&ar!==ar}var findAndReplace=(cr,{find:ar,replace:dr})=>cr&&ar(cr)?dr(cr):typeof cr!="object"?cr:Array.isArray(cr)?cr.map(fr=>findAndReplace(fr,{find:ar,replace:dr})):cr instanceof Object?Object.entries(cr).reduce((fr,[hr,pr])=>({...fr,[hr]:findAndReplace(pr,{find:ar,replace:dr})}),{}):cr;function deserialize(cr){const ar=JSON.parse(cr);return findAndReplace(ar,{find:fr=>typeof fr=="string"&&fr.startsWith("#bigint."),replace:fr=>BigInt(fr.replace("#bigint.",""))})}function getUnit(cr){return typeof cr=="number"?cr:cr==="wei"?0:Math.abs(weiUnits[cr])}function getReferenceKey(cr,ar){return cr.slice(0,ar).join(".")||"."}function getCutoff(cr,ar){const{length:dr}=cr;for(let fr=0;fr<dr;++fr)if(cr[fr]===ar)return fr+1;return 0}function createReplacer(cr,ar){const dr=typeof cr=="function",fr=typeof ar=="function",hr=[],pr=[];return function(gr,yr){if(typeof yr=="object")if(hr.length){const xr=getCutoff(hr,this);xr===0?hr[hr.length]=this:(hr.splice(xr),pr.splice(xr)),pr[pr.length]=gr;const wr=getCutoff(hr,yr);if(wr!==0)return fr?ar.call(this,gr,yr,getReferenceKey(pr,wr)):`[ref=${getReferenceKey(pr,wr)}]`}else hr[0]=yr,pr[0]=gr;return dr?cr.call(this,gr,yr):yr}}function serialize$1(cr,ar,dr,fr){return JSON.stringify(cr,createReplacer((hr,pr)=>{const mr=typeof pr=="bigint"?`#bigint.${pr.toString()}`:pr;return ar?.(hr,mr)||mr},fr),dr??void 0)}var noopStorage={getItem:cr=>"",setItem:(cr,ar)=>null,removeItem:cr=>null};function createStorage({deserialize:cr=deserialize,key:ar="wagmi",serialize:dr=serialize$1,storage:fr}){return{...fr,getItem:(hr,pr=null)=>{const mr=fr.getItem(`${ar}.${hr}`);try{return mr?cr(mr):pr}catch(gr){return console.warn(gr),pr}},setItem:(hr,pr)=>{if(pr===null)fr.removeItem(`${ar}.${hr}`);else try{fr.setItem(`${ar}.${hr}`,dr(pr))}catch(mr){console.error(mr)}},removeItem:hr=>fr.removeItem(`${ar}.${hr}`)}}var storeKey="store",_isAutoConnecting,_lastUsedConnector,_addEffects,addEffects_fn,Config=class{constructor({autoConnect:cr=!1,connectors:ar=[new InjectedConnector],publicClient:dr,storage:fr=createStorage({storage:typeof window<"u"?window.localStorage:noopStorage}),logger:hr={warn:console.warn},webSocketPublicClient:pr}){__privateAdd(this,_addEffects),this.publicClients=new Map,this.webSocketPublicClients=new Map,__privateAdd(this,_isAutoConnecting,void 0),__privateAdd(this,_lastUsedConnector,void 0),this.args={autoConnect:cr,connectors:ar,logger:hr,publicClient:dr,storage:fr,webSocketPublicClient:pr};let mr="disconnected",gr;if(cr)try{const wr=fr.getItem(storeKey)?.state?.data;mr=wr?.account?"reconnecting":"connecting",gr=wr?.chain?.id}catch{}const yr=typeof ar=="function"?ar():ar;yr.forEach(xr=>xr.setStorage(fr)),this.store=createStore(subscribeWithSelector(persist(()=>({connectors:yr,publicClient:this.getPublicClient({chainId:gr}),status:mr,webSocketPublicClient:this.getWebSocketPublicClient({chainId:gr})}),{name:storeKey,storage:fr,partialize:xr=>({...cr&&{data:{account:xr?.data?.account,chain:xr?.data?.chain}},chains:xr?.chains}),version:2}))),this.storage=fr,__privateSet(this,_lastUsedConnector,fr?.getItem("wallet")),__privateMethod(this,_addEffects,addEffects_fn).call(this),cr&&typeof window<"u"&&setTimeout(async()=>await this.autoConnect(),0)}get chains(){return this.store.getState().chains}get connectors(){return this.store.getState().connectors}get connector(){return this.store.getState().connector}get data(){return this.store.getState().data}get error(){return this.store.getState().error}get lastUsedChainId(){return this.data?.chain?.id}get publicClient(){return this.store.getState().publicClient}get status(){return this.store.getState().status}get subscribe(){return this.store.subscribe}get webSocketPublicClient(){return this.store.getState().webSocketPublicClient}setState(cr){const ar=typeof cr=="function"?cr(this.store.getState()):cr;this.store.setState(ar,!0)}clearState(){this.setState(cr=>({...cr,chains:void 0,connector:void 0,data:void 0,error:void 0,status:"disconnected"}))}async destroy(){this.connector&&await this.connector.disconnect?.(),__privateSet(this,_isAutoConnecting,!1),this.clearState(),this.store.destroy()}async autoConnect(){if(__privateGet(this,_isAutoConnecting))return;__privateSet(this,_isAutoConnecting,!0),this.setState(dr=>({...dr,status:dr.data?.account?"reconnecting":"connecting"}));const cr=__privateGet(this,_lastUsedConnector)?[...this.connectors].sort(dr=>dr.id===__privateGet(this,_lastUsedConnector)?-1:1):this.connectors;let ar=!1;for(const dr of cr){if(!dr.ready||!dr.isAuthorized||!await dr.isAuthorized())continue;const hr=await dr.connect();this.setState(pr=>({...pr,connector:dr,chains:dr?.chains,data:hr,status:"connected"})),ar=!0;break}return ar||this.setState(dr=>({...dr,data:void 0,status:"disconnected"})),__privateSet(this,_isAutoConnecting,!1),this.data}setConnectors(cr){this.args={...this.args,connectors:cr};const ar=typeof cr=="function"?cr():cr;ar.forEach(dr=>dr.setStorage(this.args.storage)),this.setState(dr=>({...dr,connectors:ar}))}getPublicClient({chainId:cr}={}){let ar=this.publicClients.get(-1);if(ar&&ar?.chain.id===cr||(ar=this.publicClients.get(cr??-1),ar))return ar;const{publicClient:dr}=this.args;return ar=typeof dr=="function"?dr({chainId:cr}):dr,this.publicClients.set(cr??-1,ar),ar}setPublicClient(cr){const ar=this.data?.chain?.id;this.args={...this.args,publicClient:cr},this.publicClients.clear(),this.setState(dr=>({...dr,publicClient:this.getPublicClient({chainId:ar})}))}getWebSocketPublicClient({chainId:cr}={}){let ar=this.webSocketPublicClients.get(-1);if(ar&&ar?.chain.id===cr||(ar=this.webSocketPublicClients.get(cr??-1),ar))return ar;const{webSocketPublicClient:dr}=this.args;return ar=typeof dr=="function"?dr({chainId:cr}):dr,ar&&this.webSocketPublicClients.set(cr??-1,ar),ar}setWebSocketPublicClient(cr){const ar=this.data?.chain?.id;this.args={...this.args,webSocketPublicClient:cr},this.webSocketPublicClients.clear(),this.setState(dr=>({...dr,webSocketPublicClient:this.getWebSocketPublicClient({chainId:ar})}))}setLastUsedConnector(cr=null){this.storage?.setItem("wallet",cr)}};_isAutoConnecting=new WeakMap;_lastUsedConnector=new WeakMap;_addEffects=new WeakSet;addEffects_fn=function(){const cr=gr=>{this.setState(yr=>({...yr,data:{...yr.data,...gr}}))},ar=()=>{this.clearState()},dr=gr=>{this.setState(yr=>({...yr,error:gr}))};this.store.subscribe(({connector:gr})=>gr,(gr,yr)=>{yr?.off?.("change",cr),yr?.off?.("disconnect",ar),yr?.off?.("error",dr),gr&&(gr.on?.("change",cr),gr.on?.("disconnect",ar),gr.on?.("error",dr))});const{publicClient:fr,webSocketPublicClient:hr}=this.args;(typeof fr=="function"||typeof hr=="function")&&this.store.subscribe(({data:gr})=>gr?.chain?.id,gr=>{this.setState(yr=>({...yr,publicClient:this.getPublicClient({chainId:gr}),webSocketPublicClient:this.getWebSocketPublicClient({chainId:gr})}))})};var config;function createConfig$1(cr){const ar=new Config(cr);return config=ar,ar}function getConfig(){if(!config)throw new Error("No wagmi config found. Ensure you have set up a config: https://wagmi.sh/react/config");return config}async function connect$1({chainId:cr,connector:ar}){const dr=getConfig(),fr=dr.connector;if(fr&&ar.id===fr.id)throw new ConnectorAlreadyConnectedError;try{dr.setState(pr=>({...pr,status:"connecting"}));const hr=await ar.connect({chainId:cr});return dr.setLastUsedConnector(ar.id),dr.setState(pr=>({...pr,connector:ar,chains:ar?.chains,data:hr,status:"connected"})),dr.storage.setItem("connected",!0),{...hr,connector:ar}}catch(hr){throw dr.setState(pr=>({...pr,status:pr.connector?"connected":"disconnected"})),hr}}async function disconnect(){const cr=getConfig();cr.connector&&await cr.connector.disconnect(),cr.clearState(),cr.storage.removeItem("connected")}var erc20ABI=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],erc20ABI_bytes32=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{name:"",type:"bytes32"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{name:"",type:"bytes32"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];function getPublicClient({chainId:cr}={}){const ar=getConfig();return cr&&ar.getPublicClient({chainId:cr})||ar.publicClient}async function getWalletClient({chainId:cr}={}){return await getConfig().connector?.getWalletClient?.({chainId:cr})||null}function getWebSocketPublicClient({chainId:cr}={}){const ar=getConfig();return cr&&ar.getWebSocketPublicClient({chainId:cr})||ar.webSocketPublicClient}function watchPublicClient(cr,ar){const dr=getConfig(),fr=async()=>ar(getPublicClient(cr));return dr.subscribe(({publicClient:pr})=>pr,fr)}function watchWebSocketPublicClient(cr,ar){const dr=getConfig(),fr=async()=>ar(getWebSocketPublicClient(cr));return dr.subscribe(({webSocketPublicClient:pr})=>pr,fr)}async function multicall({chainId:cr,contracts:ar,blockNumber:dr,blockTag:fr,...hr}){const pr=getPublicClient({chainId:cr});if(!pr.chains)throw new ConfigChainsNotFound;if(cr&&pr.chain.id!==cr)throw new ChainNotConfiguredError({chainId:cr});return pr.multicall({allowFailure:hr.allowFailure??!0,blockNumber:dr,blockTag:fr,contracts:ar})}async function readContract({address:cr,account:ar,chainId:dr,abi:fr,args:hr,functionName:pr,blockNumber:mr,blockTag:gr}){return getPublicClient({chainId:dr}).readContract({abi:fr,address:cr,account:ar,functionName:pr,args:hr,blockNumber:mr,blockTag:gr})}async function readContracts({contracts:cr,blockNumber:ar,blockTag:dr,...fr}){const{allowFailure:hr=!0}=fr;try{const pr=getPublicClient(),mr=cr.reduce((wr,br,Sr)=>{const vr=br.chainId??pr.chain.id;return{...wr,[vr]:[...wr[vr]||[],{contract:br,index:Sr}]}},{}),gr=()=>Object.entries(mr).map(([wr,br])=>multicall({allowFailure:hr,chainId:parseInt(wr),contracts:br.map(({contract:Sr})=>Sr),blockNumber:ar,blockTag:dr})),yr=(await Promise.all(gr())).flat(),xr=Object.values(mr).flatMap(wr=>wr.map(({index:br})=>br));return yr.reduce((wr,br,Sr)=>(wr&&(wr[xr[Sr]]=br),wr),[])}catch(pr){if(pr instanceof ContractFunctionExecutionError)throw pr;const mr=()=>cr.map(gr=>readContract({...gr,blockNumber:ar,blockTag:dr}));return hr?(await Promise.allSettled(mr())).map(gr=>gr.status==="fulfilled"?{result:gr.value,status:"success"}:{error:gr.reason,result:void 0,status:"failure"}):await Promise.all(mr())}}async function fetchBalance({address:cr,chainId:ar,formatUnits:dr,token:fr}){const hr=getConfig(),pr=getPublicClient({chainId:ar});if(fr){const xr=async({abi:wr})=>{const br={abi:wr,address:fr,chainId:ar},[Sr,vr,Er]=await readContracts({allowFailure:!1,contracts:[{...br,functionName:"balanceOf",args:[cr]},{...br,functionName:"decimals"},{...br,functionName:"symbol"}]});return{decimals:vr,formatted:formatUnits(Sr??"0",getUnit(dr??vr)),symbol:Er,value:Sr}};try{return await xr({abi:erc20ABI})}catch(wr){if(wr instanceof ContractFunctionExecutionError){const{symbol:br,...Sr}=await xr({abi:erc20ABI_bytes32});return{symbol:hexToString(trim(br,{dir:"right"})),...Sr}}throw wr}}const mr=[...hr.publicClient.chains||[],...hr.chains??[]],gr=await pr.getBalance({address:cr}),yr=mr.find(xr=>xr.id===pr.chain.id);return{decimals:yr?.nativeCurrency.decimals??18,formatted:formatUnits(gr??"0",getUnit(dr??18)),symbol:yr?.nativeCurrency.symbol??"ETH",value:gr}}function getAccount$1(){const{data:cr,connector:ar,status:dr}=getConfig();switch(dr){case"connected":return{address:cr?.account,connector:ar,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:dr};case"reconnecting":return{address:cr?.account,connector:ar,isConnected:!!cr?.account,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:dr};case"connecting":return{address:cr?.account,connector:ar,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:dr};case"disconnected":return{address:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:dr}}}function getNetwork(){const cr=getConfig(),ar=cr.data?.chain?.id,dr=cr.chains??[],fr=[...cr.publicClient?.chains||[],...dr].find(hr=>hr.id===ar)??{id:ar,name:`Chain ${ar}`,network:`${ar}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}};return{chain:ar?{...fr,...cr.data?.chain,id:ar}:void 0,chains:dr}}async function signMessage(cr){const ar=await getWalletClient();if(!ar)throw new ConnectorNotFoundError;return await ar.signMessage({message:cr.message})}async function switchNetwork({chainId:cr}){const{connector:ar}=getConfig();if(!ar)throw new ConnectorNotFoundError;if(!ar.switchChain)throw new SwitchChainNotSupportedError({connector:ar});return ar.switchChain(cr)}function watchAccount(cr,{selector:ar=dr=>dr}={}){const dr=getConfig(),fr=()=>cr(getAccount$1());return dr.subscribe(({data:pr,connector:mr,status:gr})=>ar({address:pr?.account,connector:mr,status:gr}),fr,{equalityFn:shallow})}function watchNetwork(cr,{selector:ar=dr=>dr}={}){const dr=getConfig(),fr=()=>cr(getNetwork());return dr.subscribe(({data:pr,chains:mr})=>ar({chainId:pr?.chain?.id,chains:mr}),fr,{equalityFn:shallow})}async function fetchEnsAvatar({name:cr,chainId:ar}){return await getPublicClient({chainId:ar}).getEnsAvatar({name:normalize(cr)})}async function fetchEnsName({address:cr,chainId:ar}){return getPublicClient({chainId:ar}).getEnsName({address:getAddress$2(cr)})}async function fetchBlockNumber({chainId:cr}={}){return await getPublicClient({chainId:cr}).getBlockNumber()}var mainnet={id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc0497E381f536Be9ce14B0dD3817cBcAe57d2F62",blockCreated:16966585},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}};function createConfig({queryClient:cr=new QueryClient({defaultOptions:{queries:{cacheTime:1e3*60*60*24,networkMode:"offlineFirst",refetchOnWindowFocus:!1,retry:0},mutations:{networkMode:"offlineFirst"}}}),storage:ar=createStorage({storage:typeof window<"u"&&window.localStorage?window.localStorage:noopStorage}),persister:dr=typeof window<"u"?createSyncStoragePersister({key:"cache",storage:ar,serialize:hr=>hr,deserialize:hr=>hr}):void 0,...fr}){const hr=createConfig$1({...fr,storage:ar});return dr&&persistQueryClient({queryClient:cr,persister:dr,dehydrateOptions:{shouldDehydrateQuery:pr=>pr.cacheTime!==0&&pr.queryKey[0].persist!==!1}}),Object.assign(hr,{queryClient:cr})}var Context=reactExports.createContext(void 0),queryClientContext=reactExports.createContext(void 0);function WagmiConfig({children:cr,config:ar}){return reactExports.createElement(Context.Provider,{children:reactExports.createElement(QueryClientProvider,{children:cr,client:ar.queryClient,context:queryClientContext}),value:ar})}function useConfig(){const cr=reactExports.useContext(Context);if(!cr)throw new Error(["`useConfig` must be used within `WagmiConfig`.\n","Read more: https://wagmi.sh/react/WagmiConfig"].join(`
`));return cr}var useSyncExternalStore2=shimExports.useSyncExternalStore;function isQueryKey(cr){return Array.isArray(cr)}function isPlainObject$1(cr){if(!hasObjectPrototype(cr))return!1;const ar=cr.constructor;if(typeof ar>"u")return!0;const dr=ar.prototype;return!(!hasObjectPrototype(dr)||!dr.hasOwnProperty("isPrototypeOf"))}function hasObjectPrototype(cr){return Object.prototype.toString.call(cr)==="[object Object]"}function parseQueryArgs(cr,ar,dr){return isQueryKey(cr)?typeof ar=="function"?{...dr,queryKey:cr,queryFn:ar}:{...ar,queryKey:cr}:cr}function queryKeyHashFn(cr){return JSON.stringify(cr,(ar,dr)=>isPlainObject$1(dr)?Object.keys(dr).sort().reduce((fr,hr)=>(fr[hr]=dr[hr],fr),{}):typeof dr=="bigint"?dr.toString():dr)}function shouldThrowError(cr,ar){return typeof cr=="function"?cr(...ar):!!cr}function trackResult(cr,ar){const dr={};return Object.keys(cr).forEach(fr=>{Object.defineProperty(dr,fr,{configurable:!1,enumerable:!0,get:()=>(ar.trackedProps.add(fr),cr[fr])})}),dr}function useBaseQuery(cr,ar){const dr=useQueryClient({context:cr.context}),fr=useIsRestoring(),hr=useQueryErrorResetBoundary(),pr=dr.defaultQueryOptions({...cr,queryKeyHashFn});pr._optimisticResults=fr?"isRestoring":"optimistic",pr.onError&&(pr.onError=notifyManager.batchCalls(pr.onError)),pr.onSuccess&&(pr.onSuccess=notifyManager.batchCalls(pr.onSuccess)),pr.onSettled&&(pr.onSettled=notifyManager.batchCalls(pr.onSettled)),pr.suspense&&typeof pr.staleTime!="number"&&(pr.staleTime=1e3),(pr.suspense||pr.useErrorBoundary)&&(hr.isReset()||(pr.retryOnMount=!1));const[mr]=reactExports.useState(()=>new ar(dr,pr)),gr=mr.getOptimisticResult(pr);if(useSyncExternalStore2(reactExports.useCallback(br=>fr?()=>{}:mr.subscribe(notifyManager.batchCalls(br)),[mr,fr]),()=>mr.getCurrentResult(),()=>mr.getCurrentResult()),reactExports.useEffect(()=>{hr.clearReset()},[hr]),reactExports.useEffect(()=>{mr.setOptions(pr,{listeners:!1})},[pr,mr]),pr.suspense&&gr.isLoading&&gr.isFetching&&!fr)throw mr.fetchOptimistic(pr).then(({data:br})=>{pr.onSuccess?.(br),pr.onSettled?.(br,null)}).catch(br=>{hr.clearReset(),pr.onError?.(br),pr.onSettled?.(void 0,br)});if(gr.isError&&!hr.isReset()&&!gr.isFetching&&shouldThrowError(pr.useErrorBoundary,[gr.error,mr.getCurrentQuery()]))throw gr.error;const yr=gr.status==="loading"&&gr.fetchStatus==="idle"?"idle":gr.status,xr=yr==="idle",wr=yr==="loading"&&gr.fetchStatus==="fetching";return{...gr,defaultedOptions:pr,isIdle:xr,isLoading:wr,observer:mr,status:yr}}function useMutation(cr,ar,dr){const fr=parseMutationArgs(cr,ar,dr);return useMutation$1({context:queryClientContext,...fr})}function useQuery(cr,ar,dr){const fr=parseQueryArgs(cr,ar,dr),hr=useBaseQuery({context:queryClientContext,...fr},QueryObserver),pr={data:hr.data,error:hr.error,fetchStatus:hr.fetchStatus,isError:hr.isError,isFetched:hr.isFetched,isFetchedAfterMount:hr.isFetchedAfterMount,isFetching:hr.isFetching,isIdle:hr.isIdle,isLoading:hr.isLoading,isRefetching:hr.isRefetching,isSuccess:hr.isSuccess,refetch:hr.refetch,status:hr.status,internal:{dataUpdatedAt:hr.dataUpdatedAt,errorUpdatedAt:hr.errorUpdatedAt,failureCount:hr.failureCount,isFetchedAfterMount:hr.isFetchedAfterMount,isLoadingError:hr.isLoadingError,isPaused:hr.isPaused,isPlaceholderData:hr.isPlaceholderData,isPreviousData:hr.isPreviousData,isRefetchError:hr.isRefetchError,isStale:hr.isStale,remove:hr.remove}};return hr.defaultedOptions.notifyOnChangeProps?pr:trackResult(pr,hr.observer)}var useQueryClient2=()=>useQueryClient({context:queryClientContext});function usePublicClient({chainId:cr}={}){return withSelectorExports.useSyncExternalStoreWithSelector(ar=>watchPublicClient({chainId:cr},ar),()=>getPublicClient({chainId:cr}),()=>getPublicClient({chainId:cr}),ar=>ar,(ar,dr)=>ar.uid===dr.uid)}function useWebSocketPublicClient({chainId:cr}={}){return withSelectorExports.useSyncExternalStoreWithSelector(ar=>watchWebSocketPublicClient({chainId:cr},ar),()=>getWebSocketPublicClient({chainId:cr}),()=>getWebSocketPublicClient({chainId:cr}),ar=>ar,(ar,dr)=>ar?.uid===dr?.uid)}function useChainId$1({chainId:cr}={}){return usePublicClient({chainId:cr}).chain.id}function useForceUpdate$1(){const[,cr]=reactExports.useReducer(ar=>ar+1,0);return cr}function queryKey2({chainId:cr,scopeKey:ar}){return[{entity:"blockNumber",chainId:cr,scopeKey:ar}]}function queryFn2({queryKey:[{chainId:cr}]}){return fetchBlockNumber({chainId:cr})}function useBlockNumber({cacheTime:cr=0,chainId:ar,enabled:dr=!0,scopeKey:fr,staleTime:hr,suspense:pr,watch:mr=!1,onBlock:gr,onError:yr,onSettled:xr,onSuccess:wr}={}){const br=useChainId$1({chainId:ar}),Sr=usePublicClient({chainId:br}),vr=useWebSocketPublicClient({chainId:br}),Er=useQueryClient2();return reactExports.useEffect(()=>!dr||!mr&&!gr?void 0:(vr??Sr).watchBlockNumber({onBlockNumber:Cr=>{mr&&Er.setQueryData(queryKey2({chainId:br,scopeKey:fr}),Cr),gr&&gr(Cr)},emitOnBegin:!0}),[br,fr,gr,Sr,Er,mr,vr,dr]),useQuery(queryKey2({scopeKey:fr,chainId:br}),queryFn2,{cacheTime:cr,enabled:dr,staleTime:hr,suspense:pr,onError:yr,onSettled:xr,onSuccess:wr})}function useInvalidateOnBlock({chainId:cr,enabled:ar,queryKey:dr}){const fr=useQueryClient2(),hr=reactExports.useCallback(()=>fr.invalidateQueries({queryKey:dr},{cancelRefetch:!1}),[fr,dr]);useBlockNumber({chainId:cr,enabled:ar,onBlock:ar?hr:void 0,scopeKey:ar?void 0:"idle"})}var isPlainObject2=cr=>typeof cr=="object"&&!Array.isArray(cr);function useSyncExternalStoreWithTracked(cr,ar,dr=ar,fr=deepEqual$1){const hr=reactExports.useRef([]),pr=withSelectorExports.useSyncExternalStoreWithSelector(cr,ar,dr,mr=>mr,(mr,gr)=>{if(isPlainObject2(mr)&&isPlainObject2(gr)&&hr.current.length){for(const yr of hr.current)if(!fr(mr[yr],gr[yr]))return!1;return!0}return fr(mr,gr)});if(isPlainObject2(pr)){const mr={...pr};return Object.defineProperties(mr,Object.entries(mr).reduce((gr,[yr,xr])=>({...gr,[yr]:{configurable:!1,enumerable:!0,get:()=>(hr.current.includes(yr)||hr.current.push(yr),xr)}}),{})),mr}return pr}function useAccount({onConnect:cr,onDisconnect:ar}={}){const dr=useConfig(),fr=reactExports.useCallback(gr=>watchAccount(gr),[dr]),hr=useSyncExternalStoreWithTracked(fr,getAccount$1),pr=reactExports.useRef(),mr=pr.current;return reactExports.useEffect(()=>{mr?.status!=="connected"&&hr.status==="connected"&&cr?.({address:hr.address,connector:hr.connector,isReconnected:mr?.status==="reconnecting"||mr?.status===void 0}),mr?.status==="connected"&&hr.status==="disconnected"&&ar?.(),pr.current=hr},[cr,ar,mr,hr]),hr}function queryKey4({address:cr,chainId:ar,formatUnits:dr,scopeKey:fr,token:hr}){return[{entity:"balance",address:cr,chainId:ar,formatUnits:dr,scopeKey:fr,token:hr}]}function queryFn4({queryKey:[{address:cr,chainId:ar,formatUnits:dr,token:fr}]}){if(!cr)throw new Error("address is required");return fetchBalance({address:cr,chainId:ar,formatUnits:dr,token:fr})}function useBalance({address:cr,cacheTime:ar,chainId:dr,enabled:fr=!0,formatUnits:hr,scopeKey:pr,staleTime:mr,suspense:gr,token:yr,watch:xr,onError:wr,onSettled:br,onSuccess:Sr}={}){const vr=useChainId$1({chainId:dr}),Er=reactExports.useMemo(()=>queryKey4({address:cr,chainId:vr,formatUnits:hr,scopeKey:pr,token:yr}),[cr,vr,hr,pr,yr]),Ar=useQuery(Er,queryFn4,{cacheTime:ar,enabled:!!(fr&&cr),staleTime:mr,suspense:gr,onError:wr,onSettled:br,onSuccess:Sr});return useInvalidateOnBlock({chainId:vr,enabled:!!(fr&&xr&&cr),queryKey:Er}),Ar}var mutationKey=cr=>[{entity:"connect",...cr}],mutationFn=cr=>{const{connector:ar,chainId:dr}=cr;if(!ar)throw new Error("connector is required");return connect$1({connector:ar,chainId:dr})};function useConnect({chainId:cr,connector:ar,onError:dr,onMutate:fr,onSettled:hr,onSuccess:pr}={}){const mr=useConfig(),{data:gr,error:yr,isError:xr,isIdle:wr,isLoading:br,isSuccess:Sr,mutate:vr,mutateAsync:Er,reset:Ar,status:_r,variables:Cr}=useMutation(mutationKey({connector:ar,chainId:cr}),mutationFn,{onError:dr,onMutate:fr,onSettled:hr,onSuccess:pr}),kr=reactExports.useCallback(Ir=>vr({chainId:Ir?.chainId??cr,connector:Ir?.connector??ar}),[cr,ar,vr]),Rr=reactExports.useCallback(Ir=>Er({chainId:Ir?.chainId??cr,connector:Ir?.connector??ar}),[cr,ar,Er]);return{connect:kr,connectAsync:Rr,connectors:mr.connectors,data:gr,error:yr,isError:xr,isIdle:wr,isLoading:br,isSuccess:Sr,pendingConnector:Cr?.connector,reset:Ar,status:_r,variables:Cr}}var mutationKey2=[{entity:"disconnect"}],mutationFn2=()=>disconnect();function useDisconnect({onError:cr,onMutate:ar,onSettled:dr,onSuccess:fr}={}){const{error:hr,isError:pr,isIdle:mr,isLoading:gr,isSuccess:yr,mutate:xr,mutateAsync:wr,reset:br,status:Sr}=useMutation(mutationKey2,mutationFn2,{...cr?{onError(vr,Er,Ar){cr(vr,Ar)}}:{},onMutate:ar,...dr?{onSettled(vr,Er,Ar,_r){dr(Er,_r)}}:{},...fr?{onSuccess(vr,Er,Ar){fr(Ar)}}:{}});return{disconnect:xr,disconnectAsync:wr,error:hr,isError:pr,isIdle:mr,isLoading:gr,isSuccess:yr,reset:br,status:Sr}}function useNetwork(){const cr=useConfig(),ar=reactExports.useCallback(dr=>watchNetwork(dr),[cr]);return useSyncExternalStoreWithTracked(ar,getNetwork)}var mutationKey3=cr=>[{entity:"signMessage",...cr}],mutationFn3=cr=>{const{message:ar}=cr;if(!ar)throw new Error("message is required");return signMessage({message:ar})};function useSignMessage({message:cr,onError:ar,onMutate:dr,onSettled:fr,onSuccess:hr}={}){const{data:pr,error:mr,isError:gr,isIdle:yr,isLoading:xr,isSuccess:wr,mutate:br,mutateAsync:Sr,reset:vr,status:Er,variables:Ar}=useMutation(mutationKey3({message:cr}),mutationFn3,{onError:ar,onMutate:dr,onSettled:fr,onSuccess:hr}),_r=reactExports.useCallback(kr=>br(kr||{message:cr}),[cr,br]),Cr=reactExports.useCallback(kr=>Sr(kr||{message:cr}),[cr,Sr]);return{data:pr,error:mr,isError:gr,isIdle:yr,isLoading:xr,isSuccess:wr,reset:vr,signMessage:_r,signMessageAsync:Cr,status:Er,variables:Ar}}var mutationKey5=cr=>[{entity:"switchNetwork",...cr}],mutationFn5=cr=>{const{chainId:ar}=cr;if(!ar)throw new Error("chainId is required");return switchNetwork({chainId:ar})};function useSwitchNetwork({chainId:cr,throwForSwitchChainNotSupported:ar,onError:dr,onMutate:fr,onSettled:hr,onSuccess:pr}={}){const mr=useConfig(),gr=useForceUpdate$1(),{data:yr,error:xr,isError:wr,isIdle:br,isLoading:Sr,isSuccess:vr,mutate:Er,mutateAsync:Ar,reset:_r,status:Cr,variables:kr}=useMutation(mutationKey5({chainId:cr}),mutationFn5,{onError:dr,onMutate:fr,onSettled:hr,onSuccess:pr}),Rr=reactExports.useCallback(Br=>Er({chainId:Br??cr}),[cr,Er]),Ir=reactExports.useCallback(Br=>Ar({chainId:Br??cr}),[cr,Ar]);reactExports.useEffect(()=>mr.subscribe(({chains:Fr,connector:jr})=>({chains:Fr,connector:jr}),gr),[mr,gr]);let Nr,Pr;const Tr=!!mr.connector?.switchChain;return(ar||Tr)&&(Nr=Rr,Pr=Ir),{chains:mr.chains??[],data:yr,error:xr,isError:wr,isIdle:br,isLoading:Sr,isSuccess:vr,pendingChainId:kr?.chainId,reset:_r,status:Cr,switchNetwork:Nr,switchNetworkAsync:Pr,variables:kr}}function queryKey11({name:cr,chainId:ar,scopeKey:dr}){return[{entity:"ensAvatar",name:cr,chainId:ar,scopeKey:dr}]}function queryFn11({queryKey:[{name:cr,chainId:ar}]}){if(!cr)throw new Error("name is required");return fetchEnsAvatar({name:cr,chainId:ar})}function useEnsAvatar({cacheTime:cr,chainId:ar,enabled:dr=!0,name:fr,scopeKey:hr,staleTime:pr=1e3*60*60*24,suspense:mr,onError:gr,onSettled:yr,onSuccess:xr}={}){const wr=useChainId$1({chainId:ar});return useQuery(queryKey11({name:fr,chainId:wr,scopeKey:hr}),queryFn11,{cacheTime:cr,enabled:!!(dr&&fr&&wr),staleTime:pr,suspense:mr,onError:gr,onSettled:yr,onSuccess:xr})}function queryKey12({address:cr,chainId:ar,scopeKey:dr}){return[{entity:"ensName",address:cr,chainId:ar,scopeKey:dr}]}function queryFn12({queryKey:[{address:cr,chainId:ar}]}){if(!cr)throw new Error("address is required");return fetchEnsName({address:cr,chainId:ar})}function useEnsName({address:cr,cacheTime:ar,chainId:dr,enabled:fr=!0,scopeKey:hr,staleTime:pr=1e3*60*60*24,suspense:mr,onError:gr,onSettled:yr,onSuccess:xr}={}){const wr=useChainId$1({chainId:dr});return useQuery(queryKey12({address:cr,chainId:wr,scopeKey:hr}),queryFn12,{cacheTime:ar,enabled:!!(fr&&cr&&wr),staleTime:pr,suspense:mr,onError:gr,onSettled:yr,onSuccess:xr})}var systemFontStack='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontStacks={rounded:`SFRounded, ui-rounded, "SF Pro Rounded", ${systemFontStack}`,system:systemFontStack},radiusScales={large:{actionButton:"9999px",connectButton:"12px",modal:"24px",modalMobile:"28px"},medium:{actionButton:"10px",connectButton:"8px",modal:"16px",modalMobile:"18px"},none:{actionButton:"0px",connectButton:"0px",modal:"0px",modalMobile:"0px"},small:{actionButton:"4px",connectButton:"4px",modal:"8px",modalMobile:"8px"}},blurs={large:{modalOverlay:"blur(20px)"},none:{modalOverlay:"blur(0px)"},small:{modalOverlay:"blur(4px)"}},baseTheme=({borderRadius:cr="large",fontStack:ar="rounded",overlayBlur:dr="none"})=>({blurs:{modalOverlay:blurs[dr].modalOverlay},fonts:{body:fontStacks[ar]},radii:{actionButton:radiusScales[cr].actionButton,connectButton:radiusScales[cr].connectButton,menuButton:radiusScales[cr].connectButton,modal:radiusScales[cr].modal,modalMobile:radiusScales[cr].modalMobile}}),accentColors={blue:{accentColor:"#0E76FD",accentColorForeground:"#FFF"},green:{accentColor:"#1DB847",accentColorForeground:"#FFF"},orange:{accentColor:"#FF801F",accentColorForeground:"#FFF"},pink:{accentColor:"#FF5CA0",accentColorForeground:"#FFF"},purple:{accentColor:"#5F5AFA",accentColorForeground:"#FFF"},red:{accentColor:"#FA423C",accentColorForeground:"#FFF"}},defaultAccentColor=accentColors.blue,lightTheme=({accentColor:cr=defaultAccentColor.accentColor,accentColorForeground:ar=defaultAccentColor.accentColorForeground,...dr}={})=>({...baseTheme(dr),colors:{accentColor:cr,accentColorForeground:ar,actionButtonBorder:"rgba(0, 0, 0, 0.04)",actionButtonBorderMobile:"rgba(0, 0, 0, 0.06)",actionButtonSecondaryBackground:"rgba(0, 0, 0, 0.06)",closeButton:"rgba(60, 66, 66, 0.8)",closeButtonBackground:"rgba(0, 0, 0, 0.06)",connectButtonBackground:"#FFF",connectButtonBackgroundError:"#FF494A",connectButtonInnerBackground:"linear-gradient(0deg, rgba(0, 0, 0, 0.03), rgba(0, 0, 0, 0.06))",connectButtonText:"#25292E",connectButtonTextError:"#FFF",connectionIndicator:"#30E000",downloadBottomCardBackground:"linear-gradient(126deg, rgba(255, 255, 255, 0) 9.49%, rgba(171, 171, 171, 0.04) 71.04%), #FFFFFF",downloadTopCardBackground:"linear-gradient(126deg, rgba(171, 171, 171, 0.2) 9.49%, rgba(255, 255, 255, 0) 71.04%), #FFFFFF",error:"#FF494A",generalBorder:"rgba(0, 0, 0, 0.06)",generalBorderDim:"rgba(0, 0, 0, 0.03)",menuItemBackground:"rgba(60, 66, 66, 0.1)",modalBackdrop:"rgba(0, 0, 0, 0.3)",modalBackground:"#FFF",modalBorder:"transparent",modalText:"#25292E",modalTextDim:"rgba(60, 66, 66, 0.3)",modalTextSecondary:"rgba(60, 66, 66, 0.6)",profileAction:"#FFF",profileActionHover:"rgba(255, 255, 255, 0.5)",profileForeground:"rgba(60, 66, 66, 0.06)",selectedOptionBorder:"rgba(60, 66, 66, 0.1)",standby:"#FFD641"},shadows:{connectButton:"0px 4px 12px rgba(0, 0, 0, 0.1)",dialog:"0px 8px 32px rgba(0, 0, 0, 0.32)",profileDetailsAction:"0px 2px 6px rgba(37, 41, 46, 0.04)",selectedOption:"0px 2px 6px rgba(0, 0, 0, 0.24)",selectedWallet:"0px 2px 6px rgba(0, 0, 0, 0.12)",walletLogo:"0px 2px 16px rgba(0, 0, 0, 0.16)"}});lightTheme.accentColors=accentColors;function addFunctionSerializer(cr,ar){return Object.defineProperty(cr,"__recipe__",{value:ar,writable:!1}),cr}var addRecipe=addFunctionSerializer;function createNormalizeValueFn(cr){var{conditions:ar}=cr;if(!ar)throw new Error("Styles have no conditions");function dr(fr){if(typeof fr=="string"||typeof fr=="number"||typeof fr=="boolean"){if(!ar.defaultCondition)throw new Error("No default condition");return{[ar.defaultCondition]:fr}}if(Array.isArray(fr)){if(!("responsiveArray"in ar))throw new Error("Responsive arrays are not supported");var hr={};for(var pr in ar.responsiveArray)fr[pr]!=null&&(hr[ar.responsiveArray[pr]]=fr[pr]);return hr}return fr}return addRecipe(dr,{importPath:"@vanilla-extract/sprinkles/createUtils",importName:"createNormalizeValueFn",args:[{conditions:cr.conditions}]})}function createMapValueFn(cr){var{conditions:ar}=cr;if(!ar)throw new Error("Styles have no conditions");var dr=createNormalizeValueFn(cr);function fr(hr,pr){if(typeof hr=="string"||typeof hr=="number"||typeof hr=="boolean"){if(!ar.defaultCondition)throw new Error("No default condition");return pr(hr,ar.defaultCondition)}var mr=Array.isArray(hr)?dr(hr):hr,gr={};for(var yr in mr)mr[yr]!=null&&(gr[yr]=pr(mr[yr],yr));return gr}return addRecipe(fr,{importPath:"@vanilla-extract/sprinkles/createUtils",importName:"createMapValueFn",args:[{conditions:cr.conditions}]})}function _defineProperty$2(cr,ar,dr){return ar in cr?Object.defineProperty(cr,ar,{value:dr,enumerable:!0,configurable:!0,writable:!0}):cr[ar]=dr,cr}function ownKeys$2(cr,ar){var dr=Object.keys(cr);if(Object.getOwnPropertySymbols){var fr=Object.getOwnPropertySymbols(cr);ar&&(fr=fr.filter(function(hr){return Object.getOwnPropertyDescriptor(cr,hr).enumerable})),dr.push.apply(dr,fr)}return dr}function _objectSpread2$2(cr){for(var ar=1;ar<arguments.length;ar++){var dr=arguments[ar]!=null?arguments[ar]:{};ar%2?ownKeys$2(Object(dr),!0).forEach(function(fr){_defineProperty$2(cr,fr,dr[fr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(cr,Object.getOwnPropertyDescriptors(dr)):ownKeys$2(Object(dr)).forEach(function(fr){Object.defineProperty(cr,fr,Object.getOwnPropertyDescriptor(dr,fr))})}return cr}var createSprinkles$1=cr=>function(){for(var ar=arguments.length,dr=new Array(ar),fr=0;fr<ar;fr++)dr[fr]=arguments[fr];var hr=Object.assign({},...dr.map(yr=>yr.styles)),pr=Object.keys(hr),mr=pr.filter(yr=>"mappings"in hr[yr]),gr=yr=>{var xr=[],wr={},br=_objectSpread2$2({},yr),Sr=!1;for(var vr of mr){var Er=yr[vr];if(Er!=null){var Ar=hr[vr];Sr=!0;for(var _r of Ar.mappings)wr[_r]=Er,br[_r]==null&&delete br[_r]}}var Cr=Sr?_objectSpread2$2(_objectSpread2$2({},wr),br):yr;for(var kr in Cr){var Rr=Cr[kr],Ir=hr[kr];try{if(Ir.mappings)continue;if(typeof Rr=="string"||typeof Rr=="number")xr.push(Ir.values[Rr].defaultClass);else if(Array.isArray(Rr))for(var Nr=0;Nr<Rr.length;Nr++){var Pr=Rr[Nr];if(Pr!=null){var Tr=Ir.responsiveArray[Nr];xr.push(Ir.values[Pr].conditions[Tr])}}else for(var Br in Rr){var Fr=Rr[Br];Fr!=null&&xr.push(Ir.values[Fr].conditions[Br])}}catch(jr){throw jr}}return cr(xr.join(" "))};return Object.assign(gr,{properties:new Set(pr)})},composeStyles=cr=>cr,createSprinkles=function(){return createSprinkles$1(composeStyles)(...arguments)};function toVal(cr){var ar,dr,fr="";if(typeof cr=="string"||typeof cr=="number")fr+=cr;else if(typeof cr=="object")if(Array.isArray(cr))for(ar=0;ar<cr.length;ar++)cr[ar]&&(dr=toVal(cr[ar]))&&(fr&&(fr+=" "),fr+=dr);else for(ar in cr)cr[ar]&&(fr&&(fr+=" "),fr+=ar);return fr}function clsx2(){for(var cr=0,ar,dr,fr="";cr<arguments.length;)(ar=arguments[cr++])&&(dr=toVal(ar))&&(fr&&(fr+=" "),fr+=dr);return fr}var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(cr,ar){return typeof cr=="function"?cr(ar):cr&&(cr.current=ar),cr}function useCallbackRef(cr,ar){var dr=reactExports.useState(function(){return{value:cr,callback:ar,facade:{get current(){return dr.value},set current(fr){var hr=dr.value;hr!==fr&&(dr.value=fr,dr.callback(fr,hr))}}}})[0];return dr.callback=ar,dr.facade}function useMergeRefs(cr,ar){return useCallbackRef(ar||null,function(dr){return cr.forEach(function(fr){return assignRef(fr,dr)})})}function ItoI(cr){return cr}function innerCreateMedium(cr,ar){ar===void 0&&(ar=ItoI);var dr=[],fr=!1,hr={read:function(){if(fr)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return dr.length?dr[dr.length-1]:cr},useMedium:function(pr){var mr=ar(pr,fr);return dr.push(mr),function(){dr=dr.filter(function(gr){return gr!==mr})}},assignSyncMedium:function(pr){for(fr=!0;dr.length;){var mr=dr;dr=[],mr.forEach(pr)}dr={push:function(gr){return pr(gr)},filter:function(){return dr}}},assignMedium:function(pr){fr=!0;var mr=[];if(dr.length){var gr=dr;dr=[],gr.forEach(pr),mr=dr}var yr=function(){var wr=mr;mr=[],wr.forEach(pr)},xr=function(){return Promise.resolve().then(yr)};xr(),dr={push:function(wr){mr.push(wr),xr()},filter:function(wr){return mr=mr.filter(wr),dr}}}};return hr}function createSidecarMedium(cr){cr===void 0&&(cr={});var ar=innerCreateMedium(null);return ar.options=__assign$2({async:!0,ssr:!1},cr),ar}var SideCar$2=function(cr){var ar=cr.sideCar,dr=__rest$3(cr,["sideCar"]);if(!ar)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var fr=ar.read();if(!fr)throw new Error("Sidecar medium not found");return reactExports.createElement(fr,__assign$2({},dr))};SideCar$2.isSideCarExport=!0;function exportSidecar(cr,ar){return cr.useMedium(ar),SideCar$2}var effectCar$1=createSidecarMedium(),nothing$1=function(){},RemoveScroll$2=reactExports.forwardRef(function(cr,ar){var dr=reactExports.useRef(null),fr=reactExports.useState({onScrollCapture:nothing$1,onWheelCapture:nothing$1,onTouchMoveCapture:nothing$1}),hr=fr[0],pr=fr[1],mr=cr.forwardProps,gr=cr.children,yr=cr.className,xr=cr.removeScrollBar,wr=cr.enabled,br=cr.shards,Sr=cr.sideCar,vr=cr.noIsolation,Er=cr.inert,Ar=cr.allowPinchZoom,_r=cr.as,Cr=_r===void 0?"div":_r,kr=__rest$3(cr,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),Rr=Sr,Ir=useMergeRefs([dr,ar]),Nr=__assign$2(__assign$2({},kr),hr);return reactExports.createElement(reactExports.Fragment,null,wr&&reactExports.createElement(Rr,{sideCar:effectCar$1,removeScrollBar:xr,shards:br,noIsolation:vr,inert:Er,setCallbacks:pr,allowPinchZoom:!!Ar,lockRef:dr}),mr?reactExports.cloneElement(reactExports.Children.only(gr),__assign$2(__assign$2({},Nr),{ref:Ir})):reactExports.createElement(Cr,__assign$2({},Nr,{className:yr,ref:Ir}),gr))});RemoveScroll$2.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll$2.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var currentNonce,getNonce=function(){if(currentNonce)return currentNonce;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var cr=document.createElement("style");cr.type="text/css";var ar=getNonce();return ar&&cr.setAttribute("nonce",ar),cr}function injectStyles(cr,ar){cr.styleSheet?cr.styleSheet.cssText=ar:cr.appendChild(document.createTextNode(ar))}function insertStyleTag(cr){var ar=document.head||document.getElementsByTagName("head")[0];ar.appendChild(cr)}var stylesheetSingleton=function(){var cr=0,ar=null;return{add:function(dr){cr==0&&(ar=makeStyleTag())&&(injectStyles(ar,dr),insertStyleTag(ar)),cr++},remove:function(){cr--,!cr&&ar&&(ar.parentNode&&ar.parentNode.removeChild(ar),ar=null)}}},styleHookSingleton=function(){var cr=stylesheetSingleton();return function(ar,dr){reactExports.useEffect(function(){return cr.add(ar),function(){cr.remove()}},[ar&&dr])}},styleSingleton=function(){var cr=styleHookSingleton(),ar=function(dr){var fr=dr.styles,hr=dr.dynamic;return cr(fr,hr),null};return ar},zeroGap={left:0,top:0,right:0,gap:0},parse$4=function(cr){return parseInt(cr||"",10)||0},getOffset=function(cr){var ar=window.getComputedStyle(document.body),dr=ar[cr==="padding"?"paddingLeft":"marginLeft"],fr=ar[cr==="padding"?"paddingTop":"marginTop"],hr=ar[cr==="padding"?"paddingRight":"marginRight"];return[parse$4(dr),parse$4(fr),parse$4(hr)]},getGapWidth=function(cr){if(cr===void 0&&(cr="margin"),typeof window>"u")return zeroGap;var ar=getOffset(cr),dr=document.documentElement.clientWidth,fr=window.innerWidth;return{left:ar[0],top:ar[1],right:ar[2],gap:Math.max(0,fr-dr+ar[2]-ar[0])}},Style=styleSingleton(),getStyles=function(cr,ar,dr,fr){var hr=cr.left,pr=cr.top,mr=cr.right,gr=cr.gap;return dr===void 0&&(dr="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(fr,`;
   padding-right: `).concat(gr,"px ").concat(fr,`;
  }
  body {
    overflow: hidden `).concat(fr,`;
    overscroll-behavior: contain;
    `).concat([ar&&"position: relative ".concat(fr,";"),dr==="margin"&&`
    padding-left: `.concat(hr,`px;
    padding-top: `).concat(pr,`px;
    padding-right: `).concat(mr,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(gr,"px ").concat(fr,`;
    `),dr==="padding"&&"padding-right: ".concat(gr,"px ").concat(fr,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(gr,"px ").concat(fr,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(gr,"px ").concat(fr,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(fr,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(fr,`;
  }
  
  body {
    `).concat(removedBarSizeVariable,": ").concat(gr,`px;
  }
`)},RemoveScrollBar=function(cr){var ar=cr.noRelative,dr=cr.noImportant,fr=cr.gapMode,hr=fr===void 0?"margin":fr,pr=reactExports.useMemo(function(){return getGapWidth(hr)},[hr]);return reactExports.createElement(Style,{styles:getStyles(pr,!ar,hr,dr?"":"!important")})},passiveSupported$1=!1;if(typeof window<"u")try{var options$1=Object.defineProperty({},"passive",{get:function(){return passiveSupported$1=!0,!0}});window.addEventListener("test",options$1,options$1),window.removeEventListener("test",options$1,options$1)}catch{passiveSupported$1=!1}var nonPassive$1=passiveSupported$1?{passive:!1}:!1,elementCouldBeVScrolled$1=function(cr){var ar=window.getComputedStyle(cr);return ar.overflowY!=="hidden"&&!(ar.overflowY===ar.overflowX&&ar.overflowY==="visible")},elementCouldBeHScrolled$1=function(cr){var ar=window.getComputedStyle(cr);return ar.overflowX!=="hidden"&&!(ar.overflowY===ar.overflowX&&ar.overflowX==="visible")},locationCouldBeScrolled$1=function(cr,ar){var dr=ar;do{typeof ShadowRoot<"u"&&dr instanceof ShadowRoot&&(dr=dr.host);var fr=elementCouldBeScrolled$1(cr,dr);if(fr){var hr=getScrollVariables$1(cr,dr),pr=hr[1],mr=hr[2];if(pr>mr)return!0}dr=dr.parentNode}while(dr&&dr!==document.body);return!1},getVScrollVariables$1=function(cr){var ar=cr.scrollTop,dr=cr.scrollHeight,fr=cr.clientHeight;return[ar,dr,fr]},getHScrollVariables$1=function(cr){var ar=cr.scrollLeft,dr=cr.scrollWidth,fr=cr.clientWidth;return[ar,dr,fr]},elementCouldBeScrolled$1=function(cr,ar){return cr==="v"?elementCouldBeVScrolled$1(ar):elementCouldBeHScrolled$1(ar)},getScrollVariables$1=function(cr,ar){return cr==="v"?getVScrollVariables$1(ar):getHScrollVariables$1(ar)},getDirectionFactor$1=function(cr,ar){return cr==="h"&&ar==="rtl"?-1:1},handleScroll$1=function(cr,ar,dr,fr,hr){var pr=getDirectionFactor$1(cr,window.getComputedStyle(ar).direction),mr=pr*fr,gr=dr.target,yr=ar.contains(gr),xr=!1,wr=mr>0,br=0,Sr=0;do{var vr=getScrollVariables$1(cr,gr),Er=vr[0],Ar=vr[1],_r=vr[2],Cr=Ar-_r-pr*Er;(Er||Cr)&&elementCouldBeScrolled$1(cr,gr)&&(br+=Cr,Sr+=Er),gr=gr.parentNode}while(!yr&&gr!==document.body||yr&&(ar.contains(gr)||ar===gr));return(wr&&(hr&&br===0||!hr&&mr>br)||!wr&&(hr&&Sr===0||!hr&&-mr>Sr))&&(xr=!0),xr},getTouchXY$1=function(cr){return"changedTouches"in cr?[cr.changedTouches[0].clientX,cr.changedTouches[0].clientY]:[0,0]},getDeltaXY$1=function(cr){return[cr.deltaX,cr.deltaY]},extractRef$1=function(cr){return cr&&"current"in cr?cr.current:cr},deltaCompare$1=function(cr,ar){return cr[0]===ar[0]&&cr[1]===ar[1]},generateStyle$1=function(cr){return`
  .block-interactivity-`.concat(cr,` {pointer-events: none;}
  .allow-interactivity-`).concat(cr,` {pointer-events: all;}
`)},idCounter$1=0,lockStack$1=[];function RemoveScrollSideCar$1(cr){var ar=reactExports.useRef([]),dr=reactExports.useRef([0,0]),fr=reactExports.useRef(),hr=reactExports.useState(idCounter$1++)[0],pr=reactExports.useState(function(){return styleSingleton()})[0],mr=reactExports.useRef(cr);reactExports.useEffect(function(){mr.current=cr},[cr]),reactExports.useEffect(function(){if(cr.inert){document.body.classList.add("block-interactivity-".concat(hr));var Ar=__spreadArray$4([cr.lockRef.current],(cr.shards||[]).map(extractRef$1),!0).filter(Boolean);return Ar.forEach(function(_r){return _r.classList.add("allow-interactivity-".concat(hr))}),function(){document.body.classList.remove("block-interactivity-".concat(hr)),Ar.forEach(function(_r){return _r.classList.remove("allow-interactivity-".concat(hr))})}}},[cr.inert,cr.lockRef.current,cr.shards]);var gr=reactExports.useCallback(function(Ar,_r){if("touches"in Ar&&Ar.touches.length===2)return!mr.current.allowPinchZoom;var Cr=getTouchXY$1(Ar),kr=dr.current,Rr="deltaX"in Ar?Ar.deltaX:kr[0]-Cr[0],Ir="deltaY"in Ar?Ar.deltaY:kr[1]-Cr[1],Nr,Pr=Ar.target,Tr=Math.abs(Rr)>Math.abs(Ir)?"h":"v";if("touches"in Ar&&Tr==="h"&&Pr.type==="range")return!1;var Br=locationCouldBeScrolled$1(Tr,Pr);if(!Br)return!0;if(Br?Nr=Tr:(Nr=Tr==="v"?"h":"v",Br=locationCouldBeScrolled$1(Tr,Pr)),!Br)return!1;if(!fr.current&&"changedTouches"in Ar&&(Rr||Ir)&&(fr.current=Nr),!Nr)return!0;var Fr=fr.current||Nr;return handleScroll$1(Fr,_r,Ar,Fr==="h"?Rr:Ir,!0)},[]),yr=reactExports.useCallback(function(Ar){var _r=Ar;if(!(!lockStack$1.length||lockStack$1[lockStack$1.length-1]!==pr)){var Cr="deltaY"in _r?getDeltaXY$1(_r):getTouchXY$1(_r),kr=ar.current.filter(function(Nr){return Nr.name===_r.type&&Nr.target===_r.target&&deltaCompare$1(Nr.delta,Cr)})[0];if(kr&&kr.should){_r.preventDefault();return}if(!kr){var Rr=(mr.current.shards||[]).map(extractRef$1).filter(Boolean).filter(function(Nr){return Nr.contains(_r.target)}),Ir=Rr.length>0?gr(_r,Rr[0]):!mr.current.noIsolation;Ir&&_r.preventDefault()}}},[]),xr=reactExports.useCallback(function(Ar,_r,Cr,kr){var Rr={name:Ar,delta:_r,target:Cr,should:kr};ar.current.push(Rr),setTimeout(function(){ar.current=ar.current.filter(function(Ir){return Ir!==Rr})},1)},[]),wr=reactExports.useCallback(function(Ar){dr.current=getTouchXY$1(Ar),fr.current=void 0},[]),br=reactExports.useCallback(function(Ar){xr(Ar.type,getDeltaXY$1(Ar),Ar.target,gr(Ar,cr.lockRef.current))},[]),Sr=reactExports.useCallback(function(Ar){xr(Ar.type,getTouchXY$1(Ar),Ar.target,gr(Ar,cr.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack$1.push(pr),cr.setCallbacks({onScrollCapture:br,onWheelCapture:br,onTouchMoveCapture:Sr}),document.addEventListener("wheel",yr,nonPassive$1),document.addEventListener("touchmove",yr,nonPassive$1),document.addEventListener("touchstart",wr,nonPassive$1),function(){lockStack$1=lockStack$1.filter(function(Ar){return Ar!==pr}),document.removeEventListener("wheel",yr,nonPassive$1),document.removeEventListener("touchmove",yr,nonPassive$1),document.removeEventListener("touchstart",wr,nonPassive$1)}},[]);var vr=cr.removeScrollBar,Er=cr.inert;return reactExports.createElement(reactExports.Fragment,null,Er?reactExports.createElement(pr,{styles:generateStyle$1(hr)}):null,vr?reactExports.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}const SideCar$1=exportSidecar(effectCar$1,RemoveScrollSideCar$1);var ReactRemoveScroll$1=reactExports.forwardRef(function(cr,ar){return reactExports.createElement(RemoveScroll$2,__assign$2({},cr,{ref:ar,sideCar:SideCar$1}))});ReactRemoveScroll$1.classNames=RemoveScroll$2.classNames;const RemoveScroll$1=ReactRemoveScroll$1;function getVarName(cr){var ar=cr.match(/^var\((.*)\)$/);return ar?ar[1]:cr}function get(cr,ar){var dr=cr;for(var fr of ar){if(!(fr in dr))throw new Error("Path ".concat(ar.join(" -> ")," does not exist in object"));dr=dr[fr]}return dr}function walkObject(cr,ar){var dr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],fr=cr.constructor();for(var hr in cr){var pr=cr[hr],mr=[...dr,hr];typeof pr=="string"||typeof pr=="number"||pr==null?fr[hr]=ar(pr,mr):typeof pr=="object"&&!Array.isArray(pr)?fr[hr]=walkObject(pr,ar,mr):console.warn('Skipping invalid key "'.concat(mr.join("."),'". Should be a string, number, null or object. Received: "').concat(Array.isArray(pr)?"Array":typeof pr,'"'))}return fr}function assignInlineVars(cr,ar){var dr={};if(typeof ar=="object"){var fr=cr;walkObject(ar,(mr,gr)=>{var yr=get(fr,gr);dr[getVarName(yr)]=String(mr)})}else{var hr=cr;for(var pr in hr)dr[getVarName(pr)]=hr[pr]}return Object.defineProperty(dr,"toString",{value:function(){return Object.keys(this).map(gr=>"".concat(gr,":").concat(this[gr])).join(";")},writable:!1}),dr}var browser$2={},canPromise$1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},qrcode={},utils$h={};let toSJISFunction;const CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$h.getSymbolSize=function(ar){if(!ar)throw new Error('"version" cannot be null or undefined');if(ar<1||ar>40)throw new Error('"version" should be in range from 1 to 40');return ar*4+17};utils$h.getSymbolTotalCodewords=function(ar){return CODEWORDS_COUNT[ar]};utils$h.getBCHDigit=function(cr){let ar=0;for(;cr!==0;)ar++,cr>>>=1;return ar};utils$h.setToSJISFunction=function(ar){if(typeof ar!="function")throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=ar};utils$h.isKanjiModeEnabled=function(){return typeof toSJISFunction<"u"};utils$h.toSJIS=function(ar){return toSJISFunction(ar)};var errorCorrectionLevel={};(function(cr){cr.L={bit:1},cr.M={bit:0},cr.Q={bit:3},cr.H={bit:2};function ar(dr){if(typeof dr!="string")throw new Error("Param is not a string");switch(dr.toLowerCase()){case"l":case"low":return cr.L;case"m":case"medium":return cr.M;case"q":case"quartile":return cr.Q;case"h":case"high":return cr.H;default:throw new Error("Unknown EC Level: "+dr)}}cr.isValid=function(fr){return fr&&typeof fr.bit<"u"&&fr.bit>=0&&fr.bit<4},cr.from=function(fr,hr){if(cr.isValid(fr))return fr;try{return ar(fr)}catch{return hr}}})(errorCorrectionLevel);function BitBuffer$1(){this.buffer=[],this.length=0}BitBuffer$1.prototype={get:function(cr){const ar=Math.floor(cr/8);return(this.buffer[ar]>>>7-cr%8&1)===1},put:function(cr,ar){for(let dr=0;dr<ar;dr++)this.putBit((cr>>>ar-dr-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(cr){const ar=Math.floor(this.length/8);this.buffer.length<=ar&&this.buffer.push(0),cr&&(this.buffer[ar]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1;function BitMatrix$1(cr){if(!cr||cr<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=cr,this.data=new Uint8Array(cr*cr),this.reservedBit=new Uint8Array(cr*cr)}BitMatrix$1.prototype.set=function(cr,ar,dr,fr){const hr=cr*this.size+ar;this.data[hr]=dr,fr&&(this.reservedBit[hr]=!0)};BitMatrix$1.prototype.get=function(cr,ar){return this.data[cr*this.size+ar]};BitMatrix$1.prototype.xor=function(cr,ar,dr){this.data[cr*this.size+ar]^=dr};BitMatrix$1.prototype.isReserved=function(cr,ar){return this.reservedBit[cr*this.size+ar]};var bitMatrix=BitMatrix$1,alignmentPattern={};(function(cr){const ar=utils$h.getSymbolSize;cr.getRowColCoords=function(fr){if(fr===1)return[];const hr=Math.floor(fr/7)+2,pr=ar(fr),mr=pr===145?26:Math.ceil((pr-13)/(2*hr-2))*2,gr=[pr-7];for(let yr=1;yr<hr-1;yr++)gr[yr]=gr[yr-1]-mr;return gr.push(6),gr.reverse()},cr.getPositions=function(fr){const hr=[],pr=cr.getRowColCoords(fr),mr=pr.length;for(let gr=0;gr<mr;gr++)for(let yr=0;yr<mr;yr++)gr===0&&yr===0||gr===0&&yr===mr-1||gr===mr-1&&yr===0||hr.push([pr[gr],pr[yr]]);return hr}})(alignmentPattern);var finderPattern={};const getSymbolSize=utils$h.getSymbolSize,FINDER_PATTERN_SIZE=7;finderPattern.getPositions=function(ar){const dr=getSymbolSize(ar);return[[0,0],[dr-FINDER_PATTERN_SIZE,0],[0,dr-FINDER_PATTERN_SIZE]]};var maskPattern={};(function(cr){cr.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const ar={N1:3,N2:3,N3:40,N4:10};cr.isValid=function(hr){return hr!=null&&hr!==""&&!isNaN(hr)&&hr>=0&&hr<=7},cr.from=function(hr){return cr.isValid(hr)?parseInt(hr,10):void 0},cr.getPenaltyN1=function(hr){const pr=hr.size;let mr=0,gr=0,yr=0,xr=null,wr=null;for(let br=0;br<pr;br++){gr=yr=0,xr=wr=null;for(let Sr=0;Sr<pr;Sr++){let vr=hr.get(br,Sr);vr===xr?gr++:(gr>=5&&(mr+=ar.N1+(gr-5)),xr=vr,gr=1),vr=hr.get(Sr,br),vr===wr?yr++:(yr>=5&&(mr+=ar.N1+(yr-5)),wr=vr,yr=1)}gr>=5&&(mr+=ar.N1+(gr-5)),yr>=5&&(mr+=ar.N1+(yr-5))}return mr},cr.getPenaltyN2=function(hr){const pr=hr.size;let mr=0;for(let gr=0;gr<pr-1;gr++)for(let yr=0;yr<pr-1;yr++){const xr=hr.get(gr,yr)+hr.get(gr,yr+1)+hr.get(gr+1,yr)+hr.get(gr+1,yr+1);(xr===4||xr===0)&&mr++}return mr*ar.N2},cr.getPenaltyN3=function(hr){const pr=hr.size;let mr=0,gr=0,yr=0;for(let xr=0;xr<pr;xr++){gr=yr=0;for(let wr=0;wr<pr;wr++)gr=gr<<1&2047|hr.get(xr,wr),wr>=10&&(gr===1488||gr===93)&&mr++,yr=yr<<1&2047|hr.get(wr,xr),wr>=10&&(yr===1488||yr===93)&&mr++}return mr*ar.N3},cr.getPenaltyN4=function(hr){let pr=0;const mr=hr.data.length;for(let yr=0;yr<mr;yr++)pr+=hr.data[yr];return Math.abs(Math.ceil(pr*100/mr/5)-10)*ar.N4};function dr(fr,hr,pr){switch(fr){case cr.Patterns.PATTERN000:return(hr+pr)%2===0;case cr.Patterns.PATTERN001:return hr%2===0;case cr.Patterns.PATTERN010:return pr%3===0;case cr.Patterns.PATTERN011:return(hr+pr)%3===0;case cr.Patterns.PATTERN100:return(Math.floor(hr/2)+Math.floor(pr/3))%2===0;case cr.Patterns.PATTERN101:return hr*pr%2+hr*pr%3===0;case cr.Patterns.PATTERN110:return(hr*pr%2+hr*pr%3)%2===0;case cr.Patterns.PATTERN111:return(hr*pr%3+(hr+pr)%2)%2===0;default:throw new Error("bad maskPattern:"+fr)}}cr.applyMask=function(hr,pr){const mr=pr.size;for(let gr=0;gr<mr;gr++)for(let yr=0;yr<mr;yr++)pr.isReserved(yr,gr)||pr.xor(yr,gr,dr(hr,yr,gr))},cr.getBestMask=function(hr,pr){const mr=Object.keys(cr.Patterns).length;let gr=0,yr=1/0;for(let xr=0;xr<mr;xr++){pr(xr),cr.applyMask(xr,hr);const wr=cr.getPenaltyN1(hr)+cr.getPenaltyN2(hr)+cr.getPenaltyN3(hr)+cr.getPenaltyN4(hr);cr.applyMask(xr,hr),wr<yr&&(yr=wr,gr=xr)}return gr}})(maskPattern);var errorCorrectionCode={};const ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function(ar,dr){switch(dr){case ECLevel$1.L:return EC_BLOCKS_TABLE[(ar-1)*4+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[(ar-1)*4+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[(ar-1)*4+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[(ar-1)*4+3];default:return}};errorCorrectionCode.getTotalCodewordsCount=function(ar,dr){switch(dr){case ECLevel$1.L:return EC_CODEWORDS_TABLE[(ar-1)*4+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[(ar-1)*4+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[(ar-1)*4+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[(ar-1)*4+3];default:return}};var polynomial={},galoisField={};const EXP_TABLE=new Uint8Array(512),LOG_TABLE=new Uint8Array(256);(function(){let ar=1;for(let dr=0;dr<255;dr++)EXP_TABLE[dr]=ar,LOG_TABLE[ar]=dr,ar<<=1,ar&256&&(ar^=285);for(let dr=255;dr<512;dr++)EXP_TABLE[dr]=EXP_TABLE[dr-255]})();galoisField.log=function(ar){if(ar<1)throw new Error("log("+ar+")");return LOG_TABLE[ar]};galoisField.exp=function(ar){return EXP_TABLE[ar]};galoisField.mul=function(ar,dr){return ar===0||dr===0?0:EXP_TABLE[LOG_TABLE[ar]+LOG_TABLE[dr]]};(function(cr){const ar=galoisField;cr.mul=function(fr,hr){const pr=new Uint8Array(fr.length+hr.length-1);for(let mr=0;mr<fr.length;mr++)for(let gr=0;gr<hr.length;gr++)pr[mr+gr]^=ar.mul(fr[mr],hr[gr]);return pr},cr.mod=function(fr,hr){let pr=new Uint8Array(fr);for(;pr.length-hr.length>=0;){const mr=pr[0];for(let yr=0;yr<hr.length;yr++)pr[yr]^=ar.mul(hr[yr],mr);let gr=0;for(;gr<pr.length&&pr[gr]===0;)gr++;pr=pr.slice(gr)}return pr},cr.generateECPolynomial=function(fr){let hr=new Uint8Array([1]);for(let pr=0;pr<fr;pr++)hr=cr.mul(hr,new Uint8Array([1,ar.exp(pr)]));return hr}})(polynomial);const Polynomial=polynomial;function ReedSolomonEncoder$1(cr){this.genPoly=void 0,this.degree=cr,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function(ar){this.degree=ar,this.genPoly=Polynomial.generateECPolynomial(this.degree)};ReedSolomonEncoder$1.prototype.encode=function(ar){if(!this.genPoly)throw new Error("Encoder not initialized");const dr=new Uint8Array(ar.length+this.degree);dr.set(ar);const fr=Polynomial.mod(dr,this.genPoly),hr=this.degree-fr.length;if(hr>0){const pr=new Uint8Array(this.degree);return pr.set(fr,hr),pr}return fr};var reedSolomonEncoder=ReedSolomonEncoder$1,version$k={},mode={},versionCheck={};versionCheck.isValid=function(ar){return!isNaN(ar)&&ar>=1&&ar<=40};var regex={};const numeric="[0-9]+",alphanumeric="[A-Z $%*+\\-./:]+";let kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");const byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+`)(?:.|[\r
]))+`;regex.KANJI=new RegExp(kanji,"g");regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");regex.BYTE=new RegExp(byte,"g");regex.NUMERIC=new RegExp(numeric,"g");regex.ALPHANUMERIC=new RegExp(alphanumeric,"g");const TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^"+numeric+"$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function(ar){return TEST_KANJI.test(ar)};regex.testNumeric=function(ar){return TEST_NUMERIC.test(ar)};regex.testAlphanumeric=function(ar){return TEST_ALPHANUMERIC.test(ar)};(function(cr){const ar=versionCheck,dr=regex;cr.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},cr.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},cr.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},cr.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},cr.MIXED={bit:-1},cr.getCharCountIndicator=function(pr,mr){if(!pr.ccBits)throw new Error("Invalid mode: "+pr);if(!ar.isValid(mr))throw new Error("Invalid version: "+mr);return mr>=1&&mr<10?pr.ccBits[0]:mr<27?pr.ccBits[1]:pr.ccBits[2]},cr.getBestModeForData=function(pr){return dr.testNumeric(pr)?cr.NUMERIC:dr.testAlphanumeric(pr)?cr.ALPHANUMERIC:dr.testKanji(pr)?cr.KANJI:cr.BYTE},cr.toString=function(pr){if(pr&&pr.id)return pr.id;throw new Error("Invalid mode")},cr.isValid=function(pr){return pr&&pr.bit&&pr.ccBits};function fr(hr){if(typeof hr!="string")throw new Error("Param is not a string");switch(hr.toLowerCase()){case"numeric":return cr.NUMERIC;case"alphanumeric":return cr.ALPHANUMERIC;case"kanji":return cr.KANJI;case"byte":return cr.BYTE;default:throw new Error("Unknown mode: "+hr)}}cr.from=function(pr,mr){if(cr.isValid(pr))return pr;try{return fr(pr)}catch{return mr}}})(mode);(function(cr){const ar=utils$h,dr=errorCorrectionCode,fr=errorCorrectionLevel,hr=mode,pr=versionCheck,mr=7973,gr=ar.getBCHDigit(mr);function yr(Sr,vr,Er){for(let Ar=1;Ar<=40;Ar++)if(vr<=cr.getCapacity(Ar,Er,Sr))return Ar}function xr(Sr,vr){return hr.getCharCountIndicator(Sr,vr)+4}function wr(Sr,vr){let Er=0;return Sr.forEach(function(Ar){const _r=xr(Ar.mode,vr);Er+=_r+Ar.getBitsLength()}),Er}function br(Sr,vr){for(let Er=1;Er<=40;Er++)if(wr(Sr,Er)<=cr.getCapacity(Er,vr,hr.MIXED))return Er}cr.from=function(vr,Er){return pr.isValid(vr)?parseInt(vr,10):Er},cr.getCapacity=function(vr,Er,Ar){if(!pr.isValid(vr))throw new Error("Invalid QR Code version");typeof Ar>"u"&&(Ar=hr.BYTE);const _r=ar.getSymbolTotalCodewords(vr),Cr=dr.getTotalCodewordsCount(vr,Er),kr=(_r-Cr)*8;if(Ar===hr.MIXED)return kr;const Rr=kr-xr(Ar,vr);switch(Ar){case hr.NUMERIC:return Math.floor(Rr/10*3);case hr.ALPHANUMERIC:return Math.floor(Rr/11*2);case hr.KANJI:return Math.floor(Rr/13);case hr.BYTE:default:return Math.floor(Rr/8)}},cr.getBestVersionForData=function(vr,Er){let Ar;const _r=fr.from(Er,fr.M);if(Array.isArray(vr)){if(vr.length>1)return br(vr,_r);if(vr.length===0)return 1;Ar=vr[0]}else Ar=vr;return yr(Ar.mode,Ar.getLength(),_r)},cr.getEncodedBits=function(vr){if(!pr.isValid(vr)||vr<7)throw new Error("Invalid QR Code version");let Er=vr<<12;for(;ar.getBCHDigit(Er)-gr>=0;)Er^=mr<<ar.getBCHDigit(Er)-gr;return vr<<12|Er}})(version$k);var formatInfo={};const Utils$3=utils$h,G15=1335,G15_MASK=21522,G15_BCH=Utils$3.getBCHDigit(G15);formatInfo.getEncodedBits=function(ar,dr){const fr=ar.bit<<3|dr;let hr=fr<<10;for(;Utils$3.getBCHDigit(hr)-G15_BCH>=0;)hr^=G15<<Utils$3.getBCHDigit(hr)-G15_BCH;return(fr<<10|hr)^G15_MASK};var segments={};const Mode$4=mode;function NumericData(cr){this.mode=Mode$4.NUMERIC,this.data=cr.toString()}NumericData.getBitsLength=function(ar){return 10*Math.floor(ar/3)+(ar%3?ar%3*3+1:0)};NumericData.prototype.getLength=function(){return this.data.length};NumericData.prototype.getBitsLength=function(){return NumericData.getBitsLength(this.data.length)};NumericData.prototype.write=function(ar){let dr,fr,hr;for(dr=0;dr+3<=this.data.length;dr+=3)fr=this.data.substr(dr,3),hr=parseInt(fr,10),ar.put(hr,10);const pr=this.data.length-dr;pr>0&&(fr=this.data.substr(dr),hr=parseInt(fr,10),ar.put(hr,pr*3+1))};var numericData=NumericData;const Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(cr){this.mode=Mode$3.ALPHANUMERIC,this.data=cr}AlphanumericData.getBitsLength=function(ar){return 11*Math.floor(ar/2)+6*(ar%2)};AlphanumericData.prototype.getLength=function(){return this.data.length};AlphanumericData.prototype.getBitsLength=function(){return AlphanumericData.getBitsLength(this.data.length)};AlphanumericData.prototype.write=function(ar){let dr;for(dr=0;dr+2<=this.data.length;dr+=2){let fr=ALPHA_NUM_CHARS.indexOf(this.data[dr])*45;fr+=ALPHA_NUM_CHARS.indexOf(this.data[dr+1]),ar.put(fr,11)}this.data.length%2&&ar.put(ALPHA_NUM_CHARS.indexOf(this.data[dr]),6)};var alphanumericData=AlphanumericData,encodeUtf8$1=function(ar){for(var dr=[],fr=ar.length,hr=0;hr<fr;hr++){var pr=ar.charCodeAt(hr);if(pr>=55296&&pr<=56319&&fr>hr+1){var mr=ar.charCodeAt(hr+1);mr>=56320&&mr<=57343&&(pr=(pr-55296)*1024+mr-56320+65536,hr+=1)}if(pr<128){dr.push(pr);continue}if(pr<2048){dr.push(pr>>6|192),dr.push(pr&63|128);continue}if(pr<55296||pr>=57344&&pr<65536){dr.push(pr>>12|224),dr.push(pr>>6&63|128),dr.push(pr&63|128);continue}if(pr>=65536&&pr<=1114111){dr.push(pr>>18|240),dr.push(pr>>12&63|128),dr.push(pr>>6&63|128),dr.push(pr&63|128);continue}dr.push(239,191,189)}return new Uint8Array(dr).buffer};const encodeUtf8=encodeUtf8$1,Mode$2=mode;function ByteData(cr){this.mode=Mode$2.BYTE,this.data=new Uint8Array(encodeUtf8(cr))}ByteData.getBitsLength=function(ar){return ar*8};ByteData.prototype.getLength=function(){return this.data.length};ByteData.prototype.getBitsLength=function(){return ByteData.getBitsLength(this.data.length)};ByteData.prototype.write=function(cr){for(let ar=0,dr=this.data.length;ar<dr;ar++)cr.put(this.data[ar],8)};var byteData=ByteData;const Mode$1=mode,Utils$2=utils$h;function KanjiData(cr){this.mode=Mode$1.KANJI,this.data=cr}KanjiData.getBitsLength=function(ar){return ar*13};KanjiData.prototype.getLength=function(){return this.data.length};KanjiData.prototype.getBitsLength=function(){return KanjiData.getBitsLength(this.data.length)};KanjiData.prototype.write=function(cr){let ar;for(ar=0;ar<this.data.length;ar++){let dr=Utils$2.toSJIS(this.data[ar]);if(dr>=33088&&dr<=40956)dr-=33088;else if(dr>=57408&&dr<=60351)dr-=49472;else throw new Error("Invalid SJIS character: "+this.data[ar]+`
Make sure your charset is UTF-8`);dr=(dr>>>8&255)*192+(dr&255),cr.put(dr,13)}};var kanjiData=KanjiData,dijkstra={exports:{}};(function(cr){var ar={single_source_shortest_paths:function(dr,fr,hr){var pr={},mr={};mr[fr]=0;var gr=ar.PriorityQueue.make();gr.push(fr,0);for(var yr,xr,wr,br,Sr,vr,Er,Ar,_r;!gr.empty();){yr=gr.pop(),xr=yr.value,br=yr.cost,Sr=dr[xr]||{};for(wr in Sr)Sr.hasOwnProperty(wr)&&(vr=Sr[wr],Er=br+vr,Ar=mr[wr],_r=typeof mr[wr]>"u",(_r||Ar>Er)&&(mr[wr]=Er,gr.push(wr,Er),pr[wr]=xr))}if(typeof hr<"u"&&typeof mr[hr]>"u"){var Cr=["Could not find a path from ",fr," to ",hr,"."].join("");throw new Error(Cr)}return pr},extract_shortest_path_from_predecessor_list:function(dr,fr){for(var hr=[],pr=fr;pr;)hr.push(pr),dr[pr],pr=dr[pr];return hr.reverse(),hr},find_path:function(dr,fr,hr){var pr=ar.single_source_shortest_paths(dr,fr,hr);return ar.extract_shortest_path_from_predecessor_list(pr,hr)},PriorityQueue:{make:function(dr){var fr=ar.PriorityQueue,hr={},pr;dr=dr||{};for(pr in fr)fr.hasOwnProperty(pr)&&(hr[pr]=fr[pr]);return hr.queue=[],hr.sorter=dr.sorter||fr.default_sorter,hr},default_sorter:function(dr,fr){return dr.cost-fr.cost},push:function(dr,fr){var hr={value:dr,cost:fr};this.queue.push(hr),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};cr.exports=ar})(dijkstra);var dijkstraExports=dijkstra.exports;(function(cr){const ar=mode,dr=numericData,fr=alphanumericData,hr=byteData,pr=kanjiData,mr=regex,gr=utils$h,yr=dijkstraExports;function xr(Cr){return unescape(encodeURIComponent(Cr)).length}function wr(Cr,kr,Rr){const Ir=[];let Nr;for(;(Nr=Cr.exec(Rr))!==null;)Ir.push({data:Nr[0],index:Nr.index,mode:kr,length:Nr[0].length});return Ir}function br(Cr){const kr=wr(mr.NUMERIC,ar.NUMERIC,Cr),Rr=wr(mr.ALPHANUMERIC,ar.ALPHANUMERIC,Cr);let Ir,Nr;return gr.isKanjiModeEnabled()?(Ir=wr(mr.BYTE,ar.BYTE,Cr),Nr=wr(mr.KANJI,ar.KANJI,Cr)):(Ir=wr(mr.BYTE_KANJI,ar.BYTE,Cr),Nr=[]),kr.concat(Rr,Ir,Nr).sort(function(Tr,Br){return Tr.index-Br.index}).map(function(Tr){return{data:Tr.data,mode:Tr.mode,length:Tr.length}})}function Sr(Cr,kr){switch(kr){case ar.NUMERIC:return dr.getBitsLength(Cr);case ar.ALPHANUMERIC:return fr.getBitsLength(Cr);case ar.KANJI:return pr.getBitsLength(Cr);case ar.BYTE:return hr.getBitsLength(Cr)}}function vr(Cr){return Cr.reduce(function(kr,Rr){const Ir=kr.length-1>=0?kr[kr.length-1]:null;return Ir&&Ir.mode===Rr.mode?(kr[kr.length-1].data+=Rr.data,kr):(kr.push(Rr),kr)},[])}function Er(Cr){const kr=[];for(let Rr=0;Rr<Cr.length;Rr++){const Ir=Cr[Rr];switch(Ir.mode){case ar.NUMERIC:kr.push([Ir,{data:Ir.data,mode:ar.ALPHANUMERIC,length:Ir.length},{data:Ir.data,mode:ar.BYTE,length:Ir.length}]);break;case ar.ALPHANUMERIC:kr.push([Ir,{data:Ir.data,mode:ar.BYTE,length:Ir.length}]);break;case ar.KANJI:kr.push([Ir,{data:Ir.data,mode:ar.BYTE,length:xr(Ir.data)}]);break;case ar.BYTE:kr.push([{data:Ir.data,mode:ar.BYTE,length:xr(Ir.data)}])}}return kr}function Ar(Cr,kr){const Rr={},Ir={start:{}};let Nr=["start"];for(let Pr=0;Pr<Cr.length;Pr++){const Tr=Cr[Pr],Br=[];for(let Fr=0;Fr<Tr.length;Fr++){const jr=Tr[Fr],Ur=""+Pr+Fr;Br.push(Ur),Rr[Ur]={node:jr,lastCount:0},Ir[Ur]={};for(let qr=0;qr<Nr.length;qr++){const Hr=Nr[qr];Rr[Hr]&&Rr[Hr].node.mode===jr.mode?(Ir[Hr][Ur]=Sr(Rr[Hr].lastCount+jr.length,jr.mode)-Sr(Rr[Hr].lastCount,jr.mode),Rr[Hr].lastCount+=jr.length):(Rr[Hr]&&(Rr[Hr].lastCount=jr.length),Ir[Hr][Ur]=Sr(jr.length,jr.mode)+4+ar.getCharCountIndicator(jr.mode,kr))}}Nr=Br}for(let Pr=0;Pr<Nr.length;Pr++)Ir[Nr[Pr]].end=0;return{map:Ir,table:Rr}}function _r(Cr,kr){let Rr;const Ir=ar.getBestModeForData(Cr);if(Rr=ar.from(kr,Ir),Rr!==ar.BYTE&&Rr.bit<Ir.bit)throw new Error('"'+Cr+'" cannot be encoded with mode '+ar.toString(Rr)+`.
 Suggested mode is: `+ar.toString(Ir));switch(Rr===ar.KANJI&&!gr.isKanjiModeEnabled()&&(Rr=ar.BYTE),Rr){case ar.NUMERIC:return new dr(Cr);case ar.ALPHANUMERIC:return new fr(Cr);case ar.KANJI:return new pr(Cr);case ar.BYTE:return new hr(Cr)}}cr.fromArray=function(kr){return kr.reduce(function(Rr,Ir){return typeof Ir=="string"?Rr.push(_r(Ir,null)):Ir.data&&Rr.push(_r(Ir.data,Ir.mode)),Rr},[])},cr.fromString=function(kr,Rr){const Ir=br(kr,gr.isKanjiModeEnabled()),Nr=Er(Ir),Pr=Ar(Nr,Rr),Tr=yr.find_path(Pr.map,"start","end"),Br=[];for(let Fr=1;Fr<Tr.length-1;Fr++)Br.push(Pr.table[Tr[Fr]].node);return cr.fromArray(vr(Br))},cr.rawSplit=function(kr){return cr.fromArray(br(kr,gr.isKanjiModeEnabled()))}})(segments);const Utils$1=utils$h,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version$k,FormatInfo=formatInfo,Mode=mode,Segments=segments;function setupFinderPattern(cr,ar){const dr=cr.size,fr=FinderPattern.getPositions(ar);for(let hr=0;hr<fr.length;hr++){const pr=fr[hr][0],mr=fr[hr][1];for(let gr=-1;gr<=7;gr++)if(!(pr+gr<=-1||dr<=pr+gr))for(let yr=-1;yr<=7;yr++)mr+yr<=-1||dr<=mr+yr||(gr>=0&&gr<=6&&(yr===0||yr===6)||yr>=0&&yr<=6&&(gr===0||gr===6)||gr>=2&&gr<=4&&yr>=2&&yr<=4?cr.set(pr+gr,mr+yr,!0,!0):cr.set(pr+gr,mr+yr,!1,!0))}}function setupTimingPattern(cr){const ar=cr.size;for(let dr=8;dr<ar-8;dr++){const fr=dr%2===0;cr.set(dr,6,fr,!0),cr.set(6,dr,fr,!0)}}function setupAlignmentPattern(cr,ar){const dr=AlignmentPattern.getPositions(ar);for(let fr=0;fr<dr.length;fr++){const hr=dr[fr][0],pr=dr[fr][1];for(let mr=-2;mr<=2;mr++)for(let gr=-2;gr<=2;gr++)mr===-2||mr===2||gr===-2||gr===2||mr===0&&gr===0?cr.set(hr+mr,pr+gr,!0,!0):cr.set(hr+mr,pr+gr,!1,!0)}}function setupVersionInfo(cr,ar){const dr=cr.size,fr=Version.getEncodedBits(ar);let hr,pr,mr;for(let gr=0;gr<18;gr++)hr=Math.floor(gr/3),pr=gr%3+dr-8-3,mr=(fr>>gr&1)===1,cr.set(hr,pr,mr,!0),cr.set(pr,hr,mr,!0)}function setupFormatInfo(cr,ar,dr){const fr=cr.size,hr=FormatInfo.getEncodedBits(ar,dr);let pr,mr;for(pr=0;pr<15;pr++)mr=(hr>>pr&1)===1,pr<6?cr.set(pr,8,mr,!0):pr<8?cr.set(pr+1,8,mr,!0):cr.set(fr-15+pr,8,mr,!0),pr<8?cr.set(8,fr-pr-1,mr,!0):pr<9?cr.set(8,15-pr-1+1,mr,!0):cr.set(8,15-pr-1,mr,!0);cr.set(fr-8,8,1,!0)}function setupData(cr,ar){const dr=cr.size;let fr=-1,hr=dr-1,pr=7,mr=0;for(let gr=dr-1;gr>0;gr-=2)for(gr===6&&gr--;;){for(let yr=0;yr<2;yr++)if(!cr.isReserved(hr,gr-yr)){let xr=!1;mr<ar.length&&(xr=(ar[mr]>>>pr&1)===1),cr.set(hr,gr-yr,xr),pr--,pr===-1&&(mr++,pr=7)}if(hr+=fr,hr<0||dr<=hr){hr-=fr,fr=-fr;break}}}function createData(cr,ar,dr){const fr=new BitBuffer;dr.forEach(function(yr){fr.put(yr.mode.bit,4),fr.put(yr.getLength(),Mode.getCharCountIndicator(yr.mode,cr)),yr.write(fr)});const hr=Utils$1.getSymbolTotalCodewords(cr),pr=ECCode.getTotalCodewordsCount(cr,ar),mr=(hr-pr)*8;for(fr.getLengthInBits()+4<=mr&&fr.put(0,4);fr.getLengthInBits()%8!==0;)fr.putBit(0);const gr=(mr-fr.getLengthInBits())/8;for(let yr=0;yr<gr;yr++)fr.put(yr%2?17:236,8);return createCodewords(fr,cr,ar)}function createCodewords(cr,ar,dr){const fr=Utils$1.getSymbolTotalCodewords(ar),hr=ECCode.getTotalCodewordsCount(ar,dr),pr=fr-hr,mr=ECCode.getBlocksCount(ar,dr),gr=fr%mr,yr=mr-gr,xr=Math.floor(fr/mr),wr=Math.floor(pr/mr),br=wr+1,Sr=xr-wr,vr=new ReedSolomonEncoder(Sr);let Er=0;const Ar=new Array(mr),_r=new Array(mr);let Cr=0;const kr=new Uint8Array(cr.buffer);for(let Tr=0;Tr<mr;Tr++){const Br=Tr<yr?wr:br;Ar[Tr]=kr.slice(Er,Er+Br),_r[Tr]=vr.encode(Ar[Tr]),Er+=Br,Cr=Math.max(Cr,Br)}const Rr=new Uint8Array(fr);let Ir=0,Nr,Pr;for(Nr=0;Nr<Cr;Nr++)for(Pr=0;Pr<mr;Pr++)Nr<Ar[Pr].length&&(Rr[Ir++]=Ar[Pr][Nr]);for(Nr=0;Nr<Sr;Nr++)for(Pr=0;Pr<mr;Pr++)Rr[Ir++]=_r[Pr][Nr];return Rr}function createSymbol(cr,ar,dr,fr){let hr;if(Array.isArray(cr))hr=Segments.fromArray(cr);else if(typeof cr=="string"){let xr=ar;if(!xr){const wr=Segments.rawSplit(cr);xr=Version.getBestVersionForData(wr,dr)}hr=Segments.fromString(cr,xr||40)}else throw new Error("Invalid data");const pr=Version.getBestVersionForData(hr,dr);if(!pr)throw new Error("The amount of data is too big to be stored in a QR Code");if(!ar)ar=pr;else if(ar<pr)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+pr+`.
`);const mr=createData(ar,dr,hr),gr=Utils$1.getSymbolSize(ar),yr=new BitMatrix(gr);return setupFinderPattern(yr,ar),setupTimingPattern(yr),setupAlignmentPattern(yr,ar),setupFormatInfo(yr,dr,0),ar>=7&&setupVersionInfo(yr,ar),setupData(yr,mr),isNaN(fr)&&(fr=MaskPattern.getBestMask(yr,setupFormatInfo.bind(null,yr,dr))),MaskPattern.applyMask(fr,yr),setupFormatInfo(yr,dr,fr),{modules:yr,version:ar,errorCorrectionLevel:dr,maskPattern:fr,segments:hr}}qrcode.create=function(ar,dr){if(typeof ar>"u"||ar==="")throw new Error("No input text");let fr=ECLevel.M,hr,pr;return typeof dr<"u"&&(fr=ECLevel.from(dr.errorCorrectionLevel,ECLevel.M),hr=Version.from(dr.version),pr=MaskPattern.from(dr.maskPattern),dr.toSJISFunc&&Utils$1.setToSJISFunction(dr.toSJISFunc)),createSymbol(ar,hr,fr,pr)};var canvas={},utils$g={};(function(cr){function ar(dr){if(typeof dr=="number"&&(dr=dr.toString()),typeof dr!="string")throw new Error("Color should be defined as hex string");let fr=dr.slice().replace("#","").split("");if(fr.length<3||fr.length===5||fr.length>8)throw new Error("Invalid hex color: "+dr);(fr.length===3||fr.length===4)&&(fr=Array.prototype.concat.apply([],fr.map(function(pr){return[pr,pr]}))),fr.length===6&&fr.push("F","F");const hr=parseInt(fr.join(""),16);return{r:hr>>24&255,g:hr>>16&255,b:hr>>8&255,a:hr&255,hex:"#"+fr.slice(0,6).join("")}}cr.getOptions=function(fr){fr||(fr={}),fr.color||(fr.color={});const hr=typeof fr.margin>"u"||fr.margin===null||fr.margin<0?4:fr.margin,pr=fr.width&&fr.width>=21?fr.width:void 0,mr=fr.scale||4;return{width:pr,scale:pr?4:mr,margin:hr,color:{dark:ar(fr.color.dark||"#000000ff"),light:ar(fr.color.light||"#ffffffff")},type:fr.type,rendererOpts:fr.rendererOpts||{}}},cr.getScale=function(fr,hr){return hr.width&&hr.width>=fr+hr.margin*2?hr.width/(fr+hr.margin*2):hr.scale},cr.getImageWidth=function(fr,hr){const pr=cr.getScale(fr,hr);return Math.floor((fr+hr.margin*2)*pr)},cr.qrToImageData=function(fr,hr,pr){const mr=hr.modules.size,gr=hr.modules.data,yr=cr.getScale(mr,pr),xr=Math.floor((mr+pr.margin*2)*yr),wr=pr.margin*yr,br=[pr.color.light,pr.color.dark];for(let Sr=0;Sr<xr;Sr++)for(let vr=0;vr<xr;vr++){let Er=(Sr*xr+vr)*4,Ar=pr.color.light;if(Sr>=wr&&vr>=wr&&Sr<xr-wr&&vr<xr-wr){const _r=Math.floor((Sr-wr)/yr),Cr=Math.floor((vr-wr)/yr);Ar=br[gr[_r*mr+Cr]?1:0]}fr[Er++]=Ar.r,fr[Er++]=Ar.g,fr[Er++]=Ar.b,fr[Er]=Ar.a}}})(utils$g);(function(cr){const ar=utils$g;function dr(hr,pr,mr){hr.clearRect(0,0,pr.width,pr.height),pr.style||(pr.style={}),pr.height=mr,pr.width=mr,pr.style.height=mr+"px",pr.style.width=mr+"px"}function fr(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}cr.render=function(pr,mr,gr){let yr=gr,xr=mr;typeof yr>"u"&&(!mr||!mr.getContext)&&(yr=mr,mr=void 0),mr||(xr=fr()),yr=ar.getOptions(yr);const wr=ar.getImageWidth(pr.modules.size,yr),br=xr.getContext("2d"),Sr=br.createImageData(wr,wr);return ar.qrToImageData(Sr.data,pr,yr),dr(br,xr,wr),br.putImageData(Sr,0,0),xr},cr.renderToDataURL=function(pr,mr,gr){let yr=gr;typeof yr>"u"&&(!mr||!mr.getContext)&&(yr=mr,mr=void 0),yr||(yr={});const xr=cr.render(pr,mr,yr),wr=yr.type||"image/png",br=yr.rendererOpts||{};return xr.toDataURL(wr,br.quality)}})(canvas);var svgTag={};const Utils=utils$g;function getColorAttrib(cr,ar){const dr=cr.a/255,fr=ar+'="'+cr.hex+'"';return dr<1?fr+" "+ar+'-opacity="'+dr.toFixed(2).slice(1)+'"':fr}function svgCmd(cr,ar,dr){let fr=cr+ar;return typeof dr<"u"&&(fr+=" "+dr),fr}function qrToPath(cr,ar,dr){let fr="",hr=0,pr=!1,mr=0;for(let gr=0;gr<cr.length;gr++){const yr=Math.floor(gr%ar),xr=Math.floor(gr/ar);!yr&&!pr&&(pr=!0),cr[gr]?(mr++,gr>0&&yr>0&&cr[gr-1]||(fr+=pr?svgCmd("M",yr+dr,.5+xr+dr):svgCmd("m",hr,0),hr=0,pr=!1),yr+1<ar&&cr[gr+1]||(fr+=svgCmd("h",mr),mr=0)):hr++}return fr}svgTag.render=function(ar,dr,fr){const hr=Utils.getOptions(dr),pr=ar.modules.size,mr=ar.modules.data,gr=pr+hr.margin*2,yr=hr.color.light.a?"<path "+getColorAttrib(hr.color.light,"fill")+' d="M0 0h'+gr+"v"+gr+'H0z"/>':"",xr="<path "+getColorAttrib(hr.color.dark,"stroke")+' d="'+qrToPath(mr,pr,hr.margin)+'"/>',wr='viewBox="0 0 '+gr+" "+gr+'"',Sr='<svg xmlns="http://www.w3.org/2000/svg" '+(hr.width?'width="'+hr.width+'" height="'+hr.width+'" ':"")+wr+' shape-rendering="crispEdges">'+yr+xr+`</svg>
`;return typeof fr=="function"&&fr(null,Sr),Sr};const canPromise=canPromise$1,QRCode$1=qrcode,CanvasRenderer=canvas,SvgRenderer=svgTag;function renderCanvas(cr,ar,dr,fr,hr){const pr=[].slice.call(arguments,1),mr=pr.length,gr=typeof pr[mr-1]=="function";if(!gr&&!canPromise())throw new Error("Callback required as last argument");if(gr){if(mr<2)throw new Error("Too few arguments provided");mr===2?(hr=dr,dr=ar,ar=fr=void 0):mr===3&&(ar.getContext&&typeof hr>"u"?(hr=fr,fr=void 0):(hr=fr,fr=dr,dr=ar,ar=void 0))}else{if(mr<1)throw new Error("Too few arguments provided");return mr===1?(dr=ar,ar=fr=void 0):mr===2&&!ar.getContext&&(fr=dr,dr=ar,ar=void 0),new Promise(function(yr,xr){try{const wr=QRCode$1.create(dr,fr);yr(cr(wr,ar,fr))}catch(wr){xr(wr)}})}try{const yr=QRCode$1.create(dr,fr);hr(null,cr(yr,ar,fr))}catch(yr){hr(yr)}}browser$2.create=QRCode$1.create;browser$2.toCanvas=renderCanvas.bind(null,CanvasRenderer.render);browser$2.toDataURL=renderCanvas.bind(null,CanvasRenderer.renderToDataURL);browser$2.toString=renderCanvas.bind(null,function(cr,ar,dr){return SvgRenderer.render(cr,dr)});var largeScreenMinWidth=768,mapResponsiveValue=createMapValueFn({conditions:{defaultCondition:"smallScreen",conditionNames:["smallScreen","largeScreen"],responsiveArray:void 0}}),normalizeResponsiveValue=createNormalizeValueFn({conditions:{defaultCondition:"smallScreen",conditionNames:["smallScreen","largeScreen"],responsiveArray:void 0}}),sprinkles=createSprinkles({conditions:{defaultCondition:"base",conditionNames:["base","hover","active"],responsiveArray:void 0},styles:{background:{values:{accentColor:{conditions:{base:"ju367v9c",hover:"ju367v9d",active:"ju367v9e"},defaultClass:"ju367v9c"},accentColorForeground:{conditions:{base:"ju367v9f",hover:"ju367v9g",active:"ju367v9h"},defaultClass:"ju367v9f"},actionButtonBorder:{conditions:{base:"ju367v9i",hover:"ju367v9j",active:"ju367v9k"},defaultClass:"ju367v9i"},actionButtonBorderMobile:{conditions:{base:"ju367v9l",hover:"ju367v9m",active:"ju367v9n"},defaultClass:"ju367v9l"},actionButtonSecondaryBackground:{conditions:{base:"ju367v9o",hover:"ju367v9p",active:"ju367v9q"},defaultClass:"ju367v9o"},closeButton:{conditions:{base:"ju367v9r",hover:"ju367v9s",active:"ju367v9t"},defaultClass:"ju367v9r"},closeButtonBackground:{conditions:{base:"ju367v9u",hover:"ju367v9v",active:"ju367v9w"},defaultClass:"ju367v9u"},connectButtonBackground:{conditions:{base:"ju367v9x",hover:"ju367v9y",active:"ju367v9z"},defaultClass:"ju367v9x"},connectButtonBackgroundError:{conditions:{base:"ju367va0",hover:"ju367va1",active:"ju367va2"},defaultClass:"ju367va0"},connectButtonInnerBackground:{conditions:{base:"ju367va3",hover:"ju367va4",active:"ju367va5"},defaultClass:"ju367va3"},connectButtonText:{conditions:{base:"ju367va6",hover:"ju367va7",active:"ju367va8"},defaultClass:"ju367va6"},connectButtonTextError:{conditions:{base:"ju367va9",hover:"ju367vaa",active:"ju367vab"},defaultClass:"ju367va9"},connectionIndicator:{conditions:{base:"ju367vac",hover:"ju367vad",active:"ju367vae"},defaultClass:"ju367vac"},downloadBottomCardBackground:{conditions:{base:"ju367vaf",hover:"ju367vag",active:"ju367vah"},defaultClass:"ju367vaf"},downloadTopCardBackground:{conditions:{base:"ju367vai",hover:"ju367vaj",active:"ju367vak"},defaultClass:"ju367vai"},error:{conditions:{base:"ju367val",hover:"ju367vam",active:"ju367van"},defaultClass:"ju367val"},generalBorder:{conditions:{base:"ju367vao",hover:"ju367vap",active:"ju367vaq"},defaultClass:"ju367vao"},generalBorderDim:{conditions:{base:"ju367var",hover:"ju367vas",active:"ju367vat"},defaultClass:"ju367var"},menuItemBackground:{conditions:{base:"ju367vau",hover:"ju367vav",active:"ju367vaw"},defaultClass:"ju367vau"},modalBackdrop:{conditions:{base:"ju367vax",hover:"ju367vay",active:"ju367vaz"},defaultClass:"ju367vax"},modalBackground:{conditions:{base:"ju367vb0",hover:"ju367vb1",active:"ju367vb2"},defaultClass:"ju367vb0"},modalBorder:{conditions:{base:"ju367vb3",hover:"ju367vb4",active:"ju367vb5"},defaultClass:"ju367vb3"},modalText:{conditions:{base:"ju367vb6",hover:"ju367vb7",active:"ju367vb8"},defaultClass:"ju367vb6"},modalTextDim:{conditions:{base:"ju367vb9",hover:"ju367vba",active:"ju367vbb"},defaultClass:"ju367vb9"},modalTextSecondary:{conditions:{base:"ju367vbc",hover:"ju367vbd",active:"ju367vbe"},defaultClass:"ju367vbc"},profileAction:{conditions:{base:"ju367vbf",hover:"ju367vbg",active:"ju367vbh"},defaultClass:"ju367vbf"},profileActionHover:{conditions:{base:"ju367vbi",hover:"ju367vbj",active:"ju367vbk"},defaultClass:"ju367vbi"},profileForeground:{conditions:{base:"ju367vbl",hover:"ju367vbm",active:"ju367vbn"},defaultClass:"ju367vbl"},selectedOptionBorder:{conditions:{base:"ju367vbo",hover:"ju367vbp",active:"ju367vbq"},defaultClass:"ju367vbo"},standby:{conditions:{base:"ju367vbr",hover:"ju367vbs",active:"ju367vbt"},defaultClass:"ju367vbr"}}},borderColor:{values:{accentColor:{conditions:{base:"ju367vbu",hover:"ju367vbv",active:"ju367vbw"},defaultClass:"ju367vbu"},accentColorForeground:{conditions:{base:"ju367vbx",hover:"ju367vby",active:"ju367vbz"},defaultClass:"ju367vbx"},actionButtonBorder:{conditions:{base:"ju367vc0",hover:"ju367vc1",active:"ju367vc2"},defaultClass:"ju367vc0"},actionButtonBorderMobile:{conditions:{base:"ju367vc3",hover:"ju367vc4",active:"ju367vc5"},defaultClass:"ju367vc3"},actionButtonSecondaryBackground:{conditions:{base:"ju367vc6",hover:"ju367vc7",active:"ju367vc8"},defaultClass:"ju367vc6"},closeButton:{conditions:{base:"ju367vc9",hover:"ju367vca",active:"ju367vcb"},defaultClass:"ju367vc9"},closeButtonBackground:{conditions:{base:"ju367vcc",hover:"ju367vcd",active:"ju367vce"},defaultClass:"ju367vcc"},connectButtonBackground:{conditions:{base:"ju367vcf",hover:"ju367vcg",active:"ju367vch"},defaultClass:"ju367vcf"},connectButtonBackgroundError:{conditions:{base:"ju367vci",hover:"ju367vcj",active:"ju367vck"},defaultClass:"ju367vci"},connectButtonInnerBackground:{conditions:{base:"ju367vcl",hover:"ju367vcm",active:"ju367vcn"},defaultClass:"ju367vcl"},connectButtonText:{conditions:{base:"ju367vco",hover:"ju367vcp",active:"ju367vcq"},defaultClass:"ju367vco"},connectButtonTextError:{conditions:{base:"ju367vcr",hover:"ju367vcs",active:"ju367vct"},defaultClass:"ju367vcr"},connectionIndicator:{conditions:{base:"ju367vcu",hover:"ju367vcv",active:"ju367vcw"},defaultClass:"ju367vcu"},downloadBottomCardBackground:{conditions:{base:"ju367vcx",hover:"ju367vcy",active:"ju367vcz"},defaultClass:"ju367vcx"},downloadTopCardBackground:{conditions:{base:"ju367vd0",hover:"ju367vd1",active:"ju367vd2"},defaultClass:"ju367vd0"},error:{conditions:{base:"ju367vd3",hover:"ju367vd4",active:"ju367vd5"},defaultClass:"ju367vd3"},generalBorder:{conditions:{base:"ju367vd6",hover:"ju367vd7",active:"ju367vd8"},defaultClass:"ju367vd6"},generalBorderDim:{conditions:{base:"ju367vd9",hover:"ju367vda",active:"ju367vdb"},defaultClass:"ju367vd9"},menuItemBackground:{conditions:{base:"ju367vdc",hover:"ju367vdd",active:"ju367vde"},defaultClass:"ju367vdc"},modalBackdrop:{conditions:{base:"ju367vdf",hover:"ju367vdg",active:"ju367vdh"},defaultClass:"ju367vdf"},modalBackground:{conditions:{base:"ju367vdi",hover:"ju367vdj",active:"ju367vdk"},defaultClass:"ju367vdi"},modalBorder:{conditions:{base:"ju367vdl",hover:"ju367vdm",active:"ju367vdn"},defaultClass:"ju367vdl"},modalText:{conditions:{base:"ju367vdo",hover:"ju367vdp",active:"ju367vdq"},defaultClass:"ju367vdo"},modalTextDim:{conditions:{base:"ju367vdr",hover:"ju367vds",active:"ju367vdt"},defaultClass:"ju367vdr"},modalTextSecondary:{conditions:{base:"ju367vdu",hover:"ju367vdv",active:"ju367vdw"},defaultClass:"ju367vdu"},profileAction:{conditions:{base:"ju367vdx",hover:"ju367vdy",active:"ju367vdz"},defaultClass:"ju367vdx"},profileActionHover:{conditions:{base:"ju367ve0",hover:"ju367ve1",active:"ju367ve2"},defaultClass:"ju367ve0"},profileForeground:{conditions:{base:"ju367ve3",hover:"ju367ve4",active:"ju367ve5"},defaultClass:"ju367ve3"},selectedOptionBorder:{conditions:{base:"ju367ve6",hover:"ju367ve7",active:"ju367ve8"},defaultClass:"ju367ve6"},standby:{conditions:{base:"ju367ve9",hover:"ju367vea",active:"ju367veb"},defaultClass:"ju367ve9"}}},boxShadow:{values:{connectButton:{conditions:{base:"ju367vec",hover:"ju367ved",active:"ju367vee"},defaultClass:"ju367vec"},dialog:{conditions:{base:"ju367vef",hover:"ju367veg",active:"ju367veh"},defaultClass:"ju367vef"},profileDetailsAction:{conditions:{base:"ju367vei",hover:"ju367vej",active:"ju367vek"},defaultClass:"ju367vei"},selectedOption:{conditions:{base:"ju367vel",hover:"ju367vem",active:"ju367ven"},defaultClass:"ju367vel"},selectedWallet:{conditions:{base:"ju367veo",hover:"ju367vep",active:"ju367veq"},defaultClass:"ju367veo"},walletLogo:{conditions:{base:"ju367ver",hover:"ju367ves",active:"ju367vet"},defaultClass:"ju367ver"}}},color:{values:{accentColor:{conditions:{base:"ju367veu",hover:"ju367vev",active:"ju367vew"},defaultClass:"ju367veu"},accentColorForeground:{conditions:{base:"ju367vex",hover:"ju367vey",active:"ju367vez"},defaultClass:"ju367vex"},actionButtonBorder:{conditions:{base:"ju367vf0",hover:"ju367vf1",active:"ju367vf2"},defaultClass:"ju367vf0"},actionButtonBorderMobile:{conditions:{base:"ju367vf3",hover:"ju367vf4",active:"ju367vf5"},defaultClass:"ju367vf3"},actionButtonSecondaryBackground:{conditions:{base:"ju367vf6",hover:"ju367vf7",active:"ju367vf8"},defaultClass:"ju367vf6"},closeButton:{conditions:{base:"ju367vf9",hover:"ju367vfa",active:"ju367vfb"},defaultClass:"ju367vf9"},closeButtonBackground:{conditions:{base:"ju367vfc",hover:"ju367vfd",active:"ju367vfe"},defaultClass:"ju367vfc"},connectButtonBackground:{conditions:{base:"ju367vff",hover:"ju367vfg",active:"ju367vfh"},defaultClass:"ju367vff"},connectButtonBackgroundError:{conditions:{base:"ju367vfi",hover:"ju367vfj",active:"ju367vfk"},defaultClass:"ju367vfi"},connectButtonInnerBackground:{conditions:{base:"ju367vfl",hover:"ju367vfm",active:"ju367vfn"},defaultClass:"ju367vfl"},connectButtonText:{conditions:{base:"ju367vfo",hover:"ju367vfp",active:"ju367vfq"},defaultClass:"ju367vfo"},connectButtonTextError:{conditions:{base:"ju367vfr",hover:"ju367vfs",active:"ju367vft"},defaultClass:"ju367vfr"},connectionIndicator:{conditions:{base:"ju367vfu",hover:"ju367vfv",active:"ju367vfw"},defaultClass:"ju367vfu"},downloadBottomCardBackground:{conditions:{base:"ju367vfx",hover:"ju367vfy",active:"ju367vfz"},defaultClass:"ju367vfx"},downloadTopCardBackground:{conditions:{base:"ju367vg0",hover:"ju367vg1",active:"ju367vg2"},defaultClass:"ju367vg0"},error:{conditions:{base:"ju367vg3",hover:"ju367vg4",active:"ju367vg5"},defaultClass:"ju367vg3"},generalBorder:{conditions:{base:"ju367vg6",hover:"ju367vg7",active:"ju367vg8"},defaultClass:"ju367vg6"},generalBorderDim:{conditions:{base:"ju367vg9",hover:"ju367vga",active:"ju367vgb"},defaultClass:"ju367vg9"},menuItemBackground:{conditions:{base:"ju367vgc",hover:"ju367vgd",active:"ju367vge"},defaultClass:"ju367vgc"},modalBackdrop:{conditions:{base:"ju367vgf",hover:"ju367vgg",active:"ju367vgh"},defaultClass:"ju367vgf"},modalBackground:{conditions:{base:"ju367vgi",hover:"ju367vgj",active:"ju367vgk"},defaultClass:"ju367vgi"},modalBorder:{conditions:{base:"ju367vgl",hover:"ju367vgm",active:"ju367vgn"},defaultClass:"ju367vgl"},modalText:{conditions:{base:"ju367vgo",hover:"ju367vgp",active:"ju367vgq"},defaultClass:"ju367vgo"},modalTextDim:{conditions:{base:"ju367vgr",hover:"ju367vgs",active:"ju367vgt"},defaultClass:"ju367vgr"},modalTextSecondary:{conditions:{base:"ju367vgu",hover:"ju367vgv",active:"ju367vgw"},defaultClass:"ju367vgu"},profileAction:{conditions:{base:"ju367vgx",hover:"ju367vgy",active:"ju367vgz"},defaultClass:"ju367vgx"},profileActionHover:{conditions:{base:"ju367vh0",hover:"ju367vh1",active:"ju367vh2"},defaultClass:"ju367vh0"},profileForeground:{conditions:{base:"ju367vh3",hover:"ju367vh4",active:"ju367vh5"},defaultClass:"ju367vh3"},selectedOptionBorder:{conditions:{base:"ju367vh6",hover:"ju367vh7",active:"ju367vh8"},defaultClass:"ju367vh6"},standby:{conditions:{base:"ju367vh9",hover:"ju367vha",active:"ju367vhb"},defaultClass:"ju367vh9"}}}}},{conditions:{defaultCondition:"smallScreen",conditionNames:["smallScreen","largeScreen"],responsiveArray:void 0},styles:{alignItems:{values:{"flex-start":{conditions:{smallScreen:"ju367v0",largeScreen:"ju367v1"},defaultClass:"ju367v0"},"flex-end":{conditions:{smallScreen:"ju367v2",largeScreen:"ju367v3"},defaultClass:"ju367v2"},center:{conditions:{smallScreen:"ju367v4",largeScreen:"ju367v5"},defaultClass:"ju367v4"}}},display:{values:{none:{conditions:{smallScreen:"ju367v6",largeScreen:"ju367v7"},defaultClass:"ju367v6"},block:{conditions:{smallScreen:"ju367v8",largeScreen:"ju367v9"},defaultClass:"ju367v8"},flex:{conditions:{smallScreen:"ju367va",largeScreen:"ju367vb"},defaultClass:"ju367va"},inline:{conditions:{smallScreen:"ju367vc",largeScreen:"ju367vd"},defaultClass:"ju367vc"}}}}},{conditions:void 0,styles:{margin:{mappings:["marginTop","marginBottom","marginLeft","marginRight"]},marginX:{mappings:["marginLeft","marginRight"]},marginY:{mappings:["marginTop","marginBottom"]},padding:{mappings:["paddingTop","paddingBottom","paddingLeft","paddingRight"]},paddingX:{mappings:["paddingLeft","paddingRight"]},paddingY:{mappings:["paddingTop","paddingBottom"]},alignSelf:{values:{"flex-start":{defaultClass:"ju367ve"},"flex-end":{defaultClass:"ju367vf"},center:{defaultClass:"ju367vg"}}},backgroundSize:{values:{cover:{defaultClass:"ju367vh"}}},borderRadius:{values:{1:{defaultClass:"ju367vi"},6:{defaultClass:"ju367vj"},10:{defaultClass:"ju367vk"},13:{defaultClass:"ju367vl"},actionButton:{defaultClass:"ju367vm"},connectButton:{defaultClass:"ju367vn"},menuButton:{defaultClass:"ju367vo"},modal:{defaultClass:"ju367vp"},modalMobile:{defaultClass:"ju367vq"},"25%":{defaultClass:"ju367vr"},full:{defaultClass:"ju367vs"}}},borderStyle:{values:{solid:{defaultClass:"ju367vt"}}},borderWidth:{values:{0:{defaultClass:"ju367vu"},1:{defaultClass:"ju367vv"},2:{defaultClass:"ju367vw"},4:{defaultClass:"ju367vx"}}},cursor:{values:{pointer:{defaultClass:"ju367vy"}}},flexDirection:{values:{row:{defaultClass:"ju367vz"},column:{defaultClass:"ju367v10"}}},fontFamily:{values:{body:{defaultClass:"ju367v11"}}},fontSize:{values:{12:{defaultClass:"ju367v12"},13:{defaultClass:"ju367v13"},14:{defaultClass:"ju367v14"},16:{defaultClass:"ju367v15"},18:{defaultClass:"ju367v16"},20:{defaultClass:"ju367v17"},23:{defaultClass:"ju367v18"}}},fontWeight:{values:{regular:{defaultClass:"ju367v19"},medium:{defaultClass:"ju367v1a"},semibold:{defaultClass:"ju367v1b"},bold:{defaultClass:"ju367v1c"},heavy:{defaultClass:"ju367v1d"}}},gap:{values:{0:{defaultClass:"ju367v1e"},1:{defaultClass:"ju367v1f"},2:{defaultClass:"ju367v1g"},3:{defaultClass:"ju367v1h"},4:{defaultClass:"ju367v1i"},5:{defaultClass:"ju367v1j"},6:{defaultClass:"ju367v1k"},8:{defaultClass:"ju367v1l"},10:{defaultClass:"ju367v1m"},12:{defaultClass:"ju367v1n"},14:{defaultClass:"ju367v1o"},16:{defaultClass:"ju367v1p"},18:{defaultClass:"ju367v1q"},20:{defaultClass:"ju367v1r"},24:{defaultClass:"ju367v1s"},28:{defaultClass:"ju367v1t"},32:{defaultClass:"ju367v1u"},36:{defaultClass:"ju367v1v"},44:{defaultClass:"ju367v1w"},64:{defaultClass:"ju367v1x"},"-1":{defaultClass:"ju367v1y"}}},height:{values:{1:{defaultClass:"ju367v1z"},2:{defaultClass:"ju367v20"},4:{defaultClass:"ju367v21"},8:{defaultClass:"ju367v22"},12:{defaultClass:"ju367v23"},20:{defaultClass:"ju367v24"},24:{defaultClass:"ju367v25"},28:{defaultClass:"ju367v26"},30:{defaultClass:"ju367v27"},32:{defaultClass:"ju367v28"},34:{defaultClass:"ju367v29"},36:{defaultClass:"ju367v2a"},40:{defaultClass:"ju367v2b"},44:{defaultClass:"ju367v2c"},48:{defaultClass:"ju367v2d"},54:{defaultClass:"ju367v2e"},60:{defaultClass:"ju367v2f"},200:{defaultClass:"ju367v2g"},full:{defaultClass:"ju367v2h"},max:{defaultClass:"ju367v2i"}}},justifyContent:{values:{"flex-start":{defaultClass:"ju367v2j"},"flex-end":{defaultClass:"ju367v2k"},center:{defaultClass:"ju367v2l"},"space-between":{defaultClass:"ju367v2m"},"space-around":{defaultClass:"ju367v2n"}}},textAlign:{values:{left:{defaultClass:"ju367v2o"},center:{defaultClass:"ju367v2p"},inherit:{defaultClass:"ju367v2q"}}},marginBottom:{values:{0:{defaultClass:"ju367v2r"},1:{defaultClass:"ju367v2s"},2:{defaultClass:"ju367v2t"},3:{defaultClass:"ju367v2u"},4:{defaultClass:"ju367v2v"},5:{defaultClass:"ju367v2w"},6:{defaultClass:"ju367v2x"},8:{defaultClass:"ju367v2y"},10:{defaultClass:"ju367v2z"},12:{defaultClass:"ju367v30"},14:{defaultClass:"ju367v31"},16:{defaultClass:"ju367v32"},18:{defaultClass:"ju367v33"},20:{defaultClass:"ju367v34"},24:{defaultClass:"ju367v35"},28:{defaultClass:"ju367v36"},32:{defaultClass:"ju367v37"},36:{defaultClass:"ju367v38"},44:{defaultClass:"ju367v39"},64:{defaultClass:"ju367v3a"},"-1":{defaultClass:"ju367v3b"}}},marginLeft:{values:{0:{defaultClass:"ju367v3c"},1:{defaultClass:"ju367v3d"},2:{defaultClass:"ju367v3e"},3:{defaultClass:"ju367v3f"},4:{defaultClass:"ju367v3g"},5:{defaultClass:"ju367v3h"},6:{defaultClass:"ju367v3i"},8:{defaultClass:"ju367v3j"},10:{defaultClass:"ju367v3k"},12:{defaultClass:"ju367v3l"},14:{defaultClass:"ju367v3m"},16:{defaultClass:"ju367v3n"},18:{defaultClass:"ju367v3o"},20:{defaultClass:"ju367v3p"},24:{defaultClass:"ju367v3q"},28:{defaultClass:"ju367v3r"},32:{defaultClass:"ju367v3s"},36:{defaultClass:"ju367v3t"},44:{defaultClass:"ju367v3u"},64:{defaultClass:"ju367v3v"},"-1":{defaultClass:"ju367v3w"}}},marginRight:{values:{0:{defaultClass:"ju367v3x"},1:{defaultClass:"ju367v3y"},2:{defaultClass:"ju367v3z"},3:{defaultClass:"ju367v40"},4:{defaultClass:"ju367v41"},5:{defaultClass:"ju367v42"},6:{defaultClass:"ju367v43"},8:{defaultClass:"ju367v44"},10:{defaultClass:"ju367v45"},12:{defaultClass:"ju367v46"},14:{defaultClass:"ju367v47"},16:{defaultClass:"ju367v48"},18:{defaultClass:"ju367v49"},20:{defaultClass:"ju367v4a"},24:{defaultClass:"ju367v4b"},28:{defaultClass:"ju367v4c"},32:{defaultClass:"ju367v4d"},36:{defaultClass:"ju367v4e"},44:{defaultClass:"ju367v4f"},64:{defaultClass:"ju367v4g"},"-1":{defaultClass:"ju367v4h"}}},marginTop:{values:{0:{defaultClass:"ju367v4i"},1:{defaultClass:"ju367v4j"},2:{defaultClass:"ju367v4k"},3:{defaultClass:"ju367v4l"},4:{defaultClass:"ju367v4m"},5:{defaultClass:"ju367v4n"},6:{defaultClass:"ju367v4o"},8:{defaultClass:"ju367v4p"},10:{defaultClass:"ju367v4q"},12:{defaultClass:"ju367v4r"},14:{defaultClass:"ju367v4s"},16:{defaultClass:"ju367v4t"},18:{defaultClass:"ju367v4u"},20:{defaultClass:"ju367v4v"},24:{defaultClass:"ju367v4w"},28:{defaultClass:"ju367v4x"},32:{defaultClass:"ju367v4y"},36:{defaultClass:"ju367v4z"},44:{defaultClass:"ju367v50"},64:{defaultClass:"ju367v51"},"-1":{defaultClass:"ju367v52"}}},maxWidth:{values:{1:{defaultClass:"ju367v53"},2:{defaultClass:"ju367v54"},4:{defaultClass:"ju367v55"},8:{defaultClass:"ju367v56"},12:{defaultClass:"ju367v57"},20:{defaultClass:"ju367v58"},24:{defaultClass:"ju367v59"},28:{defaultClass:"ju367v5a"},30:{defaultClass:"ju367v5b"},32:{defaultClass:"ju367v5c"},34:{defaultClass:"ju367v5d"},36:{defaultClass:"ju367v5e"},40:{defaultClass:"ju367v5f"},44:{defaultClass:"ju367v5g"},48:{defaultClass:"ju367v5h"},54:{defaultClass:"ju367v5i"},60:{defaultClass:"ju367v5j"},200:{defaultClass:"ju367v5k"},full:{defaultClass:"ju367v5l"},max:{defaultClass:"ju367v5m"}}},minWidth:{values:{1:{defaultClass:"ju367v5n"},2:{defaultClass:"ju367v5o"},4:{defaultClass:"ju367v5p"},8:{defaultClass:"ju367v5q"},12:{defaultClass:"ju367v5r"},20:{defaultClass:"ju367v5s"},24:{defaultClass:"ju367v5t"},28:{defaultClass:"ju367v5u"},30:{defaultClass:"ju367v5v"},32:{defaultClass:"ju367v5w"},34:{defaultClass:"ju367v5x"},36:{defaultClass:"ju367v5y"},40:{defaultClass:"ju367v5z"},44:{defaultClass:"ju367v60"},48:{defaultClass:"ju367v61"},54:{defaultClass:"ju367v62"},60:{defaultClass:"ju367v63"},200:{defaultClass:"ju367v64"},full:{defaultClass:"ju367v65"},max:{defaultClass:"ju367v66"}}},overflow:{values:{hidden:{defaultClass:"ju367v67"}}},paddingBottom:{values:{0:{defaultClass:"ju367v68"},1:{defaultClass:"ju367v69"},2:{defaultClass:"ju367v6a"},3:{defaultClass:"ju367v6b"},4:{defaultClass:"ju367v6c"},5:{defaultClass:"ju367v6d"},6:{defaultClass:"ju367v6e"},8:{defaultClass:"ju367v6f"},10:{defaultClass:"ju367v6g"},12:{defaultClass:"ju367v6h"},14:{defaultClass:"ju367v6i"},16:{defaultClass:"ju367v6j"},18:{defaultClass:"ju367v6k"},20:{defaultClass:"ju367v6l"},24:{defaultClass:"ju367v6m"},28:{defaultClass:"ju367v6n"},32:{defaultClass:"ju367v6o"},36:{defaultClass:"ju367v6p"},44:{defaultClass:"ju367v6q"},64:{defaultClass:"ju367v6r"},"-1":{defaultClass:"ju367v6s"}}},paddingLeft:{values:{0:{defaultClass:"ju367v6t"},1:{defaultClass:"ju367v6u"},2:{defaultClass:"ju367v6v"},3:{defaultClass:"ju367v6w"},4:{defaultClass:"ju367v6x"},5:{defaultClass:"ju367v6y"},6:{defaultClass:"ju367v6z"},8:{defaultClass:"ju367v70"},10:{defaultClass:"ju367v71"},12:{defaultClass:"ju367v72"},14:{defaultClass:"ju367v73"},16:{defaultClass:"ju367v74"},18:{defaultClass:"ju367v75"},20:{defaultClass:"ju367v76"},24:{defaultClass:"ju367v77"},28:{defaultClass:"ju367v78"},32:{defaultClass:"ju367v79"},36:{defaultClass:"ju367v7a"},44:{defaultClass:"ju367v7b"},64:{defaultClass:"ju367v7c"},"-1":{defaultClass:"ju367v7d"}}},paddingRight:{values:{0:{defaultClass:"ju367v7e"},1:{defaultClass:"ju367v7f"},2:{defaultClass:"ju367v7g"},3:{defaultClass:"ju367v7h"},4:{defaultClass:"ju367v7i"},5:{defaultClass:"ju367v7j"},6:{defaultClass:"ju367v7k"},8:{defaultClass:"ju367v7l"},10:{defaultClass:"ju367v7m"},12:{defaultClass:"ju367v7n"},14:{defaultClass:"ju367v7o"},16:{defaultClass:"ju367v7p"},18:{defaultClass:"ju367v7q"},20:{defaultClass:"ju367v7r"},24:{defaultClass:"ju367v7s"},28:{defaultClass:"ju367v7t"},32:{defaultClass:"ju367v7u"},36:{defaultClass:"ju367v7v"},44:{defaultClass:"ju367v7w"},64:{defaultClass:"ju367v7x"},"-1":{defaultClass:"ju367v7y"}}},paddingTop:{values:{0:{defaultClass:"ju367v7z"},1:{defaultClass:"ju367v80"},2:{defaultClass:"ju367v81"},3:{defaultClass:"ju367v82"},4:{defaultClass:"ju367v83"},5:{defaultClass:"ju367v84"},6:{defaultClass:"ju367v85"},8:{defaultClass:"ju367v86"},10:{defaultClass:"ju367v87"},12:{defaultClass:"ju367v88"},14:{defaultClass:"ju367v89"},16:{defaultClass:"ju367v8a"},18:{defaultClass:"ju367v8b"},20:{defaultClass:"ju367v8c"},24:{defaultClass:"ju367v8d"},28:{defaultClass:"ju367v8e"},32:{defaultClass:"ju367v8f"},36:{defaultClass:"ju367v8g"},44:{defaultClass:"ju367v8h"},64:{defaultClass:"ju367v8i"},"-1":{defaultClass:"ju367v8j"}}},position:{values:{absolute:{defaultClass:"ju367v8k"},fixed:{defaultClass:"ju367v8l"},relative:{defaultClass:"ju367v8m"}}},right:{values:{0:{defaultClass:"ju367v8n"}}},transition:{values:{default:{defaultClass:"ju367v8o"},transform:{defaultClass:"ju367v8p"}}},userSelect:{values:{none:{defaultClass:"ju367v8q"}}},width:{values:{1:{defaultClass:"ju367v8r"},2:{defaultClass:"ju367v8s"},4:{defaultClass:"ju367v8t"},8:{defaultClass:"ju367v8u"},12:{defaultClass:"ju367v8v"},20:{defaultClass:"ju367v8w"},24:{defaultClass:"ju367v8x"},28:{defaultClass:"ju367v8y"},30:{defaultClass:"ju367v8z"},32:{defaultClass:"ju367v90"},34:{defaultClass:"ju367v91"},36:{defaultClass:"ju367v92"},40:{defaultClass:"ju367v93"},44:{defaultClass:"ju367v94"},48:{defaultClass:"ju367v95"},54:{defaultClass:"ju367v96"},60:{defaultClass:"ju367v97"},200:{defaultClass:"ju367v98"},full:{defaultClass:"ju367v99"},max:{defaultClass:"ju367v9a"}}},backdropFilter:{values:{modalOverlay:{defaultClass:"ju367v9b"}}}}}),themeVars={colors:{accentColor:"var(--rk-colors-accentColor)",accentColorForeground:"var(--rk-colors-accentColorForeground)",actionButtonBorder:"var(--rk-colors-actionButtonBorder)",actionButtonBorderMobile:"var(--rk-colors-actionButtonBorderMobile)",actionButtonSecondaryBackground:"var(--rk-colors-actionButtonSecondaryBackground)",closeButton:"var(--rk-colors-closeButton)",closeButtonBackground:"var(--rk-colors-closeButtonBackground)",connectButtonBackground:"var(--rk-colors-connectButtonBackground)",connectButtonBackgroundError:"var(--rk-colors-connectButtonBackgroundError)",connectButtonInnerBackground:"var(--rk-colors-connectButtonInnerBackground)",connectButtonText:"var(--rk-colors-connectButtonText)",connectButtonTextError:"var(--rk-colors-connectButtonTextError)",connectionIndicator:"var(--rk-colors-connectionIndicator)",downloadBottomCardBackground:"var(--rk-colors-downloadBottomCardBackground)",downloadTopCardBackground:"var(--rk-colors-downloadTopCardBackground)",error:"var(--rk-colors-error)",generalBorder:"var(--rk-colors-generalBorder)",generalBorderDim:"var(--rk-colors-generalBorderDim)",menuItemBackground:"var(--rk-colors-menuItemBackground)",modalBackdrop:"var(--rk-colors-modalBackdrop)",modalBackground:"var(--rk-colors-modalBackground)",modalBorder:"var(--rk-colors-modalBorder)",modalText:"var(--rk-colors-modalText)",modalTextDim:"var(--rk-colors-modalTextDim)",modalTextSecondary:"var(--rk-colors-modalTextSecondary)",profileAction:"var(--rk-colors-profileAction)",profileActionHover:"var(--rk-colors-profileActionHover)",profileForeground:"var(--rk-colors-profileForeground)",selectedOptionBorder:"var(--rk-colors-selectedOptionBorder)",standby:"var(--rk-colors-standby)"},fonts:{body:"var(--rk-fonts-body)"},radii:{actionButton:"var(--rk-radii-actionButton)",connectButton:"var(--rk-radii-connectButton)",menuButton:"var(--rk-radii-menuButton)",modal:"var(--rk-radii-modal)",modalMobile:"var(--rk-radii-modalMobile)"},shadows:{connectButton:"var(--rk-shadows-connectButton)",dialog:"var(--rk-shadows-dialog)",profileDetailsAction:"var(--rk-shadows-profileDetailsAction)",selectedOption:"var(--rk-shadows-selectedOption)",selectedWallet:"var(--rk-shadows-selectedWallet)",walletLogo:"var(--rk-shadows-walletLogo)"},blurs:{modalOverlay:"var(--rk-blurs-modalOverlay)"}},active={shrink:"_12cbo8i6",shrinkSm:"_12cbo8i7"},base$5="_12cbo8i3 ju367v8m",hover={grow:"_12cbo8i4",growLg:"_12cbo8i5"};function touchableStyles({active:cr,hover:ar}){return[base$5,ar&&hover[ar],active[cr]]}var AuthenticationContext=reactExports.createContext(null);function useAuthenticationAdapter(){var cr;const{adapter:ar}=(cr=reactExports.useContext(AuthenticationContext))!=null?cr:{};if(!ar)throw new Error("No authentication adapter found");return ar}function useAuthenticationStatus(){var cr;const ar=reactExports.useContext(AuthenticationContext);return(cr=ar?.status)!=null?cr:null}function useConnectionStatus(){const cr=useAuthenticationStatus(),{isConnected:ar}=useAccount();return ar?cr&&(cr==="loading"||cr==="unauthenticated")?cr:"connected":"disconnected"}function isAndroid$1(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function isSmallIOS$1(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function isLargeIOS$1(){return typeof navigator<"u"&&(/iPad/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)}function isIOS$1(){return isSmallIOS$1()||isLargeIOS$1()}function isMobile(){return isAndroid$1()||isIOS$1()}var base2$6="iekbcc0",element={a:"iekbcca",blockquote:"iekbcc2",button:"iekbcc9",input:"iekbcc8 iekbcc5 iekbcc4",mark:"iekbcc6",ol:"iekbcc1",q:"iekbcc2",select:"iekbcc7 iekbcc5 iekbcc4",table:"iekbcc3",textarea:"iekbcc5 iekbcc4",ul:"iekbcc1"},atoms=({reset:cr,...ar})=>{if(!cr)return sprinkles(ar);const dr=element[cr],fr=sprinkles(ar);return clsx2(base2$6,dr,fr)},Box=reactExports.forwardRef(({as:cr="div",className:ar,testId:dr,...fr},hr)=>{const pr={},mr={};for(const yr in fr)sprinkles.properties.has(yr)?pr[yr]=fr[yr]:mr[yr]=fr[yr];const gr=atoms({reset:typeof cr=="string"?cr:"div",...pr});return reactExports.createElement(cr,{className:clsx2(gr,ar),...mr,"data-testid":dr?`rk-${dr.replace(/^rk-/,"")}`:void 0,ref:hr})});Box.displayName="Box";var cachedUrls=new Map,cachedRequestPromises=new Map;async function loadAsyncImage(cr){const ar=cachedRequestPromises.get(cr);if(ar)return ar;const dr=async()=>cr().then(async hr=>(cachedUrls.set(cr,hr),hr)),fr=dr().catch(hr=>dr().catch(pr=>{cachedRequestPromises.delete(cr)}));return cachedRequestPromises.set(cr,fr),fr}async function loadImages(...cr){return await Promise.all(cr.map(ar=>typeof ar=="function"?loadAsyncImage(ar):ar))}function useForceUpdate(){const[,cr]=reactExports.useReducer(ar=>ar+1,0);return cr}function useAsyncImage(cr){const ar=typeof cr=="function"?cachedUrls.get(cr):void 0,dr=useForceUpdate();return reactExports.useEffect(()=>{typeof cr=="function"&&!ar&&loadAsyncImage(cr).then(dr)},[cr,ar,dr]),typeof cr=="function"?ar:cr}function AsyncImage({alt:cr,background:ar,borderColor:dr,borderRadius:fr,boxShadow:hr,height:pr,src:mr,width:gr}){const yr=useAsyncImage(mr),xr=yr&&/^http/.test(yr),[wr,br]=reactExports.useReducer(()=>!0,!1);return React.createElement(Box,{"aria-label":cr,borderRadius:fr,boxShadow:hr,height:typeof pr=="string"?pr:void 0,overflow:"hidden",position:"relative",role:"img",style:{background:ar,height:typeof pr=="number"?pr:void 0,width:typeof gr=="number"?gr:void 0},width:typeof gr=="string"?gr:void 0},React.createElement(Box,{...xr?{"aria-hidden":!0,as:"img",onLoad:br,src:yr}:{backgroundSize:"cover"},height:"full",position:"absolute",style:{touchCallout:"none",transition:"opacity .15s linear",userSelect:"none",...xr?{opacity:wr?1:0}:{backgroundImage:yr?`url(${yr})`:void 0,backgroundRepeat:"no-repeat",opacity:yr?1:0}},width:"full"}),dr?React.createElement(Box,{...typeof dr=="object"&&"custom"in dr?{style:{borderColor:dr.custom}}:{borderColor:dr},borderRadius:fr,borderStyle:"solid",borderWidth:"1",height:"full",position:"relative",width:"full"}):null)}var SpinnerIconClassName="_1luule42",SpinnerIconPathClassName="_1luule43",useRandomId=cr=>reactExports.useMemo(()=>`${cr}_${Math.round(Math.random()*1e9)}`,[cr]),SpinnerIcon=({height:cr=21,width:ar=21})=>{const dr=useRandomId("spinner");return React.createElement("svg",{className:SpinnerIconClassName,fill:"none",height:cr,viewBox:"0 0 21 21",width:ar,xmlns:"http://www.w3.org/2000/svg"},React.createElement("clipPath",{id:dr},React.createElement("path",{d:"M10.5 3C6.35786 3 3 6.35786 3 10.5C3 14.6421 6.35786 18 10.5 18C11.3284 18 12 18.6716 12 19.5C12 20.3284 11.3284 21 10.5 21C4.70101 21 0 16.299 0 10.5C0 4.70101 4.70101 0 10.5 0C16.299 0 21 4.70101 21 10.5C21 11.3284 20.3284 12 19.5 12C18.6716 12 18 11.3284 18 10.5C18 6.35786 14.6421 3 10.5 3Z"})),React.createElement("foreignObject",{clipPath:`url(#${dr})`,height:"21",width:"21",x:"0",y:"0"},React.createElement("div",{className:SpinnerIconPathClassName})))},colors=["#FC5C54","#FFD95A","#E95D72","#6A87C8","#5FD0F3","#75C06B","#FFDD86","#5FC6D4","#FF949A","#FF8024","#9BA1A4","#EC66FF","#FF8CBC","#FF9A23","#C5DADB","#A8CE63","#71ABFF","#FFE279","#B6B1B6","#FF6780","#A575FF","#4D82FF","#FFB35A"],avatars=[{color:colors[0],emoji:""},{color:colors[1],emoji:""},{color:colors[2],emoji:""},{color:colors[3],emoji:""},{color:colors[4],emoji:""},{color:colors[0],emoji:""},{color:colors[5],emoji:""},{color:colors[6],emoji:""},{color:colors[7],emoji:""},{color:colors[8],emoji:""},{color:colors[9],emoji:""},{color:colors[10],emoji:""},{color:colors[11],emoji:""},{color:colors[12],emoji:""},{color:colors[13],emoji:""},{color:colors[8],emoji:""},{color:colors[14],emoji:""},{color:colors[0],emoji:""},{color:colors[8],emoji:""},{color:colors[1],emoji:""},{color:colors[15],emoji:""},{color:colors[16],emoji:""},{color:colors[17],emoji:""},{color:colors[18],emoji:""},{color:colors[19],emoji:""},{color:colors[1],emoji:""},{color:colors[20],emoji:""},{color:colors[15],emoji:""},{color:colors[0],emoji:""},{color:colors[17],emoji:""},{color:colors[4],emoji:""},{color:colors[21],emoji:""},{color:colors[17],emoji:""},{color:colors[8],emoji:""},{color:colors[22],emoji:""}];function hashCode(cr){let ar=0;if(cr.length===0)return ar;for(let dr=0;dr<cr.length;dr++){const fr=cr.charCodeAt(dr);ar=(ar<<5)-ar+fr,ar|=0}return ar}function emojiAvatarForAddress(cr){const dr=Math.abs(hashCode((typeof cr=="string"?cr:"").toLowerCase())%avatars.length);return avatars[dr??0]}var EmojiAvatar=({address:cr,ensImage:ar,size:dr})=>{const[fr,hr]=reactExports.useState(!1);reactExports.useEffect(()=>{if(ar){const gr=new Image;gr.src=ar,gr.onload=()=>hr(!0)}},[ar]);const{color:pr,emoji:mr}=reactExports.useMemo(()=>emojiAvatarForAddress(cr),[cr]);return ar?fr?React.createElement(Box,{backgroundSize:"cover",borderRadius:"full",position:"absolute",style:{backgroundImage:`url(${ar})`,backgroundPosition:"center",height:dr,width:dr}}):React.createElement(Box,{alignItems:"center",backgroundSize:"cover",borderRadius:"full",color:"modalText",display:"flex",justifyContent:"center",position:"absolute",style:{height:dr,width:dr}},React.createElement(SpinnerIcon,null)):React.createElement(Box,{alignItems:"center",display:"flex",justifyContent:"center",overflow:"hidden",style:{...!ar&&{backgroundColor:pr},height:dr,width:dr}},mr)},defaultAvatar=EmojiAvatar,AvatarContext=reactExports.createContext(defaultAvatar);function Avatar({address:cr,imageUrl:ar,loading:dr,size:fr}){const hr=reactExports.useContext(AvatarContext);return React.createElement(Box,{"aria-hidden":!0,borderRadius:"full",overflow:"hidden",position:"relative",style:{height:`${fr}px`,width:`${fr}px`},userSelect:"none"},React.createElement(Box,{alignItems:"center",borderRadius:"full",display:"flex",justifyContent:"center",overflow:"hidden",position:"absolute",style:{fontSize:`${Math.round(fr*.55)}px`,height:`${fr}px`,transform:dr?"scale(0.72)":void 0,transition:".25s ease",transitionDelay:dr?void 0:".1s",width:`${fr}px`,willChange:"transform"},userSelect:"none"},React.createElement(hr,{address:cr,ensImage:ar,size:fr})),typeof dr=="boolean"&&React.createElement(Box,{color:"accentColor",display:"flex",height:"full",position:"absolute",style:{opacity:dr?1:0,transition:dr?"0.6s ease":"0.2s ease",transitionDelay:dr?".05s":void 0},width:"full"},React.createElement(SpinnerIcon,{height:"100%",width:"100%"})))}var DropdownIcon=()=>React.createElement("svg",{fill:"none",height:"7",width:"14",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M12.75 1.54001L8.51647 5.0038C7.77974 5.60658 6.72026 5.60658 5.98352 5.0038L1.75 1.54001",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",xmlns:"http://www.w3.org/2000/svg"}));function isNotNullish(cr){return cr!=null}var arbitrumIcon={iconBackground:"#96bedc",iconUrl:async()=>(await __vitePreload(()=>import("./arbitrum-LYDBJZP3-eb03435b.js"),[])).default},avalancheIcon={iconBackground:"#e84141",iconUrl:async()=>(await __vitePreload(()=>import("./avalanche-TFPKP544-83c89fd5.js"),[])).default},baseIcon={iconBackground:"#0052ff",iconUrl:async()=>(await __vitePreload(()=>import("./base-3MIUIYGA-d99275a3.js"),[])).default},bscIcon={iconBackground:"#ebac0e",iconUrl:async()=>(await __vitePreload(()=>import("./bsc-S2GSW6VX-05341716.js"),[])).default},cronosIcon={iconBackground:"#002D74",iconUrl:async()=>(await __vitePreload(()=>import("./cronos-DQKKIEX7-67e88155.js"),[])).default},ethereumIcon={iconBackground:"#484c50",iconUrl:async()=>(await __vitePreload(()=>import("./ethereum-4FY57XJF-20f89eb8.js"),[])).default},hardhatIcon={iconBackground:"#f9f7ec",iconUrl:async()=>(await __vitePreload(()=>import("./hardhat-ARRFHFKB-687e462a.js"),[])).default},optimismIcon={iconBackground:"#ff5a57",iconUrl:async()=>(await __vitePreload(()=>import("./optimism-UUP5Y7TB-96a3957f.js"),[])).default},polygonIcon={iconBackground:"#9f71ec",iconUrl:async()=>(await __vitePreload(()=>import("./polygon-Z4QITDL7-953b4259.js"),[])).default},zoraIcon={iconBackground:"#000000",iconUrl:async()=>(await __vitePreload(()=>import("./zora-KVO7WIOK-bf3eb886.js"),[])).default},chainMetadataByName={arbitrum:{chainId:42161,name:"Arbitrum",...arbitrumIcon},arbitrumGoerli:{chainId:421613,...arbitrumIcon},avalanche:{chainId:43114,...avalancheIcon},avalancheFuji:{chainId:43113,...avalancheIcon},base:{chainId:8453,...baseIcon},baseGoerli:{chainId:84531,...baseIcon},bsc:{chainId:56,name:"BSC",...bscIcon},bscTestnet:{chainId:97,...bscIcon},cronos:{chainId:25,...cronosIcon},cronosTestnet:{chainId:338,...cronosIcon},goerli:{chainId:5,...ethereumIcon},hardhat:{chainId:31337,...hardhatIcon},kovan:{chainId:42,...ethereumIcon},localhost:{chainId:1337,...ethereumIcon},mainnet:{chainId:1,...ethereumIcon},optimism:{chainId:10,name:"Optimism",...optimismIcon},optimismGoerli:{chainId:420,...optimismIcon},optimismKovan:{chainId:69,...optimismIcon},polygon:{chainId:137,...polygonIcon},polygonMumbai:{chainId:80001,...polygonIcon},rinkeby:{chainId:4,...ethereumIcon},ropsten:{chainId:3,...ethereumIcon},sepolia:{chainId:11155111,...ethereumIcon},zora:{chainId:7777777,...zoraIcon},zoraTestnet:{chainId:999,...zoraIcon}},chainMetadataById=Object.fromEntries(Object.values(chainMetadataByName).filter(isNotNullish).map(({chainId:cr,...ar})=>[cr,ar])),provideRainbowKitChains=cr=>cr.map(ar=>{var dr;return{...ar,...(dr=chainMetadataById[ar.id])!=null?dr:{}}}),RainbowKitChainContext=reactExports.createContext({chains:[]});function RainbowKitChainProvider({chains:cr,children:ar,initialChain:dr}){return React.createElement(RainbowKitChainContext.Provider,{value:reactExports.useMemo(()=>({chains:provideRainbowKitChains(cr),initialChainId:typeof dr=="number"?dr:dr?.id}),[cr,dr])},ar)}var useRainbowKitChains=()=>reactExports.useContext(RainbowKitChainContext).chains,useInitialChainId=()=>reactExports.useContext(RainbowKitChainContext).initialChainId,useRainbowKitChainsById=()=>{const cr=useRainbowKitChains();return reactExports.useMemo(()=>{const ar={};return cr.forEach(dr=>{ar[dr.id]=dr}),ar},[cr])},useIsMounted=()=>{const[cr,ar]=reactExports.useReducer(()=>!0,!1);return reactExports.useEffect(ar,[ar]),cr};function useMainnet(){const cr=mainnet.id,ar=usePublicClient(),dr=Array.isArray(ar.chains)?ar.chains:[],fr=dr?.some(hr=>hr?.id===cr);return{chainId:cr,enabled:fr}}function useMainnetEnsAvatar(cr){const{chainId:ar,enabled:dr}=useMainnet(),{data:fr}=useEnsAvatar({chainId:ar,enabled:dr,name:cr});return fr}function useMainnetEnsName(cr){const{chainId:ar,enabled:dr}=useMainnet(),{data:fr}=useEnsName({address:cr,chainId:ar,enabled:dr});return fr}function useChainId(){var cr;const{chain:ar}=useNetwork();return(cr=ar?.id)!=null?cr:null}var storageKey="rk-transactions";function safeParseJsonData(cr){try{const ar=cr?JSON.parse(cr):{};return typeof ar=="object"?ar:{}}catch{return{}}}function loadData(){return safeParseJsonData(typeof localStorage<"u"?localStorage.getItem(storageKey):null)}var transactionHashRegex=/^0x([A-Fa-f0-9]{64})$/;function validateTransaction(cr){const ar=[];return transactionHashRegex.test(cr.hash)||ar.push("Invalid transaction hash"),typeof cr.description!="string"&&ar.push("Transaction must have a description"),typeof cr.confirmations<"u"&&(!Number.isInteger(cr.confirmations)||cr.confirmations<1)&&ar.push("Transaction confirmations must be a positiver integer"),ar}function createTransactionStore({provider:cr}){let ar=loadData(),dr=cr;const fr=new Set,hr=new Map;function pr(Ar){dr=Ar}function mr(Ar,_r){var Cr,kr;return(kr=(Cr=ar[Ar])==null?void 0:Cr[_r])!=null?kr:[]}function gr(Ar,_r,Cr){const kr=validateTransaction(Cr);if(kr.length>0)throw new Error(["Unable to add transaction",...kr].join(`
`));br(Ar,_r,Rr=>[{...Cr,status:"pending"},...Rr.filter(({hash:Ir})=>Ir!==Cr.hash)])}function yr(Ar,_r){br(Ar,_r,()=>[])}function xr(Ar,_r,Cr,kr){br(Ar,_r,Rr=>Rr.map(Ir=>Ir.hash===Cr?{...Ir,status:kr}:Ir))}async function wr(Ar,_r){await Promise.all(mr(Ar,_r).filter(Cr=>Cr.status==="pending").map(async Cr=>{const{confirmations:kr,hash:Rr}=Cr,Ir=hr.get(Rr);if(Ir)return await Ir;const Nr=dr.waitForTransactionReceipt({confirmations:kr,hash:Rr}).then(({status:Pr})=>{hr.delete(Rr),Pr!==void 0&&xr(Ar,_r,Rr,Pr===0||Pr==="reverted"?"failed":"confirmed")});return hr.set(Rr,Nr),await Nr}))}function br(Ar,_r,Cr){var kr,Rr;ar=loadData(),ar[Ar]=(kr=ar[Ar])!=null?kr:{};let Ir=0;const Nr=10,Pr=Cr((Rr=ar[Ar][_r])!=null?Rr:[]).filter(({status:Tr})=>Tr==="pending"?!0:Ir++<=Nr);ar[Ar][_r]=Pr.length>0?Pr:void 0,Sr(),vr(),wr(Ar,_r)}function Sr(){localStorage.setItem(storageKey,JSON.stringify(ar))}function vr(){fr.forEach(Ar=>Ar())}function Er(Ar){return fr.add(Ar),()=>{fr.delete(Ar)}}return{addTransaction:gr,clearTransactions:yr,getTransactions:mr,onChange:Er,setProvider:pr,waitForPendingTransactions:wr}}var storeSingleton,TransactionStoreContext=reactExports.createContext(null);function TransactionStoreProvider({children:cr}){const ar=usePublicClient(),{address:dr}=useAccount(),fr=useChainId(),[hr]=reactExports.useState(()=>storeSingleton??(storeSingleton=createTransactionStore({provider:ar})));return reactExports.useEffect(()=>{hr.setProvider(ar)},[hr,ar]),reactExports.useEffect(()=>{dr&&fr&&hr.waitForPendingTransactions(dr,fr)},[hr,dr,fr]),React.createElement(TransactionStoreContext.Provider,{value:hr},cr)}function useTransactionStore(){const cr=reactExports.useContext(TransactionStoreContext);if(!cr)throw new Error("Transaction hooks must be used within RainbowKitProvider");return cr}function useRecentTransactions(){const cr=useTransactionStore(),{address:ar}=useAccount(),dr=useChainId(),[fr,hr]=reactExports.useState(()=>cr&&ar&&dr?cr.getTransactions(ar,dr):[]);return reactExports.useEffect(()=>{if(cr&&ar&&dr)return hr(cr.getTransactions(ar,dr)),cr.onChange(()=>{hr(cr.getTransactions(ar,dr))})},[cr,ar,dr]),fr}var resolveThemeVars=cr=>typeof cr=="function"?cr():cr;function cssObjectFromTheme(cr,{extends:ar}={}){const dr={...assignInlineVars(themeVars,resolveThemeVars(cr))};if(!ar)return dr;const fr=assignInlineVars(themeVars,resolveThemeVars(ar));return Object.fromEntries(Object.entries(dr).filter(([pr,mr])=>mr!==fr[pr]))}function cssStringFromTheme(cr,ar={}){return Object.entries(cssObjectFromTheme(cr,ar)).map(([dr,fr])=>`${dr}:${fr.replace(/[:;{}</>]/g,"")};`).join("")}var useWindowSize=()=>{const[cr,ar]=reactExports.useState({height:void 0,width:void 0});return reactExports.useEffect(()=>{function dr(){ar({height:window.innerHeight,width:window.innerWidth})}return window.addEventListener("resize",dr),dr(),()=>window.removeEventListener("resize",dr)},[]),cr},defaultAppInfo={appName:void 0,disclaimer:void 0,learnMoreUrl:"https://learn.rainbow.me/understanding-web3?utm_source=rainbowkit&utm_campaign=learnmore"},AppContext=reactExports.createContext(defaultAppInfo),CoolModeContext=reactExports.createContext(!1),ModalSizeOptions={COMPACT:"compact",WIDE:"wide"},ModalSizeContext=reactExports.createContext(ModalSizeOptions.WIDE),ShowRecentTransactionsContext=reactExports.createContext(!1),storageKey2="rk-version";function setRainbowKitVersion({version:cr}){localStorage.setItem(storageKey2,cr)}function useFingerprint(){const cr=reactExports.useCallback(()=>{setRainbowKitVersion({version:"1.0.10"})},[]);reactExports.useEffect(()=>{cr()},[cr])}function flatten$3(cr){const ar=[];for(const dr of cr)ar.push(...dr);return ar}function indexBy(cr,ar){const dr={};return cr.forEach(fr=>{const hr=ar(fr);hr&&(dr[hr]=fr)}),dr}function isSafari(){return typeof navigator<"u"&&/Version\/([0-9._]+).*Safari/.test(navigator.userAgent)}function isArc(){return typeof document<"u"&&getComputedStyle(document.body).getPropertyValue("--arc-palette-focus")!==""}function getBrowser(){var cr;if(typeof navigator>"u")return"Browser";const ar=navigator.userAgent.toLowerCase();return(cr=navigator.brave)!=null&&cr.isBrave?"Brave":ar.indexOf("edg/")>-1?"Edge":ar.indexOf("op")>-1?"Opera":isArc()?"Arc":ar.indexOf("chrome")>-1?"Chrome":ar.indexOf("firefox")>-1?"Firefox":isSafari()?"Safari":"Browser"}var getExtensionDownloadUrl=cr=>{var ar,dr,fr,hr,pr,mr,gr,yr,xr,wr,br,Sr;const vr=getBrowser();return(Sr={Arc:(ar=cr?.downloadUrls)==null?void 0:ar.chrome,Brave:(dr=cr?.downloadUrls)==null?void 0:dr.chrome,Chrome:(fr=cr?.downloadUrls)==null?void 0:fr.chrome,Edge:((hr=cr?.downloadUrls)==null?void 0:hr.edge)||((pr=cr?.downloadUrls)==null?void 0:pr.chrome),Firefox:(mr=cr?.downloadUrls)==null?void 0:mr.firefox,Opera:((gr=cr?.downloadUrls)==null?void 0:gr.opera)||((yr=cr?.downloadUrls)==null?void 0:yr.chrome),Safari:(xr=cr?.downloadUrls)==null?void 0:xr.safari,Browser:(wr=cr?.downloadUrls)==null?void 0:wr.browserExtension}[vr])!=null?Sr:(br=cr?.downloadUrls)==null?void 0:br.browserExtension},getMobileDownloadUrl=cr=>{var ar,dr,fr,hr;return(hr=isIOS$1()?(ar=cr?.downloadUrls)==null?void 0:ar.ios:(dr=cr?.downloadUrls)==null?void 0:dr.android)!=null?hr:(fr=cr?.downloadUrls)==null?void 0:fr.mobile},storageKey3="rk-recent";function safeParseJsonArray(cr){try{const ar=cr?JSON.parse(cr):[];return Array.isArray(ar)?ar:[]}catch{return[]}}function getRecentWalletIds(){return typeof localStorage<"u"?safeParseJsonArray(localStorage.getItem(storageKey3)):[]}function dedupe(cr){return[...new Set(cr)]}function addRecentWalletId(cr){const ar=dedupe([cr,...getRecentWalletIds()]);localStorage.setItem(storageKey3,JSON.stringify(ar))}function useWalletConnectors(){const cr=useRainbowKitChains(),ar=useInitialChainId(),{connectAsync:dr,connectors:fr}=useConnect(),hr=fr;async function pr(vr,Er){var Ar,_r,Cr;const kr=await Er.getChainId(),Rr=await dr({chainId:(Cr=ar??((Ar=cr.find(({id:Ir})=>Ir===kr))==null?void 0:Ar.id))!=null?Cr:(_r=cr[0])==null?void 0:_r.id,connector:Er});return Rr&&addRecentWalletId(vr),Rr}async function mr(vr,Er){try{return await pr(vr,Er)}catch(Ar){if(!(Ar.name==="UserRejectedRequestError"||Ar.message==="Connection request reset. Please try again."))throw Ar}}const gr=flatten$3(hr.map(vr=>{var Er;return(Er=vr._wallets)!=null?Er:[]})).sort((vr,Er)=>vr.index-Er.index),yr=indexBy(gr,vr=>vr.id),xr=3,wr=getRecentWalletIds().map(vr=>yr[vr]).filter(isNotNullish).slice(0,xr),br=[...wr,...gr.filter(vr=>!wr.includes(vr))],Sr=[];return br.forEach(vr=>{var Er;if(!vr)return;const Ar=wr.includes(vr);Sr.push({...vr,connect:()=>vr.connector.showQrModal?mr(vr.id,vr.connector):pr(vr.id,vr.connector),extensionDownloadUrl:getExtensionDownloadUrl(vr),groupName:vr.groupName,mobileDownloadUrl:getMobileDownloadUrl(vr),onConnecting:_r=>vr.connector.on("message",({type:Cr})=>Cr==="connecting"?_r():void 0),ready:((Er=vr.installed)!=null?Er:!0)&&vr.connector.ready,recent:Ar,showWalletConnectModal:vr.walletConnectModalConnector?()=>mr(vr.id,vr.walletConnectModalConnector):void 0})}),Sr}var src$3=async()=>(await __vitePreload(()=>import("./assets-26YY4GVD-ebee59af.js"),[])).default,preloadAssetsIcon=()=>loadImages(src$3),AssetsIcon=()=>React.createElement(AsyncImage,{background:"#d0d5de",borderRadius:"10",height:"48",src:src$3,width:"48"}),src2=async()=>(await __vitePreload(()=>import("./login-ZSMM5UYL-b8add756.js"),[])).default,preloadLoginIcon=()=>loadImages(src2),LoginIcon=()=>React.createElement(AsyncImage,{background:"#d0d5de",borderRadius:"10",height:"48",src:src2,width:"48"}),Text=React.forwardRef(({as:cr="div",children:ar,className:dr,color:fr,display:hr,font:pr="body",id:mr,size:gr="16",style:yr,tabIndex:xr,textAlign:wr="inherit",weight:br="regular"},Sr)=>React.createElement(Box,{as:cr,className:dr,color:fr,display:hr,fontFamily:pr,fontSize:gr,fontWeight:br,id:mr,ref:Sr,style:yr,tabIndex:xr,textAlign:wr},ar));Text.displayName="Text";var sizeVariants={large:{fontSize:"16",paddingX:"24",paddingY:"10"},medium:{fontSize:"14",height:"28",paddingX:"12",paddingY:"4"},small:{fontSize:"14",paddingX:"10",paddingY:"5"}};function ActionButton({disabled:cr=!1,href:ar,label:dr,onClick:fr,rel:hr="noreferrer noopener",size:pr="medium",target:mr="_blank",testId:gr,type:yr="primary"}){const xr=yr==="primary",wr=pr!=="large",br=isMobile(),Sr=cr?"actionButtonSecondaryBackground":xr?"accentColor":wr?"actionButtonSecondaryBackground":null,{fontSize:vr,height:Er,paddingX:Ar,paddingY:_r}=sizeVariants[pr],Cr=!br||!wr;return React.createElement(Box,{...ar?cr?{}:{as:"a",href:ar,rel:hr,target:mr}:{as:"button",type:"button"},onClick:cr?void 0:fr,...Cr?{borderColor:br&&!wr&&!xr?"actionButtonBorderMobile":"actionButtonBorder",borderStyle:"solid",borderWidth:"1"}:{},borderRadius:"actionButton",className:!cr&&touchableStyles({active:"shrinkSm",hover:"grow"}),display:"block",paddingX:Ar,paddingY:_r,style:{willChange:"transform"},testId:gr,textAlign:"center",transition:"transform",...Sr?{background:Sr}:{},...Er?{height:Er}:{}},React.createElement(Text,{color:cr?"modalTextSecondary":xr?"accentColorForeground":"accentColor",size:vr,weight:"bold"},dr))}var CloseIcon=()=>isMobile()?React.createElement("svg",{"aria-hidden":!0,fill:"none",height:"11.5",viewBox:"0 0 11.5 11.5",width:"11.5",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M2.13388 0.366117C1.64573 -0.122039 0.854272 -0.122039 0.366117 0.366117C-0.122039 0.854272 -0.122039 1.64573 0.366117 2.13388L3.98223 5.75L0.366117 9.36612C-0.122039 9.85427 -0.122039 10.6457 0.366117 11.1339C0.854272 11.622 1.64573 11.622 2.13388 11.1339L5.75 7.51777L9.36612 11.1339C9.85427 11.622 10.6457 11.622 11.1339 11.1339C11.622 10.6457 11.622 9.85427 11.1339 9.36612L7.51777 5.75L11.1339 2.13388C11.622 1.64573 11.622 0.854272 11.1339 0.366117C10.6457 -0.122039 9.85427 -0.122039 9.36612 0.366117L5.75 3.98223L2.13388 0.366117Z",fill:"currentColor"})):React.createElement("svg",{"aria-hidden":!0,fill:"none",height:"10",viewBox:"0 0 10 10",width:"10",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M1.70711 0.292893C1.31658 -0.0976311 0.683417 -0.0976311 0.292893 0.292893C-0.0976311 0.683417 -0.0976311 1.31658 0.292893 1.70711L3.58579 5L0.292893 8.29289C-0.0976311 8.68342 -0.0976311 9.31658 0.292893 9.70711C0.683417 10.0976 1.31658 10.0976 1.70711 9.70711L5 6.41421L8.29289 9.70711C8.68342 10.0976 9.31658 10.0976 9.70711 9.70711C10.0976 9.31658 10.0976 8.68342 9.70711 8.29289L6.41421 5L9.70711 1.70711C10.0976 1.31658 10.0976 0.683417 9.70711 0.292893C9.31658 -0.0976311 8.68342 -0.0976311 8.29289 0.292893L5 3.58579L1.70711 0.292893Z",fill:"currentColor"})),CloseButton=({"aria-label":cr="Close",onClose:ar})=>{const dr=isMobile();return React.createElement(Box,{alignItems:"center","aria-label":cr,as:"button",background:"closeButtonBackground",borderColor:"actionButtonBorder",borderRadius:"full",borderStyle:"solid",borderWidth:dr?"0":"1",className:touchableStyles({active:"shrinkSm",hover:"growLg"}),color:"closeButton",display:"flex",height:dr?"30":"28",justifyContent:"center",onClick:ar,style:{willChange:"transform"},transition:"default",type:"button",width:dr?"30":"28"},React.createElement(CloseIcon,null))},signInIcon=async()=>(await __vitePreload(()=>import("./sign-FZVB2CS6-f23ac888.js"),[])).default;function SignIn({onClose:cr}){const[{status:ar,...dr},fr]=React.useState({status:"idle"}),hr=useAuthenticationAdapter(),pr=reactExports.useCallback(async()=>{try{const Er=await hr.getNonce();fr(Ar=>({...Ar,nonce:Er}))}catch{fr(Ar=>({...Ar,errorMessage:"Error preparing message, please retry!",status:"idle"}))}},[hr]),mr=reactExports.useRef(!1);React.useEffect(()=>{mr.current||(mr.current=!0,pr())},[pr]);const gr=isMobile(),{address:yr}=useAccount(),{chain:xr}=useNetwork(),{signMessageAsync:wr}=useSignMessage(),{disconnect:br}=useDisconnect(),Sr=()=>br(),vr=async()=>{try{const Er=xr?.id,{nonce:Ar}=dr;if(!yr||!Er||!Ar)return;fr(kr=>({...kr,errorMessage:void 0,status:"signing"}));const _r=hr.createMessage({address:yr,chainId:Er,nonce:Ar});let Cr;try{Cr=await wr({message:hr.getMessageBody({message:_r})})}catch(kr){return kr instanceof UserRejectedRequestError?fr(Rr=>({...Rr,status:"idle"})):fr(Rr=>({...Rr,errorMessage:"Error signing message, please retry!",status:"idle"}))}fr(kr=>({...kr,status:"verifying"}));try{if(await hr.verify({message:_r,signature:Cr}))return;throw new Error}catch{return fr(Rr=>({...Rr,errorMessage:"Error verifying signature, please retry!",status:"idle"}))}}catch{fr({errorMessage:"Oops, something went wrong!",status:"idle"})}};return React.createElement(Box,{position:"relative"},React.createElement(Box,{display:"flex",paddingRight:"16",paddingTop:"16",position:"absolute",right:"0"},React.createElement(CloseButton,{onClose:cr})),React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:gr?"32":"24",padding:"24",paddingX:"18",style:{paddingTop:gr?"60px":"36px"}},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:gr?"6":"4",style:{maxWidth:gr?320:280}},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:gr?"32":"16"},React.createElement(AsyncImage,{height:40,src:signInIcon,width:40}),React.createElement(Text,{color:"modalText",size:gr?"20":"18",textAlign:"center",weight:"heavy"},"Verify your account")),React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:gr?"16":"12"},React.createElement(Text,{color:"modalTextSecondary",size:gr?"16":"14",textAlign:"center"},"To finish connecting, you must sign a message in your wallet to verify that you are the owner of this account."),ar==="idle"&&dr.errorMessage?React.createElement(Text,{color:"error",size:gr?"16":"14",textAlign:"center",weight:"bold"},dr.errorMessage):null)),React.createElement(Box,{alignItems:gr?void 0:"center",display:"flex",flexDirection:"column",gap:"8",width:"full"},React.createElement(ActionButton,{disabled:!dr.nonce||ar==="signing"||ar==="verifying",label:dr.nonce?ar==="signing"?"Waiting for signature...":ar==="verifying"?"Verifying signature...":"Send message":"Preparing message...",onClick:vr,size:gr?"large":"medium",testId:"auth-message-button"}),gr?React.createElement(ActionButton,{label:"Cancel",onClick:Sr,size:"large",type:"secondary"}):React.createElement(Box,{as:"button",borderRadius:"full",className:touchableStyles({active:"shrink",hover:"grow"}),display:"block",onClick:Sr,paddingX:"10",paddingY:"5",rel:"noreferrer",style:{willChange:"transform"},target:"_blank",transition:"default"},React.createElement(Text,{color:"closeButton",size:gr?"16":"14",weight:"bold"},"Cancel")))))}function usePreloadImages(){const cr=useRainbowKitChains(),ar=useWalletConnectors(),dr=useAuthenticationStatus()==="unauthenticated",fr=reactExports.useCallback(()=>{loadImages(...ar.map(hr=>hr.iconUrl),...cr.map(hr=>hr.iconUrl).filter(isNotNullish)),isMobile()||(preloadAssetsIcon(),preloadLoginIcon()),dr&&loadImages(signInIcon)},[ar,cr,dr]);reactExports.useEffect(()=>{fr()},[fr])}var storageKey4="WALLETCONNECT_DEEPLINK_CHOICE";function setWalletConnectDeepLink({mobileUri:cr,name:ar}){localStorage.setItem(storageKey4,JSON.stringify({href:cr.split("?")[0],name:ar}))}function clearWalletConnectDeepLink(){localStorage.removeItem(storageKey4)}var ThemeIdContext=reactExports.createContext(void 0),attr="data-rk",createThemeRootProps=cr=>({[attr]:cr||""}),createThemeRootSelector=cr=>{if(cr&&!/^[a-zA-Z0-9_]+$/.test(cr))throw new Error(`Invalid ID: ${cr}`);return cr?`[${attr}="${cr}"]`:`[${attr}]`},useThemeRootProps=()=>{const cr=reactExports.useContext(ThemeIdContext);return createThemeRootProps(cr)},defaultTheme=lightTheme();function RainbowKitProvider({appInfo:cr,avatar:ar,chains:dr,children:fr,coolMode:hr=!1,id:pr,initialChain:mr,modalSize:gr=ModalSizeOptions.WIDE,showRecentTransactions:yr=!1,theme:xr=defaultTheme}){if(usePreloadImages(),useFingerprint(),useAccount({onDisconnect:clearWalletConnectDeepLink}),typeof xr=="function")throw new Error('A theme function was provided to the "theme" prop instead of a theme object. You must execute this function to get the resulting theme object.');const wr=createThemeRootSelector(pr),br={...defaultAppInfo,...cr},Sr=ar??defaultAvatar,{width:vr}=useWindowSize(),Er=vr&&vr<largeScreenMinWidth;return React.createElement(RainbowKitChainProvider,{chains:dr,initialChain:mr},React.createElement(CoolModeContext.Provider,{value:hr},React.createElement(ModalSizeContext.Provider,{value:Er?ModalSizeOptions.COMPACT:gr},React.createElement(ShowRecentTransactionsContext.Provider,{value:yr},React.createElement(TransactionStoreProvider,null,React.createElement(AvatarContext.Provider,{value:Sr},React.createElement(AppContext.Provider,{value:br},React.createElement(ThemeIdContext.Provider,{value:pr},React.createElement(ModalProvider,null,xr?React.createElement("div",{...createThemeRootProps(pr)},React.createElement("style",{dangerouslySetInnerHTML:{__html:[`${wr}{${cssStringFromTheme("lightMode"in xr?xr.lightMode:xr)}}`,"darkMode"in xr?`@media(prefers-color-scheme:dark){${wr}{${cssStringFromTheme(xr.darkMode,{extends:xr.lightMode})}}}`:null].join("")}}),fr):fr)))))))))}var content="_9pm4ki5 ju367va ju367v10 ju367v8m",overlay="_9pm4ki3 ju367v9b ju367vax ju367va ju367v2l ju367v8l",moveFocusWithin=(cr,ar)=>{const dr=cr.querySelectorAll("button:not(:disabled), a[href]");dr.length!==0&&dr[ar==="end"?dr.length-1:0].focus()};function FocusTrap(cr){const ar=reactExports.useRef(null);return reactExports.useEffect(()=>{const dr=document.activeElement;return()=>{var fr;(fr=dr.focus)==null||fr.call(dr)}},[]),reactExports.useEffect(()=>{if(ar.current){const dr=ar.current.querySelector("[data-auto-focus]");dr?dr.focus():ar.current.focus()}},[ar]),React.createElement(React.Fragment,null,React.createElement("div",{onFocus:reactExports.useCallback(()=>ar.current&&moveFocusWithin(ar.current,"end"),[]),tabIndex:0}),React.createElement("div",{ref:ar,style:{outline:"none"},tabIndex:-1,...cr}),React.createElement("div",{onFocus:reactExports.useCallback(()=>ar.current&&moveFocusWithin(ar.current,"start"),[]),tabIndex:0}))}var stopPropagation=cr=>cr.stopPropagation();function Dialog({children:cr,onClose:ar,open:dr,titleId:fr}){reactExports.useEffect(()=>{const xr=wr=>dr&&wr.key==="Escape"&&ar();return document.addEventListener("keydown",xr),()=>document.removeEventListener("keydown",xr)},[dr,ar]);const[hr,pr]=reactExports.useState(!0);reactExports.useEffect(()=>{pr(getComputedStyle(window.document.body).overflow!=="hidden")},[]);const mr=reactExports.useCallback(()=>ar(),[ar]),gr=useThemeRootProps(),yr=isMobile();return React.createElement(React.Fragment,null,dr?reactDomExports.createPortal(React.createElement(RemoveScroll$1,{enabled:hr},React.createElement(Box,{...gr},React.createElement(Box,{...gr,alignItems:yr?"flex-end":"center","aria-labelledby":fr,"aria-modal":!0,className:overlay,onClick:mr,position:"fixed",role:"dialog"},React.createElement(FocusTrap,{className:content,onClick:stopPropagation,role:"document"},cr)))),document.body):null)}var bottomSheetOverrides="_1ckjpok7",dialogContent="_1ckjpok1 ju367vb0 ju367vdl ju367vp ju367vt ju367vv ju367vef ju367va ju367v10 ju367v67 ju367v8m",dialogContentCompactMode="_1ckjpok4 _1ckjpok1 ju367vb0 ju367vdl ju367vp ju367vt ju367vv ju367vef ju367va ju367v10 ju367v67 ju367v8m",dialogContentMobile="_1ckjpok6 ju367vq",dialogContentWideDesktop="_1ckjpok3 _1ckjpok1 ju367vb0 ju367vdl ju367vp ju367vt ju367vv ju367vef ju367va ju367v10 ju367v67 ju367v8m",dialogContentWideMobile="_1ckjpok2 _1ckjpok1 ju367vb0 ju367vdl ju367vp ju367vt ju367vv ju367vef ju367va ju367v10 ju367v67 ju367v8m";function DialogContent({bottomSheetOnMobile:cr=!1,children:ar,marginTop:dr,padding:fr="16",wide:hr=!1}){const pr=isMobile(),gr=reactExports.useContext(ModalSizeContext)===ModalSizeOptions.COMPACT;return React.createElement(Box,{marginTop:dr},React.createElement(Box,{className:[hr?pr?dialogContentWideMobile:gr?dialogContentCompactMode:dialogContentWideDesktop:dialogContent,pr?dialogContentMobile:null,pr&&cr?bottomSheetOverrides:null].join(" ")},React.createElement(Box,{padding:fr},ar)))}var units$1=["k","m","b","t"];function toPrecision(cr,ar=1){return cr.toString().replace(new RegExp(`(.+\\.\\d{${ar}})\\d+`),"$1").replace(/(\.[1-9]*)0+$/,"$1").replace(/\.$/,"")}function abbreviateETHBalance(cr){if(cr<1)return toPrecision(cr,3);if(cr<10**2)return toPrecision(cr,2);if(cr<10**4)return new Intl.NumberFormat().format(parseFloat(toPrecision(cr,1)));const ar=10**1;let dr=String(cr);for(let fr=units$1.length-1;fr>=0;fr--){const hr=10**((fr+1)*3);if(hr<=cr){cr=cr*ar/hr/ar,dr=toPrecision(cr,1)+units$1[fr];break}}return dr}function formatAddress$1(cr){return cr.length<4+4?cr:`${cr.substring(0,4)}${cr.substring(cr.length-4)}`}function formatENS(cr){const ar=cr.split("."),dr=ar.pop();return ar.join(".").length>24?`${ar.join(".").substring(0,24)}...`:`${ar.join(".")}.${dr}`}var CopiedIcon=()=>React.createElement("svg",{fill:"none",height:"13",viewBox:"0 0 13 13",width:"13",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M4.94568 12.2646C5.41052 12.2646 5.77283 12.0869 6.01892 11.7109L12.39 1.96973C12.5677 1.69629 12.6429 1.44336 12.6429 1.2041C12.6429 0.561523 12.1644 0.0966797 11.5082 0.0966797C11.057 0.0966797 10.7767 0.260742 10.5033 0.691406L4.9115 9.50977L2.07458 5.98926C1.82166 5.68848 1.54822 5.55176 1.16541 5.55176C0.502319 5.55176 0.0238037 6.02344 0.0238037 6.66602C0.0238037 6.95312 0.112671 7.20605 0.358765 7.48633L3.88611 11.7588C4.18005 12.1074 4.50818 12.2646 4.94568 12.2646Z",fill:"currentColor"})),CopyIcon=()=>React.createElement("svg",{fill:"none",height:"16",viewBox:"0 0 17 16",width:"17",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M3.04236 12.3027H4.18396V13.3008C4.18396 14.8525 5.03845 15.7002 6.59705 15.7002H13.6244C15.183 15.7002 16.0375 14.8525 16.0375 13.3008V6.24609C16.0375 4.69434 15.183 3.84668 13.6244 3.84668H12.4828V2.8418C12.4828 1.29688 11.6283 0.442383 10.0697 0.442383H3.04236C1.48376 0.442383 0.629272 1.29004 0.629272 2.8418V9.90332C0.629272 11.4551 1.48376 12.3027 3.04236 12.3027ZM3.23376 10.5391C2.68689 10.5391 2.39294 10.2656 2.39294 9.68457V3.06055C2.39294 2.47949 2.68689 2.21289 3.23376 2.21289H9.8783C10.4252 2.21289 10.7191 2.47949 10.7191 3.06055V3.84668H6.59705C5.03845 3.84668 4.18396 4.69434 4.18396 6.24609V10.5391H3.23376ZM6.78845 13.9365C6.24158 13.9365 5.94763 13.6699 5.94763 13.0889V6.45801C5.94763 5.87695 6.24158 5.61035 6.78845 5.61035H13.433C13.9799 5.61035 14.2738 5.87695 14.2738 6.45801V13.0889C14.2738 13.6699 13.9799 13.9365 13.433 13.9365H6.78845Z",fill:"currentColor"})),DisconnectIcon=()=>React.createElement("svg",{fill:"none",height:"16",viewBox:"0 0 18 16",width:"18",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M2.67834 15.5908H9.99963C11.5514 15.5908 12.399 14.7432 12.399 13.1777V10.2656H10.6354V12.9863C10.6354 13.5332 10.3688 13.8271 9.78772 13.8271H2.89026C2.3092 13.8271 2.0426 13.5332 2.0426 12.9863V3.15625C2.0426 2.60254 2.3092 2.30859 2.89026 2.30859H9.78772C10.3688 2.30859 10.6354 2.60254 10.6354 3.15625V5.89746H12.399V2.95801C12.399 1.39941 11.5514 0.544922 9.99963 0.544922H2.67834C1.12659 0.544922 0.278931 1.39941 0.278931 2.95801V13.1777C0.278931 14.7432 1.12659 15.5908 2.67834 15.5908ZM7.43616 8.85059H14.0875L15.0924 8.78906L14.566 9.14453L13.6842 9.96484C13.5406 10.1016 13.4586 10.2861 13.4586 10.4844C13.4586 10.8398 13.7321 11.168 14.1217 11.168C14.3199 11.168 14.4635 11.0928 14.6002 10.9561L16.7809 8.68652C16.986 8.48145 17.0543 8.27637 17.0543 8.06445C17.0543 7.85254 16.986 7.64746 16.7809 7.43555L14.6002 5.17285C14.4635 5.03613 14.3199 4.9541 14.1217 4.9541C13.7321 4.9541 13.4586 5.27539 13.4586 5.6377C13.4586 5.83594 13.5406 6.02734 13.6842 6.15723L14.566 6.98438L15.0924 7.33984L14.0875 7.27148H7.43616C7.01917 7.27148 6.65686 7.62012 6.65686 8.06445C6.65686 8.50195 7.01917 8.85059 7.43616 8.85059Z",fill:"currentColor"}));function useClearRecentTransactions(){const cr=useTransactionStore(),{address:ar}=useAccount(),dr=useChainId();return reactExports.useCallback(()=>{if(!ar||!dr)throw new Error("No address or chain ID found");cr.clearTransactions(ar,dr)},[cr,ar,dr])}var chainToExplorerUrl=cr=>{var ar,dr;return(dr=(ar=cr?.blockExplorers)==null?void 0:ar.default)==null?void 0:dr.url},ExternalLinkIcon=()=>React.createElement("svg",{fill:"none",height:"19",viewBox:"0 0 20 19",width:"20",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M10 18.9443C15.0977 18.9443 19.2812 14.752 19.2812 9.6543C19.2812 4.56543 15.0889 0.373047 10 0.373047C4.90234 0.373047 0.71875 4.56543 0.71875 9.6543C0.71875 14.752 4.91113 18.9443 10 18.9443ZM10 16.6328C6.1416 16.6328 3.03906 13.5215 3.03906 9.6543C3.03906 5.7959 6.13281 2.68457 10 2.68457C13.8584 2.68457 16.9697 5.7959 16.9697 9.6543C16.9785 13.5215 13.8672 16.6328 10 16.6328ZM12.7158 12.1416C13.2432 12.1416 13.5684 11.7549 13.5684 11.1836V7.19336C13.5684 6.44629 13.1377 6.05957 12.417 6.05957H8.40918C7.8291 6.05957 7.45117 6.38477 7.45117 6.91211C7.45117 7.43945 7.8291 7.77344 8.40918 7.77344H9.69238L10.7207 7.63281L9.53418 8.67871L6.73047 11.4912C6.53711 11.6758 6.41406 11.9395 6.41406 12.2031C6.41406 12.7832 6.85352 13.1699 7.39844 13.1699C7.68848 13.1699 7.92578 13.0732 8.1543 12.8623L10.9316 10.0762L11.9775 8.89844L11.8545 9.98828V11.1836C11.8545 11.7725 12.1885 12.1416 12.7158 12.1416Z",fill:"currentColor"})),CancelIcon=()=>React.createElement("svg",{fill:"none",height:"19",viewBox:"0 0 20 19",width:"20",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M10 18.9443C15.0977 18.9443 19.2812 14.752 19.2812 9.6543C19.2812 4.56543 15.0889 0.373047 10 0.373047C4.90234 0.373047 0.71875 4.56543 0.71875 9.6543C0.71875 14.752 4.91113 18.9443 10 18.9443ZM10 16.6328C6.1416 16.6328 3.03906 13.5215 3.03906 9.6543C3.03906 5.7959 6.13281 2.68457 10 2.68457C13.8584 2.68457 16.9697 5.7959 16.9697 9.6543C16.9785 13.5215 13.8672 16.6328 10 16.6328ZM7.29297 13.3018C7.58301 13.3018 7.81152 13.2139 7.99609 13.0205L10 11.0166L12.0127 13.0205C12.1973 13.2051 12.4258 13.3018 12.707 13.3018C13.2432 13.3018 13.6562 12.8887 13.6562 12.3525C13.6562 12.0977 13.5508 11.8691 13.3662 11.6934L11.3535 9.67188L13.375 7.6416C13.5596 7.44824 13.6562 7.22852 13.6562 6.98242C13.6562 6.44629 13.2432 6.0332 12.7158 6.0332C12.4346 6.0332 12.2148 6.12109 12.0215 6.31445L10 8.32715L7.9873 6.32324C7.80273 6.12988 7.58301 6.04199 7.29297 6.04199C6.76562 6.04199 6.35254 6.45508 6.35254 6.99121C6.35254 7.2373 6.44922 7.46582 6.63379 7.6416L8.65527 9.67188L6.63379 11.6934C6.44922 11.8691 6.35254 12.1064 6.35254 12.3525C6.35254 12.8887 6.76562 13.3018 7.29297 13.3018Z",fill:"currentColor"})),SuccessIcon=()=>React.createElement("svg",{fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M10 19.4443C15.0977 19.4443 19.2812 15.252 19.2812 10.1543C19.2812 5.06543 15.0889 0.873047 10 0.873047C4.90234 0.873047 0.71875 5.06543 0.71875 10.1543C0.71875 15.252 4.91113 19.4443 10 19.4443ZM10 17.1328C6.1416 17.1328 3.03906 14.0215 3.03906 10.1543C3.03906 6.2959 6.13281 3.18457 10 3.18457C13.8584 3.18457 16.9697 6.2959 16.9697 10.1543C16.9785 14.0215 13.8672 17.1328 10 17.1328ZM9.07715 14.3379C9.4375 14.3379 9.7627 14.1533 9.97363 13.8369L13.7441 8.00977C13.8848 7.79883 13.9814 7.5791 13.9814 7.36816C13.9814 6.84961 13.5244 6.48926 13.0322 6.48926C12.707 6.48926 12.4258 6.66504 12.2148 7.0166L9.05957 12.0967L7.5918 10.2949C7.37207 10.0225 7.13477 9.9082 6.84473 9.9082C6.33496 9.9082 5.92188 10.3125 5.92188 10.8223C5.92188 11.0684 6.00098 11.2793 6.18555 11.5078L8.1543 13.8545C8.40918 14.1709 8.70801 14.3379 9.07715 14.3379Z",fill:"currentColor"})),getTxStatusIcon=cr=>{switch(cr){case"pending":return SpinnerIcon;case"confirmed":return SuccessIcon;case"failed":return CancelIcon;default:return SpinnerIcon}};function TxItem({tx:cr}){const ar=isMobile(),dr=getTxStatusIcon(cr.status),fr=cr.status==="failed"?"error":"accentColor",{chain:hr}=useNetwork(),pr=cr.status==="confirmed"?"Confirmed":cr.status==="failed"?"Failed":"Pending",mr=chainToExplorerUrl(hr);return React.createElement(React.Fragment,null,React.createElement(Box,{...mr?{as:"a",background:{hover:"profileForeground"},borderRadius:"menuButton",className:touchableStyles({active:"shrink"}),href:`${mr}/tx/${cr.hash}`,rel:"noreferrer noopener",target:"_blank",transition:"default"}:{},color:"modalText",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"8",width:"full"},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",gap:ar?"16":"14"},React.createElement(Box,{color:fr},React.createElement(dr,null)),React.createElement(Box,{display:"flex",flexDirection:"column",gap:ar?"3":"1"},React.createElement(Box,null,React.createElement(Text,{color:"modalText",font:"body",size:ar?"16":"14",weight:"bold"},cr?.description)),React.createElement(Box,null,React.createElement(Text,{color:cr.status==="pending"?"modalTextSecondary":fr,font:"body",size:"14",weight:ar?"medium":"regular"},pr)))),mr&&React.createElement(Box,{alignItems:"center",color:"modalTextDim",display:"flex"},React.createElement(ExternalLinkIcon,null))))}var NUMBER_OF_VISIBLE_TXS=3;function TxList({address:cr}){const ar=useRecentTransactions(),dr=useClearRecentTransactions(),{chain:fr}=useNetwork(),hr=chainToExplorerUrl(fr),pr=ar.slice(0,NUMBER_OF_VISIBLE_TXS),mr=pr.length>0,gr=isMobile(),{appName:yr}=reactExports.useContext(AppContext);return React.createElement(React.Fragment,null,React.createElement(Box,{display:"flex",flexDirection:"column",gap:"10",paddingBottom:"2",paddingTop:"16",paddingX:gr?"8":"18"},mr&&React.createElement(Box,{paddingBottom:gr?"4":"0",paddingTop:"8",paddingX:gr?"12":"6"},React.createElement(Box,{display:"flex",justifyContent:"space-between"},React.createElement(Text,{color:"modalTextSecondary",size:gr?"16":"14",weight:"semibold"},"Recent Transactions"),React.createElement(Box,{style:{marginBottom:-6,marginLeft:-10,marginRight:-10,marginTop:-6}},React.createElement(Box,{as:"button",background:{hover:"profileForeground"},borderRadius:"actionButton",className:touchableStyles({active:"shrink"}),onClick:dr,paddingX:gr?"8":"12",paddingY:gr?"4":"5",transition:"default",type:"button"},React.createElement(Text,{color:"modalTextSecondary",size:gr?"16":"14",weight:"semibold"},"Clear All"))))),React.createElement(Box,{display:"flex",flexDirection:"column",gap:"4"},mr?pr.map(xr=>React.createElement(TxItem,{key:xr.hash,tx:xr})):React.createElement(React.Fragment,null,React.createElement(Box,{padding:gr?"12":"8"},React.createElement(Text,{color:"modalTextDim",size:gr?"16":"14",weight:gr?"medium":"bold"},yr??"Your"," transactions will appear here...")),gr&&React.createElement(Box,{background:"generalBorderDim",height:"1",marginX:"12",marginY:"8"})))),hr&&React.createElement(Box,{paddingBottom:"18",paddingX:gr?"8":"18"},React.createElement(Box,{alignItems:"center",as:"a",background:{hover:"profileForeground"},borderRadius:"menuButton",className:touchableStyles({active:"shrink"}),color:"modalTextDim",display:"flex",flexDirection:"row",href:`${hr}/address/${cr}`,justifyContent:"space-between",paddingX:"8",paddingY:"12",rel:"noreferrer noopener",style:{willChange:"transform"},target:"_blank",transition:"default",width:"full",...gr?{paddingLeft:"12"}:{}},React.createElement(Text,{color:"modalText",font:"body",size:gr?"16":"14",weight:gr?"semibold":"bold"},"View more on Explorer"),React.createElement(ExternalLinkIcon,null))))}function ProfileDetailsAction({action:cr,icon:ar,label:dr,testId:fr,url:hr}){const pr=isMobile();return React.createElement(Box,{...hr?{as:"a",href:hr,rel:"noreferrer noopener",target:"_blank"}:{as:"button",type:"button"},background:{base:"profileAction",...pr?{}:{hover:"profileActionHover"}},borderRadius:"menuButton",boxShadow:"profileDetailsAction",className:touchableStyles({active:"shrinkSm",hover:pr?void 0:"grow"}),display:"flex",onClick:cr,padding:pr?"6":"8",style:{willChange:"transform"},testId:fr,transition:"default",width:"full"},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:"1",justifyContent:"center",paddingTop:"2",width:"full"},React.createElement(Box,{color:"modalText",height:"max"},ar),React.createElement(Box,null,React.createElement(Text,{color:"modalText",size:pr?"12":"13",weight:"semibold"},dr))))}function ProfileDetails({address:cr,balanceData:ar,ensAvatar:dr,ensName:fr,onClose:hr,onDisconnect:pr}){const mr=reactExports.useContext(ShowRecentTransactionsContext),[gr,yr]=reactExports.useState(!1),xr=reactExports.useCallback(()=>{cr&&(navigator.clipboard.writeText(cr),yr(!0))},[cr]);if(reactExports.useEffect(()=>{if(gr){const Ar=setTimeout(()=>{yr(!1)},1500);return()=>clearTimeout(Ar)}},[gr]),!cr)return null;const wr=fr?formatENS(fr):formatAddress$1(cr),br=ar?.formatted,Sr=br?abbreviateETHBalance(parseFloat(br)):void 0,vr="rk_profile_title",Er=isMobile();return React.createElement(React.Fragment,null,React.createElement(Box,{display:"flex",flexDirection:"column"},React.createElement(Box,{background:"profileForeground",padding:"16"},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:Er?"16":"12",justifyContent:"center",margin:"8",style:{textAlign:"center"}},React.createElement(Box,{style:{position:"absolute",right:16,top:16,willChange:"transform"}},React.createElement(CloseButton,{onClose:hr}))," ",React.createElement(Box,{marginTop:Er?"24":"0"},React.createElement(Avatar,{address:cr,imageUrl:dr,size:Er?82:74})),React.createElement(Box,{display:"flex",flexDirection:"column",gap:Er?"4":"0",textAlign:"center"},React.createElement(Box,{textAlign:"center"},React.createElement(Text,{as:"h1",color:"modalText",id:vr,size:Er?"20":"18",weight:"heavy"},wr)),ar&&React.createElement(Box,{textAlign:"center"},React.createElement(Text,{as:"h1",color:"modalTextSecondary",id:vr,size:Er?"16":"14",weight:"semibold"},Sr," ",ar.symbol)))),React.createElement(Box,{display:"flex",flexDirection:"row",gap:"8",margin:"2",marginTop:"16"},React.createElement(ProfileDetailsAction,{action:xr,icon:gr?React.createElement(CopiedIcon,null):React.createElement(CopyIcon,null),label:gr?"Copied!":"Copy Address"}),React.createElement(ProfileDetailsAction,{action:pr,icon:React.createElement(DisconnectIcon,null),label:"Disconnect",testId:"disconnect-button"}))),mr&&React.createElement(React.Fragment,null,React.createElement(Box,{background:"generalBorder",height:"1",marginTop:"-1"}),React.createElement(Box,null,React.createElement(TxList,{address:cr})))))}function AccountModal({onClose:cr,open:ar}){const{address:dr}=useAccount(),{data:fr}=useBalance({address:dr}),hr=useMainnetEnsName(dr),pr=useMainnetEnsAvatar(hr),{disconnect:mr}=useDisconnect();if(!dr)return null;const gr="rk_account_modal_title";return React.createElement(React.Fragment,null,dr&&React.createElement(Dialog,{onClose:cr,open:ar,titleId:gr},React.createElement(DialogContent,{bottomSheetOnMobile:!0,padding:"0"},React.createElement(ProfileDetails,{address:dr,balanceData:fr,ensAvatar:pr,ensName:hr,onClose:cr,onDisconnect:mr}))))}var DisconnectSqIcon=({size:cr})=>React.createElement("svg",{fill:"none",height:cr,viewBox:"0 0 28 28",width:cr,xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M6.742 22.195h8.367c1.774 0 2.743-.968 2.743-2.758V16.11h-2.016v3.11c0 .625-.305.96-.969.96H6.984c-.664 0-.968-.335-.968-.96V7.984c0-.632.304-.968.968-.968h7.883c.664 0 .969.336.969.968v3.133h2.016v-3.36c0-1.78-.97-2.757-2.743-2.757H6.742C4.97 5 4 5.977 4 7.758v11.68c0 1.789.969 2.757 2.742 2.757Zm5.438-7.703h7.601l1.149-.07-.602.406-1.008.938a.816.816 0 0 0-.258.593c0 .407.313.782.758.782.227 0 .39-.086.547-.243l2.492-2.593c.235-.235.313-.47.313-.711 0-.242-.078-.477-.313-.719l-2.492-2.586c-.156-.156-.32-.25-.547-.25-.445 0-.758.367-.758.781 0 .227.094.446.258.594l1.008.945.602.407-1.149-.079H12.18a.904.904 0 0 0 0 1.805Z",fill:"currentColor"})),unsetBackgroundOnHover="v9horb0",MenuButton=React.forwardRef(({children:cr,currentlySelected:ar=!1,onClick:dr,testId:fr,...hr},pr)=>{const mr=isMobile();return React.createElement(Box,{as:"button",borderRadius:"menuButton",disabled:ar,display:"flex",onClick:dr,ref:pr,testId:fr,type:"button"},React.createElement(Box,{borderRadius:"menuButton",className:[mr?unsetBackgroundOnHover:void 0,!ar&&touchableStyles({active:"shrink"})],padding:mr?"8":"6",transition:"default",width:"full",...ar?{background:"accentColor",borderColor:"selectedOptionBorder",borderStyle:"solid",borderWidth:"1",boxShadow:"selectedOption",color:"accentColorForeground"}:{background:{hover:"menuItemBackground"},color:"modalText",transition:"default"},...hr},cr))});MenuButton.displayName="MenuButton";function ChainModal({onClose:cr,open:ar}){var dr;const{chain:fr}=useNetwork(),{chains:hr,pendingChainId:pr,reset:mr,switchNetwork:gr}=useSwitchNetwork({onSettled:()=>{mr(),cr()}}),{disconnect:yr}=useDisconnect(),xr="rk_chain_modal_title",wr=isMobile(),br=(dr=fr?.unsupported)!=null?dr:!1,Sr=wr?"36":"28",{appName:vr}=reactExports.useContext(AppContext),Er=useRainbowKitChains();return!fr||!fr?.id?null:React.createElement(Dialog,{onClose:cr,open:ar,titleId:xr},React.createElement(DialogContent,{bottomSheetOnMobile:!0},React.createElement(Box,{display:"flex",flexDirection:"column",gap:"14"},React.createElement(Box,{display:"flex",flexDirection:"row",justifyContent:"space-between"},wr&&React.createElement(Box,{width:"30"}),React.createElement(Box,{paddingBottom:"0",paddingLeft:"8",paddingTop:"4"},React.createElement(Text,{as:"h1",color:"modalText",id:xr,size:wr?"20":"18",weight:"heavy"},"Switch Networks")),React.createElement(CloseButton,{onClose:cr})),br&&React.createElement(Box,{marginX:"8",textAlign:wr?"center":"left"},React.createElement(Text,{color:"modalTextSecondary",size:"14",weight:"medium"},"Wrong network detected, switch or disconnect to continue.")),React.createElement(Box,{display:"flex",flexDirection:"column",gap:"4",padding:"2"},gr?Er.map(({iconBackground:Ar,iconUrl:_r,id:Cr,name:kr},Rr)=>{const Ir=hr.find(Tr=>Tr.id===Cr);if(!Ir)return null;const Nr=Ir.id===fr?.id,Pr=!Nr&&Ir.id===pr;return React.createElement(reactExports.Fragment,{key:Ir.id},React.createElement(MenuButton,{currentlySelected:Nr,onClick:Nr?void 0:()=>gr(Ir.id),testId:`chain-option-${Ir.id}`},React.createElement(Box,{fontFamily:"body",fontSize:"16",fontWeight:"bold"},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between"},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",gap:"4",height:Sr},_r&&React.createElement(Box,{height:"full",marginRight:"8"},React.createElement(AsyncImage,{alt:kr??Ir.name,background:Ar,borderRadius:"full",height:Sr,src:_r,width:Sr})),React.createElement("div",null,kr??Ir.name)),Nr&&React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",marginRight:"6"},React.createElement(Text,{color:"accentColorForeground",size:"14",weight:"medium"},"Connected"),React.createElement(Box,{background:"connectionIndicator",borderColor:"selectedOptionBorder",borderRadius:"full",borderStyle:"solid",borderWidth:"1",height:"8",marginLeft:"8",width:"8"})),Pr&&React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",marginRight:"6"},React.createElement(Text,{color:"modalText",size:"14",weight:"medium"},"Confirm in Wallet"),React.createElement(Box,{background:"standby",borderRadius:"full",height:"8",marginLeft:"8",width:"8"}))))),wr&&Rr<Er.length-1&&React.createElement(Box,{background:"generalBorderDim",height:"1",marginX:"8"}))}):React.createElement(Box,{background:"generalBorder",borderRadius:"menuButton",paddingX:"18",paddingY:"12"},React.createElement(Text,{color:"modalText",size:"14",weight:"medium"},"Your wallet does not support switching networks from"," ",vr??"this app",". Try switching networks from within your wallet instead.")),br&&React.createElement(React.Fragment,null,React.createElement(Box,{background:"generalBorderDim",height:"1",marginX:"8"}),React.createElement(MenuButton,{onClick:()=>yr(),testId:"chain-option-disconnect"},React.createElement(Box,{color:"error",fontFamily:"body",fontSize:"16",fontWeight:"bold"},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between"},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",gap:"4",height:Sr},React.createElement(Box,{alignItems:"center",color:"error",height:Sr,justifyContent:"center",marginRight:"8"},React.createElement(DisconnectSqIcon,{size:Number(Sr)})),React.createElement("div",null,"Disconnect"))))))))))}function groupBy(cr,ar){const dr={};return cr.forEach(fr=>{const hr=ar(fr);hr&&(dr[hr]||(dr[hr]=[]),dr[hr].push(fr))}),dr}var DisclaimerLink=({children:cr,href:ar})=>React.createElement(Box,{as:"a",color:"accentColor",href:ar,rel:"noreferrer",target:"_blank"},cr),DisclaimerText=({children:cr})=>React.createElement(Text,{color:"modalTextSecondary",size:"12",weight:"medium"},cr);function ConnectModalIntro({compactModeEnabled:cr=!1,getWallet:ar}){const{disclaimer:dr,learnMoreUrl:fr}=reactExports.useContext(AppContext);return React.createElement(React.Fragment,null,React.createElement(Box,{alignItems:"center",color:"accentColor",display:"flex",flexDirection:"column",height:"full",justifyContent:"space-around"},React.createElement(Box,{marginBottom:"10"},!cr&&React.createElement(Text,{color:"modalText",size:"18",weight:"heavy"},"What is a Wallet?")),React.createElement(Box,{display:"flex",flexDirection:"column",gap:"32",justifyContent:"center",marginY:"20",style:{maxWidth:312}},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",gap:"16"},React.createElement(Box,{borderRadius:"6",height:"48",minWidth:"48",width:"48"},React.createElement(AssetsIcon,null)),React.createElement(Box,{display:"flex",flexDirection:"column",gap:"4"},React.createElement(Text,{color:"modalText",size:"14",weight:"bold"},"A Home for your Digital Assets"),React.createElement(Text,{color:"modalTextSecondary",size:"14",weight:"medium"},"Wallets are used to send, receive, store, and display digital assets like Ethereum and NFTs."))),React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",gap:"16"},React.createElement(Box,{borderRadius:"6",height:"48",minWidth:"48",width:"48"},React.createElement(LoginIcon,null)),React.createElement(Box,{display:"flex",flexDirection:"column",gap:"4"},React.createElement(Text,{color:"modalText",size:"14",weight:"bold"},"A New Way to Log In"),React.createElement(Text,{color:"modalTextSecondary",size:"14",weight:"medium"},"Instead of creating new accounts and passwords on every website, just connect your wallet.")))),React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:"12",justifyContent:"center",margin:"10"},React.createElement(ActionButton,{label:"Get a Wallet",onClick:ar}),React.createElement(Box,{as:"a",className:touchableStyles({active:"shrink",hover:"grow"}),display:"block",href:fr,paddingX:"12",paddingY:"4",rel:"noreferrer",style:{willChange:"transform"},target:"_blank",transition:"default"},React.createElement(Text,{color:"accentColor",size:"14",weight:"bold"},"Learn More"))),dr&&!cr&&React.createElement(Box,{marginBottom:"8",marginTop:"12",textAlign:"center"},React.createElement(dr,{Link:DisclaimerLink,Text:DisclaimerText}))))}var BackIcon=()=>React.createElement("svg",{fill:"none",height:"17",viewBox:"0 0 11 17",width:"11",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M0.99707 8.6543C0.99707 9.08496 1.15527 9.44531 1.51562 9.79688L8.16016 16.3096C8.43262 16.5732 8.74902 16.7051 9.13574 16.7051C9.90918 16.7051 10.5508 16.0811 10.5508 15.3076C10.5508 14.9121 10.3838 14.5605 10.0938 14.2705L4.30176 8.64551L10.0938 3.0293C10.3838 2.74805 10.5508 2.3877 10.5508 2.00098C10.5508 1.23633 9.90918 0.603516 9.13574 0.603516C8.74902 0.603516 8.43262 0.735352 8.16016 0.999023L1.51562 7.51172C1.15527 7.85449 1.00586 8.21484 0.99707 8.6543Z",fill:"currentColor"})),InfoIcon=()=>React.createElement("svg",{fill:"none",height:"12",viewBox:"0 0 8 12",width:"8",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M3.64258 7.99609C4.19336 7.99609 4.5625 7.73828 4.68555 7.24609C4.69141 7.21094 4.70312 7.16406 4.70898 7.13477C4.80859 6.60742 5.05469 6.35547 6.04492 5.76367C7.14648 5.10156 7.67969 4.3457 7.67969 3.24414C7.67969 1.39844 6.17383 0.255859 3.95898 0.255859C2.32422 0.255859 1.05859 0.894531 0.548828 1.86719C0.396484 2.14844 0.320312 2.44727 0.320312 2.74023C0.314453 3.37305 0.742188 3.79492 1.42188 3.79492C1.91406 3.79492 2.33594 3.54883 2.53516 3.11523C2.78711 2.47656 3.23242 2.21289 3.83594 2.21289C4.55664 2.21289 5.10742 2.65234 5.10742 3.29102C5.10742 3.9707 4.7793 4.29883 3.81836 4.87891C3.02148 5.36523 2.50586 5.92773 2.50586 6.76562V6.90039C2.50586 7.55664 2.96289 7.99609 3.64258 7.99609ZM3.67188 11.4473C4.42773 11.4473 5.04297 10.8672 5.04297 10.1406C5.04297 9.41406 4.42773 8.83984 3.67188 8.83984C2.91602 8.83984 2.30664 9.41406 2.30664 10.1406C2.30664 10.8672 2.91602 11.4473 3.67188 11.4473Z",fill:"currentColor"})),InfoButton=({"aria-label":cr="Info",onClick:ar})=>{const dr=isMobile();return React.createElement(Box,{alignItems:"center","aria-label":cr,as:"button",background:"closeButtonBackground",borderColor:"actionButtonBorder",borderRadius:"full",borderStyle:"solid",borderWidth:dr?"0":"1",className:touchableStyles({active:"shrinkSm",hover:"growLg"}),color:"closeButton",display:"flex",height:dr?"30":"28",justifyContent:"center",onClick:ar,style:{willChange:"transform"},transition:"default",type:"button",width:dr?"30":"28"},React.createElement(InfoIcon,null))},useCoolMode=cr=>{const ar=reactExports.useRef(null),dr=reactExports.useContext(CoolModeContext),fr=useAsyncImage(cr);return reactExports.useEffect(()=>{if(dr&&ar.current&&fr)return makeElementCool(ar.current,fr)},[dr,fr]),ar},getContainer=()=>{const cr="_rk_coolMode",ar=document.getElementById(cr);if(ar)return ar;const dr=document.createElement("div");return dr.setAttribute("id",cr),dr.setAttribute("style",["overflow:hidden","position:fixed","height:100%","top:0","left:0","right:0","bottom:0","pointer-events:none","z-index:2147483647"].join(";")),document.body.appendChild(dr),dr},instanceCounter=0;function makeElementCool(cr,ar){instanceCounter++;const dr=[15,20,25,35,45],fr=35;let hr=[],pr=!1,mr=0,gr=0;const yr=getContainer();function xr(){const Ir=dr[Math.floor(Math.random()*dr.length)],Nr=Math.random()*10,Pr=Math.random()*25,Tr=Math.random()*360,Br=Math.random()*35*(Math.random()<=.5?-1:1),Fr=gr-Ir/2,jr=mr-Ir/2,Ur=Math.random()<=.5?-1:1,qr=document.createElement("div");qr.innerHTML=`<img src="${ar}" width="${Ir}" height="${Ir}" style="border-radius: 25%">`,qr.setAttribute("style",["position:absolute","will-change:transform",`top:${Fr}px`,`left:${jr}px`,`transform:rotate(${Tr}deg)`].join(";")),yr.appendChild(qr),hr.push({direction:Ur,element:qr,left:jr,size:Ir,speedHorz:Nr,speedUp:Pr,spinSpeed:Br,spinVal:Tr,top:Fr})}function wr(){hr.forEach(Ir=>{Ir.left=Ir.left-Ir.speedHorz*Ir.direction,Ir.top=Ir.top-Ir.speedUp,Ir.speedUp=Math.min(Ir.size,Ir.speedUp-1),Ir.spinVal=Ir.spinVal+Ir.spinSpeed,Ir.top>=Math.max(window.innerHeight,document.body.clientHeight)+Ir.size&&(hr=hr.filter(Nr=>Nr!==Ir),Ir.element.remove()),Ir.element.setAttribute("style",["position:absolute","will-change:transform",`top:${Ir.top}px`,`left:${Ir.left}px`,`transform:rotate(${Ir.spinVal}deg)`].join(";"))})}let br;function Sr(){pr&&hr.length<fr&&xr(),wr(),br=requestAnimationFrame(Sr)}Sr();const vr="ontouchstart"in window||navigator.msMaxTouchPoints,Er=vr?"touchstart":"mousedown",Ar=vr?"touchend":"mouseup",_r=vr?"touchmove":"mousemove",Cr=Ir=>{var Nr,Pr;"touches"in Ir?(mr=(Nr=Ir.touches)==null?void 0:Nr[0].clientX,gr=(Pr=Ir.touches)==null?void 0:Pr[0].clientY):(mr=Ir.clientX,gr=Ir.clientY)},kr=Ir=>{Cr(Ir),pr=!0},Rr=()=>{pr=!1};return cr.addEventListener(_r,Cr,{passive:!1}),cr.addEventListener(Er,kr),cr.addEventListener(Ar,Rr),cr.addEventListener("mouseleave",Rr),()=>{cr.removeEventListener(_r,Cr),cr.removeEventListener(Er,kr),cr.removeEventListener(Ar,Rr),cr.removeEventListener("mouseleave",Rr);let Ir=setInterval(()=>{br&&hr.length===0&&(cancelAnimationFrame(br),clearInterval(Ir),--instanceCounter===0&&yr.remove())},500)}}var transparentBorder="g5kl0l0",ModalSelection=({as:cr="button",currentlySelected:ar=!1,iconBackground:dr,iconUrl:fr,name:hr,onClick:pr,ready:mr,recent:gr,testId:yr,...xr})=>{const wr=useCoolMode(fr),[br,Sr]=reactExports.useState(!1);return React.createElement(Box,{display:"flex",flexDirection:"column",onMouseEnter:()=>Sr(!0),onMouseLeave:()=>Sr(!1),ref:wr},React.createElement(Box,{as:cr,borderRadius:"menuButton",borderStyle:"solid",borderWidth:"1",className:ar?void 0:[transparentBorder,touchableStyles({active:"shrink"})],disabled:ar,onClick:pr,padding:"5",style:{willChange:"transform"},testId:yr,transition:"default",width:"full",...ar?{background:"accentColor",borderColor:"selectedOptionBorder",boxShadow:"selectedWallet"}:{background:{hover:"menuItemBackground"}},...xr},React.createElement(Box,{color:ar?"accentColorForeground":"modalText",disabled:!mr,fontFamily:"body",fontSize:"16",fontWeight:"bold",transition:"default"},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",gap:"12"},React.createElement(AsyncImage,{background:dr,...br?{}:{borderColor:"actionButtonBorder"},borderRadius:"6",height:"28",src:fr,width:"28"}),React.createElement(Box,null,React.createElement(Box,{style:{marginTop:gr?-2:void 0}},hr),gr&&React.createElement(Text,{color:ar?"accentColorForeground":"accentColor",size:"12",style:{lineHeight:1,marginTop:-1},weight:"medium"},"Recent"))))))};ModalSelection.displayName="ModalSelection";var convertHexToRGBA=(cr,ar=1)=>{let dr=cr.replace("#","");dr.length===3&&(dr=`${dr[0]}${dr[0]}${dr[1]}${dr[1]}${dr[2]}${dr[2]}`);const fr=parseInt(dr.substring(0,2),16),hr=parseInt(dr.substring(2,4),16),pr=parseInt(dr.substring(4,6),16);return ar>1&&ar<=100&&(ar=ar/100),`rgba(${fr},${hr},${pr},${ar})`},getGradientRGBAs=cr=>cr?[convertHexToRGBA(cr,.2),convertHexToRGBA(cr,.14),convertHexToRGBA(cr,.1)]:null,isHexString$2=cr=>/^#([0-9a-f]{3}){1,2}$/i.test(cr),src3=async()=>(await __vitePreload(()=>import("./create-PAJXJDV3-ebff10a4.js"),[])).default,preloadCreateIcon=()=>loadImages(src3),CreateIcon=()=>React.createElement(AsyncImage,{background:"#e3a5e8",borderColor:"generalBorder",borderRadius:"10",height:"48",src:src3,width:"48"}),src4=async()=>(await __vitePreload(()=>import("./refresh-5KGGHTJP-ba752184.js"),[])).default,preloadRefreshIcon=()=>loadImages(src4),RefreshIcon=()=>React.createElement(AsyncImage,{background:"#515a70",borderColor:"generalBorder",borderRadius:"10",height:"48",src:src4,width:"48"}),src5=async()=>(await __vitePreload(()=>import("./scan-HZBLXLM4-eb21bae1.js"),[])).default,preloadScanIcon=()=>loadImages(src5),ScanIcon=()=>React.createElement(AsyncImage,{background:"#515a70",borderColor:"generalBorder",borderRadius:"10",height:"48",src:src5,width:"48"}),QRCodeBackgroundClassName="_1vwt0cg0",ScrollClassName="_1vwt0cg2 ju367v75 ju367v7q",sidebar="_1vwt0cg3",sidebarCompactMode="_1vwt0cg4",generateMatrix=(cr,ar)=>{const dr=Array.prototype.slice.call(browser$2.create(cr,{errorCorrectionLevel:ar}).modules.data,0),fr=Math.sqrt(dr.length);return dr.reduce((hr,pr,mr)=>(mr%fr===0?hr.push([pr]):hr[hr.length-1].push(pr))&&hr,[])};function QRCode({ecl:cr="M",logoBackground:ar,logoMargin:dr=10,logoSize:fr=50,logoUrl:hr,size:pr=200,uri:mr}){const gr="20",yr=pr-parseInt(gr,10)*2,xr=reactExports.useMemo(()=>{const Sr=[],vr=generateMatrix(mr,cr),Er=yr/vr.length;[{x:0,y:0},{x:1,y:0},{x:0,y:1}].forEach(({x:Rr,y:Ir})=>{const Nr=(vr.length-7)*Er*Rr,Pr=(vr.length-7)*Er*Ir;for(let Tr=0;Tr<3;Tr++)Sr.push(React.createElement("rect",{fill:Tr%2!==0?"white":"black",height:Er*(7-Tr*2),key:`${Tr}-${Rr}-${Ir}`,rx:(Tr-2)*-5+(Tr===0?2:0),ry:(Tr-2)*-5+(Tr===0?2:0),width:Er*(7-Tr*2),x:Nr+Er*Tr,y:Pr+Er*Tr}))});const _r=Math.floor((fr+25)/Er),Cr=vr.length/2-_r/2,kr=vr.length/2+_r/2-1;return vr.forEach((Rr,Ir)=>{Rr.forEach((Nr,Pr)=>{vr[Ir][Pr]&&(Ir<7&&Pr<7||Ir>vr.length-8&&Pr<7||Ir<7&&Pr>vr.length-8||Ir>Cr&&Ir<kr&&Pr>Cr&&Pr<kr||Sr.push(React.createElement("circle",{cx:Ir*Er+Er/2,cy:Pr*Er+Er/2,fill:"black",key:`circle-${Ir}-${Pr}`,r:Er/3})))})}),Sr},[cr,fr,yr,mr]),wr=yr/2-fr/2,br=fr+dr*2;return React.createElement(Box,{borderColor:"generalBorder",borderRadius:"menuButton",borderStyle:"solid",borderWidth:"1",className:QRCodeBackgroundClassName,padding:gr,width:"max"},React.createElement(Box,{style:{height:yr,userSelect:"none",width:yr},userSelect:"none"},React.createElement(Box,{display:"flex",justifyContent:"center",position:"relative",style:{height:0,top:wr,width:yr},width:"full"},React.createElement(AsyncImage,{background:ar,borderColor:{custom:"rgba(0, 0, 0, 0.06)"},borderRadius:"13",height:fr,src:hr,width:fr})),React.createElement("svg",{height:yr,style:{all:"revert"},width:yr},React.createElement("defs",null,React.createElement("clipPath",{id:"clip-wrapper"},React.createElement("rect",{height:br,width:br})),React.createElement("clipPath",{id:"clip-logo"},React.createElement("rect",{height:fr,width:fr}))),React.createElement("rect",{fill:"transparent",height:yr,width:yr}),xr)))}var getBrowserSrc=async()=>{switch(getBrowser()){case"Arc":return(await __vitePreload(()=>import("./Arc-QDJFTGH2-dedcf34b.js"),[])).default;case"Brave":return(await __vitePreload(()=>import("./Brave-YATE5BIM-7f4f924c.js"),[])).default;case"Chrome":return(await __vitePreload(()=>import("./Chrome-LGF33C3S-f104e3bc.js"),[])).default;case"Edge":return(await __vitePreload(()=>import("./Edge-K2JEGI5S-e4909cbd.js"),[])).default;case"Firefox":return(await __vitePreload(()=>import("./Firefox-NP5SYEK5-47084019.js"),[])).default;case"Opera":return(await __vitePreload(()=>import("./Opera-KV54PXPA-f31a1b5e.js"),[])).default;case"Safari":return(await __vitePreload(()=>import("./Safari-2QIYKJ4P-594ed864.js"),[])).default;default:return(await __vitePreload(()=>import("./Browser-HN7O5MN7-2ca1b32c.js"),[])).default}},preloadBrowserIcon=()=>loadImages(getBrowserSrc);function GetDetail({getWalletDownload:cr}){const dr=useWalletConnectors().splice(0,5);return React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",height:"full",marginTop:"18",width:"full"},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:"28",height:"full",width:"full"},dr?.filter(fr=>{var hr;return fr.extensionDownloadUrl||fr.qrCode&&((hr=fr.downloadUrls)==null?void 0:hr.qrCode)}).map(fr=>{const{downloadUrls:hr,iconBackground:pr,iconUrl:mr,id:gr,name:yr,qrCode:xr}=fr,wr=hr?.qrCode&&xr,br=!!fr.extensionDownloadUrl,Sr=hr?.qrCode&&br;return React.createElement(Box,{alignItems:"center",display:"flex",gap:"16",justifyContent:"space-between",key:fr.id,width:"full"},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",gap:"16"},React.createElement(AsyncImage,{background:pr,borderColor:"actionButtonBorder",borderRadius:"10",height:"48",src:mr,width:"48"}),React.createElement(Box,{display:"flex",flexDirection:"column",gap:"2"},React.createElement(Text,{color:"modalText",size:"14",weight:"bold"},yr),React.createElement(Text,{color:"modalTextSecondary",size:"14",weight:"medium"},Sr?"Mobile Wallet and Extension":wr?"Mobile Wallet":br?"Browser Extension":null))),React.createElement(Box,{display:"flex",flexDirection:"column",gap:"4"},React.createElement(ActionButton,{label:"GET",onClick:()=>cr(gr),type:"secondary"})))})),React.createElement(Box,{alignItems:"center",borderRadius:"10",display:"flex",flexDirection:"column",gap:"8",justifyContent:"space-between",marginBottom:"4",paddingY:"8",style:{maxWidth:275,textAlign:"center"}},React.createElement(Text,{color:"modalText",size:"14",weight:"bold"},"Not what youre looking for?"),React.createElement(Text,{color:"modalTextSecondary",size:"14",weight:"medium"},"Select a wallet on the left to get started with a different wallet provider.")))}var LOGO_SIZE="44";function ConnectDetail({changeWalletStep:cr,compactModeEnabled:ar,connectionError:dr,onClose:fr,qrCodeUri:hr,reconnect:pr,wallet:mr}){var gr;const{downloadUrls:yr,iconBackground:xr,iconUrl:wr,name:br,qrCode:Sr,ready:vr,showWalletConnectModal:Er}=mr,Ar=(gr=mr.desktop)==null?void 0:gr.getUri,_r=isSafari(),Cr=!!mr.extensionDownloadUrl,kr=yr?.qrCode&&Cr,Rr=Sr&&hr,Ir=Er?{description:`Need the ${ar?"":"official"} WalletConnect modal?`,label:"OPEN",onClick:()=>{fr(),Er()}}:Rr?{description:`Dont have ${br}?`,label:"GET",onClick:()=>cr(kr?"DOWNLOAD_OPTIONS":"DOWNLOAD")}:null,{width:Nr}=useWindowSize(),Pr=Nr&&Nr<768;return reactExports.useEffect(()=>{preloadBrowserIcon()},[]),React.createElement(Box,{display:"flex",flexDirection:"column",height:"full",width:"full"},Rr?React.createElement(Box,{alignItems:"center",display:"flex",height:"full",justifyContent:"center"},React.createElement(QRCode,{logoBackground:xr,logoSize:ar?60:72,logoUrl:wr,size:ar?318:Pr?Math.max(280,Math.min(Nr-308,382)):382,uri:hr})):React.createElement(Box,{alignItems:"center",display:"flex",justifyContent:"center",style:{flexGrow:1}},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:"8"},React.createElement(Box,{borderRadius:"10",height:LOGO_SIZE,overflow:"hidden"},React.createElement(AsyncImage,{height:LOGO_SIZE,src:wr,width:LOGO_SIZE})),React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:"4",paddingX:"32",style:{textAlign:"center"}},React.createElement(Text,{color:"modalText",size:"18",weight:"bold"},vr?`Opening ${br}...`:Cr?`${br} is not installed`:`${br} is not available`),!vr&&Cr?React.createElement(Box,{paddingTop:"20"},React.createElement(ActionButton,{href:mr.extensionDownloadUrl,label:"INSTALL",type:"secondary"})):null,vr&&!Rr&&React.createElement(React.Fragment,null,React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center"},React.createElement(Text,{color:"modalTextSecondary",size:"14",textAlign:"center",weight:"medium"},"Confirm connection in the extension")),React.createElement(Box,{alignItems:"center",color:"modalText",display:"flex",flexDirection:"row",height:"32",marginTop:"8"},dr?React.createElement(ActionButton,{label:"RETRY",onClick:Ar?async()=>{const Tr=await Ar();window.open(Tr,_r?"_blank":"_self")}:()=>{pr(mr)}}):React.createElement(Box,{color:"modalTextSecondary"},React.createElement(SpinnerIcon,null))))))),React.createElement(Box,{alignItems:"center",borderRadius:"10",display:"flex",flexDirection:"row",gap:"8",height:"28",justifyContent:"space-between",marginTop:"12"},vr&&Ir&&React.createElement(React.Fragment,null,React.createElement(Text,{color:"modalTextSecondary",size:"14",weight:"medium"},Ir.description),React.createElement(ActionButton,{label:Ir.label,onClick:Ir.onClick,type:"secondary"}))))}var DownloadOptionsBox=({actionLabel:cr,description:ar,iconAccent:dr,iconBackground:fr,iconUrl:hr,isCompact:pr,onAction:mr,title:gr,url:yr,variant:xr})=>{const wr=xr==="browser",br=!wr&&dr&&getGradientRGBAs(dr);return React.createElement(Box,{alignItems:"center",borderRadius:"13",display:"flex",justifyContent:"center",overflow:"hidden",paddingX:pr?"18":"44",position:"relative",style:{flex:1,isolation:"isolate"},width:"full"},React.createElement(Box,{borderColor:"actionButtonBorder",borderRadius:"13",borderStyle:"solid",borderWidth:"1",style:{bottom:"0",left:"0",position:"absolute",right:"0",top:"0",zIndex:1}}),wr&&React.createElement(Box,{background:"downloadTopCardBackground",height:"full",position:"absolute",style:{zIndex:0},width:"full"},React.createElement(Box,{display:"flex",flexDirection:"row",justifyContent:"space-between",style:{bottom:"0",filter:"blur(20px)",left:"0",position:"absolute",right:"0",top:"0",transform:"translate3d(0, 0, 0)"}},React.createElement(Box,{style:{filter:"blur(100px)",marginLeft:-27,marginTop:-20,opacity:.6,transform:"translate3d(0, 0, 0)"}},React.createElement(AsyncImage,{borderRadius:"full",height:"200",src:hr,width:"200"})),React.createElement(Box,{style:{filter:"blur(100px)",marginRight:0,marginTop:105,opacity:.6,overflow:"auto",transform:"translate3d(0, 0, 0)"}},React.createElement(AsyncImage,{borderRadius:"full",height:"200",src:hr,width:"200"})))),!wr&&br&&React.createElement(Box,{background:"downloadBottomCardBackground",style:{bottom:"0",left:"0",position:"absolute",right:"0",top:"0"}},React.createElement(Box,{position:"absolute",style:{background:`radial-gradient(50% 50% at 50% 50%, ${br[0]} 0%, ${br[1]} 25%, rgba(0,0,0,0) 100%)`,height:564,left:-215,top:-197,transform:"translate3d(0, 0, 0)",width:564}}),React.createElement(Box,{position:"absolute",style:{background:`radial-gradient(50% 50% at 50% 50%, ${br[2]} 0%, rgba(0, 0, 0, 0) 100%)`,height:564,left:-1,top:-76,transform:"translate3d(0, 0, 0)",width:564}})),React.createElement(Box,{alignItems:"flex-start",display:"flex",flexDirection:"row",gap:"24",height:"max",justifyContent:"center",style:{zIndex:1}},React.createElement(Box,null,React.createElement(AsyncImage,{height:"60",src:hr,width:"60",...fr?{background:fr,borderColor:"generalBorder",borderRadius:"10"}:null})),React.createElement(Box,{display:"flex",flexDirection:"column",gap:"4",style:{flex:1},width:"full"},React.createElement(Text,{color:"modalText",size:"14",weight:"bold"},gr),React.createElement(Text,{color:"modalTextSecondary",size:"14",weight:"medium"},ar),React.createElement(Box,{marginTop:"14",width:"max"},React.createElement(ActionButton,{href:yr,label:cr,onClick:mr,size:"medium"})))))};function DownloadOptionsDetail({changeWalletStep:cr,wallet:ar}){const dr=getBrowser(),hr=reactExports.useContext(ModalSizeContext)==="compact",{extension:pr,extensionDownloadUrl:mr,mobileDownloadUrl:gr}=ar;return reactExports.useEffect(()=>{preloadCreateIcon(),preloadScanIcon(),preloadRefreshIcon()},[]),React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:"24",height:"full",marginBottom:"8",marginTop:"4",width:"full"},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:"8",height:"full",justifyContent:"center",width:"full"},mr&&React.createElement(DownloadOptionsBox,{actionLabel:`Add to ${dr}`,description:"Access your wallet right from your favorite web browser.",iconUrl:getBrowserSrc,isCompact:hr,onAction:()=>cr(pr?.instructions?"INSTRUCTIONS_EXTENSION":"CONNECT"),title:`${ar.name} for ${dr}`,url:mr,variant:"browser"}),gr&&React.createElement(DownloadOptionsBox,{actionLabel:"Get the app",description:"Use the mobile wallet to explore the world of Ethereum.",iconAccent:ar.iconAccent,iconBackground:ar.iconBackground,iconUrl:ar.iconUrl,isCompact:hr,onAction:()=>{cr("DOWNLOAD")},title:`${ar.name} for Mobile`,variant:"app"})))}function DownloadDetail({changeWalletStep:cr,wallet:ar}){const{downloadUrls:dr,qrCode:fr}=ar;return reactExports.useEffect(()=>{preloadCreateIcon(),preloadScanIcon()},[]),React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:"24",height:"full",width:"full"},React.createElement(Box,{style:{maxWidth:220,textAlign:"center"}},React.createElement(Text,{color:"modalTextSecondary",size:"14",weight:"semibold"},"Scan with your phone to download on iOS or Android")),React.createElement(Box,{height:"full"},dr?.qrCode?React.createElement(QRCode,{logoSize:0,size:268,uri:dr.qrCode}):null),React.createElement(Box,{alignItems:"center",borderRadius:"10",display:"flex",flexDirection:"row",gap:"8",height:"34",justifyContent:"space-between",marginBottom:"12",paddingY:"8"},React.createElement(ActionButton,{label:"Continue",onClick:()=>cr(fr?.instructions?"INSTRUCTIONS_MOBILE":"CONNECT")})))}var stepIcons={create:()=>React.createElement(CreateIcon,null),install:cr=>React.createElement(AsyncImage,{background:cr.iconBackground,borderColor:"generalBorder",borderRadius:"10",height:"48",src:cr.iconUrl,width:"48"}),refresh:()=>React.createElement(RefreshIcon,null),scan:()=>React.createElement(ScanIcon,null)};function InstructionMobileDetail({connectWallet:cr,wallet:ar}){var dr,fr,hr,pr;return React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",height:"full",width:"full"},React.createElement(Box,{display:"flex",flexDirection:"column",gap:"28",height:"full",justifyContent:"center",paddingY:"32",style:{maxWidth:320}},(fr=(dr=ar?.qrCode)==null?void 0:dr.instructions)==null?void 0:fr.steps.map((mr,gr)=>{var yr;return React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",gap:"16",key:gr},React.createElement(Box,{borderRadius:"10",height:"48",minWidth:"48",overflow:"hidden",position:"relative",width:"48"},(yr=stepIcons[mr.step])==null?void 0:yr.call(stepIcons,ar)),React.createElement(Box,{display:"flex",flexDirection:"column",gap:"4"},React.createElement(Text,{color:"modalText",size:"14",weight:"bold"},mr.title),React.createElement(Text,{color:"modalTextSecondary",size:"14",weight:"medium"},mr.description)))})),React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:"12",justifyContent:"center",marginBottom:"16"},React.createElement(ActionButton,{label:"Connect",onClick:()=>cr(ar)}),React.createElement(Box,{as:"a",className:touchableStyles({active:"shrink",hover:"grow"}),display:"block",href:(pr=(hr=ar?.qrCode)==null?void 0:hr.instructions)==null?void 0:pr.learnMoreUrl,paddingX:"12",paddingY:"4",rel:"noreferrer",style:{willChange:"transform"},target:"_blank",transition:"default"},React.createElement(Text,{color:"accentColor",size:"14",weight:"bold"},"Learn More"))))}function InstructionExtensionDetail({wallet:cr}){var ar,dr,fr,hr;return React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",height:"full",width:"full"},React.createElement(Box,{display:"flex",flexDirection:"column",gap:"28",height:"full",justifyContent:"center",paddingY:"32",style:{maxWidth:320}},(dr=(ar=cr?.extension)==null?void 0:ar.instructions)==null?void 0:dr.steps.map((pr,mr)=>{var gr;return React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",gap:"16",key:mr},React.createElement(Box,{borderRadius:"10",height:"48",minWidth:"48",overflow:"hidden",position:"relative",width:"48"},(gr=stepIcons[pr.step])==null?void 0:gr.call(stepIcons,cr)),React.createElement(Box,{display:"flex",flexDirection:"column",gap:"4"},React.createElement(Text,{color:"modalText",size:"14",weight:"bold"},pr.title),React.createElement(Text,{color:"modalTextSecondary",size:"14",weight:"medium"},pr.description)))})),React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:"12",justifyContent:"center",marginBottom:"16"},React.createElement(ActionButton,{label:"Refresh",onClick:window.location.reload.bind(window.location)}),React.createElement(Box,{as:"a",className:touchableStyles({active:"shrink",hover:"grow"}),display:"block",href:(hr=(fr=cr?.extension)==null?void 0:fr.instructions)==null?void 0:hr.learnMoreUrl,paddingX:"12",paddingY:"4",rel:"noreferrer",style:{willChange:"transform"},target:"_blank",transition:"default"},React.createElement(Text,{color:"accentColor",size:"14",weight:"bold"},"Learn More"))))}function DesktopOptions({onClose:cr}){const ar="rk_connect_title",dr=isSafari(),[fr,hr]=reactExports.useState(),[pr,mr]=reactExports.useState(),[gr,yr]=reactExports.useState(),xr=!!pr?.qrCode&&gr,[wr,br]=reactExports.useState(!1),vr=reactExports.useContext(ModalSizeContext)===ModalSizeOptions.COMPACT,{disclaimer:Er}=reactExports.useContext(AppContext),Ar=useWalletConnectors().filter(Lr=>Lr.ready||!!Lr.extensionDownloadUrl).sort((Lr,Vr)=>Lr.groupIndex-Vr.groupIndex),_r=groupBy(Ar,Lr=>Lr.groupName),Cr=Lr=>{var Vr,Jr,es;if(br(!1),Lr.ready){(Jr=(Vr=Lr?.connect)==null?void 0:Vr.call(Lr))==null||Jr.catch(()=>{br(!0)});const ns=(es=Lr.desktop)==null?void 0:es.getUri;ns&&setTimeout(async()=>{const Qr=await ns();window.open(Qr,dr?"_blank":"_self")},0)}},kr=Lr=>{var Vr;if(Cr(Lr),hr(Lr.id),Lr.ready){let Jr=!1;(Vr=Lr?.onConnecting)==null||Vr.call(Lr,async()=>{var es,ns;if(Jr)return;Jr=!0;const Qr=Ar.find(Xr=>Lr.id===Xr.id),zr=await((es=Qr?.qrCode)==null?void 0:es.getUri());yr(zr),setTimeout(()=>{mr(Qr),Nr("CONNECT")},zr?0:50);const Wr=await Qr?.connector.getProvider(),ss=(ns=Wr?.signer)==null?void 0:ns.connection;if(ss?.on&&ss?.off){const Xr=()=>{ts(),kr(Lr)},ts=()=>{ss.off("close",Xr),ss.off("open",ts)};ss.on("close",Xr),ss.on("open",ts)}})}else mr(Lr),Nr(Lr?.extensionDownloadUrl?"DOWNLOAD_OPTIONS":"CONNECT")},Rr=Lr=>{var Vr;hr(Lr);const Jr=Ar.find(Qr=>Lr===Qr.id),es=(Vr=Jr?.downloadUrls)==null?void 0:Vr.qrCode,ns=!!Jr?.extensionDownloadUrl;mr(Jr),Nr(es&&ns?"DOWNLOAD_OPTIONS":es?"DOWNLOAD":"INSTRUCTIONS_EXTENSION")},Ir=()=>{hr(void 0),mr(void 0),yr(void 0)},Nr=(Lr,Vr=!1)=>{Vr&&Lr==="GET"&&Pr==="GET"?Ir():!Vr&&Lr==="GET"?Tr("GET"):!Vr&&Lr==="CONNECT"&&Tr("CONNECT"),Fr(Lr)},[Pr,Tr]=reactExports.useState("NONE"),[Br,Fr]=reactExports.useState("NONE");let jr=null,Ur=null,qr=null,Hr;reactExports.useEffect(()=>{br(!1)},[Br,pr]);const Mr=!!(!!pr?.extensionDownloadUrl&&pr?.mobileDownloadUrl);switch(Br){case"NONE":jr=React.createElement(ConnectModalIntro,{getWallet:()=>Nr("GET")});break;case"LEARN_COMPACT":jr=React.createElement(ConnectModalIntro,{compactModeEnabled:vr,getWallet:()=>Nr("GET")}),Ur="What is a Wallet?",qr="NONE";break;case"GET":jr=React.createElement(GetDetail,{getWalletDownload:Rr}),Ur="Get a Wallet",qr=vr?"LEARN_COMPACT":"NONE";break;case"CONNECT":jr=pr&&React.createElement(ConnectDetail,{changeWalletStep:Nr,compactModeEnabled:vr,connectionError:wr,onClose:cr,qrCodeUri:gr,reconnect:Cr,wallet:pr}),Ur=xr&&`Scan with ${pr.name==="WalletConnect"?"your phone":pr.name}`,qr=vr?"NONE":null,Hr=vr?Ir:()=>{};break;case"DOWNLOAD_OPTIONS":jr=pr&&React.createElement(DownloadOptionsDetail,{changeWalletStep:Nr,wallet:pr}),Ur=pr&&`Get ${pr.name}`,qr=Mr?Pr:null;break;case"DOWNLOAD":jr=pr&&React.createElement(DownloadDetail,{changeWalletStep:Nr,wallet:pr}),Ur=pr&&`Install ${pr.name}`,qr=Mr?"DOWNLOAD_OPTIONS":Pr;break;case"INSTRUCTIONS_MOBILE":jr=pr&&React.createElement(InstructionMobileDetail,{connectWallet:kr,wallet:pr}),Ur=pr&&`Get started with ${vr&&pr.shortName||pr.name}`,qr="DOWNLOAD";break;case"INSTRUCTIONS_EXTENSION":jr=pr&&React.createElement(InstructionExtensionDetail,{wallet:pr}),Ur=pr&&`Get started with ${vr&&pr.shortName||pr.name}`,qr="DOWNLOAD_OPTIONS";break}return React.createElement(Box,{display:"flex",flexDirection:"row",style:{maxHeight:vr?468:504}},(vr?Br==="NONE":!0)&&React.createElement(Box,{className:vr?sidebarCompactMode:sidebar,display:"flex",flexDirection:"column",marginTop:"16"},React.createElement(Box,{display:"flex",justifyContent:"space-between"},vr&&Er&&React.createElement(Box,{marginLeft:"16",width:"28"},React.createElement(InfoButton,{onClick:()=>Nr("LEARN_COMPACT")})),vr&&!Er&&React.createElement(Box,{marginLeft:"16",width:"28"}),React.createElement(Box,{marginLeft:vr?"0":"6",paddingBottom:"8",paddingTop:"2",paddingX:"18"},React.createElement(Text,{as:"h1",color:"modalText",id:ar,size:"18",weight:"heavy"},"Connect a Wallet")),vr&&React.createElement(Box,{marginRight:"16"},React.createElement(CloseButton,{onClose:cr}))),React.createElement(Box,{className:ScrollClassName,paddingBottom:"18"},Object.entries(_r).map(([Lr,Vr],Jr)=>Vr.length>0&&React.createElement(reactExports.Fragment,{key:Jr},Lr?React.createElement(Box,{marginBottom:"8",marginTop:"16",marginX:"6"},React.createElement(Text,{color:"modalTextSecondary",size:"14",weight:"bold"},Lr)):null,React.createElement(Box,{display:"flex",flexDirection:"column",gap:"4"},Vr.map(es=>React.createElement(ModalSelection,{currentlySelected:es.id===fr,iconBackground:es.iconBackground,iconUrl:es.iconUrl,key:es.id,name:es.name,onClick:()=>kr(es),ready:es.ready,recent:es.recent,testId:`wallet-option-${es.id}`})))))),vr&&React.createElement(React.Fragment,null,React.createElement(Box,{background:"generalBorder",height:"1",marginTop:"-1"}),Er?React.createElement(Box,{paddingX:"24",paddingY:"16",textAlign:"center"},React.createElement(Er,{Link:DisclaimerLink,Text:DisclaimerText})):React.createElement(Box,{alignItems:"center",display:"flex",justifyContent:"space-between",paddingX:"24",paddingY:"16"},React.createElement(Box,{paddingY:"4"},React.createElement(Text,{color:"modalTextSecondary",size:"14",weight:"medium"},"New to Ethereum wallets?")),React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"row",gap:"4",justifyContent:"center"},React.createElement(Box,{className:touchableStyles({active:"shrink",hover:"grow"}),cursor:"pointer",onClick:()=>Nr("LEARN_COMPACT"),paddingY:"4",style:{willChange:"transform"},transition:"default"},React.createElement(Text,{color:"accentColor",size:"14",weight:"bold"},"Learn More")))))),(vr?Br!=="NONE":!0)&&React.createElement(React.Fragment,null,!vr&&React.createElement(Box,{background:"generalBorder",minWidth:"1",width:"1"}),React.createElement(Box,{display:"flex",flexDirection:"column",margin:"16",style:{flexGrow:1}},React.createElement(Box,{alignItems:"center",display:"flex",justifyContent:"space-between",marginBottom:"12"},React.createElement(Box,{width:"28"},qr&&React.createElement(Box,{as:"button",className:touchableStyles({active:"shrinkSm",hover:"growLg"}),color:"accentColor",onClick:()=>{qr&&Nr(qr,!0),Hr?.()},paddingX:"8",paddingY:"4",style:{boxSizing:"content-box",height:17,willChange:"transform"},transition:"default",type:"button"},React.createElement(BackIcon,null))),React.createElement(Box,{display:"flex",justifyContent:"center",style:{flexGrow:1}},Ur&&React.createElement(Text,{color:"modalText",size:"18",textAlign:"center",weight:"heavy"},Ur)),React.createElement(CloseButton,{onClose:cr})),React.createElement(Box,{display:"flex",flexDirection:"column",style:{minHeight:vr?396:432}},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:"6",height:"full",justifyContent:"center",marginX:"8"},jr)))))}var scroll="_1am14410";function WalletButton({onClose:cr,wallet:ar}){const{connect:dr,connector:fr,iconBackground:hr,iconUrl:pr,id:mr,mobile:gr,name:yr,onConnecting:xr,ready:wr,shortName:br}=ar,Sr=gr?.getUri,vr=useCoolMode(pr);return React.createElement(Box,{as:"button",color:wr?"modalText":"modalTextSecondary",disabled:!wr,fontFamily:"body",key:mr,onClick:reactExports.useCallback(async()=>{mr==="walletConnect"&&cr?.(),dr?.();let Er=!1;xr?.(async()=>{if(!Er&&(Er=!0,Sr)){const Ar=await Sr();if((fr.id==="walletConnect"||fr.id==="walletConnectLegacy")&&setWalletConnectDeepLink({mobileUri:Ar,name:yr}),Ar.startsWith("http")){const _r=document.createElement("a");_r.href=Ar,_r.target="_blank",_r.rel="noreferrer noopener",_r.click()}else window.location.href=Ar}})},[fr,dr,Sr,xr,cr,yr,mr]),ref:vr,style:{overflow:"visible",textAlign:"center"},testId:`wallet-option-${mr}`,type:"button",width:"full"},React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center"},React.createElement(Box,{paddingBottom:"8",paddingTop:"10"},React.createElement(AsyncImage,{background:hr,borderRadius:"13",boxShadow:"walletLogo",height:"60",src:pr,width:"60"})),React.createElement(Box,{display:"flex",flexDirection:"column",textAlign:"center"},React.createElement(Text,{as:"h2",color:ar.ready?"modalText":"modalTextSecondary",size:"13",weight:"medium"},React.createElement(Box,{as:"span",position:"relative"},br??yr,!ar.ready&&" (unsupported)")),ar.recent&&React.createElement(Text,{color:"accentColor",size:"12",weight:"medium"},"Recent"))))}function MobileOptions({onClose:cr}){var ar;const dr="rk_connect_title",fr=useWalletConnectors(),{disclaimer:hr,learnMoreUrl:pr}=reactExports.useContext(AppContext);let mr=null,gr=null,yr=!1,xr=null;const[wr,br]=reactExports.useState("CONNECT"),Sr=isIOS$1();switch(wr){case"CONNECT":{mr="Connect a Wallet",yr=!0,gr=React.createElement(Box,null,React.createElement(Box,{background:"profileForeground",className:scroll,display:"flex",paddingBottom:"20",paddingTop:"6"},React.createElement(Box,{display:"flex",style:{margin:"0 auto"}},fr.filter(vr=>vr.ready).map(vr=>React.createElement(Box,{key:vr.id,paddingX:"20"},React.createElement(Box,{width:"60"},React.createElement(WalletButton,{onClose:cr,wallet:vr})))))),React.createElement(Box,{background:"generalBorder",height:"1",marginBottom:"32",marginTop:"-1"}),React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:"32",paddingX:"32",style:{textAlign:"center"}},React.createElement(Box,{display:"flex",flexDirection:"column",gap:"8",textAlign:"center"},React.createElement(Text,{color:"modalText",size:"16",weight:"bold"},"What is a Wallet?"),React.createElement(Text,{color:"modalTextSecondary",size:"16"},"A wallet is used to send, receive, store, and display digital assets. Its also a new way to log in, without needing to create new accounts and passwords oneverywebsite."))),React.createElement(Box,{paddingTop:"32",paddingX:"20"},React.createElement(Box,{display:"flex",gap:"14",justifyContent:"center"},React.createElement(ActionButton,{label:"Get a Wallet",onClick:()=>br("GET"),size:"large",type:"secondary"}),React.createElement(ActionButton,{href:pr,label:"Learn More",size:"large",type:"secondary"}))),hr&&React.createElement(Box,{marginTop:"28",marginX:"32",textAlign:"center"},React.createElement(hr,{Link:DisclaimerLink,Text:DisclaimerText})));break}case"GET":{mr="Get a Wallet",xr="CONNECT";const vr=(ar=fr?.filter(Er=>{var Ar,_r,Cr;return((Ar=Er.downloadUrls)==null?void 0:Ar.ios)||((_r=Er.downloadUrls)==null?void 0:_r.android)||((Cr=Er.downloadUrls)==null?void 0:Cr.mobile)}))==null?void 0:ar.splice(0,3);gr=React.createElement(Box,null,React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",height:"full",marginBottom:"36",marginTop:"5",paddingTop:"12",width:"full"},vr.map((Er,Ar)=>{const{downloadUrls:_r,iconBackground:Cr,iconUrl:kr,name:Rr}=Er;return!_r?.ios&&!_r?.android&&!_r?.mobile?null:React.createElement(Box,{display:"flex",gap:"16",key:Er.id,paddingX:"20",width:"full"},React.createElement(Box,{style:{minHeight:48,minWidth:48}},React.createElement(AsyncImage,{background:Cr,borderColor:"generalBorder",borderRadius:"10",height:"48",src:kr,width:"48"})),React.createElement(Box,{display:"flex",flexDirection:"column",width:"full"},React.createElement(Box,{alignItems:"center",display:"flex",height:"48"},React.createElement(Box,{width:"full"},React.createElement(Text,{color:"modalText",size:"18",weight:"bold"},Rr)),React.createElement(ActionButton,{href:(Sr?_r?.ios:_r?.android)||_r?.mobile,label:"GET",size:"small",type:"secondary"})),Ar<vr.length-1&&React.createElement(Box,{background:"generalBorderDim",height:"1",marginY:"10",width:"full"})))})),React.createElement(Box,{style:{marginBottom:"42px"}}),React.createElement(Box,{alignItems:"center",display:"flex",flexDirection:"column",gap:"36",paddingX:"36",style:{textAlign:"center"}},React.createElement(Box,{display:"flex",flexDirection:"column",gap:"12",textAlign:"center"},React.createElement(Text,{color:"modalText",size:"16",weight:"bold"},"Not what youre looking for?"),React.createElement(Text,{color:"modalTextSecondary",size:"16"},"Select a wallet on the main screen to get started with a different wallet provider."))));break}}return React.createElement(Box,{display:"flex",flexDirection:"column",paddingBottom:"36"},React.createElement(Box,{background:yr?"profileForeground":"modalBackground",display:"flex",flexDirection:"column",paddingBottom:"4",paddingTop:"14"},React.createElement(Box,{display:"flex",justifyContent:"center",paddingBottom:"6",paddingX:"20",position:"relative"},xr&&React.createElement(Box,{display:"flex",position:"absolute",style:{left:0,marginBottom:-20,marginTop:-20}},React.createElement(Box,{alignItems:"center",as:"button",className:touchableStyles({active:"shrinkSm",hover:"growLg"}),color:"accentColor",display:"flex",marginLeft:"4",marginTop:"20",onClick:()=>br(xr),padding:"16",style:{height:17,willChange:"transform"},transition:"default",type:"button"},React.createElement(BackIcon,null))),React.createElement(Box,{marginTop:"4",textAlign:"center",width:"full"},React.createElement(Text,{as:"h1",color:"modalText",id:dr,size:"20",weight:"bold"},mr)),React.createElement(Box,{alignItems:"center",display:"flex",height:"32",paddingRight:"14",position:"absolute",right:"0"},React.createElement(Box,{style:{marginBottom:-20,marginTop:-20}},React.createElement(CloseButton,{onClose:cr}))))),React.createElement(Box,{display:"flex",flexDirection:"column"},gr))}function ConnectOptions({onClose:cr}){return isMobile()?React.createElement(MobileOptions,{onClose:cr}):React.createElement(DesktopOptions,{onClose:cr})}function ConnectModal({onClose:cr,open:ar}){const dr="rk_connect_title",fr=useConnectionStatus();return fr==="disconnected"?React.createElement(Dialog,{onClose:cr,open:ar,titleId:dr},React.createElement(DialogContent,{bottomSheetOnMobile:!0,padding:"0",wide:!0},React.createElement(ConnectOptions,{onClose:cr}))):fr==="unauthenticated"?React.createElement(Dialog,{onClose:cr,open:ar,titleId:dr},React.createElement(DialogContent,{bottomSheetOnMobile:!0,padding:"0"},React.createElement(SignIn,{onClose:cr}))):null}function useModalStateValue(){const[cr,ar]=reactExports.useState(!1);return{closeModal:reactExports.useCallback(()=>ar(!1),[]),isModalOpen:cr,openModal:reactExports.useCallback(()=>ar(!0),[])}}var ModalContext=reactExports.createContext({accountModalOpen:!1,chainModalOpen:!1,connectModalOpen:!1});function ModalProvider({children:cr}){const{closeModal:ar,isModalOpen:dr,openModal:fr}=useModalStateValue(),{closeModal:hr,isModalOpen:pr,openModal:mr}=useModalStateValue(),{closeModal:gr,isModalOpen:yr,openModal:xr}=useModalStateValue(),wr=useConnectionStatus(),{chain:br}=useNetwork(),Sr=!br?.unsupported;function vr({keepConnectModalOpen:Ar=!1}={}){Ar||ar(),hr(),gr()}const Er=useAuthenticationStatus()==="unauthenticated";return useAccount({onConnect:()=>vr({keepConnectModalOpen:Er}),onDisconnect:()=>vr()}),React.createElement(ModalContext.Provider,{value:reactExports.useMemo(()=>({accountModalOpen:pr,chainModalOpen:yr,connectModalOpen:dr,openAccountModal:Sr&&wr==="connected"?mr:void 0,openChainModal:wr==="connected"?xr:void 0,openConnectModal:wr==="disconnected"||wr==="unauthenticated"?fr:void 0}),[wr,Sr,pr,yr,dr,mr,xr,fr])},cr,React.createElement(ConnectModal,{onClose:ar,open:dr}),React.createElement(AccountModal,{onClose:hr,open:pr}),React.createElement(ChainModal,{onClose:gr,open:yr}))}function useModalState(){const{accountModalOpen:cr,chainModalOpen:ar,connectModalOpen:dr}=reactExports.useContext(ModalContext);return{accountModalOpen:cr,chainModalOpen:ar,connectModalOpen:dr}}function useAccountModal(){const{accountModalOpen:cr,openAccountModal:ar}=reactExports.useContext(ModalContext);return{accountModalOpen:cr,openAccountModal:ar}}function useChainModal(){const{chainModalOpen:cr,openChainModal:ar}=reactExports.useContext(ModalContext);return{chainModalOpen:cr,openChainModal:ar}}function useConnectModal(){const{connectModalOpen:cr,openConnectModal:ar}=reactExports.useContext(ModalContext);return{connectModalOpen:cr,openConnectModal:ar}}var noop$3=()=>{};function ConnectButtonRenderer({children:cr}){var ar,dr,fr,hr;const pr=useIsMounted(),{address:mr}=useAccount(),gr=useMainnetEnsName(mr),yr=useMainnetEnsAvatar(gr),{data:xr}=useBalance({address:mr}),{chain:wr}=useNetwork(),br=useRainbowKitChainsById(),Sr=(ar=useAuthenticationStatus())!=null?ar:void 0,vr=wr?br[wr.id]:void 0,Er=(dr=vr?.name)!=null?dr:void 0,Ar=(fr=vr?.iconUrl)!=null?fr:void 0,_r=(hr=vr?.iconBackground)!=null?hr:void 0,Cr=useAsyncImage(Ar),kr=reactExports.useContext(ShowRecentTransactionsContext),Rr=useRecentTransactions().some(({status:Ur})=>Ur==="pending")&&kr,Ir=xr?`${abbreviateETHBalance(parseFloat(xr.formatted))} ${xr.symbol}`:void 0,{openConnectModal:Nr}=useConnectModal(),{openChainModal:Pr}=useChainModal(),{openAccountModal:Tr}=useAccountModal(),{accountModalOpen:Br,chainModalOpen:Fr,connectModalOpen:jr}=useModalState();return React.createElement(React.Fragment,null,cr({account:mr?{address:mr,balanceDecimals:xr?.decimals,balanceFormatted:xr?.formatted,balanceSymbol:xr?.symbol,displayBalance:Ir,displayName:gr?formatENS(gr):formatAddress$1(mr),ensAvatar:yr??void 0,ensName:gr??void 0,hasPendingTransactions:Rr}:void 0,accountModalOpen:Br,authenticationStatus:Sr,chain:wr?{hasIcon:!!Ar,iconBackground:_r,iconUrl:Cr,id:wr.id,name:Er??wr.name,unsupported:wr.unsupported}:void 0,chainModalOpen:Fr,connectModalOpen:jr,mounted:pr,openAccountModal:Tr??noop$3,openChainModal:Pr??noop$3,openConnectModal:Nr??noop$3}))}ConnectButtonRenderer.displayName="ConnectButton.Custom";var defaultProps={accountStatus:"full",chainStatus:{largeScreen:"full",smallScreen:"icon"},label:"Connect Wallet",showBalance:{largeScreen:!0,smallScreen:!1}};function ConnectButton({accountStatus:cr=defaultProps.accountStatus,chainStatus:ar=defaultProps.chainStatus,label:dr=defaultProps.label,showBalance:fr=defaultProps.showBalance}){const hr=useRainbowKitChains(),pr=useConnectionStatus();return React.createElement(ConnectButtonRenderer,null,({account:mr,chain:gr,mounted:yr,openAccountModal:xr,openChainModal:wr,openConnectModal:br})=>{var Sr,vr,Er;const Ar=yr&&pr!=="loading",_r=(Sr=gr?.unsupported)!=null?Sr:!1;return React.createElement(Box,{display:"flex",gap:"12",...!Ar&&{"aria-hidden":!0,style:{opacity:0,pointerEvents:"none",userSelect:"none"}}},Ar&&mr&&pr==="connected"?React.createElement(React.Fragment,null,gr&&(hr.length>1||_r)&&React.createElement(Box,{alignItems:"center","aria-label":"Chain Selector",as:"button",background:_r?"connectButtonBackgroundError":"connectButtonBackground",borderRadius:"connectButton",boxShadow:"connectButton",className:touchableStyles({active:"shrink",hover:"grow"}),color:_r?"connectButtonTextError":"connectButtonText",display:mapResponsiveValue(ar,Cr=>Cr==="none"?"none":"flex"),fontFamily:"body",fontWeight:"bold",gap:"6",key:_r?"unsupported":"supported",onClick:wr,paddingX:"10",paddingY:"8",testId:_r?"wrong-network-button":"chain-button",transition:"default",type:"button"},_r?React.createElement(Box,{alignItems:"center",display:"flex",height:"24",paddingX:"4"},"Wrong network"):React.createElement(Box,{alignItems:"center",display:"flex",gap:"6"},gr.hasIcon?React.createElement(Box,{display:mapResponsiveValue(ar,Cr=>Cr==="full"||Cr==="icon"?"block":"none"),height:"24",width:"24"},React.createElement(AsyncImage,{alt:(vr=gr.name)!=null?vr:"Chain icon",background:gr.iconBackground,borderRadius:"full",height:"24",src:gr.iconUrl,width:"24"})):null,React.createElement(Box,{display:mapResponsiveValue(ar,Cr=>Cr==="icon"&&!gr.iconUrl||Cr==="full"||Cr==="name"?"block":"none")},(Er=gr.name)!=null?Er:gr.id)),React.createElement(DropdownIcon,null)),!_r&&React.createElement(Box,{alignItems:"center",as:"button",background:"connectButtonBackground",borderRadius:"connectButton",boxShadow:"connectButton",className:touchableStyles({active:"shrink",hover:"grow"}),color:"connectButtonText",display:"flex",fontFamily:"body",fontWeight:"bold",onClick:xr,testId:"account-button",transition:"default",type:"button"},mr.displayBalance&&React.createElement(Box,{display:mapResponsiveValue(fr,Cr=>Cr?"block":"none"),padding:"8",paddingLeft:"12"},mr.displayBalance),React.createElement(Box,{background:normalizeResponsiveValue(fr)[isMobile()?"smallScreen":"largeScreen"]?"connectButtonInnerBackground":"connectButtonBackground",borderColor:"connectButtonBackground",borderRadius:"connectButton",borderStyle:"solid",borderWidth:"2",color:"connectButtonText",fontFamily:"body",fontWeight:"bold",paddingX:"8",paddingY:"6",transition:"default"},React.createElement(Box,{alignItems:"center",display:"flex",gap:"6",height:"24"},React.createElement(Box,{display:mapResponsiveValue(cr,Cr=>Cr==="full"||Cr==="avatar"?"block":"none")},React.createElement(Avatar,{address:mr.address,imageUrl:mr.ensAvatar,loading:mr.hasPendingTransactions,size:24})),React.createElement(Box,{alignItems:"center",display:"flex",gap:"6"},React.createElement(Box,{display:mapResponsiveValue(cr,Cr=>Cr==="full"||Cr==="address"?"block":"none")},mr.displayName),React.createElement(DropdownIcon,null)))))):React.createElement(Box,{as:"button",background:"accentColor",borderRadius:"connectButton",boxShadow:"connectButton",className:touchableStyles({active:"shrink",hover:"grow"}),color:"accentColorForeground",fontFamily:"body",fontWeight:"bold",height:"40",key:"connect",onClick:br,paddingX:"14",testId:"connect-button",transition:"default",type:"button"},dr))})}ConnectButton.__defaultProps=defaultProps;ConnectButton.Custom=ConnectButtonRenderer;var chacha20poly1305$1={},chacha={},binary={},int$1={};(function(cr){Object.defineProperty(cr,"__esModule",{value:!0});function ar(gr,yr){var xr=gr>>>16&65535,wr=gr&65535,br=yr>>>16&65535,Sr=yr&65535;return wr*Sr+(xr*Sr+wr*br<<16>>>0)|0}cr.mul=Math.imul||ar;function dr(gr,yr){return gr+yr|0}cr.add=dr;function fr(gr,yr){return gr-yr|0}cr.sub=fr;function hr(gr,yr){return gr<<yr|gr>>>32-yr}cr.rotl=hr;function pr(gr,yr){return gr<<32-yr|gr>>>yr}cr.rotr=pr;function mr(gr){return typeof gr=="number"&&isFinite(gr)&&Math.floor(gr)===gr}cr.isInteger=Number.isInteger||mr,cr.MAX_SAFE_INTEGER=9007199254740991,cr.isSafeInteger=function(gr){return cr.isInteger(gr)&&gr>=-cr.MAX_SAFE_INTEGER&&gr<=cr.MAX_SAFE_INTEGER}})(int$1);Object.defineProperty(binary,"__esModule",{value:!0});var int_1=int$1;function readInt16BE(cr,ar){return ar===void 0&&(ar=0),(cr[ar+0]<<8|cr[ar+1])<<16>>16}binary.readInt16BE=readInt16BE;function readUint16BE(cr,ar){return ar===void 0&&(ar=0),(cr[ar+0]<<8|cr[ar+1])>>>0}binary.readUint16BE=readUint16BE;function readInt16LE(cr,ar){return ar===void 0&&(ar=0),(cr[ar+1]<<8|cr[ar])<<16>>16}binary.readInt16LE=readInt16LE;function readUint16LE(cr,ar){return ar===void 0&&(ar=0),(cr[ar+1]<<8|cr[ar])>>>0}binary.readUint16LE=readUint16LE;function writeUint16BE(cr,ar,dr){return ar===void 0&&(ar=new Uint8Array(2)),dr===void 0&&(dr=0),ar[dr+0]=cr>>>8,ar[dr+1]=cr>>>0,ar}binary.writeUint16BE=writeUint16BE;binary.writeInt16BE=writeUint16BE;function writeUint16LE(cr,ar,dr){return ar===void 0&&(ar=new Uint8Array(2)),dr===void 0&&(dr=0),ar[dr+0]=cr>>>0,ar[dr+1]=cr>>>8,ar}binary.writeUint16LE=writeUint16LE;binary.writeInt16LE=writeUint16LE;function readInt32BE(cr,ar){return ar===void 0&&(ar=0),cr[ar]<<24|cr[ar+1]<<16|cr[ar+2]<<8|cr[ar+3]}binary.readInt32BE=readInt32BE;function readUint32BE(cr,ar){return ar===void 0&&(ar=0),(cr[ar]<<24|cr[ar+1]<<16|cr[ar+2]<<8|cr[ar+3])>>>0}binary.readUint32BE=readUint32BE;function readInt32LE(cr,ar){return ar===void 0&&(ar=0),cr[ar+3]<<24|cr[ar+2]<<16|cr[ar+1]<<8|cr[ar]}binary.readInt32LE=readInt32LE;function readUint32LE(cr,ar){return ar===void 0&&(ar=0),(cr[ar+3]<<24|cr[ar+2]<<16|cr[ar+1]<<8|cr[ar])>>>0}binary.readUint32LE=readUint32LE;function writeUint32BE(cr,ar,dr){return ar===void 0&&(ar=new Uint8Array(4)),dr===void 0&&(dr=0),ar[dr+0]=cr>>>24,ar[dr+1]=cr>>>16,ar[dr+2]=cr>>>8,ar[dr+3]=cr>>>0,ar}binary.writeUint32BE=writeUint32BE;binary.writeInt32BE=writeUint32BE;function writeUint32LE(cr,ar,dr){return ar===void 0&&(ar=new Uint8Array(4)),dr===void 0&&(dr=0),ar[dr+0]=cr>>>0,ar[dr+1]=cr>>>8,ar[dr+2]=cr>>>16,ar[dr+3]=cr>>>24,ar}binary.writeUint32LE=writeUint32LE;binary.writeInt32LE=writeUint32LE;function readInt64BE(cr,ar){ar===void 0&&(ar=0);var dr=readInt32BE(cr,ar),fr=readInt32BE(cr,ar+4);return dr*4294967296+fr-(fr>>31)*4294967296}binary.readInt64BE=readInt64BE;function readUint64BE(cr,ar){ar===void 0&&(ar=0);var dr=readUint32BE(cr,ar),fr=readUint32BE(cr,ar+4);return dr*4294967296+fr}binary.readUint64BE=readUint64BE;function readInt64LE(cr,ar){ar===void 0&&(ar=0);var dr=readInt32LE(cr,ar),fr=readInt32LE(cr,ar+4);return fr*4294967296+dr-(dr>>31)*4294967296}binary.readInt64LE=readInt64LE;function readUint64LE(cr,ar){ar===void 0&&(ar=0);var dr=readUint32LE(cr,ar),fr=readUint32LE(cr,ar+4);return fr*4294967296+dr}binary.readUint64LE=readUint64LE;function writeUint64BE(cr,ar,dr){return ar===void 0&&(ar=new Uint8Array(8)),dr===void 0&&(dr=0),writeUint32BE(cr/4294967296>>>0,ar,dr),writeUint32BE(cr>>>0,ar,dr+4),ar}binary.writeUint64BE=writeUint64BE;binary.writeInt64BE=writeUint64BE;function writeUint64LE(cr,ar,dr){return ar===void 0&&(ar=new Uint8Array(8)),dr===void 0&&(dr=0),writeUint32LE(cr>>>0,ar,dr),writeUint32LE(cr/4294967296>>>0,ar,dr+4),ar}binary.writeUint64LE=writeUint64LE;binary.writeInt64LE=writeUint64LE;function readUintBE$1(cr,ar,dr){if(dr===void 0&&(dr=0),cr%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(cr/8>ar.length-dr)throw new Error("readUintBE: array is too short for the given bitLength");for(var fr=0,hr=1,pr=cr/8+dr-1;pr>=dr;pr--)fr+=ar[pr]*hr,hr*=256;return fr}binary.readUintBE=readUintBE$1;function readUintLE$1(cr,ar,dr){if(dr===void 0&&(dr=0),cr%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(cr/8>ar.length-dr)throw new Error("readUintLE: array is too short for the given bitLength");for(var fr=0,hr=1,pr=dr;pr<dr+cr/8;pr++)fr+=ar[pr]*hr,hr*=256;return fr}binary.readUintLE=readUintLE$1;function writeUintBE$1(cr,ar,dr,fr){if(dr===void 0&&(dr=new Uint8Array(cr/8)),fr===void 0&&(fr=0),cr%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(ar))throw new Error("writeUintBE value must be an integer");for(var hr=1,pr=cr/8+fr-1;pr>=fr;pr--)dr[pr]=ar/hr&255,hr*=256;return dr}binary.writeUintBE=writeUintBE$1;function writeUintLE$1(cr,ar,dr,fr){if(dr===void 0&&(dr=new Uint8Array(cr/8)),fr===void 0&&(fr=0),cr%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(ar))throw new Error("writeUintLE value must be an integer");for(var hr=1,pr=fr;pr<fr+cr/8;pr++)dr[pr]=ar/hr&255,hr*=256;return dr}binary.writeUintLE=writeUintLE$1;function readFloat32BE(cr,ar){ar===void 0&&(ar=0);var dr=new DataView(cr.buffer,cr.byteOffset,cr.byteLength);return dr.getFloat32(ar)}binary.readFloat32BE=readFloat32BE;function readFloat32LE(cr,ar){ar===void 0&&(ar=0);var dr=new DataView(cr.buffer,cr.byteOffset,cr.byteLength);return dr.getFloat32(ar,!0)}binary.readFloat32LE=readFloat32LE;function readFloat64BE(cr,ar){ar===void 0&&(ar=0);var dr=new DataView(cr.buffer,cr.byteOffset,cr.byteLength);return dr.getFloat64(ar)}binary.readFloat64BE=readFloat64BE;function readFloat64LE(cr,ar){ar===void 0&&(ar=0);var dr=new DataView(cr.buffer,cr.byteOffset,cr.byteLength);return dr.getFloat64(ar,!0)}binary.readFloat64LE=readFloat64LE;function writeFloat32BE(cr,ar,dr){ar===void 0&&(ar=new Uint8Array(4)),dr===void 0&&(dr=0);var fr=new DataView(ar.buffer,ar.byteOffset,ar.byteLength);return fr.setFloat32(dr,cr),ar}binary.writeFloat32BE=writeFloat32BE;function writeFloat32LE(cr,ar,dr){ar===void 0&&(ar=new Uint8Array(4)),dr===void 0&&(dr=0);var fr=new DataView(ar.buffer,ar.byteOffset,ar.byteLength);return fr.setFloat32(dr,cr,!0),ar}binary.writeFloat32LE=writeFloat32LE;function writeFloat64BE(cr,ar,dr){ar===void 0&&(ar=new Uint8Array(8)),dr===void 0&&(dr=0);var fr=new DataView(ar.buffer,ar.byteOffset,ar.byteLength);return fr.setFloat64(dr,cr),ar}binary.writeFloat64BE=writeFloat64BE;function writeFloat64LE(cr,ar,dr){ar===void 0&&(ar=new Uint8Array(8)),dr===void 0&&(dr=0);var fr=new DataView(ar.buffer,ar.byteOffset,ar.byteLength);return fr.setFloat64(dr,cr,!0),ar}binary.writeFloat64LE=writeFloat64LE;var wipe$1={};Object.defineProperty(wipe$1,"__esModule",{value:!0});function wipe(cr){for(var ar=0;ar<cr.length;ar++)cr[ar]=0;return cr}wipe$1.wipe=wipe;Object.defineProperty(chacha,"__esModule",{value:!0});var binary_1=binary,wipe_1$3=wipe$1,ROUNDS=20;function core(cr,ar,dr){for(var fr=1634760805,hr=857760878,pr=2036477234,mr=1797285236,gr=dr[3]<<24|dr[2]<<16|dr[1]<<8|dr[0],yr=dr[7]<<24|dr[6]<<16|dr[5]<<8|dr[4],xr=dr[11]<<24|dr[10]<<16|dr[9]<<8|dr[8],wr=dr[15]<<24|dr[14]<<16|dr[13]<<8|dr[12],br=dr[19]<<24|dr[18]<<16|dr[17]<<8|dr[16],Sr=dr[23]<<24|dr[22]<<16|dr[21]<<8|dr[20],vr=dr[27]<<24|dr[26]<<16|dr[25]<<8|dr[24],Er=dr[31]<<24|dr[30]<<16|dr[29]<<8|dr[28],Ar=ar[3]<<24|ar[2]<<16|ar[1]<<8|ar[0],_r=ar[7]<<24|ar[6]<<16|ar[5]<<8|ar[4],Cr=ar[11]<<24|ar[10]<<16|ar[9]<<8|ar[8],kr=ar[15]<<24|ar[14]<<16|ar[13]<<8|ar[12],Rr=fr,Ir=hr,Nr=pr,Pr=mr,Tr=gr,Br=yr,Fr=xr,jr=wr,Ur=br,qr=Sr,Hr=vr,Or=Er,Mr=Ar,Lr=_r,Vr=Cr,Jr=kr,es=0;es<ROUNDS;es+=2)Rr=Rr+Tr|0,Mr^=Rr,Mr=Mr>>>32-16|Mr<<16,Ur=Ur+Mr|0,Tr^=Ur,Tr=Tr>>>32-12|Tr<<12,Ir=Ir+Br|0,Lr^=Ir,Lr=Lr>>>32-16|Lr<<16,qr=qr+Lr|0,Br^=qr,Br=Br>>>32-12|Br<<12,Nr=Nr+Fr|0,Vr^=Nr,Vr=Vr>>>32-16|Vr<<16,Hr=Hr+Vr|0,Fr^=Hr,Fr=Fr>>>32-12|Fr<<12,Pr=Pr+jr|0,Jr^=Pr,Jr=Jr>>>32-16|Jr<<16,Or=Or+Jr|0,jr^=Or,jr=jr>>>32-12|jr<<12,Nr=Nr+Fr|0,Vr^=Nr,Vr=Vr>>>32-8|Vr<<8,Hr=Hr+Vr|0,Fr^=Hr,Fr=Fr>>>32-7|Fr<<7,Pr=Pr+jr|0,Jr^=Pr,Jr=Jr>>>32-8|Jr<<8,Or=Or+Jr|0,jr^=Or,jr=jr>>>32-7|jr<<7,Ir=Ir+Br|0,Lr^=Ir,Lr=Lr>>>32-8|Lr<<8,qr=qr+Lr|0,Br^=qr,Br=Br>>>32-7|Br<<7,Rr=Rr+Tr|0,Mr^=Rr,Mr=Mr>>>32-8|Mr<<8,Ur=Ur+Mr|0,Tr^=Ur,Tr=Tr>>>32-7|Tr<<7,Rr=Rr+Br|0,Jr^=Rr,Jr=Jr>>>32-16|Jr<<16,Hr=Hr+Jr|0,Br^=Hr,Br=Br>>>32-12|Br<<12,Ir=Ir+Fr|0,Mr^=Ir,Mr=Mr>>>32-16|Mr<<16,Or=Or+Mr|0,Fr^=Or,Fr=Fr>>>32-12|Fr<<12,Nr=Nr+jr|0,Lr^=Nr,Lr=Lr>>>32-16|Lr<<16,Ur=Ur+Lr|0,jr^=Ur,jr=jr>>>32-12|jr<<12,Pr=Pr+Tr|0,Vr^=Pr,Vr=Vr>>>32-16|Vr<<16,qr=qr+Vr|0,Tr^=qr,Tr=Tr>>>32-12|Tr<<12,Nr=Nr+jr|0,Lr^=Nr,Lr=Lr>>>32-8|Lr<<8,Ur=Ur+Lr|0,jr^=Ur,jr=jr>>>32-7|jr<<7,Pr=Pr+Tr|0,Vr^=Pr,Vr=Vr>>>32-8|Vr<<8,qr=qr+Vr|0,Tr^=qr,Tr=Tr>>>32-7|Tr<<7,Ir=Ir+Fr|0,Mr^=Ir,Mr=Mr>>>32-8|Mr<<8,Or=Or+Mr|0,Fr^=Or,Fr=Fr>>>32-7|Fr<<7,Rr=Rr+Br|0,Jr^=Rr,Jr=Jr>>>32-8|Jr<<8,Hr=Hr+Jr|0,Br^=Hr,Br=Br>>>32-7|Br<<7;binary_1.writeUint32LE(Rr+fr|0,cr,0),binary_1.writeUint32LE(Ir+hr|0,cr,4),binary_1.writeUint32LE(Nr+pr|0,cr,8),binary_1.writeUint32LE(Pr+mr|0,cr,12),binary_1.writeUint32LE(Tr+gr|0,cr,16),binary_1.writeUint32LE(Br+yr|0,cr,20),binary_1.writeUint32LE(Fr+xr|0,cr,24),binary_1.writeUint32LE(jr+wr|0,cr,28),binary_1.writeUint32LE(Ur+br|0,cr,32),binary_1.writeUint32LE(qr+Sr|0,cr,36),binary_1.writeUint32LE(Hr+vr|0,cr,40),binary_1.writeUint32LE(Or+Er|0,cr,44),binary_1.writeUint32LE(Mr+Ar|0,cr,48),binary_1.writeUint32LE(Lr+_r|0,cr,52),binary_1.writeUint32LE(Vr+Cr|0,cr,56),binary_1.writeUint32LE(Jr+kr|0,cr,60)}function streamXOR(cr,ar,dr,fr,hr){if(hr===void 0&&(hr=0),cr.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(fr.length<dr.length)throw new Error("ChaCha: destination is shorter than source");var pr,mr;if(hr===0){if(ar.length!==8&&ar.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");pr=new Uint8Array(16),mr=pr.length-ar.length,pr.set(ar,mr)}else{if(ar.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");pr=ar,mr=hr}for(var gr=new Uint8Array(64),yr=0;yr<dr.length;yr+=64){core(gr,pr,cr);for(var xr=yr;xr<yr+64&&xr<dr.length;xr++)fr[xr]=dr[xr]^gr[xr-yr];incrementCounter(pr,0,mr)}return wipe_1$3.wipe(gr),hr===0&&wipe_1$3.wipe(pr),fr}chacha.streamXOR=streamXOR;function stream(cr,ar,dr,fr){return fr===void 0&&(fr=0),wipe_1$3.wipe(dr),streamXOR(cr,ar,dr,dr,fr)}chacha.stream=stream;function incrementCounter(cr,ar,dr){for(var fr=1;dr--;)fr=fr+(cr[ar]&255)|0,cr[ar]=fr&255,fr>>>=8,ar++;if(fr>0)throw new Error("ChaCha: counter overflow")}var poly1305$1={},constantTime={};Object.defineProperty(constantTime,"__esModule",{value:!0});function select$1(cr,ar,dr){return~(cr-1)&ar|cr-1&dr}constantTime.select=select$1;function lessOrEqual(cr,ar){return(cr|0)-(ar|0)-1>>>31&1}constantTime.lessOrEqual=lessOrEqual;function compare$1(cr,ar){if(cr.length!==ar.length)return 0;for(var dr=0,fr=0;fr<cr.length;fr++)dr|=cr[fr]^ar[fr];return 1&dr-1>>>8}constantTime.compare=compare$1;function equal$1(cr,ar){return cr.length===0||ar.length===0?!1:compare$1(cr,ar)!==0}constantTime.equal=equal$1;(function(cr){Object.defineProperty(cr,"__esModule",{value:!0});var ar=constantTime,dr=wipe$1;cr.DIGEST_LENGTH=16;var fr=function(){function mr(gr){this.digestLength=cr.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var yr=gr[0]|gr[1]<<8;this._r[0]=yr&8191;var xr=gr[2]|gr[3]<<8;this._r[1]=(yr>>>13|xr<<3)&8191;var wr=gr[4]|gr[5]<<8;this._r[2]=(xr>>>10|wr<<6)&7939;var br=gr[6]|gr[7]<<8;this._r[3]=(wr>>>7|br<<9)&8191;var Sr=gr[8]|gr[9]<<8;this._r[4]=(br>>>4|Sr<<12)&255,this._r[5]=Sr>>>1&8190;var vr=gr[10]|gr[11]<<8;this._r[6]=(Sr>>>14|vr<<2)&8191;var Er=gr[12]|gr[13]<<8;this._r[7]=(vr>>>11|Er<<5)&8065;var Ar=gr[14]|gr[15]<<8;this._r[8]=(Er>>>8|Ar<<8)&8191,this._r[9]=Ar>>>5&127,this._pad[0]=gr[16]|gr[17]<<8,this._pad[1]=gr[18]|gr[19]<<8,this._pad[2]=gr[20]|gr[21]<<8,this._pad[3]=gr[22]|gr[23]<<8,this._pad[4]=gr[24]|gr[25]<<8,this._pad[5]=gr[26]|gr[27]<<8,this._pad[6]=gr[28]|gr[29]<<8,this._pad[7]=gr[30]|gr[31]<<8}return mr.prototype._blocks=function(gr,yr,xr){for(var wr=this._fin?0:2048,br=this._h[0],Sr=this._h[1],vr=this._h[2],Er=this._h[3],Ar=this._h[4],_r=this._h[5],Cr=this._h[6],kr=this._h[7],Rr=this._h[8],Ir=this._h[9],Nr=this._r[0],Pr=this._r[1],Tr=this._r[2],Br=this._r[3],Fr=this._r[4],jr=this._r[5],Ur=this._r[6],qr=this._r[7],Hr=this._r[8],Or=this._r[9];xr>=16;){var Mr=gr[yr+0]|gr[yr+1]<<8;br+=Mr&8191;var Lr=gr[yr+2]|gr[yr+3]<<8;Sr+=(Mr>>>13|Lr<<3)&8191;var Vr=gr[yr+4]|gr[yr+5]<<8;vr+=(Lr>>>10|Vr<<6)&8191;var Jr=gr[yr+6]|gr[yr+7]<<8;Er+=(Vr>>>7|Jr<<9)&8191;var es=gr[yr+8]|gr[yr+9]<<8;Ar+=(Jr>>>4|es<<12)&8191,_r+=es>>>1&8191;var ns=gr[yr+10]|gr[yr+11]<<8;Cr+=(es>>>14|ns<<2)&8191;var Qr=gr[yr+12]|gr[yr+13]<<8;kr+=(ns>>>11|Qr<<5)&8191;var zr=gr[yr+14]|gr[yr+15]<<8;Rr+=(Qr>>>8|zr<<8)&8191,Ir+=zr>>>5|wr;var Wr=0,ss=Wr;ss+=br*Nr,ss+=Sr*(5*Or),ss+=vr*(5*Hr),ss+=Er*(5*qr),ss+=Ar*(5*Ur),Wr=ss>>>13,ss&=8191,ss+=_r*(5*jr),ss+=Cr*(5*Fr),ss+=kr*(5*Br),ss+=Rr*(5*Tr),ss+=Ir*(5*Pr),Wr+=ss>>>13,ss&=8191;var Xr=Wr;Xr+=br*Pr,Xr+=Sr*Nr,Xr+=vr*(5*Or),Xr+=Er*(5*Hr),Xr+=Ar*(5*qr),Wr=Xr>>>13,Xr&=8191,Xr+=_r*(5*Ur),Xr+=Cr*(5*jr),Xr+=kr*(5*Fr),Xr+=Rr*(5*Br),Xr+=Ir*(5*Tr),Wr+=Xr>>>13,Xr&=8191;var ts=Wr;ts+=br*Tr,ts+=Sr*Pr,ts+=vr*Nr,ts+=Er*(5*Or),ts+=Ar*(5*Hr),Wr=ts>>>13,ts&=8191,ts+=_r*(5*qr),ts+=Cr*(5*Ur),ts+=kr*(5*jr),ts+=Rr*(5*Fr),ts+=Ir*(5*Br),Wr+=ts>>>13,ts&=8191;var fs=Wr;fs+=br*Br,fs+=Sr*Tr,fs+=vr*Pr,fs+=Er*Nr,fs+=Ar*(5*Or),Wr=fs>>>13,fs&=8191,fs+=_r*(5*Hr),fs+=Cr*(5*qr),fs+=kr*(5*Ur),fs+=Rr*(5*jr),fs+=Ir*(5*Fr),Wr+=fs>>>13,fs&=8191;var rs=Wr;rs+=br*Fr,rs+=Sr*Br,rs+=vr*Tr,rs+=Er*Pr,rs+=Ar*Nr,Wr=rs>>>13,rs&=8191,rs+=_r*(5*Or),rs+=Cr*(5*Hr),rs+=kr*(5*qr),rs+=Rr*(5*Ur),rs+=Ir*(5*jr),Wr+=rs>>>13,rs&=8191;var as=Wr;as+=br*jr,as+=Sr*Fr,as+=vr*Br,as+=Er*Tr,as+=Ar*Pr,Wr=as>>>13,as&=8191,as+=_r*Nr,as+=Cr*(5*Or),as+=kr*(5*Hr),as+=Rr*(5*qr),as+=Ir*(5*Ur),Wr+=as>>>13,as&=8191;var ps=Wr;ps+=br*Ur,ps+=Sr*jr,ps+=vr*Fr,ps+=Er*Br,ps+=Ar*Tr,Wr=ps>>>13,ps&=8191,ps+=_r*Pr,ps+=Cr*Nr,ps+=kr*(5*Or),ps+=Rr*(5*Hr),ps+=Ir*(5*qr),Wr+=ps>>>13,ps&=8191;var xs=Wr;xs+=br*qr,xs+=Sr*Ur,xs+=vr*jr,xs+=Er*Fr,xs+=Ar*Br,Wr=xs>>>13,xs&=8191,xs+=_r*Tr,xs+=Cr*Pr,xs+=kr*Nr,xs+=Rr*(5*Or),xs+=Ir*(5*Hr),Wr+=xs>>>13,xs&=8191;var Ss=Wr;Ss+=br*Hr,Ss+=Sr*qr,Ss+=vr*Ur,Ss+=Er*jr,Ss+=Ar*Fr,Wr=Ss>>>13,Ss&=8191,Ss+=_r*Br,Ss+=Cr*Tr,Ss+=kr*Pr,Ss+=Rr*Nr,Ss+=Ir*(5*Or),Wr+=Ss>>>13,Ss&=8191;var Ns=Wr;Ns+=br*Or,Ns+=Sr*Hr,Ns+=vr*qr,Ns+=Er*Ur,Ns+=Ar*jr,Wr=Ns>>>13,Ns&=8191,Ns+=_r*Fr,Ns+=Cr*Br,Ns+=kr*Tr,Ns+=Rr*Pr,Ns+=Ir*Nr,Wr+=Ns>>>13,Ns&=8191,Wr=(Wr<<2)+Wr|0,Wr=Wr+ss|0,ss=Wr&8191,Wr=Wr>>>13,Xr+=Wr,br=ss,Sr=Xr,vr=ts,Er=fs,Ar=rs,_r=as,Cr=ps,kr=xs,Rr=Ss,Ir=Ns,yr+=16,xr-=16}this._h[0]=br,this._h[1]=Sr,this._h[2]=vr,this._h[3]=Er,this._h[4]=Ar,this._h[5]=_r,this._h[6]=Cr,this._h[7]=kr,this._h[8]=Rr,this._h[9]=Ir},mr.prototype.finish=function(gr,yr){yr===void 0&&(yr=0);var xr=new Uint16Array(10),wr,br,Sr,vr;if(this._leftover){for(vr=this._leftover,this._buffer[vr++]=1;vr<16;vr++)this._buffer[vr]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(wr=this._h[1]>>>13,this._h[1]&=8191,vr=2;vr<10;vr++)this._h[vr]+=wr,wr=this._h[vr]>>>13,this._h[vr]&=8191;for(this._h[0]+=wr*5,wr=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=wr,wr=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=wr,xr[0]=this._h[0]+5,wr=xr[0]>>>13,xr[0]&=8191,vr=1;vr<10;vr++)xr[vr]=this._h[vr]+wr,wr=xr[vr]>>>13,xr[vr]&=8191;for(xr[9]-=8192,br=(wr^1)-1,vr=0;vr<10;vr++)xr[vr]&=br;for(br=~br,vr=0;vr<10;vr++)this._h[vr]=this._h[vr]&br|xr[vr];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,Sr=this._h[0]+this._pad[0],this._h[0]=Sr&65535,vr=1;vr<8;vr++)Sr=(this._h[vr]+this._pad[vr]|0)+(Sr>>>16)|0,this._h[vr]=Sr&65535;return gr[yr+0]=this._h[0]>>>0,gr[yr+1]=this._h[0]>>>8,gr[yr+2]=this._h[1]>>>0,gr[yr+3]=this._h[1]>>>8,gr[yr+4]=this._h[2]>>>0,gr[yr+5]=this._h[2]>>>8,gr[yr+6]=this._h[3]>>>0,gr[yr+7]=this._h[3]>>>8,gr[yr+8]=this._h[4]>>>0,gr[yr+9]=this._h[4]>>>8,gr[yr+10]=this._h[5]>>>0,gr[yr+11]=this._h[5]>>>8,gr[yr+12]=this._h[6]>>>0,gr[yr+13]=this._h[6]>>>8,gr[yr+14]=this._h[7]>>>0,gr[yr+15]=this._h[7]>>>8,this._finished=!0,this},mr.prototype.update=function(gr){var yr=0,xr=gr.length,wr;if(this._leftover){wr=16-this._leftover,wr>xr&&(wr=xr);for(var br=0;br<wr;br++)this._buffer[this._leftover+br]=gr[yr+br];if(xr-=wr,yr+=wr,this._leftover+=wr,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(xr>=16&&(wr=xr-xr%16,this._blocks(gr,yr,wr),yr+=wr,xr-=wr),xr){for(var br=0;br<xr;br++)this._buffer[this._leftover+br]=gr[yr+br];this._leftover+=xr}return this},mr.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var gr=new Uint8Array(16);return this.finish(gr),gr},mr.prototype.clean=function(){return dr.wipe(this._buffer),dr.wipe(this._r),dr.wipe(this._h),dr.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},mr}();cr.Poly1305=fr;function hr(mr,gr){var yr=new fr(mr);yr.update(gr);var xr=yr.digest();return yr.clean(),xr}cr.oneTimeAuth=hr;function pr(mr,gr){return mr.length!==cr.DIGEST_LENGTH||gr.length!==cr.DIGEST_LENGTH?!1:ar.equal(mr,gr)}cr.equal=pr})(poly1305$1);(function(cr){Object.defineProperty(cr,"__esModule",{value:!0});var ar=chacha,dr=poly1305$1,fr=wipe$1,hr=binary,pr=constantTime;cr.KEY_LENGTH=32,cr.NONCE_LENGTH=12,cr.TAG_LENGTH=16;var mr=new Uint8Array(16),gr=function(){function yr(xr){if(this.nonceLength=cr.NONCE_LENGTH,this.tagLength=cr.TAG_LENGTH,xr.length!==cr.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(xr)}return yr.prototype.seal=function(xr,wr,br,Sr){if(xr.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var vr=new Uint8Array(16);vr.set(xr,vr.length-xr.length);var Er=new Uint8Array(32);ar.stream(this._key,vr,Er,4);var Ar=wr.length+this.tagLength,_r;if(Sr){if(Sr.length!==Ar)throw new Error("ChaCha20Poly1305: incorrect destination length");_r=Sr}else _r=new Uint8Array(Ar);return ar.streamXOR(this._key,vr,wr,_r,4),this._authenticate(_r.subarray(_r.length-this.tagLength,_r.length),Er,_r.subarray(0,_r.length-this.tagLength),br),fr.wipe(vr),_r},yr.prototype.open=function(xr,wr,br,Sr){if(xr.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(wr.length<this.tagLength)return null;var vr=new Uint8Array(16);vr.set(xr,vr.length-xr.length);var Er=new Uint8Array(32);ar.stream(this._key,vr,Er,4);var Ar=new Uint8Array(this.tagLength);if(this._authenticate(Ar,Er,wr.subarray(0,wr.length-this.tagLength),br),!pr.equal(Ar,wr.subarray(wr.length-this.tagLength,wr.length)))return null;var _r=wr.length-this.tagLength,Cr;if(Sr){if(Sr.length!==_r)throw new Error("ChaCha20Poly1305: incorrect destination length");Cr=Sr}else Cr=new Uint8Array(_r);return ar.streamXOR(this._key,vr,wr.subarray(0,wr.length-this.tagLength),Cr,4),fr.wipe(vr),Cr},yr.prototype.clean=function(){return fr.wipe(this._key),this},yr.prototype._authenticate=function(xr,wr,br,Sr){var vr=new dr.Poly1305(wr);Sr&&(vr.update(Sr),Sr.length%16>0&&vr.update(mr.subarray(Sr.length%16))),vr.update(br),br.length%16>0&&vr.update(mr.subarray(br.length%16));var Er=new Uint8Array(8);Sr&&hr.writeUint64LE(Sr.length,Er),vr.update(Er),hr.writeUint64LE(br.length,Er),vr.update(Er);for(var Ar=vr.digest(),_r=0;_r<Ar.length;_r++)xr[_r]=Ar[_r];vr.clean(),fr.wipe(Ar),fr.wipe(Er)},yr}();cr.ChaCha20Poly1305=gr})(chacha20poly1305$1);var hkdf={},hmac$5={},hash$6={};Object.defineProperty(hash$6,"__esModule",{value:!0});function isSerializableHash(cr){return typeof cr.saveState<"u"&&typeof cr.restoreState<"u"&&typeof cr.cleanSavedState<"u"}hash$6.isSerializableHash=isSerializableHash;Object.defineProperty(hmac$5,"__esModule",{value:!0});var hash_1=hash$6,constant_time_1=constantTime,wipe_1$2=wipe$1,HMAC$1=function(){function cr(ar,dr){this._finished=!1,this._inner=new ar,this._outer=new ar,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var fr=new Uint8Array(this.blockSize);dr.length>this.blockSize?this._inner.update(dr).finish(fr).clean():fr.set(dr);for(var hr=0;hr<fr.length;hr++)fr[hr]^=54;this._inner.update(fr);for(var hr=0;hr<fr.length;hr++)fr[hr]^=106;this._outer.update(fr),hash_1.isSerializableHash(this._inner)&&hash_1.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),wipe_1$2.wipe(fr)}return cr.prototype.reset=function(){if(!hash_1.isSerializableHash(this._inner)||!hash_1.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},cr.prototype.clean=function(){hash_1.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),hash_1.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},cr.prototype.update=function(ar){return this._inner.update(ar),this},cr.prototype.finish=function(ar){return this._finished?(this._outer.finish(ar),this):(this._inner.finish(ar),this._outer.update(ar.subarray(0,this.digestLength)).finish(ar),this._finished=!0,this)},cr.prototype.digest=function(){var ar=new Uint8Array(this.digestLength);return this.finish(ar),ar},cr.prototype.saveState=function(){if(!hash_1.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},cr.prototype.restoreState=function(ar){if(!hash_1.isSerializableHash(this._inner)||!hash_1.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(ar),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},cr.prototype.cleanSavedState=function(ar){if(!hash_1.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(ar)},cr}();hmac$5.HMAC=HMAC$1;function hmac$4(cr,ar,dr){var fr=new HMAC$1(cr,ar);fr.update(dr);var hr=fr.digest();return fr.clean(),hr}hmac$5.hmac=hmac$4;hmac$5.equal=constant_time_1.equal;Object.defineProperty(hkdf,"__esModule",{value:!0});var hmac_1=hmac$5,wipe_1$1=wipe$1,HKDF=function(){function cr(ar,dr,fr,hr){fr===void 0&&(fr=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=ar,this._info=hr;var pr=hmac_1.hmac(this._hash,fr,dr);this._hmac=new hmac_1.HMAC(ar,pr),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return cr.prototype._fillBuffer=function(){this._counter[0]++;var ar=this._counter[0];if(ar===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),ar>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},cr.prototype.expand=function(ar){for(var dr=new Uint8Array(ar),fr=0;fr<dr.length;fr++)this._bufpos===this._buffer.length&&this._fillBuffer(),dr[fr]=this._buffer[this._bufpos++];return dr},cr.prototype.clean=function(){this._hmac.clean(),wipe_1$1.wipe(this._buffer),wipe_1$1.wipe(this._counter),this._bufpos=0},cr}(),HKDF_1=hkdf.HKDF=HKDF,random$1={},system={},browser$1={};Object.defineProperty(browser$1,"__esModule",{value:!0});browser$1.BrowserRandomSource=void 0;const QUOTA=65536;class BrowserRandomSource{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const ar=typeof self<"u"?self.crypto||self.msCrypto:null;ar&&ar.getRandomValues!==void 0&&(this._crypto=ar,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(ar){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const dr=new Uint8Array(ar);for(let fr=0;fr<dr.length;fr+=QUOTA)this._crypto.getRandomValues(dr.subarray(fr,fr+Math.min(dr.length-fr,QUOTA)));return dr}}browser$1.BrowserRandomSource=BrowserRandomSource;function commonjsRequire$1(cr){throw new Error('Could not dynamically require "'+cr+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var node={};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$1$1=getAugmentedNamespace(__viteBrowserExternal$1);Object.defineProperty(node,"__esModule",{value:!0});node.NodeRandomSource=void 0;const wipe_1=wipe$1;class NodeRandomSource{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof commonjsRequire$1<"u"){const ar=require$$1$1;ar&&ar.randomBytes&&(this._crypto=ar,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(ar){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let dr=this._crypto.randomBytes(ar);if(dr.length!==ar)throw new Error("NodeRandomSource: got fewer bytes than requested");const fr=new Uint8Array(ar);for(let hr=0;hr<fr.length;hr++)fr[hr]=dr[hr];return(0,wipe_1.wipe)(dr),fr}}node.NodeRandomSource=NodeRandomSource;Object.defineProperty(system,"__esModule",{value:!0});system.SystemRandomSource=void 0;const browser_1=browser$1,node_1=node;class SystemRandomSource{constructor(){if(this.isAvailable=!1,this.name="",this._source=new browser_1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new node_1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(ar){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(ar)}}system.SystemRandomSource=SystemRandomSource;(function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.randomStringForEntropy=cr.randomString=cr.randomUint32=cr.randomBytes=cr.defaultRandomSource=void 0;const ar=system,dr=binary,fr=wipe$1;cr.defaultRandomSource=new ar.SystemRandomSource;function hr(xr,wr=cr.defaultRandomSource){return wr.randomBytes(xr)}cr.randomBytes=hr;function pr(xr=cr.defaultRandomSource){const wr=hr(4,xr),br=(0,dr.readUint32LE)(wr);return(0,fr.wipe)(wr),br}cr.randomUint32=pr;const mr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function gr(xr,wr=mr,br=cr.defaultRandomSource){if(wr.length<2)throw new Error("randomString charset is too short");if(wr.length>256)throw new Error("randomString charset is too long");let Sr="";const vr=wr.length,Er=256-256%vr;for(;xr>0;){const Ar=hr(Math.ceil(xr*256/Er),br);for(let _r=0;_r<Ar.length&&xr>0;_r++){const Cr=Ar[_r];Cr<Er&&(Sr+=wr.charAt(Cr%vr),xr--)}(0,fr.wipe)(Ar)}return Sr}cr.randomString=gr;function yr(xr,wr=mr,br=cr.defaultRandomSource){const Sr=Math.ceil(xr/(Math.log(wr.length)/Math.LN2));return gr(Sr,wr,br)}cr.randomStringForEntropy=yr})(random$1);var sha256$6={};(function(cr){Object.defineProperty(cr,"__esModule",{value:!0});var ar=binary,dr=wipe$1;cr.DIGEST_LENGTH=32,cr.BLOCK_SIZE=64;var fr=function(){function gr(){this.digestLength=cr.DIGEST_LENGTH,this.blockSize=cr.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return gr.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},gr.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},gr.prototype.clean=function(){dr.wipe(this._buffer),dr.wipe(this._temp),this.reset()},gr.prototype.update=function(yr,xr){if(xr===void 0&&(xr=yr.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var wr=0;if(this._bytesHashed+=xr,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&xr>0;)this._buffer[this._bufferLength++]=yr[wr++],xr--;this._bufferLength===this.blockSize&&(pr(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(xr>=this.blockSize&&(wr=pr(this._temp,this._state,yr,wr,xr),xr%=this.blockSize);xr>0;)this._buffer[this._bufferLength++]=yr[wr++],xr--;return this},gr.prototype.finish=function(yr){if(!this._finished){var xr=this._bytesHashed,wr=this._bufferLength,br=xr/536870912|0,Sr=xr<<3,vr=xr%64<56?64:128;this._buffer[wr]=128;for(var Er=wr+1;Er<vr-8;Er++)this._buffer[Er]=0;ar.writeUint32BE(br,this._buffer,vr-8),ar.writeUint32BE(Sr,this._buffer,vr-4),pr(this._temp,this._state,this._buffer,0,vr),this._finished=!0}for(var Er=0;Er<this.digestLength/4;Er++)ar.writeUint32BE(this._state[Er],yr,Er*4);return this},gr.prototype.digest=function(){var yr=new Uint8Array(this.digestLength);return this.finish(yr),yr},gr.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},gr.prototype.restoreState=function(yr){return this._state.set(yr.state),this._bufferLength=yr.bufferLength,yr.buffer&&this._buffer.set(yr.buffer),this._bytesHashed=yr.bytesHashed,this._finished=!1,this},gr.prototype.cleanSavedState=function(yr){dr.wipe(yr.state),yr.buffer&&dr.wipe(yr.buffer),yr.bufferLength=0,yr.bytesHashed=0},gr}();cr.SHA256=fr;var hr=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function pr(gr,yr,xr,wr,br){for(;br>=64;){for(var Sr=yr[0],vr=yr[1],Er=yr[2],Ar=yr[3],_r=yr[4],Cr=yr[5],kr=yr[6],Rr=yr[7],Ir=0;Ir<16;Ir++){var Nr=wr+Ir*4;gr[Ir]=ar.readUint32BE(xr,Nr)}for(var Ir=16;Ir<64;Ir++){var Pr=gr[Ir-2],Tr=(Pr>>>17|Pr<<32-17)^(Pr>>>19|Pr<<32-19)^Pr>>>10;Pr=gr[Ir-15];var Br=(Pr>>>7|Pr<<32-7)^(Pr>>>18|Pr<<32-18)^Pr>>>3;gr[Ir]=(Tr+gr[Ir-7]|0)+(Br+gr[Ir-16]|0)}for(var Ir=0;Ir<64;Ir++){var Tr=(((_r>>>6|_r<<26)^(_r>>>11|_r<<21)^(_r>>>25|_r<<7))+(_r&Cr^~_r&kr)|0)+(Rr+(hr[Ir]+gr[Ir]|0)|0)|0,Br=((Sr>>>2|Sr<<32-2)^(Sr>>>13|Sr<<32-13)^(Sr>>>22|Sr<<32-22))+(Sr&vr^Sr&Er^vr&Er)|0;Rr=kr,kr=Cr,Cr=_r,_r=Ar+Tr|0,Ar=Er,Er=vr,vr=Sr,Sr=Tr+Br|0}yr[0]+=Sr,yr[1]+=vr,yr[2]+=Er,yr[3]+=Ar,yr[4]+=_r,yr[5]+=Cr,yr[6]+=kr,yr[7]+=Rr,wr+=64,br-=64}return wr}function mr(gr){var yr=new fr;yr.update(gr);var xr=yr.digest();return yr.clean(),xr}cr.hash=mr})(sha256$6);var x25519$1={};(function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.sharedKey=cr.generateKeyPair=cr.generateKeyPairFromSeed=cr.scalarMultBase=cr.scalarMult=cr.SHARED_KEY_LENGTH=cr.SECRET_KEY_LENGTH=cr.PUBLIC_KEY_LENGTH=void 0;const ar=random$1,dr=wipe$1;cr.PUBLIC_KEY_LENGTH=32,cr.SECRET_KEY_LENGTH=32,cr.SHARED_KEY_LENGTH=32;function fr(Ir){const Nr=new Float64Array(16);if(Ir)for(let Pr=0;Pr<Ir.length;Pr++)Nr[Pr]=Ir[Pr];return Nr}const hr=new Uint8Array(32);hr[0]=9;const pr=fr([56129,1]);function mr(Ir){let Nr=1;for(let Pr=0;Pr<16;Pr++){let Tr=Ir[Pr]+Nr+65535;Nr=Math.floor(Tr/65536),Ir[Pr]=Tr-Nr*65536}Ir[0]+=Nr-1+37*(Nr-1)}function gr(Ir,Nr,Pr){const Tr=~(Pr-1);for(let Br=0;Br<16;Br++){const Fr=Tr&(Ir[Br]^Nr[Br]);Ir[Br]^=Fr,Nr[Br]^=Fr}}function yr(Ir,Nr){const Pr=fr(),Tr=fr();for(let Br=0;Br<16;Br++)Tr[Br]=Nr[Br];mr(Tr),mr(Tr),mr(Tr);for(let Br=0;Br<2;Br++){Pr[0]=Tr[0]-65517;for(let jr=1;jr<15;jr++)Pr[jr]=Tr[jr]-65535-(Pr[jr-1]>>16&1),Pr[jr-1]&=65535;Pr[15]=Tr[15]-32767-(Pr[14]>>16&1);const Fr=Pr[15]>>16&1;Pr[14]&=65535,gr(Tr,Pr,1-Fr)}for(let Br=0;Br<16;Br++)Ir[2*Br]=Tr[Br]&255,Ir[2*Br+1]=Tr[Br]>>8}function xr(Ir,Nr){for(let Pr=0;Pr<16;Pr++)Ir[Pr]=Nr[2*Pr]+(Nr[2*Pr+1]<<8);Ir[15]&=32767}function wr(Ir,Nr,Pr){for(let Tr=0;Tr<16;Tr++)Ir[Tr]=Nr[Tr]+Pr[Tr]}function br(Ir,Nr,Pr){for(let Tr=0;Tr<16;Tr++)Ir[Tr]=Nr[Tr]-Pr[Tr]}function Sr(Ir,Nr,Pr){let Tr,Br,Fr=0,jr=0,Ur=0,qr=0,Hr=0,Or=0,Mr=0,Lr=0,Vr=0,Jr=0,es=0,ns=0,Qr=0,zr=0,Wr=0,ss=0,Xr=0,ts=0,fs=0,rs=0,as=0,ps=0,xs=0,Ss=0,Ns=0,Ts=0,os=0,bs=0,ws=0,As=0,gs=0,vs=Pr[0],Ps=Pr[1],Os=Pr[2],Ms=Pr[3],zs=Pr[4],Hs=Pr[5],Cs=Pr[6],ls=Pr[7],Kr=Pr[8],Zr=Pr[9],hs=Pr[10],ys=Pr[11],Es=Pr[12],Is=Pr[13],$s=Pr[14],Rs=Pr[15];Tr=Nr[0],Fr+=Tr*vs,jr+=Tr*Ps,Ur+=Tr*Os,qr+=Tr*Ms,Hr+=Tr*zs,Or+=Tr*Hs,Mr+=Tr*Cs,Lr+=Tr*ls,Vr+=Tr*Kr,Jr+=Tr*Zr,es+=Tr*hs,ns+=Tr*ys,Qr+=Tr*Es,zr+=Tr*Is,Wr+=Tr*$s,ss+=Tr*Rs,Tr=Nr[1],jr+=Tr*vs,Ur+=Tr*Ps,qr+=Tr*Os,Hr+=Tr*Ms,Or+=Tr*zs,Mr+=Tr*Hs,Lr+=Tr*Cs,Vr+=Tr*ls,Jr+=Tr*Kr,es+=Tr*Zr,ns+=Tr*hs,Qr+=Tr*ys,zr+=Tr*Es,Wr+=Tr*Is,ss+=Tr*$s,Xr+=Tr*Rs,Tr=Nr[2],Ur+=Tr*vs,qr+=Tr*Ps,Hr+=Tr*Os,Or+=Tr*Ms,Mr+=Tr*zs,Lr+=Tr*Hs,Vr+=Tr*Cs,Jr+=Tr*ls,es+=Tr*Kr,ns+=Tr*Zr,Qr+=Tr*hs,zr+=Tr*ys,Wr+=Tr*Es,ss+=Tr*Is,Xr+=Tr*$s,ts+=Tr*Rs,Tr=Nr[3],qr+=Tr*vs,Hr+=Tr*Ps,Or+=Tr*Os,Mr+=Tr*Ms,Lr+=Tr*zs,Vr+=Tr*Hs,Jr+=Tr*Cs,es+=Tr*ls,ns+=Tr*Kr,Qr+=Tr*Zr,zr+=Tr*hs,Wr+=Tr*ys,ss+=Tr*Es,Xr+=Tr*Is,ts+=Tr*$s,fs+=Tr*Rs,Tr=Nr[4],Hr+=Tr*vs,Or+=Tr*Ps,Mr+=Tr*Os,Lr+=Tr*Ms,Vr+=Tr*zs,Jr+=Tr*Hs,es+=Tr*Cs,ns+=Tr*ls,Qr+=Tr*Kr,zr+=Tr*Zr,Wr+=Tr*hs,ss+=Tr*ys,Xr+=Tr*Es,ts+=Tr*Is,fs+=Tr*$s,rs+=Tr*Rs,Tr=Nr[5],Or+=Tr*vs,Mr+=Tr*Ps,Lr+=Tr*Os,Vr+=Tr*Ms,Jr+=Tr*zs,es+=Tr*Hs,ns+=Tr*Cs,Qr+=Tr*ls,zr+=Tr*Kr,Wr+=Tr*Zr,ss+=Tr*hs,Xr+=Tr*ys,ts+=Tr*Es,fs+=Tr*Is,rs+=Tr*$s,as+=Tr*Rs,Tr=Nr[6],Mr+=Tr*vs,Lr+=Tr*Ps,Vr+=Tr*Os,Jr+=Tr*Ms,es+=Tr*zs,ns+=Tr*Hs,Qr+=Tr*Cs,zr+=Tr*ls,Wr+=Tr*Kr,ss+=Tr*Zr,Xr+=Tr*hs,ts+=Tr*ys,fs+=Tr*Es,rs+=Tr*Is,as+=Tr*$s,ps+=Tr*Rs,Tr=Nr[7],Lr+=Tr*vs,Vr+=Tr*Ps,Jr+=Tr*Os,es+=Tr*Ms,ns+=Tr*zs,Qr+=Tr*Hs,zr+=Tr*Cs,Wr+=Tr*ls,ss+=Tr*Kr,Xr+=Tr*Zr,ts+=Tr*hs,fs+=Tr*ys,rs+=Tr*Es,as+=Tr*Is,ps+=Tr*$s,xs+=Tr*Rs,Tr=Nr[8],Vr+=Tr*vs,Jr+=Tr*Ps,es+=Tr*Os,ns+=Tr*Ms,Qr+=Tr*zs,zr+=Tr*Hs,Wr+=Tr*Cs,ss+=Tr*ls,Xr+=Tr*Kr,ts+=Tr*Zr,fs+=Tr*hs,rs+=Tr*ys,as+=Tr*Es,ps+=Tr*Is,xs+=Tr*$s,Ss+=Tr*Rs,Tr=Nr[9],Jr+=Tr*vs,es+=Tr*Ps,ns+=Tr*Os,Qr+=Tr*Ms,zr+=Tr*zs,Wr+=Tr*Hs,ss+=Tr*Cs,Xr+=Tr*ls,ts+=Tr*Kr,fs+=Tr*Zr,rs+=Tr*hs,as+=Tr*ys,ps+=Tr*Es,xs+=Tr*Is,Ss+=Tr*$s,Ns+=Tr*Rs,Tr=Nr[10],es+=Tr*vs,ns+=Tr*Ps,Qr+=Tr*Os,zr+=Tr*Ms,Wr+=Tr*zs,ss+=Tr*Hs,Xr+=Tr*Cs,ts+=Tr*ls,fs+=Tr*Kr,rs+=Tr*Zr,as+=Tr*hs,ps+=Tr*ys,xs+=Tr*Es,Ss+=Tr*Is,Ns+=Tr*$s,Ts+=Tr*Rs,Tr=Nr[11],ns+=Tr*vs,Qr+=Tr*Ps,zr+=Tr*Os,Wr+=Tr*Ms,ss+=Tr*zs,Xr+=Tr*Hs,ts+=Tr*Cs,fs+=Tr*ls,rs+=Tr*Kr,as+=Tr*Zr,ps+=Tr*hs,xs+=Tr*ys,Ss+=Tr*Es,Ns+=Tr*Is,Ts+=Tr*$s,os+=Tr*Rs,Tr=Nr[12],Qr+=Tr*vs,zr+=Tr*Ps,Wr+=Tr*Os,ss+=Tr*Ms,Xr+=Tr*zs,ts+=Tr*Hs,fs+=Tr*Cs,rs+=Tr*ls,as+=Tr*Kr,ps+=Tr*Zr,xs+=Tr*hs,Ss+=Tr*ys,Ns+=Tr*Es,Ts+=Tr*Is,os+=Tr*$s,bs+=Tr*Rs,Tr=Nr[13],zr+=Tr*vs,Wr+=Tr*Ps,ss+=Tr*Os,Xr+=Tr*Ms,ts+=Tr*zs,fs+=Tr*Hs,rs+=Tr*Cs,as+=Tr*ls,ps+=Tr*Kr,xs+=Tr*Zr,Ss+=Tr*hs,Ns+=Tr*ys,Ts+=Tr*Es,os+=Tr*Is,bs+=Tr*$s,ws+=Tr*Rs,Tr=Nr[14],Wr+=Tr*vs,ss+=Tr*Ps,Xr+=Tr*Os,ts+=Tr*Ms,fs+=Tr*zs,rs+=Tr*Hs,as+=Tr*Cs,ps+=Tr*ls,xs+=Tr*Kr,Ss+=Tr*Zr,Ns+=Tr*hs,Ts+=Tr*ys,os+=Tr*Es,bs+=Tr*Is,ws+=Tr*$s,As+=Tr*Rs,Tr=Nr[15],ss+=Tr*vs,Xr+=Tr*Ps,ts+=Tr*Os,fs+=Tr*Ms,rs+=Tr*zs,as+=Tr*Hs,ps+=Tr*Cs,xs+=Tr*ls,Ss+=Tr*Kr,Ns+=Tr*Zr,Ts+=Tr*hs,os+=Tr*ys,bs+=Tr*Es,ws+=Tr*Is,As+=Tr*$s,gs+=Tr*Rs,Fr+=38*Xr,jr+=38*ts,Ur+=38*fs,qr+=38*rs,Hr+=38*as,Or+=38*ps,Mr+=38*xs,Lr+=38*Ss,Vr+=38*Ns,Jr+=38*Ts,es+=38*os,ns+=38*bs,Qr+=38*ws,zr+=38*As,Wr+=38*gs,Br=1,Tr=Fr+Br+65535,Br=Math.floor(Tr/65536),Fr=Tr-Br*65536,Tr=jr+Br+65535,Br=Math.floor(Tr/65536),jr=Tr-Br*65536,Tr=Ur+Br+65535,Br=Math.floor(Tr/65536),Ur=Tr-Br*65536,Tr=qr+Br+65535,Br=Math.floor(Tr/65536),qr=Tr-Br*65536,Tr=Hr+Br+65535,Br=Math.floor(Tr/65536),Hr=Tr-Br*65536,Tr=Or+Br+65535,Br=Math.floor(Tr/65536),Or=Tr-Br*65536,Tr=Mr+Br+65535,Br=Math.floor(Tr/65536),Mr=Tr-Br*65536,Tr=Lr+Br+65535,Br=Math.floor(Tr/65536),Lr=Tr-Br*65536,Tr=Vr+Br+65535,Br=Math.floor(Tr/65536),Vr=Tr-Br*65536,Tr=Jr+Br+65535,Br=Math.floor(Tr/65536),Jr=Tr-Br*65536,Tr=es+Br+65535,Br=Math.floor(Tr/65536),es=Tr-Br*65536,Tr=ns+Br+65535,Br=Math.floor(Tr/65536),ns=Tr-Br*65536,Tr=Qr+Br+65535,Br=Math.floor(Tr/65536),Qr=Tr-Br*65536,Tr=zr+Br+65535,Br=Math.floor(Tr/65536),zr=Tr-Br*65536,Tr=Wr+Br+65535,Br=Math.floor(Tr/65536),Wr=Tr-Br*65536,Tr=ss+Br+65535,Br=Math.floor(Tr/65536),ss=Tr-Br*65536,Fr+=Br-1+37*(Br-1),Br=1,Tr=Fr+Br+65535,Br=Math.floor(Tr/65536),Fr=Tr-Br*65536,Tr=jr+Br+65535,Br=Math.floor(Tr/65536),jr=Tr-Br*65536,Tr=Ur+Br+65535,Br=Math.floor(Tr/65536),Ur=Tr-Br*65536,Tr=qr+Br+65535,Br=Math.floor(Tr/65536),qr=Tr-Br*65536,Tr=Hr+Br+65535,Br=Math.floor(Tr/65536),Hr=Tr-Br*65536,Tr=Or+Br+65535,Br=Math.floor(Tr/65536),Or=Tr-Br*65536,Tr=Mr+Br+65535,Br=Math.floor(Tr/65536),Mr=Tr-Br*65536,Tr=Lr+Br+65535,Br=Math.floor(Tr/65536),Lr=Tr-Br*65536,Tr=Vr+Br+65535,Br=Math.floor(Tr/65536),Vr=Tr-Br*65536,Tr=Jr+Br+65535,Br=Math.floor(Tr/65536),Jr=Tr-Br*65536,Tr=es+Br+65535,Br=Math.floor(Tr/65536),es=Tr-Br*65536,Tr=ns+Br+65535,Br=Math.floor(Tr/65536),ns=Tr-Br*65536,Tr=Qr+Br+65535,Br=Math.floor(Tr/65536),Qr=Tr-Br*65536,Tr=zr+Br+65535,Br=Math.floor(Tr/65536),zr=Tr-Br*65536,Tr=Wr+Br+65535,Br=Math.floor(Tr/65536),Wr=Tr-Br*65536,Tr=ss+Br+65535,Br=Math.floor(Tr/65536),ss=Tr-Br*65536,Fr+=Br-1+37*(Br-1),Ir[0]=Fr,Ir[1]=jr,Ir[2]=Ur,Ir[3]=qr,Ir[4]=Hr,Ir[5]=Or,Ir[6]=Mr,Ir[7]=Lr,Ir[8]=Vr,Ir[9]=Jr,Ir[10]=es,Ir[11]=ns,Ir[12]=Qr,Ir[13]=zr,Ir[14]=Wr,Ir[15]=ss}function vr(Ir,Nr){Sr(Ir,Nr,Nr)}function Er(Ir,Nr){const Pr=fr();for(let Tr=0;Tr<16;Tr++)Pr[Tr]=Nr[Tr];for(let Tr=253;Tr>=0;Tr--)vr(Pr,Pr),Tr!==2&&Tr!==4&&Sr(Pr,Pr,Nr);for(let Tr=0;Tr<16;Tr++)Ir[Tr]=Pr[Tr]}function Ar(Ir,Nr){const Pr=new Uint8Array(32),Tr=new Float64Array(80),Br=fr(),Fr=fr(),jr=fr(),Ur=fr(),qr=fr(),Hr=fr();for(let Vr=0;Vr<31;Vr++)Pr[Vr]=Ir[Vr];Pr[31]=Ir[31]&127|64,Pr[0]&=248,xr(Tr,Nr);for(let Vr=0;Vr<16;Vr++)Fr[Vr]=Tr[Vr];Br[0]=Ur[0]=1;for(let Vr=254;Vr>=0;--Vr){const Jr=Pr[Vr>>>3]>>>(Vr&7)&1;gr(Br,Fr,Jr),gr(jr,Ur,Jr),wr(qr,Br,jr),br(Br,Br,jr),wr(jr,Fr,Ur),br(Fr,Fr,Ur),vr(Ur,qr),vr(Hr,Br),Sr(Br,jr,Br),Sr(jr,Fr,qr),wr(qr,Br,jr),br(Br,Br,jr),vr(Fr,Br),br(jr,Ur,Hr),Sr(Br,jr,pr),wr(Br,Br,Ur),Sr(jr,jr,Br),Sr(Br,Ur,Hr),Sr(Ur,Fr,Tr),vr(Fr,qr),gr(Br,Fr,Jr),gr(jr,Ur,Jr)}for(let Vr=0;Vr<16;Vr++)Tr[Vr+16]=Br[Vr],Tr[Vr+32]=jr[Vr],Tr[Vr+48]=Fr[Vr],Tr[Vr+64]=Ur[Vr];const Or=Tr.subarray(32),Mr=Tr.subarray(16);Er(Or,Or),Sr(Mr,Mr,Or);const Lr=new Uint8Array(32);return yr(Lr,Mr),Lr}cr.scalarMult=Ar;function _r(Ir){return Ar(Ir,hr)}cr.scalarMultBase=_r;function Cr(Ir){if(Ir.length!==cr.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${cr.SECRET_KEY_LENGTH} bytes`);const Nr=new Uint8Array(Ir);return{publicKey:_r(Nr),secretKey:Nr}}cr.generateKeyPairFromSeed=Cr;function kr(Ir){const Nr=(0,ar.randomBytes)(32,Ir),Pr=Cr(Nr);return(0,dr.wipe)(Nr),Pr}cr.generateKeyPair=kr;function Rr(Ir,Nr,Pr=!1){if(Ir.length!==cr.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(Nr.length!==cr.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const Tr=Ar(Ir,Nr);if(Pr){let Br=0;for(let Fr=0;Fr<Tr.length;Fr++)Br|=Tr[Fr];if(Br===0)throw new Error("X25519: invalid shared key")}return Tr}cr.sharedKey=Rr})(x25519$1);function asUint8Array$2(cr){return globalThis.Buffer!=null?new Uint8Array(cr.buffer,cr.byteOffset,cr.byteLength):cr}function allocUnsafe$2(cr=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array$2(globalThis.Buffer.allocUnsafe(cr)):new Uint8Array(cr)}function concat$7(cr,ar){ar||(ar=cr.reduce((hr,pr)=>hr+pr.length,0));const dr=allocUnsafe$2(ar);let fr=0;for(const hr of cr)dr.set(hr,fr),fr+=hr.length;return asUint8Array$2(dr)}function base$4(cr,ar){if(cr.length>=255)throw new TypeError("Alphabet too long");for(var dr=new Uint8Array(256),fr=0;fr<dr.length;fr++)dr[fr]=255;for(var hr=0;hr<cr.length;hr++){var pr=cr.charAt(hr),mr=pr.charCodeAt(0);if(dr[mr]!==255)throw new TypeError(pr+" is ambiguous");dr[mr]=hr}var gr=cr.length,yr=cr.charAt(0),xr=Math.log(gr)/Math.log(256),wr=Math.log(256)/Math.log(gr);function br(Er){if(Er instanceof Uint8Array||(ArrayBuffer.isView(Er)?Er=new Uint8Array(Er.buffer,Er.byteOffset,Er.byteLength):Array.isArray(Er)&&(Er=Uint8Array.from(Er))),!(Er instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Er.length===0)return"";for(var Ar=0,_r=0,Cr=0,kr=Er.length;Cr!==kr&&Er[Cr]===0;)Cr++,Ar++;for(var Rr=(kr-Cr)*wr+1>>>0,Ir=new Uint8Array(Rr);Cr!==kr;){for(var Nr=Er[Cr],Pr=0,Tr=Rr-1;(Nr!==0||Pr<_r)&&Tr!==-1;Tr--,Pr++)Nr+=256*Ir[Tr]>>>0,Ir[Tr]=Nr%gr>>>0,Nr=Nr/gr>>>0;if(Nr!==0)throw new Error("Non-zero carry");_r=Pr,Cr++}for(var Br=Rr-_r;Br!==Rr&&Ir[Br]===0;)Br++;for(var Fr=yr.repeat(Ar);Br<Rr;++Br)Fr+=cr.charAt(Ir[Br]);return Fr}function Sr(Er){if(typeof Er!="string")throw new TypeError("Expected String");if(Er.length===0)return new Uint8Array;var Ar=0;if(Er[Ar]!==" "){for(var _r=0,Cr=0;Er[Ar]===yr;)_r++,Ar++;for(var kr=(Er.length-Ar)*xr+1>>>0,Rr=new Uint8Array(kr);Er[Ar];){var Ir=dr[Er.charCodeAt(Ar)];if(Ir===255)return;for(var Nr=0,Pr=kr-1;(Ir!==0||Nr<Cr)&&Pr!==-1;Pr--,Nr++)Ir+=gr*Rr[Pr]>>>0,Rr[Pr]=Ir%256>>>0,Ir=Ir/256>>>0;if(Ir!==0)throw new Error("Non-zero carry");Cr=Nr,Ar++}if(Er[Ar]!==" "){for(var Tr=kr-Cr;Tr!==kr&&Rr[Tr]===0;)Tr++;for(var Br=new Uint8Array(_r+(kr-Tr)),Fr=_r;Tr!==kr;)Br[Fr++]=Rr[Tr++];return Br}}}function vr(Er){var Ar=Sr(Er);if(Ar)return Ar;throw new Error(`Non-${ar} character`)}return{encode:br,decodeUnsafe:Sr,decode:vr}}var src$2=base$4,_brrp__multiformats_scope_baseX$2=src$2;const coerce$2=cr=>{if(cr instanceof Uint8Array&&cr.constructor.name==="Uint8Array")return cr;if(cr instanceof ArrayBuffer)return new Uint8Array(cr);if(ArrayBuffer.isView(cr))return new Uint8Array(cr.buffer,cr.byteOffset,cr.byteLength);throw new Error("Unknown type, must be binary type")},fromString$6=cr=>new TextEncoder().encode(cr),toString$7=cr=>new TextDecoder().decode(cr);let Encoder$3=class{constructor(ar,dr,fr){this.name=ar,this.prefix=dr,this.baseEncode=fr}encode(ar){if(ar instanceof Uint8Array)return`${this.prefix}${this.baseEncode(ar)}`;throw Error("Unknown type, must be binary type")}},Decoder$3=class{constructor(ar,dr,fr){if(this.name=ar,this.prefix=dr,dr.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=dr.codePointAt(0),this.baseDecode=fr}decode(ar){if(typeof ar=="string"){if(ar.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(ar)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(ar.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(ar){return or$4(this,ar)}},ComposedDecoder$2=class{constructor(ar){this.decoders=ar}or(ar){return or$4(this,ar)}decode(ar){const dr=ar[0],fr=this.decoders[dr];if(fr)return fr.decode(ar);throw RangeError(`Unable to decode multibase string ${JSON.stringify(ar)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$4=(cr,ar)=>new ComposedDecoder$2({...cr.decoders||{[cr.prefix]:cr},...ar.decoders||{[ar.prefix]:ar}});let Codec$2=class{constructor(ar,dr,fr,hr){this.name=ar,this.prefix=dr,this.baseEncode=fr,this.baseDecode=hr,this.encoder=new Encoder$3(ar,dr,fr),this.decoder=new Decoder$3(ar,dr,hr)}encode(ar){return this.encoder.encode(ar)}decode(ar){return this.decoder.decode(ar)}};const from$4=({name:cr,prefix:ar,encode:dr,decode:fr})=>new Codec$2(cr,ar,dr,fr),baseX$2=({prefix:cr,name:ar,alphabet:dr})=>{const{encode:fr,decode:hr}=_brrp__multiformats_scope_baseX$2(dr,ar);return from$4({prefix:cr,name:ar,encode:fr,decode:pr=>coerce$2(hr(pr))})},decode$j=(cr,ar,dr,fr)=>{const hr={};for(let wr=0;wr<ar.length;++wr)hr[ar[wr]]=wr;let pr=cr.length;for(;cr[pr-1]==="=";)--pr;const mr=new Uint8Array(pr*dr/8|0);let gr=0,yr=0,xr=0;for(let wr=0;wr<pr;++wr){const br=hr[cr[wr]];if(br===void 0)throw new SyntaxError(`Non-${fr} character`);yr=yr<<dr|br,gr+=dr,gr>=8&&(gr-=8,mr[xr++]=255&yr>>gr)}if(gr>=dr||255&yr<<8-gr)throw new SyntaxError("Unexpected end of data");return mr},encode$h=(cr,ar,dr)=>{const fr=ar[ar.length-1]==="=",hr=(1<<dr)-1;let pr="",mr=0,gr=0;for(let yr=0;yr<cr.length;++yr)for(gr=gr<<8|cr[yr],mr+=8;mr>dr;)mr-=dr,pr+=ar[hr&gr>>mr];if(mr&&(pr+=ar[hr&gr<<dr-mr]),fr)for(;pr.length*dr&7;)pr+="=";return pr},rfc4648$2=({name:cr,prefix:ar,bitsPerChar:dr,alphabet:fr})=>from$4({prefix:ar,name:cr,encode(hr){return encode$h(hr,fr,dr)},decode(hr){return decode$j(hr,fr,dr,cr)}}),identity$6=from$4({prefix:"\0",name:"identity",encode:cr=>toString$7(cr),decode:cr=>fromString$6(cr)}),identityBase$2=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$6},Symbol.toStringTag,{value:"Module"})),base2$4=rfc4648$2({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$5=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$4},Symbol.toStringTag,{value:"Module"})),base8$4=rfc4648$2({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$5=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$4},Symbol.toStringTag,{value:"Module"})),base10$4=baseX$2({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$5=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$4},Symbol.toStringTag,{value:"Module"})),base16$4=rfc4648$2({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$2=rfc4648$2({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$5=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$4,base16upper:base16upper$2},Symbol.toStringTag,{value:"Module"})),base32$4=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$2=rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$2=rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$2=rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$2=rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$2=rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$2=rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$2=rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$2=rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$5=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$4,base32hex:base32hex$2,base32hexpad:base32hexpad$2,base32hexpadupper:base32hexpadupper$2,base32hexupper:base32hexupper$2,base32pad:base32pad$2,base32padupper:base32padupper$2,base32upper:base32upper$2,base32z:base32z$2},Symbol.toStringTag,{value:"Module"})),base36$4=baseX$2({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$2=baseX$2({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$5=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$4,base36upper:base36upper$2},Symbol.toStringTag,{value:"Module"})),base58btc$2=baseX$2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$2=baseX$2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$3=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$2,base58flickr:base58flickr$2},Symbol.toStringTag,{value:"Module"})),base64$6=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$2=rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$2=rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$2=rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$7=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$6,base64pad:base64pad$2,base64url:base64url$2,base64urlpad:base64urlpad$2},Symbol.toStringTag,{value:"Module"})),alphabet$2=Array.from(""),alphabetBytesToChars$2=alphabet$2.reduce((cr,ar,dr)=>(cr[dr]=ar,cr),[]),alphabetCharsToBytes$2=alphabet$2.reduce((cr,ar,dr)=>(cr[ar.codePointAt(0)]=dr,cr),[]);function encode$g(cr){return cr.reduce((ar,dr)=>(ar+=alphabetBytesToChars$2[dr],ar),"")}function decode$i(cr){const ar=[];for(const dr of cr){const fr=alphabetCharsToBytes$2[dr.codePointAt(0)];if(fr===void 0)throw new Error(`Non-base256emoji character: ${dr}`);ar.push(fr)}return new Uint8Array(ar)}const base256emoji$4=from$4({prefix:"",name:"base256emoji",encode:encode$g,decode:decode$i}),base256emoji$5=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$4},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases$2={...identityBase$2,...base2$5,...base8$5,...base10$5,...base16$5,...base32$5,...base36$5,...base58$3,...base64$7,...base256emoji$5};function createCodec$3(cr,ar,dr,fr){return{name:cr,prefix:ar,encoder:{name:cr,prefix:ar,encode:dr},decoder:{decode:fr}}}const string$4=createCodec$3("utf8","u",cr=>"u"+new TextDecoder("utf8").decode(cr),cr=>new TextEncoder().encode(cr.substring(1))),ascii$3=createCodec$3("ascii","a",cr=>{let ar="a";for(let dr=0;dr<cr.length;dr++)ar+=String.fromCharCode(cr[dr]);return ar},cr=>{cr=cr.substring(1);const ar=allocUnsafe$2(cr.length);for(let dr=0;dr<cr.length;dr++)ar[dr]=cr.charCodeAt(dr);return ar}),BASES$2={utf8:string$4,"utf-8":string$4,hex:bases$2.base16,latin1:ascii$3,ascii:ascii$3,binary:ascii$3,...bases$2};function fromString$5(cr,ar="utf8"){const dr=BASES$2[ar];if(!dr)throw new Error(`Unsupported encoding "${ar}"`);return(ar==="utf8"||ar==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$2(globalThis.Buffer.from(cr,"utf-8")):dr.decoder.decode(`${dr.prefix}${cr}`)}function toString$6(cr,ar="utf8"){const dr=BASES$2[ar];if(!dr)throw new Error(`Unsupported encoding "${ar}"`);return(ar==="utf8"||ar==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(cr.buffer,cr.byteOffset,cr.byteLength).toString("utf8"):dr.encoder.encode(cr).substring(1)}var __spreadArray$3=globalThis&&globalThis.__spreadArray||function(cr,ar,dr){if(dr||arguments.length===2)for(var fr=0,hr=ar.length,pr;fr<hr;fr++)(pr||!(fr in ar))&&(pr||(pr=Array.prototype.slice.call(ar,0,fr)),pr[fr]=ar[fr]);return cr.concat(pr||Array.prototype.slice.call(ar))},BrowserInfo=function(){function cr(ar,dr,fr){this.name=ar,this.version=dr,this.os=fr,this.type="browser"}return cr}(),NodeInfo=function(){function cr(ar){this.version=ar,this.type="node",this.name="node",this.os=process.platform}return cr}(),SearchBotDeviceInfo=function(){function cr(ar,dr,fr,hr){this.name=ar,this.version=dr,this.os=fr,this.bot=hr,this.type="bot-device"}return cr}(),BotInfo=function(){function cr(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return cr}(),ReactNativeInfo=function(){function cr(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return cr}(),SEARCHBOX_UA_REGEX=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,SEARCHBOT_OS_REGEX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,REQUIRED_VERSION_PARTS=3,userAgentRules=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",SEARCHBOX_UA_REGEX]],operatingSystemRules=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect(cr){return cr?parseUserAgent(cr):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ReactNativeInfo:typeof navigator<"u"?parseUserAgent(navigator.userAgent):getNodeVersion()}function matchUserAgent(cr){return cr!==""&&userAgentRules.reduce(function(ar,dr){var fr=dr[0],hr=dr[1];if(ar)return ar;var pr=hr.exec(cr);return!!pr&&[fr,pr]},!1)}function parseUserAgent(cr){var ar=matchUserAgent(cr);if(!ar)return null;var dr=ar[0],fr=ar[1];if(dr==="searchbot")return new BotInfo;var hr=fr[1]&&fr[1].split(".").join("_").split("_").slice(0,3);hr?hr.length<REQUIRED_VERSION_PARTS&&(hr=__spreadArray$3(__spreadArray$3([],hr,!0),createVersionParts(REQUIRED_VERSION_PARTS-hr.length),!0)):hr=[];var pr=hr.join("."),mr=detectOS(cr),gr=SEARCHBOT_OS_REGEX.exec(cr);return gr&&gr[1]?new SearchBotDeviceInfo(dr,pr,mr,gr[1]):new BrowserInfo(dr,pr,mr)}function detectOS(cr){for(var ar=0,dr=operatingSystemRules.length;ar<dr;ar++){var fr=operatingSystemRules[ar],hr=fr[0],pr=fr[1],mr=pr.exec(cr);if(mr)return hr}return null}function getNodeVersion(){var cr=typeof process<"u"&&process.version;return cr?new NodeInfo(process.version.slice(1)):null}function createVersionParts(cr){for(var ar=[],dr=0;dr<cr;dr++)ar.push("0");return ar}var cjs$3={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(cr,ar){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dr,fr){dr.__proto__=fr}||function(dr,fr){for(var hr in fr)fr.hasOwnProperty(hr)&&(dr[hr]=fr[hr])},extendStatics$1(cr,ar)};function __extends$1(cr,ar){extendStatics$1(cr,ar);function dr(){this.constructor=cr}cr.prototype=ar===null?Object.create(ar):(dr.prototype=ar.prototype,new dr)}var __assign$1=function(){return __assign$1=Object.assign||function(ar){for(var dr,fr=1,hr=arguments.length;fr<hr;fr++){dr=arguments[fr];for(var pr in dr)Object.prototype.hasOwnProperty.call(dr,pr)&&(ar[pr]=dr[pr])}return ar},__assign$1.apply(this,arguments)};function __rest$2(cr,ar){var dr={};for(var fr in cr)Object.prototype.hasOwnProperty.call(cr,fr)&&ar.indexOf(fr)<0&&(dr[fr]=cr[fr]);if(cr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var hr=0,fr=Object.getOwnPropertySymbols(cr);hr<fr.length;hr++)ar.indexOf(fr[hr])<0&&Object.prototype.propertyIsEnumerable.call(cr,fr[hr])&&(dr[fr[hr]]=cr[fr[hr]]);return dr}function __decorate$1(cr,ar,dr,fr){var hr=arguments.length,pr=hr<3?ar:fr===null?fr=Object.getOwnPropertyDescriptor(ar,dr):fr,mr;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")pr=Reflect.decorate(cr,ar,dr,fr);else for(var gr=cr.length-1;gr>=0;gr--)(mr=cr[gr])&&(pr=(hr<3?mr(pr):hr>3?mr(ar,dr,pr):mr(ar,dr))||pr);return hr>3&&pr&&Object.defineProperty(ar,dr,pr),pr}function __param$1(cr,ar){return function(dr,fr){ar(dr,fr,cr)}}function __metadata$1(cr,ar){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(cr,ar)}function __awaiter$c(cr,ar,dr,fr){function hr(pr){return pr instanceof dr?pr:new dr(function(mr){mr(pr)})}return new(dr||(dr=Promise))(function(pr,mr){function gr(wr){try{xr(fr.next(wr))}catch(br){mr(br)}}function yr(wr){try{xr(fr.throw(wr))}catch(br){mr(br)}}function xr(wr){wr.done?pr(wr.value):hr(wr.value).then(gr,yr)}xr((fr=fr.apply(cr,ar||[])).next())})}function __generator$3(cr,ar){var dr={label:0,sent:function(){if(pr[0]&1)throw pr[1];return pr[1]},trys:[],ops:[]},fr,hr,pr,mr;return mr={next:gr(0),throw:gr(1),return:gr(2)},typeof Symbol=="function"&&(mr[Symbol.iterator]=function(){return this}),mr;function gr(xr){return function(wr){return yr([xr,wr])}}function yr(xr){if(fr)throw new TypeError("Generator is already executing.");for(;dr;)try{if(fr=1,hr&&(pr=xr[0]&2?hr.return:xr[0]?hr.throw||((pr=hr.return)&&pr.call(hr),0):hr.next)&&!(pr=pr.call(hr,xr[1])).done)return pr;switch(hr=0,pr&&(xr=[xr[0]&2,pr.value]),xr[0]){case 0:case 1:pr=xr;break;case 4:return dr.label++,{value:xr[1],done:!1};case 5:dr.label++,hr=xr[1],xr=[0];continue;case 7:xr=dr.ops.pop(),dr.trys.pop();continue;default:if(pr=dr.trys,!(pr=pr.length>0&&pr[pr.length-1])&&(xr[0]===6||xr[0]===2)){dr=0;continue}if(xr[0]===3&&(!pr||xr[1]>pr[0]&&xr[1]<pr[3])){dr.label=xr[1];break}if(xr[0]===6&&dr.label<pr[1]){dr.label=pr[1],pr=xr;break}if(pr&&dr.label<pr[2]){dr.label=pr[2],dr.ops.push(xr);break}pr[2]&&dr.ops.pop(),dr.trys.pop();continue}xr=ar.call(cr,dr)}catch(wr){xr=[6,wr],hr=0}finally{fr=pr=0}if(xr[0]&5)throw xr[1];return{value:xr[0]?xr[1]:void 0,done:!0}}}function __createBinding$2(cr,ar,dr,fr){fr===void 0&&(fr=dr),cr[fr]=ar[dr]}function __exportStar$1(cr,ar){for(var dr in cr)dr!=="default"&&!ar.hasOwnProperty(dr)&&(ar[dr]=cr[dr])}function __values$2(cr){var ar=typeof Symbol=="function"&&Symbol.iterator,dr=ar&&cr[ar],fr=0;if(dr)return dr.call(cr);if(cr&&typeof cr.length=="number")return{next:function(){return cr&&fr>=cr.length&&(cr=void 0),{value:cr&&cr[fr++],done:!cr}}};throw new TypeError(ar?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$3(cr,ar){var dr=typeof Symbol=="function"&&cr[Symbol.iterator];if(!dr)return cr;var fr=dr.call(cr),hr,pr=[],mr;try{for(;(ar===void 0||ar-- >0)&&!(hr=fr.next()).done;)pr.push(hr.value)}catch(gr){mr={error:gr}}finally{try{hr&&!hr.done&&(dr=fr.return)&&dr.call(fr)}finally{if(mr)throw mr.error}}return pr}function __spread$1(){for(var cr=[],ar=0;ar<arguments.length;ar++)cr=cr.concat(__read$3(arguments[ar]));return cr}function __spreadArrays$1(){for(var cr=0,ar=0,dr=arguments.length;ar<dr;ar++)cr+=arguments[ar].length;for(var fr=Array(cr),hr=0,ar=0;ar<dr;ar++)for(var pr=arguments[ar],mr=0,gr=pr.length;mr<gr;mr++,hr++)fr[hr]=pr[mr];return fr}function __await$1(cr){return this instanceof __await$1?(this.v=cr,this):new __await$1(cr)}function __asyncGenerator$1(cr,ar,dr){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fr=dr.apply(cr,ar||[]),hr,pr=[];return hr={},mr("next"),mr("throw"),mr("return"),hr[Symbol.asyncIterator]=function(){return this},hr;function mr(Sr){fr[Sr]&&(hr[Sr]=function(vr){return new Promise(function(Er,Ar){pr.push([Sr,vr,Er,Ar])>1||gr(Sr,vr)})})}function gr(Sr,vr){try{yr(fr[Sr](vr))}catch(Er){br(pr[0][3],Er)}}function yr(Sr){Sr.value instanceof __await$1?Promise.resolve(Sr.value.v).then(xr,wr):br(pr[0][2],Sr)}function xr(Sr){gr("next",Sr)}function wr(Sr){gr("throw",Sr)}function br(Sr,vr){Sr(vr),pr.shift(),pr.length&&gr(pr[0][0],pr[0][1])}}function __asyncDelegator$1(cr){var ar,dr;return ar={},fr("next"),fr("throw",function(hr){throw hr}),fr("return"),ar[Symbol.iterator]=function(){return this},ar;function fr(hr,pr){ar[hr]=cr[hr]?function(mr){return(dr=!dr)?{value:__await$1(cr[hr](mr)),done:hr==="return"}:pr?pr(mr):mr}:pr}}function __asyncValues$1(cr){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ar=cr[Symbol.asyncIterator],dr;return ar?ar.call(cr):(cr=typeof __values$2=="function"?__values$2(cr):cr[Symbol.iterator](),dr={},fr("next"),fr("throw"),fr("return"),dr[Symbol.asyncIterator]=function(){return this},dr);function fr(pr){dr[pr]=cr[pr]&&function(mr){return new Promise(function(gr,yr){mr=cr[pr](mr),hr(gr,yr,mr.done,mr.value)})}}function hr(pr,mr,gr,yr){Promise.resolve(yr).then(function(xr){pr({value:xr,done:gr})},mr)}}function __makeTemplateObject$1(cr,ar){return Object.defineProperty?Object.defineProperty(cr,"raw",{value:ar}):cr.raw=ar,cr}function __importStar$2(cr){if(cr&&cr.__esModule)return cr;var ar={};if(cr!=null)for(var dr in cr)Object.hasOwnProperty.call(cr,dr)&&(ar[dr]=cr[dr]);return ar.default=cr,ar}function __importDefault$2(cr){return cr&&cr.__esModule?cr:{default:cr}}function __classPrivateFieldGet$m(cr,ar){if(!ar.has(cr))throw new TypeError("attempted to get private field on non-instance");return ar.get(cr)}function __classPrivateFieldSet$j(cr,ar,dr){if(!ar.has(cr))throw new TypeError("attempted to set private field on non-instance");return ar.set(cr,dr),dr}const tslib_es6$1=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$1},__asyncDelegator:__asyncDelegator$1,__asyncGenerator:__asyncGenerator$1,__asyncValues:__asyncValues$1,__await:__await$1,__awaiter:__awaiter$c,__classPrivateFieldGet:__classPrivateFieldGet$m,__classPrivateFieldSet:__classPrivateFieldSet$j,__createBinding:__createBinding$2,__decorate:__decorate$1,__exportStar:__exportStar$1,__extends:__extends$1,__generator:__generator$3,__importDefault:__importDefault$2,__importStar:__importStar$2,__makeTemplateObject:__makeTemplateObject$1,__metadata:__metadata$1,__param:__param$1,__read:__read$3,__rest:__rest$2,__spread:__spread$1,__spreadArrays:__spreadArrays$1,__values:__values$2},Symbol.toStringTag,{value:"Module"})),require$$0$8=getAugmentedNamespace(tslib_es6$1);var utils$f={},delay$1={},hasRequiredDelay;function requireDelay(){if(hasRequiredDelay)return delay$1;hasRequiredDelay=1,Object.defineProperty(delay$1,"__esModule",{value:!0}),delay$1.delay=void 0;function cr(ar){return new Promise(dr=>{setTimeout(()=>{dr(!0)},ar)})}return delay$1.delay=cr,delay$1}var convert$5={},constants$1={},misc={},hasRequiredMisc;function requireMisc(){return hasRequiredMisc||(hasRequiredMisc=1,Object.defineProperty(misc,"__esModule",{value:!0}),misc.ONE_THOUSAND=misc.ONE_HUNDRED=void 0,misc.ONE_HUNDRED=100,misc.ONE_THOUSAND=1e3),misc}var time={},hasRequiredTime;function requireTime(){return hasRequiredTime||(hasRequiredTime=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.ONE_YEAR=cr.FOUR_WEEKS=cr.THREE_WEEKS=cr.TWO_WEEKS=cr.ONE_WEEK=cr.THIRTY_DAYS=cr.SEVEN_DAYS=cr.FIVE_DAYS=cr.THREE_DAYS=cr.ONE_DAY=cr.TWENTY_FOUR_HOURS=cr.TWELVE_HOURS=cr.SIX_HOURS=cr.THREE_HOURS=cr.ONE_HOUR=cr.SIXTY_MINUTES=cr.THIRTY_MINUTES=cr.TEN_MINUTES=cr.FIVE_MINUTES=cr.ONE_MINUTE=cr.SIXTY_SECONDS=cr.THIRTY_SECONDS=cr.TEN_SECONDS=cr.FIVE_SECONDS=cr.ONE_SECOND=void 0,cr.ONE_SECOND=1,cr.FIVE_SECONDS=5,cr.TEN_SECONDS=10,cr.THIRTY_SECONDS=30,cr.SIXTY_SECONDS=60,cr.ONE_MINUTE=cr.SIXTY_SECONDS,cr.FIVE_MINUTES=cr.ONE_MINUTE*5,cr.TEN_MINUTES=cr.ONE_MINUTE*10,cr.THIRTY_MINUTES=cr.ONE_MINUTE*30,cr.SIXTY_MINUTES=cr.ONE_MINUTE*60,cr.ONE_HOUR=cr.SIXTY_MINUTES,cr.THREE_HOURS=cr.ONE_HOUR*3,cr.SIX_HOURS=cr.ONE_HOUR*6,cr.TWELVE_HOURS=cr.ONE_HOUR*12,cr.TWENTY_FOUR_HOURS=cr.ONE_HOUR*24,cr.ONE_DAY=cr.TWENTY_FOUR_HOURS,cr.THREE_DAYS=cr.ONE_DAY*3,cr.FIVE_DAYS=cr.ONE_DAY*5,cr.SEVEN_DAYS=cr.ONE_DAY*7,cr.THIRTY_DAYS=cr.ONE_DAY*30,cr.ONE_WEEK=cr.SEVEN_DAYS,cr.TWO_WEEKS=cr.ONE_WEEK*2,cr.THREE_WEEKS=cr.ONE_WEEK*3,cr.FOUR_WEEKS=cr.ONE_WEEK*4,cr.ONE_YEAR=cr.ONE_DAY*365}(time)),time}var hasRequiredConstants$1;function requireConstants$1(){return hasRequiredConstants$1||(hasRequiredConstants$1=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0});const ar=require$$0$8;ar.__exportStar(requireMisc(),cr),ar.__exportStar(requireTime(),cr)}(constants$1)),constants$1}var hasRequiredConvert;function requireConvert(){if(hasRequiredConvert)return convert$5;hasRequiredConvert=1,Object.defineProperty(convert$5,"__esModule",{value:!0}),convert$5.fromMiliseconds=convert$5.toMiliseconds=void 0;const cr=requireConstants$1();function ar(fr){return fr*cr.ONE_THOUSAND}convert$5.toMiliseconds=ar;function dr(fr){return Math.floor(fr/cr.ONE_THOUSAND)}return convert$5.fromMiliseconds=dr,convert$5}var hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0});const ar=require$$0$8;ar.__exportStar(requireDelay(),cr),ar.__exportStar(requireConvert(),cr)}(utils$f)),utils$f}var watch$1={},hasRequiredWatch$1;function requireWatch$1(){if(hasRequiredWatch$1)return watch$1;hasRequiredWatch$1=1,Object.defineProperty(watch$1,"__esModule",{value:!0}),watch$1.Watch=void 0;class cr{constructor(){this.timestamps=new Map}start(dr){if(this.timestamps.has(dr))throw new Error(`Watch already started for label: ${dr}`);this.timestamps.set(dr,{started:Date.now()})}stop(dr){const fr=this.get(dr);if(typeof fr.elapsed<"u")throw new Error(`Watch already stopped for label: ${dr}`);const hr=Date.now()-fr.started;this.timestamps.set(dr,{started:fr.started,elapsed:hr})}get(dr){const fr=this.timestamps.get(dr);if(typeof fr>"u")throw new Error(`No timestamp found for label: ${dr}`);return fr}elapsed(dr){const fr=this.get(dr);return fr.elapsed||Date.now()-fr.started}}return watch$1.Watch=cr,watch$1.default=cr,watch$1}var types$1={},watch={},hasRequiredWatch;function requireWatch(){if(hasRequiredWatch)return watch;hasRequiredWatch=1,Object.defineProperty(watch,"__esModule",{value:!0}),watch.IWatch=void 0;class cr{}return watch.IWatch=cr,watch}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),require$$0$8.__exportStar(requireWatch(),cr)}(types$1)),types$1}(function(cr){Object.defineProperty(cr,"__esModule",{value:!0});const ar=require$$0$8;ar.__exportStar(requireUtils$2(),cr),ar.__exportStar(requireWatch$1(),cr),ar.__exportStar(requireTypes(),cr),ar.__exportStar(requireConstants$1(),cr)})(cjs$3);var cjs$2={};Object.defineProperty(cjs$2,"__esModule",{value:!0});var getLocalStorage_1=cjs$2.getLocalStorage=getLocalStorageOrThrow_1=cjs$2.getLocalStorageOrThrow=getCrypto_1=cjs$2.getCrypto=getCryptoOrThrow_1=cjs$2.getCryptoOrThrow=getLocation_1=cjs$2.getLocation=getLocationOrThrow_1=cjs$2.getLocationOrThrow=getNavigator_1=cjs$2.getNavigator=getNavigatorOrThrow_1=cjs$2.getNavigatorOrThrow=getDocument_1=cjs$2.getDocument=getDocumentOrThrow_1=cjs$2.getDocumentOrThrow=getFromWindowOrThrow_1=cjs$2.getFromWindowOrThrow=getFromWindow_1=cjs$2.getFromWindow=void 0;function getFromWindow(cr){let ar;return typeof window<"u"&&typeof window[cr]<"u"&&(ar=window[cr]),ar}var getFromWindow_1=cjs$2.getFromWindow=getFromWindow;function getFromWindowOrThrow(cr){const ar=getFromWindow(cr);if(!ar)throw new Error(`${cr} is not defined in Window`);return ar}var getFromWindowOrThrow_1=cjs$2.getFromWindowOrThrow=getFromWindowOrThrow;function getDocumentOrThrow(){return getFromWindowOrThrow("document")}var getDocumentOrThrow_1=cjs$2.getDocumentOrThrow=getDocumentOrThrow;function getDocument(){return getFromWindow("document")}var getDocument_1=cjs$2.getDocument=getDocument;function getNavigatorOrThrow(){return getFromWindowOrThrow("navigator")}var getNavigatorOrThrow_1=cjs$2.getNavigatorOrThrow=getNavigatorOrThrow;function getNavigator(){return getFromWindow("navigator")}var getNavigator_1=cjs$2.getNavigator=getNavigator;function getLocationOrThrow(){return getFromWindowOrThrow("location")}var getLocationOrThrow_1=cjs$2.getLocationOrThrow=getLocationOrThrow;function getLocation(){return getFromWindow("location")}var getLocation_1=cjs$2.getLocation=getLocation;function getCryptoOrThrow(){return getFromWindowOrThrow("crypto")}var getCryptoOrThrow_1=cjs$2.getCryptoOrThrow=getCryptoOrThrow;function getCrypto(){return getFromWindow("crypto")}var getCrypto_1=cjs$2.getCrypto=getCrypto;function getLocalStorageOrThrow(){return getFromWindowOrThrow("localStorage")}var getLocalStorageOrThrow_1=cjs$2.getLocalStorageOrThrow=getLocalStorageOrThrow;function getLocalStorage(){return getFromWindow("localStorage")}getLocalStorage_1=cjs$2.getLocalStorage=getLocalStorage;var cjs$1={};Object.defineProperty(cjs$1,"__esModule",{value:!0});var getWindowMetadata_1=cjs$1.getWindowMetadata=void 0;const window_getters_1=cjs$2;function getWindowMetadata(){let cr,ar;try{cr=window_getters_1.getDocumentOrThrow(),ar=window_getters_1.getLocationOrThrow()}catch{return null}function dr(){const br=cr.getElementsByTagName("link"),Sr=[];for(let vr=0;vr<br.length;vr++){const Er=br[vr],Ar=Er.getAttribute("rel");if(Ar&&Ar.toLowerCase().indexOf("icon")>-1){const _r=Er.getAttribute("href");if(_r)if(_r.toLowerCase().indexOf("https:")===-1&&_r.toLowerCase().indexOf("http:")===-1&&_r.indexOf("//")!==0){let Cr=ar.protocol+"//"+ar.host;if(_r.indexOf("/")===0)Cr+=_r;else{const kr=ar.pathname.split("/");kr.pop();const Rr=kr.join("/");Cr+=Rr+"/"+_r}Sr.push(Cr)}else if(_r.indexOf("//")===0){const Cr=ar.protocol+_r;Sr.push(Cr)}else Sr.push(_r)}}return Sr}function fr(...br){const Sr=cr.getElementsByTagName("meta");for(let vr=0;vr<Sr.length;vr++){const Er=Sr[vr],Ar=["itemprop","property","name"].map(_r=>Er.getAttribute(_r)).filter(_r=>_r?br.includes(_r):!1);if(Ar.length&&Ar){const _r=Er.getAttribute("content");if(_r)return _r}}return""}function hr(){let br=fr("name","og:site_name","og:title","twitter:title");return br||(br=cr.title),br}function pr(){return fr("description","og:description","twitter:description","keywords")}const mr=hr(),gr=pr(),yr=ar.origin,xr=dr();return{description:gr,url:yr,icons:xr,name:mr}}getWindowMetadata_1=cjs$1.getWindowMetadata=getWindowMetadata;var queryString={},strictUriEncode=cr=>encodeURIComponent(cr).replace(/[!'()*]/g,ar=>`%${ar.charCodeAt(0).toString(16).toUpperCase()}`),token="%[a-f0-9]{2}",singleMatcher=new RegExp("("+token+")|([^%]+?)","gi"),multiMatcher=new RegExp("("+token+")+","gi");function decodeComponents(cr,ar){try{return[decodeURIComponent(cr.join(""))]}catch{}if(cr.length===1)return cr;ar=ar||1;var dr=cr.slice(0,ar),fr=cr.slice(ar);return Array.prototype.concat.call([],decodeComponents(dr),decodeComponents(fr))}function decode$h(cr){try{return decodeURIComponent(cr)}catch{for(var ar=cr.match(singleMatcher)||[],dr=1;dr<ar.length;dr++)cr=decodeComponents(ar,dr).join(""),ar=cr.match(singleMatcher)||[];return cr}}function customDecodeURIComponent(cr){for(var ar={"%FE%FF":"","%FF%FE":""},dr=multiMatcher.exec(cr);dr;){try{ar[dr[0]]=decodeURIComponent(dr[0])}catch{var fr=decode$h(dr[0]);fr!==dr[0]&&(ar[dr[0]]=fr)}dr=multiMatcher.exec(cr)}ar["%C2"]="";for(var hr=Object.keys(ar),pr=0;pr<hr.length;pr++){var mr=hr[pr];cr=cr.replace(new RegExp(mr,"g"),ar[mr])}return cr}var decodeUriComponent=function(cr){if(typeof cr!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof cr+"`");try{return cr=cr.replace(/\+/g," "),decodeURIComponent(cr)}catch{return customDecodeURIComponent(cr)}},splitOnFirst=(cr,ar)=>{if(!(typeof cr=="string"&&typeof ar=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(ar==="")return[cr];const dr=cr.indexOf(ar);return dr===-1?[cr]:[cr.slice(0,dr),cr.slice(dr+ar.length)]},filterObj=function(cr,ar){for(var dr={},fr=Object.keys(cr),hr=Array.isArray(ar),pr=0;pr<fr.length;pr++){var mr=fr[pr],gr=cr[mr];(hr?ar.indexOf(mr)!==-1:ar(mr,gr,cr))&&(dr[mr]=gr)}return dr};(function(cr){const ar=strictUriEncode,dr=decodeUriComponent,fr=splitOnFirst,hr=filterObj,pr=kr=>kr==null,mr=Symbol("encodeFragmentIdentifier");function gr(kr){switch(kr.arrayFormat){case"index":return Rr=>(Ir,Nr)=>{const Pr=Ir.length;return Nr===void 0||kr.skipNull&&Nr===null||kr.skipEmptyString&&Nr===""?Ir:Nr===null?[...Ir,[wr(Rr,kr),"[",Pr,"]"].join("")]:[...Ir,[wr(Rr,kr),"[",wr(Pr,kr),"]=",wr(Nr,kr)].join("")]};case"bracket":return Rr=>(Ir,Nr)=>Nr===void 0||kr.skipNull&&Nr===null||kr.skipEmptyString&&Nr===""?Ir:Nr===null?[...Ir,[wr(Rr,kr),"[]"].join("")]:[...Ir,[wr(Rr,kr),"[]=",wr(Nr,kr)].join("")];case"colon-list-separator":return Rr=>(Ir,Nr)=>Nr===void 0||kr.skipNull&&Nr===null||kr.skipEmptyString&&Nr===""?Ir:Nr===null?[...Ir,[wr(Rr,kr),":list="].join("")]:[...Ir,[wr(Rr,kr),":list=",wr(Nr,kr)].join("")];case"comma":case"separator":case"bracket-separator":{const Rr=kr.arrayFormat==="bracket-separator"?"[]=":"=";return Ir=>(Nr,Pr)=>Pr===void 0||kr.skipNull&&Pr===null||kr.skipEmptyString&&Pr===""?Nr:(Pr=Pr===null?"":Pr,Nr.length===0?[[wr(Ir,kr),Rr,wr(Pr,kr)].join("")]:[[Nr,wr(Pr,kr)].join(kr.arrayFormatSeparator)])}default:return Rr=>(Ir,Nr)=>Nr===void 0||kr.skipNull&&Nr===null||kr.skipEmptyString&&Nr===""?Ir:Nr===null?[...Ir,wr(Rr,kr)]:[...Ir,[wr(Rr,kr),"=",wr(Nr,kr)].join("")]}}function yr(kr){let Rr;switch(kr.arrayFormat){case"index":return(Ir,Nr,Pr)=>{if(Rr=/\[(\d*)\]$/.exec(Ir),Ir=Ir.replace(/\[\d*\]$/,""),!Rr){Pr[Ir]=Nr;return}Pr[Ir]===void 0&&(Pr[Ir]={}),Pr[Ir][Rr[1]]=Nr};case"bracket":return(Ir,Nr,Pr)=>{if(Rr=/(\[\])$/.exec(Ir),Ir=Ir.replace(/\[\]$/,""),!Rr){Pr[Ir]=Nr;return}if(Pr[Ir]===void 0){Pr[Ir]=[Nr];return}Pr[Ir]=[].concat(Pr[Ir],Nr)};case"colon-list-separator":return(Ir,Nr,Pr)=>{if(Rr=/(:list)$/.exec(Ir),Ir=Ir.replace(/:list$/,""),!Rr){Pr[Ir]=Nr;return}if(Pr[Ir]===void 0){Pr[Ir]=[Nr];return}Pr[Ir]=[].concat(Pr[Ir],Nr)};case"comma":case"separator":return(Ir,Nr,Pr)=>{const Tr=typeof Nr=="string"&&Nr.includes(kr.arrayFormatSeparator),Br=typeof Nr=="string"&&!Tr&&br(Nr,kr).includes(kr.arrayFormatSeparator);Nr=Br?br(Nr,kr):Nr;const Fr=Tr||Br?Nr.split(kr.arrayFormatSeparator).map(jr=>br(jr,kr)):Nr===null?Nr:br(Nr,kr);Pr[Ir]=Fr};case"bracket-separator":return(Ir,Nr,Pr)=>{const Tr=/(\[\])$/.test(Ir);if(Ir=Ir.replace(/\[\]$/,""),!Tr){Pr[Ir]=Nr&&br(Nr,kr);return}const Br=Nr===null?[]:Nr.split(kr.arrayFormatSeparator).map(Fr=>br(Fr,kr));if(Pr[Ir]===void 0){Pr[Ir]=Br;return}Pr[Ir]=[].concat(Pr[Ir],Br)};default:return(Ir,Nr,Pr)=>{if(Pr[Ir]===void 0){Pr[Ir]=Nr;return}Pr[Ir]=[].concat(Pr[Ir],Nr)}}}function xr(kr){if(typeof kr!="string"||kr.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function wr(kr,Rr){return Rr.encode?Rr.strict?ar(kr):encodeURIComponent(kr):kr}function br(kr,Rr){return Rr.decode?dr(kr):kr}function Sr(kr){return Array.isArray(kr)?kr.sort():typeof kr=="object"?Sr(Object.keys(kr)).sort((Rr,Ir)=>Number(Rr)-Number(Ir)).map(Rr=>kr[Rr]):kr}function vr(kr){const Rr=kr.indexOf("#");return Rr!==-1&&(kr=kr.slice(0,Rr)),kr}function Er(kr){let Rr="";const Ir=kr.indexOf("#");return Ir!==-1&&(Rr=kr.slice(Ir)),Rr}function Ar(kr){kr=vr(kr);const Rr=kr.indexOf("?");return Rr===-1?"":kr.slice(Rr+1)}function _r(kr,Rr){return Rr.parseNumbers&&!Number.isNaN(Number(kr))&&typeof kr=="string"&&kr.trim()!==""?kr=Number(kr):Rr.parseBooleans&&kr!==null&&(kr.toLowerCase()==="true"||kr.toLowerCase()==="false")&&(kr=kr.toLowerCase()==="true"),kr}function Cr(kr,Rr){Rr=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},Rr),xr(Rr.arrayFormatSeparator);const Ir=yr(Rr),Nr=Object.create(null);if(typeof kr!="string"||(kr=kr.trim().replace(/^[?#&]/,""),!kr))return Nr;for(const Pr of kr.split("&")){if(Pr==="")continue;let[Tr,Br]=fr(Rr.decode?Pr.replace(/\+/g," "):Pr,"=");Br=Br===void 0?null:["comma","separator","bracket-separator"].includes(Rr.arrayFormat)?Br:br(Br,Rr),Ir(br(Tr,Rr),Br,Nr)}for(const Pr of Object.keys(Nr)){const Tr=Nr[Pr];if(typeof Tr=="object"&&Tr!==null)for(const Br of Object.keys(Tr))Tr[Br]=_r(Tr[Br],Rr);else Nr[Pr]=_r(Tr,Rr)}return Rr.sort===!1?Nr:(Rr.sort===!0?Object.keys(Nr).sort():Object.keys(Nr).sort(Rr.sort)).reduce((Pr,Tr)=>{const Br=Nr[Tr];return Br&&typeof Br=="object"&&!Array.isArray(Br)?Pr[Tr]=Sr(Br):Pr[Tr]=Br,Pr},Object.create(null))}cr.extract=Ar,cr.parse=Cr,cr.stringify=(kr,Rr)=>{if(!kr)return"";Rr=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},Rr),xr(Rr.arrayFormatSeparator);const Ir=Br=>Rr.skipNull&&pr(kr[Br])||Rr.skipEmptyString&&kr[Br]==="",Nr=gr(Rr),Pr={};for(const Br of Object.keys(kr))Ir(Br)||(Pr[Br]=kr[Br]);const Tr=Object.keys(Pr);return Rr.sort!==!1&&Tr.sort(Rr.sort),Tr.map(Br=>{const Fr=kr[Br];return Fr===void 0?"":Fr===null?wr(Br,Rr):Array.isArray(Fr)?Fr.length===0&&Rr.arrayFormat==="bracket-separator"?wr(Br,Rr)+"[]":Fr.reduce(Nr(Br),[]).join("&"):wr(Br,Rr)+"="+wr(Fr,Rr)}).filter(Br=>Br.length>0).join("&")},cr.parseUrl=(kr,Rr)=>{Rr=Object.assign({decode:!0},Rr);const[Ir,Nr]=fr(kr,"#");return Object.assign({url:Ir.split("?")[0]||"",query:Cr(Ar(kr),Rr)},Rr&&Rr.parseFragmentIdentifier&&Nr?{fragmentIdentifier:br(Nr,Rr)}:{})},cr.stringifyUrl=(kr,Rr)=>{Rr=Object.assign({encode:!0,strict:!0,[mr]:!0},Rr);const Ir=vr(kr.url).split("?")[0]||"",Nr=cr.extract(kr.url),Pr=cr.parse(Nr,{sort:!1}),Tr=Object.assign(Pr,kr.query);let Br=cr.stringify(Tr,Rr);Br&&(Br=`?${Br}`);let Fr=Er(kr.url);return kr.fragmentIdentifier&&(Fr=`#${Rr[mr]?wr(kr.fragmentIdentifier,Rr):kr.fragmentIdentifier}`),`${Ir}${Br}${Fr}`},cr.pick=(kr,Rr,Ir)=>{Ir=Object.assign({parseFragmentIdentifier:!0,[mr]:!1},Ir);const{url:Nr,query:Pr,fragmentIdentifier:Tr}=cr.parseUrl(kr,Ir);return cr.stringifyUrl({url:Nr,query:hr(Pr,Rr),fragmentIdentifier:Tr},Ir)},cr.exclude=(kr,Rr,Ir)=>{const Nr=Array.isArray(Rr)?Pr=>!Rr.includes(Pr):(Pr,Tr)=>!Rr(Pr,Tr);return cr.pick(kr,Nr,Ir)}})(queryString);const RELAY_JSONRPC={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Rn$1(cr,ar=[]){const dr=[];return Object.keys(cr).forEach(fr=>{if(ar.length&&!ar.includes(fr))return;const hr=cr[fr];dr.push(...hr.accounts)}),dr}function M$3(cr,ar){return cr.includes(":")?[cr]:ar.chains||[]}const J$2="base10",p$4="base16",L$3="base64pad",x$5="utf8",Q$2=0,_$3=1,$n$1=0,Ie$1=1,Z$2=12,X$2=32;function jn$1(){const cr=x25519$1.generateKeyPair();return{privateKey:toString$6(cr.secretKey,p$4),publicKey:toString$6(cr.publicKey,p$4)}}function Dn$1(){const cr=random$1.randomBytes(X$2);return toString$6(cr,p$4)}function kn$1(cr,ar){const dr=x25519$1.sharedKey(fromString$5(cr,p$4),fromString$5(ar,p$4)),fr=new HKDF_1(sha256$6.SHA256,dr).expand(X$2);return toString$6(fr,p$4)}function Vn$1(cr){const ar=sha256$6.hash(fromString$5(cr,p$4));return toString$6(ar,p$4)}function Mn$1(cr){const ar=sha256$6.hash(fromString$5(cr,x$5));return toString$6(ar,p$4)}function Pe$1(cr){return fromString$5(`${cr}`,J$2)}function $$4(cr){return Number(toString$6(cr,J$2))}function Kn$1(cr){const ar=Pe$1(typeof cr.type<"u"?cr.type:Q$2);if($$4(ar)===_$3&&typeof cr.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const dr=typeof cr.senderPublicKey<"u"?fromString$5(cr.senderPublicKey,p$4):void 0,fr=typeof cr.iv<"u"?fromString$5(cr.iv,p$4):random$1.randomBytes(Z$2),hr=new chacha20poly1305$1.ChaCha20Poly1305(fromString$5(cr.symKey,p$4)).seal(fr,fromString$5(cr.message,x$5));return Te$2({type:ar,sealed:hr,iv:fr,senderPublicKey:dr})}function Ln$1(cr){const ar=new chacha20poly1305$1.ChaCha20Poly1305(fromString$5(cr.symKey,p$4)),{sealed:dr,iv:fr}=ee$2(cr.encoded),hr=ar.open(fr,dr);if(hr===null)throw new Error("Failed to decrypt");return toString$6(hr,x$5)}function Te$2(cr){if($$4(cr.type)===_$3){if(typeof cr.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return toString$6(concat$7([cr.type,cr.senderPublicKey,cr.iv,cr.sealed]),L$3)}return toString$6(concat$7([cr.type,cr.iv,cr.sealed]),L$3)}function ee$2(cr){const ar=fromString$5(cr,L$3),dr=ar.slice($n$1,Ie$1),fr=Ie$1;if($$4(dr)===_$3){const gr=fr+X$2,yr=gr+Z$2,xr=ar.slice(fr,gr),wr=ar.slice(gr,yr),br=ar.slice(yr);return{type:dr,sealed:br,iv:wr,senderPublicKey:xr}}const hr=fr+Z$2,pr=ar.slice(fr,hr),mr=ar.slice(hr);return{type:dr,sealed:mr,iv:pr}}function xn$1(cr,ar){const dr=ee$2(cr);return Re$2({type:$$4(dr.type),senderPublicKey:typeof dr.senderPublicKey<"u"?toString$6(dr.senderPublicKey,p$4):void 0,receiverPublicKey:ar?.receiverPublicKey})}function Re$2(cr){const ar=cr?.type||Q$2;if(ar===_$3){if(typeof cr?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof cr?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:ar,senderPublicKey:cr?.senderPublicKey,receiverPublicKey:cr?.receiverPublicKey}}function Fn$1(cr){return cr.type===_$3&&typeof cr.senderPublicKey=="string"&&typeof cr.receiverPublicKey=="string"}var Hn$1=Object.defineProperty,Ae$2=Object.getOwnPropertySymbols,qn$1=Object.prototype.hasOwnProperty,Bn$1=Object.prototype.propertyIsEnumerable,Ue$1=(cr,ar,dr)=>ar in cr?Hn$1(cr,ar,{enumerable:!0,configurable:!0,writable:!0,value:dr}):cr[ar]=dr,_e$2=(cr,ar)=>{for(var dr in ar||(ar={}))qn$1.call(ar,dr)&&Ue$1(cr,dr,ar[dr]);if(Ae$2)for(var dr of Ae$2(ar))Bn$1.call(ar,dr)&&Ue$1(cr,dr,ar[dr]);return cr};const Ce$1="ReactNative",m$5={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},je$2="js";function te$2(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function H$2(){return!getDocument_1()&&!!getNavigator_1()&&navigator.product===Ce$1}function q$4(){return!te$2()&&!!getNavigator_1()}function R$2(){return H$2()?m$5.reactNative:te$2()?m$5.node:q$4()?m$5.browser:m$5.unknown}function De$2(cr,ar){let dr=queryString.parse(cr);return dr=_e$2(_e$2({},dr),ar),cr=queryString.stringify(dr),cr}function zn$1(){return getWindowMetadata_1()||{name:"",description:"",url:"",icons:[""]}}function ke$2(){if(R$2()===m$5.reactNative&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"){const{OS:dr,Version:fr}=globalThis.Platform;return[dr,fr].join("-")}const cr=detect();if(cr===null)return"unknown";const ar=cr.os?cr.os.replace(" ","").toLowerCase():"unknown";return cr.type==="browser"?[ar,cr.name,cr.version].join("-"):[ar,cr.version].join("-")}function Ve$2(){var cr;const ar=R$2();return ar===m$5.browser?[ar,((cr=getLocation_1())==null?void 0:cr.host)||"unknown"].join(":"):ar}function Me$2(cr,ar,dr){const fr=ke$2(),hr=Ve$2();return[[cr,ar].join("-"),[je$2,dr].join("-"),fr,hr].join("/")}function Jn$1({protocol:cr,version:ar,relayUrl:dr,sdkVersion:fr,auth:hr,projectId:pr,useOnCloseEvent:mr}){const gr=dr.split("?"),yr=Me$2(cr,ar,fr),xr={auth:hr,ua:yr,projectId:pr,useOnCloseEvent:mr||void 0},wr=De$2(gr[1]||"",xr);return gr[0]+"?"+wr}function O$2(cr,ar){return cr.filter(dr=>ar.includes(dr)).length===cr.length}function et$1(cr){return Object.fromEntries(cr.entries())}function nt$1(cr){return new Map(Object.entries(cr))}function st$1(cr=cjs$3.FIVE_MINUTES,ar){const dr=cjs$3.toMiliseconds(cr||cjs$3.FIVE_MINUTES);let fr,hr,pr;return{resolve:mr=>{pr&&fr&&(clearTimeout(pr),fr(mr))},reject:mr=>{pr&&hr&&(clearTimeout(pr),hr(mr))},done:()=>new Promise((mr,gr)=>{pr=setTimeout(()=>{gr(new Error(ar))},dr),fr=mr,hr=gr})}}function it$1(cr,ar,dr){return new Promise(async(fr,hr)=>{const pr=setTimeout(()=>hr(new Error(dr)),ar);try{const mr=await cr;fr(mr)}catch(mr){hr(mr)}clearTimeout(pr)})}function re$2(cr,ar){if(typeof ar=="string"&&ar.startsWith(`${cr}:`))return ar;if(cr.toLowerCase()==="topic"){if(typeof ar!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${ar}`}else if(cr.toLowerCase()==="id"){if(typeof ar!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${ar}`}throw new Error(`Unknown expirer target type: ${cr}`)}function ct$1(cr){return re$2("topic",cr)}function at$1(cr){return re$2("id",cr)}function ut$2(cr){const[ar,dr]=cr.split(":"),fr={id:void 0,topic:void 0};if(ar==="topic"&&typeof dr=="string")fr.topic=dr;else if(ar==="id"&&Number.isInteger(Number(dr)))fr.id=Number(dr);else throw new Error(`Invalid target, expected id:number or topic:string, got ${ar}:${dr}`);return fr}function lt$1(cr,ar){return cjs$3.fromMiliseconds((ar||Date.now())+cjs$3.toMiliseconds(cr))}function dt$1(cr){return Date.now()>=cjs$3.toMiliseconds(cr)}function ft$1(cr,ar){return`${cr}${ar?`:${ar}`:""}`}function S$4(cr=[],ar=[]){return[...new Set([...cr,...ar])]}async function pt$1({id:cr,topic:ar,wcDeepLink:dr}){try{if(!dr)return;let hr=(typeof dr=="string"?JSON.parse(dr):dr)?.href;if(typeof hr!="string")return;hr.endsWith("/")&&(hr=hr.slice(0,-1));const pr=`${hr}/wc?requestId=${cr}&sessionTopic=${ar}`,mr=R$2();mr===m$5.browser?pr.startsWith("https://")?window.open(pr,"_blank","noreferrer noopener"):window.open(pr,"_self","noreferrer noopener"):mr===m$5.reactNative&&typeof globalThis?.Linking<"u"&&await globalThis.Linking.openURL(pr)}catch(fr){console.error(fr)}}const Fe$2="irn";function mt$1(cr){return cr?.relay||{protocol:Fe$2}}function yt$1(cr){const ar=RELAY_JSONRPC[cr];if(typeof ar>"u")throw new Error(`Relay Protocol not supported: ${cr}`);return ar}var ht$1=Object.defineProperty,He$1=Object.getOwnPropertySymbols,vt$1=Object.prototype.hasOwnProperty,gt$1=Object.prototype.propertyIsEnumerable,qe$2=(cr,ar,dr)=>ar in cr?ht$1(cr,ar,{enumerable:!0,configurable:!0,writable:!0,value:dr}):cr[ar]=dr,Et$1=(cr,ar)=>{for(var dr in ar||(ar={}))vt$1.call(ar,dr)&&qe$2(cr,dr,ar[dr]);if(He$1)for(var dr of He$1(ar))gt$1.call(ar,dr)&&qe$2(cr,dr,ar[dr]);return cr};function Be$2(cr,ar="-"){const dr={},fr="relay"+ar;return Object.keys(cr).forEach(hr=>{if(hr.startsWith(fr)){const pr=hr.replace(fr,""),mr=cr[hr];dr[pr]=mr}}),dr}function bt$1(cr){const ar=cr.indexOf(":"),dr=cr.indexOf("?")!==-1?cr.indexOf("?"):void 0,fr=cr.substring(0,ar),hr=cr.substring(ar+1,dr).split("@"),pr=typeof dr<"u"?cr.substring(dr):"",mr=queryString.parse(pr);return{protocol:fr,topic:Ge$1(hr[0]),version:parseInt(hr[1],10),symKey:mr.symKey,relay:Be$2(mr)}}function Ge$1(cr){return cr.startsWith("//")?cr.substring(2):cr}function We$1(cr,ar="-"){const dr="relay",fr={};return Object.keys(cr).forEach(hr=>{const pr=dr+ar+hr;cr[hr]&&(fr[pr]=cr[hr])}),fr}function Nt$1(cr){return`${cr.protocol}:${cr.topic}@${cr.version}?`+queryString.stringify(Et$1({symKey:cr.symKey},We$1(cr.relay)))}var Ot$1=Object.defineProperty,St$1=Object.defineProperties,wt$1=Object.getOwnPropertyDescriptors,ze$2=Object.getOwnPropertySymbols,It$1=Object.prototype.hasOwnProperty,Pt$1=Object.prototype.propertyIsEnumerable,Ye$2=(cr,ar,dr)=>ar in cr?Ot$1(cr,ar,{enumerable:!0,configurable:!0,writable:!0,value:dr}):cr[ar]=dr,Tt$1=(cr,ar)=>{for(var dr in ar||(ar={}))It$1.call(ar,dr)&&Ye$2(cr,dr,ar[dr]);if(ze$2)for(var dr of ze$2(ar))Pt$1.call(ar,dr)&&Ye$2(cr,dr,ar[dr]);return cr},Rt$1=(cr,ar)=>St$1(cr,wt$1(ar));function A$4(cr){const ar=[];return cr.forEach(dr=>{const[fr,hr]=dr.split(":");ar.push(`${fr}:${hr}`)}),ar}function Je$1(cr){const ar=[];return Object.values(cr).forEach(dr=>{ar.push(...A$4(dr.accounts))}),ar}function Qe$1(cr,ar){const dr=[];return Object.values(cr).forEach(fr=>{A$4(fr.accounts).includes(ar)&&dr.push(...fr.methods)}),dr}function Ze$1(cr,ar){const dr=[];return Object.values(cr).forEach(fr=>{A$4(fr.accounts).includes(ar)&&dr.push(...fr.events)}),dr}function At$1(cr,ar){const dr=cn$1(cr,ar);if(dr)throw new Error(dr.message);const fr={};for(const[hr,pr]of Object.entries(cr))fr[hr]={methods:pr.methods,events:pr.events,chains:pr.accounts.map(mr=>`${mr.split(":")[0]}:${mr.split(":")[1]}`)};return fr}function oe$2(cr){return cr.includes(":")}function Xe$1(cr){return oe$2(cr)?cr.split(":")[0]:cr}function se$2(cr){var ar,dr,fr;const hr={};if(!B$3(cr))return hr;for(const[pr,mr]of Object.entries(cr)){const gr=oe$2(pr)?[pr]:mr.chains,yr=mr.methods||[],xr=mr.events||[],wr=Xe$1(pr);hr[wr]=Rt$1(Tt$1({},hr[wr]),{chains:S$4(gr,(ar=hr[wr])==null?void 0:ar.chains),methods:S$4(yr,(dr=hr[wr])==null?void 0:dr.methods),events:S$4(xr,(fr=hr[wr])==null?void 0:fr.events)})}return hr}const _t$1={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ct$1={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function N$5(cr,ar){const{message:dr,code:fr}=Ct$1[cr];return{message:ar?`${dr} ${ar}`:dr,code:fr}}function U$2(cr,ar){const{message:dr,code:fr}=_t$1[cr];return{message:ar?`${dr} ${ar}`:dr,code:fr}}function j$4(cr,ar){return Array.isArray(cr)?typeof ar<"u"&&cr.length?cr.every(ar):!0:!1}function B$3(cr){return Object.getPrototypeOf(cr)===Object.prototype&&Object.keys(cr).length}function w$6(cr){return typeof cr>"u"}function h$5(cr,ar){return ar&&w$6(cr)?!0:typeof cr=="string"&&!!cr.trim().length}function G$2(cr,ar){return ar&&w$6(cr)?!0:typeof cr=="number"&&!isNaN(cr)}function $t$1(cr,ar){const{requiredNamespaces:dr}=ar,fr=Object.keys(cr.namespaces),hr=Object.keys(dr);let pr=!0;return O$2(hr,fr)?(fr.forEach(mr=>{const{accounts:gr,methods:yr,events:xr}=cr.namespaces[mr],wr=A$4(gr),br=dr[mr];(!O$2(M$3(mr,br),wr)||!O$2(br.methods,yr)||!O$2(br.events,xr))&&(pr=!1)}),pr):!1}function D$2(cr){return h$5(cr,!1)&&cr.includes(":")?cr.split(":").length===2:!1}function en$1(cr){if(h$5(cr,!1)&&cr.includes(":")){const ar=cr.split(":");if(ar.length===3){const dr=ar[0]+":"+ar[1];return!!ar[2]&&D$2(dr)}}return!1}function jt$1(cr){if(h$5(cr,!1))try{return typeof new URL(cr)<"u"}catch{return!1}return!1}function Dt$1(cr){var ar;return(ar=cr?.proposer)==null?void 0:ar.publicKey}function kt$1(cr){return cr?.topic}function Vt$1(cr,ar){let dr=null;return h$5(cr?.publicKey,!1)||(dr=N$5("MISSING_OR_INVALID",`${ar} controller public key should be a string`)),dr}function ie$2(cr){let ar=!0;return j$4(cr)?cr.length&&(ar=cr.every(dr=>h$5(dr,!1))):ar=!1,ar}function nn$1(cr,ar,dr){let fr=null;return j$4(ar)&&ar.length?ar.forEach(hr=>{fr||D$2(hr)||(fr=U$2("UNSUPPORTED_CHAINS",`${dr}, chain ${hr} should be a string and conform to "namespace:chainId" format`))}):D$2(cr)||(fr=U$2("UNSUPPORTED_CHAINS",`${dr}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),fr}function tn$1(cr,ar,dr){let fr=null;return Object.entries(cr).forEach(([hr,pr])=>{if(fr)return;const mr=nn$1(hr,M$3(hr,pr),`${ar} ${dr}`);mr&&(fr=mr)}),fr}function rn$1(cr,ar){let dr=null;return j$4(cr)?cr.forEach(fr=>{dr||en$1(fr)||(dr=U$2("UNSUPPORTED_ACCOUNTS",`${ar}, account ${fr} should be a string and conform to "namespace:chainId:address" format`))}):dr=U$2("UNSUPPORTED_ACCOUNTS",`${ar}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),dr}function on$1(cr,ar){let dr=null;return Object.values(cr).forEach(fr=>{if(dr)return;const hr=rn$1(fr?.accounts,`${ar} namespace`);hr&&(dr=hr)}),dr}function sn$1(cr,ar){let dr=null;return ie$2(cr?.methods)?ie$2(cr?.events)||(dr=U$2("UNSUPPORTED_EVENTS",`${ar}, events should be an array of strings or empty array for no events`)):dr=U$2("UNSUPPORTED_METHODS",`${ar}, methods should be an array of strings or empty array for no methods`),dr}function ce$2(cr,ar){let dr=null;return Object.values(cr).forEach(fr=>{if(dr)return;const hr=sn$1(fr,`${ar}, namespace`);hr&&(dr=hr)}),dr}function Mt$1(cr,ar,dr){let fr=null;if(cr&&B$3(cr)){const hr=ce$2(cr,ar);hr&&(fr=hr);const pr=tn$1(cr,ar,dr);pr&&(fr=pr)}else fr=N$5("MISSING_OR_INVALID",`${ar}, ${dr} should be an object with data`);return fr}function cn$1(cr,ar){let dr=null;if(cr&&B$3(cr)){const fr=ce$2(cr,ar);fr&&(dr=fr);const hr=on$1(cr,ar);hr&&(dr=hr)}else dr=N$5("MISSING_OR_INVALID",`${ar}, namespaces should be an object with data`);return dr}function an$1(cr){return h$5(cr.protocol,!0)}function Kt$1(cr,ar){let dr=!1;return ar&&!cr?dr=!0:cr&&j$4(cr)&&cr.length&&cr.forEach(fr=>{dr=an$1(fr)}),dr}function Lt$1(cr){return typeof cr=="number"}function xt$1(cr){return typeof cr<"u"&&typeof cr!==null}function Ft$1(cr){return!(!cr||typeof cr!="object"||!cr.code||!G$2(cr.code,!1)||!cr.message||!h$5(cr.message,!1))}function Ht$1(cr){return!(w$6(cr)||!h$5(cr.method,!1))}function qt$1(cr){return!(w$6(cr)||w$6(cr.result)&&w$6(cr.error)||!G$2(cr.id,!1)||!h$5(cr.jsonrpc,!1))}function Bt$1(cr){return!(w$6(cr)||!h$5(cr.name,!1))}function Gt$1(cr,ar){return!(!D$2(ar)||!Je$1(cr).includes(ar))}function Wt$1(cr,ar,dr){return h$5(dr,!1)?Qe$1(cr,ar).includes(dr):!1}function zt$1(cr,ar,dr){return h$5(dr,!1)?Ze$1(cr,ar).includes(dr):!1}function un$1(cr,ar,dr){let fr=null;const hr=Yt$1(cr),pr=Jt$1(ar),mr=Object.keys(hr),gr=Object.keys(pr),yr=ln$1(Object.keys(cr)),xr=ln$1(Object.keys(ar)),wr=yr.filter(br=>!xr.includes(br));return wr.length&&(fr=N$5("NON_CONFORMING_NAMESPACES",`${dr} namespaces keys don't satisfy requiredNamespaces.
      Required: ${wr.toString()}
      Received: ${Object.keys(ar).toString()}`)),O$2(mr,gr)||(fr=N$5("NON_CONFORMING_NAMESPACES",`${dr} namespaces chains don't satisfy required namespaces.
      Required: ${mr.toString()}
      Approved: ${gr.toString()}`)),Object.keys(ar).forEach(br=>{if(!br.includes(":")||fr)return;const Sr=A$4(ar[br].accounts);Sr.includes(br)||(fr=N$5("NON_CONFORMING_NAMESPACES",`${dr} namespaces accounts don't satisfy namespace accounts for ${br}
        Required: ${br}
        Approved: ${Sr.toString()}`))}),mr.forEach(br=>{fr||(O$2(hr[br].methods,pr[br].methods)?O$2(hr[br].events,pr[br].events)||(fr=N$5("NON_CONFORMING_NAMESPACES",`${dr} namespaces events don't satisfy namespace events for ${br}`)):fr=N$5("NON_CONFORMING_NAMESPACES",`${dr} namespaces methods don't satisfy namespace methods for ${br}`))}),fr}function Yt$1(cr){const ar={};return Object.keys(cr).forEach(dr=>{var fr;dr.includes(":")?ar[dr]=cr[dr]:(fr=cr[dr].chains)==null||fr.forEach(hr=>{ar[hr]={methods:cr[dr].methods,events:cr[dr].events}})}),ar}function ln$1(cr){return[...new Set(cr.map(ar=>ar.includes(":")?ar.split(":")[0]:ar))]}function Jt$1(cr){const ar={};return Object.keys(cr).forEach(dr=>{dr.includes(":")?ar[dr]=cr[dr]:A$4(cr[dr].accounts)?.forEach(hr=>{ar[hr]={accounts:cr[dr].accounts.filter(pr=>pr.includes(`${hr}:`)),methods:cr[dr].methods,events:cr[dr].events}})}),ar}function Qt$1(cr,ar){return G$2(cr,!1)&&cr<=ar.max&&cr>=ar.min}function Zt$1(){const cr=R$2();return new Promise(ar=>{switch(cr){case m$5.browser:ar(dn$1());break;case m$5.reactNative:ar(fn$1());break;case m$5.node:ar(pn$1());break;default:ar(!0)}})}function dn$1(){return q$4()&&navigator?.onLine}async function fn$1(){return H$2()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo?(await globalThis?.NetInfo.fetch())?.isConnected:!0}function pn$1(){return!0}function Xt$1(cr){switch(R$2()){case m$5.browser:mn$1(cr);break;case m$5.reactNative:yn$1(cr);break}}function mn$1(cr){q$4()&&(window.addEventListener("online",()=>cr(!0)),window.addEventListener("offline",()=>cr(!1)))}function yn$1(cr){H$2()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo&&globalThis?.NetInfo.addEventListener(ar=>cr(ar?.isConnected))}const ae$2={};let er$1=class{static get(ar){return ae$2[ar]}static set(ar,dr){ae$2[ar]=dr}static delete(ar){delete ae$2[ar]}};var NAMESPACE="eip155",STORE_KEY="store",REQUESTED_CHAINS_KEY="requestedChains",ADD_ETH_CHAIN_METHOD="wallet_addEthereumChain",_provider$1,_initProviderPromise,_createProvider,createProvider_fn,_initProvider,initProvider_fn,_isChainsStale,isChainsStale_fn,_setupListeners,setupListeners_fn,_removeListeners,removeListeners_fn,_setRequestedChainsIds,setRequestedChainsIds_fn,_getRequestedChainsIds,getRequestedChainsIds_fn,_getNamespaceChainsIds,getNamespaceChainsIds_fn,_getNamespaceMethods,getNamespaceMethods_fn,WalletConnectConnector=class extends Connector{constructor(cr){super({...cr,options:{isNewChainsStale:!0,...cr.options}}),__privateAdd$1(this,_createProvider),__privateAdd$1(this,_initProvider),__privateAdd$1(this,_isChainsStale),__privateAdd$1(this,_setupListeners),__privateAdd$1(this,_removeListeners),__privateAdd$1(this,_setRequestedChainsIds),__privateAdd$1(this,_getRequestedChainsIds),__privateAdd$1(this,_getNamespaceChainsIds),__privateAdd$1(this,_getNamespaceMethods),__publicField(this,"id","walletConnect"),__publicField(this,"name","WalletConnect"),__publicField(this,"ready",!0),__privateAdd$1(this,_provider$1,void 0),__privateAdd$1(this,_initProviderPromise,void 0),__publicField(this,"onAccountsChanged",ar=>{ar.length===0?this.emit("disconnect"):this.emit("change",{account:getAddress$2(ar[0])})}),__publicField(this,"onChainChanged",ar=>{const dr=Number(ar),fr=this.isChainUnsupported(dr);this.emit("change",{chain:{id:dr,unsupported:fr}})}),__publicField(this,"onDisconnect",()=>{__privateMethod$1(this,_setRequestedChainsIds,setRequestedChainsIds_fn).call(this,[]),this.emit("disconnect")}),__publicField(this,"onDisplayUri",ar=>{this.emit("message",{type:"display_uri",data:ar})}),__publicField(this,"onConnect",()=>{this.emit("connect",{})}),__privateMethod$1(this,_createProvider,createProvider_fn).call(this)}async connect({chainId:cr,pairingTopic:ar}={}){try{let dr=cr;if(!dr){const wr=this.storage?.getItem(STORE_KEY)?.state?.data?.chain?.id;wr&&!this.isChainUnsupported(wr)?dr=wr:dr=this.chains[0]?.id}if(!dr)throw new Error("No chains found on connector.");const fr=await this.getProvider();__privateMethod$1(this,_setupListeners,setupListeners_fn).call(this);const hr=__privateMethod$1(this,_isChainsStale,isChainsStale_fn).call(this);if(fr.session&&hr&&await fr.disconnect(),!fr.session||hr){const xr=this.chains.filter(wr=>wr.id!==dr).map(wr=>wr.id);this.emit("message",{type:"connecting"}),await fr.connect({pairingTopic:ar,chains:[dr],optionalChains:xr.length?xr:void 0}),__privateMethod$1(this,_setRequestedChainsIds,setRequestedChainsIds_fn).call(this,this.chains.map(({id:wr})=>wr))}const pr=await fr.enable(),mr=getAddress$2(pr[0]),gr=await this.getChainId(),yr=this.isChainUnsupported(gr);return{account:mr,chain:{id:gr,unsupported:yr}}}catch(dr){throw/user rejected/i.test(dr?.message)?new UserRejectedRequestError(dr):dr}}async disconnect(){const cr=await this.getProvider();try{await cr.disconnect()}catch(ar){if(!/No matching key/i.test(ar.message))throw ar}finally{__privateMethod$1(this,_removeListeners,removeListeners_fn).call(this),__privateMethod$1(this,_setRequestedChainsIds,setRequestedChainsIds_fn).call(this,[])}}async getAccount(){const{accounts:cr}=await this.getProvider();return getAddress$2(cr[0])}async getChainId(){const{chainId:cr}=await this.getProvider();return cr}async getProvider({chainId:cr}={}){return __privateGet$1(this,_provider$1)||await __privateMethod$1(this,_createProvider,createProvider_fn).call(this),cr&&await this.switchChain(cr),__privateGet$1(this,_provider$1)}async getWalletClient({chainId:cr}={}){const[ar,dr]=await Promise.all([this.getProvider({chainId:cr}),this.getAccount()]),fr=this.chains.find(hr=>hr.id===cr);if(!ar)throw new Error("provider is required.");return createWalletClient({account:dr,chain:fr,transport:custom(ar)})}async isAuthorized(){try{const[cr,ar]=await Promise.all([this.getAccount(),this.getProvider()]),dr=__privateMethod$1(this,_isChainsStale,isChainsStale_fn).call(this);if(!cr)return!1;if(dr&&ar.session){try{await ar.disconnect()}catch{}return!1}return!0}catch{return!1}}async switchChain(cr){const ar=this.chains.find(dr=>dr.id===cr);if(!ar)throw new SwitchChainError(new Error("chain not found on connector."));try{const dr=await this.getProvider(),fr=__privateMethod$1(this,_getNamespaceChainsIds,getNamespaceChainsIds_fn).call(this),hr=__privateMethod$1(this,_getNamespaceMethods,getNamespaceMethods_fn).call(this);if(!fr.includes(cr)&&hr.includes(ADD_ETH_CHAIN_METHOD)){await dr.request({method:ADD_ETH_CHAIN_METHOD,params:[{chainId:numberToHex(ar.id),blockExplorerUrls:[ar.blockExplorers?.default?.url],chainName:ar.name,nativeCurrency:ar.nativeCurrency,rpcUrls:[...ar.rpcUrls.default.http]}]});const mr=__privateMethod$1(this,_getRequestedChainsIds,getRequestedChainsIds_fn).call(this);mr.push(cr),__privateMethod$1(this,_setRequestedChainsIds,setRequestedChainsIds_fn).call(this,mr)}return await dr.request({method:"wallet_switchEthereumChain",params:[{chainId:numberToHex(cr)}]}),ar}catch(dr){const fr=typeof dr=="string"?dr:dr?.message;throw/user rejected request/i.test(fr)?new UserRejectedRequestError(dr):new SwitchChainError(dr)}}};_provider$1=new WeakMap;_initProviderPromise=new WeakMap;_createProvider=new WeakSet;createProvider_fn=async function(){return!__privateGet$1(this,_initProviderPromise)&&typeof window<"u"&&__privateSet$1(this,_initProviderPromise,__privateMethod$1(this,_initProvider,initProvider_fn).call(this)),__privateGet$1(this,_initProviderPromise)};_initProvider=new WeakSet;initProvider_fn=async function(){const{EthereumProvider:cr,OPTIONAL_EVENTS:ar,OPTIONAL_METHODS:dr}=await __vitePreload(()=>import("./index.es-a03d59d5.js"),["assets/index.es-a03d59d5.js","assets/mud-3b4b7775.js","assets/react-60d820b0.js","assets/http-7c986a3f.js","assets/phaser-f1ffc97e.js"]),[fr,...hr]=this.chains.map(({id:pr})=>pr);if(fr){const{projectId:pr,showQrModal:mr=!0,qrModalOptions:gr,metadata:yr,relayUrl:xr}=this.options;__privateSet$1(this,_provider$1,await cr.init({showQrModal:mr,qrModalOptions:gr,projectId:pr,optionalMethods:dr,optionalEvents:ar,chains:[fr],optionalChains:hr.length?hr:void 0,rpcMap:Object.fromEntries(this.chains.map(wr=>[wr.id,wr.rpcUrls.default.http[0]])),metadata:yr,relayUrl:xr}))}};_isChainsStale=new WeakSet;isChainsStale_fn=function(){if(__privateMethod$1(this,_getNamespaceMethods,getNamespaceMethods_fn).call(this).includes(ADD_ETH_CHAIN_METHOD)||!this.options.isNewChainsStale)return!1;const ar=__privateMethod$1(this,_getRequestedChainsIds,getRequestedChainsIds_fn).call(this),dr=this.chains.map(({id:hr})=>hr),fr=__privateMethod$1(this,_getNamespaceChainsIds,getNamespaceChainsIds_fn).call(this);return fr.length&&!fr.some(hr=>dr.includes(hr))?!1:!dr.every(hr=>ar.includes(hr))};_setupListeners=new WeakSet;setupListeners_fn=function(){__privateGet$1(this,_provider$1)&&(__privateMethod$1(this,_removeListeners,removeListeners_fn).call(this),__privateGet$1(this,_provider$1).on("accountsChanged",this.onAccountsChanged),__privateGet$1(this,_provider$1).on("chainChanged",this.onChainChanged),__privateGet$1(this,_provider$1).on("disconnect",this.onDisconnect),__privateGet$1(this,_provider$1).on("session_delete",this.onDisconnect),__privateGet$1(this,_provider$1).on("display_uri",this.onDisplayUri),__privateGet$1(this,_provider$1).on("connect",this.onConnect))};_removeListeners=new WeakSet;removeListeners_fn=function(){__privateGet$1(this,_provider$1)&&(__privateGet$1(this,_provider$1).removeListener("accountsChanged",this.onAccountsChanged),__privateGet$1(this,_provider$1).removeListener("chainChanged",this.onChainChanged),__privateGet$1(this,_provider$1).removeListener("disconnect",this.onDisconnect),__privateGet$1(this,_provider$1).removeListener("session_delete",this.onDisconnect),__privateGet$1(this,_provider$1).removeListener("display_uri",this.onDisplayUri),__privateGet$1(this,_provider$1).removeListener("connect",this.onConnect))};_setRequestedChainsIds=new WeakSet;setRequestedChainsIds_fn=function(cr){this.storage?.setItem(REQUESTED_CHAINS_KEY,cr)};_getRequestedChainsIds=new WeakSet;getRequestedChainsIds_fn=function(){return this.storage?.getItem(REQUESTED_CHAINS_KEY)??[]};_getNamespaceChainsIds=new WeakSet;getNamespaceChainsIds_fn=function(){if(!__privateGet$1(this,_provider$1))return[];const cr=__privateGet$1(this,_provider$1).session?.namespaces;return cr?se$2(cr)[NAMESPACE]?.chains?.map(fr=>parseInt(fr.split(":")[1]||""))??[]:[]};_getNamespaceMethods=new WeakSet;getNamespaceMethods_fn=function(){if(!__privateGet$1(this,_provider$1))return[];const cr=__privateGet$1(this,_provider$1).session?.namespaces;return cr?se$2(cr)[NAMESPACE]?.methods??[]:[]};var _UNSTABLE_shimOnConnectSelectAccount,MetaMaskConnector=class extends InjectedConnector{constructor({chains:cr,options:ar}={}){const dr={name:"MetaMask",shimDisconnect:!0,getProvider(){function fr(pr){if(pr?.isMetaMask&&!(pr.isBraveWallet&&!pr._events&&!pr._state)&&!pr.isApexWallet&&!pr.isAvalanche&&!pr.isBitKeep&&!pr.isBlockWallet&&!pr.isCoin98&&!pr.isFordefi&&!pr.isMathWallet&&!(pr.isOkxWallet||pr.isOKExWallet)&&!(pr.isOneInchIOSWallet||pr.isOneInchAndroidWallet)&&!pr.isOpera&&!pr.isPortal&&!pr.isRabby&&!pr.isDefiant&&!pr.isTokenPocket&&!pr.isTokenary&&!pr.isZerion)return pr}if(typeof window>"u")return;const hr=window.ethereum;return hr?.providers?hr.providers.find(fr):fr(hr)},...ar};super({chains:cr,options:dr}),__publicField(this,"id","metaMask"),__publicField(this,"shimDisconnectKey",`${this.id}.shimDisconnect`),__privateAdd$1(this,_UNSTABLE_shimOnConnectSelectAccount,void 0),__privateSet$1(this,_UNSTABLE_shimOnConnectSelectAccount,dr.UNSTABLE_shimOnConnectSelectAccount)}async connect({chainId:cr}={}){try{const ar=await this.getProvider();if(!ar)throw new ConnectorNotFoundError;ar.on&&(ar.on("accountsChanged",this.onAccountsChanged),ar.on("chainChanged",this.onChainChanged),ar.on("disconnect",this.onDisconnect)),this.emit("message",{type:"connecting"});let dr=null;if(__privateGet$1(this,_UNSTABLE_shimOnConnectSelectAccount)&&this.options?.shimDisconnect&&!this.storage?.getItem(this.shimDisconnectKey)&&(dr=await this.getAccount().catch(()=>null),!!dr))try{await ar.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}),dr=await this.getAccount()}catch(mr){if(this.isUserRejectedRequestError(mr))throw new UserRejectedRequestError(mr);if(mr.code===new ResourceUnavailableRpcError(mr).code)throw mr}if(!dr){const pr=await ar.request({method:"eth_requestAccounts"});dr=getAddress$2(pr[0])}let fr=await this.getChainId(),hr=this.isChainUnsupported(fr);return cr&&fr!==cr&&(fr=(await this.switchChain(cr)).id,hr=this.isChainUnsupported(fr)),this.options?.shimDisconnect&&this.storage?.setItem(this.shimDisconnectKey,!0),{account:dr,chain:{id:fr,unsupported:hr},provider:ar}}catch(ar){throw this.isUserRejectedRequestError(ar)?new UserRejectedRequestError(ar):ar.code===-32002?new ResourceUnavailableRpcError(ar):ar}}};_UNSTABLE_shimOnConnectSelectAccount=new WeakMap;var switchChainAllowedRegex=/(imtoken|metamask|rainbow|trust wallet|uniswap wallet|ledger)/i,_provider,_switchChain,switchChain_fn,WalletConnectLegacyConnector=class extends Connector{constructor(){super(...arguments),__privateAdd$1(this,_switchChain),__publicField(this,"id","walletConnectLegacy"),__publicField(this,"name","WalletConnectLegacy"),__publicField(this,"ready",!0),__privateAdd$1(this,_provider,void 0),__publicField(this,"onAccountsChanged",cr=>{cr.length===0?this.emit("disconnect"):this.emit("change",{account:getAddress$2(cr[0])})}),__publicField(this,"onChainChanged",cr=>{const ar=normalizeChainId(cr),dr=this.isChainUnsupported(ar);this.emit("change",{chain:{id:ar,unsupported:dr}})}),__publicField(this,"onDisconnect",()=>{this.emit("disconnect")})}async connect({chainId:cr}={}){try{let ar=cr;if(!ar){const xr=this.storage?.getItem("store")?.state?.data?.chain?.id;xr&&!this.isChainUnsupported(xr)&&(ar=xr)}const dr=await this.getProvider({chainId:ar,create:!0});dr.on("accountsChanged",this.onAccountsChanged),dr.on("chainChanged",this.onChainChanged),dr.on("disconnect",this.onDisconnect),setTimeout(()=>this.emit("message",{type:"connecting"}),0);const fr=await dr.enable(),hr=getAddress$2(fr[0]),pr=await this.getChainId(),mr=this.isChainUnsupported(pr),gr=dr.connector?.peerMeta?.name??"";return switchChainAllowedRegex.test(gr)&&(this.switchChain=__privateMethod$1(this,_switchChain,switchChain_fn)),{account:hr,chain:{id:pr,unsupported:mr}}}catch(ar){throw/user closed modal/i.test(ar.message)?new UserRejectedRequestError(ar):ar}}async disconnect(){const cr=await this.getProvider();await cr.disconnect(),cr.removeListener("accountsChanged",this.onAccountsChanged),cr.removeListener("chainChanged",this.onChainChanged),cr.removeListener("disconnect",this.onDisconnect),typeof localStorage<"u"&&localStorage.removeItem("walletconnect")}async getAccount(){const ar=(await this.getProvider()).accounts;return getAddress$2(ar[0])}async getChainId(){const cr=await this.getProvider();return normalizeChainId(cr.chainId)}async getProvider({chainId:cr,create:ar}={}){if(!__privateGet$1(this,_provider)||cr||ar){const dr=this.options?.infuraId?{}:this.chains.reduce((hr,pr)=>({...hr,[pr.id]:pr.rpcUrls.default.http[0]}),{}),fr=(await __vitePreload(()=>import("./index-67af5c72.js"),["assets/index-67af5c72.js","assets/http-7c986a3f.js","assets/react-60d820b0.js","assets/browser-a55b61a5.js","assets/mud-3b4b7775.js","assets/phaser-f1ffc97e.js"])).default;__privateSet$1(this,_provider,new fr({...this.options,chainId:cr,rpc:{...dr,...this.options?.rpc}})),__privateGet$1(this,_provider).http=await __privateGet$1(this,_provider).setHttpProvider(cr)}return __privateGet$1(this,_provider)}async getWalletClient({chainId:cr}={}){const[ar,dr]=await Promise.all([this.getProvider({chainId:cr}),this.getAccount()]),fr=this.chains.find(hr=>hr.id===cr);if(!ar)throw new Error("provider is required.");return createWalletClient({account:dr,chain:fr,transport:custom(ar)})}async isAuthorized(){try{return!!await this.getAccount()}catch{return!1}}};_provider=new WeakMap;_switchChain=new WeakSet;switchChain_fn=async function(cr){const ar=await this.getProvider(),dr=numberToHex(cr);try{return await Promise.race([ar.request({method:"wallet_switchEthereumChain",params:[{chainId:dr}]}),new Promise(fr=>this.on("change",({chain:hr})=>{hr?.id===cr&&fr(cr)}))]),this.chains.find(fr=>fr.id===cr)??{id:cr,name:`Chain ${dr}`,network:`${dr}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}}}catch(fr){const hr=typeof fr=="string"?fr:fr?.message;throw/user rejected request/i.test(hr)?new UserRejectedRequestError(fr):new SwitchChainError(fr)}};function omitUndefinedValues(cr){return Object.fromEntries(Object.entries(cr).filter(([ar,dr])=>dr!==void 0))}var connectorsForWallets=cr=>()=>{let ar=-1;const dr=[],fr=[],hr=[],pr=[];return cr.forEach(({groupName:gr,wallets:yr},xr)=>{yr.forEach(wr=>{if(ar++,wr?.iconAccent&&!isHexString$2(wr?.iconAccent))throw new Error(`Property \`iconAccent\` is not a hex value for wallet: ${wr.name}`);const br={...wr,groupIndex:xr,groupName:gr,index:ar};typeof wr.hidden=="function"?hr.push(br):fr.push(br)})}),[...fr,...hr].forEach(({createConnector:gr,groupIndex:yr,groupName:xr,hidden:wr,index:br,...Sr})=>{if(typeof wr=="function"&&wr({wallets:[...pr.map(({connector:kr,id:Rr,installed:Ir,name:Nr})=>({connector:kr,id:Rr,installed:Ir,name:Nr}))]}))return;const{connector:vr,...Er}=omitUndefinedValues(gr());let Ar;if(Sr.id==="walletConnect"&&Er.qrCode&&!isMobile()){const{chains:Cr,options:kr}=vr;Ar=new WalletConnectConnector({chains:Cr,options:{...kr,showQrModal:!0}}),dr.push(Ar)}const _r={connector:vr,groupIndex:yr,groupName:xr,index:br,walletConnectModalConnector:Ar,...Sr,...Er};pr.push(_r),dr.includes(vr)||(dr.push(vr),vr._wallets=[]),vr._wallets.push(_r)}),dr};function isAndroid(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function isSmallIOS(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function isLargeIOS(){return typeof navigator<"u"&&(/iPad/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)}function isIOS(){return isSmallIOS()||isLargeIOS()}async function getWalletConnectUri(cr,ar){const dr=await cr.getProvider();return ar==="2"?new Promise(fr=>dr.once("display_uri",fr)):dr.connector.uri}var sharedConnectors=new Map;function createConnector(cr,ar){const dr=cr==="1"?new WalletConnectLegacyConnector(ar):new WalletConnectConnector(ar);return sharedConnectors.set(JSON.stringify(ar),dr),dr}function getWalletConnectConnector({chains:cr,options:ar={},projectId:dr,version:fr="2"}){const hr="21fef48091f12692cad574a6f7753643";if(fr==="2"){if(!dr||dr==="")throw new Error("No projectId found. Every dApp must now provide a WalletConnect Cloud projectId to enable WalletConnect v2 https://www.rainbowkit.com/docs/installation#configure");(dr==="YOUR_PROJECT_ID"||dr===hr)&&console.warn("Invalid projectId. Please create a unique WalletConnect Cloud projectId for your dApp https://www.rainbowkit.com/docs/installation#configure")}const pr={chains:cr,options:fr==="1"?{qrcode:!1,...ar}:{projectId:dr==="YOUR_PROJECT_ID"?hr:dr,showQrModal:!1,...ar}},mr=JSON.stringify(pr),gr=sharedConnectors.get(mr);return gr??createConnector(fr,pr)}function isMetaMask(cr){return!(!cr?.isMetaMask||cr.isBraveWallet&&!cr._events&&!cr._state||cr.isApexWallet||cr.isAvalanche||cr.isBackpack||cr.isBifrost||cr.isBitKeep||cr.isBitski||cr.isBlockWallet||cr.isCoinbaseWallet||cr.isDawn||cr.isEnkrypt||cr.isExodus||cr.isFrame||cr.isFrontier||cr.isGamestop||cr.isHyperPay||cr.isImToken||cr.isKuCoinWallet||cr.isMathWallet||cr.isOkxWallet||cr.isOKExWallet||cr.isOneInchIOSWallet||cr.isOneInchAndroidWallet||cr.isOpera||cr.isPhantom||cr.isPortal||cr.isRabby||cr.isRainbow||cr.isStatus||cr.isTalisman||cr.isTally||cr.isTokenPocket||cr.isTokenary||cr.isTrust||cr.isTrustWallet||cr.isXDEFI||cr.isZerion)}var metaMaskWallet=({chains:cr,projectId:ar,walletConnectOptions:dr,walletConnectVersion:fr="2",...hr})=>{var pr,mr;const gr=typeof window<"u"&&((pr=window.ethereum)==null?void 0:pr.providers),yr=typeof window<"u"&&typeof window.ethereum<"u"&&(((mr=window.ethereum.providers)==null?void 0:mr.some(isMetaMask))||window.ethereum.isMetaMask),xr=!yr;return{id:"metaMask",name:"MetaMask",iconUrl:async()=>(await __vitePreload(()=>import("./metaMaskWallet-ORHUNQRP-ac2ea8b3.js"),[])).default,iconAccent:"#f6851a",iconBackground:"#fff",installed:xr?void 0:yr,downloadUrls:{android:"https://play.google.com/store/apps/details?id=io.metamask",ios:"https://apps.apple.com/us/app/metamask/id1438144202",mobile:"https://metamask.io/download",qrCode:"https://metamask.io/download",chrome:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",edge:"https://microsoftedge.microsoft.com/addons/detail/metamask/ejbalbakoplchlghecdalmeeeajnimhm",firefox:"https://addons.mozilla.org/firefox/addon/ether-metamask",opera:"https://addons.opera.com/extensions/details/metamask-10",browserExtension:"https://metamask.io/download"},createConnector:()=>{const wr=xr?getWalletConnectConnector({projectId:ar,chains:cr,version:fr,options:dr}):new MetaMaskConnector({chains:cr,options:{getProvider:()=>gr?gr.find(isMetaMask):typeof window<"u"?window.ethereum:void 0,...hr}}),br=async()=>{const Sr=await getWalletConnectUri(wr,fr);return isAndroid()?Sr:isIOS()?`metamask://wc?uri=${encodeURIComponent(Sr)}`:`https://metamask.app.link/wc?uri=${encodeURIComponent(Sr)}`};return{connector:wr,mobile:{getUri:xr?br:void 0},qrCode:xr?{getUri:br,instructions:{learnMoreUrl:"https://metamask.io/faqs/",steps:[{description:"We recommend putting MetaMask on your home screen for quicker access.",step:"install",title:"Open the MetaMask app"},{description:"Be sure to back up your wallet using a secure method. Never share your secret phrase with anyone.",step:"create",title:"Create or Import a Wallet"},{description:"After you scan, a connection prompt will appear for you to connect your wallet.",step:"scan",title:"Tap the scan button"}]}}:void 0,extension:{instructions:{learnMoreUrl:"https://metamask.io/faqs/",steps:[{description:"We recommend pinning MetaMask to your taskbar for quicker access to your wallet.",step:"install",title:"Install the MetaMask extension"},{description:"Be sure to back up your wallet using a secure method. Never share your secret phrase with anyone.",step:"create",title:"Create or Import a Wallet"},{description:"Once you set up your wallet, click below to refresh the browser and load up the extension.",step:"refresh",title:"Refresh your browser"}]}}}}}};function publicProvider(){return function(cr){return cr.rpcUrls.public.http[0]?{chain:cr,rpcUrls:cr.rpcUrls.public}:null}}function createWaitForTransaction({storedBlockLogs$:cr,client:ar}){const fr=cr.pipe(scan((pr,mr)=>[mr,...pr].slice(0,10),[]),filter$2(pr=>pr.length>0),shareReplay(1));async function hr(pr,mr){const gr=fr.pipe(concatMap(async yr=>{if(yr.flatMap(wr=>wr.logs.map(br=>br.transactionHash).filter(w$8)).includes(pr))return!0;try{const wr=yr[0],br=await ar.getTransactionReceipt({hash:pr});if(mr&&mr(br),br.status==="reverted")throw new Error(`Transaction ${pr} reverted`);return wr.blockNumber>=br.blockNumber}catch(wr){if(wr instanceof TransactionReceiptNotFoundError)return!1;throw wr}}));await firstValueFrom(gr.pipe(filter$2(yr=>!!yr)))}return hr}const MATCH_SPECIFIC_TABLES_NEEDED_IN_AMALGEMA=["Player","SpawnReservedBy","OwnedBy","LevelContent"],tables$1=Object.values(mudConfig.tables).map(cr=>{const ar=E$4({type:cr.offchainOnly?"offchainTable":"table",namespace:mudConfig.namespace,name:cr.name});return{...cr,tableId:ar}}),matchSpecificTables=tables$1.filter(cr=>{const ar=Object.keys(cr.keySchema);return ar[0]==="matchEntity"&&ar[1]==="entity"}),nonMatchSpecificTables=tables$1.filter(cr=>!matchSpecificTables.includes(cr)||MATCH_SPECIFIC_TABLES_NEEDED_IN_AMALGEMA.includes(cr.name)),nonMatchSpecificFilters=nonMatchSpecificTables.map(cr=>({tableId:cr.tableId}));function createSyncFilters(cr){return cr==null?nonMatchSpecificFilters:[...nonMatchSpecificFilters,...matchSpecificTables.map(ar=>({tableId:ar.tableId,key0:cr}))]}const SEASON_PASS_NAMESPACE="szn0.2",ERC20RegistryTableId=E$4({type:"table",namespace:"erc20-puppet",name:"ERC20Registry"}),OrbBalancesTableId=E$4({type:"table",namespace:"Orb",name:"Balances"}),SeasonPassBalancesTableId=E$4({type:"table",namespace:SEASON_PASS_NAMESPACE,name:"Balances"}),SkyKeyBalancesTableId=E$4({type:"table",namespace:"SkyKey",name:"Balances"}),UserDelegationControlTableId=E$4({type:"table",namespace:"",name:"UserDelegationControl"}),SystemboundDelegationsTableId=E$4({type:"table",namespace:"",name:"SystemboundDelegations"}),syncFilters=[{tableId:ERC20RegistryTableId},{tableId:OrbBalancesTableId},{tableId:SeasonPassBalancesTableId},{tableId:SkyKeyBalancesTableId},{tableId:UserDelegationControlTableId},{tableId:SystemboundDelegationsTableId}],tables={ERC20Registry:{namespace:"erc20-puppet",name:"ERC20Registry",tableId:ERC20RegistryTableId,keySchema:{namespaceId:{type:"bytes32"}},valueSchema:{erc20Address:{type:"address"}}},Orb_Balances:{namespace:"Orb",name:"Balances",tableId:OrbBalancesTableId,keySchema:{account:{type:"address"}},valueSchema:{value:{type:"uint256"}}},SeasonPass_Balances:{namespace:SEASON_PASS_NAMESPACE,name:"Balances",tableId:SeasonPassBalancesTableId,keySchema:{account:{type:"address"}},valueSchema:{value:{type:"uint256"}}},SkyKey_Balances:{namespace:"SkyKey",name:"Balances",tableId:SkyKeyBalancesTableId,keySchema:{account:{type:"address"}},valueSchema:{value:{type:"uint256"}}},UserDelegationControl:{namespace:"",name:"UserDelegationControl",tableId:UserDelegationControlTableId,keySchema:{delegator:{type:"address"},delegatee:{type:"address"}},valueSchema:{delegationControlId:{type:"bytes32"}}},SystemboundDelegations:{namespace:"",name:"SystemboundDelegations",tableId:SystemboundDelegationsTableId,keySchema:{delegator:{type:"address"},delegatee:{type:"address"},systemId:{type:"bytes32"}},valueSchema:{availableCalls:{type:"uint256"}}}},addressToEntityID=cr=>w$9({address:"address"},{address:cr});async function setupNetwork(cr){const ar={chain:cr.chain,transport:Dr(fallback([webSocket(),http()],{retryCount:0})),pollingInterval:250},dr=createPublicClient(ar),fr=[...createSyncFilters(cr.matchEntity),...syncFilters],{components:hr,latestBlock$:pr,storedBlockLogs$:mr}=await Oe$3({world,config:mudConfig,address:cr.worldAddress,publicClient:dr,indexerUrl:cr.indexerUrl,startBlock:cr.initialBlockNumber>0n?BigInt(cr.initialBlockNumber):void 0,filters:fr,tables}),gr=createClock(cr.clock);world.registerDisposer(()=>gr.dispose());const yr=createPublicClient({...ar,transport:http(),pollingInterval:250}),xr=createWaitForTransaction({storedBlockLogs$:mr,client:yr});let wr=2e3;const br=Tr=>{wr=Tr},Sr=()=>wr;pr.pipe(map$1(Tr=>{const Br=Math.ceil(Sr()/2/1e3)*1e3;return Number(Tr.timestamp)*1e3+Br}),filter$2(Tr=>Tr!==gr.lastUpdateTime),filter$2(Tr=>Tr!==gr.currentTime)).subscribe(gr.update);const vr=ge$2(cr.privateKey),Er=createWalletClient({...ar,account:vr}),Ar=new Subject,_r=v$6({address:cr.worldAddress,abi:IWorldAbi,publicClient:dr,walletClient:Er,onWrite:Tr=>{Ar.next(Tr);const{writes:Br}=useStore.getState();useStore.setState({writes:[...Br,Tr]})}}),Cr=async Tr=>{if(!cr.useBurner)if(Tr){if(window.ethereum&&window.ethereum.providers&&window.ethereum.providers.length>1){const jr=window.ethereum.providers.find(Ur=>Ur.isMetaMask);jr&&(window.ethereum=jr)}if(!window.ethereum){console.error("No ethereum provider found during wallet initialisation.");return}const Br=createWalletClient({chain:cr.chain,transport:custom(window.ethereum),account:toAccount(Tr)}),Fr=v$6({address:cr.worldAddress,abi:IWorldAbi,publicClient:dr,walletClient:Br,onWrite:jr=>{const{writes:Ur}=useStore.getState();useStore.setState({writes:[...Ur,jr]})}});useStore.setState({externalWalletClient:Br,externalWorldContract:Fr})}else useStore.setState({externalWalletClient:null,externalWorldContract:null})};if(cr.useBurner){const Tr=Er,Br=_r;useStore.setState({externalWalletClient:Tr,externalWorldContract:Br})}const{chain:kr}=dr,Rr={...kr};Rr.fees&&delete Rr.fees;const{chains:Ir}=configureChains([Rr],[publicProvider()]),Nr=connectorsForWallets([{groupName:"Recommended",wallets:[metaMaskWallet({projectId:"YOUR_PROJECT_ID",chains:Ir})]}]),Pr=createConfig({autoConnect:!0,connectors:Nr,publicClient:dr});return{world,components:hr,playerEntity:w$9({address:"address"},{address:Er.account.address}),publicClient:dr,walletClient:Er,waitForTransaction:xr,worldContract:_r,networkConfig:cr,matchEntity:cr.matchEntity,clock:gr,initialiseWallet:Cr,write$:Ar.asObservable().pipe(share()),latestBlock$:pr,storedBlockLogs$:mr,chains:Ir,wagmiConfig:Pr,responseTime:{updateMeanResponseTime:br,getMeanResponseTime:Sr}}}async function setup(cr){const ar=await setupNetwork(cr),dr=createClientComponents(ar);return{network:ar,components:dr}}var bn$1={exports:{}};bn$1.exports;(function(cr){(function(ar,dr){function fr(Hr,Or){if(!Hr)throw new Error(Or||"Assertion failed")}function hr(Hr,Or){Hr.super_=Or;var Mr=function(){};Mr.prototype=Or.prototype,Hr.prototype=new Mr,Hr.prototype.constructor=Hr}function pr(Hr,Or,Mr){if(pr.isBN(Hr))return Hr;this.negative=0,this.words=null,this.length=0,this.red=null,Hr!==null&&((Or==="le"||Or==="be")&&(Mr=Or,Or=10),this._init(Hr||0,Or||10,Mr||"be"))}typeof ar=="object"?ar.exports=pr:dr.BN=pr,pr.BN=pr,pr.wordSize=26;var mr;try{typeof window<"u"&&typeof window.Buffer<"u"?mr=window.Buffer:mr=require$$1$1.Buffer}catch{}pr.isBN=function(Or){return Or instanceof pr?!0:Or!==null&&typeof Or=="object"&&Or.constructor.wordSize===pr.wordSize&&Array.isArray(Or.words)},pr.max=function(Or,Mr){return Or.cmp(Mr)>0?Or:Mr},pr.min=function(Or,Mr){return Or.cmp(Mr)<0?Or:Mr},pr.prototype._init=function(Or,Mr,Lr){if(typeof Or=="number")return this._initNumber(Or,Mr,Lr);if(typeof Or=="object")return this._initArray(Or,Mr,Lr);Mr==="hex"&&(Mr=16),fr(Mr===(Mr|0)&&Mr>=2&&Mr<=36),Or=Or.toString().replace(/\s+/g,"");var Vr=0;Or[0]==="-"&&(Vr++,this.negative=1),Vr<Or.length&&(Mr===16?this._parseHex(Or,Vr,Lr):(this._parseBase(Or,Mr,Vr),Lr==="le"&&this._initArray(this.toArray(),Mr,Lr)))},pr.prototype._initNumber=function(Or,Mr,Lr){Or<0&&(this.negative=1,Or=-Or),Or<67108864?(this.words=[Or&67108863],this.length=1):Or<4503599627370496?(this.words=[Or&67108863,Or/67108864&67108863],this.length=2):(fr(Or<9007199254740992),this.words=[Or&67108863,Or/67108864&67108863,1],this.length=3),Lr==="le"&&this._initArray(this.toArray(),Mr,Lr)},pr.prototype._initArray=function(Or,Mr,Lr){if(fr(typeof Or.length=="number"),Or.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Or.length/3),this.words=new Array(this.length);for(var Vr=0;Vr<this.length;Vr++)this.words[Vr]=0;var Jr,es,ns=0;if(Lr==="be")for(Vr=Or.length-1,Jr=0;Vr>=0;Vr-=3)es=Or[Vr]|Or[Vr-1]<<8|Or[Vr-2]<<16,this.words[Jr]|=es<<ns&67108863,this.words[Jr+1]=es>>>26-ns&67108863,ns+=24,ns>=26&&(ns-=26,Jr++);else if(Lr==="le")for(Vr=0,Jr=0;Vr<Or.length;Vr+=3)es=Or[Vr]|Or[Vr+1]<<8|Or[Vr+2]<<16,this.words[Jr]|=es<<ns&67108863,this.words[Jr+1]=es>>>26-ns&67108863,ns+=24,ns>=26&&(ns-=26,Jr++);return this._strip()};function gr(Hr,Or){var Mr=Hr.charCodeAt(Or);if(Mr>=48&&Mr<=57)return Mr-48;if(Mr>=65&&Mr<=70)return Mr-55;if(Mr>=97&&Mr<=102)return Mr-87;fr(!1,"Invalid character in "+Hr)}function yr(Hr,Or,Mr){var Lr=gr(Hr,Mr);return Mr-1>=Or&&(Lr|=gr(Hr,Mr-1)<<4),Lr}pr.prototype._parseHex=function(Or,Mr,Lr){this.length=Math.ceil((Or.length-Mr)/6),this.words=new Array(this.length);for(var Vr=0;Vr<this.length;Vr++)this.words[Vr]=0;var Jr=0,es=0,ns;if(Lr==="be")for(Vr=Or.length-1;Vr>=Mr;Vr-=2)ns=yr(Or,Mr,Vr)<<Jr,this.words[es]|=ns&67108863,Jr>=18?(Jr-=18,es+=1,this.words[es]|=ns>>>26):Jr+=8;else{var Qr=Or.length-Mr;for(Vr=Qr%2===0?Mr+1:Mr;Vr<Or.length;Vr+=2)ns=yr(Or,Mr,Vr)<<Jr,this.words[es]|=ns&67108863,Jr>=18?(Jr-=18,es+=1,this.words[es]|=ns>>>26):Jr+=8}this._strip()};function xr(Hr,Or,Mr,Lr){for(var Vr=0,Jr=0,es=Math.min(Hr.length,Mr),ns=Or;ns<es;ns++){var Qr=Hr.charCodeAt(ns)-48;Vr*=Lr,Qr>=49?Jr=Qr-49+10:Qr>=17?Jr=Qr-17+10:Jr=Qr,fr(Qr>=0&&Jr<Lr,"Invalid character"),Vr+=Jr}return Vr}pr.prototype._parseBase=function(Or,Mr,Lr){this.words=[0],this.length=1;for(var Vr=0,Jr=1;Jr<=67108863;Jr*=Mr)Vr++;Vr--,Jr=Jr/Mr|0;for(var es=Or.length-Lr,ns=es%Vr,Qr=Math.min(es,es-ns)+Lr,zr=0,Wr=Lr;Wr<Qr;Wr+=Vr)zr=xr(Or,Wr,Wr+Vr,Mr),this.imuln(Jr),this.words[0]+zr<67108864?this.words[0]+=zr:this._iaddn(zr);if(ns!==0){var ss=1;for(zr=xr(Or,Wr,Or.length,Mr),Wr=0;Wr<ns;Wr++)ss*=Mr;this.imuln(ss),this.words[0]+zr<67108864?this.words[0]+=zr:this._iaddn(zr)}this._strip()},pr.prototype.copy=function(Or){Or.words=new Array(this.length);for(var Mr=0;Mr<this.length;Mr++)Or.words[Mr]=this.words[Mr];Or.length=this.length,Or.negative=this.negative,Or.red=this.red};function wr(Hr,Or){Hr.words=Or.words,Hr.length=Or.length,Hr.negative=Or.negative,Hr.red=Or.red}if(pr.prototype._move=function(Or){wr(Or,this)},pr.prototype.clone=function(){var Or=new pr(null);return this.copy(Or),Or},pr.prototype._expand=function(Or){for(;this.length<Or;)this.words[this.length++]=0;return this},pr.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},pr.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{pr.prototype[Symbol.for("nodejs.util.inspect.custom")]=br}catch{pr.prototype.inspect=br}else pr.prototype.inspect=br;function br(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var Sr=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],vr=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Er=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];pr.prototype.toString=function(Or,Mr){Or=Or||10,Mr=Mr|0||1;var Lr;if(Or===16||Or==="hex"){Lr="";for(var Vr=0,Jr=0,es=0;es<this.length;es++){var ns=this.words[es],Qr=((ns<<Vr|Jr)&16777215).toString(16);Jr=ns>>>24-Vr&16777215,Vr+=2,Vr>=26&&(Vr-=26,es--),Jr!==0||es!==this.length-1?Lr=Sr[6-Qr.length]+Qr+Lr:Lr=Qr+Lr}for(Jr!==0&&(Lr=Jr.toString(16)+Lr);Lr.length%Mr!==0;)Lr="0"+Lr;return this.negative!==0&&(Lr="-"+Lr),Lr}if(Or===(Or|0)&&Or>=2&&Or<=36){var zr=vr[Or],Wr=Er[Or];Lr="";var ss=this.clone();for(ss.negative=0;!ss.isZero();){var Xr=ss.modrn(Wr).toString(Or);ss=ss.idivn(Wr),ss.isZero()?Lr=Xr+Lr:Lr=Sr[zr-Xr.length]+Xr+Lr}for(this.isZero()&&(Lr="0"+Lr);Lr.length%Mr!==0;)Lr="0"+Lr;return this.negative!==0&&(Lr="-"+Lr),Lr}fr(!1,"Base should be between 2 and 36")},pr.prototype.toNumber=function(){var Or=this.words[0];return this.length===2?Or+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Or+=4503599627370496+this.words[1]*67108864:this.length>2&&fr(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Or:Or},pr.prototype.toJSON=function(){return this.toString(16,2)},mr&&(pr.prototype.toBuffer=function(Or,Mr){return this.toArrayLike(mr,Or,Mr)}),pr.prototype.toArray=function(Or,Mr){return this.toArrayLike(Array,Or,Mr)};var Ar=function(Or,Mr){return Or.allocUnsafe?Or.allocUnsafe(Mr):new Or(Mr)};pr.prototype.toArrayLike=function(Or,Mr,Lr){this._strip();var Vr=this.byteLength(),Jr=Lr||Math.max(1,Vr);fr(Vr<=Jr,"byte array longer than desired length"),fr(Jr>0,"Requested array length <= 0");var es=Ar(Or,Jr),ns=Mr==="le"?"LE":"BE";return this["_toArrayLike"+ns](es,Vr),es},pr.prototype._toArrayLikeLE=function(Or,Mr){for(var Lr=0,Vr=0,Jr=0,es=0;Jr<this.length;Jr++){var ns=this.words[Jr]<<es|Vr;Or[Lr++]=ns&255,Lr<Or.length&&(Or[Lr++]=ns>>8&255),Lr<Or.length&&(Or[Lr++]=ns>>16&255),es===6?(Lr<Or.length&&(Or[Lr++]=ns>>24&255),Vr=0,es=0):(Vr=ns>>>24,es+=2)}if(Lr<Or.length)for(Or[Lr++]=Vr;Lr<Or.length;)Or[Lr++]=0},pr.prototype._toArrayLikeBE=function(Or,Mr){for(var Lr=Or.length-1,Vr=0,Jr=0,es=0;Jr<this.length;Jr++){var ns=this.words[Jr]<<es|Vr;Or[Lr--]=ns&255,Lr>=0&&(Or[Lr--]=ns>>8&255),Lr>=0&&(Or[Lr--]=ns>>16&255),es===6?(Lr>=0&&(Or[Lr--]=ns>>24&255),Vr=0,es=0):(Vr=ns>>>24,es+=2)}if(Lr>=0)for(Or[Lr--]=Vr;Lr>=0;)Or[Lr--]=0},Math.clz32?pr.prototype._countBits=function(Or){return 32-Math.clz32(Or)}:pr.prototype._countBits=function(Or){var Mr=Or,Lr=0;return Mr>=4096&&(Lr+=13,Mr>>>=13),Mr>=64&&(Lr+=7,Mr>>>=7),Mr>=8&&(Lr+=4,Mr>>>=4),Mr>=2&&(Lr+=2,Mr>>>=2),Lr+Mr},pr.prototype._zeroBits=function(Or){if(Or===0)return 26;var Mr=Or,Lr=0;return Mr&8191||(Lr+=13,Mr>>>=13),Mr&127||(Lr+=7,Mr>>>=7),Mr&15||(Lr+=4,Mr>>>=4),Mr&3||(Lr+=2,Mr>>>=2),Mr&1||Lr++,Lr},pr.prototype.bitLength=function(){var Or=this.words[this.length-1],Mr=this._countBits(Or);return(this.length-1)*26+Mr};function _r(Hr){for(var Or=new Array(Hr.bitLength()),Mr=0;Mr<Or.length;Mr++){var Lr=Mr/26|0,Vr=Mr%26;Or[Mr]=Hr.words[Lr]>>>Vr&1}return Or}pr.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Or=0,Mr=0;Mr<this.length;Mr++){var Lr=this._zeroBits(this.words[Mr]);if(Or+=Lr,Lr!==26)break}return Or},pr.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},pr.prototype.toTwos=function(Or){return this.negative!==0?this.abs().inotn(Or).iaddn(1):this.clone()},pr.prototype.fromTwos=function(Or){return this.testn(Or-1)?this.notn(Or).iaddn(1).ineg():this.clone()},pr.prototype.isNeg=function(){return this.negative!==0},pr.prototype.neg=function(){return this.clone().ineg()},pr.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},pr.prototype.iuor=function(Or){for(;this.length<Or.length;)this.words[this.length++]=0;for(var Mr=0;Mr<Or.length;Mr++)this.words[Mr]=this.words[Mr]|Or.words[Mr];return this._strip()},pr.prototype.ior=function(Or){return fr((this.negative|Or.negative)===0),this.iuor(Or)},pr.prototype.or=function(Or){return this.length>Or.length?this.clone().ior(Or):Or.clone().ior(this)},pr.prototype.uor=function(Or){return this.length>Or.length?this.clone().iuor(Or):Or.clone().iuor(this)},pr.prototype.iuand=function(Or){var Mr;this.length>Or.length?Mr=Or:Mr=this;for(var Lr=0;Lr<Mr.length;Lr++)this.words[Lr]=this.words[Lr]&Or.words[Lr];return this.length=Mr.length,this._strip()},pr.prototype.iand=function(Or){return fr((this.negative|Or.negative)===0),this.iuand(Or)},pr.prototype.and=function(Or){return this.length>Or.length?this.clone().iand(Or):Or.clone().iand(this)},pr.prototype.uand=function(Or){return this.length>Or.length?this.clone().iuand(Or):Or.clone().iuand(this)},pr.prototype.iuxor=function(Or){var Mr,Lr;this.length>Or.length?(Mr=this,Lr=Or):(Mr=Or,Lr=this);for(var Vr=0;Vr<Lr.length;Vr++)this.words[Vr]=Mr.words[Vr]^Lr.words[Vr];if(this!==Mr)for(;Vr<Mr.length;Vr++)this.words[Vr]=Mr.words[Vr];return this.length=Mr.length,this._strip()},pr.prototype.ixor=function(Or){return fr((this.negative|Or.negative)===0),this.iuxor(Or)},pr.prototype.xor=function(Or){return this.length>Or.length?this.clone().ixor(Or):Or.clone().ixor(this)},pr.prototype.uxor=function(Or){return this.length>Or.length?this.clone().iuxor(Or):Or.clone().iuxor(this)},pr.prototype.inotn=function(Or){fr(typeof Or=="number"&&Or>=0);var Mr=Math.ceil(Or/26)|0,Lr=Or%26;this._expand(Mr),Lr>0&&Mr--;for(var Vr=0;Vr<Mr;Vr++)this.words[Vr]=~this.words[Vr]&67108863;return Lr>0&&(this.words[Vr]=~this.words[Vr]&67108863>>26-Lr),this._strip()},pr.prototype.notn=function(Or){return this.clone().inotn(Or)},pr.prototype.setn=function(Or,Mr){fr(typeof Or=="number"&&Or>=0);var Lr=Or/26|0,Vr=Or%26;return this._expand(Lr+1),Mr?this.words[Lr]=this.words[Lr]|1<<Vr:this.words[Lr]=this.words[Lr]&~(1<<Vr),this._strip()},pr.prototype.iadd=function(Or){var Mr;if(this.negative!==0&&Or.negative===0)return this.negative=0,Mr=this.isub(Or),this.negative^=1,this._normSign();if(this.negative===0&&Or.negative!==0)return Or.negative=0,Mr=this.isub(Or),Or.negative=1,Mr._normSign();var Lr,Vr;this.length>Or.length?(Lr=this,Vr=Or):(Lr=Or,Vr=this);for(var Jr=0,es=0;es<Vr.length;es++)Mr=(Lr.words[es]|0)+(Vr.words[es]|0)+Jr,this.words[es]=Mr&67108863,Jr=Mr>>>26;for(;Jr!==0&&es<Lr.length;es++)Mr=(Lr.words[es]|0)+Jr,this.words[es]=Mr&67108863,Jr=Mr>>>26;if(this.length=Lr.length,Jr!==0)this.words[this.length]=Jr,this.length++;else if(Lr!==this)for(;es<Lr.length;es++)this.words[es]=Lr.words[es];return this},pr.prototype.add=function(Or){var Mr;return Or.negative!==0&&this.negative===0?(Or.negative=0,Mr=this.sub(Or),Or.negative^=1,Mr):Or.negative===0&&this.negative!==0?(this.negative=0,Mr=Or.sub(this),this.negative=1,Mr):this.length>Or.length?this.clone().iadd(Or):Or.clone().iadd(this)},pr.prototype.isub=function(Or){if(Or.negative!==0){Or.negative=0;var Mr=this.iadd(Or);return Or.negative=1,Mr._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Or),this.negative=1,this._normSign();var Lr=this.cmp(Or);if(Lr===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Vr,Jr;Lr>0?(Vr=this,Jr=Or):(Vr=Or,Jr=this);for(var es=0,ns=0;ns<Jr.length;ns++)Mr=(Vr.words[ns]|0)-(Jr.words[ns]|0)+es,es=Mr>>26,this.words[ns]=Mr&67108863;for(;es!==0&&ns<Vr.length;ns++)Mr=(Vr.words[ns]|0)+es,es=Mr>>26,this.words[ns]=Mr&67108863;if(es===0&&ns<Vr.length&&Vr!==this)for(;ns<Vr.length;ns++)this.words[ns]=Vr.words[ns];return this.length=Math.max(this.length,ns),Vr!==this&&(this.negative=1),this._strip()},pr.prototype.sub=function(Or){return this.clone().isub(Or)};function Cr(Hr,Or,Mr){Mr.negative=Or.negative^Hr.negative;var Lr=Hr.length+Or.length|0;Mr.length=Lr,Lr=Lr-1|0;var Vr=Hr.words[0]|0,Jr=Or.words[0]|0,es=Vr*Jr,ns=es&67108863,Qr=es/67108864|0;Mr.words[0]=ns;for(var zr=1;zr<Lr;zr++){for(var Wr=Qr>>>26,ss=Qr&67108863,Xr=Math.min(zr,Or.length-1),ts=Math.max(0,zr-Hr.length+1);ts<=Xr;ts++){var fs=zr-ts|0;Vr=Hr.words[fs]|0,Jr=Or.words[ts]|0,es=Vr*Jr+ss,Wr+=es/67108864|0,ss=es&67108863}Mr.words[zr]=ss|0,Qr=Wr|0}return Qr!==0?Mr.words[zr]=Qr|0:Mr.length--,Mr._strip()}var kr=function(Or,Mr,Lr){var Vr=Or.words,Jr=Mr.words,es=Lr.words,ns=0,Qr,zr,Wr,ss=Vr[0]|0,Xr=ss&8191,ts=ss>>>13,fs=Vr[1]|0,rs=fs&8191,as=fs>>>13,ps=Vr[2]|0,xs=ps&8191,Ss=ps>>>13,Ns=Vr[3]|0,Ts=Ns&8191,os=Ns>>>13,bs=Vr[4]|0,ws=bs&8191,As=bs>>>13,gs=Vr[5]|0,vs=gs&8191,Ps=gs>>>13,Os=Vr[6]|0,Ms=Os&8191,zs=Os>>>13,Hs=Vr[7]|0,Cs=Hs&8191,ls=Hs>>>13,Kr=Vr[8]|0,Zr=Kr&8191,hs=Kr>>>13,ys=Vr[9]|0,Es=ys&8191,Is=ys>>>13,$s=Jr[0]|0,Rs=$s&8191,Bs=$s>>>13,Ds=Jr[1]|0,Ls=Ds&8191,Fs=Ds>>>13,js=Jr[2]|0,Us=js&8191,Vs=js>>>13,ni=Jr[3]|0,Js=ni&8191,Ys=ni>>>13,Xs=Jr[4]|0,Qs=Xs&8191,ai=Xs>>>13,hi=Jr[5]|0,li=hi&8191,fi=hi>>>13,gi=Jr[6]|0,ui=gi&8191,pi=gi>>>13,wi=Jr[7]|0,ei=wi&8191,ci=wi>>>13,ii=Jr[8]|0,si=ii&8191,di=ii>>>13,xi=Jr[9]|0,ri=xi&8191,mi=xi>>>13;Lr.negative=Or.negative^Mr.negative,Lr.length=19,Qr=Math.imul(Xr,Rs),zr=Math.imul(Xr,Bs),zr=zr+Math.imul(ts,Rs)|0,Wr=Math.imul(ts,Bs);var Ai=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Ai>>>26)|0,Ai&=67108863,Qr=Math.imul(rs,Rs),zr=Math.imul(rs,Bs),zr=zr+Math.imul(as,Rs)|0,Wr=Math.imul(as,Bs),Qr=Qr+Math.imul(Xr,Ls)|0,zr=zr+Math.imul(Xr,Fs)|0,zr=zr+Math.imul(ts,Ls)|0,Wr=Wr+Math.imul(ts,Fs)|0;var Ti=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,Qr=Math.imul(xs,Rs),zr=Math.imul(xs,Bs),zr=zr+Math.imul(Ss,Rs)|0,Wr=Math.imul(Ss,Bs),Qr=Qr+Math.imul(rs,Ls)|0,zr=zr+Math.imul(rs,Fs)|0,zr=zr+Math.imul(as,Ls)|0,Wr=Wr+Math.imul(as,Fs)|0,Qr=Qr+Math.imul(Xr,Us)|0,zr=zr+Math.imul(Xr,Vs)|0,zr=zr+Math.imul(ts,Us)|0,Wr=Wr+Math.imul(ts,Vs)|0;var Ri=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,Qr=Math.imul(Ts,Rs),zr=Math.imul(Ts,Bs),zr=zr+Math.imul(os,Rs)|0,Wr=Math.imul(os,Bs),Qr=Qr+Math.imul(xs,Ls)|0,zr=zr+Math.imul(xs,Fs)|0,zr=zr+Math.imul(Ss,Ls)|0,Wr=Wr+Math.imul(Ss,Fs)|0,Qr=Qr+Math.imul(rs,Us)|0,zr=zr+Math.imul(rs,Vs)|0,zr=zr+Math.imul(as,Us)|0,Wr=Wr+Math.imul(as,Vs)|0,Qr=Qr+Math.imul(Xr,Js)|0,zr=zr+Math.imul(Xr,Ys)|0,zr=zr+Math.imul(ts,Js)|0,Wr=Wr+Math.imul(ts,Ys)|0;var Ni=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,Qr=Math.imul(ws,Rs),zr=Math.imul(ws,Bs),zr=zr+Math.imul(As,Rs)|0,Wr=Math.imul(As,Bs),Qr=Qr+Math.imul(Ts,Ls)|0,zr=zr+Math.imul(Ts,Fs)|0,zr=zr+Math.imul(os,Ls)|0,Wr=Wr+Math.imul(os,Fs)|0,Qr=Qr+Math.imul(xs,Us)|0,zr=zr+Math.imul(xs,Vs)|0,zr=zr+Math.imul(Ss,Us)|0,Wr=Wr+Math.imul(Ss,Vs)|0,Qr=Qr+Math.imul(rs,Js)|0,zr=zr+Math.imul(rs,Ys)|0,zr=zr+Math.imul(as,Js)|0,Wr=Wr+Math.imul(as,Ys)|0,Qr=Qr+Math.imul(Xr,Qs)|0,zr=zr+Math.imul(Xr,ai)|0,zr=zr+Math.imul(ts,Qs)|0,Wr=Wr+Math.imul(ts,ai)|0;var bi=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(bi>>>26)|0,bi&=67108863,Qr=Math.imul(vs,Rs),zr=Math.imul(vs,Bs),zr=zr+Math.imul(Ps,Rs)|0,Wr=Math.imul(Ps,Bs),Qr=Qr+Math.imul(ws,Ls)|0,zr=zr+Math.imul(ws,Fs)|0,zr=zr+Math.imul(As,Ls)|0,Wr=Wr+Math.imul(As,Fs)|0,Qr=Qr+Math.imul(Ts,Us)|0,zr=zr+Math.imul(Ts,Vs)|0,zr=zr+Math.imul(os,Us)|0,Wr=Wr+Math.imul(os,Vs)|0,Qr=Qr+Math.imul(xs,Js)|0,zr=zr+Math.imul(xs,Ys)|0,zr=zr+Math.imul(Ss,Js)|0,Wr=Wr+Math.imul(Ss,Ys)|0,Qr=Qr+Math.imul(rs,Qs)|0,zr=zr+Math.imul(rs,ai)|0,zr=zr+Math.imul(as,Qs)|0,Wr=Wr+Math.imul(as,ai)|0,Qr=Qr+Math.imul(Xr,li)|0,zr=zr+Math.imul(Xr,fi)|0,zr=zr+Math.imul(ts,li)|0,Wr=Wr+Math.imul(ts,fi)|0;var zi=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(zi>>>26)|0,zi&=67108863,Qr=Math.imul(Ms,Rs),zr=Math.imul(Ms,Bs),zr=zr+Math.imul(zs,Rs)|0,Wr=Math.imul(zs,Bs),Qr=Qr+Math.imul(vs,Ls)|0,zr=zr+Math.imul(vs,Fs)|0,zr=zr+Math.imul(Ps,Ls)|0,Wr=Wr+Math.imul(Ps,Fs)|0,Qr=Qr+Math.imul(ws,Us)|0,zr=zr+Math.imul(ws,Vs)|0,zr=zr+Math.imul(As,Us)|0,Wr=Wr+Math.imul(As,Vs)|0,Qr=Qr+Math.imul(Ts,Js)|0,zr=zr+Math.imul(Ts,Ys)|0,zr=zr+Math.imul(os,Js)|0,Wr=Wr+Math.imul(os,Ys)|0,Qr=Qr+Math.imul(xs,Qs)|0,zr=zr+Math.imul(xs,ai)|0,zr=zr+Math.imul(Ss,Qs)|0,Wr=Wr+Math.imul(Ss,ai)|0,Qr=Qr+Math.imul(rs,li)|0,zr=zr+Math.imul(rs,fi)|0,zr=zr+Math.imul(as,li)|0,Wr=Wr+Math.imul(as,fi)|0,Qr=Qr+Math.imul(Xr,ui)|0,zr=zr+Math.imul(Xr,pi)|0,zr=zr+Math.imul(ts,ui)|0,Wr=Wr+Math.imul(ts,pi)|0;var Qi=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Qi>>>26)|0,Qi&=67108863,Qr=Math.imul(Cs,Rs),zr=Math.imul(Cs,Bs),zr=zr+Math.imul(ls,Rs)|0,Wr=Math.imul(ls,Bs),Qr=Qr+Math.imul(Ms,Ls)|0,zr=zr+Math.imul(Ms,Fs)|0,zr=zr+Math.imul(zs,Ls)|0,Wr=Wr+Math.imul(zs,Fs)|0,Qr=Qr+Math.imul(vs,Us)|0,zr=zr+Math.imul(vs,Vs)|0,zr=zr+Math.imul(Ps,Us)|0,Wr=Wr+Math.imul(Ps,Vs)|0,Qr=Qr+Math.imul(ws,Js)|0,zr=zr+Math.imul(ws,Ys)|0,zr=zr+Math.imul(As,Js)|0,Wr=Wr+Math.imul(As,Ys)|0,Qr=Qr+Math.imul(Ts,Qs)|0,zr=zr+Math.imul(Ts,ai)|0,zr=zr+Math.imul(os,Qs)|0,Wr=Wr+Math.imul(os,ai)|0,Qr=Qr+Math.imul(xs,li)|0,zr=zr+Math.imul(xs,fi)|0,zr=zr+Math.imul(Ss,li)|0,Wr=Wr+Math.imul(Ss,fi)|0,Qr=Qr+Math.imul(rs,ui)|0,zr=zr+Math.imul(rs,pi)|0,zr=zr+Math.imul(as,ui)|0,Wr=Wr+Math.imul(as,pi)|0,Qr=Qr+Math.imul(Xr,ei)|0,zr=zr+Math.imul(Xr,ci)|0,zr=zr+Math.imul(ts,ei)|0,Wr=Wr+Math.imul(ts,ci)|0;var Ki=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,Qr=Math.imul(Zr,Rs),zr=Math.imul(Zr,Bs),zr=zr+Math.imul(hs,Rs)|0,Wr=Math.imul(hs,Bs),Qr=Qr+Math.imul(Cs,Ls)|0,zr=zr+Math.imul(Cs,Fs)|0,zr=zr+Math.imul(ls,Ls)|0,Wr=Wr+Math.imul(ls,Fs)|0,Qr=Qr+Math.imul(Ms,Us)|0,zr=zr+Math.imul(Ms,Vs)|0,zr=zr+Math.imul(zs,Us)|0,Wr=Wr+Math.imul(zs,Vs)|0,Qr=Qr+Math.imul(vs,Js)|0,zr=zr+Math.imul(vs,Ys)|0,zr=zr+Math.imul(Ps,Js)|0,Wr=Wr+Math.imul(Ps,Ys)|0,Qr=Qr+Math.imul(ws,Qs)|0,zr=zr+Math.imul(ws,ai)|0,zr=zr+Math.imul(As,Qs)|0,Wr=Wr+Math.imul(As,ai)|0,Qr=Qr+Math.imul(Ts,li)|0,zr=zr+Math.imul(Ts,fi)|0,zr=zr+Math.imul(os,li)|0,Wr=Wr+Math.imul(os,fi)|0,Qr=Qr+Math.imul(xs,ui)|0,zr=zr+Math.imul(xs,pi)|0,zr=zr+Math.imul(Ss,ui)|0,Wr=Wr+Math.imul(Ss,pi)|0,Qr=Qr+Math.imul(rs,ei)|0,zr=zr+Math.imul(rs,ci)|0,zr=zr+Math.imul(as,ei)|0,Wr=Wr+Math.imul(as,ci)|0,Qr=Qr+Math.imul(Xr,si)|0,zr=zr+Math.imul(Xr,di)|0,zr=zr+Math.imul(ts,si)|0,Wr=Wr+Math.imul(ts,di)|0;var Ji=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,Qr=Math.imul(Es,Rs),zr=Math.imul(Es,Bs),zr=zr+Math.imul(Is,Rs)|0,Wr=Math.imul(Is,Bs),Qr=Qr+Math.imul(Zr,Ls)|0,zr=zr+Math.imul(Zr,Fs)|0,zr=zr+Math.imul(hs,Ls)|0,Wr=Wr+Math.imul(hs,Fs)|0,Qr=Qr+Math.imul(Cs,Us)|0,zr=zr+Math.imul(Cs,Vs)|0,zr=zr+Math.imul(ls,Us)|0,Wr=Wr+Math.imul(ls,Vs)|0,Qr=Qr+Math.imul(Ms,Js)|0,zr=zr+Math.imul(Ms,Ys)|0,zr=zr+Math.imul(zs,Js)|0,Wr=Wr+Math.imul(zs,Ys)|0,Qr=Qr+Math.imul(vs,Qs)|0,zr=zr+Math.imul(vs,ai)|0,zr=zr+Math.imul(Ps,Qs)|0,Wr=Wr+Math.imul(Ps,ai)|0,Qr=Qr+Math.imul(ws,li)|0,zr=zr+Math.imul(ws,fi)|0,zr=zr+Math.imul(As,li)|0,Wr=Wr+Math.imul(As,fi)|0,Qr=Qr+Math.imul(Ts,ui)|0,zr=zr+Math.imul(Ts,pi)|0,zr=zr+Math.imul(os,ui)|0,Wr=Wr+Math.imul(os,pi)|0,Qr=Qr+Math.imul(xs,ei)|0,zr=zr+Math.imul(xs,ci)|0,zr=zr+Math.imul(Ss,ei)|0,Wr=Wr+Math.imul(Ss,ci)|0,Qr=Qr+Math.imul(rs,si)|0,zr=zr+Math.imul(rs,di)|0,zr=zr+Math.imul(as,si)|0,Wr=Wr+Math.imul(as,di)|0,Qr=Qr+Math.imul(Xr,ri)|0,zr=zr+Math.imul(Xr,mi)|0,zr=zr+Math.imul(ts,ri)|0,Wr=Wr+Math.imul(ts,mi)|0;var Xi=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,Qr=Math.imul(Es,Ls),zr=Math.imul(Es,Fs),zr=zr+Math.imul(Is,Ls)|0,Wr=Math.imul(Is,Fs),Qr=Qr+Math.imul(Zr,Us)|0,zr=zr+Math.imul(Zr,Vs)|0,zr=zr+Math.imul(hs,Us)|0,Wr=Wr+Math.imul(hs,Vs)|0,Qr=Qr+Math.imul(Cs,Js)|0,zr=zr+Math.imul(Cs,Ys)|0,zr=zr+Math.imul(ls,Js)|0,Wr=Wr+Math.imul(ls,Ys)|0,Qr=Qr+Math.imul(Ms,Qs)|0,zr=zr+Math.imul(Ms,ai)|0,zr=zr+Math.imul(zs,Qs)|0,Wr=Wr+Math.imul(zs,ai)|0,Qr=Qr+Math.imul(vs,li)|0,zr=zr+Math.imul(vs,fi)|0,zr=zr+Math.imul(Ps,li)|0,Wr=Wr+Math.imul(Ps,fi)|0,Qr=Qr+Math.imul(ws,ui)|0,zr=zr+Math.imul(ws,pi)|0,zr=zr+Math.imul(As,ui)|0,Wr=Wr+Math.imul(As,pi)|0,Qr=Qr+Math.imul(Ts,ei)|0,zr=zr+Math.imul(Ts,ci)|0,zr=zr+Math.imul(os,ei)|0,Wr=Wr+Math.imul(os,ci)|0,Qr=Qr+Math.imul(xs,si)|0,zr=zr+Math.imul(xs,di)|0,zr=zr+Math.imul(Ss,si)|0,Wr=Wr+Math.imul(Ss,di)|0,Qr=Qr+Math.imul(rs,ri)|0,zr=zr+Math.imul(rs,mi)|0,zr=zr+Math.imul(as,ri)|0,Wr=Wr+Math.imul(as,mi)|0;var Hi=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,Qr=Math.imul(Es,Us),zr=Math.imul(Es,Vs),zr=zr+Math.imul(Is,Us)|0,Wr=Math.imul(Is,Vs),Qr=Qr+Math.imul(Zr,Js)|0,zr=zr+Math.imul(Zr,Ys)|0,zr=zr+Math.imul(hs,Js)|0,Wr=Wr+Math.imul(hs,Ys)|0,Qr=Qr+Math.imul(Cs,Qs)|0,zr=zr+Math.imul(Cs,ai)|0,zr=zr+Math.imul(ls,Qs)|0,Wr=Wr+Math.imul(ls,ai)|0,Qr=Qr+Math.imul(Ms,li)|0,zr=zr+Math.imul(Ms,fi)|0,zr=zr+Math.imul(zs,li)|0,Wr=Wr+Math.imul(zs,fi)|0,Qr=Qr+Math.imul(vs,ui)|0,zr=zr+Math.imul(vs,pi)|0,zr=zr+Math.imul(Ps,ui)|0,Wr=Wr+Math.imul(Ps,pi)|0,Qr=Qr+Math.imul(ws,ei)|0,zr=zr+Math.imul(ws,ci)|0,zr=zr+Math.imul(As,ei)|0,Wr=Wr+Math.imul(As,ci)|0,Qr=Qr+Math.imul(Ts,si)|0,zr=zr+Math.imul(Ts,di)|0,zr=zr+Math.imul(os,si)|0,Wr=Wr+Math.imul(os,di)|0,Qr=Qr+Math.imul(xs,ri)|0,zr=zr+Math.imul(xs,mi)|0,zr=zr+Math.imul(Ss,ri)|0,Wr=Wr+Math.imul(Ss,mi)|0;var Di=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Di>>>26)|0,Di&=67108863,Qr=Math.imul(Es,Js),zr=Math.imul(Es,Ys),zr=zr+Math.imul(Is,Js)|0,Wr=Math.imul(Is,Ys),Qr=Qr+Math.imul(Zr,Qs)|0,zr=zr+Math.imul(Zr,ai)|0,zr=zr+Math.imul(hs,Qs)|0,Wr=Wr+Math.imul(hs,ai)|0,Qr=Qr+Math.imul(Cs,li)|0,zr=zr+Math.imul(Cs,fi)|0,zr=zr+Math.imul(ls,li)|0,Wr=Wr+Math.imul(ls,fi)|0,Qr=Qr+Math.imul(Ms,ui)|0,zr=zr+Math.imul(Ms,pi)|0,zr=zr+Math.imul(zs,ui)|0,Wr=Wr+Math.imul(zs,pi)|0,Qr=Qr+Math.imul(vs,ei)|0,zr=zr+Math.imul(vs,ci)|0,zr=zr+Math.imul(Ps,ei)|0,Wr=Wr+Math.imul(Ps,ci)|0,Qr=Qr+Math.imul(ws,si)|0,zr=zr+Math.imul(ws,di)|0,zr=zr+Math.imul(As,si)|0,Wr=Wr+Math.imul(As,di)|0,Qr=Qr+Math.imul(Ts,ri)|0,zr=zr+Math.imul(Ts,mi)|0,zr=zr+Math.imul(os,ri)|0,Wr=Wr+Math.imul(os,mi)|0;var Vi=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,Qr=Math.imul(Es,Qs),zr=Math.imul(Es,ai),zr=zr+Math.imul(Is,Qs)|0,Wr=Math.imul(Is,ai),Qr=Qr+Math.imul(Zr,li)|0,zr=zr+Math.imul(Zr,fi)|0,zr=zr+Math.imul(hs,li)|0,Wr=Wr+Math.imul(hs,fi)|0,Qr=Qr+Math.imul(Cs,ui)|0,zr=zr+Math.imul(Cs,pi)|0,zr=zr+Math.imul(ls,ui)|0,Wr=Wr+Math.imul(ls,pi)|0,Qr=Qr+Math.imul(Ms,ei)|0,zr=zr+Math.imul(Ms,ci)|0,zr=zr+Math.imul(zs,ei)|0,Wr=Wr+Math.imul(zs,ci)|0,Qr=Qr+Math.imul(vs,si)|0,zr=zr+Math.imul(vs,di)|0,zr=zr+Math.imul(Ps,si)|0,Wr=Wr+Math.imul(Ps,di)|0,Qr=Qr+Math.imul(ws,ri)|0,zr=zr+Math.imul(ws,mi)|0,zr=zr+Math.imul(As,ri)|0,Wr=Wr+Math.imul(As,mi)|0;var Gi=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,Qr=Math.imul(Es,li),zr=Math.imul(Es,fi),zr=zr+Math.imul(Is,li)|0,Wr=Math.imul(Is,fi),Qr=Qr+Math.imul(Zr,ui)|0,zr=zr+Math.imul(Zr,pi)|0,zr=zr+Math.imul(hs,ui)|0,Wr=Wr+Math.imul(hs,pi)|0,Qr=Qr+Math.imul(Cs,ei)|0,zr=zr+Math.imul(Cs,ci)|0,zr=zr+Math.imul(ls,ei)|0,Wr=Wr+Math.imul(ls,ci)|0,Qr=Qr+Math.imul(Ms,si)|0,zr=zr+Math.imul(Ms,di)|0,zr=zr+Math.imul(zs,si)|0,Wr=Wr+Math.imul(zs,di)|0,Qr=Qr+Math.imul(vs,ri)|0,zr=zr+Math.imul(vs,mi)|0,zr=zr+Math.imul(Ps,ri)|0,Wr=Wr+Math.imul(Ps,mi)|0;var ji=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(ji>>>26)|0,ji&=67108863,Qr=Math.imul(Es,ui),zr=Math.imul(Es,pi),zr=zr+Math.imul(Is,ui)|0,Wr=Math.imul(Is,pi),Qr=Qr+Math.imul(Zr,ei)|0,zr=zr+Math.imul(Zr,ci)|0,zr=zr+Math.imul(hs,ei)|0,Wr=Wr+Math.imul(hs,ci)|0,Qr=Qr+Math.imul(Cs,si)|0,zr=zr+Math.imul(Cs,di)|0,zr=zr+Math.imul(ls,si)|0,Wr=Wr+Math.imul(ls,di)|0,Qr=Qr+Math.imul(Ms,ri)|0,zr=zr+Math.imul(Ms,mi)|0,zr=zr+Math.imul(zs,ri)|0,Wr=Wr+Math.imul(zs,mi)|0;var qi=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(qi>>>26)|0,qi&=67108863,Qr=Math.imul(Es,ei),zr=Math.imul(Es,ci),zr=zr+Math.imul(Is,ei)|0,Wr=Math.imul(Is,ci),Qr=Qr+Math.imul(Zr,si)|0,zr=zr+Math.imul(Zr,di)|0,zr=zr+Math.imul(hs,si)|0,Wr=Wr+Math.imul(hs,di)|0,Qr=Qr+Math.imul(Cs,ri)|0,zr=zr+Math.imul(Cs,mi)|0,zr=zr+Math.imul(ls,ri)|0,Wr=Wr+Math.imul(ls,mi)|0;var Li=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Li>>>26)|0,Li&=67108863,Qr=Math.imul(Es,si),zr=Math.imul(Es,di),zr=zr+Math.imul(Is,si)|0,Wr=Math.imul(Is,di),Qr=Qr+Math.imul(Zr,ri)|0,zr=zr+Math.imul(Zr,mi)|0,zr=zr+Math.imul(hs,ri)|0,Wr=Wr+Math.imul(hs,mi)|0;var Zi=(ns+Qr|0)+((zr&8191)<<13)|0;ns=(Wr+(zr>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,Qr=Math.imul(Es,ri),zr=Math.imul(Es,mi),zr=zr+Math.imul(Is,ri)|0,Wr=Math.imul(Is,mi);var Wi=(ns+Qr|0)+((zr&8191)<<13)|0;return ns=(Wr+(zr>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,es[0]=Ai,es[1]=Ti,es[2]=Ri,es[3]=Ni,es[4]=bi,es[5]=zi,es[6]=Qi,es[7]=Ki,es[8]=Ji,es[9]=Xi,es[10]=Hi,es[11]=Di,es[12]=Vi,es[13]=Gi,es[14]=ji,es[15]=qi,es[16]=Li,es[17]=Zi,es[18]=Wi,ns!==0&&(es[19]=ns,Lr.length++),Lr};Math.imul||(kr=Cr);function Rr(Hr,Or,Mr){Mr.negative=Or.negative^Hr.negative,Mr.length=Hr.length+Or.length;for(var Lr=0,Vr=0,Jr=0;Jr<Mr.length-1;Jr++){var es=Vr;Vr=0;for(var ns=Lr&67108863,Qr=Math.min(Jr,Or.length-1),zr=Math.max(0,Jr-Hr.length+1);zr<=Qr;zr++){var Wr=Jr-zr,ss=Hr.words[Wr]|0,Xr=Or.words[zr]|0,ts=ss*Xr,fs=ts&67108863;es=es+(ts/67108864|0)|0,fs=fs+ns|0,ns=fs&67108863,es=es+(fs>>>26)|0,Vr+=es>>>26,es&=67108863}Mr.words[Jr]=ns,Lr=es,es=Vr}return Lr!==0?Mr.words[Jr]=Lr:Mr.length--,Mr._strip()}function Ir(Hr,Or,Mr){return Rr(Hr,Or,Mr)}pr.prototype.mulTo=function(Or,Mr){var Lr,Vr=this.length+Or.length;return this.length===10&&Or.length===10?Lr=kr(this,Or,Mr):Vr<63?Lr=Cr(this,Or,Mr):Vr<1024?Lr=Rr(this,Or,Mr):Lr=Ir(this,Or,Mr),Lr},pr.prototype.mul=function(Or){var Mr=new pr(null);return Mr.words=new Array(this.length+Or.length),this.mulTo(Or,Mr)},pr.prototype.mulf=function(Or){var Mr=new pr(null);return Mr.words=new Array(this.length+Or.length),Ir(this,Or,Mr)},pr.prototype.imul=function(Or){return this.clone().mulTo(Or,this)},pr.prototype.imuln=function(Or){var Mr=Or<0;Mr&&(Or=-Or),fr(typeof Or=="number"),fr(Or<67108864);for(var Lr=0,Vr=0;Vr<this.length;Vr++){var Jr=(this.words[Vr]|0)*Or,es=(Jr&67108863)+(Lr&67108863);Lr>>=26,Lr+=Jr/67108864|0,Lr+=es>>>26,this.words[Vr]=es&67108863}return Lr!==0&&(this.words[Vr]=Lr,this.length++),Mr?this.ineg():this},pr.prototype.muln=function(Or){return this.clone().imuln(Or)},pr.prototype.sqr=function(){return this.mul(this)},pr.prototype.isqr=function(){return this.imul(this.clone())},pr.prototype.pow=function(Or){var Mr=_r(Or);if(Mr.length===0)return new pr(1);for(var Lr=this,Vr=0;Vr<Mr.length&&Mr[Vr]===0;Vr++,Lr=Lr.sqr());if(++Vr<Mr.length)for(var Jr=Lr.sqr();Vr<Mr.length;Vr++,Jr=Jr.sqr())Mr[Vr]!==0&&(Lr=Lr.mul(Jr));return Lr},pr.prototype.iushln=function(Or){fr(typeof Or=="number"&&Or>=0);var Mr=Or%26,Lr=(Or-Mr)/26,Vr=67108863>>>26-Mr<<26-Mr,Jr;if(Mr!==0){var es=0;for(Jr=0;Jr<this.length;Jr++){var ns=this.words[Jr]&Vr,Qr=(this.words[Jr]|0)-ns<<Mr;this.words[Jr]=Qr|es,es=ns>>>26-Mr}es&&(this.words[Jr]=es,this.length++)}if(Lr!==0){for(Jr=this.length-1;Jr>=0;Jr--)this.words[Jr+Lr]=this.words[Jr];for(Jr=0;Jr<Lr;Jr++)this.words[Jr]=0;this.length+=Lr}return this._strip()},pr.prototype.ishln=function(Or){return fr(this.negative===0),this.iushln(Or)},pr.prototype.iushrn=function(Or,Mr,Lr){fr(typeof Or=="number"&&Or>=0);var Vr;Mr?Vr=(Mr-Mr%26)/26:Vr=0;var Jr=Or%26,es=Math.min((Or-Jr)/26,this.length),ns=67108863^67108863>>>Jr<<Jr,Qr=Lr;if(Vr-=es,Vr=Math.max(0,Vr),Qr){for(var zr=0;zr<es;zr++)Qr.words[zr]=this.words[zr];Qr.length=es}if(es!==0)if(this.length>es)for(this.length-=es,zr=0;zr<this.length;zr++)this.words[zr]=this.words[zr+es];else this.words[0]=0,this.length=1;var Wr=0;for(zr=this.length-1;zr>=0&&(Wr!==0||zr>=Vr);zr--){var ss=this.words[zr]|0;this.words[zr]=Wr<<26-Jr|ss>>>Jr,Wr=ss&ns}return Qr&&Wr!==0&&(Qr.words[Qr.length++]=Wr),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},pr.prototype.ishrn=function(Or,Mr,Lr){return fr(this.negative===0),this.iushrn(Or,Mr,Lr)},pr.prototype.shln=function(Or){return this.clone().ishln(Or)},pr.prototype.ushln=function(Or){return this.clone().iushln(Or)},pr.prototype.shrn=function(Or){return this.clone().ishrn(Or)},pr.prototype.ushrn=function(Or){return this.clone().iushrn(Or)},pr.prototype.testn=function(Or){fr(typeof Or=="number"&&Or>=0);var Mr=Or%26,Lr=(Or-Mr)/26,Vr=1<<Mr;if(this.length<=Lr)return!1;var Jr=this.words[Lr];return!!(Jr&Vr)},pr.prototype.imaskn=function(Or){fr(typeof Or=="number"&&Or>=0);var Mr=Or%26,Lr=(Or-Mr)/26;if(fr(this.negative===0,"imaskn works only with positive numbers"),this.length<=Lr)return this;if(Mr!==0&&Lr++,this.length=Math.min(Lr,this.length),Mr!==0){var Vr=67108863^67108863>>>Mr<<Mr;this.words[this.length-1]&=Vr}return this._strip()},pr.prototype.maskn=function(Or){return this.clone().imaskn(Or)},pr.prototype.iaddn=function(Or){return fr(typeof Or=="number"),fr(Or<67108864),Or<0?this.isubn(-Or):this.negative!==0?this.length===1&&(this.words[0]|0)<=Or?(this.words[0]=Or-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Or),this.negative=1,this):this._iaddn(Or)},pr.prototype._iaddn=function(Or){this.words[0]+=Or;for(var Mr=0;Mr<this.length&&this.words[Mr]>=67108864;Mr++)this.words[Mr]-=67108864,Mr===this.length-1?this.words[Mr+1]=1:this.words[Mr+1]++;return this.length=Math.max(this.length,Mr+1),this},pr.prototype.isubn=function(Or){if(fr(typeof Or=="number"),fr(Or<67108864),Or<0)return this.iaddn(-Or);if(this.negative!==0)return this.negative=0,this.iaddn(Or),this.negative=1,this;if(this.words[0]-=Or,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Mr=0;Mr<this.length&&this.words[Mr]<0;Mr++)this.words[Mr]+=67108864,this.words[Mr+1]-=1;return this._strip()},pr.prototype.addn=function(Or){return this.clone().iaddn(Or)},pr.prototype.subn=function(Or){return this.clone().isubn(Or)},pr.prototype.iabs=function(){return this.negative=0,this},pr.prototype.abs=function(){return this.clone().iabs()},pr.prototype._ishlnsubmul=function(Or,Mr,Lr){var Vr=Or.length+Lr,Jr;this._expand(Vr);var es,ns=0;for(Jr=0;Jr<Or.length;Jr++){es=(this.words[Jr+Lr]|0)+ns;var Qr=(Or.words[Jr]|0)*Mr;es-=Qr&67108863,ns=(es>>26)-(Qr/67108864|0),this.words[Jr+Lr]=es&67108863}for(;Jr<this.length-Lr;Jr++)es=(this.words[Jr+Lr]|0)+ns,ns=es>>26,this.words[Jr+Lr]=es&67108863;if(ns===0)return this._strip();for(fr(ns===-1),ns=0,Jr=0;Jr<this.length;Jr++)es=-(this.words[Jr]|0)+ns,ns=es>>26,this.words[Jr]=es&67108863;return this.negative=1,this._strip()},pr.prototype._wordDiv=function(Or,Mr){var Lr=this.length-Or.length,Vr=this.clone(),Jr=Or,es=Jr.words[Jr.length-1]|0,ns=this._countBits(es);Lr=26-ns,Lr!==0&&(Jr=Jr.ushln(Lr),Vr.iushln(Lr),es=Jr.words[Jr.length-1]|0);var Qr=Vr.length-Jr.length,zr;if(Mr!=="mod"){zr=new pr(null),zr.length=Qr+1,zr.words=new Array(zr.length);for(var Wr=0;Wr<zr.length;Wr++)zr.words[Wr]=0}var ss=Vr.clone()._ishlnsubmul(Jr,1,Qr);ss.negative===0&&(Vr=ss,zr&&(zr.words[Qr]=1));for(var Xr=Qr-1;Xr>=0;Xr--){var ts=(Vr.words[Jr.length+Xr]|0)*67108864+(Vr.words[Jr.length+Xr-1]|0);for(ts=Math.min(ts/es|0,67108863),Vr._ishlnsubmul(Jr,ts,Xr);Vr.negative!==0;)ts--,Vr.negative=0,Vr._ishlnsubmul(Jr,1,Xr),Vr.isZero()||(Vr.negative^=1);zr&&(zr.words[Xr]=ts)}return zr&&zr._strip(),Vr._strip(),Mr!=="div"&&Lr!==0&&Vr.iushrn(Lr),{div:zr||null,mod:Vr}},pr.prototype.divmod=function(Or,Mr,Lr){if(fr(!Or.isZero()),this.isZero())return{div:new pr(0),mod:new pr(0)};var Vr,Jr,es;return this.negative!==0&&Or.negative===0?(es=this.neg().divmod(Or,Mr),Mr!=="mod"&&(Vr=es.div.neg()),Mr!=="div"&&(Jr=es.mod.neg(),Lr&&Jr.negative!==0&&Jr.iadd(Or)),{div:Vr,mod:Jr}):this.negative===0&&Or.negative!==0?(es=this.divmod(Or.neg(),Mr),Mr!=="mod"&&(Vr=es.div.neg()),{div:Vr,mod:es.mod}):this.negative&Or.negative?(es=this.neg().divmod(Or.neg(),Mr),Mr!=="div"&&(Jr=es.mod.neg(),Lr&&Jr.negative!==0&&Jr.isub(Or)),{div:es.div,mod:Jr}):Or.length>this.length||this.cmp(Or)<0?{div:new pr(0),mod:this}:Or.length===1?Mr==="div"?{div:this.divn(Or.words[0]),mod:null}:Mr==="mod"?{div:null,mod:new pr(this.modrn(Or.words[0]))}:{div:this.divn(Or.words[0]),mod:new pr(this.modrn(Or.words[0]))}:this._wordDiv(Or,Mr)},pr.prototype.div=function(Or){return this.divmod(Or,"div",!1).div},pr.prototype.mod=function(Or){return this.divmod(Or,"mod",!1).mod},pr.prototype.umod=function(Or){return this.divmod(Or,"mod",!0).mod},pr.prototype.divRound=function(Or){var Mr=this.divmod(Or);if(Mr.mod.isZero())return Mr.div;var Lr=Mr.div.negative!==0?Mr.mod.isub(Or):Mr.mod,Vr=Or.ushrn(1),Jr=Or.andln(1),es=Lr.cmp(Vr);return es<0||Jr===1&&es===0?Mr.div:Mr.div.negative!==0?Mr.div.isubn(1):Mr.div.iaddn(1)},pr.prototype.modrn=function(Or){var Mr=Or<0;Mr&&(Or=-Or),fr(Or<=67108863);for(var Lr=(1<<26)%Or,Vr=0,Jr=this.length-1;Jr>=0;Jr--)Vr=(Lr*Vr+(this.words[Jr]|0))%Or;return Mr?-Vr:Vr},pr.prototype.modn=function(Or){return this.modrn(Or)},pr.prototype.idivn=function(Or){var Mr=Or<0;Mr&&(Or=-Or),fr(Or<=67108863);for(var Lr=0,Vr=this.length-1;Vr>=0;Vr--){var Jr=(this.words[Vr]|0)+Lr*67108864;this.words[Vr]=Jr/Or|0,Lr=Jr%Or}return this._strip(),Mr?this.ineg():this},pr.prototype.divn=function(Or){return this.clone().idivn(Or)},pr.prototype.egcd=function(Or){fr(Or.negative===0),fr(!Or.isZero());var Mr=this,Lr=Or.clone();Mr.negative!==0?Mr=Mr.umod(Or):Mr=Mr.clone();for(var Vr=new pr(1),Jr=new pr(0),es=new pr(0),ns=new pr(1),Qr=0;Mr.isEven()&&Lr.isEven();)Mr.iushrn(1),Lr.iushrn(1),++Qr;for(var zr=Lr.clone(),Wr=Mr.clone();!Mr.isZero();){for(var ss=0,Xr=1;!(Mr.words[0]&Xr)&&ss<26;++ss,Xr<<=1);if(ss>0)for(Mr.iushrn(ss);ss-- >0;)(Vr.isOdd()||Jr.isOdd())&&(Vr.iadd(zr),Jr.isub(Wr)),Vr.iushrn(1),Jr.iushrn(1);for(var ts=0,fs=1;!(Lr.words[0]&fs)&&ts<26;++ts,fs<<=1);if(ts>0)for(Lr.iushrn(ts);ts-- >0;)(es.isOdd()||ns.isOdd())&&(es.iadd(zr),ns.isub(Wr)),es.iushrn(1),ns.iushrn(1);Mr.cmp(Lr)>=0?(Mr.isub(Lr),Vr.isub(es),Jr.isub(ns)):(Lr.isub(Mr),es.isub(Vr),ns.isub(Jr))}return{a:es,b:ns,gcd:Lr.iushln(Qr)}},pr.prototype._invmp=function(Or){fr(Or.negative===0),fr(!Or.isZero());var Mr=this,Lr=Or.clone();Mr.negative!==0?Mr=Mr.umod(Or):Mr=Mr.clone();for(var Vr=new pr(1),Jr=new pr(0),es=Lr.clone();Mr.cmpn(1)>0&&Lr.cmpn(1)>0;){for(var ns=0,Qr=1;!(Mr.words[0]&Qr)&&ns<26;++ns,Qr<<=1);if(ns>0)for(Mr.iushrn(ns);ns-- >0;)Vr.isOdd()&&Vr.iadd(es),Vr.iushrn(1);for(var zr=0,Wr=1;!(Lr.words[0]&Wr)&&zr<26;++zr,Wr<<=1);if(zr>0)for(Lr.iushrn(zr);zr-- >0;)Jr.isOdd()&&Jr.iadd(es),Jr.iushrn(1);Mr.cmp(Lr)>=0?(Mr.isub(Lr),Vr.isub(Jr)):(Lr.isub(Mr),Jr.isub(Vr))}var ss;return Mr.cmpn(1)===0?ss=Vr:ss=Jr,ss.cmpn(0)<0&&ss.iadd(Or),ss},pr.prototype.gcd=function(Or){if(this.isZero())return Or.abs();if(Or.isZero())return this.abs();var Mr=this.clone(),Lr=Or.clone();Mr.negative=0,Lr.negative=0;for(var Vr=0;Mr.isEven()&&Lr.isEven();Vr++)Mr.iushrn(1),Lr.iushrn(1);do{for(;Mr.isEven();)Mr.iushrn(1);for(;Lr.isEven();)Lr.iushrn(1);var Jr=Mr.cmp(Lr);if(Jr<0){var es=Mr;Mr=Lr,Lr=es}else if(Jr===0||Lr.cmpn(1)===0)break;Mr.isub(Lr)}while(!0);return Lr.iushln(Vr)},pr.prototype.invm=function(Or){return this.egcd(Or).a.umod(Or)},pr.prototype.isEven=function(){return(this.words[0]&1)===0},pr.prototype.isOdd=function(){return(this.words[0]&1)===1},pr.prototype.andln=function(Or){return this.words[0]&Or},pr.prototype.bincn=function(Or){fr(typeof Or=="number");var Mr=Or%26,Lr=(Or-Mr)/26,Vr=1<<Mr;if(this.length<=Lr)return this._expand(Lr+1),this.words[Lr]|=Vr,this;for(var Jr=Vr,es=Lr;Jr!==0&&es<this.length;es++){var ns=this.words[es]|0;ns+=Jr,Jr=ns>>>26,ns&=67108863,this.words[es]=ns}return Jr!==0&&(this.words[es]=Jr,this.length++),this},pr.prototype.isZero=function(){return this.length===1&&this.words[0]===0},pr.prototype.cmpn=function(Or){var Mr=Or<0;if(this.negative!==0&&!Mr)return-1;if(this.negative===0&&Mr)return 1;this._strip();var Lr;if(this.length>1)Lr=1;else{Mr&&(Or=-Or),fr(Or<=67108863,"Number is too big");var Vr=this.words[0]|0;Lr=Vr===Or?0:Vr<Or?-1:1}return this.negative!==0?-Lr|0:Lr},pr.prototype.cmp=function(Or){if(this.negative!==0&&Or.negative===0)return-1;if(this.negative===0&&Or.negative!==0)return 1;var Mr=this.ucmp(Or);return this.negative!==0?-Mr|0:Mr},pr.prototype.ucmp=function(Or){if(this.length>Or.length)return 1;if(this.length<Or.length)return-1;for(var Mr=0,Lr=this.length-1;Lr>=0;Lr--){var Vr=this.words[Lr]|0,Jr=Or.words[Lr]|0;if(Vr!==Jr){Vr<Jr?Mr=-1:Vr>Jr&&(Mr=1);break}}return Mr},pr.prototype.gtn=function(Or){return this.cmpn(Or)===1},pr.prototype.gt=function(Or){return this.cmp(Or)===1},pr.prototype.gten=function(Or){return this.cmpn(Or)>=0},pr.prototype.gte=function(Or){return this.cmp(Or)>=0},pr.prototype.ltn=function(Or){return this.cmpn(Or)===-1},pr.prototype.lt=function(Or){return this.cmp(Or)===-1},pr.prototype.lten=function(Or){return this.cmpn(Or)<=0},pr.prototype.lte=function(Or){return this.cmp(Or)<=0},pr.prototype.eqn=function(Or){return this.cmpn(Or)===0},pr.prototype.eq=function(Or){return this.cmp(Or)===0},pr.red=function(Or){return new Ur(Or)},pr.prototype.toRed=function(Or){return fr(!this.red,"Already a number in reduction context"),fr(this.negative===0,"red works only with positives"),Or.convertTo(this)._forceRed(Or)},pr.prototype.fromRed=function(){return fr(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},pr.prototype._forceRed=function(Or){return this.red=Or,this},pr.prototype.forceRed=function(Or){return fr(!this.red,"Already a number in reduction context"),this._forceRed(Or)},pr.prototype.redAdd=function(Or){return fr(this.red,"redAdd works only with red numbers"),this.red.add(this,Or)},pr.prototype.redIAdd=function(Or){return fr(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Or)},pr.prototype.redSub=function(Or){return fr(this.red,"redSub works only with red numbers"),this.red.sub(this,Or)},pr.prototype.redISub=function(Or){return fr(this.red,"redISub works only with red numbers"),this.red.isub(this,Or)},pr.prototype.redShl=function(Or){return fr(this.red,"redShl works only with red numbers"),this.red.shl(this,Or)},pr.prototype.redMul=function(Or){return fr(this.red,"redMul works only with red numbers"),this.red._verify2(this,Or),this.red.mul(this,Or)},pr.prototype.redIMul=function(Or){return fr(this.red,"redMul works only with red numbers"),this.red._verify2(this,Or),this.red.imul(this,Or)},pr.prototype.redSqr=function(){return fr(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},pr.prototype.redISqr=function(){return fr(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},pr.prototype.redSqrt=function(){return fr(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},pr.prototype.redInvm=function(){return fr(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},pr.prototype.redNeg=function(){return fr(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},pr.prototype.redPow=function(Or){return fr(this.red&&!Or.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Or)};var Nr={k256:null,p224:null,p192:null,p25519:null};function Pr(Hr,Or){this.name=Hr,this.p=new pr(Or,16),this.n=this.p.bitLength(),this.k=new pr(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Pr.prototype._tmp=function(){var Or=new pr(null);return Or.words=new Array(Math.ceil(this.n/13)),Or},Pr.prototype.ireduce=function(Or){var Mr=Or,Lr;do this.split(Mr,this.tmp),Mr=this.imulK(Mr),Mr=Mr.iadd(this.tmp),Lr=Mr.bitLength();while(Lr>this.n);var Vr=Lr<this.n?-1:Mr.ucmp(this.p);return Vr===0?(Mr.words[0]=0,Mr.length=1):Vr>0?Mr.isub(this.p):Mr.strip!==void 0?Mr.strip():Mr._strip(),Mr},Pr.prototype.split=function(Or,Mr){Or.iushrn(this.n,0,Mr)},Pr.prototype.imulK=function(Or){return Or.imul(this.k)};function Tr(){Pr.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}hr(Tr,Pr),Tr.prototype.split=function(Or,Mr){for(var Lr=4194303,Vr=Math.min(Or.length,9),Jr=0;Jr<Vr;Jr++)Mr.words[Jr]=Or.words[Jr];if(Mr.length=Vr,Or.length<=9){Or.words[0]=0,Or.length=1;return}var es=Or.words[9];for(Mr.words[Mr.length++]=es&Lr,Jr=10;Jr<Or.length;Jr++){var ns=Or.words[Jr]|0;Or.words[Jr-10]=(ns&Lr)<<4|es>>>22,es=ns}es>>>=22,Or.words[Jr-10]=es,es===0&&Or.length>10?Or.length-=10:Or.length-=9},Tr.prototype.imulK=function(Or){Or.words[Or.length]=0,Or.words[Or.length+1]=0,Or.length+=2;for(var Mr=0,Lr=0;Lr<Or.length;Lr++){var Vr=Or.words[Lr]|0;Mr+=Vr*977,Or.words[Lr]=Mr&67108863,Mr=Vr*64+(Mr/67108864|0)}return Or.words[Or.length-1]===0&&(Or.length--,Or.words[Or.length-1]===0&&Or.length--),Or};function Br(){Pr.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}hr(Br,Pr);function Fr(){Pr.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}hr(Fr,Pr);function jr(){Pr.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}hr(jr,Pr),jr.prototype.imulK=function(Or){for(var Mr=0,Lr=0;Lr<Or.length;Lr++){var Vr=(Or.words[Lr]|0)*19+Mr,Jr=Vr&67108863;Vr>>>=26,Or.words[Lr]=Jr,Mr=Vr}return Mr!==0&&(Or.words[Or.length++]=Mr),Or},pr._prime=function(Or){if(Nr[Or])return Nr[Or];var Mr;if(Or==="k256")Mr=new Tr;else if(Or==="p224")Mr=new Br;else if(Or==="p192")Mr=new Fr;else if(Or==="p25519")Mr=new jr;else throw new Error("Unknown prime "+Or);return Nr[Or]=Mr,Mr};function Ur(Hr){if(typeof Hr=="string"){var Or=pr._prime(Hr);this.m=Or.p,this.prime=Or}else fr(Hr.gtn(1),"modulus must be greater than 1"),this.m=Hr,this.prime=null}Ur.prototype._verify1=function(Or){fr(Or.negative===0,"red works only with positives"),fr(Or.red,"red works only with red numbers")},Ur.prototype._verify2=function(Or,Mr){fr((Or.negative|Mr.negative)===0,"red works only with positives"),fr(Or.red&&Or.red===Mr.red,"red works only with red numbers")},Ur.prototype.imod=function(Or){return this.prime?this.prime.ireduce(Or)._forceRed(this):(wr(Or,Or.umod(this.m)._forceRed(this)),Or)},Ur.prototype.neg=function(Or){return Or.isZero()?Or.clone():this.m.sub(Or)._forceRed(this)},Ur.prototype.add=function(Or,Mr){this._verify2(Or,Mr);var Lr=Or.add(Mr);return Lr.cmp(this.m)>=0&&Lr.isub(this.m),Lr._forceRed(this)},Ur.prototype.iadd=function(Or,Mr){this._verify2(Or,Mr);var Lr=Or.iadd(Mr);return Lr.cmp(this.m)>=0&&Lr.isub(this.m),Lr},Ur.prototype.sub=function(Or,Mr){this._verify2(Or,Mr);var Lr=Or.sub(Mr);return Lr.cmpn(0)<0&&Lr.iadd(this.m),Lr._forceRed(this)},Ur.prototype.isub=function(Or,Mr){this._verify2(Or,Mr);var Lr=Or.isub(Mr);return Lr.cmpn(0)<0&&Lr.iadd(this.m),Lr},Ur.prototype.shl=function(Or,Mr){return this._verify1(Or),this.imod(Or.ushln(Mr))},Ur.prototype.imul=function(Or,Mr){return this._verify2(Or,Mr),this.imod(Or.imul(Mr))},Ur.prototype.mul=function(Or,Mr){return this._verify2(Or,Mr),this.imod(Or.mul(Mr))},Ur.prototype.isqr=function(Or){return this.imul(Or,Or.clone())},Ur.prototype.sqr=function(Or){return this.mul(Or,Or)},Ur.prototype.sqrt=function(Or){if(Or.isZero())return Or.clone();var Mr=this.m.andln(3);if(fr(Mr%2===1),Mr===3){var Lr=this.m.add(new pr(1)).iushrn(2);return this.pow(Or,Lr)}for(var Vr=this.m.subn(1),Jr=0;!Vr.isZero()&&Vr.andln(1)===0;)Jr++,Vr.iushrn(1);fr(!Vr.isZero());var es=new pr(1).toRed(this),ns=es.redNeg(),Qr=this.m.subn(1).iushrn(1),zr=this.m.bitLength();for(zr=new pr(2*zr*zr).toRed(this);this.pow(zr,Qr).cmp(ns)!==0;)zr.redIAdd(ns);for(var Wr=this.pow(zr,Vr),ss=this.pow(Or,Vr.addn(1).iushrn(1)),Xr=this.pow(Or,Vr),ts=Jr;Xr.cmp(es)!==0;){for(var fs=Xr,rs=0;fs.cmp(es)!==0;rs++)fs=fs.redSqr();fr(rs<ts);var as=this.pow(Wr,new pr(1).iushln(ts-rs-1));ss=ss.redMul(as),Wr=as.redSqr(),Xr=Xr.redMul(Wr),ts=rs}return ss},Ur.prototype.invm=function(Or){var Mr=Or._invmp(this.m);return Mr.negative!==0?(Mr.negative=0,this.imod(Mr).redNeg()):this.imod(Mr)},Ur.prototype.pow=function(Or,Mr){if(Mr.isZero())return new pr(1).toRed(this);if(Mr.cmpn(1)===0)return Or.clone();var Lr=4,Vr=new Array(1<<Lr);Vr[0]=new pr(1).toRed(this),Vr[1]=Or;for(var Jr=2;Jr<Vr.length;Jr++)Vr[Jr]=this.mul(Vr[Jr-1],Or);var es=Vr[0],ns=0,Qr=0,zr=Mr.bitLength()%26;for(zr===0&&(zr=26),Jr=Mr.length-1;Jr>=0;Jr--){for(var Wr=Mr.words[Jr],ss=zr-1;ss>=0;ss--){var Xr=Wr>>ss&1;if(es!==Vr[0]&&(es=this.sqr(es)),Xr===0&&ns===0){Qr=0;continue}ns<<=1,ns|=Xr,Qr++,!(Qr!==Lr&&(Jr!==0||ss!==0))&&(es=this.mul(es,Vr[ns]),Qr=0,ns=0)}zr=26}return es},Ur.prototype.convertTo=function(Or){var Mr=Or.umod(this.m);return Mr===Or?Mr.clone():Mr},Ur.prototype.convertFrom=function(Or){var Mr=Or.clone();return Mr.red=null,Mr},pr.mont=function(Or){return new qr(Or)};function qr(Hr){Ur.call(this,Hr),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new pr(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}hr(qr,Ur),qr.prototype.convertTo=function(Or){return this.imod(Or.ushln(this.shift))},qr.prototype.convertFrom=function(Or){var Mr=this.imod(Or.mul(this.rinv));return Mr.red=null,Mr},qr.prototype.imul=function(Or,Mr){if(Or.isZero()||Mr.isZero())return Or.words[0]=0,Or.length=1,Or;var Lr=Or.imul(Mr),Vr=Lr.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Jr=Lr.isub(Vr).iushrn(this.shift),es=Jr;return Jr.cmp(this.m)>=0?es=Jr.isub(this.m):Jr.cmpn(0)<0&&(es=Jr.iadd(this.m)),es._forceRed(this)},qr.prototype.mul=function(Or,Mr){if(Or.isZero()||Mr.isZero())return new pr(0)._forceRed(this);var Lr=Or.mul(Mr),Vr=Lr.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Jr=Lr.isub(Vr).iushrn(this.shift),es=Jr;return Jr.cmp(this.m)>=0?es=Jr.isub(this.m):Jr.cmpn(0)<0&&(es=Jr.iadd(this.m)),es._forceRed(this)},qr.prototype.invm=function(Or){var Mr=this.imod(Or._invmp(this.m).mul(this.r2));return Mr._forceRed(this)}})(cr,commonjsGlobal)})(bn$1);var bnExports=bn$1.exports;const BN$1=getDefaultExportFromCjs(bnExports),version$j="logger/5.7.0";let _permanentCensorErrors=!1,_censorErrors=!1;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels.default,_globalLogger=null;function _checkNormalize(){try{const cr=[];if(["NFD","NFC","NFKD","NFKC"].forEach(ar=>{try{if("test".normalize(ar)!=="test")throw new Error("bad normalize")}catch{cr.push(ar)}}),cr.length)throw new Error("missing "+cr.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(cr){return cr.message}return null}const _normalizeError=_checkNormalize();var LogLevel;(function(cr){cr.DEBUG="DEBUG",cr.INFO="INFO",cr.WARNING="WARNING",cr.ERROR="ERROR",cr.OFF="OFF"})(LogLevel||(LogLevel={}));var ErrorCode;(function(cr){cr.UNKNOWN_ERROR="UNKNOWN_ERROR",cr.NOT_IMPLEMENTED="NOT_IMPLEMENTED",cr.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",cr.NETWORK_ERROR="NETWORK_ERROR",cr.SERVER_ERROR="SERVER_ERROR",cr.TIMEOUT="TIMEOUT",cr.BUFFER_OVERRUN="BUFFER_OVERRUN",cr.NUMERIC_FAULT="NUMERIC_FAULT",cr.MISSING_NEW="MISSING_NEW",cr.INVALID_ARGUMENT="INVALID_ARGUMENT",cr.MISSING_ARGUMENT="MISSING_ARGUMENT",cr.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",cr.CALL_EXCEPTION="CALL_EXCEPTION",cr.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",cr.NONCE_EXPIRED="NONCE_EXPIRED",cr.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",cr.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",cr.TRANSACTION_REPLACED="TRANSACTION_REPLACED",cr.ACTION_REJECTED="ACTION_REJECTED"})(ErrorCode||(ErrorCode={}));const HEX="0123456789abcdef";class Logger{constructor(ar){Object.defineProperty(this,"version",{enumerable:!0,value:ar,writable:!1})}_log(ar,dr){const fr=ar.toLowerCase();LogLevels[fr]==null&&this.throwArgumentError("invalid log level name","logLevel",ar),!(_logLevel>LogLevels[fr])&&console.log.apply(console,dr)}debug(...ar){this._log(Logger.levels.DEBUG,ar)}info(...ar){this._log(Logger.levels.INFO,ar)}warn(...ar){this._log(Logger.levels.WARNING,ar)}makeError(ar,dr,fr){if(_censorErrors)return this.makeError("censored error",dr,{});dr||(dr=Logger.errors.UNKNOWN_ERROR),fr||(fr={});const hr=[];Object.keys(fr).forEach(yr=>{const xr=fr[yr];try{if(xr instanceof Uint8Array){let wr="";for(let br=0;br<xr.length;br++)wr+=HEX[xr[br]>>4],wr+=HEX[xr[br]&15];hr.push(yr+"=Uint8Array(0x"+wr+")")}else hr.push(yr+"="+JSON.stringify(xr))}catch{hr.push(yr+"="+JSON.stringify(fr[yr].toString()))}}),hr.push(`code=${dr}`),hr.push(`version=${this.version}`);const pr=ar;let mr="";switch(dr){case ErrorCode.NUMERIC_FAULT:{mr="NUMERIC_FAULT";const yr=ar;switch(yr){case"overflow":case"underflow":case"division-by-zero":mr+="-"+yr;break;case"negative-power":case"negative-width":mr+="-unsupported";break;case"unbound-bitwise-result":mr+="-unbound-result";break}break}case ErrorCode.CALL_EXCEPTION:case ErrorCode.INSUFFICIENT_FUNDS:case ErrorCode.MISSING_NEW:case ErrorCode.NONCE_EXPIRED:case ErrorCode.REPLACEMENT_UNDERPRICED:case ErrorCode.TRANSACTION_REPLACED:case ErrorCode.UNPREDICTABLE_GAS_LIMIT:mr=dr;break}mr&&(ar+=" [ See: https://links.ethers.org/v5-errors-"+mr+" ]"),hr.length&&(ar+=" ("+hr.join(", ")+")");const gr=new Error(ar);return gr.reason=pr,gr.code=dr,Object.keys(fr).forEach(function(yr){gr[yr]=fr[yr]}),gr}throwError(ar,dr,fr){throw this.makeError(ar,dr,fr)}throwArgumentError(ar,dr,fr){return this.throwError(ar,Logger.errors.INVALID_ARGUMENT,{argument:dr,value:fr})}assert(ar,dr,fr,hr){ar||this.throwError(dr,fr,hr)}assertArgument(ar,dr,fr,hr){ar||this.throwArgumentError(dr,fr,hr)}checkNormalize(ar){_normalizeError&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}checkSafeUint53(ar,dr){typeof ar=="number"&&(dr==null&&(dr="value not safe"),(ar<0||ar>=9007199254740991)&&this.throwError(dr,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:ar}),ar%1&&this.throwError(dr,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:ar}))}checkArgumentCount(ar,dr,fr){fr?fr=": "+fr:fr="",ar<dr&&this.throwError("missing argument"+fr,Logger.errors.MISSING_ARGUMENT,{count:ar,expectedCount:dr}),ar>dr&&this.throwError("too many arguments"+fr,Logger.errors.UNEXPECTED_ARGUMENT,{count:ar,expectedCount:dr})}checkNew(ar,dr){(ar===Object||ar==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:dr.name})}checkAbstract(ar,dr){ar===dr?this.throwError("cannot instantiate abstract class "+JSON.stringify(dr.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:ar.name,operation:"new"}):(ar===Object||ar==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:dr.name})}static globalLogger(){return _globalLogger||(_globalLogger=new Logger(version$j)),_globalLogger}static setCensorship(ar,dr){if(!ar&&dr&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_permanentCensorErrors){if(!ar)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!ar,_permanentCensorErrors=!!dr}static setLogLevel(ar){const dr=LogLevels[ar.toLowerCase()];if(dr==null){Logger.globalLogger().warn("invalid log level - "+ar);return}_logLevel=dr}static from(ar){return new Logger(ar)}}Logger.errors=ErrorCode;Logger.levels=LogLevel;const version$i="bytes/5.7.0",logger$i=new Logger(version$i);function isHexable(cr){return!!cr.toHexString}function addSlice(cr){return cr.slice||(cr.slice=function(){const ar=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(cr,ar)))}),cr}function isBytesLike$1(cr){return isHexString$1(cr)&&!(cr.length%2)||isBytes$4(cr)}function isInteger$2(cr){return typeof cr=="number"&&cr==cr&&cr%1===0}function isBytes$4(cr){if(cr==null)return!1;if(cr.constructor===Uint8Array)return!0;if(typeof cr=="string"||!isInteger$2(cr.length)||cr.length<0)return!1;for(let ar=0;ar<cr.length;ar++){const dr=cr[ar];if(!isInteger$2(dr)||dr<0||dr>=256)return!1}return!0}function arrayify(cr,ar){if(ar||(ar={}),typeof cr=="number"){logger$i.checkSafeUint53(cr,"invalid arrayify value");const dr=[];for(;cr;)dr.unshift(cr&255),cr=parseInt(String(cr/256));return dr.length===0&&dr.push(0),addSlice(new Uint8Array(dr))}if(ar.allowMissingPrefix&&typeof cr=="string"&&cr.substring(0,2)!=="0x"&&(cr="0x"+cr),isHexable(cr)&&(cr=cr.toHexString()),isHexString$1(cr)){let dr=cr.substring(2);dr.length%2&&(ar.hexPad==="left"?dr="0"+dr:ar.hexPad==="right"?dr+="0":logger$i.throwArgumentError("hex data is odd-length","value",cr));const fr=[];for(let hr=0;hr<dr.length;hr+=2)fr.push(parseInt(dr.substring(hr,hr+2),16));return addSlice(new Uint8Array(fr))}return isBytes$4(cr)?addSlice(new Uint8Array(cr)):logger$i.throwArgumentError("invalid arrayify value","value",cr)}function concat$6(cr){const ar=cr.map(hr=>arrayify(hr)),dr=ar.reduce((hr,pr)=>hr+pr.length,0),fr=new Uint8Array(dr);return ar.reduce((hr,pr)=>(fr.set(pr,hr),hr+pr.length),0),addSlice(fr)}function stripZeros(cr){let ar=arrayify(cr);if(ar.length===0)return ar;let dr=0;for(;dr<ar.length&&ar[dr]===0;)dr++;return dr&&(ar=ar.slice(dr)),ar}function zeroPad$1(cr,ar){cr=arrayify(cr),cr.length>ar&&logger$i.throwArgumentError("value out of range","value",arguments[0]);const dr=new Uint8Array(ar);return dr.set(cr,ar-cr.length),addSlice(dr)}function isHexString$1(cr,ar){return!(typeof cr!="string"||!cr.match(/^0x[0-9A-Fa-f]*$/)||ar&&cr.length!==2+2*ar)}const HexCharacters$1="0123456789abcdef";function hexlify$1(cr,ar){if(ar||(ar={}),typeof cr=="number"){logger$i.checkSafeUint53(cr,"invalid hexlify value");let dr="";for(;cr;)dr=HexCharacters$1[cr&15]+dr,cr=Math.floor(cr/16);return dr.length?(dr.length%2&&(dr="0"+dr),"0x"+dr):"0x00"}if(typeof cr=="bigint")return cr=cr.toString(16),cr.length%2?"0x0"+cr:"0x"+cr;if(ar.allowMissingPrefix&&typeof cr=="string"&&cr.substring(0,2)!=="0x"&&(cr="0x"+cr),isHexable(cr))return cr.toHexString();if(isHexString$1(cr))return cr.length%2&&(ar.hexPad==="left"?cr="0x0"+cr.substring(2):ar.hexPad==="right"?cr+="0":logger$i.throwArgumentError("hex data is odd-length","value",cr)),cr.toLowerCase();if(isBytes$4(cr)){let dr="0x";for(let fr=0;fr<cr.length;fr++){let hr=cr[fr];dr+=HexCharacters$1[(hr&240)>>4]+HexCharacters$1[hr&15]}return dr}return logger$i.throwArgumentError("invalid hexlify value","value",cr)}function hexDataLength(cr){if(typeof cr!="string")cr=hexlify$1(cr);else if(!isHexString$1(cr)||cr.length%2)return null;return(cr.length-2)/2}function hexDataSlice(cr,ar,dr){return typeof cr!="string"?cr=hexlify$1(cr):(!isHexString$1(cr)||cr.length%2)&&logger$i.throwArgumentError("invalid hexData","value",cr),ar=2+2*ar,dr!=null?"0x"+cr.substring(ar,2+2*dr):"0x"+cr.substring(ar)}function hexConcat(cr){let ar="0x";return cr.forEach(dr=>{ar+=hexlify$1(dr).substring(2)}),ar}function hexZeroPad(cr,ar){for(typeof cr!="string"?cr=hexlify$1(cr):isHexString$1(cr)||logger$i.throwArgumentError("invalid hex string","value",cr),cr.length>2*ar+2&&logger$i.throwArgumentError("value out of range","value",arguments[1]);cr.length<2*ar+2;)cr="0x0"+cr.substring(2);return cr}function splitSignature(cr){const ar={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(isBytesLike$1(cr)){let dr=arrayify(cr);dr.length===64?(ar.v=27+(dr[32]>>7),dr[32]&=127,ar.r=hexlify$1(dr.slice(0,32)),ar.s=hexlify$1(dr.slice(32,64))):dr.length===65?(ar.r=hexlify$1(dr.slice(0,32)),ar.s=hexlify$1(dr.slice(32,64)),ar.v=dr[64]):logger$i.throwArgumentError("invalid signature string","signature",cr),ar.v<27&&(ar.v===0||ar.v===1?ar.v+=27:logger$i.throwArgumentError("signature invalid v byte","signature",cr)),ar.recoveryParam=1-ar.v%2,ar.recoveryParam&&(dr[32]|=128),ar._vs=hexlify$1(dr.slice(32,64))}else{if(ar.r=cr.r,ar.s=cr.s,ar.v=cr.v,ar.recoveryParam=cr.recoveryParam,ar._vs=cr._vs,ar._vs!=null){const hr=zeroPad$1(arrayify(ar._vs),32);ar._vs=hexlify$1(hr);const pr=hr[0]>=128?1:0;ar.recoveryParam==null?ar.recoveryParam=pr:ar.recoveryParam!==pr&&logger$i.throwArgumentError("signature recoveryParam mismatch _vs","signature",cr),hr[0]&=127;const mr=hexlify$1(hr);ar.s==null?ar.s=mr:ar.s!==mr&&logger$i.throwArgumentError("signature v mismatch _vs","signature",cr)}if(ar.recoveryParam==null)ar.v==null?logger$i.throwArgumentError("signature missing v and recoveryParam","signature",cr):ar.v===0||ar.v===1?ar.recoveryParam=ar.v:ar.recoveryParam=1-ar.v%2;else if(ar.v==null)ar.v=27+ar.recoveryParam;else{const hr=ar.v===0||ar.v===1?ar.v:1-ar.v%2;ar.recoveryParam!==hr&&logger$i.throwArgumentError("signature recoveryParam mismatch v","signature",cr)}ar.r==null||!isHexString$1(ar.r)?logger$i.throwArgumentError("signature missing or invalid r","signature",cr):ar.r=hexZeroPad(ar.r,32),ar.s==null||!isHexString$1(ar.s)?logger$i.throwArgumentError("signature missing or invalid s","signature",cr):ar.s=hexZeroPad(ar.s,32);const dr=arrayify(ar.s);dr[0]>=128&&logger$i.throwArgumentError("signature s out of range","signature",cr),ar.recoveryParam&&(dr[0]|=128);const fr=hexlify$1(dr);ar._vs&&(isHexString$1(ar._vs)||logger$i.throwArgumentError("signature invalid _vs","signature",cr),ar._vs=hexZeroPad(ar._vs,32)),ar._vs==null?ar._vs=fr:ar._vs!==fr&&logger$i.throwArgumentError("signature _vs mismatch v and s","signature",cr)}return ar.yParityAndS=ar._vs,ar.compact=ar.r+ar.yParityAndS.substring(2),ar}function joinSignature(cr){return cr=splitSignature(cr),hexlify$1(concat$6([cr.r,cr.s,cr.recoveryParam?"0x1c":"0x1b"]))}const version$h="bignumber/5.7.0";var BN=BN$1.BN;const logger$h=new Logger(version$h),_constructorGuard$1={},MAX_SAFE=9007199254740991;let _warnedToStringRadix=!1;class BigNumber{constructor(ar,dr){ar!==_constructorGuard$1&&logger$h.throwError("cannot call constructor directly; use BigNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=dr,this._isBigNumber=!0,Object.freeze(this)}fromTwos(ar){return toBigNumber(toBN(this).fromTwos(ar))}toTwos(ar){return toBigNumber(toBN(this).toTwos(ar))}abs(){return this._hex[0]==="-"?BigNumber.from(this._hex.substring(1)):this}add(ar){return toBigNumber(toBN(this).add(toBN(ar)))}sub(ar){return toBigNumber(toBN(this).sub(toBN(ar)))}div(ar){return BigNumber.from(ar).isZero()&&throwFault("division-by-zero","div"),toBigNumber(toBN(this).div(toBN(ar)))}mul(ar){return toBigNumber(toBN(this).mul(toBN(ar)))}mod(ar){const dr=toBN(ar);return dr.isNeg()&&throwFault("division-by-zero","mod"),toBigNumber(toBN(this).umod(dr))}pow(ar){const dr=toBN(ar);return dr.isNeg()&&throwFault("negative-power","pow"),toBigNumber(toBN(this).pow(dr))}and(ar){const dr=toBN(ar);return(this.isNegative()||dr.isNeg())&&throwFault("unbound-bitwise-result","and"),toBigNumber(toBN(this).and(dr))}or(ar){const dr=toBN(ar);return(this.isNegative()||dr.isNeg())&&throwFault("unbound-bitwise-result","or"),toBigNumber(toBN(this).or(dr))}xor(ar){const dr=toBN(ar);return(this.isNegative()||dr.isNeg())&&throwFault("unbound-bitwise-result","xor"),toBigNumber(toBN(this).xor(dr))}mask(ar){return(this.isNegative()||ar<0)&&throwFault("negative-width","mask"),toBigNumber(toBN(this).maskn(ar))}shl(ar){return(this.isNegative()||ar<0)&&throwFault("negative-width","shl"),toBigNumber(toBN(this).shln(ar))}shr(ar){return(this.isNegative()||ar<0)&&throwFault("negative-width","shr"),toBigNumber(toBN(this).shrn(ar))}eq(ar){return toBN(this).eq(toBN(ar))}lt(ar){return toBN(this).lt(toBN(ar))}lte(ar){return toBN(this).lte(toBN(ar))}gt(ar){return toBN(this).gt(toBN(ar))}gte(ar){return toBN(this).gte(toBN(ar))}isNegative(){return this._hex[0]==="-"}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch{throwFault("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return logger$h.throwError("this platform does not support BigInt",Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?_warnedToStringRadix||(_warnedToStringRadix=!0,logger$h.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?logger$h.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger.errors.UNEXPECTED_ARGUMENT,{}):logger$h.throwError("BigNumber.toString does not accept parameters",Logger.errors.UNEXPECTED_ARGUMENT,{})),toBN(this).toString(10)}toHexString(){return this._hex}toJSON(ar){return{type:"BigNumber",hex:this.toHexString()}}static from(ar){if(ar instanceof BigNumber)return ar;if(typeof ar=="string")return ar.match(/^-?0x[0-9a-f]+$/i)?new BigNumber(_constructorGuard$1,toHex$1(ar)):ar.match(/^-?[0-9]+$/)?new BigNumber(_constructorGuard$1,toHex$1(new BN(ar))):logger$h.throwArgumentError("invalid BigNumber string","value",ar);if(typeof ar=="number")return ar%1&&throwFault("underflow","BigNumber.from",ar),(ar>=MAX_SAFE||ar<=-MAX_SAFE)&&throwFault("overflow","BigNumber.from",ar),BigNumber.from(String(ar));const dr=ar;if(typeof dr=="bigint")return BigNumber.from(dr.toString());if(isBytes$4(dr))return BigNumber.from(hexlify$1(dr));if(dr)if(dr.toHexString){const fr=dr.toHexString();if(typeof fr=="string")return BigNumber.from(fr)}else{let fr=dr._hex;if(fr==null&&dr.type==="BigNumber"&&(fr=dr.hex),typeof fr=="string"&&(isHexString$1(fr)||fr[0]==="-"&&isHexString$1(fr.substring(1))))return BigNumber.from(fr)}return logger$h.throwArgumentError("invalid BigNumber value","value",ar)}static isBigNumber(ar){return!!(ar&&ar._isBigNumber)}}function toHex$1(cr){if(typeof cr!="string")return toHex$1(cr.toString(16));if(cr[0]==="-")return cr=cr.substring(1),cr[0]==="-"&&logger$h.throwArgumentError("invalid hex","value",cr),cr=toHex$1(cr),cr==="0x00"?cr:"-"+cr;if(cr.substring(0,2)!=="0x"&&(cr="0x"+cr),cr==="0x")return"0x00";for(cr.length%2&&(cr="0x0"+cr.substring(2));cr.length>4&&cr.substring(0,4)==="0x00";)cr="0x"+cr.substring(4);return cr}function toBigNumber(cr){return BigNumber.from(toHex$1(cr))}function toBN(cr){const ar=BigNumber.from(cr).toHexString();return ar[0]==="-"?new BN("-"+ar.substring(3),16):new BN(ar.substring(2),16)}function throwFault(cr,ar,dr){const fr={fault:cr,operation:ar};return dr!=null&&(fr.value=dr),logger$h.throwError(cr,Logger.errors.NUMERIC_FAULT,fr)}function _base36To16(cr){return new BN(cr,36).toString(16)}const version$g="properties/5.7.0";var __awaiter$b=globalThis&&globalThis.__awaiter||function(cr,ar,dr,fr){function hr(pr){return pr instanceof dr?pr:new dr(function(mr){mr(pr)})}return new(dr||(dr=Promise))(function(pr,mr){function gr(wr){try{xr(fr.next(wr))}catch(br){mr(br)}}function yr(wr){try{xr(fr.throw(wr))}catch(br){mr(br)}}function xr(wr){wr.done?pr(wr.value):hr(wr.value).then(gr,yr)}xr((fr=fr.apply(cr,ar||[])).next())})};const logger$g=new Logger(version$g);function defineReadOnly(cr,ar,dr){Object.defineProperty(cr,ar,{enumerable:!0,value:dr,writable:!1})}function resolveProperties$1(cr){return __awaiter$b(this,void 0,void 0,function*(){const ar=Object.keys(cr).map(fr=>{const hr=cr[fr];return Promise.resolve(hr).then(pr=>({key:fr,value:pr}))});return(yield Promise.all(ar)).reduce((fr,hr)=>(fr[hr.key]=hr.value,fr),{})})}function checkProperties(cr,ar){(!cr||typeof cr!="object")&&logger$g.throwArgumentError("invalid object","object",cr),Object.keys(cr).forEach(dr=>{ar[dr]||logger$g.throwArgumentError("invalid object key - "+dr,"transaction:"+dr,cr)})}function shallowCopy(cr){const ar={};for(const dr in cr)ar[dr]=cr[dr];return ar}const opaque={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function _isFrozen(cr){if(cr==null||opaque[typeof cr])return!0;if(Array.isArray(cr)||typeof cr=="object"){if(!Object.isFrozen(cr))return!1;const ar=Object.keys(cr);for(let dr=0;dr<ar.length;dr++){let fr=null;try{fr=cr[ar[dr]]}catch{continue}if(!_isFrozen(fr))return!1}return!0}return logger$g.throwArgumentError(`Cannot deepCopy ${typeof cr}`,"object",cr)}function _deepCopy(cr){if(_isFrozen(cr))return cr;if(Array.isArray(cr))return Object.freeze(cr.map(ar=>deepCopy(ar)));if(typeof cr=="object"){const ar={};for(const dr in cr){const fr=cr[dr];fr!==void 0&&defineReadOnly(ar,dr,deepCopy(fr))}return ar}return logger$g.throwArgumentError(`Cannot deepCopy ${typeof cr}`,"object",cr)}function deepCopy(cr){return _deepCopy(cr)}class Description{constructor(ar){for(const dr in ar)this[dr]=deepCopy(ar[dr])}}var sha3$2={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(cr){(function(){var ar="input is invalid type",dr="finalize already called",fr=typeof window=="object",hr=fr?window:{};hr.JS_SHA3_NO_WINDOW&&(fr=!1);var pr=!fr&&typeof self=="object",mr=!hr.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;mr?hr=globalThis:pr&&(hr=self);var gr=!hr.JS_SHA3_NO_COMMON_JS&&!0&&cr.exports,yr=!hr.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",xr="0123456789abcdef".split(""),wr=[31,7936,2031616,520093696],br=[4,1024,262144,67108864],Sr=[1,256,65536,16777216],vr=[6,1536,393216,100663296],Er=[0,8,16,24],Ar=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],_r=[224,256,384,512],Cr=[128,256],kr=["hex","buffer","arrayBuffer","array","digest"],Rr={128:168,256:136};(hr.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(Xr){return Object.prototype.toString.call(Xr)==="[object Array]"}),yr&&(hr.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(Xr){return typeof Xr=="object"&&Xr.buffer&&Xr.buffer.constructor===ArrayBuffer});for(var Ir=function(Xr,ts,fs){return function(rs){return new zr(Xr,ts,Xr).update(rs)[fs]()}},Nr=function(Xr,ts,fs){return function(rs,as){return new zr(Xr,ts,as).update(rs)[fs]()}},Pr=function(Xr,ts,fs){return function(rs,as,ps,xs){return Or["cshake"+Xr].update(rs,as,ps,xs)[fs]()}},Tr=function(Xr,ts,fs){return function(rs,as,ps,xs){return Or["kmac"+Xr].update(rs,as,ps,xs)[fs]()}},Br=function(Xr,ts,fs,rs){for(var as=0;as<kr.length;++as){var ps=kr[as];Xr[ps]=ts(fs,rs,ps)}return Xr},Fr=function(Xr,ts){var fs=Ir(Xr,ts,"hex");return fs.create=function(){return new zr(Xr,ts,Xr)},fs.update=function(rs){return fs.create().update(rs)},Br(fs,Ir,Xr,ts)},jr=function(Xr,ts){var fs=Nr(Xr,ts,"hex");return fs.create=function(rs){return new zr(Xr,ts,rs)},fs.update=function(rs,as){return fs.create(as).update(rs)},Br(fs,Nr,Xr,ts)},Ur=function(Xr,ts){var fs=Rr[Xr],rs=Pr(Xr,ts,"hex");return rs.create=function(as,ps,xs){return!ps&&!xs?Or["shake"+Xr].create(as):new zr(Xr,ts,as).bytepad([ps,xs],fs)},rs.update=function(as,ps,xs,Ss){return rs.create(ps,xs,Ss).update(as)},Br(rs,Pr,Xr,ts)},qr=function(Xr,ts){var fs=Rr[Xr],rs=Tr(Xr,ts,"hex");return rs.create=function(as,ps,xs){return new Wr(Xr,ts,ps).bytepad(["KMAC",xs],fs).bytepad([as],fs)},rs.update=function(as,ps,xs,Ss){return rs.create(as,xs,Ss).update(ps)},Br(rs,Tr,Xr,ts)},Hr=[{name:"keccak",padding:Sr,bits:_r,createMethod:Fr},{name:"sha3",padding:vr,bits:_r,createMethod:Fr},{name:"shake",padding:wr,bits:Cr,createMethod:jr},{name:"cshake",padding:br,bits:Cr,createMethod:Ur},{name:"kmac",padding:br,bits:Cr,createMethod:qr}],Or={},Mr=[],Lr=0;Lr<Hr.length;++Lr)for(var Vr=Hr[Lr],Jr=Vr.bits,es=0;es<Jr.length;++es){var ns=Vr.name+"_"+Jr[es];if(Mr.push(ns),Or[ns]=Vr.createMethod(Jr[es],Vr.padding),Vr.name!=="sha3"){var Qr=Vr.name+Jr[es];Mr.push(Qr),Or[Qr]=Or[ns]}}function zr(Xr,ts,fs){this.blocks=[],this.s=[],this.padding=ts,this.outputBits=fs,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(Xr<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=fs>>5,this.extraBytes=(fs&31)>>3;for(var rs=0;rs<50;++rs)this.s[rs]=0}zr.prototype.update=function(Xr){if(this.finalized)throw new Error(dr);var ts,fs=typeof Xr;if(fs!=="string"){if(fs==="object"){if(Xr===null)throw new Error(ar);if(yr&&Xr.constructor===ArrayBuffer)Xr=new Uint8Array(Xr);else if(!Array.isArray(Xr)&&(!yr||!ArrayBuffer.isView(Xr)))throw new Error(ar)}else throw new Error(ar);ts=!0}for(var rs=this.blocks,as=this.byteCount,ps=Xr.length,xs=this.blockCount,Ss=0,Ns=this.s,Ts,os;Ss<ps;){if(this.reset)for(this.reset=!1,rs[0]=this.block,Ts=1;Ts<xs+1;++Ts)rs[Ts]=0;if(ts)for(Ts=this.start;Ss<ps&&Ts<as;++Ss)rs[Ts>>2]|=Xr[Ss]<<Er[Ts++&3];else for(Ts=this.start;Ss<ps&&Ts<as;++Ss)os=Xr.charCodeAt(Ss),os<128?rs[Ts>>2]|=os<<Er[Ts++&3]:os<2048?(rs[Ts>>2]|=(192|os>>6)<<Er[Ts++&3],rs[Ts>>2]|=(128|os&63)<<Er[Ts++&3]):os<55296||os>=57344?(rs[Ts>>2]|=(224|os>>12)<<Er[Ts++&3],rs[Ts>>2]|=(128|os>>6&63)<<Er[Ts++&3],rs[Ts>>2]|=(128|os&63)<<Er[Ts++&3]):(os=65536+((os&1023)<<10|Xr.charCodeAt(++Ss)&1023),rs[Ts>>2]|=(240|os>>18)<<Er[Ts++&3],rs[Ts>>2]|=(128|os>>12&63)<<Er[Ts++&3],rs[Ts>>2]|=(128|os>>6&63)<<Er[Ts++&3],rs[Ts>>2]|=(128|os&63)<<Er[Ts++&3]);if(this.lastByteIndex=Ts,Ts>=as){for(this.start=Ts-as,this.block=rs[xs],Ts=0;Ts<xs;++Ts)Ns[Ts]^=rs[Ts];ss(Ns),this.reset=!0}else this.start=Ts}return this},zr.prototype.encode=function(Xr,ts){var fs=Xr&255,rs=1,as=[fs];for(Xr=Xr>>8,fs=Xr&255;fs>0;)as.unshift(fs),Xr=Xr>>8,fs=Xr&255,++rs;return ts?as.push(rs):as.unshift(rs),this.update(as),as.length},zr.prototype.encodeString=function(Xr){var ts,fs=typeof Xr;if(fs!=="string"){if(fs==="object"){if(Xr===null)throw new Error(ar);if(yr&&Xr.constructor===ArrayBuffer)Xr=new Uint8Array(Xr);else if(!Array.isArray(Xr)&&(!yr||!ArrayBuffer.isView(Xr)))throw new Error(ar)}else throw new Error(ar);ts=!0}var rs=0,as=Xr.length;if(ts)rs=as;else for(var ps=0;ps<Xr.length;++ps){var xs=Xr.charCodeAt(ps);xs<128?rs+=1:xs<2048?rs+=2:xs<55296||xs>=57344?rs+=3:(xs=65536+((xs&1023)<<10|Xr.charCodeAt(++ps)&1023),rs+=4)}return rs+=this.encode(rs*8),this.update(Xr),rs},zr.prototype.bytepad=function(Xr,ts){for(var fs=this.encode(ts),rs=0;rs<Xr.length;++rs)fs+=this.encodeString(Xr[rs]);var as=ts-fs%ts,ps=[];return ps.length=as,this.update(ps),this},zr.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var Xr=this.blocks,ts=this.lastByteIndex,fs=this.blockCount,rs=this.s;if(Xr[ts>>2]|=this.padding[ts&3],this.lastByteIndex===this.byteCount)for(Xr[0]=Xr[fs],ts=1;ts<fs+1;++ts)Xr[ts]=0;for(Xr[fs-1]|=2147483648,ts=0;ts<fs;++ts)rs[ts]^=Xr[ts];ss(rs)}},zr.prototype.toString=zr.prototype.hex=function(){this.finalize();for(var Xr=this.blockCount,ts=this.s,fs=this.outputBlocks,rs=this.extraBytes,as=0,ps=0,xs="",Ss;ps<fs;){for(as=0;as<Xr&&ps<fs;++as,++ps)Ss=ts[as],xs+=xr[Ss>>4&15]+xr[Ss&15]+xr[Ss>>12&15]+xr[Ss>>8&15]+xr[Ss>>20&15]+xr[Ss>>16&15]+xr[Ss>>28&15]+xr[Ss>>24&15];ps%Xr===0&&(ss(ts),as=0)}return rs&&(Ss=ts[as],xs+=xr[Ss>>4&15]+xr[Ss&15],rs>1&&(xs+=xr[Ss>>12&15]+xr[Ss>>8&15]),rs>2&&(xs+=xr[Ss>>20&15]+xr[Ss>>16&15])),xs},zr.prototype.arrayBuffer=function(){this.finalize();var Xr=this.blockCount,ts=this.s,fs=this.outputBlocks,rs=this.extraBytes,as=0,ps=0,xs=this.outputBits>>3,Ss;rs?Ss=new ArrayBuffer(fs+1<<2):Ss=new ArrayBuffer(xs);for(var Ns=new Uint32Array(Ss);ps<fs;){for(as=0;as<Xr&&ps<fs;++as,++ps)Ns[ps]=ts[as];ps%Xr===0&&ss(ts)}return rs&&(Ns[as]=ts[as],Ss=Ss.slice(0,xs)),Ss},zr.prototype.buffer=zr.prototype.arrayBuffer,zr.prototype.digest=zr.prototype.array=function(){this.finalize();for(var Xr=this.blockCount,ts=this.s,fs=this.outputBlocks,rs=this.extraBytes,as=0,ps=0,xs=[],Ss,Ns;ps<fs;){for(as=0;as<Xr&&ps<fs;++as,++ps)Ss=ps<<2,Ns=ts[as],xs[Ss]=Ns&255,xs[Ss+1]=Ns>>8&255,xs[Ss+2]=Ns>>16&255,xs[Ss+3]=Ns>>24&255;ps%Xr===0&&ss(ts)}return rs&&(Ss=ps<<2,Ns=ts[as],xs[Ss]=Ns&255,rs>1&&(xs[Ss+1]=Ns>>8&255),rs>2&&(xs[Ss+2]=Ns>>16&255)),xs};function Wr(Xr,ts,fs){zr.call(this,Xr,ts,fs)}Wr.prototype=new zr,Wr.prototype.finalize=function(){return this.encode(this.outputBits,!0),zr.prototype.finalize.call(this)};var ss=function(Xr){var ts,fs,rs,as,ps,xs,Ss,Ns,Ts,os,bs,ws,As,gs,vs,Ps,Os,Ms,zs,Hs,Cs,ls,Kr,Zr,hs,ys,Es,Is,$s,Rs,Bs,Ds,Ls,Fs,js,Us,Vs,ni,Js,Ys,Xs,Qs,ai,hi,li,fi,gi,ui,pi,wi,ei,ci,ii,si,di,xi,ri,mi,Ai,Ti,Ri,Ni,bi;for(rs=0;rs<48;rs+=2)as=Xr[0]^Xr[10]^Xr[20]^Xr[30]^Xr[40],ps=Xr[1]^Xr[11]^Xr[21]^Xr[31]^Xr[41],xs=Xr[2]^Xr[12]^Xr[22]^Xr[32]^Xr[42],Ss=Xr[3]^Xr[13]^Xr[23]^Xr[33]^Xr[43],Ns=Xr[4]^Xr[14]^Xr[24]^Xr[34]^Xr[44],Ts=Xr[5]^Xr[15]^Xr[25]^Xr[35]^Xr[45],os=Xr[6]^Xr[16]^Xr[26]^Xr[36]^Xr[46],bs=Xr[7]^Xr[17]^Xr[27]^Xr[37]^Xr[47],ws=Xr[8]^Xr[18]^Xr[28]^Xr[38]^Xr[48],As=Xr[9]^Xr[19]^Xr[29]^Xr[39]^Xr[49],ts=ws^(xs<<1|Ss>>>31),fs=As^(Ss<<1|xs>>>31),Xr[0]^=ts,Xr[1]^=fs,Xr[10]^=ts,Xr[11]^=fs,Xr[20]^=ts,Xr[21]^=fs,Xr[30]^=ts,Xr[31]^=fs,Xr[40]^=ts,Xr[41]^=fs,ts=as^(Ns<<1|Ts>>>31),fs=ps^(Ts<<1|Ns>>>31),Xr[2]^=ts,Xr[3]^=fs,Xr[12]^=ts,Xr[13]^=fs,Xr[22]^=ts,Xr[23]^=fs,Xr[32]^=ts,Xr[33]^=fs,Xr[42]^=ts,Xr[43]^=fs,ts=xs^(os<<1|bs>>>31),fs=Ss^(bs<<1|os>>>31),Xr[4]^=ts,Xr[5]^=fs,Xr[14]^=ts,Xr[15]^=fs,Xr[24]^=ts,Xr[25]^=fs,Xr[34]^=ts,Xr[35]^=fs,Xr[44]^=ts,Xr[45]^=fs,ts=Ns^(ws<<1|As>>>31),fs=Ts^(As<<1|ws>>>31),Xr[6]^=ts,Xr[7]^=fs,Xr[16]^=ts,Xr[17]^=fs,Xr[26]^=ts,Xr[27]^=fs,Xr[36]^=ts,Xr[37]^=fs,Xr[46]^=ts,Xr[47]^=fs,ts=os^(as<<1|ps>>>31),fs=bs^(ps<<1|as>>>31),Xr[8]^=ts,Xr[9]^=fs,Xr[18]^=ts,Xr[19]^=fs,Xr[28]^=ts,Xr[29]^=fs,Xr[38]^=ts,Xr[39]^=fs,Xr[48]^=ts,Xr[49]^=fs,gs=Xr[0],vs=Xr[1],fi=Xr[11]<<4|Xr[10]>>>28,gi=Xr[10]<<4|Xr[11]>>>28,Is=Xr[20]<<3|Xr[21]>>>29,$s=Xr[21]<<3|Xr[20]>>>29,Ti=Xr[31]<<9|Xr[30]>>>23,Ri=Xr[30]<<9|Xr[31]>>>23,Qs=Xr[40]<<18|Xr[41]>>>14,ai=Xr[41]<<18|Xr[40]>>>14,Fs=Xr[2]<<1|Xr[3]>>>31,js=Xr[3]<<1|Xr[2]>>>31,Ps=Xr[13]<<12|Xr[12]>>>20,Os=Xr[12]<<12|Xr[13]>>>20,ui=Xr[22]<<10|Xr[23]>>>22,pi=Xr[23]<<10|Xr[22]>>>22,Rs=Xr[33]<<13|Xr[32]>>>19,Bs=Xr[32]<<13|Xr[33]>>>19,Ni=Xr[42]<<2|Xr[43]>>>30,bi=Xr[43]<<2|Xr[42]>>>30,si=Xr[5]<<30|Xr[4]>>>2,di=Xr[4]<<30|Xr[5]>>>2,Us=Xr[14]<<6|Xr[15]>>>26,Vs=Xr[15]<<6|Xr[14]>>>26,Ms=Xr[25]<<11|Xr[24]>>>21,zs=Xr[24]<<11|Xr[25]>>>21,wi=Xr[34]<<15|Xr[35]>>>17,ei=Xr[35]<<15|Xr[34]>>>17,Ds=Xr[45]<<29|Xr[44]>>>3,Ls=Xr[44]<<29|Xr[45]>>>3,Zr=Xr[6]<<28|Xr[7]>>>4,hs=Xr[7]<<28|Xr[6]>>>4,xi=Xr[17]<<23|Xr[16]>>>9,ri=Xr[16]<<23|Xr[17]>>>9,ni=Xr[26]<<25|Xr[27]>>>7,Js=Xr[27]<<25|Xr[26]>>>7,Hs=Xr[36]<<21|Xr[37]>>>11,Cs=Xr[37]<<21|Xr[36]>>>11,ci=Xr[47]<<24|Xr[46]>>>8,ii=Xr[46]<<24|Xr[47]>>>8,hi=Xr[8]<<27|Xr[9]>>>5,li=Xr[9]<<27|Xr[8]>>>5,ys=Xr[18]<<20|Xr[19]>>>12,Es=Xr[19]<<20|Xr[18]>>>12,mi=Xr[29]<<7|Xr[28]>>>25,Ai=Xr[28]<<7|Xr[29]>>>25,Ys=Xr[38]<<8|Xr[39]>>>24,Xs=Xr[39]<<8|Xr[38]>>>24,ls=Xr[48]<<14|Xr[49]>>>18,Kr=Xr[49]<<14|Xr[48]>>>18,Xr[0]=gs^~Ps&Ms,Xr[1]=vs^~Os&zs,Xr[10]=Zr^~ys&Is,Xr[11]=hs^~Es&$s,Xr[20]=Fs^~Us&ni,Xr[21]=js^~Vs&Js,Xr[30]=hi^~fi&ui,Xr[31]=li^~gi&pi,Xr[40]=si^~xi&mi,Xr[41]=di^~ri&Ai,Xr[2]=Ps^~Ms&Hs,Xr[3]=Os^~zs&Cs,Xr[12]=ys^~Is&Rs,Xr[13]=Es^~$s&Bs,Xr[22]=Us^~ni&Ys,Xr[23]=Vs^~Js&Xs,Xr[32]=fi^~ui&wi,Xr[33]=gi^~pi&ei,Xr[42]=xi^~mi&Ti,Xr[43]=ri^~Ai&Ri,Xr[4]=Ms^~Hs&ls,Xr[5]=zs^~Cs&Kr,Xr[14]=Is^~Rs&Ds,Xr[15]=$s^~Bs&Ls,Xr[24]=ni^~Ys&Qs,Xr[25]=Js^~Xs&ai,Xr[34]=ui^~wi&ci,Xr[35]=pi^~ei&ii,Xr[44]=mi^~Ti&Ni,Xr[45]=Ai^~Ri&bi,Xr[6]=Hs^~ls&gs,Xr[7]=Cs^~Kr&vs,Xr[16]=Rs^~Ds&Zr,Xr[17]=Bs^~Ls&hs,Xr[26]=Ys^~Qs&Fs,Xr[27]=Xs^~ai&js,Xr[36]=wi^~ci&hi,Xr[37]=ei^~ii&li,Xr[46]=Ti^~Ni&si,Xr[47]=Ri^~bi&di,Xr[8]=ls^~gs&Ps,Xr[9]=Kr^~vs&Os,Xr[18]=Ds^~Zr&ys,Xr[19]=Ls^~hs&Es,Xr[28]=Qs^~Fs&Us,Xr[29]=ai^~js&Vs,Xr[38]=ci^~hi&fi,Xr[39]=ii^~li&gi,Xr[48]=Ni^~si&xi,Xr[49]=bi^~di&ri,Xr[0]^=Ar[rs],Xr[1]^=Ar[rs+1]};if(gr)cr.exports=Or;else for(Lr=0;Lr<Mr.length;++Lr)hr[Mr[Lr]]=Or[Mr[Lr]]})()})(sha3$2);var sha3Exports=sha3$2.exports;const sha3$1=getDefaultExportFromCjs(sha3Exports);function keccak256$1(cr){return"0x"+sha3$1.keccak_256(arrayify(cr))}const version$f="rlp/5.7.0",logger$f=new Logger(version$f);function arrayifyInteger$1(cr){const ar=[];for(;cr;)ar.unshift(cr&255),cr>>=8;return ar}function _encode$1(cr){if(Array.isArray(cr)){let fr=[];if(cr.forEach(function(pr){fr=fr.concat(_encode$1(pr))}),fr.length<=55)return fr.unshift(192+fr.length),fr;const hr=arrayifyInteger$1(fr.length);return hr.unshift(247+hr.length),hr.concat(fr)}isBytesLike$1(cr)||logger$f.throwArgumentError("RLP object must be BytesLike","object",cr);const ar=Array.prototype.slice.call(arrayify(cr));if(ar.length===1&&ar[0]<=127)return ar;if(ar.length<=55)return ar.unshift(128+ar.length),ar;const dr=arrayifyInteger$1(ar.length);return dr.unshift(183+dr.length),dr.concat(ar)}function encode$f(cr){return hexlify$1(_encode$1(cr))}const version$e="address/5.7.0",logger$e=new Logger(version$e);function getChecksumAddress$1(cr){isHexString$1(cr,20)||logger$e.throwArgumentError("invalid address","address",cr),cr=cr.toLowerCase();const ar=cr.substring(2).split(""),dr=new Uint8Array(40);for(let hr=0;hr<40;hr++)dr[hr]=ar[hr].charCodeAt(0);const fr=arrayify(keccak256$1(dr));for(let hr=0;hr<40;hr+=2)fr[hr>>1]>>4>=8&&(ar[hr]=ar[hr].toUpperCase()),(fr[hr>>1]&15)>=8&&(ar[hr+1]=ar[hr+1].toUpperCase());return"0x"+ar.join("")}const MAX_SAFE_INTEGER=9007199254740991;function log10(cr){return Math.log10?Math.log10(cr):Math.log(cr)/Math.LN10}const ibanLookup$1={};for(let cr=0;cr<10;cr++)ibanLookup$1[String(cr)]=String(cr);for(let cr=0;cr<26;cr++)ibanLookup$1[String.fromCharCode(65+cr)]=String(10+cr);const safeDigits$1=Math.floor(log10(MAX_SAFE_INTEGER));function ibanChecksum$1(cr){cr=cr.toUpperCase(),cr=cr.substring(4)+cr.substring(0,2)+"00";let ar=cr.split("").map(fr=>ibanLookup$1[fr]).join("");for(;ar.length>=safeDigits$1;){let fr=ar.substring(0,safeDigits$1);ar=parseInt(fr,10)%97+ar.substring(fr.length)}let dr=String(98-parseInt(ar,10)%97);for(;dr.length<2;)dr="0"+dr;return dr}function getAddress$1(cr){let ar=null;if(typeof cr!="string"&&logger$e.throwArgumentError("invalid address","address",cr),cr.match(/^(0x)?[0-9a-fA-F]{40}$/))cr.substring(0,2)!=="0x"&&(cr="0x"+cr),ar=getChecksumAddress$1(cr),cr.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&ar!==cr&&logger$e.throwArgumentError("bad address checksum","address",cr);else if(cr.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(cr.substring(2,4)!==ibanChecksum$1(cr)&&logger$e.throwArgumentError("bad icap checksum","address",cr),ar=_base36To16(cr.substring(4));ar.length<40;)ar="0"+ar;ar=getChecksumAddress$1("0x"+ar)}else logger$e.throwArgumentError("invalid address","address",cr);return ar}const version$d="strings/5.7.0",logger$d=new Logger(version$d);var UnicodeNormalizationForm;(function(cr){cr.current="",cr.NFC="NFC",cr.NFD="NFD",cr.NFKC="NFKC",cr.NFKD="NFKD"})(UnicodeNormalizationForm||(UnicodeNormalizationForm={}));var Utf8ErrorReason;(function(cr){cr.UNEXPECTED_CONTINUE="unexpected continuation byte",cr.BAD_PREFIX="bad codepoint prefix",cr.OVERRUN="string overrun",cr.MISSING_CONTINUE="missing continuation byte",cr.OUT_OF_RANGE="out of UTF-8 range",cr.UTF16_SURROGATE="UTF-16 surrogate",cr.OVERLONG="overlong representation"})(Utf8ErrorReason||(Utf8ErrorReason={}));function toUtf8Bytes$1(cr,ar=UnicodeNormalizationForm.current){ar!=UnicodeNormalizationForm.current&&(logger$d.checkNormalize(),cr=cr.normalize(ar));let dr=[];for(let fr=0;fr<cr.length;fr++){const hr=cr.charCodeAt(fr);if(hr<128)dr.push(hr);else if(hr<2048)dr.push(hr>>6|192),dr.push(hr&63|128);else if((hr&64512)==55296){fr++;const pr=cr.charCodeAt(fr);if(fr>=cr.length||(pr&64512)!==56320)throw new Error("invalid utf-8 string");const mr=65536+((hr&1023)<<10)+(pr&1023);dr.push(mr>>18|240),dr.push(mr>>12&63|128),dr.push(mr>>6&63|128),dr.push(mr&63|128)}else dr.push(hr>>12|224),dr.push(hr>>6&63|128),dr.push(hr&63|128)}return arrayify(dr)}function id$2(cr){return keccak256$1(toUtf8Bytes$1(cr))}const version$c="hash/5.7.0",messagePrefix=`Ethereum Signed Message:
`;function hashMessage$1(cr){return typeof cr=="string"&&(cr=toUtf8Bytes$1(cr)),keccak256$1(concat$6([toUtf8Bytes$1(messagePrefix),toUtf8Bytes$1(String(cr.length)),cr]))}var __awaiter$a=globalThis&&globalThis.__awaiter||function(cr,ar,dr,fr){function hr(pr){return pr instanceof dr?pr:new dr(function(mr){mr(pr)})}return new(dr||(dr=Promise))(function(pr,mr){function gr(wr){try{xr(fr.next(wr))}catch(br){mr(br)}}function yr(wr){try{xr(fr.throw(wr))}catch(br){mr(br)}}function xr(wr){wr.done?pr(wr.value):hr(wr.value).then(gr,yr)}xr((fr=fr.apply(cr,ar||[])).next())})};const logger$c=new Logger(version$c),padding$1=new Uint8Array(32);padding$1.fill(0);const NegativeOne=BigNumber.from(-1),Zero=BigNumber.from(0),One=BigNumber.from(1),MaxUint256=BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight$1(cr){const ar=arrayify(cr),dr=ar.length%32;return dr?hexConcat([ar,padding$1.slice(dr)]):hexlify$1(ar)}const hexTrue$1=hexZeroPad(One.toHexString(),32),hexFalse$1=hexZeroPad(Zero.toHexString(),32),domainFieldTypes$1={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames$1=["name","version","chainId","verifyingContract","salt"];function checkString$1(cr){return function(ar){return typeof ar!="string"&&logger$c.throwArgumentError(`invalid domain value for ${JSON.stringify(cr)}`,`domain.${cr}`,ar),ar}}const domainChecks$1={name:checkString$1("name"),version:checkString$1("version"),chainId:function(cr){try{return BigNumber.from(cr).toString()}catch{}return logger$c.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",cr)},verifyingContract:function(cr){try{return getAddress$1(cr).toLowerCase()}catch{}return logger$c.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",cr)},salt:function(cr){try{const ar=arrayify(cr);if(ar.length!==32)throw new Error("bad length");return hexlify$1(ar)}catch{}return logger$c.throwArgumentError('invalid domain value "salt"',"domain.salt",cr)}};function getBaseEncoder$1(cr){{const ar=cr.match(/^(u?)int(\d*)$/);if(ar){const dr=ar[1]==="",fr=parseInt(ar[2]||"256");(fr%8!==0||fr>256||ar[2]&&ar[2]!==String(fr))&&logger$c.throwArgumentError("invalid numeric width","type",cr);const hr=MaxUint256.mask(dr?fr-1:fr),pr=dr?hr.add(One).mul(NegativeOne):Zero;return function(mr){const gr=BigNumber.from(mr);return(gr.lt(pr)||gr.gt(hr))&&logger$c.throwArgumentError(`value out-of-bounds for ${cr}`,"value",mr),hexZeroPad(gr.toTwos(256).toHexString(),32)}}}{const ar=cr.match(/^bytes(\d+)$/);if(ar){const dr=parseInt(ar[1]);return(dr===0||dr>32||ar[1]!==String(dr))&&logger$c.throwArgumentError("invalid bytes width","type",cr),function(fr){return arrayify(fr).length!==dr&&logger$c.throwArgumentError(`invalid length for ${cr}`,"value",fr),hexPadRight$1(fr)}}}switch(cr){case"address":return function(ar){return hexZeroPad(getAddress$1(ar),32)};case"bool":return function(ar){return ar?hexTrue$1:hexFalse$1};case"bytes":return function(ar){return keccak256$1(ar)};case"string":return function(ar){return id$2(ar)}}return null}function encodeType$1(cr,ar){return`${cr}(${ar.map(({name:dr,type:fr})=>fr+" "+dr).join(",")})`}let TypedDataEncoder$1=class Pi{constructor(ar){defineReadOnly(this,"types",Object.freeze(deepCopy(ar))),defineReadOnly(this,"_encoderCache",{}),defineReadOnly(this,"_types",{});const dr={},fr={},hr={};Object.keys(ar).forEach(gr=>{dr[gr]={},fr[gr]=[],hr[gr]={}});for(const gr in ar){const yr={};ar[gr].forEach(xr=>{yr[xr.name]&&logger$c.throwArgumentError(`duplicate variable name ${JSON.stringify(xr.name)} in ${JSON.stringify(gr)}`,"types",ar),yr[xr.name]=!0;const wr=xr.type.match(/^([^\x5b]*)(\x5b|$)/)[1];wr===gr&&logger$c.throwArgumentError(`circular type reference to ${JSON.stringify(wr)}`,"types",ar),!getBaseEncoder$1(wr)&&(fr[wr]||logger$c.throwArgumentError(`unknown type ${JSON.stringify(wr)}`,"types",ar),fr[wr].push(gr),dr[gr][wr]=!0)})}const pr=Object.keys(fr).filter(gr=>fr[gr].length===0);pr.length===0?logger$c.throwArgumentError("missing primary type","types",ar):pr.length>1&&logger$c.throwArgumentError(`ambiguous primary types or unused types: ${pr.map(gr=>JSON.stringify(gr)).join(", ")}`,"types",ar),defineReadOnly(this,"primaryType",pr[0]);function mr(gr,yr){yr[gr]&&logger$c.throwArgumentError(`circular type reference to ${JSON.stringify(gr)}`,"types",ar),yr[gr]=!0,Object.keys(dr[gr]).forEach(xr=>{fr[xr]&&(mr(xr,yr),Object.keys(yr).forEach(wr=>{hr[wr][xr]=!0}))}),delete yr[gr]}mr(this.primaryType,{});for(const gr in hr){const yr=Object.keys(hr[gr]);yr.sort(),this._types[gr]=encodeType$1(gr,ar[gr])+yr.map(xr=>encodeType$1(xr,ar[xr])).join("")}}getEncoder(ar){let dr=this._encoderCache[ar];return dr||(dr=this._encoderCache[ar]=this._getEncoder(ar)),dr}_getEncoder(ar){{const hr=getBaseEncoder$1(ar);if(hr)return hr}const dr=ar.match(/^(.*)(\x5b(\d*)\x5d)$/);if(dr){const hr=dr[1],pr=this.getEncoder(hr),mr=parseInt(dr[3]);return gr=>{mr>=0&&gr.length!==mr&&logger$c.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",gr);let yr=gr.map(pr);return this._types[hr]&&(yr=yr.map(keccak256$1)),keccak256$1(hexConcat(yr))}}const fr=this.types[ar];if(fr){const hr=id$2(this._types[ar]);return pr=>{const mr=fr.map(({name:gr,type:yr})=>{const xr=this.getEncoder(yr)(pr[gr]);return this._types[yr]?keccak256$1(xr):xr});return mr.unshift(hr),hexConcat(mr)}}return logger$c.throwArgumentError(`unknown type: ${ar}`,"type",ar)}encodeType(ar){const dr=this._types[ar];return dr||logger$c.throwArgumentError(`unknown type: ${JSON.stringify(ar)}`,"name",ar),dr}encodeData(ar,dr){return this.getEncoder(ar)(dr)}hashStruct(ar,dr){return keccak256$1(this.encodeData(ar,dr))}encode(ar){return this.encodeData(this.primaryType,ar)}hash(ar){return this.hashStruct(this.primaryType,ar)}_visit(ar,dr,fr){if(getBaseEncoder$1(ar))return fr(ar,dr);const hr=ar.match(/^(.*)(\x5b(\d*)\x5d)$/);if(hr){const mr=hr[1],gr=parseInt(hr[3]);return gr>=0&&dr.length!==gr&&logger$c.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",dr),dr.map(yr=>this._visit(mr,yr,fr))}const pr=this.types[ar];return pr?pr.reduce((mr,{name:gr,type:yr})=>(mr[gr]=this._visit(yr,dr[gr],fr),mr),{}):logger$c.throwArgumentError(`unknown type: ${ar}`,"type",ar)}visit(ar,dr){return this._visit(this.primaryType,ar,dr)}static from(ar){return new Pi(ar)}static getPrimaryType(ar){return Pi.from(ar).primaryType}static hashStruct(ar,dr,fr){return Pi.from(dr).hashStruct(ar,fr)}static hashDomain(ar){const dr=[];for(const fr in ar){const hr=domainFieldTypes$1[fr];hr||logger$c.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(fr)}`,"domain",ar),dr.push({name:fr,type:hr})}return dr.sort((fr,hr)=>domainFieldNames$1.indexOf(fr.name)-domainFieldNames$1.indexOf(hr.name)),Pi.hashStruct("EIP712Domain",{EIP712Domain:dr},ar)}static encode(ar,dr,fr){return hexConcat(["0x1901",Pi.hashDomain(ar),Pi.from(dr).hash(fr)])}static hash(ar,dr,fr){return keccak256$1(Pi.encode(ar,dr,fr))}static resolveNames(ar,dr,fr,hr){return __awaiter$a(this,void 0,void 0,function*(){ar=shallowCopy(ar);const pr={};ar.verifyingContract&&!isHexString$1(ar.verifyingContract,20)&&(pr[ar.verifyingContract]="0x");const mr=Pi.from(dr);mr.visit(fr,(gr,yr)=>(gr==="address"&&!isHexString$1(yr,20)&&(pr[yr]="0x"),yr));for(const gr in pr)pr[gr]=yield hr(gr);return ar.verifyingContract&&pr[ar.verifyingContract]&&(ar.verifyingContract=pr[ar.verifyingContract]),fr=mr.visit(fr,(gr,yr)=>gr==="address"&&pr[yr]?pr[yr]:yr),{domain:ar,value:fr}})}static getPayload(ar,dr,fr){Pi.hashDomain(ar);const hr={},pr=[];domainFieldNames$1.forEach(yr=>{const xr=ar[yr];xr!=null&&(hr[yr]=domainChecks$1[yr](xr),pr.push({name:yr,type:domainFieldTypes$1[yr]}))});const mr=Pi.from(dr),gr=shallowCopy(dr);return gr.EIP712Domain?logger$c.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",dr):gr.EIP712Domain=pr,mr.encode(fr),{types:gr,domain:hr,primaryType:mr.primaryType,message:mr.visit(fr,(yr,xr)=>{if(yr.match(/^bytes(\d*)/))return hexlify$1(arrayify(xr));if(yr.match(/^u?int/))return BigNumber.from(xr).toString();switch(yr){case"address":return xr.toLowerCase();case"bool":return!!xr;case"string":return typeof xr!="string"&&logger$c.throwArgumentError("invalid string","value",xr),xr}return logger$c.throwArgumentError("unsupported type","type",yr)})}}};const version$b="abstract-provider/5.7.0";var __awaiter$9=globalThis&&globalThis.__awaiter||function(cr,ar,dr,fr){function hr(pr){return pr instanceof dr?pr:new dr(function(mr){mr(pr)})}return new(dr||(dr=Promise))(function(pr,mr){function gr(wr){try{xr(fr.next(wr))}catch(br){mr(br)}}function yr(wr){try{xr(fr.throw(wr))}catch(br){mr(br)}}function xr(wr){wr.done?pr(wr.value):hr(wr.value).then(gr,yr)}xr((fr=fr.apply(cr,ar||[])).next())})};const logger$b=new Logger(version$b);class Provider{constructor(){logger$b.checkAbstract(new.target,Provider),defineReadOnly(this,"_isProvider",!0)}getFeeData(){return __awaiter$9(this,void 0,void 0,function*(){const{block:ar,gasPrice:dr}=yield resolveProperties$1({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(mr=>null)});let fr=null,hr=null,pr=null;return ar&&ar.baseFeePerGas&&(fr=ar.baseFeePerGas,pr=BigNumber.from("1500000000"),hr=ar.baseFeePerGas.mul(2).add(pr)),{lastBaseFeePerGas:fr,maxFeePerGas:hr,maxPriorityFeePerGas:pr,gasPrice:dr}})}addListener(ar,dr){return this.on(ar,dr)}removeListener(ar,dr){return this.off(ar,dr)}static isProvider(ar){return!!(ar&&ar._isProvider)}}const version$a="abstract-signer/5.7.0";var __awaiter$8=globalThis&&globalThis.__awaiter||function(cr,ar,dr,fr){function hr(pr){return pr instanceof dr?pr:new dr(function(mr){mr(pr)})}return new(dr||(dr=Promise))(function(pr,mr){function gr(wr){try{xr(fr.next(wr))}catch(br){mr(br)}}function yr(wr){try{xr(fr.throw(wr))}catch(br){mr(br)}}function xr(wr){wr.done?pr(wr.value):hr(wr.value).then(gr,yr)}xr((fr=fr.apply(cr,ar||[])).next())})};const logger$a=new Logger(version$a),allowedTransactionKeys$1=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],forwardErrors=[Logger.errors.INSUFFICIENT_FUNDS,Logger.errors.NONCE_EXPIRED,Logger.errors.REPLACEMENT_UNDERPRICED];class Signer{constructor(){logger$a.checkAbstract(new.target,Signer),defineReadOnly(this,"_isSigner",!0)}getBalance(ar){return __awaiter$8(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),ar)})}getTransactionCount(ar){return __awaiter$8(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),ar)})}estimateGas(ar){return __awaiter$8(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const dr=yield resolveProperties$1(this.checkTransaction(ar));return yield this.provider.estimateGas(dr)})}call(ar,dr){return __awaiter$8(this,void 0,void 0,function*(){this._checkProvider("call");const fr=yield resolveProperties$1(this.checkTransaction(ar));return yield this.provider.call(fr,dr)})}sendTransaction(ar){return __awaiter$8(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const dr=yield this.populateTransaction(ar),fr=yield this.signTransaction(dr);return yield this.provider.sendTransaction(fr)})}getChainId(){return __awaiter$8(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return __awaiter$8(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return __awaiter$8(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(ar){return __awaiter$8(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(ar)})}checkTransaction(ar){for(const fr in ar)allowedTransactionKeys$1.indexOf(fr)===-1&&logger$a.throwArgumentError("invalid transaction key: "+fr,"transaction",ar);const dr=shallowCopy(ar);return dr.from==null?dr.from=this.getAddress():dr.from=Promise.all([Promise.resolve(dr.from),this.getAddress()]).then(fr=>(fr[0].toLowerCase()!==fr[1].toLowerCase()&&logger$a.throwArgumentError("from address mismatch","transaction",ar),fr[0])),dr}populateTransaction(ar){return __awaiter$8(this,void 0,void 0,function*(){const dr=yield resolveProperties$1(this.checkTransaction(ar));dr.to!=null&&(dr.to=Promise.resolve(dr.to).then(hr=>__awaiter$8(this,void 0,void 0,function*(){if(hr==null)return null;const pr=yield this.resolveName(hr);return pr==null&&logger$a.throwArgumentError("provided ENS name resolves to null","tx.to",hr),pr})),dr.to.catch(hr=>{}));const fr=dr.maxFeePerGas!=null||dr.maxPriorityFeePerGas!=null;if(dr.gasPrice!=null&&(dr.type===2||fr)?logger$a.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",ar):(dr.type===0||dr.type===1)&&fr&&logger$a.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",ar),(dr.type===2||dr.type==null)&&dr.maxFeePerGas!=null&&dr.maxPriorityFeePerGas!=null)dr.type=2;else if(dr.type===0||dr.type===1)dr.gasPrice==null&&(dr.gasPrice=this.getGasPrice());else{const hr=yield this.getFeeData();if(dr.type==null)if(hr.maxFeePerGas!=null&&hr.maxPriorityFeePerGas!=null)if(dr.type=2,dr.gasPrice!=null){const pr=dr.gasPrice;delete dr.gasPrice,dr.maxFeePerGas=pr,dr.maxPriorityFeePerGas=pr}else dr.maxFeePerGas==null&&(dr.maxFeePerGas=hr.maxFeePerGas),dr.maxPriorityFeePerGas==null&&(dr.maxPriorityFeePerGas=hr.maxPriorityFeePerGas);else hr.gasPrice!=null?(fr&&logger$a.throwError("network does not support EIP-1559",Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),dr.gasPrice==null&&(dr.gasPrice=hr.gasPrice),dr.type=0):logger$a.throwError("failed to get consistent fee data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else dr.type===2&&(dr.maxFeePerGas==null&&(dr.maxFeePerGas=hr.maxFeePerGas),dr.maxPriorityFeePerGas==null&&(dr.maxPriorityFeePerGas=hr.maxPriorityFeePerGas))}return dr.nonce==null&&(dr.nonce=this.getTransactionCount("pending")),dr.gasLimit==null&&(dr.gasLimit=this.estimateGas(dr).catch(hr=>{if(forwardErrors.indexOf(hr.code)>=0)throw hr;return logger$a.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:hr,tx:dr})})),dr.chainId==null?dr.chainId=this.getChainId():dr.chainId=Promise.all([Promise.resolve(dr.chainId),this.getChainId()]).then(hr=>(hr[1]!==0&&hr[0]!==hr[1]&&logger$a.throwArgumentError("chainId address mismatch","transaction",ar),hr[0])),yield resolveProperties$1(dr)})}_checkProvider(ar){this.provider||logger$a.throwError("missing provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:ar||"_checkProvider"})}static isSigner(ar){return!!(ar&&ar._isSigner)}}var hash$5={},utils$e={},minimalisticAssert$1=assert$g;function assert$g(cr,ar){if(!cr)throw new Error(ar||"Assertion failed")}assert$g.equal=function(ar,dr,fr){if(ar!=dr)throw new Error(fr||"Assertion failed: "+ar+" != "+dr)};var inherits_browser$1={exports:{}};typeof Object.create=="function"?inherits_browser$1.exports=function(ar,dr){dr&&(ar.super_=dr,ar.prototype=Object.create(dr.prototype,{constructor:{value:ar,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser$1.exports=function(ar,dr){if(dr){ar.super_=dr;var fr=function(){};fr.prototype=dr.prototype,ar.prototype=new fr,ar.prototype.constructor=ar}};var inherits_browserExports=inherits_browser$1.exports,assert$f=minimalisticAssert$1,inherits=inherits_browserExports;utils$e.inherits=inherits;function isSurrogatePair(cr,ar){return(cr.charCodeAt(ar)&64512)!==55296||ar<0||ar+1>=cr.length?!1:(cr.charCodeAt(ar+1)&64512)===56320}function toArray(cr,ar){if(Array.isArray(cr))return cr.slice();if(!cr)return[];var dr=[];if(typeof cr=="string")if(ar){if(ar==="hex")for(cr=cr.replace(/[^a-z0-9]+/ig,""),cr.length%2!==0&&(cr="0"+cr),hr=0;hr<cr.length;hr+=2)dr.push(parseInt(cr[hr]+cr[hr+1],16))}else for(var fr=0,hr=0;hr<cr.length;hr++){var pr=cr.charCodeAt(hr);pr<128?dr[fr++]=pr:pr<2048?(dr[fr++]=pr>>6|192,dr[fr++]=pr&63|128):isSurrogatePair(cr,hr)?(pr=65536+((pr&1023)<<10)+(cr.charCodeAt(++hr)&1023),dr[fr++]=pr>>18|240,dr[fr++]=pr>>12&63|128,dr[fr++]=pr>>6&63|128,dr[fr++]=pr&63|128):(dr[fr++]=pr>>12|224,dr[fr++]=pr>>6&63|128,dr[fr++]=pr&63|128)}else for(hr=0;hr<cr.length;hr++)dr[hr]=cr[hr]|0;return dr}utils$e.toArray=toArray;function toHex(cr){for(var ar="",dr=0;dr<cr.length;dr++)ar+=zero2(cr[dr].toString(16));return ar}utils$e.toHex=toHex;function htonl(cr){var ar=cr>>>24|cr>>>8&65280|cr<<8&16711680|(cr&255)<<24;return ar>>>0}utils$e.htonl=htonl;function toHex32(cr,ar){for(var dr="",fr=0;fr<cr.length;fr++){var hr=cr[fr];ar==="little"&&(hr=htonl(hr)),dr+=zero8(hr.toString(16))}return dr}utils$e.toHex32=toHex32;function zero2(cr){return cr.length===1?"0"+cr:cr}utils$e.zero2=zero2;function zero8(cr){return cr.length===7?"0"+cr:cr.length===6?"00"+cr:cr.length===5?"000"+cr:cr.length===4?"0000"+cr:cr.length===3?"00000"+cr:cr.length===2?"000000"+cr:cr.length===1?"0000000"+cr:cr}utils$e.zero8=zero8;function join32(cr,ar,dr,fr){var hr=dr-ar;assert$f(hr%4===0);for(var pr=new Array(hr/4),mr=0,gr=ar;mr<pr.length;mr++,gr+=4){var yr;fr==="big"?yr=cr[gr]<<24|cr[gr+1]<<16|cr[gr+2]<<8|cr[gr+3]:yr=cr[gr+3]<<24|cr[gr+2]<<16|cr[gr+1]<<8|cr[gr],pr[mr]=yr>>>0}return pr}utils$e.join32=join32;function split32(cr,ar){for(var dr=new Array(cr.length*4),fr=0,hr=0;fr<cr.length;fr++,hr+=4){var pr=cr[fr];ar==="big"?(dr[hr]=pr>>>24,dr[hr+1]=pr>>>16&255,dr[hr+2]=pr>>>8&255,dr[hr+3]=pr&255):(dr[hr+3]=pr>>>24,dr[hr+2]=pr>>>16&255,dr[hr+1]=pr>>>8&255,dr[hr]=pr&255)}return dr}utils$e.split32=split32;function rotr32$1(cr,ar){return cr>>>ar|cr<<32-ar}utils$e.rotr32=rotr32$1;function rotl32$2(cr,ar){return cr<<ar|cr>>>32-ar}utils$e.rotl32=rotl32$2;function sum32$3(cr,ar){return cr+ar>>>0}utils$e.sum32=sum32$3;function sum32_3$1(cr,ar,dr){return cr+ar+dr>>>0}utils$e.sum32_3=sum32_3$1;function sum32_4$2(cr,ar,dr,fr){return cr+ar+dr+fr>>>0}utils$e.sum32_4=sum32_4$2;function sum32_5$2(cr,ar,dr,fr,hr){return cr+ar+dr+fr+hr>>>0}utils$e.sum32_5=sum32_5$2;function sum64$1(cr,ar,dr,fr){var hr=cr[ar],pr=cr[ar+1],mr=fr+pr>>>0,gr=(mr<fr?1:0)+dr+hr;cr[ar]=gr>>>0,cr[ar+1]=mr}utils$e.sum64=sum64$1;function sum64_hi$1(cr,ar,dr,fr){var hr=ar+fr>>>0,pr=(hr<ar?1:0)+cr+dr;return pr>>>0}utils$e.sum64_hi=sum64_hi$1;function sum64_lo$1(cr,ar,dr,fr){var hr=ar+fr;return hr>>>0}utils$e.sum64_lo=sum64_lo$1;function sum64_4_hi$1(cr,ar,dr,fr,hr,pr,mr,gr){var yr=0,xr=ar;xr=xr+fr>>>0,yr+=xr<ar?1:0,xr=xr+pr>>>0,yr+=xr<pr?1:0,xr=xr+gr>>>0,yr+=xr<gr?1:0;var wr=cr+dr+hr+mr+yr;return wr>>>0}utils$e.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(cr,ar,dr,fr,hr,pr,mr,gr){var yr=ar+fr+pr+gr;return yr>>>0}utils$e.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(cr,ar,dr,fr,hr,pr,mr,gr,yr,xr){var wr=0,br=ar;br=br+fr>>>0,wr+=br<ar?1:0,br=br+pr>>>0,wr+=br<pr?1:0,br=br+gr>>>0,wr+=br<gr?1:0,br=br+xr>>>0,wr+=br<xr?1:0;var Sr=cr+dr+hr+mr+yr+wr;return Sr>>>0}utils$e.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(cr,ar,dr,fr,hr,pr,mr,gr,yr,xr){var wr=ar+fr+pr+gr+xr;return wr>>>0}utils$e.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(cr,ar,dr){var fr=ar<<32-dr|cr>>>dr;return fr>>>0}utils$e.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(cr,ar,dr){var fr=cr<<32-dr|ar>>>dr;return fr>>>0}utils$e.rotr64_lo=rotr64_lo$1;function shr64_hi$1(cr,ar,dr){return cr>>>dr}utils$e.shr64_hi=shr64_hi$1;function shr64_lo$1(cr,ar,dr){var fr=cr<<32-dr|ar>>>dr;return fr>>>0}utils$e.shr64_lo=shr64_lo$1;var common$5={},utils$d=utils$e,assert$e=minimalisticAssert$1;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$5.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function(ar,dr){if(ar=utils$d.toArray(ar,dr),this.pending?this.pending=this.pending.concat(ar):this.pending=ar,this.pendingTotal+=ar.length,this.pending.length>=this._delta8){ar=this.pending;var fr=ar.length%this._delta8;this.pending=ar.slice(ar.length-fr,ar.length),this.pending.length===0&&(this.pending=null),ar=utils$d.join32(ar,0,ar.length-fr,this.endian);for(var hr=0;hr<ar.length;hr+=this._delta32)this._update(ar,hr,hr+this._delta32)}return this};BlockHash$4.prototype.digest=function(ar){return this.update(this._pad()),assert$e(this.pending===null),this._digest(ar)};BlockHash$4.prototype._pad=function(){var ar=this.pendingTotal,dr=this._delta8,fr=dr-(ar+this.padLength)%dr,hr=new Array(fr+this.padLength);hr[0]=128;for(var pr=1;pr<fr;pr++)hr[pr]=0;if(ar<<=3,this.endian==="big"){for(var mr=8;mr<this.padLength;mr++)hr[pr++]=0;hr[pr++]=0,hr[pr++]=0,hr[pr++]=0,hr[pr++]=0,hr[pr++]=ar>>>24&255,hr[pr++]=ar>>>16&255,hr[pr++]=ar>>>8&255,hr[pr++]=ar&255}else for(hr[pr++]=ar&255,hr[pr++]=ar>>>8&255,hr[pr++]=ar>>>16&255,hr[pr++]=ar>>>24&255,hr[pr++]=0,hr[pr++]=0,hr[pr++]=0,hr[pr++]=0,mr=8;mr<this.padLength;mr++)hr[pr++]=0;return hr};var sha$2={},common$4={},utils$c=utils$e,rotr32=utils$c.rotr32;function ft_1$1(cr,ar,dr,fr){if(cr===0)return ch32$1(ar,dr,fr);if(cr===1||cr===3)return p32(ar,dr,fr);if(cr===2)return maj32$1(ar,dr,fr)}common$4.ft_1=ft_1$1;function ch32$1(cr,ar,dr){return cr&ar^~cr&dr}common$4.ch32=ch32$1;function maj32$1(cr,ar,dr){return cr&ar^cr&dr^ar&dr}common$4.maj32=maj32$1;function p32(cr,ar,dr){return cr^ar^dr}common$4.p32=p32;function s0_256$1(cr){return rotr32(cr,2)^rotr32(cr,13)^rotr32(cr,22)}common$4.s0_256=s0_256$1;function s1_256$1(cr){return rotr32(cr,6)^rotr32(cr,11)^rotr32(cr,25)}common$4.s1_256=s1_256$1;function g0_256$1(cr){return rotr32(cr,7)^rotr32(cr,18)^cr>>>3}common$4.g0_256=g0_256$1;function g1_256$1(cr){return rotr32(cr,17)^rotr32(cr,19)^cr>>>10}common$4.g1_256=g1_256$1;var utils$b=utils$e,common$3=common$5,shaCommon$1=common$4,rotl32$1=utils$b.rotl32,sum32$2=utils$b.sum32,sum32_5$1=utils$b.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$3.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$b.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function(ar,dr){for(var fr=this.W,hr=0;hr<16;hr++)fr[hr]=ar[dr+hr];for(;hr<fr.length;hr++)fr[hr]=rotl32$1(fr[hr-3]^fr[hr-8]^fr[hr-14]^fr[hr-16],1);var pr=this.h[0],mr=this.h[1],gr=this.h[2],yr=this.h[3],xr=this.h[4];for(hr=0;hr<fr.length;hr++){var wr=~~(hr/20),br=sum32_5$1(rotl32$1(pr,5),ft_1(wr,mr,gr,yr),xr,fr[hr],sha1_K[wr]);xr=yr,yr=gr,gr=rotl32$1(mr,30),mr=pr,pr=br}this.h[0]=sum32$2(this.h[0],pr),this.h[1]=sum32$2(this.h[1],mr),this.h[2]=sum32$2(this.h[2],gr),this.h[3]=sum32$2(this.h[3],yr),this.h[4]=sum32$2(this.h[4],xr)};SHA1.prototype._digest=function(ar){return ar==="hex"?utils$b.toHex32(this.h,"big"):utils$b.split32(this.h,"big")};var utils$a=utils$e,common$2=common$5,shaCommon=common$4,assert$d=minimalisticAssert$1,sum32$1=utils$a.sum32,sum32_4$1=utils$a.sum32_4,sum32_5=utils$a.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$2.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$2(){if(!(this instanceof SHA256$2))return new SHA256$2;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$a.inherits(SHA256$2,BlockHash$2);var _256=SHA256$2;SHA256$2.blockSize=512;SHA256$2.outSize=256;SHA256$2.hmacStrength=192;SHA256$2.padLength=64;SHA256$2.prototype._update=function(ar,dr){for(var fr=this.W,hr=0;hr<16;hr++)fr[hr]=ar[dr+hr];for(;hr<fr.length;hr++)fr[hr]=sum32_4$1(g1_256(fr[hr-2]),fr[hr-7],g0_256(fr[hr-15]),fr[hr-16]);var pr=this.h[0],mr=this.h[1],gr=this.h[2],yr=this.h[3],xr=this.h[4],wr=this.h[5],br=this.h[6],Sr=this.h[7];for(assert$d(this.k.length===fr.length),hr=0;hr<fr.length;hr++){var vr=sum32_5(Sr,s1_256(xr),ch32(xr,wr,br),this.k[hr],fr[hr]),Er=sum32$1(s0_256(pr),maj32(pr,mr,gr));Sr=br,br=wr,wr=xr,xr=sum32$1(yr,vr),yr=gr,gr=mr,mr=pr,pr=sum32$1(vr,Er)}this.h[0]=sum32$1(this.h[0],pr),this.h[1]=sum32$1(this.h[1],mr),this.h[2]=sum32$1(this.h[2],gr),this.h[3]=sum32$1(this.h[3],yr),this.h[4]=sum32$1(this.h[4],xr),this.h[5]=sum32$1(this.h[5],wr),this.h[6]=sum32$1(this.h[6],br),this.h[7]=sum32$1(this.h[7],Sr)};SHA256$2.prototype._digest=function(ar){return ar==="hex"?utils$a.toHex32(this.h,"big"):utils$a.split32(this.h,"big")};var utils$9=utils$e,SHA256$1=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256$1.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$9.inherits(SHA224,SHA256$1);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function(ar){return ar==="hex"?utils$9.toHex32(this.h.slice(0,7),"big"):utils$9.split32(this.h.slice(0,7),"big")};var utils$8=utils$e,common$1=common$5,assert$c=minimalisticAssert$1,rotr64_hi=utils$8.rotr64_hi,rotr64_lo=utils$8.rotr64_lo,shr64_hi=utils$8.shr64_hi,shr64_lo=utils$8.shr64_lo,sum64=utils$8.sum64,sum64_hi=utils$8.sum64_hi,sum64_lo=utils$8.sum64_lo,sum64_4_hi=utils$8.sum64_4_hi,sum64_4_lo=utils$8.sum64_4_lo,sum64_5_hi=utils$8.sum64_5_hi,sum64_5_lo=utils$8.sum64_5_lo,BlockHash$1=common$1.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$2(){if(!(this instanceof SHA512$2))return new SHA512$2;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$8.inherits(SHA512$2,BlockHash$1);var _512=SHA512$2;SHA512$2.blockSize=1024;SHA512$2.outSize=512;SHA512$2.hmacStrength=192;SHA512$2.padLength=128;SHA512$2.prototype._prepareBlock=function(ar,dr){for(var fr=this.W,hr=0;hr<32;hr++)fr[hr]=ar[dr+hr];for(;hr<fr.length;hr+=2){var pr=g1_512_hi(fr[hr-4],fr[hr-3]),mr=g1_512_lo(fr[hr-4],fr[hr-3]),gr=fr[hr-14],yr=fr[hr-13],xr=g0_512_hi(fr[hr-30],fr[hr-29]),wr=g0_512_lo(fr[hr-30],fr[hr-29]),br=fr[hr-32],Sr=fr[hr-31];fr[hr]=sum64_4_hi(pr,mr,gr,yr,xr,wr,br,Sr),fr[hr+1]=sum64_4_lo(pr,mr,gr,yr,xr,wr,br,Sr)}};SHA512$2.prototype._update=function(ar,dr){this._prepareBlock(ar,dr);var fr=this.W,hr=this.h[0],pr=this.h[1],mr=this.h[2],gr=this.h[3],yr=this.h[4],xr=this.h[5],wr=this.h[6],br=this.h[7],Sr=this.h[8],vr=this.h[9],Er=this.h[10],Ar=this.h[11],_r=this.h[12],Cr=this.h[13],kr=this.h[14],Rr=this.h[15];assert$c(this.k.length===fr.length);for(var Ir=0;Ir<fr.length;Ir+=2){var Nr=kr,Pr=Rr,Tr=s1_512_hi(Sr,vr),Br=s1_512_lo(Sr,vr),Fr=ch64_hi(Sr,vr,Er,Ar,_r),jr=ch64_lo(Sr,vr,Er,Ar,_r,Cr),Ur=this.k[Ir],qr=this.k[Ir+1],Hr=fr[Ir],Or=fr[Ir+1],Mr=sum64_5_hi(Nr,Pr,Tr,Br,Fr,jr,Ur,qr,Hr,Or),Lr=sum64_5_lo(Nr,Pr,Tr,Br,Fr,jr,Ur,qr,Hr,Or);Nr=s0_512_hi(hr,pr),Pr=s0_512_lo(hr,pr),Tr=maj64_hi(hr,pr,mr,gr,yr),Br=maj64_lo(hr,pr,mr,gr,yr,xr);var Vr=sum64_hi(Nr,Pr,Tr,Br),Jr=sum64_lo(Nr,Pr,Tr,Br);kr=_r,Rr=Cr,_r=Er,Cr=Ar,Er=Sr,Ar=vr,Sr=sum64_hi(wr,br,Mr,Lr),vr=sum64_lo(br,br,Mr,Lr),wr=yr,br=xr,yr=mr,xr=gr,mr=hr,gr=pr,hr=sum64_hi(Mr,Lr,Vr,Jr),pr=sum64_lo(Mr,Lr,Vr,Jr)}sum64(this.h,0,hr,pr),sum64(this.h,2,mr,gr),sum64(this.h,4,yr,xr),sum64(this.h,6,wr,br),sum64(this.h,8,Sr,vr),sum64(this.h,10,Er,Ar),sum64(this.h,12,_r,Cr),sum64(this.h,14,kr,Rr)};SHA512$2.prototype._digest=function(ar){return ar==="hex"?utils$8.toHex32(this.h,"big"):utils$8.split32(this.h,"big")};function ch64_hi(cr,ar,dr,fr,hr){var pr=cr&dr^~cr&hr;return pr<0&&(pr+=4294967296),pr}function ch64_lo(cr,ar,dr,fr,hr,pr){var mr=ar&fr^~ar&pr;return mr<0&&(mr+=4294967296),mr}function maj64_hi(cr,ar,dr,fr,hr){var pr=cr&dr^cr&hr^dr&hr;return pr<0&&(pr+=4294967296),pr}function maj64_lo(cr,ar,dr,fr,hr,pr){var mr=ar&fr^ar&pr^fr&pr;return mr<0&&(mr+=4294967296),mr}function s0_512_hi(cr,ar){var dr=rotr64_hi(cr,ar,28),fr=rotr64_hi(ar,cr,2),hr=rotr64_hi(ar,cr,7),pr=dr^fr^hr;return pr<0&&(pr+=4294967296),pr}function s0_512_lo(cr,ar){var dr=rotr64_lo(cr,ar,28),fr=rotr64_lo(ar,cr,2),hr=rotr64_lo(ar,cr,7),pr=dr^fr^hr;return pr<0&&(pr+=4294967296),pr}function s1_512_hi(cr,ar){var dr=rotr64_hi(cr,ar,14),fr=rotr64_hi(cr,ar,18),hr=rotr64_hi(ar,cr,9),pr=dr^fr^hr;return pr<0&&(pr+=4294967296),pr}function s1_512_lo(cr,ar){var dr=rotr64_lo(cr,ar,14),fr=rotr64_lo(cr,ar,18),hr=rotr64_lo(ar,cr,9),pr=dr^fr^hr;return pr<0&&(pr+=4294967296),pr}function g0_512_hi(cr,ar){var dr=rotr64_hi(cr,ar,1),fr=rotr64_hi(cr,ar,8),hr=shr64_hi(cr,ar,7),pr=dr^fr^hr;return pr<0&&(pr+=4294967296),pr}function g0_512_lo(cr,ar){var dr=rotr64_lo(cr,ar,1),fr=rotr64_lo(cr,ar,8),hr=shr64_lo(cr,ar,7),pr=dr^fr^hr;return pr<0&&(pr+=4294967296),pr}function g1_512_hi(cr,ar){var dr=rotr64_hi(cr,ar,19),fr=rotr64_hi(ar,cr,29),hr=shr64_hi(cr,ar,6),pr=dr^fr^hr;return pr<0&&(pr+=4294967296),pr}function g1_512_lo(cr,ar){var dr=rotr64_lo(cr,ar,19),fr=rotr64_lo(ar,cr,29),hr=shr64_lo(cr,ar,6),pr=dr^fr^hr;return pr<0&&(pr+=4294967296),pr}var utils$7=utils$e,SHA512$1=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512$1.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$7.inherits(SHA384,SHA512$1);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function(ar){return ar==="hex"?utils$7.toHex32(this.h.slice(0,12),"big"):utils$7.split32(this.h.slice(0,12),"big")};sha$2.sha1=_1;sha$2.sha224=_224;sha$2.sha256=_256;sha$2.sha384=_384;sha$2.sha512=_512;var ripemd={},utils$6=utils$e,common=common$5,rotl32=utils$6.rotl32,sum32=utils$6.sum32,sum32_3=utils$6.sum32_3,sum32_4=utils$6.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$6.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function(ar,dr){for(var fr=this.h[0],hr=this.h[1],pr=this.h[2],mr=this.h[3],gr=this.h[4],yr=fr,xr=hr,wr=pr,br=mr,Sr=gr,vr=0;vr<80;vr++){var Er=sum32(rotl32(sum32_4(fr,f$6(vr,hr,pr,mr),ar[r$5[vr]+dr],K$3(vr)),s$6[vr]),gr);fr=gr,gr=mr,mr=rotl32(pr,10),pr=hr,hr=Er,Er=sum32(rotl32(sum32_4(yr,f$6(79-vr,xr,wr,br),ar[rh[vr]+dr],Kh(vr)),sh[vr]),Sr),yr=Sr,Sr=br,br=rotl32(wr,10),wr=xr,xr=Er}Er=sum32_3(this.h[1],pr,br),this.h[1]=sum32_3(this.h[2],mr,Sr),this.h[2]=sum32_3(this.h[3],gr,yr),this.h[3]=sum32_3(this.h[4],fr,xr),this.h[4]=sum32_3(this.h[0],hr,wr),this.h[0]=Er};RIPEMD160.prototype._digest=function(ar){return ar==="hex"?utils$6.toHex32(this.h,"little"):utils$6.split32(this.h,"little")};function f$6(cr,ar,dr,fr){return cr<=15?ar^dr^fr:cr<=31?ar&dr|~ar&fr:cr<=47?(ar|~dr)^fr:cr<=63?ar&fr|dr&~fr:ar^(dr|~fr)}function K$3(cr){return cr<=15?0:cr<=31?1518500249:cr<=47?1859775393:cr<=63?2400959708:2840853838}function Kh(cr){return cr<=15?1352829926:cr<=31?1548603684:cr<=47?1836072691:cr<=63?2053994217:0}var r$5=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$6=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$5=utils$e,assert$b=minimalisticAssert$1;function Hmac(cr,ar,dr){if(!(this instanceof Hmac))return new Hmac(cr,ar,dr);this.Hash=cr,this.blockSize=cr.blockSize/8,this.outSize=cr.outSize/8,this.inner=null,this.outer=null,this._init(utils$5.toArray(ar,dr))}var hmac$3=Hmac;Hmac.prototype._init=function(ar){ar.length>this.blockSize&&(ar=new this.Hash().update(ar).digest()),assert$b(ar.length<=this.blockSize);for(var dr=ar.length;dr<this.blockSize;dr++)ar.push(0);for(dr=0;dr<ar.length;dr++)ar[dr]^=54;for(this.inner=new this.Hash().update(ar),dr=0;dr<ar.length;dr++)ar[dr]^=106;this.outer=new this.Hash().update(ar)};Hmac.prototype.update=function(ar,dr){return this.inner.update(ar,dr),this};Hmac.prototype.digest=function(ar){return this.outer.update(this.inner.digest()),this.outer.digest(ar)};(function(cr){var ar=cr;ar.utils=utils$e,ar.common=common$5,ar.sha=sha$2,ar.ripemd=ripemd,ar.hmac=hmac$3,ar.sha1=ar.sha.sha1,ar.sha256=ar.sha.sha256,ar.sha224=ar.sha.sha224,ar.sha384=ar.sha.sha384,ar.sha512=ar.sha.sha512,ar.ripemd160=ar.ripemd.ripemd160})(hash$5);const hash$4=getDefaultExportFromCjs(hash$5);function createCommonjsModule(cr,ar,dr){return dr={path:ar,exports:{},require:function(fr,hr){return commonjsRequire(fr,hr??dr.path)}},cr(dr,dr.exports),dr.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var minimalisticAssert=assert$a;function assert$a(cr,ar){if(!cr)throw new Error(ar||"Assertion failed")}assert$a.equal=function(ar,dr,fr){if(ar!=dr)throw new Error(fr||"Assertion failed: "+ar+" != "+dr)};var utils_1$3=createCommonjsModule(function(cr,ar){var dr=ar;function fr(mr,gr){if(Array.isArray(mr))return mr.slice();if(!mr)return[];var yr=[];if(typeof mr!="string"){for(var xr=0;xr<mr.length;xr++)yr[xr]=mr[xr]|0;return yr}if(gr==="hex"){mr=mr.replace(/[^a-z0-9]+/ig,""),mr.length%2!==0&&(mr="0"+mr);for(var xr=0;xr<mr.length;xr+=2)yr.push(parseInt(mr[xr]+mr[xr+1],16))}else for(var xr=0;xr<mr.length;xr++){var wr=mr.charCodeAt(xr),br=wr>>8,Sr=wr&255;br?yr.push(br,Sr):yr.push(Sr)}return yr}dr.toArray=fr;function hr(mr){return mr.length===1?"0"+mr:mr}dr.zero2=hr;function pr(mr){for(var gr="",yr=0;yr<mr.length;yr++)gr+=hr(mr[yr].toString(16));return gr}dr.toHex=pr,dr.encode=function(gr,yr){return yr==="hex"?pr(gr):gr}}),utils_1$1$1=createCommonjsModule(function(cr,ar){var dr=ar;dr.assert=minimalisticAssert,dr.toArray=utils_1$3.toArray,dr.zero2=utils_1$3.zero2,dr.toHex=utils_1$3.toHex,dr.encode=utils_1$3.encode;function fr(yr,xr,wr){var br=new Array(Math.max(yr.bitLength(),wr)+1);br.fill(0);for(var Sr=1<<xr+1,vr=yr.clone(),Er=0;Er<br.length;Er++){var Ar,_r=vr.andln(Sr-1);vr.isOdd()?(_r>(Sr>>1)-1?Ar=(Sr>>1)-_r:Ar=_r,vr.isubn(Ar)):Ar=0,br[Er]=Ar,vr.iushrn(1)}return br}dr.getNAF=fr;function hr(yr,xr){var wr=[[],[]];yr=yr.clone(),xr=xr.clone();for(var br=0,Sr=0,vr;yr.cmpn(-br)>0||xr.cmpn(-Sr)>0;){var Er=yr.andln(3)+br&3,Ar=xr.andln(3)+Sr&3;Er===3&&(Er=-1),Ar===3&&(Ar=-1);var _r;Er&1?(vr=yr.andln(7)+br&7,(vr===3||vr===5)&&Ar===2?_r=-Er:_r=Er):_r=0,wr[0].push(_r);var Cr;Ar&1?(vr=xr.andln(7)+Sr&7,(vr===3||vr===5)&&Er===2?Cr=-Ar:Cr=Ar):Cr=0,wr[1].push(Cr),2*br===_r+1&&(br=1-br),2*Sr===Cr+1&&(Sr=1-Sr),yr.iushrn(1),xr.iushrn(1)}return wr}dr.getJSF=hr;function pr(yr,xr,wr){var br="_"+xr;yr.prototype[xr]=function(){return this[br]!==void 0?this[br]:this[br]=wr.call(this)}}dr.cachedProperty=pr;function mr(yr){return typeof yr=="string"?dr.toArray(yr,"hex"):yr}dr.parseBytes=mr;function gr(yr){return new BN$1(yr,"hex","le")}dr.intFromLE=gr}),getNAF=utils_1$1$1.getNAF,getJSF=utils_1$1$1.getJSF,assert$1$1=utils_1$1$1.assert;function BaseCurve(cr,ar){this.type=cr,this.p=new BN$1(ar.p,16),this.red=ar.prime?BN$1.red(ar.prime):BN$1.mont(this.p),this.zero=new BN$1(0).toRed(this.red),this.one=new BN$1(1).toRed(this.red),this.two=new BN$1(2).toRed(this.red),this.n=ar.n&&new BN$1(ar.n,16),this.g=ar.g&&this.pointFromJSON(ar.g,ar.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var dr=this.n&&this.p.div(this.n);!dr||dr.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$3=BaseCurve;BaseCurve.prototype.point=function(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function(ar,dr){assert$1$1(ar.precomputed);var fr=ar._getDoubles(),hr=getNAF(dr,1,this._bitLength),pr=(1<<fr.step+1)-(fr.step%2===0?2:1);pr/=3;var mr=[],gr,yr;for(gr=0;gr<hr.length;gr+=fr.step){yr=0;for(var xr=gr+fr.step-1;xr>=gr;xr--)yr=(yr<<1)+hr[xr];mr.push(yr)}for(var wr=this.jpoint(null,null,null),br=this.jpoint(null,null,null),Sr=pr;Sr>0;Sr--){for(gr=0;gr<mr.length;gr++)yr=mr[gr],yr===Sr?br=br.mixedAdd(fr.points[gr]):yr===-Sr&&(br=br.mixedAdd(fr.points[gr].neg()));wr=wr.add(br)}return wr.toP()};BaseCurve.prototype._wnafMul=function(ar,dr){var fr=4,hr=ar._getNAFPoints(fr);fr=hr.wnd;for(var pr=hr.points,mr=getNAF(dr,fr,this._bitLength),gr=this.jpoint(null,null,null),yr=mr.length-1;yr>=0;yr--){for(var xr=0;yr>=0&&mr[yr]===0;yr--)xr++;if(yr>=0&&xr++,gr=gr.dblp(xr),yr<0)break;var wr=mr[yr];assert$1$1(wr!==0),ar.type==="affine"?wr>0?gr=gr.mixedAdd(pr[wr-1>>1]):gr=gr.mixedAdd(pr[-wr-1>>1].neg()):wr>0?gr=gr.add(pr[wr-1>>1]):gr=gr.add(pr[-wr-1>>1].neg())}return ar.type==="affine"?gr.toP():gr};BaseCurve.prototype._wnafMulAdd=function(ar,dr,fr,hr,pr){var mr=this._wnafT1,gr=this._wnafT2,yr=this._wnafT3,xr=0,wr,br,Sr;for(wr=0;wr<hr;wr++){Sr=dr[wr];var vr=Sr._getNAFPoints(ar);mr[wr]=vr.wnd,gr[wr]=vr.points}for(wr=hr-1;wr>=1;wr-=2){var Er=wr-1,Ar=wr;if(mr[Er]!==1||mr[Ar]!==1){yr[Er]=getNAF(fr[Er],mr[Er],this._bitLength),yr[Ar]=getNAF(fr[Ar],mr[Ar],this._bitLength),xr=Math.max(yr[Er].length,xr),xr=Math.max(yr[Ar].length,xr);continue}var _r=[dr[Er],null,null,dr[Ar]];dr[Er].y.cmp(dr[Ar].y)===0?(_r[1]=dr[Er].add(dr[Ar]),_r[2]=dr[Er].toJ().mixedAdd(dr[Ar].neg())):dr[Er].y.cmp(dr[Ar].y.redNeg())===0?(_r[1]=dr[Er].toJ().mixedAdd(dr[Ar]),_r[2]=dr[Er].add(dr[Ar].neg())):(_r[1]=dr[Er].toJ().mixedAdd(dr[Ar]),_r[2]=dr[Er].toJ().mixedAdd(dr[Ar].neg()));var Cr=[-3,-1,-5,-7,0,7,5,1,3],kr=getJSF(fr[Er],fr[Ar]);for(xr=Math.max(kr[0].length,xr),yr[Er]=new Array(xr),yr[Ar]=new Array(xr),br=0;br<xr;br++){var Rr=kr[0][br]|0,Ir=kr[1][br]|0;yr[Er][br]=Cr[(Rr+1)*3+(Ir+1)],yr[Ar][br]=0,gr[Er]=_r}}var Nr=this.jpoint(null,null,null),Pr=this._wnafT4;for(wr=xr;wr>=0;wr--){for(var Tr=0;wr>=0;){var Br=!0;for(br=0;br<hr;br++)Pr[br]=yr[br][wr]|0,Pr[br]!==0&&(Br=!1);if(!Br)break;Tr++,wr--}if(wr>=0&&Tr++,Nr=Nr.dblp(Tr),wr<0)break;for(br=0;br<hr;br++){var Fr=Pr[br];Fr!==0&&(Fr>0?Sr=gr[br][Fr-1>>1]:Fr<0&&(Sr=gr[br][-Fr-1>>1].neg()),Sr.type==="affine"?Nr=Nr.mixedAdd(Sr):Nr=Nr.add(Sr))}}for(wr=0;wr<hr;wr++)gr[wr]=null;return pr?Nr:Nr.toP()};function BasePoint(cr,ar){this.curve=cr,this.type=ar,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function(){throw new Error("Not implemented")};BasePoint.prototype.validate=function(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function(ar,dr){ar=utils_1$1$1.toArray(ar,dr);var fr=this.p.byteLength();if((ar[0]===4||ar[0]===6||ar[0]===7)&&ar.length-1===2*fr){ar[0]===6?assert$1$1(ar[ar.length-1]%2===0):ar[0]===7&&assert$1$1(ar[ar.length-1]%2===1);var hr=this.point(ar.slice(1,1+fr),ar.slice(1+fr,1+2*fr));return hr}else if((ar[0]===2||ar[0]===3)&&ar.length-1===fr)return this.pointFromX(ar.slice(1,1+fr),ar[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function(ar){return this.encode(ar,!0)};BasePoint.prototype._encode=function(ar){var dr=this.curve.p.byteLength(),fr=this.getX().toArray("be",dr);return ar?[this.getY().isEven()?2:3].concat(fr):[4].concat(fr,this.getY().toArray("be",dr))};BasePoint.prototype.encode=function(ar,dr){return utils_1$1$1.encode(this._encode(dr),ar)};BasePoint.prototype.precompute=function(ar){if(this.precomputed)return this;var dr={doubles:null,naf:null,beta:null};return dr.naf=this._getNAFPoints(8),dr.doubles=this._getDoubles(4,ar),dr.beta=this._getBeta(),this.precomputed=dr,this};BasePoint.prototype._hasDoubles=function(ar){if(!this.precomputed)return!1;var dr=this.precomputed.doubles;return dr?dr.points.length>=Math.ceil((ar.bitLength()+1)/dr.step):!1};BasePoint.prototype._getDoubles=function(ar,dr){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var fr=[this],hr=this,pr=0;pr<dr;pr+=ar){for(var mr=0;mr<ar;mr++)hr=hr.dbl();fr.push(hr)}return{step:ar,points:fr}};BasePoint.prototype._getNAFPoints=function(ar){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var dr=[this],fr=(1<<ar)-1,hr=fr===1?null:this.dbl(),pr=1;pr<fr;pr++)dr[pr]=dr[pr-1].add(hr);return{wnd:ar,points:dr}};BasePoint.prototype._getBeta=function(){return null};BasePoint.prototype.dblp=function(ar){for(var dr=this,fr=0;fr<ar;fr++)dr=dr.dbl();return dr};var inherits_browser=createCommonjsModule(function(cr){typeof Object.create=="function"?cr.exports=function(dr,fr){fr&&(dr.super_=fr,dr.prototype=Object.create(fr.prototype,{constructor:{value:dr,enumerable:!1,writable:!0,configurable:!0}}))}:cr.exports=function(dr,fr){if(fr){dr.super_=fr;var hr=function(){};hr.prototype=fr.prototype,dr.prototype=new hr,dr.prototype.constructor=dr}}}),assert$2$1=utils_1$1$1.assert;function ShortCurve(cr){base$3.call(this,"short",cr),this.a=new BN$1(cr.a,16).toRed(this.red),this.b=new BN$1(cr.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(cr),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve,base$3);var short_1=ShortCurve;ShortCurve.prototype._getEndomorphism=function(ar){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var dr,fr;if(ar.beta)dr=new BN$1(ar.beta,16).toRed(this.red);else{var hr=this._getEndoRoots(this.p);dr=hr[0].cmp(hr[1])<0?hr[0]:hr[1],dr=dr.toRed(this.red)}if(ar.lambda)fr=new BN$1(ar.lambda,16);else{var pr=this._getEndoRoots(this.n);this.g.mul(pr[0]).x.cmp(this.g.x.redMul(dr))===0?fr=pr[0]:(fr=pr[1],assert$2$1(this.g.mul(fr).x.cmp(this.g.x.redMul(dr))===0))}var mr;return ar.basis?mr=ar.basis.map(function(gr){return{a:new BN$1(gr.a,16),b:new BN$1(gr.b,16)}}):mr=this._getEndoBasis(fr),{beta:dr,lambda:fr,basis:mr}}};ShortCurve.prototype._getEndoRoots=function(ar){var dr=ar===this.p?this.red:BN$1.mont(ar),fr=new BN$1(2).toRed(dr).redInvm(),hr=fr.redNeg(),pr=new BN$1(3).toRed(dr).redNeg().redSqrt().redMul(fr),mr=hr.redAdd(pr).fromRed(),gr=hr.redSub(pr).fromRed();return[mr,gr]};ShortCurve.prototype._getEndoBasis=function(ar){for(var dr=this.n.ushrn(Math.floor(this.n.bitLength()/2)),fr=ar,hr=this.n.clone(),pr=new BN$1(1),mr=new BN$1(0),gr=new BN$1(0),yr=new BN$1(1),xr,wr,br,Sr,vr,Er,Ar,_r=0,Cr,kr;fr.cmpn(0)!==0;){var Rr=hr.div(fr);Cr=hr.sub(Rr.mul(fr)),kr=gr.sub(Rr.mul(pr));var Ir=yr.sub(Rr.mul(mr));if(!br&&Cr.cmp(dr)<0)xr=Ar.neg(),wr=pr,br=Cr.neg(),Sr=kr;else if(br&&++_r===2)break;Ar=Cr,hr=fr,fr=Cr,gr=pr,pr=kr,yr=mr,mr=Ir}vr=Cr.neg(),Er=kr;var Nr=br.sqr().add(Sr.sqr()),Pr=vr.sqr().add(Er.sqr());return Pr.cmp(Nr)>=0&&(vr=xr,Er=wr),br.negative&&(br=br.neg(),Sr=Sr.neg()),vr.negative&&(vr=vr.neg(),Er=Er.neg()),[{a:br,b:Sr},{a:vr,b:Er}]};ShortCurve.prototype._endoSplit=function(ar){var dr=this.endo.basis,fr=dr[0],hr=dr[1],pr=hr.b.mul(ar).divRound(this.n),mr=fr.b.neg().mul(ar).divRound(this.n),gr=pr.mul(fr.a),yr=mr.mul(hr.a),xr=pr.mul(fr.b),wr=mr.mul(hr.b),br=ar.sub(gr).sub(yr),Sr=xr.add(wr).neg();return{k1:br,k2:Sr}};ShortCurve.prototype.pointFromX=function(ar,dr){ar=new BN$1(ar,16),ar.red||(ar=ar.toRed(this.red));var fr=ar.redSqr().redMul(ar).redIAdd(ar.redMul(this.a)).redIAdd(this.b),hr=fr.redSqrt();if(hr.redSqr().redSub(fr).cmp(this.zero)!==0)throw new Error("invalid point");var pr=hr.fromRed().isOdd();return(dr&&!pr||!dr&&pr)&&(hr=hr.redNeg()),this.point(ar,hr)};ShortCurve.prototype.validate=function(ar){if(ar.inf)return!0;var dr=ar.x,fr=ar.y,hr=this.a.redMul(dr),pr=dr.redSqr().redMul(dr).redIAdd(hr).redIAdd(this.b);return fr.redSqr().redISub(pr).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function(ar,dr,fr){for(var hr=this._endoWnafT1,pr=this._endoWnafT2,mr=0;mr<ar.length;mr++){var gr=this._endoSplit(dr[mr]),yr=ar[mr],xr=yr._getBeta();gr.k1.negative&&(gr.k1.ineg(),yr=yr.neg(!0)),gr.k2.negative&&(gr.k2.ineg(),xr=xr.neg(!0)),hr[mr*2]=yr,hr[mr*2+1]=xr,pr[mr*2]=gr.k1,pr[mr*2+1]=gr.k2}for(var wr=this._wnafMulAdd(1,hr,pr,mr*2,fr),br=0;br<mr*2;br++)hr[br]=null,pr[br]=null;return wr};function Point(cr,ar,dr,fr){base$3.BasePoint.call(this,cr,"affine"),ar===null&&dr===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$1(ar,16),this.y=new BN$1(dr,16),fr&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits_browser(Point,base$3.BasePoint);ShortCurve.prototype.point=function(ar,dr,fr){return new Point(this,ar,dr,fr)};ShortCurve.prototype.pointFromJSON=function(ar,dr){return Point.fromJSON(this,ar,dr)};Point.prototype._getBeta=function(){if(this.curve.endo){var ar=this.precomputed;if(ar&&ar.beta)return ar.beta;var dr=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(ar){var fr=this.curve,hr=function(pr){return fr.point(pr.x.redMul(fr.endo.beta),pr.y)};ar.beta=dr,dr.precomputed={beta:null,naf:ar.naf&&{wnd:ar.naf.wnd,points:ar.naf.points.map(hr)},doubles:ar.doubles&&{step:ar.doubles.step,points:ar.doubles.points.map(hr)}}}return dr}};Point.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point.fromJSON=function(ar,dr,fr){typeof dr=="string"&&(dr=JSON.parse(dr));var hr=ar.point(dr[0],dr[1],fr);if(!dr[2])return hr;function pr(gr){return ar.point(gr[0],gr[1],fr)}var mr=dr[2];return hr.precomputed={beta:null,doubles:mr.doubles&&{step:mr.doubles.step,points:[hr].concat(mr.doubles.points.map(pr))},naf:mr.naf&&{wnd:mr.naf.wnd,points:[hr].concat(mr.naf.points.map(pr))}},hr};Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function(){return this.inf};Point.prototype.add=function(ar){if(this.inf)return ar;if(ar.inf)return this;if(this.eq(ar))return this.dbl();if(this.neg().eq(ar))return this.curve.point(null,null);if(this.x.cmp(ar.x)===0)return this.curve.point(null,null);var dr=this.y.redSub(ar.y);dr.cmpn(0)!==0&&(dr=dr.redMul(this.x.redSub(ar.x).redInvm()));var fr=dr.redSqr().redISub(this.x).redISub(ar.x),hr=dr.redMul(this.x.redSub(fr)).redISub(this.y);return this.curve.point(fr,hr)};Point.prototype.dbl=function(){if(this.inf)return this;var ar=this.y.redAdd(this.y);if(ar.cmpn(0)===0)return this.curve.point(null,null);var dr=this.curve.a,fr=this.x.redSqr(),hr=ar.redInvm(),pr=fr.redAdd(fr).redIAdd(fr).redIAdd(dr).redMul(hr),mr=pr.redSqr().redISub(this.x.redAdd(this.x)),gr=pr.redMul(this.x.redSub(mr)).redISub(this.y);return this.curve.point(mr,gr)};Point.prototype.getX=function(){return this.x.fromRed()};Point.prototype.getY=function(){return this.y.fromRed()};Point.prototype.mul=function(ar){return ar=new BN$1(ar,16),this.isInfinity()?this:this._hasDoubles(ar)?this.curve._fixedNafMul(this,ar):this.curve.endo?this.curve._endoWnafMulAdd([this],[ar]):this.curve._wnafMul(this,ar)};Point.prototype.mulAdd=function(ar,dr,fr){var hr=[this,dr],pr=[ar,fr];return this.curve.endo?this.curve._endoWnafMulAdd(hr,pr):this.curve._wnafMulAdd(1,hr,pr,2)};Point.prototype.jmulAdd=function(ar,dr,fr){var hr=[this,dr],pr=[ar,fr];return this.curve.endo?this.curve._endoWnafMulAdd(hr,pr,!0):this.curve._wnafMulAdd(1,hr,pr,2,!0)};Point.prototype.eq=function(ar){return this===ar||this.inf===ar.inf&&(this.inf||this.x.cmp(ar.x)===0&&this.y.cmp(ar.y)===0)};Point.prototype.neg=function(ar){if(this.inf)return this;var dr=this.curve.point(this.x,this.y.redNeg());if(ar&&this.precomputed){var fr=this.precomputed,hr=function(pr){return pr.neg()};dr.precomputed={naf:fr.naf&&{wnd:fr.naf.wnd,points:fr.naf.points.map(hr)},doubles:fr.doubles&&{step:fr.doubles.step,points:fr.doubles.points.map(hr)}}}return dr};Point.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var ar=this.curve.jpoint(this.x,this.y,this.curve.one);return ar};function JPoint(cr,ar,dr,fr){base$3.BasePoint.call(this,cr,"jacobian"),ar===null&&dr===null&&fr===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$1(0)):(this.x=new BN$1(ar,16),this.y=new BN$1(dr,16),this.z=new BN$1(fr,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits_browser(JPoint,base$3.BasePoint);ShortCurve.prototype.jpoint=function(ar,dr,fr){return new JPoint(this,ar,dr,fr)};JPoint.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var ar=this.z.redInvm(),dr=ar.redSqr(),fr=this.x.redMul(dr),hr=this.y.redMul(dr).redMul(ar);return this.curve.point(fr,hr)};JPoint.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function(ar){if(this.isInfinity())return ar;if(ar.isInfinity())return this;var dr=ar.z.redSqr(),fr=this.z.redSqr(),hr=this.x.redMul(dr),pr=ar.x.redMul(fr),mr=this.y.redMul(dr.redMul(ar.z)),gr=ar.y.redMul(fr.redMul(this.z)),yr=hr.redSub(pr),xr=mr.redSub(gr);if(yr.cmpn(0)===0)return xr.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var wr=yr.redSqr(),br=wr.redMul(yr),Sr=hr.redMul(wr),vr=xr.redSqr().redIAdd(br).redISub(Sr).redISub(Sr),Er=xr.redMul(Sr.redISub(vr)).redISub(mr.redMul(br)),Ar=this.z.redMul(ar.z).redMul(yr);return this.curve.jpoint(vr,Er,Ar)};JPoint.prototype.mixedAdd=function(ar){if(this.isInfinity())return ar.toJ();if(ar.isInfinity())return this;var dr=this.z.redSqr(),fr=this.x,hr=ar.x.redMul(dr),pr=this.y,mr=ar.y.redMul(dr).redMul(this.z),gr=fr.redSub(hr),yr=pr.redSub(mr);if(gr.cmpn(0)===0)return yr.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var xr=gr.redSqr(),wr=xr.redMul(gr),br=fr.redMul(xr),Sr=yr.redSqr().redIAdd(wr).redISub(br).redISub(br),vr=yr.redMul(br.redISub(Sr)).redISub(pr.redMul(wr)),Er=this.z.redMul(gr);return this.curve.jpoint(Sr,vr,Er)};JPoint.prototype.dblp=function(ar){if(ar===0)return this;if(this.isInfinity())return this;if(!ar)return this.dbl();var dr;if(this.curve.zeroA||this.curve.threeA){var fr=this;for(dr=0;dr<ar;dr++)fr=fr.dbl();return fr}var hr=this.curve.a,pr=this.curve.tinv,mr=this.x,gr=this.y,yr=this.z,xr=yr.redSqr().redSqr(),wr=gr.redAdd(gr);for(dr=0;dr<ar;dr++){var br=mr.redSqr(),Sr=wr.redSqr(),vr=Sr.redSqr(),Er=br.redAdd(br).redIAdd(br).redIAdd(hr.redMul(xr)),Ar=mr.redMul(Sr),_r=Er.redSqr().redISub(Ar.redAdd(Ar)),Cr=Ar.redISub(_r),kr=Er.redMul(Cr);kr=kr.redIAdd(kr).redISub(vr);var Rr=wr.redMul(yr);dr+1<ar&&(xr=xr.redMul(vr)),mr=_r,yr=Rr,wr=kr}return this.curve.jpoint(mr,wr.redMul(pr),yr)};JPoint.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function(){var ar,dr,fr;if(this.zOne){var hr=this.x.redSqr(),pr=this.y.redSqr(),mr=pr.redSqr(),gr=this.x.redAdd(pr).redSqr().redISub(hr).redISub(mr);gr=gr.redIAdd(gr);var yr=hr.redAdd(hr).redIAdd(hr),xr=yr.redSqr().redISub(gr).redISub(gr),wr=mr.redIAdd(mr);wr=wr.redIAdd(wr),wr=wr.redIAdd(wr),ar=xr,dr=yr.redMul(gr.redISub(xr)).redISub(wr),fr=this.y.redAdd(this.y)}else{var br=this.x.redSqr(),Sr=this.y.redSqr(),vr=Sr.redSqr(),Er=this.x.redAdd(Sr).redSqr().redISub(br).redISub(vr);Er=Er.redIAdd(Er);var Ar=br.redAdd(br).redIAdd(br),_r=Ar.redSqr(),Cr=vr.redIAdd(vr);Cr=Cr.redIAdd(Cr),Cr=Cr.redIAdd(Cr),ar=_r.redISub(Er).redISub(Er),dr=Ar.redMul(Er.redISub(ar)).redISub(Cr),fr=this.y.redMul(this.z),fr=fr.redIAdd(fr)}return this.curve.jpoint(ar,dr,fr)};JPoint.prototype._threeDbl=function(){var ar,dr,fr;if(this.zOne){var hr=this.x.redSqr(),pr=this.y.redSqr(),mr=pr.redSqr(),gr=this.x.redAdd(pr).redSqr().redISub(hr).redISub(mr);gr=gr.redIAdd(gr);var yr=hr.redAdd(hr).redIAdd(hr).redIAdd(this.curve.a),xr=yr.redSqr().redISub(gr).redISub(gr);ar=xr;var wr=mr.redIAdd(mr);wr=wr.redIAdd(wr),wr=wr.redIAdd(wr),dr=yr.redMul(gr.redISub(xr)).redISub(wr),fr=this.y.redAdd(this.y)}else{var br=this.z.redSqr(),Sr=this.y.redSqr(),vr=this.x.redMul(Sr),Er=this.x.redSub(br).redMul(this.x.redAdd(br));Er=Er.redAdd(Er).redIAdd(Er);var Ar=vr.redIAdd(vr);Ar=Ar.redIAdd(Ar);var _r=Ar.redAdd(Ar);ar=Er.redSqr().redISub(_r),fr=this.y.redAdd(this.z).redSqr().redISub(Sr).redISub(br);var Cr=Sr.redSqr();Cr=Cr.redIAdd(Cr),Cr=Cr.redIAdd(Cr),Cr=Cr.redIAdd(Cr),dr=Er.redMul(Ar.redISub(ar)).redISub(Cr)}return this.curve.jpoint(ar,dr,fr)};JPoint.prototype._dbl=function(){var ar=this.curve.a,dr=this.x,fr=this.y,hr=this.z,pr=hr.redSqr().redSqr(),mr=dr.redSqr(),gr=fr.redSqr(),yr=mr.redAdd(mr).redIAdd(mr).redIAdd(ar.redMul(pr)),xr=dr.redAdd(dr);xr=xr.redIAdd(xr);var wr=xr.redMul(gr),br=yr.redSqr().redISub(wr.redAdd(wr)),Sr=wr.redISub(br),vr=gr.redSqr();vr=vr.redIAdd(vr),vr=vr.redIAdd(vr),vr=vr.redIAdd(vr);var Er=yr.redMul(Sr).redISub(vr),Ar=fr.redAdd(fr).redMul(hr);return this.curve.jpoint(br,Er,Ar)};JPoint.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var ar=this.x.redSqr(),dr=this.y.redSqr(),fr=this.z.redSqr(),hr=dr.redSqr(),pr=ar.redAdd(ar).redIAdd(ar),mr=pr.redSqr(),gr=this.x.redAdd(dr).redSqr().redISub(ar).redISub(hr);gr=gr.redIAdd(gr),gr=gr.redAdd(gr).redIAdd(gr),gr=gr.redISub(mr);var yr=gr.redSqr(),xr=hr.redIAdd(hr);xr=xr.redIAdd(xr),xr=xr.redIAdd(xr),xr=xr.redIAdd(xr);var wr=pr.redIAdd(gr).redSqr().redISub(mr).redISub(yr).redISub(xr),br=dr.redMul(wr);br=br.redIAdd(br),br=br.redIAdd(br);var Sr=this.x.redMul(yr).redISub(br);Sr=Sr.redIAdd(Sr),Sr=Sr.redIAdd(Sr);var vr=this.y.redMul(wr.redMul(xr.redISub(wr)).redISub(gr.redMul(yr)));vr=vr.redIAdd(vr),vr=vr.redIAdd(vr),vr=vr.redIAdd(vr);var Er=this.z.redAdd(gr).redSqr().redISub(fr).redISub(yr);return this.curve.jpoint(Sr,vr,Er)};JPoint.prototype.mul=function(ar,dr){return ar=new BN$1(ar,dr),this.curve._wnafMul(this,ar)};JPoint.prototype.eq=function(ar){if(ar.type==="affine")return this.eq(ar.toJ());if(this===ar)return!0;var dr=this.z.redSqr(),fr=ar.z.redSqr();if(this.x.redMul(fr).redISub(ar.x.redMul(dr)).cmpn(0)!==0)return!1;var hr=dr.redMul(this.z),pr=fr.redMul(ar.z);return this.y.redMul(pr).redISub(ar.y.redMul(hr)).cmpn(0)===0};JPoint.prototype.eqXToP=function(ar){var dr=this.z.redSqr(),fr=ar.toRed(this.curve.red).redMul(dr);if(this.x.cmp(fr)===0)return!0;for(var hr=ar.clone(),pr=this.curve.redN.redMul(dr);;){if(hr.iadd(this.curve.n),hr.cmp(this.curve.p)>=0)return!1;if(fr.redIAdd(pr),this.x.cmp(fr)===0)return!0}};JPoint.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var curve_1=createCommonjsModule(function(cr,ar){var dr=ar;dr.base=base$3,dr.short=short_1,dr.mont=null,dr.edwards=null}),curves_1=createCommonjsModule(function(cr,ar){var dr=ar,fr=utils_1$1$1.assert;function hr(gr){gr.type==="short"?this.curve=new curve_1.short(gr):gr.type==="edwards"?this.curve=new curve_1.edwards(gr):this.curve=new curve_1.mont(gr),this.g=this.curve.g,this.n=this.curve.n,this.hash=gr.hash,fr(this.g.validate(),"Invalid curve"),fr(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}dr.PresetCurve=hr;function pr(gr,yr){Object.defineProperty(dr,gr,{configurable:!0,enumerable:!0,get:function(){var xr=new hr(yr);return Object.defineProperty(dr,gr,{configurable:!0,enumerable:!0,value:xr}),xr}})}pr("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash$4.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),pr("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash$4.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),pr("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash$4.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),pr("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash$4.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),pr("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash$4.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),pr("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$4.sha256,gRed:!1,g:["9"]}),pr("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$4.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var mr;try{mr=null.crash()}catch{mr=void 0}pr("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash$4.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",mr]})});function HmacDRBG(cr){if(!(this instanceof HmacDRBG))return new HmacDRBG(cr);this.hash=cr.hash,this.predResist=!!cr.predResist,this.outLen=this.hash.outSize,this.minEntropy=cr.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var ar=utils_1$3.toArray(cr.entropy,cr.entropyEnc||"hex"),dr=utils_1$3.toArray(cr.nonce,cr.nonceEnc||"hex"),fr=utils_1$3.toArray(cr.pers,cr.persEnc||"hex");minimalisticAssert(ar.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(ar,dr,fr)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function(ar,dr,fr){var hr=ar.concat(dr).concat(fr);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var pr=0;pr<this.V.length;pr++)this.K[pr]=0,this.V[pr]=1;this._update(hr),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function(){return new hash$4.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function(ar){var dr=this._hmac().update(this.V).update([0]);ar&&(dr=dr.update(ar)),this.K=dr.digest(),this.V=this._hmac().update(this.V).digest(),ar&&(this.K=this._hmac().update(this.V).update([1]).update(ar).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG.prototype.reseed=function(ar,dr,fr,hr){typeof dr!="string"&&(hr=fr,fr=dr,dr=null),ar=utils_1$3.toArray(ar,dr),fr=utils_1$3.toArray(fr,hr),minimalisticAssert(ar.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(ar.concat(fr||[])),this._reseed=1};HmacDRBG.prototype.generate=function(ar,dr,fr,hr){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof dr!="string"&&(hr=fr,fr=dr,dr=null),fr&&(fr=utils_1$3.toArray(fr,hr||"hex"),this._update(fr));for(var pr=[];pr.length<ar;)this.V=this._hmac().update(this.V).digest(),pr=pr.concat(this.V);var mr=pr.slice(0,ar);return this._update(fr),this._reseed++,utils_1$3.encode(mr,dr)};var assert$3$1=utils_1$1$1.assert;function KeyPair(cr,ar){this.ec=cr,this.priv=null,this.pub=null,ar.priv&&this._importPrivate(ar.priv,ar.privEnc),ar.pub&&this._importPublic(ar.pub,ar.pubEnc)}var key=KeyPair;KeyPair.fromPublic=function(ar,dr,fr){return dr instanceof KeyPair?dr:new KeyPair(ar,{pub:dr,pubEnc:fr})};KeyPair.fromPrivate=function(ar,dr,fr){return dr instanceof KeyPair?dr:new KeyPair(ar,{priv:dr,privEnc:fr})};KeyPair.prototype.validate=function(){var ar=this.getPublic();return ar.isInfinity()?{result:!1,reason:"Invalid public key"}:ar.validate()?ar.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair.prototype.getPublic=function(ar,dr){return typeof ar=="string"&&(dr=ar,ar=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),dr?this.pub.encode(dr,ar):this.pub};KeyPair.prototype.getPrivate=function(ar){return ar==="hex"?this.priv.toString(16,2):this.priv};KeyPair.prototype._importPrivate=function(ar,dr){this.priv=new BN$1(ar,dr||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair.prototype._importPublic=function(ar,dr){if(ar.x||ar.y){this.ec.curve.type==="mont"?assert$3$1(ar.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$3$1(ar.x&&ar.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(ar.x,ar.y);return}this.pub=this.ec.curve.decodePoint(ar,dr)};KeyPair.prototype.derive=function(ar){return ar.validate()||assert$3$1(ar.validate(),"public point not validated"),ar.mul(this.priv).getX()};KeyPair.prototype.sign=function(ar,dr,fr){return this.ec.sign(ar,this,dr,fr)};KeyPair.prototype.verify=function(ar,dr){return this.ec.verify(ar,dr,this)};KeyPair.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4$1=utils_1$1$1.assert;function Signature$1(cr,ar){if(cr instanceof Signature$1)return cr;this._importDER(cr,ar)||(assert$4$1(cr.r&&cr.s,"Signature without r or s"),this.r=new BN$1(cr.r,16),this.s=new BN$1(cr.s,16),cr.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=cr.recoveryParam)}var signature$1=Signature$1;function Position(){this.place=0}function getLength(cr,ar){var dr=cr[ar.place++];if(!(dr&128))return dr;var fr=dr&15;if(fr===0||fr>4)return!1;for(var hr=0,pr=0,mr=ar.place;pr<fr;pr++,mr++)hr<<=8,hr|=cr[mr],hr>>>=0;return hr<=127?!1:(ar.place=mr,hr)}function rmPadding(cr){for(var ar=0,dr=cr.length-1;!cr[ar]&&!(cr[ar+1]&128)&&ar<dr;)ar++;return ar===0?cr:cr.slice(ar)}Signature$1.prototype._importDER=function(ar,dr){ar=utils_1$1$1.toArray(ar,dr);var fr=new Position;if(ar[fr.place++]!==48)return!1;var hr=getLength(ar,fr);if(hr===!1||hr+fr.place!==ar.length||ar[fr.place++]!==2)return!1;var pr=getLength(ar,fr);if(pr===!1)return!1;var mr=ar.slice(fr.place,pr+fr.place);if(fr.place+=pr,ar[fr.place++]!==2)return!1;var gr=getLength(ar,fr);if(gr===!1||ar.length!==gr+fr.place)return!1;var yr=ar.slice(fr.place,gr+fr.place);if(mr[0]===0)if(mr[1]&128)mr=mr.slice(1);else return!1;if(yr[0]===0)if(yr[1]&128)yr=yr.slice(1);else return!1;return this.r=new BN$1(mr),this.s=new BN$1(yr),this.recoveryParam=null,!0};function constructLength(cr,ar){if(ar<128){cr.push(ar);return}var dr=1+(Math.log(ar)/Math.LN2>>>3);for(cr.push(dr|128);--dr;)cr.push(ar>>>(dr<<3)&255);cr.push(ar)}Signature$1.prototype.toDER=function(ar){var dr=this.r.toArray(),fr=this.s.toArray();for(dr[0]&128&&(dr=[0].concat(dr)),fr[0]&128&&(fr=[0].concat(fr)),dr=rmPadding(dr),fr=rmPadding(fr);!fr[0]&&!(fr[1]&128);)fr=fr.slice(1);var hr=[2];constructLength(hr,dr.length),hr=hr.concat(dr),hr.push(2),constructLength(hr,fr.length);var pr=hr.concat(fr),mr=[48];return constructLength(mr,pr.length),mr=mr.concat(pr),utils_1$1$1.encode(mr,ar)};var rand=function(){throw new Error("unsupported")},assert$5$1=utils_1$1$1.assert;function EC(cr){if(!(this instanceof EC))return new EC(cr);typeof cr=="string"&&(assert$5$1(Object.prototype.hasOwnProperty.call(curves_1,cr),"Unknown curve "+cr),cr=curves_1[cr]),cr instanceof curves_1.PresetCurve&&(cr={curve:cr}),this.curve=cr.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=cr.curve.g,this.g.precompute(cr.curve.n.bitLength()+1),this.hash=cr.hash||cr.curve.hash}var ec=EC;EC.prototype.keyPair=function(ar){return new key(this,ar)};EC.prototype.keyFromPrivate=function(ar,dr){return key.fromPrivate(this,ar,dr)};EC.prototype.keyFromPublic=function(ar,dr){return key.fromPublic(this,ar,dr)};EC.prototype.genKeyPair=function(ar){ar||(ar={});for(var dr=new hmacDrbg({hash:this.hash,pers:ar.pers,persEnc:ar.persEnc||"utf8",entropy:ar.entropy||rand(this.hash.hmacStrength),entropyEnc:ar.entropy&&ar.entropyEnc||"utf8",nonce:this.n.toArray()}),fr=this.n.byteLength(),hr=this.n.sub(new BN$1(2));;){var pr=new BN$1(dr.generate(fr));if(!(pr.cmp(hr)>0))return pr.iaddn(1),this.keyFromPrivate(pr)}};EC.prototype._truncateToN=function(ar,dr){var fr=ar.byteLength()*8-this.n.bitLength();return fr>0&&(ar=ar.ushrn(fr)),!dr&&ar.cmp(this.n)>=0?ar.sub(this.n):ar};EC.prototype.sign=function(ar,dr,fr,hr){typeof fr=="object"&&(hr=fr,fr=null),hr||(hr={}),dr=this.keyFromPrivate(dr,fr),ar=this._truncateToN(new BN$1(ar,16));for(var pr=this.n.byteLength(),mr=dr.getPrivate().toArray("be",pr),gr=ar.toArray("be",pr),yr=new hmacDrbg({hash:this.hash,entropy:mr,nonce:gr,pers:hr.pers,persEnc:hr.persEnc||"utf8"}),xr=this.n.sub(new BN$1(1)),wr=0;;wr++){var br=hr.k?hr.k(wr):new BN$1(yr.generate(this.n.byteLength()));if(br=this._truncateToN(br,!0),!(br.cmpn(1)<=0||br.cmp(xr)>=0)){var Sr=this.g.mul(br);if(!Sr.isInfinity()){var vr=Sr.getX(),Er=vr.umod(this.n);if(Er.cmpn(0)!==0){var Ar=br.invm(this.n).mul(Er.mul(dr.getPrivate()).iadd(ar));if(Ar=Ar.umod(this.n),Ar.cmpn(0)!==0){var _r=(Sr.getY().isOdd()?1:0)|(vr.cmp(Er)!==0?2:0);return hr.canonical&&Ar.cmp(this.nh)>0&&(Ar=this.n.sub(Ar),_r^=1),new signature$1({r:Er,s:Ar,recoveryParam:_r})}}}}}};EC.prototype.verify=function(ar,dr,fr,hr){ar=this._truncateToN(new BN$1(ar,16)),fr=this.keyFromPublic(fr,hr),dr=new signature$1(dr,"hex");var pr=dr.r,mr=dr.s;if(pr.cmpn(1)<0||pr.cmp(this.n)>=0||mr.cmpn(1)<0||mr.cmp(this.n)>=0)return!1;var gr=mr.invm(this.n),yr=gr.mul(ar).umod(this.n),xr=gr.mul(pr).umod(this.n),wr;return this.curve._maxwellTrick?(wr=this.g.jmulAdd(yr,fr.getPublic(),xr),wr.isInfinity()?!1:wr.eqXToP(pr)):(wr=this.g.mulAdd(yr,fr.getPublic(),xr),wr.isInfinity()?!1:wr.getX().umod(this.n).cmp(pr)===0)};EC.prototype.recoverPubKey=function(cr,ar,dr,fr){assert$5$1((3&dr)===dr,"The recovery param is more than two bits"),ar=new signature$1(ar,fr);var hr=this.n,pr=new BN$1(cr),mr=ar.r,gr=ar.s,yr=dr&1,xr=dr>>1;if(mr.cmp(this.curve.p.umod(this.curve.n))>=0&&xr)throw new Error("Unable to find sencond key candinate");xr?mr=this.curve.pointFromX(mr.add(this.curve.n),yr):mr=this.curve.pointFromX(mr,yr);var wr=ar.r.invm(hr),br=hr.sub(pr).mul(wr).umod(hr),Sr=gr.mul(wr).umod(hr);return this.g.mulAdd(br,mr,Sr)};EC.prototype.getKeyRecoveryParam=function(cr,ar,dr,fr){if(ar=new signature$1(ar,fr),ar.recoveryParam!==null)return ar.recoveryParam;for(var hr=0;hr<4;hr++){var pr;try{pr=this.recoverPubKey(cr,ar,hr)}catch{continue}if(pr.eq(dr))return hr}throw new Error("Unable to find valid recovery factor")};var elliptic_1=createCommonjsModule(function(cr,ar){var dr=ar;dr.version="6.5.4",dr.utils=utils_1$1$1,dr.rand=function(){throw new Error("unsupported")},dr.curve=curve_1,dr.curves=curves_1,dr.ec=ec,dr.eddsa=null}),EC$1=elliptic_1.ec;const version$9="signing-key/5.7.0",logger$9=new Logger(version$9);let _curve=null;function getCurve(){return _curve||(_curve=new EC$1("secp256k1")),_curve}let SigningKey$1=class{constructor(ar){defineReadOnly(this,"curve","secp256k1"),defineReadOnly(this,"privateKey",hexlify$1(ar)),hexDataLength(this.privateKey)!==32&&logger$9.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const dr=getCurve().keyFromPrivate(arrayify(this.privateKey));defineReadOnly(this,"publicKey","0x"+dr.getPublic(!1,"hex")),defineReadOnly(this,"compressedPublicKey","0x"+dr.getPublic(!0,"hex")),defineReadOnly(this,"_isSigningKey",!0)}_addPoint(ar){const dr=getCurve().keyFromPublic(arrayify(this.publicKey)),fr=getCurve().keyFromPublic(arrayify(ar));return"0x"+dr.pub.add(fr.pub).encodeCompressed("hex")}signDigest(ar){const dr=getCurve().keyFromPrivate(arrayify(this.privateKey)),fr=arrayify(ar);fr.length!==32&&logger$9.throwArgumentError("bad digest length","digest",ar);const hr=dr.sign(fr,{canonical:!0});return splitSignature({recoveryParam:hr.recoveryParam,r:hexZeroPad("0x"+hr.r.toString(16),32),s:hexZeroPad("0x"+hr.s.toString(16),32)})}computeSharedSecret(ar){const dr=getCurve().keyFromPrivate(arrayify(this.privateKey)),fr=getCurve().keyFromPublic(arrayify(computePublicKey$2(ar)));return hexZeroPad("0x"+dr.derive(fr.getPublic()).toString(16),32)}static isSigningKey(ar){return!!(ar&&ar._isSigningKey)}};function computePublicKey$2(cr,ar){const dr=arrayify(cr);if(dr.length===32){const fr=new SigningKey$1(dr);return ar?"0x"+getCurve().keyFromPrivate(dr).getPublic(!0,"hex"):fr.publicKey}else{if(dr.length===33)return ar?hexlify$1(dr):"0x"+getCurve().keyFromPublic(dr).getPublic(!1,"hex");if(dr.length===65)return ar?"0x"+getCurve().keyFromPublic(dr).getPublic(!0,"hex"):hexlify$1(dr)}return logger$9.throwArgumentError("invalid public or private key","key","[REDACTED]")}const version$8="transactions/5.7.0",logger$8=new Logger(version$8);var TransactionTypes;(function(cr){cr[cr.legacy=0]="legacy",cr[cr.eip2930=1]="eip2930",cr[cr.eip1559=2]="eip1559"})(TransactionTypes||(TransactionTypes={}));const transactionFields=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],allowedTransactionKeys={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function computeAddress$1(cr){const ar=computePublicKey$2(cr);return getAddress$1(hexDataSlice(keccak256$1(hexDataSlice(ar,1)),12))}function formatNumber$1(cr,ar){const dr=stripZeros(BigNumber.from(cr).toHexString());return dr.length>32&&logger$8.throwArgumentError("invalid length for "+ar,"transaction:"+ar,cr),dr}function accessSetify$1(cr,ar){return{address:getAddress$1(cr),storageKeys:(ar||[]).map((dr,fr)=>(hexDataLength(dr)!==32&&logger$8.throwArgumentError("invalid access list storageKey",`accessList[${cr}:${fr}]`,dr),dr.toLowerCase()))}}function accessListify$1(cr){if(Array.isArray(cr))return cr.map((dr,fr)=>Array.isArray(dr)?(dr.length>2&&logger$8.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${fr}]`,dr),accessSetify$1(dr[0],dr[1])):accessSetify$1(dr.address,dr.storageKeys));const ar=Object.keys(cr).map(dr=>{const fr=cr[dr].reduce((hr,pr)=>(hr[pr]=!0,hr),{});return accessSetify$1(dr,Object.keys(fr).sort())});return ar.sort((dr,fr)=>dr.address.localeCompare(fr.address)),ar}function formatAccessList$1(cr){return accessListify$1(cr).map(ar=>[ar.address,ar.storageKeys])}function _serializeEip1559$1(cr,ar){if(cr.gasPrice!=null){const fr=BigNumber.from(cr.gasPrice),hr=BigNumber.from(cr.maxFeePerGas||0);fr.eq(hr)||logger$8.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:fr,maxFeePerGas:hr})}const dr=[formatNumber$1(cr.chainId||0,"chainId"),formatNumber$1(cr.nonce||0,"nonce"),formatNumber$1(cr.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber$1(cr.maxFeePerGas||0,"maxFeePerGas"),formatNumber$1(cr.gasLimit||0,"gasLimit"),cr.to!=null?getAddress$1(cr.to):"0x",formatNumber$1(cr.value||0,"value"),cr.data||"0x",formatAccessList$1(cr.accessList||[])];if(ar){const fr=splitSignature(ar);dr.push(formatNumber$1(fr.recoveryParam,"recoveryParam")),dr.push(stripZeros(fr.r)),dr.push(stripZeros(fr.s))}return hexConcat(["0x02",encode$f(dr)])}function _serializeEip2930$1(cr,ar){const dr=[formatNumber$1(cr.chainId||0,"chainId"),formatNumber$1(cr.nonce||0,"nonce"),formatNumber$1(cr.gasPrice||0,"gasPrice"),formatNumber$1(cr.gasLimit||0,"gasLimit"),cr.to!=null?getAddress$1(cr.to):"0x",formatNumber$1(cr.value||0,"value"),cr.data||"0x",formatAccessList$1(cr.accessList||[])];if(ar){const fr=splitSignature(ar);dr.push(formatNumber$1(fr.recoveryParam,"recoveryParam")),dr.push(stripZeros(fr.r)),dr.push(stripZeros(fr.s))}return hexConcat(["0x01",encode$f(dr)])}function _serialize(cr,ar){checkProperties(cr,allowedTransactionKeys);const dr=[];transactionFields.forEach(function(mr){let gr=cr[mr.name]||[];const yr={};mr.numeric&&(yr.hexPad="left"),gr=arrayify(hexlify$1(gr,yr)),mr.length&&gr.length!==mr.length&&gr.length>0&&logger$8.throwArgumentError("invalid length for "+mr.name,"transaction:"+mr.name,gr),mr.maxLength&&(gr=stripZeros(gr),gr.length>mr.maxLength&&logger$8.throwArgumentError("invalid length for "+mr.name,"transaction:"+mr.name,gr)),dr.push(hexlify$1(gr))});let fr=0;if(cr.chainId!=null?(fr=cr.chainId,typeof fr!="number"&&logger$8.throwArgumentError("invalid transaction.chainId","transaction",cr)):ar&&!isBytesLike$1(ar)&&ar.v>28&&(fr=Math.floor((ar.v-35)/2)),fr!==0&&(dr.push(hexlify$1(fr)),dr.push("0x"),dr.push("0x")),!ar)return encode$f(dr);const hr=splitSignature(ar);let pr=27+hr.recoveryParam;return fr!==0?(dr.pop(),dr.pop(),dr.pop(),pr+=fr*2+8,hr.v>28&&hr.v!==pr&&logger$8.throwArgumentError("transaction.chainId/signature.v mismatch","signature",ar)):hr.v!==pr&&logger$8.throwArgumentError("transaction.chainId/signature.v mismatch","signature",ar),dr.push(hexlify$1(pr)),dr.push(stripZeros(arrayify(hr.r))),dr.push(stripZeros(arrayify(hr.s))),encode$f(dr)}function serialize(cr,ar){if(cr.type==null||cr.type===0)return cr.accessList!=null&&logger$8.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",cr),_serialize(cr,ar);switch(cr.type){case 1:return _serializeEip2930$1(cr,ar);case 2:return _serializeEip1559$1(cr,ar)}return logger$8.throwError(`unsupported transaction type: ${cr.type}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:cr.type})}class BaseX{constructor(ar){defineReadOnly(this,"alphabet",ar),defineReadOnly(this,"base",ar.length),defineReadOnly(this,"_alphabetMap",{}),defineReadOnly(this,"_leader",ar.charAt(0));for(let dr=0;dr<ar.length;dr++)this._alphabetMap[ar.charAt(dr)]=dr}encode(ar){let dr=arrayify(ar);if(dr.length===0)return"";let fr=[0];for(let pr=0;pr<dr.length;++pr){let mr=dr[pr];for(let gr=0;gr<fr.length;++gr)mr+=fr[gr]<<8,fr[gr]=mr%this.base,mr=mr/this.base|0;for(;mr>0;)fr.push(mr%this.base),mr=mr/this.base|0}let hr="";for(let pr=0;dr[pr]===0&&pr<dr.length-1;++pr)hr+=this._leader;for(let pr=fr.length-1;pr>=0;--pr)hr+=this.alphabet[fr[pr]];return hr}decode(ar){if(typeof ar!="string")throw new TypeError("Expected String");let dr=[];if(ar.length===0)return new Uint8Array(dr);dr.push(0);for(let fr=0;fr<ar.length;fr++){let hr=this._alphabetMap[ar[fr]];if(hr===void 0)throw new Error("Non-base"+this.base+" character");let pr=hr;for(let mr=0;mr<dr.length;++mr)pr+=dr[mr]*this.base,dr[mr]=pr&255,pr>>=8;for(;pr>0;)dr.push(pr&255),pr>>=8}for(let fr=0;ar[fr]===this._leader&&fr<ar.length-1;++fr)dr.push(0);return arrayify(new Uint8Array(dr.reverse()))}}new BaseX("abcdefghijklmnopqrstuvwxyz234567");const Base58=new BaseX("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var SupportedAlgorithm;(function(cr){cr.sha256="sha256",cr.sha512="sha512"})(SupportedAlgorithm||(SupportedAlgorithm={}));const version$7="sha2/5.7.0",logger$7=new Logger(version$7);function ripemd160$2(cr){return"0x"+hash$4.ripemd160().update(arrayify(cr)).digest("hex")}function sha256$5(cr){return"0x"+hash$4.sha256().update(arrayify(cr)).digest("hex")}function computeHmac$1(cr,ar,dr){return SupportedAlgorithm[cr]||logger$7.throwError("unsupported algorithm "+cr,Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:cr}),"0x"+hash$4.hmac(hash$4[cr],arrayify(ar)).update(arrayify(dr)).digest("hex")}function pbkdf2$3(cr,ar,dr,fr,hr){cr=arrayify(cr),ar=arrayify(ar);let pr,mr=1;const gr=new Uint8Array(fr),yr=new Uint8Array(ar.length+4);yr.set(ar);let xr,wr;for(let br=1;br<=mr;br++){yr[ar.length]=br>>24&255,yr[ar.length+1]=br>>16&255,yr[ar.length+2]=br>>8&255,yr[ar.length+3]=br&255;let Sr=arrayify(computeHmac$1(hr,cr,yr));pr||(pr=Sr.length,wr=new Uint8Array(pr),mr=Math.ceil(fr/pr),xr=fr-(mr-1)*pr),wr.set(Sr);for(let Ar=1;Ar<dr;Ar++){Sr=arrayify(computeHmac$1(hr,cr,Sr));for(let _r=0;_r<pr;_r++)wr[_r]^=Sr[_r]}const vr=(br-1)*pr,Er=br===mr?xr:pr;gr.set(arrayify(wr).slice(0,Er),vr)}return hexlify$1(gr)}const version$6="wordlists/5.7.0",logger$6=new Logger(version$6);let Wordlist$1=class so{constructor(ar){logger$6.checkAbstract(new.target,so),defineReadOnly(this,"locale",ar)}split(ar){return ar.toLowerCase().split(/ +/g)}join(ar){return ar.join(" ")}static check(ar){const dr=[];for(let fr=0;fr<2048;fr++){const hr=ar.getWord(fr);if(fr!==ar.getWordIndex(hr))return"0x";dr.push(hr)}return id$2(dr.join(`
`)+`
`)}static register(ar,dr){dr||(dr=ar.locale)}};const words$1="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let wordlist$2=null;function loadWords(cr){if(wordlist$2==null&&(wordlist$2=words$1.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Wordlist$1.check(cr)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw wordlist$2=null,new Error("BIP39 Wordlist for en (English) FAILED")}let LangEn$1=class extends Wordlist$1{constructor(){super("en")}getWord(ar){return loadWords(this),wordlist$2[ar]}getWordIndex(ar){return loadWords(this),wordlist$2.indexOf(ar)}};const langEn$1=new LangEn$1;Wordlist$1.register(langEn$1);const wordlists$1={en:langEn$1},version$5="hdnode/5.7.0",logger$5=new Logger(version$5),N$4=BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),MasterSecret$1=toUtf8Bytes$1("Bitcoin seed"),HardenedBit$1=2147483648;function getUpperMask$1(cr){return(1<<cr)-1<<8-cr}function getLowerMask$1(cr){return(1<<cr)-1}function bytes32$1(cr){return hexZeroPad(hexlify$1(cr),32)}function base58check(cr){return Base58.encode(concat$6([cr,hexDataSlice(sha256$5(sha256$5(cr)),0,4)]))}function getWordlist(cr){if(cr==null)return wordlists$1.en;if(typeof cr=="string"){const ar=wordlists$1[cr];return ar==null&&logger$5.throwArgumentError("unknown locale","wordlist",cr),ar}return cr}const _constructorGuard={},defaultPath$2="m/44'/60'/0'/0/0";class HDNode{constructor(ar,dr,fr,hr,pr,mr,gr,yr){if(ar!==_constructorGuard)throw new Error("HDNode constructor cannot be called directly");if(dr){const xr=new SigningKey$1(dr);defineReadOnly(this,"privateKey",xr.privateKey),defineReadOnly(this,"publicKey",xr.compressedPublicKey)}else defineReadOnly(this,"privateKey",null),defineReadOnly(this,"publicKey",hexlify$1(fr));defineReadOnly(this,"parentFingerprint",hr),defineReadOnly(this,"fingerprint",hexDataSlice(ripemd160$2(sha256$5(this.publicKey)),0,4)),defineReadOnly(this,"address",computeAddress$1(this.publicKey)),defineReadOnly(this,"chainCode",pr),defineReadOnly(this,"index",mr),defineReadOnly(this,"depth",gr),yr==null?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",null)):typeof yr=="string"?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",yr)):(defineReadOnly(this,"mnemonic",yr),defineReadOnly(this,"path",yr.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return base58check(concat$6([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",hexlify$1(this.depth),this.parentFingerprint,hexZeroPad(hexlify$1(this.index),4),this.chainCode,this.privateKey!=null?concat$6(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new HDNode(_constructorGuard,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(ar){if(ar>4294967295)throw new Error("invalid index - "+String(ar));let dr=this.path;dr&&(dr+="/"+(ar&~HardenedBit$1));const fr=new Uint8Array(37);if(ar&HardenedBit$1){if(!this.privateKey)throw new Error("cannot derive child of neutered node");fr.set(arrayify(this.privateKey),1),dr&&(dr+="'")}else fr.set(arrayify(this.publicKey));for(let br=24;br>=0;br-=8)fr[33+(br>>3)]=ar>>24-br&255;const hr=arrayify(computeHmac$1(SupportedAlgorithm.sha512,this.chainCode,fr)),pr=hr.slice(0,32),mr=hr.slice(32);let gr=null,yr=null;this.privateKey?gr=bytes32$1(BigNumber.from(pr).add(this.privateKey).mod(N$4)):yr=new SigningKey$1(hexlify$1(pr))._addPoint(this.publicKey);let xr=dr;const wr=this.mnemonic;return wr&&(xr=Object.freeze({phrase:wr.phrase,path:dr,locale:wr.locale||"en"})),new HDNode(_constructorGuard,gr,yr,this.fingerprint,bytes32$1(mr),ar,this.depth+1,xr)}derivePath(ar){const dr=ar.split("/");if(dr.length===0||dr[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+ar);dr[0]==="m"&&dr.shift();let fr=this;for(let hr=0;hr<dr.length;hr++){const pr=dr[hr];if(pr.match(/^[0-9]+'$/)){const mr=parseInt(pr.substring(0,pr.length-1));if(mr>=HardenedBit$1)throw new Error("invalid path index - "+pr);fr=fr._derive(HardenedBit$1+mr)}else if(pr.match(/^[0-9]+$/)){const mr=parseInt(pr);if(mr>=HardenedBit$1)throw new Error("invalid path index - "+pr);fr=fr._derive(mr)}else throw new Error("invalid path component - "+pr)}return fr}static _fromSeed(ar,dr){const fr=arrayify(ar);if(fr.length<16||fr.length>64)throw new Error("invalid seed");const hr=arrayify(computeHmac$1(SupportedAlgorithm.sha512,MasterSecret$1,fr));return new HDNode(_constructorGuard,bytes32$1(hr.slice(0,32)),null,"0x00000000",bytes32$1(hr.slice(32)),0,0,dr)}static fromMnemonic(ar,dr,fr){return fr=getWordlist(fr),ar=entropyToMnemonic$1(mnemonicToEntropy$1(ar,fr),fr),HDNode._fromSeed(mnemonicToSeed(ar,dr),{phrase:ar,path:"m",locale:fr.locale})}static fromSeed(ar){return HDNode._fromSeed(ar,null)}static fromExtendedKey(ar){const dr=Base58.decode(ar);(dr.length!==82||base58check(dr.slice(0,78))!==ar)&&logger$5.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const fr=dr[4],hr=hexlify$1(dr.slice(5,9)),pr=parseInt(hexlify$1(dr.slice(9,13)).substring(2),16),mr=hexlify$1(dr.slice(13,45)),gr=dr.slice(45,78);switch(hexlify$1(dr.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new HDNode(_constructorGuard,null,hexlify$1(gr),hr,mr,pr,fr,null);case"0x0488ade4":case"0x04358394 ":if(gr[0]!==0)break;return new HDNode(_constructorGuard,hexlify$1(gr.slice(1)),null,hr,mr,pr,fr,null)}return logger$5.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function mnemonicToSeed(cr,ar){ar||(ar="");const dr=toUtf8Bytes$1("mnemonic"+ar,UnicodeNormalizationForm.NFKD);return pbkdf2$3(toUtf8Bytes$1(cr,UnicodeNormalizationForm.NFKD),dr,2048,64,"sha512")}function mnemonicToEntropy$1(cr,ar){ar=getWordlist(ar),logger$5.checkNormalize();const dr=ar.split(cr);if(dr.length%3!==0)throw new Error("invalid mnemonic");const fr=arrayify(new Uint8Array(Math.ceil(11*dr.length/8)));let hr=0;for(let xr=0;xr<dr.length;xr++){let wr=ar.getWordIndex(dr[xr].normalize("NFKD"));if(wr===-1)throw new Error("invalid mnemonic");for(let br=0;br<11;br++)wr&1<<10-br&&(fr[hr>>3]|=1<<7-hr%8),hr++}const pr=32*dr.length/3,mr=dr.length/3,gr=getUpperMask$1(mr);if((arrayify(sha256$5(fr.slice(0,pr/8)))[0]&gr)!==(fr[fr.length-1]&gr))throw new Error("invalid checksum");return hexlify$1(fr.slice(0,pr/8))}function entropyToMnemonic$1(cr,ar){if(ar=getWordlist(ar),cr=arrayify(cr),cr.length%4!==0||cr.length<16||cr.length>32)throw new Error("invalid entropy");const dr=[0];let fr=11;for(let mr=0;mr<cr.length;mr++)fr>8?(dr[dr.length-1]<<=8,dr[dr.length-1]|=cr[mr],fr-=8):(dr[dr.length-1]<<=fr,dr[dr.length-1]|=cr[mr]>>8-fr,dr.push(cr[mr]&getLowerMask$1(8-fr)),fr+=3);const hr=cr.length/4,pr=arrayify(sha256$5(cr))[0]&getUpperMask$1(hr);return dr[dr.length-1]<<=hr,dr[dr.length-1]|=pr>>8-hr,ar.join(dr.map(mr=>ar.getWord(mr)))}const version$4="random/5.7.0",logger$4=new Logger(version$4);function getGlobal$1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate globalThis object")}const anyGlobal$1=getGlobal$1();let crypto$6=anyGlobal$1.crypto||anyGlobal$1.msCrypto;(!crypto$6||!crypto$6.getRandomValues)&&(logger$4.warn("WARNING: Missing strong random number source"),crypto$6={getRandomValues:function(cr){return logger$4.throwError("no secure random source avaialble",Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function randomBytes$5(cr){(cr<=0||cr>1024||cr%1||cr!=cr)&&logger$4.throwArgumentError("invalid length","length",cr);const ar=new Uint8Array(cr);return crypto$6.getRandomValues(ar),arrayify(ar)}var aesJs={exports:{}};(function(cr,ar){(function(dr){function fr(Qr){return parseInt(Qr)===Qr}function hr(Qr){if(!fr(Qr.length))return!1;for(var zr=0;zr<Qr.length;zr++)if(!fr(Qr[zr])||Qr[zr]<0||Qr[zr]>255)return!1;return!0}function pr(Qr,zr){if(Qr.buffer&&ArrayBuffer.isView(Qr)&&Qr.name==="Uint8Array")return zr&&(Qr.slice?Qr=Qr.slice():Qr=Array.prototype.slice.call(Qr)),Qr;if(Array.isArray(Qr)){if(!hr(Qr))throw new Error("Array contains invalid value: "+Qr);return new Uint8Array(Qr)}if(fr(Qr.length)&&hr(Qr))return new Uint8Array(Qr);throw new Error("unsupported array-like object")}function mr(Qr){return new Uint8Array(Qr)}function gr(Qr,zr,Wr,ss,Xr){(ss!=null||Xr!=null)&&(Qr.slice?Qr=Qr.slice(ss,Xr):Qr=Array.prototype.slice.call(Qr,ss,Xr)),zr.set(Qr,Wr)}var yr=function(){function Qr(Wr){var ss=[],Xr=0;for(Wr=encodeURI(Wr);Xr<Wr.length;){var ts=Wr.charCodeAt(Xr++);ts===37?(ss.push(parseInt(Wr.substr(Xr,2),16)),Xr+=2):ss.push(ts)}return pr(ss)}function zr(Wr){for(var ss=[],Xr=0;Xr<Wr.length;){var ts=Wr[Xr];ts<128?(ss.push(String.fromCharCode(ts)),Xr++):ts>191&&ts<224?(ss.push(String.fromCharCode((ts&31)<<6|Wr[Xr+1]&63)),Xr+=2):(ss.push(String.fromCharCode((ts&15)<<12|(Wr[Xr+1]&63)<<6|Wr[Xr+2]&63)),Xr+=3)}return ss.join("")}return{toBytes:Qr,fromBytes:zr}}(),xr=function(){function Qr(ss){for(var Xr=[],ts=0;ts<ss.length;ts+=2)Xr.push(parseInt(ss.substr(ts,2),16));return Xr}var zr="0123456789abcdef";function Wr(ss){for(var Xr=[],ts=0;ts<ss.length;ts++){var fs=ss[ts];Xr.push(zr[(fs&240)>>4]+zr[fs&15])}return Xr.join("")}return{toBytes:Qr,fromBytes:Wr}}(),wr={16:10,24:12,32:14},br=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Sr=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],vr=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Er=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],Ar=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],_r=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],Cr=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],kr=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],Rr=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],Ir=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],Nr=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],Pr=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Tr=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Br=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],Fr=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function jr(Qr){for(var zr=[],Wr=0;Wr<Qr.length;Wr+=4)zr.push(Qr[Wr]<<24|Qr[Wr+1]<<16|Qr[Wr+2]<<8|Qr[Wr+3]);return zr}var Ur=function(Qr){if(!(this instanceof Ur))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:pr(Qr,!0)}),this._prepare()};Ur.prototype._prepare=function(){var Qr=wr[this.key.length];if(Qr==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var zr=0;zr<=Qr;zr++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var Wr=(Qr+1)*4,ss=this.key.length/4,Xr=jr(this.key),ts,zr=0;zr<ss;zr++)ts=zr>>2,this._Ke[ts][zr%4]=Xr[zr],this._Kd[Qr-ts][zr%4]=Xr[zr];for(var fs=0,rs=ss,as;rs<Wr;){if(as=Xr[ss-1],Xr[0]^=Sr[as>>16&255]<<24^Sr[as>>8&255]<<16^Sr[as&255]<<8^Sr[as>>24&255]^br[fs]<<24,fs+=1,ss!=8)for(var zr=1;zr<ss;zr++)Xr[zr]^=Xr[zr-1];else{for(var zr=1;zr<ss/2;zr++)Xr[zr]^=Xr[zr-1];as=Xr[ss/2-1],Xr[ss/2]^=Sr[as&255]^Sr[as>>8&255]<<8^Sr[as>>16&255]<<16^Sr[as>>24&255]<<24;for(var zr=ss/2+1;zr<ss;zr++)Xr[zr]^=Xr[zr-1]}for(var zr=0,ps,xs;zr<ss&&rs<Wr;)ps=rs>>2,xs=rs%4,this._Ke[ps][xs]=Xr[zr],this._Kd[Qr-ps][xs]=Xr[zr++],rs++}for(var ps=1;ps<Qr;ps++)for(var xs=0;xs<4;xs++)as=this._Kd[ps][xs],this._Kd[ps][xs]=Pr[as>>24&255]^Tr[as>>16&255]^Br[as>>8&255]^Fr[as&255]},Ur.prototype.encrypt=function(Qr){if(Qr.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var zr=this._Ke.length-1,Wr=[0,0,0,0],ss=jr(Qr),Xr=0;Xr<4;Xr++)ss[Xr]^=this._Ke[0][Xr];for(var ts=1;ts<zr;ts++){for(var Xr=0;Xr<4;Xr++)Wr[Xr]=Er[ss[Xr]>>24&255]^Ar[ss[(Xr+1)%4]>>16&255]^_r[ss[(Xr+2)%4]>>8&255]^Cr[ss[(Xr+3)%4]&255]^this._Ke[ts][Xr];ss=Wr.slice()}for(var fs=mr(16),rs,Xr=0;Xr<4;Xr++)rs=this._Ke[zr][Xr],fs[4*Xr]=(Sr[ss[Xr]>>24&255]^rs>>24)&255,fs[4*Xr+1]=(Sr[ss[(Xr+1)%4]>>16&255]^rs>>16)&255,fs[4*Xr+2]=(Sr[ss[(Xr+2)%4]>>8&255]^rs>>8)&255,fs[4*Xr+3]=(Sr[ss[(Xr+3)%4]&255]^rs)&255;return fs},Ur.prototype.decrypt=function(Qr){if(Qr.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var zr=this._Kd.length-1,Wr=[0,0,0,0],ss=jr(Qr),Xr=0;Xr<4;Xr++)ss[Xr]^=this._Kd[0][Xr];for(var ts=1;ts<zr;ts++){for(var Xr=0;Xr<4;Xr++)Wr[Xr]=kr[ss[Xr]>>24&255]^Rr[ss[(Xr+3)%4]>>16&255]^Ir[ss[(Xr+2)%4]>>8&255]^Nr[ss[(Xr+1)%4]&255]^this._Kd[ts][Xr];ss=Wr.slice()}for(var fs=mr(16),rs,Xr=0;Xr<4;Xr++)rs=this._Kd[zr][Xr],fs[4*Xr]=(vr[ss[Xr]>>24&255]^rs>>24)&255,fs[4*Xr+1]=(vr[ss[(Xr+3)%4]>>16&255]^rs>>16)&255,fs[4*Xr+2]=(vr[ss[(Xr+2)%4]>>8&255]^rs>>8)&255,fs[4*Xr+3]=(vr[ss[(Xr+1)%4]&255]^rs)&255;return fs};var qr=function(Qr){if(!(this instanceof qr))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new Ur(Qr)};qr.prototype.encrypt=function(Qr){if(Qr=pr(Qr),Qr.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var zr=mr(Qr.length),Wr=mr(16),ss=0;ss<Qr.length;ss+=16)gr(Qr,Wr,0,ss,ss+16),Wr=this._aes.encrypt(Wr),gr(Wr,zr,ss);return zr},qr.prototype.decrypt=function(Qr){if(Qr=pr(Qr),Qr.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var zr=mr(Qr.length),Wr=mr(16),ss=0;ss<Qr.length;ss+=16)gr(Qr,Wr,0,ss,ss+16),Wr=this._aes.decrypt(Wr),gr(Wr,zr,ss);return zr};var Hr=function(Qr,zr){if(!(this instanceof Hr))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!zr)zr=mr(16);else if(zr.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=pr(zr,!0),this._aes=new Ur(Qr)};Hr.prototype.encrypt=function(Qr){if(Qr=pr(Qr),Qr.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var zr=mr(Qr.length),Wr=mr(16),ss=0;ss<Qr.length;ss+=16){gr(Qr,Wr,0,ss,ss+16);for(var Xr=0;Xr<16;Xr++)Wr[Xr]^=this._lastCipherblock[Xr];this._lastCipherblock=this._aes.encrypt(Wr),gr(this._lastCipherblock,zr,ss)}return zr},Hr.prototype.decrypt=function(Qr){if(Qr=pr(Qr),Qr.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var zr=mr(Qr.length),Wr=mr(16),ss=0;ss<Qr.length;ss+=16){gr(Qr,Wr,0,ss,ss+16),Wr=this._aes.decrypt(Wr);for(var Xr=0;Xr<16;Xr++)zr[ss+Xr]=Wr[Xr]^this._lastCipherblock[Xr];gr(Qr,this._lastCipherblock,0,ss,ss+16)}return zr};var Or=function(Qr,zr,Wr){if(!(this instanceof Or))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!zr)zr=mr(16);else if(zr.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");Wr||(Wr=1),this.segmentSize=Wr,this._shiftRegister=pr(zr,!0),this._aes=new Ur(Qr)};Or.prototype.encrypt=function(Qr){if(Qr.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var zr=pr(Qr,!0),Wr,ss=0;ss<zr.length;ss+=this.segmentSize){Wr=this._aes.encrypt(this._shiftRegister);for(var Xr=0;Xr<this.segmentSize;Xr++)zr[ss+Xr]^=Wr[Xr];gr(this._shiftRegister,this._shiftRegister,0,this.segmentSize),gr(zr,this._shiftRegister,16-this.segmentSize,ss,ss+this.segmentSize)}return zr},Or.prototype.decrypt=function(Qr){if(Qr.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var zr=pr(Qr,!0),Wr,ss=0;ss<zr.length;ss+=this.segmentSize){Wr=this._aes.encrypt(this._shiftRegister);for(var Xr=0;Xr<this.segmentSize;Xr++)zr[ss+Xr]^=Wr[Xr];gr(this._shiftRegister,this._shiftRegister,0,this.segmentSize),gr(Qr,this._shiftRegister,16-this.segmentSize,ss,ss+this.segmentSize)}return zr};var Mr=function(Qr,zr){if(!(this instanceof Mr))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!zr)zr=mr(16);else if(zr.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=pr(zr,!0),this._lastPrecipherIndex=16,this._aes=new Ur(Qr)};Mr.prototype.encrypt=function(Qr){for(var zr=pr(Qr,!0),Wr=0;Wr<zr.length;Wr++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),zr[Wr]^=this._lastPrecipher[this._lastPrecipherIndex++];return zr},Mr.prototype.decrypt=Mr.prototype.encrypt;var Lr=function(Qr){if(!(this instanceof Lr))throw Error("Counter must be instanitated with `new`");Qr!==0&&!Qr&&(Qr=1),typeof Qr=="number"?(this._counter=mr(16),this.setValue(Qr)):this.setBytes(Qr)};Lr.prototype.setValue=function(Qr){if(typeof Qr!="number"||parseInt(Qr)!=Qr)throw new Error("invalid counter value (must be an integer)");for(var zr=15;zr>=0;--zr)this._counter[zr]=Qr%256,Qr=Qr>>8},Lr.prototype.setBytes=function(Qr){if(Qr=pr(Qr,!0),Qr.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=Qr},Lr.prototype.increment=function(){for(var Qr=15;Qr>=0;Qr--)if(this._counter[Qr]===255)this._counter[Qr]=0;else{this._counter[Qr]++;break}};var Vr=function(Qr,zr){if(!(this instanceof Vr))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",zr instanceof Lr||(zr=new Lr(zr)),this._counter=zr,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new Ur(Qr)};Vr.prototype.encrypt=function(Qr){for(var zr=pr(Qr,!0),Wr=0;Wr<zr.length;Wr++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),zr[Wr]^=this._remainingCounter[this._remainingCounterIndex++];return zr},Vr.prototype.decrypt=Vr.prototype.encrypt;function Jr(Qr){Qr=pr(Qr,!0);var zr=16-Qr.length%16,Wr=mr(Qr.length+zr);gr(Qr,Wr);for(var ss=Qr.length;ss<Wr.length;ss++)Wr[ss]=zr;return Wr}function es(Qr){if(Qr=pr(Qr,!0),Qr.length<16)throw new Error("PKCS#7 invalid length");var zr=Qr[Qr.length-1];if(zr>16)throw new Error("PKCS#7 padding byte out of range");for(var Wr=Qr.length-zr,ss=0;ss<zr;ss++)if(Qr[Wr+ss]!==zr)throw new Error("PKCS#7 invalid padding byte");var Xr=mr(Wr);return gr(Qr,Xr,0,0,Wr),Xr}var ns={AES:Ur,Counter:Lr,ModeOfOperation:{ecb:qr,cbc:Hr,cfb:Or,ofb:Mr,ctr:Vr},utils:{hex:xr,utf8:yr},padding:{pkcs7:{pad:Jr,strip:es}},_arrayTest:{coerceArray:pr,createArray:mr,copyArray:gr}};cr.exports=ns})()})(aesJs);var aesJsExports=aesJs.exports;const aes=getDefaultExportFromCjs(aesJsExports),version$3="json-wallets/5.7.0";function looseArrayify$1(cr){return typeof cr=="string"&&cr.substring(0,2)!=="0x"&&(cr="0x"+cr),arrayify(cr)}function zpad$2(cr,ar){for(cr=String(cr);cr.length<ar;)cr="0"+cr;return cr}function getPassword$1(cr){return typeof cr=="string"?toUtf8Bytes$1(cr,UnicodeNormalizationForm.NFKC):arrayify(cr)}function searchPath(cr,ar){let dr=cr;const fr=ar.toLowerCase().split("/");for(let hr=0;hr<fr.length;hr++){let pr=null;for(const mr in dr)if(mr.toLowerCase()===fr[hr]){pr=dr[mr];break}if(pr===null)return null;dr=pr}return dr}function uuidV4$1(cr){const ar=arrayify(cr);ar[6]=ar[6]&15|64,ar[8]=ar[8]&63|128;const dr=hexlify$1(ar);return[dr.substring(2,10),dr.substring(10,14),dr.substring(14,18),dr.substring(18,22),dr.substring(22,34)].join("-")}const logger$3=new Logger(version$3);class CrowdsaleAccount extends Description{isCrowdsaleAccount(ar){return!!(ar&&ar._isCrowdsaleAccount)}}function decrypt$3(cr,ar){const dr=JSON.parse(cr);ar=getPassword$1(ar);const fr=getAddress$1(searchPath(dr,"ethaddr")),hr=looseArrayify$1(searchPath(dr,"encseed"));(!hr||hr.length%16!==0)&&logger$3.throwArgumentError("invalid encseed","json",cr);const pr=arrayify(pbkdf2$3(ar,ar,2e3,32,"sha256")).slice(0,16),mr=hr.slice(0,16),gr=hr.slice(16),yr=new aes.ModeOfOperation.cbc(pr,mr),xr=aes.padding.pkcs7.strip(arrayify(yr.decrypt(gr)));let wr="";for(let vr=0;vr<xr.length;vr++)wr+=String.fromCharCode(xr[vr]);const br=toUtf8Bytes$1(wr),Sr=keccak256$1(br);return new CrowdsaleAccount({_isCrowdsaleAccount:!0,address:fr,privateKey:Sr})}function isCrowdsaleWallet(cr){let ar=null;try{ar=JSON.parse(cr)}catch{return!1}return ar.encseed&&ar.ethaddr}function isKeystoreWallet(cr){let ar=null;try{ar=JSON.parse(cr)}catch{return!1}return!(!ar.version||parseInt(ar.version)!==ar.version||parseInt(ar.version)!==3)}var scrypt$5={exports:{}};(function(cr,ar){(function(dr){function hr(Ar){const _r=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let Cr=1779033703,kr=3144134277,Rr=1013904242,Ir=2773480762,Nr=1359893119,Pr=2600822924,Tr=528734635,Br=1541459225;const Fr=new Uint32Array(64);function jr(Vr){let Jr=0,es=Vr.length;for(;es>=64;){let ns=Cr,Qr=kr,zr=Rr,Wr=Ir,ss=Nr,Xr=Pr,ts=Tr,fs=Br,rs,as,ps,xs,Ss;for(as=0;as<16;as++)ps=Jr+as*4,Fr[as]=(Vr[ps]&255)<<24|(Vr[ps+1]&255)<<16|(Vr[ps+2]&255)<<8|Vr[ps+3]&255;for(as=16;as<64;as++)rs=Fr[as-2],xs=(rs>>>17|rs<<32-17)^(rs>>>19|rs<<32-19)^rs>>>10,rs=Fr[as-15],Ss=(rs>>>7|rs<<32-7)^(rs>>>18|rs<<32-18)^rs>>>3,Fr[as]=(xs+Fr[as-7]|0)+(Ss+Fr[as-16]|0)|0;for(as=0;as<64;as++)xs=(((ss>>>6|ss<<32-6)^(ss>>>11|ss<<32-11)^(ss>>>25|ss<<32-25))+(ss&Xr^~ss&ts)|0)+(fs+(_r[as]+Fr[as]|0)|0)|0,Ss=((ns>>>2|ns<<32-2)^(ns>>>13|ns<<32-13)^(ns>>>22|ns<<32-22))+(ns&Qr^ns&zr^Qr&zr)|0,fs=ts,ts=Xr,Xr=ss,ss=Wr+xs|0,Wr=zr,zr=Qr,Qr=ns,ns=xs+Ss|0;Cr=Cr+ns|0,kr=kr+Qr|0,Rr=Rr+zr|0,Ir=Ir+Wr|0,Nr=Nr+ss|0,Pr=Pr+Xr|0,Tr=Tr+ts|0,Br=Br+fs|0,Jr+=64,es-=64}}jr(Ar);let Ur,qr=Ar.length%64,Hr=Ar.length/536870912|0,Or=Ar.length<<3,Mr=qr<56?56:120,Lr=Ar.slice(Ar.length-qr,Ar.length);for(Lr.push(128),Ur=qr+1;Ur<Mr;Ur++)Lr.push(0);return Lr.push(Hr>>>24&255),Lr.push(Hr>>>16&255),Lr.push(Hr>>>8&255),Lr.push(Hr>>>0&255),Lr.push(Or>>>24&255),Lr.push(Or>>>16&255),Lr.push(Or>>>8&255),Lr.push(Or>>>0&255),jr(Lr),[Cr>>>24&255,Cr>>>16&255,Cr>>>8&255,Cr>>>0&255,kr>>>24&255,kr>>>16&255,kr>>>8&255,kr>>>0&255,Rr>>>24&255,Rr>>>16&255,Rr>>>8&255,Rr>>>0&255,Ir>>>24&255,Ir>>>16&255,Ir>>>8&255,Ir>>>0&255,Nr>>>24&255,Nr>>>16&255,Nr>>>8&255,Nr>>>0&255,Pr>>>24&255,Pr>>>16&255,Pr>>>8&255,Pr>>>0&255,Tr>>>24&255,Tr>>>16&255,Tr>>>8&255,Tr>>>0&255,Br>>>24&255,Br>>>16&255,Br>>>8&255,Br>>>0&255]}function pr(Ar,_r,Cr){Ar=Ar.length<=64?Ar:hr(Ar);const kr=64+_r.length+4,Rr=new Array(kr),Ir=new Array(64);let Nr,Pr=[];for(Nr=0;Nr<64;Nr++)Rr[Nr]=54;for(Nr=0;Nr<Ar.length;Nr++)Rr[Nr]^=Ar[Nr];for(Nr=0;Nr<_r.length;Nr++)Rr[64+Nr]=_r[Nr];for(Nr=kr-4;Nr<kr;Nr++)Rr[Nr]=0;for(Nr=0;Nr<64;Nr++)Ir[Nr]=92;for(Nr=0;Nr<Ar.length;Nr++)Ir[Nr]^=Ar[Nr];function Tr(){for(let Br=kr-1;Br>=kr-4;Br--){if(Rr[Br]++,Rr[Br]<=255)return;Rr[Br]=0}}for(;Cr>=32;)Tr(),Pr=Pr.concat(hr(Ir.concat(hr(Rr)))),Cr-=32;return Cr>0&&(Tr(),Pr=Pr.concat(hr(Ir.concat(hr(Rr))).slice(0,Cr))),Pr}function mr(Ar,_r,Cr,kr,Rr){let Ir;for(wr(Ar,(2*Cr-1)*16,Rr,0,16),Ir=0;Ir<2*Cr;Ir++)xr(Ar,Ir*16,Rr,16),yr(Rr,kr),wr(Rr,0,Ar,_r+Ir*16,16);for(Ir=0;Ir<Cr;Ir++)wr(Ar,_r+Ir*2*16,Ar,Ir*16,16);for(Ir=0;Ir<Cr;Ir++)wr(Ar,_r+(Ir*2+1)*16,Ar,(Ir+Cr)*16,16)}function gr(Ar,_r){return Ar<<_r|Ar>>>32-_r}function yr(Ar,_r){wr(Ar,0,_r,0,16);for(let Cr=8;Cr>0;Cr-=2)_r[4]^=gr(_r[0]+_r[12],7),_r[8]^=gr(_r[4]+_r[0],9),_r[12]^=gr(_r[8]+_r[4],13),_r[0]^=gr(_r[12]+_r[8],18),_r[9]^=gr(_r[5]+_r[1],7),_r[13]^=gr(_r[9]+_r[5],9),_r[1]^=gr(_r[13]+_r[9],13),_r[5]^=gr(_r[1]+_r[13],18),_r[14]^=gr(_r[10]+_r[6],7),_r[2]^=gr(_r[14]+_r[10],9),_r[6]^=gr(_r[2]+_r[14],13),_r[10]^=gr(_r[6]+_r[2],18),_r[3]^=gr(_r[15]+_r[11],7),_r[7]^=gr(_r[3]+_r[15],9),_r[11]^=gr(_r[7]+_r[3],13),_r[15]^=gr(_r[11]+_r[7],18),_r[1]^=gr(_r[0]+_r[3],7),_r[2]^=gr(_r[1]+_r[0],9),_r[3]^=gr(_r[2]+_r[1],13),_r[0]^=gr(_r[3]+_r[2],18),_r[6]^=gr(_r[5]+_r[4],7),_r[7]^=gr(_r[6]+_r[5],9),_r[4]^=gr(_r[7]+_r[6],13),_r[5]^=gr(_r[4]+_r[7],18),_r[11]^=gr(_r[10]+_r[9],7),_r[8]^=gr(_r[11]+_r[10],9),_r[9]^=gr(_r[8]+_r[11],13),_r[10]^=gr(_r[9]+_r[8],18),_r[12]^=gr(_r[15]+_r[14],7),_r[13]^=gr(_r[12]+_r[15],9),_r[14]^=gr(_r[13]+_r[12],13),_r[15]^=gr(_r[14]+_r[13],18);for(let Cr=0;Cr<16;++Cr)Ar[Cr]+=_r[Cr]}function xr(Ar,_r,Cr,kr){for(let Rr=0;Rr<kr;Rr++)Cr[Rr]^=Ar[_r+Rr]}function wr(Ar,_r,Cr,kr,Rr){for(;Rr--;)Cr[kr++]=Ar[_r++]}function br(Ar){if(!Ar||typeof Ar.length!="number")return!1;for(let _r=0;_r<Ar.length;_r++){const Cr=Ar[_r];if(typeof Cr!="number"||Cr%1||Cr<0||Cr>=256)return!1}return!0}function Sr(Ar,_r){if(typeof Ar!="number"||Ar%1)throw new Error("invalid "+_r);return Ar}function vr(Ar,_r,Cr,kr,Rr,Ir,Nr){if(Cr=Sr(Cr,"N"),kr=Sr(kr,"r"),Rr=Sr(Rr,"p"),Ir=Sr(Ir,"dkLen"),Cr===0||Cr&Cr-1)throw new Error("N must be power of 2");if(Cr>2147483647/128/kr)throw new Error("N too large");if(kr>2147483647/128/Rr)throw new Error("r too large");if(!br(Ar))throw new Error("password must be an array or buffer");if(Ar=Array.prototype.slice.call(Ar),!br(_r))throw new Error("salt must be an array or buffer");_r=Array.prototype.slice.call(_r);let Pr=pr(Ar,_r,Rr*128*kr);const Tr=new Uint32Array(Rr*32*kr);for(let ss=0;ss<Tr.length;ss++){const Xr=ss*4;Tr[ss]=(Pr[Xr+3]&255)<<24|(Pr[Xr+2]&255)<<16|(Pr[Xr+1]&255)<<8|(Pr[Xr+0]&255)<<0}const Br=new Uint32Array(64*kr),Fr=new Uint32Array(32*kr*Cr),jr=32*kr,Ur=new Uint32Array(16),qr=new Uint32Array(16),Hr=Rr*Cr*2;let Or=0,Mr=null,Lr=!1,Vr=0,Jr=0,es,ns;const Qr=Nr?parseInt(1e3/kr):4294967295,zr=typeof setImmediate<"u"?setImmediate:setTimeout,Wr=function(){if(Lr)return Nr(new Error("cancelled"),Or/Hr);let ss;switch(Vr){case 0:ns=Jr*32*kr,wr(Tr,ns,Br,0,jr),Vr=1,es=0;case 1:ss=Cr-es,ss>Qr&&(ss=Qr);for(let ts=0;ts<ss;ts++)wr(Br,0,Fr,(es+ts)*jr,jr),mr(Br,jr,kr,Ur,qr);if(es+=ss,Or+=ss,Nr){const ts=parseInt(1e3*Or/Hr);if(ts!==Mr){if(Lr=Nr(null,Or/Hr),Lr)break;Mr=ts}}if(es<Cr)break;es=0,Vr=2;case 2:ss=Cr-es,ss>Qr&&(ss=Qr);for(let ts=0;ts<ss;ts++){const fs=(2*kr-1)*16,rs=Br[fs]&Cr-1;xr(Fr,rs*jr,Br,jr),mr(Br,jr,kr,Ur,qr)}if(es+=ss,Or+=ss,Nr){const ts=parseInt(1e3*Or/Hr);if(ts!==Mr){if(Lr=Nr(null,Or/Hr),Lr)break;Mr=ts}}if(es<Cr)break;if(wr(Br,0,Tr,ns,jr),Jr++,Jr<Rr){Vr=0;break}Pr=[];for(let ts=0;ts<Tr.length;ts++)Pr.push(Tr[ts]>>0&255),Pr.push(Tr[ts]>>8&255),Pr.push(Tr[ts]>>16&255),Pr.push(Tr[ts]>>24&255);const Xr=pr(Ar,Pr,Ir);return Nr&&Nr(null,1,Xr),Xr}Nr&&zr(Wr)};if(!Nr)for(;;){const ss=Wr();if(ss!=null)return ss}Wr()}const Er={scrypt:function(Ar,_r,Cr,kr,Rr,Ir,Nr){return new Promise(function(Pr,Tr){let Br=0;Nr&&Nr(0),vr(Ar,_r,Cr,kr,Rr,Ir,function(Fr,jr,Ur){if(Fr)Tr(Fr);else if(Ur)Nr&&Br!==1&&Nr(1),Pr(new Uint8Array(Ur));else if(Nr&&jr!==Br)return Br=jr,Nr(jr)})})},syncScrypt:function(Ar,_r,Cr,kr,Rr,Ir){return new Uint8Array(vr(Ar,_r,Cr,kr,Rr,Ir))}};cr.exports=Er})()})(scrypt$5);var scryptExports=scrypt$5.exports;const scrypt$4=getDefaultExportFromCjs(scryptExports);var __awaiter$7=globalThis&&globalThis.__awaiter||function(cr,ar,dr,fr){function hr(pr){return pr instanceof dr?pr:new dr(function(mr){mr(pr)})}return new(dr||(dr=Promise))(function(pr,mr){function gr(wr){try{xr(fr.next(wr))}catch(br){mr(br)}}function yr(wr){try{xr(fr.throw(wr))}catch(br){mr(br)}}function xr(wr){wr.done?pr(wr.value):hr(wr.value).then(gr,yr)}xr((fr=fr.apply(cr,ar||[])).next())})};const logger$2=new Logger(version$3);function hasMnemonic$1(cr){return cr!=null&&cr.mnemonic&&cr.mnemonic.phrase}class KeystoreAccount extends Description{isKeystoreAccount(ar){return!!(ar&&ar._isKeystoreAccount)}}function _decrypt(cr,ar,dr){if(searchPath(cr,"crypto/cipher")==="aes-128-ctr"){const hr=looseArrayify$1(searchPath(cr,"crypto/cipherparams/iv")),pr=new aes.Counter(hr),mr=new aes.ModeOfOperation.ctr(ar,pr);return arrayify(mr.decrypt(dr))}return null}function _getAccount(cr,ar){const dr=looseArrayify$1(searchPath(cr,"crypto/ciphertext"));if(hexlify$1(keccak256$1(concat$6([ar.slice(16,32),dr]))).substring(2)!==searchPath(cr,"crypto/mac").toLowerCase())throw new Error("invalid password");const hr=_decrypt(cr,ar.slice(0,16),dr);hr||logger$2.throwError("unsupported cipher",Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const pr=ar.slice(32,64),mr=computeAddress$1(hr);if(cr.address){let yr=cr.address.toLowerCase();if(yr.substring(0,2)!=="0x"&&(yr="0x"+yr),getAddress$1(yr)!==mr)throw new Error("address mismatch")}const gr={_isKeystoreAccount:!0,address:mr,privateKey:hexlify$1(hr)};if(searchPath(cr,"x-ethers/version")==="0.1"){const yr=looseArrayify$1(searchPath(cr,"x-ethers/mnemonicCiphertext")),xr=looseArrayify$1(searchPath(cr,"x-ethers/mnemonicCounter")),wr=new aes.Counter(xr),br=new aes.ModeOfOperation.ctr(pr,wr),Sr=searchPath(cr,"x-ethers/path")||defaultPath$2,vr=searchPath(cr,"x-ethers/locale")||"en",Er=arrayify(br.decrypt(yr));try{const Ar=entropyToMnemonic$1(Er,vr),_r=HDNode.fromMnemonic(Ar,null,vr).derivePath(Sr);if(_r.privateKey!=gr.privateKey)throw new Error("mnemonic mismatch");gr.mnemonic=_r.mnemonic}catch(Ar){if(Ar.code!==Logger.errors.INVALID_ARGUMENT||Ar.argument!=="wordlist")throw Ar}}return new KeystoreAccount(gr)}function pbkdf2Sync$1(cr,ar,dr,fr,hr){return arrayify(pbkdf2$3(cr,ar,dr,fr,hr))}function pbkdf2$2(cr,ar,dr,fr,hr){return Promise.resolve(pbkdf2Sync$1(cr,ar,dr,fr,hr))}function _computeKdfKey(cr,ar,dr,fr,hr){const pr=getPassword$1(ar),mr=searchPath(cr,"crypto/kdf");if(mr&&typeof mr=="string"){const gr=function(yr,xr){return logger$2.throwArgumentError("invalid key-derivation function parameters",yr,xr)};if(mr.toLowerCase()==="scrypt"){const yr=looseArrayify$1(searchPath(cr,"crypto/kdfparams/salt")),xr=parseInt(searchPath(cr,"crypto/kdfparams/n")),wr=parseInt(searchPath(cr,"crypto/kdfparams/r")),br=parseInt(searchPath(cr,"crypto/kdfparams/p"));(!xr||!wr||!br)&&gr("kdf",mr),xr&xr-1&&gr("N",xr);const Sr=parseInt(searchPath(cr,"crypto/kdfparams/dklen"));return Sr!==32&&gr("dklen",Sr),fr(pr,yr,xr,wr,br,64,hr)}else if(mr.toLowerCase()==="pbkdf2"){const yr=looseArrayify$1(searchPath(cr,"crypto/kdfparams/salt"));let xr=null;const wr=searchPath(cr,"crypto/kdfparams/prf");wr==="hmac-sha256"?xr="sha256":wr==="hmac-sha512"?xr="sha512":gr("prf",wr);const br=parseInt(searchPath(cr,"crypto/kdfparams/c")),Sr=parseInt(searchPath(cr,"crypto/kdfparams/dklen"));return Sr!==32&&gr("dklen",Sr),dr(pr,yr,br,Sr,xr)}}return logger$2.throwArgumentError("unsupported key-derivation function","kdf",mr)}function decryptSync(cr,ar){const dr=JSON.parse(cr),fr=_computeKdfKey(dr,ar,pbkdf2Sync$1,scrypt$4.syncScrypt);return _getAccount(dr,fr)}function decrypt$2(cr,ar,dr){return __awaiter$7(this,void 0,void 0,function*(){const fr=JSON.parse(cr),hr=yield _computeKdfKey(fr,ar,pbkdf2$2,scrypt$4.scrypt,dr);return _getAccount(fr,hr)})}function encrypt$1(cr,ar,dr,fr){try{if(getAddress$1(cr.address)!==computeAddress$1(cr.privateKey))throw new Error("address/privateKey mismatch");if(hasMnemonic$1(cr)){const _r=cr.mnemonic;if(HDNode.fromMnemonic(_r.phrase,null,_r.locale).derivePath(_r.path||defaultPath$2).privateKey!=cr.privateKey)throw new Error("mnemonic mismatch")}}catch(_r){return Promise.reject(_r)}typeof dr=="function"&&!fr&&(fr=dr,dr={}),dr||(dr={});const hr=arrayify(cr.privateKey),pr=getPassword$1(ar);let mr=null,gr=null,yr=null;if(hasMnemonic$1(cr)){const _r=cr.mnemonic;mr=arrayify(mnemonicToEntropy$1(_r.phrase,_r.locale||"en")),gr=_r.path||defaultPath$2,yr=_r.locale||"en"}let xr=dr.client;xr||(xr="ethers.js");let wr=null;dr.salt?wr=arrayify(dr.salt):wr=randomBytes$5(32);let br=null;if(dr.iv){if(br=arrayify(dr.iv),br.length!==16)throw new Error("invalid iv")}else br=randomBytes$5(16);let Sr=null;if(dr.uuid){if(Sr=arrayify(dr.uuid),Sr.length!==16)throw new Error("invalid uuid")}else Sr=randomBytes$5(16);let vr=1<<17,Er=8,Ar=1;return dr.scrypt&&(dr.scrypt.N&&(vr=dr.scrypt.N),dr.scrypt.r&&(Er=dr.scrypt.r),dr.scrypt.p&&(Ar=dr.scrypt.p)),scrypt$4.scrypt(pr,wr,vr,Er,Ar,64,fr).then(_r=>{_r=arrayify(_r);const Cr=_r.slice(0,16),kr=_r.slice(16,32),Rr=_r.slice(32,64),Ir=new aes.Counter(br),Nr=new aes.ModeOfOperation.ctr(Cr,Ir),Pr=arrayify(Nr.encrypt(hr)),Tr=keccak256$1(concat$6([kr,Pr])),Br={address:cr.address.substring(2).toLowerCase(),id:uuidV4$1(Sr),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify$1(br).substring(2)},ciphertext:hexlify$1(Pr).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify$1(wr).substring(2),n:vr,dklen:32,p:Ar,r:Er},mac:Tr.substring(2)}};if(mr){const Fr=randomBytes$5(16),jr=new aes.Counter(Fr),Ur=new aes.ModeOfOperation.ctr(Rr,jr),qr=arrayify(Ur.encrypt(mr)),Hr=new Date,Or=Hr.getUTCFullYear()+"-"+zpad$2(Hr.getUTCMonth()+1,2)+"-"+zpad$2(Hr.getUTCDate(),2)+"T"+zpad$2(Hr.getUTCHours(),2)+"-"+zpad$2(Hr.getUTCMinutes(),2)+"-"+zpad$2(Hr.getUTCSeconds(),2)+".0Z";Br["x-ethers"]={client:xr,gethFilename:"UTC--"+Or+"--"+Br.address,mnemonicCounter:hexlify$1(Fr).substring(2),mnemonicCiphertext:hexlify$1(qr).substring(2),path:gr,locale:yr,version:"0.1"}}return JSON.stringify(Br)})}function decryptJsonWallet(cr,ar,dr){if(isCrowdsaleWallet(cr)){dr&&dr(0);const fr=decrypt$3(cr,ar);return dr&&dr(1),Promise.resolve(fr)}return isKeystoreWallet(cr)?decrypt$2(cr,ar,dr):Promise.reject(new Error("invalid JSON wallet"))}function decryptJsonWalletSync(cr,ar){if(isCrowdsaleWallet(cr))return decrypt$3(cr,ar);if(isKeystoreWallet(cr))return decryptSync(cr,ar);throw new Error("invalid JSON wallet")}const version$2="wallet/5.7.0";var __awaiter$6=globalThis&&globalThis.__awaiter||function(cr,ar,dr,fr){function hr(pr){return pr instanceof dr?pr:new dr(function(mr){mr(pr)})}return new(dr||(dr=Promise))(function(pr,mr){function gr(wr){try{xr(fr.next(wr))}catch(br){mr(br)}}function yr(wr){try{xr(fr.throw(wr))}catch(br){mr(br)}}function xr(wr){wr.done?pr(wr.value):hr(wr.value).then(gr,yr)}xr((fr=fr.apply(cr,ar||[])).next())})};const logger$1=new Logger(version$2);function isAccount(cr){return cr!=null&&isHexString$1(cr.privateKey,32)&&cr.address!=null}function hasMnemonic(cr){const ar=cr.mnemonic;return ar&&ar.phrase}let Wallet$1=class Yi extends Signer{constructor(ar,dr){if(super(),isAccount(ar)){const fr=new SigningKey$1(ar.privateKey);if(defineReadOnly(this,"_signingKey",()=>fr),defineReadOnly(this,"address",computeAddress$1(this.publicKey)),this.address!==getAddress$1(ar.address)&&logger$1.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),hasMnemonic(ar)){const hr=ar.mnemonic;defineReadOnly(this,"_mnemonic",()=>({phrase:hr.phrase,path:hr.path||defaultPath$2,locale:hr.locale||"en"}));const pr=this.mnemonic,mr=HDNode.fromMnemonic(pr.phrase,null,pr.locale).derivePath(pr.path);computeAddress$1(mr.privateKey)!==this.address&&logger$1.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else defineReadOnly(this,"_mnemonic",()=>null)}else{if(SigningKey$1.isSigningKey(ar))ar.curve!=="secp256k1"&&logger$1.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),defineReadOnly(this,"_signingKey",()=>ar);else{typeof ar=="string"&&ar.match(/^[0-9a-f]*$/i)&&ar.length===64&&(ar="0x"+ar);const fr=new SigningKey$1(ar);defineReadOnly(this,"_signingKey",()=>fr)}defineReadOnly(this,"_mnemonic",()=>null),defineReadOnly(this,"address",computeAddress$1(this.publicKey))}dr&&!Provider.isProvider(dr)&&logger$1.throwArgumentError("invalid provider","provider",dr),defineReadOnly(this,"provider",dr||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(ar){return new Yi(this,ar)}signTransaction(ar){return resolveProperties$1(ar).then(dr=>{dr.from!=null&&(getAddress$1(dr.from)!==this.address&&logger$1.throwArgumentError("transaction from address mismatch","transaction.from",ar.from),delete dr.from);const fr=this._signingKey().signDigest(keccak256$1(serialize(dr)));return serialize(dr,fr)})}signMessage(ar){return __awaiter$6(this,void 0,void 0,function*(){return joinSignature(this._signingKey().signDigest(hashMessage$1(ar)))})}_signTypedData(ar,dr,fr){return __awaiter$6(this,void 0,void 0,function*(){const hr=yield TypedDataEncoder$1.resolveNames(ar,dr,fr,pr=>(this.provider==null&&logger$1.throwError("cannot resolve ENS names without a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:pr}),this.provider.resolveName(pr)));return joinSignature(this._signingKey().signDigest(TypedDataEncoder$1.hash(hr.domain,dr,hr.value)))})}encrypt(ar,dr,fr){if(typeof dr=="function"&&!fr&&(fr=dr,dr={}),fr&&typeof fr!="function")throw new Error("invalid callback");return dr||(dr={}),encrypt$1(this,ar,dr,fr)}static createRandom(ar){let dr=randomBytes$5(16);ar||(ar={}),ar.extraEntropy&&(dr=arrayify(hexDataSlice(keccak256$1(concat$6([dr,ar.extraEntropy])),0,16)));const fr=entropyToMnemonic$1(dr,ar.locale);return Yi.fromMnemonic(fr,ar.path,ar.locale)}static fromEncryptedJson(ar,dr,fr){return decryptJsonWallet(ar,dr,fr).then(hr=>new Yi(hr))}static fromEncryptedJsonSync(ar,dr){return new Yi(decryptJsonWalletSync(ar,dr))}static fromMnemonic(ar,dr,fr){return dr||(dr=defaultPath$2),new Yi(HDNode.fromMnemonic(ar,null,fr).derivePath(dr))}};function manhattan(cr,ar){return Math.abs(cr.x-ar.x)+Math.abs(cr.y-ar.y)}const getPositionsWithinRange=(cr,ar,dr)=>{const fr=[];for(let hr=cr.x-dr;hr<=cr.x+dr;hr++)for(let pr=cr.y-dr;pr<=cr.y+dr;pr++){const mr=manhattan(cr,{x:hr,y:pr});mr>=ar&&mr<=dr&&fr.push({x:hr,y:pr})}return fr},getClosestTraversablePositionToTarget=(cr,ar,dr,fr,hr=1,pr=1)=>{const mr=g$7(cr,dr);if(!mr)return;const gr=g$7(cr,fr);if(!gr)return;const yr=getPositionsWithinRange(gr,hr,pr);let xr;for(const wr of yr){if(!ar(dr,wr))continue;const br=xr?manhattan(mr,xr):1/0;manhattan(mr,wr)<br&&(xr=wr)}return xr},ANALYTICS_URL="https://analytics-worker.latticexyz.workers.dev";function getCurrentTurn(cr,ar,dr){return getTurnAtTime(cr,ar,dr.currentTime/1e3)}function getTurnAtTime(cr,ar,dr){return BigNumber.from(Math.floor(dr)).sub(cr).div(ar).toNumber()}function isUntraversable(cr,ar,dr){return A$6([Je$2(ar,dr),Ye$3(cr)]).size>0}const{sortBy,filter:filter$1}=lodash,createSystemExecutor=({worldContract:cr,network:ar,components:dr,sendAnalytics:fr,calculateMeanTxResponseTime:hr})=>{let pr=0n;ar.latestBlock$.subscribe(xr=>{xr.number&&(pr=xr.number)});const mr=async xr=>{const wr=de$2(dr.Transaction,xr);let br=0n;if(wr.hash){const Hr=await getTransaction(ar.walletClient,{hash:wr.hash});Hr.gasPrice&&(br=Hr.gasPrice,se$4(dr.Transaction,xr,{gasPrice:br}))}const Sr=ar.networkConfig.chain.id,{address:vr}=cr,{externalWalletClient:Er}=useStore.getState(),Ar=Er?.account?.address,{entity:_r,systemCall:Cr,systemId:kr,gasEstimate:Rr,manualGasEstimate:Ir,status:Nr,hash:Pr,error:Tr,submittedBlock:Br,completedBlock:Fr,submittedTimestamp:jr,completedTimestamp:Ur}=wr,qr=JSON.stringify({entity:_r,system_call:Cr,system_id:kr,gas_estimate:Number(Rr??0n),manual_gas_estimate:Ir,gas_price_gwei:Number(formatEther(br??0n,"gwei")),status:Nr,hash:Pr,error:Tr??null,submitted_block:Number(Br??0n),completed_block:Number(Fr??0n),submitted_timestamp:Number(jr??0n),completed_timestamp:Number(Ur??0n),player_address:Ar??null,match_entity:ar.matchEntity,session_wallet_address:ar.walletClient.account.address});try{return await fetch(`${ANALYTICS_URL}/track/${Sr}/${vr}`,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:qr})}catch(Hr){console.warn("Failed to send tx analytics",Hr)}},gr=async({entity:xr,systemCall:wr,systemId:br,args:Sr,options:vr,confirmCompletionCallback:Er})=>{const Ar=vr?.disableRetry??!1,_r=vr?.currentRetryCount??0,Cr=vr?.worldContractOverride??cr,kr=vr?.forceManualGasEstimate??!1;br=br??wr.toString();const Rr=ue$1();E$5(dr.Transaction,Rr,{status:"pending",entity:xr,systemCall:wr,systemId:br,gasEstimate:void 0,manualGasEstimate:!1,gasPrice:void 0,hash:void 0,error:void 0,submittedTimestamp:void 0,completedTimestamp:void 0,submittedBlock:void 0,completedBlock:void 0}),se$4(dr.Transaction,Rr,{submittedTimestamp:BigInt(Date.now())});let Ir=0n;if(!kr){const Fr=[...A$6([Je$2(dr.Transaction,{systemId:br})])].map(Ur=>({...de$2(dr.Transaction,Ur),entity:Ur})),jr=sortBy(filter$1(Fr,Ur=>["completed","reverted"].includes(Ur.status)),Ur=>Ur.completedTimestamp).reverse()[0];jr&&jr.status!=="reverted"&&jr.gasEstimate&&(Ir=jr.gasEstimate)}const Nr=Sr[0];let Pr=Sr[1]||{},Tr;try{if(Ir===0n){ar.networkConfig.chain.id===31337&&(Pr={...Pr,maxFeePerGas:0n,maxPriorityFeePerGas:0n});try{Ir=await Cr.estimateGas[wr](Nr,Pr)}catch(Ur){throw se$4(dr.Transaction,Rr,{status:"reverted",completedTimestamp:BigInt(Date.now()),error:Ur.toString().replaceAll(",","").replaceAll(`
`," ")}),Ur}se$4(dr.Transaction,Rr,{manualGasEstimate:!0})}se$4(dr.Transaction,Rr,{gasEstimate:Ir});const jr=await Cr.write[wr](Nr,{...Pr,gas:Ir});se$4(dr.Transaction,Rr,{status:"submitted",submittedBlock:pr,hash:jr}),Er&&Er().then(()=>{se$4(dr.Transaction,Rr,{completedTimestamp:BigInt(Date.now())})}),await ar.waitForTransaction(jr,Ur=>{se$4(dr.Transaction,Rr,{completedBlock:Ur.blockNumber})}),se$4(dr.Transaction,Rr,{status:"completed",hash:jr,completedTimestamp:BigInt(Date.now()),completedBlock:pr})}catch(Fr){if(se$4(dr.Transaction,Rr,{status:"reverted",error:Fr.toString().replaceAll(",","").replaceAll(`
`," "),completedTimestamp:BigInt(Date.now())}),Ar||_r+1>1)throw Fr;Tr=await gr({entity:xr,systemCall:wr,systemId:br,args:Sr,options:{currentRetryCount:_r+1}})}fr&&mr(Rr);const Br=hr();return ar.responseTime.updateMeanResponseTime(Br),Tr};return{executeSystem:gr,executeSystemWithExternalWallet:async xr=>{const{externalWorldContract:wr}=useStore.getState();if(!wr)throw new Error("No external world contract");return gr({...xr,options:{worldContractOverride:wr,disableRetry:!0,forceManualGasEstimate:!0}})}}};function createTransactionCacheSystem(cr,ar){const{world:dr,components:{Transaction:fr}}=cr,hr=new Set;_$4(dr,[Ye$3(fr)],async({entity:mr,type:gr})=>{if(!hr.has(mr)&&[k$5.Update,k$5.Enter].includes(gr)){const yr=de$2(fr,mr),xr=await ar.transactions.get(mr);try{if(xr){await ar.transactions.update(mr,{...yr});return}else await ar.transactions.add({key:mr,...yr},mr)}catch{}}}),(async()=>{(await ar.transactions.toArray()).forEach(gr=>{hr.add(gr.key),E$5(fr,gr.key,{entity:gr.entity,systemCall:gr.systemCall,gasEstimate:gr.gasEstimate,manualGasEstimate:gr.manualGasEstimate,status:gr.status,hash:gr.hash,error:gr.error,submittedBlock:gr.submittedBlock,completedBlock:gr.completedBlock,submittedTimestamp:gr.submittedTimestamp,completedTimestamp:gr.completedTimestamp})})})()}const e$3=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,t$4=Object.keys,n$5=Array.isArray;function r$4(cr,ar){return typeof ar!="object"||t$4(ar).forEach(function(dr){cr[dr]=ar[dr]}),cr}typeof Promise>"u"||e$3.Promise||(e$3.Promise=Promise);const s$5=Object.getPrototypeOf,i$4={}.hasOwnProperty;function o$1(cr,ar){return i$4.call(cr,ar)}function a$1(cr,ar){typeof ar=="function"&&(ar=ar(s$5(cr))),(typeof Reflect>"u"?t$4:Reflect.ownKeys)(ar).forEach(dr=>{l$4(cr,dr,ar[dr])})}const u$1=Object.defineProperty;function l$4(cr,ar,dr,fr){u$1(cr,ar,r$4(dr&&o$1(dr,"get")&&typeof dr.get=="function"?{get:dr.get,set:dr.set,configurable:!0}:{value:dr,configurable:!0,writable:!0},fr))}function c$3(cr){return{from:function(ar){return cr.prototype=Object.create(ar.prototype),l$4(cr.prototype,"constructor",cr),{extend:a$1.bind(null,cr.prototype)}}}}const h$4=Object.getOwnPropertyDescriptor;function d$4(cr,ar){let dr;return h$4(cr,ar)||(dr=s$5(cr))&&d$4(dr,ar)}const f$5=[].slice;function p$3(cr,ar,dr){return f$5.call(cr,ar,dr)}function y$6(cr,ar){return ar(cr)}function m$4(cr){if(!cr)throw new Error("Assertion Failed")}function v$4(cr){e$3.setImmediate?setImmediate(cr):setTimeout(cr,0)}function g$6(cr,ar){return cr.reduce((dr,fr,hr)=>{var pr=ar(fr,hr);return pr&&(dr[pr[0]]=pr[1]),dr},{})}function b$5(cr,ar){if(o$1(cr,ar))return cr[ar];if(!ar)return cr;if(typeof ar!="string"){for(var dr=[],fr=0,hr=ar.length;fr<hr;++fr){var pr=b$5(cr,ar[fr]);dr.push(pr)}return dr}var mr=ar.indexOf(".");if(mr!==-1){var gr=cr[ar.substr(0,mr)];return gr===void 0?void 0:b$5(gr,ar.substr(mr+1))}}function _$2(cr,ar,dr){if(cr&&ar!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(cr)))if(typeof ar!="string"&&"length"in ar){m$4(typeof dr!="string"&&"length"in dr);for(var fr=0,hr=ar.length;fr<hr;++fr)_$2(cr,ar[fr],dr[fr])}else{var pr=ar.indexOf(".");if(pr!==-1){var mr=ar.substr(0,pr),gr=ar.substr(pr+1);if(gr==="")dr===void 0?n$5(cr)&&!isNaN(parseInt(mr))?cr.splice(mr,1):delete cr[mr]:cr[mr]=dr;else{var yr=cr[mr];yr&&o$1(cr,mr)||(yr=cr[mr]={}),_$2(yr,gr,dr)}}else dr===void 0?n$5(cr)&&!isNaN(parseInt(ar))?cr.splice(ar,1):delete cr[ar]:cr[ar]=dr}}function w$5(cr){var ar={};for(var dr in cr)o$1(cr,dr)&&(ar[dr]=cr[dr]);return ar}const x$4=[].concat;function k$3(cr){return x$4.apply([],cr)}const E$3="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(k$3([8,16,32,64].map(cr=>["Int","Uint","Float"].map(ar=>ar+cr+"Array")))).filter(cr=>e$3[cr]),P=E$3.map(cr=>e$3[cr]);g$6(E$3,cr=>[cr,!0]);let K$2=null;function O$1(cr){K$2=typeof WeakMap<"u"&&new WeakMap;const ar=S$3(cr);return K$2=null,ar}function S$3(cr){if(!cr||typeof cr!="object")return cr;let ar=K$2&&K$2.get(cr);if(ar)return ar;if(n$5(cr)){ar=[],K$2&&K$2.set(cr,ar);for(var dr=0,fr=cr.length;dr<fr;++dr)ar.push(S$3(cr[dr]))}else if(P.indexOf(cr.constructor)>=0)ar=cr;else{const pr=s$5(cr);for(var hr in ar=pr===Object.prototype?{}:Object.create(pr),K$2&&K$2.set(cr,ar),cr)o$1(cr,hr)&&(ar[hr]=S$3(cr[hr]))}return ar}const{toString:A$3}={};function C$2(cr){return A$3.call(cr).slice(8,-1)}const j$3=typeof Symbol<"u"?Symbol.iterator:"@@iterator",D$1=typeof j$3=="symbol"?function(cr){var ar;return cr!=null&&(ar=cr[j$3])&&ar.apply(cr)}:function(){return null},I$2={};function B$2(cr){var ar,dr,fr,hr;if(arguments.length===1){if(n$5(cr))return cr.slice();if(this===I$2&&typeof cr=="string")return[cr];if(hr=D$1(cr)){for(dr=[];!(fr=hr.next()).done;)dr.push(fr.value);return dr}if(cr==null)return[cr];if(typeof(ar=cr.length)=="number"){for(dr=new Array(ar);ar--;)dr[ar]=cr[ar];return dr}return[cr]}for(ar=arguments.length,dr=new Array(ar);ar--;)dr[ar]=arguments[ar];return dr}const T$2=typeof Symbol<"u"?cr=>cr[Symbol.toStringTag]==="AsyncFunction":()=>!1;var R$1=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function F$2(cr,ar){R$1=cr,M$2=ar}var M$2=()=>!0;const N$3=!new Error("").stack;function q$3(){if(N$3)try{throw q$3.arguments,new Error}catch(cr){return cr}return new Error}function $$3(cr,ar){var dr=cr.stack;return dr?(ar=ar||0,dr.indexOf(cr.name)===0&&(ar+=(cr.name+cr.message).split(`
`).length),dr.split(`
`).slice(ar).filter(M$2).map(fr=>`
`+fr).join("")):""}var U$1=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],L$2=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(U$1),V$3={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function W$1(cr,ar){this._e=q$3(),this.name=cr,this.message=ar}function Y$1(cr,ar){return cr+". Errors: "+Object.keys(ar).map(dr=>ar[dr].toString()).filter((dr,fr,hr)=>hr.indexOf(dr)===fr).join(`
`)}function z$3(cr,ar,dr,fr){this._e=q$3(),this.failures=ar,this.failedKeys=fr,this.successCount=dr,this.message=Y$1(cr,ar)}function G$1(cr,ar){this._e=q$3(),this.name="BulkError",this.failures=Object.keys(ar).map(dr=>ar[dr]),this.failuresByPos=ar,this.message=Y$1(cr,ar)}c$3(W$1).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+$$3(this._e,2))}},toString:function(){return this.name+": "+this.message}}),c$3(z$3).from(W$1),c$3(G$1).from(W$1);var H$1=L$2.reduce((cr,ar)=>(cr[ar]=ar+"Error",cr),{});const Q$1=W$1;var X$1=L$2.reduce((cr,ar)=>{var dr=ar+"Error";function fr(hr,pr){this._e=q$3(),this.name=dr,hr?typeof hr=="string"?(this.message=`${hr}${pr?`
 `+pr:""}`,this.inner=pr||null):typeof hr=="object"&&(this.message=`${hr.name} ${hr.message}`,this.inner=hr):(this.message=V$3[ar]||dr,this.inner=null)}return c$3(fr).from(Q$1),cr[ar]=fr,cr},{});X$1.Syntax=SyntaxError,X$1.Type=TypeError,X$1.Range=RangeError;var J$1=U$1.reduce((cr,ar)=>(cr[ar+"Error"]=X$1[ar],cr),{}),Z$1=L$2.reduce((cr,ar)=>(["Syntax","Type","Range"].indexOf(ar)===-1&&(cr[ar+"Error"]=X$1[ar]),cr),{});function ee$1(){}function te$1(cr){return cr}function ne$1(cr,ar){return cr==null||cr===te$1?ar:function(dr){return ar(cr(dr))}}function re$1(cr,ar){return function(){cr.apply(this,arguments),ar.apply(this,arguments)}}function se$1(cr,ar){return cr===ee$1?ar:function(){var dr=cr.apply(this,arguments);dr!==void 0&&(arguments[0]=dr);var fr=this.onsuccess,hr=this.onerror;this.onsuccess=null,this.onerror=null;var pr=ar.apply(this,arguments);return fr&&(this.onsuccess=this.onsuccess?re$1(fr,this.onsuccess):fr),hr&&(this.onerror=this.onerror?re$1(hr,this.onerror):hr),pr!==void 0?pr:dr}}function ie$1(cr,ar){return cr===ee$1?ar:function(){cr.apply(this,arguments);var dr=this.onsuccess,fr=this.onerror;this.onsuccess=this.onerror=null,ar.apply(this,arguments),dr&&(this.onsuccess=this.onsuccess?re$1(dr,this.onsuccess):dr),fr&&(this.onerror=this.onerror?re$1(fr,this.onerror):fr)}}function oe$1(cr,ar){return cr===ee$1?ar:function(dr){var fr=cr.apply(this,arguments);r$4(dr,fr);var hr=this.onsuccess,pr=this.onerror;this.onsuccess=null,this.onerror=null;var mr=ar.apply(this,arguments);return hr&&(this.onsuccess=this.onsuccess?re$1(hr,this.onsuccess):hr),pr&&(this.onerror=this.onerror?re$1(pr,this.onerror):pr),fr===void 0?mr===void 0?void 0:mr:r$4(fr,mr)}}function ae$1(cr,ar){return cr===ee$1?ar:function(){return ar.apply(this,arguments)!==!1&&cr.apply(this,arguments)}}function ue(cr,ar){return cr===ee$1?ar:function(){var dr=cr.apply(this,arguments);if(dr&&typeof dr.then=="function"){for(var fr=this,hr=arguments.length,pr=new Array(hr);hr--;)pr[hr]=arguments[hr];return dr.then(function(){return ar.apply(fr,pr)})}return ar.apply(this,arguments)}}Z$1.ModifyError=z$3,Z$1.DexieError=W$1,Z$1.BulkError=G$1;var le$1={};const ce$1=100,[he$1,de$1,fe$1]=typeof Promise>"u"?[]:(()=>{let cr=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[cr,s$5(cr),cr];const ar=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[ar,s$5(ar),cr]})(),pe$1=de$1&&de$1.then,ye$1=he$1&&he$1.constructor,me=!!fe$1;var ve$1=!1,ge$1=fe$1?()=>{fe$1.then($e)}:e$3.setImmediate?setImmediate.bind(null,$e):e$3.MutationObserver?()=>{var cr=document.createElement("div");new MutationObserver(()=>{$e(),cr=null}).observe(cr,{attributes:!0}),cr.setAttribute("i","1")}:()=>{setTimeout($e,0)},be$1=function(cr,ar){Se$1.push([cr,ar]),we$1&&(ge$1(),we$1=!1)},_e$1=!0,we$1=!0,xe$1=[],ke$1=[],Ee$1=null,Pe=te$1,Ke={id:"globalThis",globalThis:!0,ref:0,unhandleds:[],onunhandled:dt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(cr=>{try{dt(cr[0],cr[1])}catch{}})}},Oe$1=Ke,Se$1=[],Ae$1=0,Ce=[];function je$1(cr){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ee$1,this._lib=!1;var ar=this._PSD=Oe$1;if(R$1&&(this._stackHolder=q$3(),this._prev=null,this._numPrev=0),typeof cr!="function"){if(cr!==le$1)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Te$1(this,this._value))}this._state=null,this._value=null,++ar.ref,Be$1(this,cr)}const De$1={get:function(){var cr=Oe$1,ar=Xe;function dr(fr,hr){var pr=!cr.global&&(cr!==Oe$1||ar!==Xe);const mr=pr&&!tt();var gr=new je$1((yr,xr)=>{Fe$1(this,new Ie(lt(fr,cr,pr,mr),lt(hr,cr,pr,mr),yr,xr,cr))});return R$1&&qe$1(gr,this),gr}return dr.prototype=le$1,dr},set:function(cr){l$4(this,"then",cr&&cr.prototype===le$1?De$1:{get:function(){return cr},set:De$1.set})}};function Ie(cr,ar,dr,fr,hr){this.onFulfilled=typeof cr=="function"?cr:null,this.onRejected=typeof ar=="function"?ar:null,this.resolve=dr,this.reject=fr,this.psd=hr}function Be$1(cr,ar){try{ar(dr=>{if(cr._state===null){if(dr===cr)throw new TypeError("A promise cannot be resolved with itself.");var fr=cr._lib&&Ue();dr&&typeof dr.then=="function"?Be$1(cr,(hr,pr)=>{dr instanceof je$1?dr._then(hr,pr):dr.then(hr,pr)}):(cr._state=!0,cr._value=dr,Re$1(cr)),fr&&Le()}},Te$1.bind(null,cr))}catch(dr){Te$1(cr,dr)}}function Te$1(cr,ar){if(ke$1.push(ar),cr._state===null){var dr=cr._lib&&Ue();ar=Pe(ar),cr._state=!1,cr._value=ar,R$1&&ar!==null&&typeof ar=="object"&&!ar._promise&&function(fr,hr,pr){try{fr.apply(null,pr)}catch(mr){hr&&hr(mr)}}(()=>{var fr=d$4(ar,"stack");ar._promise=cr,l$4(ar,"stack",{get:()=>ve$1?fr&&(fr.get?fr.get.apply(ar):fr.value):cr.stack})}),function(fr){xe$1.some(hr=>hr._value===fr._value)||xe$1.push(fr)}(cr),Re$1(cr),dr&&Le()}}function Re$1(cr){var ar=cr._listeners;cr._listeners=[];for(var dr=0,fr=ar.length;dr<fr;++dr)Fe$1(cr,ar[dr]);var hr=cr._PSD;--hr.ref||hr.finalize(),Ae$1===0&&(++Ae$1,be$1(()=>{--Ae$1==0&&Ve$1()},[]))}function Fe$1(cr,ar){if(cr._state!==null){var dr=cr._state?ar.onFulfilled:ar.onRejected;if(dr===null)return(cr._state?ar.resolve:ar.reject)(cr._value);++ar.psd.ref,++Ae$1,be$1(Me$1,[dr,cr,ar])}else cr._listeners.push(ar)}function Me$1(cr,ar,dr){try{Ee$1=ar;var fr,hr=ar._value;ar._state?fr=cr(hr):(ke$1.length&&(ke$1=[]),fr=cr(hr),ke$1.indexOf(hr)===-1&&function(pr){for(var mr=xe$1.length;mr;)if(xe$1[--mr]._value===pr._value)return void xe$1.splice(mr,1)}(ar)),dr.resolve(fr)}catch(pr){dr.reject(pr)}finally{Ee$1=null,--Ae$1==0&&Ve$1(),--dr.psd.ref||dr.psd.finalize()}}function Ne$1(cr,ar,dr){if(ar.length===dr)return ar;var fr="";if(cr._state===!1){var hr,pr,mr=cr._value;mr!=null?(hr=mr.name||"Error",pr=mr.message||mr,fr=$$3(mr,0)):(hr=mr,pr=""),ar.push(hr+(pr?": "+pr:"")+fr)}return R$1&&((fr=$$3(cr._stackHolder,2))&&ar.indexOf(fr)===-1&&ar.push(fr),cr._prev&&Ne$1(cr._prev,ar,dr)),ar}function qe$1(cr,ar){var dr=ar?ar._numPrev+1:0;dr<100&&(cr._prev=ar,cr._numPrev=dr)}function $e(){Ue()&&Le()}function Ue(){var cr=_e$1;return _e$1=!1,we$1=!1,cr}function Le(){var cr,ar,dr;do for(;Se$1.length>0;)for(cr=Se$1,Se$1=[],dr=cr.length,ar=0;ar<dr;++ar){var fr=cr[ar];fr[0].apply(null,fr[1])}while(Se$1.length>0);_e$1=!0,we$1=!0}function Ve$1(){var cr=xe$1;xe$1=[],cr.forEach(fr=>{fr._PSD.onunhandled.call(null,fr._value,fr)});for(var ar=Ce.slice(0),dr=ar.length;dr;)ar[--dr]()}function We(cr){return new je$1(le$1,!1,cr)}function Ye$1(cr,ar){var dr=Oe$1;return function(){var fr=Ue(),hr=Oe$1;try{return it(dr,!0),cr.apply(this,arguments)}catch(pr){ar&&ar(pr)}finally{it(hr,!1),fr&&Le()}}}a$1(je$1.prototype,{then:De$1,_then:function(cr,ar){Fe$1(this,new Ie(null,null,cr,ar,Oe$1))},catch:function(cr){if(arguments.length===1)return this.then(null,cr);var ar=arguments[0],dr=arguments[1];return typeof ar=="function"?this.then(null,fr=>fr instanceof ar?dr(fr):We(fr)):this.then(null,fr=>fr&&fr.name===ar?dr(fr):We(fr))},finally:function(cr){return this.then(ar=>(cr(),ar),ar=>(cr(),We(ar)))},stack:{get:function(){if(this._stack)return this._stack;try{ve$1=!0;var cr=Ne$1(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=cr),cr}finally{ve$1=!1}}},timeout:function(cr,ar){return cr<1/0?new je$1((dr,fr)=>{var hr=setTimeout(()=>fr(new X$1.Timeout(ar)),cr);this.then(dr,fr).finally(clearTimeout.bind(null,hr))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&l$4(je$1.prototype,Symbol.toStringTag,"Dexie.Promise"),Ke.env=ot(),a$1(je$1,{all:function(){var cr=B$2.apply(null,arguments).map(nt);return new je$1(function(ar,dr){cr.length===0&&ar([]);var fr=cr.length;cr.forEach((hr,pr)=>je$1.resolve(hr).then(mr=>{cr[pr]=mr,--fr||ar(cr)},dr))})},resolve:cr=>{if(cr instanceof je$1)return cr;if(cr&&typeof cr.then=="function")return new je$1((dr,fr)=>{cr.then(dr,fr)});var ar=new je$1(le$1,!0,cr);return qe$1(ar,Ee$1),ar},reject:We,race:function(){var cr=B$2.apply(null,arguments).map(nt);return new je$1((ar,dr)=>{cr.map(fr=>je$1.resolve(fr).then(ar,dr))})},PSD:{get:()=>Oe$1,set:cr=>Oe$1=cr},totalEchoes:{get:()=>Xe},newPSD:Ze,usePSD:at,scheduler:{get:()=>be$1,set:cr=>{be$1=cr}},rejectionMapper:{get:()=>Pe,set:cr=>{Pe=cr}},follow:(cr,ar)=>new je$1((dr,fr)=>Ze((hr,pr)=>{var mr=Oe$1;mr.unhandleds=[],mr.onunhandled=pr,mr.finalize=re$1(function(){(function(gr){function yr(){gr(),Ce.splice(Ce.indexOf(yr),1)}Ce.push(yr),++Ae$1,be$1(()=>{--Ae$1==0&&Ve$1()},[])})(()=>{this.unhandleds.length===0?hr():pr(this.unhandleds[0])})},mr.finalize),cr()},ar,dr,fr))}),ye$1&&(ye$1.allSettled&&l$4(je$1,"allSettled",function(){const cr=B$2.apply(null,arguments).map(nt);return new je$1(ar=>{cr.length===0&&ar([]);let dr=cr.length;const fr=new Array(dr);cr.forEach((hr,pr)=>je$1.resolve(hr).then(mr=>fr[pr]={status:"fulfilled",value:mr},mr=>fr[pr]={status:"rejected",reason:mr}).then(()=>--dr||ar(fr)))})}),ye$1.any&&typeof AggregateError<"u"&&l$4(je$1,"any",function(){const cr=B$2.apply(null,arguments).map(nt);return new je$1((ar,dr)=>{cr.length===0&&dr(new AggregateError([]));let fr=cr.length;const hr=new Array(fr);cr.forEach((pr,mr)=>je$1.resolve(pr).then(gr=>ar(gr),gr=>{hr[mr]=gr,--fr||dr(new AggregateError(hr))}))})}));const ze$1={awaits:0,echoes:0,id:0};var Ge=0,He=[],Qe=0,Xe=0,Je=0;function Ze(cr,ar,dr,fr){var hr=Oe$1,pr=Object.create(hr);pr.parent=hr,pr.ref=0,pr.global=!1,pr.id=++Je;var mr=Ke.env;pr.env=me?{Promise:je$1,PromiseProp:{value:je$1,configurable:!0,writable:!0},all:je$1.all,race:je$1.race,allSettled:je$1.allSettled,any:je$1.any,resolve:je$1.resolve,reject:je$1.reject,nthen:ct(mr.nthen,pr),gthen:ct(mr.gthen,pr)}:{},ar&&r$4(pr,ar),++hr.ref,pr.finalize=function(){--this.parent.ref||this.parent.finalize()};var gr=at(pr,cr,dr,fr);return pr.ref===0&&pr.finalize(),gr}function et(){return ze$1.id||(ze$1.id=++Ge),++ze$1.awaits,ze$1.echoes+=ce$1,ze$1.id}function tt(){return!!ze$1.awaits&&(--ze$1.awaits==0&&(ze$1.id=0),ze$1.echoes=ze$1.awaits*ce$1,!0)}function nt(cr){return ze$1.echoes&&cr&&cr.constructor===ye$1?(et(),cr.then(ar=>(tt(),ar),ar=>(tt(),ft(ar)))):cr}function rt(cr){++Xe,ze$1.echoes&&--ze$1.echoes!=0||(ze$1.echoes=ze$1.id=0),He.push(Oe$1),it(cr,!0)}function st(){var cr=He[He.length-1];He.pop(),it(cr,!1)}function it(cr,ar){var dr=Oe$1;if((ar?!ze$1.echoes||Qe++&&cr===Oe$1:!Qe||--Qe&&cr===Oe$1)||ut$1(ar?rt.bind(null,cr):st),cr!==Oe$1&&(Oe$1=cr,dr===Ke&&(Ke.env=ot()),me)){var fr=Ke.env.Promise,hr=cr.env;de$1.then=hr.nthen,fr.prototype.then=hr.gthen,(dr.global||cr.global)&&(Object.defineProperty(e$3,"Promise",hr.PromiseProp),fr.all=hr.all,fr.race=hr.race,fr.resolve=hr.resolve,fr.reject=hr.reject,hr.allSettled&&(fr.allSettled=hr.allSettled),hr.any&&(fr.any=hr.any))}}function ot(){var cr=e$3.Promise;return me?{Promise:cr,PromiseProp:Object.getOwnPropertyDescriptor(e$3,"Promise"),all:cr.all,race:cr.race,allSettled:cr.allSettled,any:cr.any,resolve:cr.resolve,reject:cr.reject,nthen:de$1.then,gthen:cr.prototype.then}:{}}function at(cr,ar,dr,fr,hr){var pr=Oe$1;try{return it(cr,!0),ar(dr,fr,hr)}finally{it(pr,!1)}}function ut$1(cr){pe$1.call(he$1,cr)}function lt(cr,ar,dr,fr){return typeof cr!="function"?cr:function(){var hr=Oe$1;dr&&et(),it(ar,!0);try{return cr.apply(this,arguments)}finally{it(hr,!1),fr&&ut$1(tt)}}}function ct(cr,ar){return function(dr,fr){return cr.call(this,lt(dr,ar),lt(fr,ar))}}(""+pe$1).indexOf("[native code]")===-1&&(et=tt=ee$1);const ht="unhandledrejection";function dt(cr,ar){var dr;try{dr=ar.onuncatched(cr)}catch{}if(dr!==!1)try{var fr,hr={promise:ar,reason:cr};if(e$3.document&&document.createEvent?((fr=document.createEvent("Event")).initEvent(ht,!0,!0),r$4(fr,hr)):e$3.CustomEvent&&r$4(fr=new CustomEvent(ht,{detail:hr}),hr),fr&&e$3.dispatchEvent&&(dispatchEvent(fr),!e$3.PromiseRejectionEvent&&e$3.onunhandledrejection))try{e$3.onunhandledrejection(fr)}catch{}R$1&&fr&&!fr.defaultPrevented&&console.warn(`Unhandled rejection: ${cr.stack||cr}`)}catch{}}var ft=je$1.reject;function pt(cr,ar,dr,fr){if(cr.idbdb&&(cr._state.openComplete||Oe$1.letThrough||cr._vip)){var hr=cr._createTransaction(ar,dr,cr._dbSchema);try{hr.create(),cr._state.PR1398_maxLoop=3}catch(pr){return pr.name===H$1.InvalidState&&cr.isOpen()&&--cr._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),cr._close(),cr.open().then(()=>pt(cr,ar,dr,fr))):ft(pr)}return hr._promise(ar,(pr,mr)=>Ze(()=>(Oe$1.trans=hr,fr(pr,mr,hr)))).then(pr=>hr._completion.then(()=>pr))}if(cr._state.openComplete)return ft(new X$1.DatabaseClosed(cr._state.dbOpenError));if(!cr._state.isBeingOpened){if(!cr._options.autoOpen)return ft(new X$1.DatabaseClosed);cr.open().catch(ee$1)}return cr._state.dbReadyPromise.then(()=>pt(cr,ar,dr,fr))}const yt="3.2.4",mt=String.fromCharCode(65535),vt=-1/0,gt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bt="String expected.",_t=[],wt=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),xt=wt,kt=wt,Et=cr=>!/(dexie\.js|dexie\.min\.js)/.test(cr),Pt="__dbnames",Kt="readonly",Ot="readwrite";function St(cr,ar){return cr?ar?function(){return cr.apply(this,arguments)&&ar.apply(this,arguments)}:cr:ar}const At={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ct(cr){return typeof cr!="string"||/\./.test(cr)?ar=>ar:ar=>(ar[cr]===void 0&&cr in ar&&delete(ar=O$1(ar))[cr],ar)}class jt{_trans(ar,dr,fr){const hr=this._tx||Oe$1.trans,pr=this.name;function mr(yr,xr,wr){if(!wr.schema[pr])throw new X$1.NotFound("Table "+pr+" not part of transaction");return dr(wr.idbtrans,wr)}const gr=Ue();try{return hr&&hr.db===this.db?hr===Oe$1.trans?hr._promise(ar,mr,fr):Ze(()=>hr._promise(ar,mr,fr),{trans:hr,transless:Oe$1.transless||Oe$1}):pt(this.db,ar,[this.name],mr)}finally{gr&&Le()}}get(ar,dr){return ar&&ar.constructor===Object?this.where(ar).first(dr):this._trans("readonly",fr=>this.core.get({trans:fr,key:ar}).then(hr=>this.hook.reading.fire(hr))).then(dr)}where(ar){if(typeof ar=="string")return new this.db.WhereClause(this,ar);if(n$5(ar))return new this.db.WhereClause(this,`[${ar.join("+")}]`);const dr=t$4(ar);if(dr.length===1)return this.where(dr[0]).equals(ar[dr[0]]);const fr=this.schema.indexes.concat(this.schema.primKey).filter(xr=>xr.compound&&dr.every(wr=>xr.keyPath.indexOf(wr)>=0)&&xr.keyPath.every(wr=>dr.indexOf(wr)>=0))[0];if(fr&&this.db._maxKey!==mt)return this.where(fr.name).equals(fr.keyPath.map(xr=>ar[xr]));!fr&&R$1&&console.warn(`The query ${JSON.stringify(ar)} on ${this.name} would benefit of a compound index [${dr.join("+")}]`);const{idxByName:hr}=this.schema,pr=this.db._deps.indexedDB;function mr(xr,wr){try{return pr.cmp(xr,wr)===0}catch{return!1}}const[gr,yr]=dr.reduce(([xr,wr],br)=>{const Sr=hr[br],vr=ar[br];return[xr||Sr,xr||!Sr?St(wr,Sr&&Sr.multi?Er=>{const Ar=b$5(Er,br);return n$5(Ar)&&Ar.some(_r=>mr(vr,_r))}:Er=>mr(vr,b$5(Er,br))):wr]},[null,null]);return gr?this.where(gr.name).equals(ar[gr.keyPath]).filter(yr):fr?this.filter(yr):this.where(dr).equals("")}filter(ar){return this.toCollection().and(ar)}count(ar){return this.toCollection().count(ar)}offset(ar){return this.toCollection().offset(ar)}limit(ar){return this.toCollection().limit(ar)}each(ar){return this.toCollection().each(ar)}toArray(ar){return this.toCollection().toArray(ar)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(ar){return new this.db.Collection(new this.db.WhereClause(this,n$5(ar)?`[${ar.join("+")}]`:ar))}reverse(){return this.toCollection().reverse()}mapToClass(ar){this.schema.mappedClass=ar;const dr=fr=>{if(!fr)return fr;const hr=Object.create(ar.prototype);for(var pr in fr)if(o$1(fr,pr))try{hr[pr]=fr[pr]}catch{}return hr};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=dr,this.hook("reading",dr),ar}defineClass(){return this.mapToClass(function(ar){r$4(this,ar)})}add(ar,dr){const{auto:fr,keyPath:hr}=this.schema.primKey;let pr=ar;return hr&&fr&&(pr=Ct(hr)(ar)),this._trans("readwrite",mr=>this.core.mutate({trans:mr,type:"add",keys:dr!=null?[dr]:null,values:[pr]})).then(mr=>mr.numFailures?je$1.reject(mr.failures[0]):mr.lastResult).then(mr=>{if(hr)try{_$2(ar,hr,mr)}catch{}return mr})}update(ar,dr){if(typeof ar!="object"||n$5(ar))return this.where(":id").equals(ar).modify(dr);{const fr=b$5(ar,this.schema.primKey.keyPath);if(fr===void 0)return ft(new X$1.InvalidArgument("Given object does not contain its primary key"));try{typeof dr!="function"?t$4(dr).forEach(hr=>{_$2(ar,hr,dr[hr])}):dr(ar,{value:ar,primKey:fr})}catch{}return this.where(":id").equals(fr).modify(dr)}}put(ar,dr){const{auto:fr,keyPath:hr}=this.schema.primKey;let pr=ar;return hr&&fr&&(pr=Ct(hr)(ar)),this._trans("readwrite",mr=>this.core.mutate({trans:mr,type:"put",values:[pr],keys:dr!=null?[dr]:null})).then(mr=>mr.numFailures?je$1.reject(mr.failures[0]):mr.lastResult).then(mr=>{if(hr)try{_$2(ar,hr,mr)}catch{}return mr})}delete(ar){return this._trans("readwrite",dr=>this.core.mutate({trans:dr,type:"delete",keys:[ar]})).then(dr=>dr.numFailures?je$1.reject(dr.failures[0]):void 0)}clear(){return this._trans("readwrite",ar=>this.core.mutate({trans:ar,type:"deleteRange",range:At})).then(ar=>ar.numFailures?je$1.reject(ar.failures[0]):void 0)}bulkGet(ar){return this._trans("readonly",dr=>this.core.getMany({keys:ar,trans:dr}).then(fr=>fr.map(hr=>this.hook.reading.fire(hr))))}bulkAdd(ar,dr,fr){const hr=Array.isArray(dr)?dr:void 0,pr=(fr=fr||(hr?void 0:dr))?fr.allKeys:void 0;return this._trans("readwrite",mr=>{const{auto:gr,keyPath:yr}=this.schema.primKey;if(yr&&hr)throw new X$1.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(hr&&hr.length!==ar.length)throw new X$1.InvalidArgument("Arguments objects and keys must have the same length");const xr=ar.length;let wr=yr&&gr?ar.map(Ct(yr)):ar;return this.core.mutate({trans:mr,type:"add",keys:hr,values:wr,wantResults:pr}).then(({numFailures:br,results:Sr,lastResult:vr,failures:Er})=>{if(br===0)return pr?Sr:vr;throw new G$1(`${this.name}.bulkAdd(): ${br} of ${xr} operations failed`,Er)})})}bulkPut(ar,dr,fr){const hr=Array.isArray(dr)?dr:void 0,pr=(fr=fr||(hr?void 0:dr))?fr.allKeys:void 0;return this._trans("readwrite",mr=>{const{auto:gr,keyPath:yr}=this.schema.primKey;if(yr&&hr)throw new X$1.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(hr&&hr.length!==ar.length)throw new X$1.InvalidArgument("Arguments objects and keys must have the same length");const xr=ar.length;let wr=yr&&gr?ar.map(Ct(yr)):ar;return this.core.mutate({trans:mr,type:"put",keys:hr,values:wr,wantResults:pr}).then(({numFailures:br,results:Sr,lastResult:vr,failures:Er})=>{if(br===0)return pr?Sr:vr;throw new G$1(`${this.name}.bulkPut(): ${br} of ${xr} operations failed`,Er)})})}bulkDelete(ar){const dr=ar.length;return this._trans("readwrite",fr=>this.core.mutate({trans:fr,type:"delete",keys:ar})).then(({numFailures:fr,lastResult:hr,failures:pr})=>{if(fr===0)return hr;throw new G$1(`${this.name}.bulkDelete(): ${fr} of ${dr} operations failed`,pr)})}}function Dt(cr){var ar={},dr=function(mr,gr){if(gr){for(var yr=arguments.length,xr=new Array(yr-1);--yr;)xr[yr-1]=arguments[yr];return ar[mr].subscribe.apply(null,xr),cr}if(typeof mr=="string")return ar[mr]};dr.addEventType=pr;for(var fr=1,hr=arguments.length;fr<hr;++fr)pr(arguments[fr]);return dr;function pr(mr,gr,yr){if(typeof mr!="object"){var xr;gr||(gr=ae$1),yr||(yr=ee$1);var wr={subscribers:[],fire:yr,subscribe:function(br){wr.subscribers.indexOf(br)===-1&&(wr.subscribers.push(br),wr.fire=gr(wr.fire,br))},unsubscribe:function(br){wr.subscribers=wr.subscribers.filter(function(Sr){return Sr!==br}),wr.fire=wr.subscribers.reduce(gr,yr)}};return ar[mr]=dr[mr]=wr,wr}t$4(xr=mr).forEach(function(br){var Sr=xr[br];if(n$5(Sr))pr(br,xr[br][0],xr[br][1]);else{if(Sr!=="asap")throw new X$1.InvalidArgument("Invalid event config");var vr=pr(br,te$1,function(){for(var Er=arguments.length,Ar=new Array(Er);Er--;)Ar[Er]=arguments[Er];vr.subscribers.forEach(function(_r){v$4(function(){_r.apply(null,Ar)})})})}})}}function It(cr,ar){return c$3(ar).from({prototype:cr}),ar}function Bt(cr,ar){return!(cr.filter||cr.algorithm||cr.or)&&(ar?cr.justLimit:!cr.replayFilter)}function Tt(cr,ar){cr.filter=St(cr.filter,ar)}function Rt(cr,ar,dr){var fr=cr.replayFilter;cr.replayFilter=fr?()=>St(fr(),ar()):ar,cr.justLimit=dr&&!fr}function Ft(cr,ar){if(cr.isPrimKey)return ar.primaryKey;const dr=ar.getIndexByKeyPath(cr.index);if(!dr)throw new X$1.Schema("KeyPath "+cr.index+" on object store "+ar.name+" is not indexed");return dr}function Mt(cr,ar,dr){const fr=Ft(cr,ar.schema);return ar.openCursor({trans:dr,values:!cr.keysOnly,reverse:cr.dir==="prev",unique:!!cr.unique,query:{index:fr,range:cr.range}})}function Nt(cr,ar,dr,fr){const hr=cr.replayFilter?St(cr.filter,cr.replayFilter()):cr.filter;if(cr.or){const pr={},mr=(gr,yr,xr)=>{if(!hr||hr(yr,xr,Sr=>yr.stop(Sr),Sr=>yr.fail(Sr))){var wr=yr.primaryKey,br=""+wr;br==="[object ArrayBuffer]"&&(br=""+new Uint8Array(wr)),o$1(pr,br)||(pr[br]=!0,ar(gr,yr,xr))}};return Promise.all([cr.or._iterate(mr,dr),qt(Mt(cr,fr,dr),cr.algorithm,mr,!cr.keysOnly&&cr.valueMapper)])}return qt(Mt(cr,fr,dr),St(cr.algorithm,hr),ar,!cr.keysOnly&&cr.valueMapper)}function qt(cr,ar,dr,fr){var hr=Ye$1(fr?(pr,mr,gr)=>dr(fr(pr),mr,gr):dr);return cr.then(pr=>{if(pr)return pr.start(()=>{var mr=()=>pr.continue();ar&&!ar(pr,gr=>mr=gr,gr=>{pr.stop(gr),mr=ee$1},gr=>{pr.fail(gr),mr=ee$1})||hr(pr.value,pr,gr=>mr=gr),mr()})})}function $t(cr,ar){try{const dr=Ut(cr),fr=Ut(ar);if(dr!==fr)return dr==="Array"?1:fr==="Array"?-1:dr==="binary"?1:fr==="binary"?-1:dr==="string"?1:fr==="string"?-1:dr==="Date"?1:fr!=="Date"?NaN:-1;switch(dr){case"number":case"Date":case"string":return cr>ar?1:cr<ar?-1:0;case"binary":return function(hr,pr){const mr=hr.length,gr=pr.length,yr=mr<gr?mr:gr;for(let xr=0;xr<yr;++xr)if(hr[xr]!==pr[xr])return hr[xr]<pr[xr]?-1:1;return mr===gr?0:mr<gr?-1:1}(Lt(cr),Lt(ar));case"Array":return function(hr,pr){const mr=hr.length,gr=pr.length,yr=mr<gr?mr:gr;for(let xr=0;xr<yr;++xr){const wr=$t(hr[xr],pr[xr]);if(wr!==0)return wr}return mr===gr?0:mr<gr?-1:1}(cr,ar)}}catch{}return NaN}function Ut(cr){const ar=typeof cr;if(ar!=="object")return ar;if(ArrayBuffer.isView(cr))return"binary";const dr=C$2(cr);return dr==="ArrayBuffer"?"binary":dr}function Lt(cr){return cr instanceof Uint8Array?cr:ArrayBuffer.isView(cr)?new Uint8Array(cr.buffer,cr.byteOffset,cr.byteLength):new Uint8Array(cr)}class Vt{_read(ar,dr){var fr=this._ctx;return fr.error?fr.table._trans(null,ft.bind(null,fr.error)):fr.table._trans("readonly",ar).then(dr)}_write(ar){var dr=this._ctx;return dr.error?dr.table._trans(null,ft.bind(null,dr.error)):dr.table._trans("readwrite",ar,"locked")}_addAlgorithm(ar){var dr=this._ctx;dr.algorithm=St(dr.algorithm,ar)}_iterate(ar,dr){return Nt(this._ctx,ar,dr,this._ctx.table.core)}clone(ar){var dr=Object.create(this.constructor.prototype),fr=Object.create(this._ctx);return ar&&r$4(fr,ar),dr._ctx=fr,dr}raw(){return this._ctx.valueMapper=null,this}each(ar){var dr=this._ctx;return this._read(fr=>Nt(dr,ar,fr,dr.table.core))}count(ar){return this._read(dr=>{const fr=this._ctx,hr=fr.table.core;if(Bt(fr,!0))return hr.count({trans:dr,query:{index:Ft(fr,hr.schema),range:fr.range}}).then(mr=>Math.min(mr,fr.limit));var pr=0;return Nt(fr,()=>(++pr,!1),dr,hr).then(()=>pr)}).then(ar)}sortBy(ar,dr){const fr=ar.split(".").reverse(),hr=fr[0],pr=fr.length-1;function mr(xr,wr){return wr?mr(xr[fr[wr]],wr-1):xr[hr]}var gr=this._ctx.dir==="next"?1:-1;function yr(xr,wr){var br=mr(xr,pr),Sr=mr(wr,pr);return br<Sr?-gr:br>Sr?gr:0}return this.toArray(function(xr){return xr.sort(yr)}).then(dr)}toArray(ar){return this._read(dr=>{var fr=this._ctx;if(fr.dir==="next"&&Bt(fr,!0)&&fr.limit>0){const{valueMapper:hr}=fr,pr=Ft(fr,fr.table.core.schema);return fr.table.core.query({trans:dr,limit:fr.limit,values:!0,query:{index:pr,range:fr.range}}).then(({result:mr})=>hr?mr.map(hr):mr)}{const hr=[];return Nt(fr,pr=>hr.push(pr),dr,fr.table.core).then(()=>hr)}},ar)}offset(ar){var dr=this._ctx;return ar<=0||(dr.offset+=ar,Bt(dr)?Rt(dr,()=>{var fr=ar;return(hr,pr)=>fr===0||(fr===1?(--fr,!1):(pr(()=>{hr.advance(fr),fr=0}),!1))}):Rt(dr,()=>{var fr=ar;return()=>--fr<0})),this}limit(ar){return this._ctx.limit=Math.min(this._ctx.limit,ar),Rt(this._ctx,()=>{var dr=ar;return function(fr,hr,pr){return--dr<=0&&hr(pr),dr>=0}},!0),this}until(ar,dr){return Tt(this._ctx,function(fr,hr,pr){return!ar(fr.value)||(hr(pr),dr)}),this}first(ar){return this.limit(1).toArray(function(dr){return dr[0]}).then(ar)}last(ar){return this.reverse().first(ar)}filter(ar){var dr,fr;return Tt(this._ctx,function(hr){return ar(hr.value)}),dr=this._ctx,fr=ar,dr.isMatch=St(dr.isMatch,fr),this}and(ar){return this.filter(ar)}or(ar){return new this.db.WhereClause(this._ctx.table,ar,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(ar){var dr=this._ctx;return dr.keysOnly=!dr.isMatch,this.each(function(fr,hr){ar(hr.key,hr)})}eachUniqueKey(ar){return this._ctx.unique="unique",this.eachKey(ar)}eachPrimaryKey(ar){var dr=this._ctx;return dr.keysOnly=!dr.isMatch,this.each(function(fr,hr){ar(hr.primaryKey,hr)})}keys(ar){var dr=this._ctx;dr.keysOnly=!dr.isMatch;var fr=[];return this.each(function(hr,pr){fr.push(pr.key)}).then(function(){return fr}).then(ar)}primaryKeys(ar){var dr=this._ctx;if(dr.dir==="next"&&Bt(dr,!0)&&dr.limit>0)return this._read(hr=>{var pr=Ft(dr,dr.table.core.schema);return dr.table.core.query({trans:hr,values:!1,limit:dr.limit,query:{index:pr,range:dr.range}})}).then(({result:hr})=>hr).then(ar);dr.keysOnly=!dr.isMatch;var fr=[];return this.each(function(hr,pr){fr.push(pr.primaryKey)}).then(function(){return fr}).then(ar)}uniqueKeys(ar){return this._ctx.unique="unique",this.keys(ar)}firstKey(ar){return this.limit(1).keys(function(dr){return dr[0]}).then(ar)}lastKey(ar){return this.reverse().firstKey(ar)}distinct(){var ar=this._ctx,dr=ar.index&&ar.table.schema.idxByName[ar.index];if(!dr||!dr.multi)return this;var fr={};return Tt(this._ctx,function(hr){var pr=hr.primaryKey.toString(),mr=o$1(fr,pr);return fr[pr]=!0,!mr}),this}modify(ar){var dr=this._ctx;return this._write(fr=>{var hr;if(typeof ar=="function")hr=ar;else{var pr=t$4(ar),mr=pr.length;hr=function(Ar){for(var _r=!1,Cr=0;Cr<mr;++Cr){var kr=pr[Cr],Rr=ar[kr];b$5(Ar,kr)!==Rr&&(_$2(Ar,kr,Rr),_r=!0)}return _r}}const gr=dr.table.core,{outbound:yr,extractKey:xr}=gr.schema.primaryKey,wr=this.db._options.modifyChunkSize||200,br=[];let Sr=0;const vr=[],Er=(Ar,_r)=>{const{failures:Cr,numFailures:kr}=_r;Sr+=Ar-kr;for(let Rr of t$4(Cr))br.push(Cr[Rr])};return this.clone().primaryKeys().then(Ar=>{const _r=Cr=>{const kr=Math.min(wr,Ar.length-Cr);return gr.getMany({trans:fr,keys:Ar.slice(Cr,Cr+kr),cache:"immutable"}).then(Rr=>{const Ir=[],Nr=[],Pr=yr?[]:null,Tr=[];for(let Fr=0;Fr<kr;++Fr){const jr=Rr[Fr],Ur={value:O$1(jr),primKey:Ar[Cr+Fr]};hr.call(Ur,Ur.value,Ur)!==!1&&(Ur.value==null?Tr.push(Ar[Cr+Fr]):yr||$t(xr(jr),xr(Ur.value))===0?(Nr.push(Ur.value),yr&&Pr.push(Ar[Cr+Fr])):(Tr.push(Ar[Cr+Fr]),Ir.push(Ur.value)))}const Br=Bt(dr)&&dr.limit===1/0&&(typeof ar!="function"||ar===Wt)&&{index:dr.index,range:dr.range};return Promise.resolve(Ir.length>0&&gr.mutate({trans:fr,type:"add",values:Ir}).then(Fr=>{for(let jr in Fr.failures)Tr.splice(parseInt(jr),1);Er(Ir.length,Fr)})).then(()=>(Nr.length>0||Br&&typeof ar=="object")&&gr.mutate({trans:fr,type:"put",keys:Pr,values:Nr,criteria:Br,changeSpec:typeof ar!="function"&&ar}).then(Fr=>Er(Nr.length,Fr))).then(()=>(Tr.length>0||Br&&ar===Wt)&&gr.mutate({trans:fr,type:"delete",keys:Tr,criteria:Br}).then(Fr=>Er(Tr.length,Fr))).then(()=>Ar.length>Cr+kr&&_r(Cr+wr))})};return _r(0).then(()=>{if(br.length>0)throw new z$3("Error modifying one or more objects",br,Sr,vr);return Ar.length})})})}delete(){var ar=this._ctx,dr=ar.range;return Bt(ar)&&(ar.isPrimKey&&!kt||dr.type===3)?this._write(fr=>{const{primaryKey:hr}=ar.table.core.schema,pr=dr;return ar.table.core.count({trans:fr,query:{index:hr,range:pr}}).then(mr=>ar.table.core.mutate({trans:fr,type:"deleteRange",range:pr}).then(({failures:gr,lastResult:yr,results:xr,numFailures:wr})=>{if(wr)throw new z$3("Could not delete some values",Object.keys(gr).map(br=>gr[br]),mr-wr);return mr-wr}))}):this.modify(Wt)}}const Wt=(cr,ar)=>ar.value=null;function Yt(cr,ar){return cr<ar?-1:cr===ar?0:1}function zt(cr,ar){return cr>ar?-1:cr===ar?0:1}function Gt(cr,ar,dr){var fr=cr instanceof en?new cr.Collection(cr):cr;return fr._ctx.error=dr?new dr(ar):new TypeError(ar),fr}function Ht(cr){return new cr.Collection(cr,()=>Zt("")).limit(0)}function Qt(cr,ar,dr,fr,hr,pr){for(var mr=Math.min(cr.length,fr.length),gr=-1,yr=0;yr<mr;++yr){var xr=ar[yr];if(xr!==fr[yr])return hr(cr[yr],dr[yr])<0?cr.substr(0,yr)+dr[yr]+dr.substr(yr+1):hr(cr[yr],fr[yr])<0?cr.substr(0,yr)+fr[yr]+dr.substr(yr+1):gr>=0?cr.substr(0,gr)+ar[gr]+dr.substr(gr+1):null;hr(cr[yr],xr)<0&&(gr=yr)}return mr<fr.length&&pr==="next"?cr+dr.substr(cr.length):mr<cr.length&&pr==="prev"?cr.substr(0,dr.length):gr<0?null:cr.substr(0,gr)+fr[gr]+dr.substr(gr+1)}function Xt(cr,ar,dr,fr){var hr,pr,mr,gr,yr,xr,wr,br=dr.length;if(!dr.every(Ar=>typeof Ar=="string"))return Gt(cr,bt);function Sr(Ar){hr=function(Cr){return Cr==="next"?kr=>kr.toUpperCase():kr=>kr.toLowerCase()}(Ar),pr=function(Cr){return Cr==="next"?kr=>kr.toLowerCase():kr=>kr.toUpperCase()}(Ar),mr=Ar==="next"?Yt:zt;var _r=dr.map(function(Cr){return{lower:pr(Cr),upper:hr(Cr)}}).sort(function(Cr,kr){return mr(Cr.lower,kr.lower)});gr=_r.map(function(Cr){return Cr.upper}),yr=_r.map(function(Cr){return Cr.lower}),xr=Ar,wr=Ar==="next"?"":fr}Sr("next");var vr=new cr.Collection(cr,()=>Jt(gr[0],yr[br-1]+fr));vr._ondirectionchange=function(Ar){Sr(Ar)};var Er=0;return vr._addAlgorithm(function(Ar,_r,Cr){var kr=Ar.key;if(typeof kr!="string")return!1;var Rr=pr(kr);if(ar(Rr,yr,Er))return!0;for(var Ir=null,Nr=Er;Nr<br;++Nr){var Pr=Qt(kr,Rr,gr[Nr],yr[Nr],mr,xr);Pr===null&&Ir===null?Er=Nr+1:(Ir===null||mr(Ir,Pr)>0)&&(Ir=Pr)}return _r(Ir!==null?function(){Ar.continue(Ir+wr)}:Cr),!1}),vr}function Jt(cr,ar,dr,fr){return{type:2,lower:cr,upper:ar,lowerOpen:dr,upperOpen:fr}}function Zt(cr){return{type:1,lower:cr,upper:cr}}class en{get Collection(){return this._ctx.table.db.Collection}between(ar,dr,fr,hr){fr=fr!==!1,hr=hr===!0;try{return this._cmp(ar,dr)>0||this._cmp(ar,dr)===0&&(fr||hr)&&(!fr||!hr)?Ht(this):new this.Collection(this,()=>Jt(ar,dr,!fr,!hr))}catch{return Gt(this,gt)}}equals(ar){return ar==null?Gt(this,gt):new this.Collection(this,()=>Zt(ar))}above(ar){return ar==null?Gt(this,gt):new this.Collection(this,()=>Jt(ar,void 0,!0))}aboveOrEqual(ar){return ar==null?Gt(this,gt):new this.Collection(this,()=>Jt(ar,void 0,!1))}below(ar){return ar==null?Gt(this,gt):new this.Collection(this,()=>Jt(void 0,ar,!1,!0))}belowOrEqual(ar){return ar==null?Gt(this,gt):new this.Collection(this,()=>Jt(void 0,ar))}startsWith(ar){return typeof ar!="string"?Gt(this,bt):this.between(ar,ar+mt,!0,!0)}startsWithIgnoreCase(ar){return ar===""?this.startsWith(ar):Xt(this,(dr,fr)=>dr.indexOf(fr[0])===0,[ar],mt)}equalsIgnoreCase(ar){return Xt(this,(dr,fr)=>dr===fr[0],[ar],"")}anyOfIgnoreCase(){var ar=B$2.apply(I$2,arguments);return ar.length===0?Ht(this):Xt(this,(dr,fr)=>fr.indexOf(dr)!==-1,ar,"")}startsWithAnyOfIgnoreCase(){var ar=B$2.apply(I$2,arguments);return ar.length===0?Ht(this):Xt(this,(dr,fr)=>fr.some(hr=>dr.indexOf(hr)===0),ar,mt)}anyOf(){const ar=B$2.apply(I$2,arguments);let dr=this._cmp;try{ar.sort(dr)}catch{return Gt(this,gt)}if(ar.length===0)return Ht(this);const fr=new this.Collection(this,()=>Jt(ar[0],ar[ar.length-1]));fr._ondirectionchange=pr=>{dr=pr==="next"?this._ascending:this._descending,ar.sort(dr)};let hr=0;return fr._addAlgorithm((pr,mr,gr)=>{const yr=pr.key;for(;dr(yr,ar[hr])>0;)if(++hr,hr===ar.length)return mr(gr),!1;return dr(yr,ar[hr])===0||(mr(()=>{pr.continue(ar[hr])}),!1)}),fr}notEqual(ar){return this.inAnyRange([[vt,ar],[ar,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const ar=B$2.apply(I$2,arguments);if(ar.length===0)return new this.Collection(this);try{ar.sort(this._ascending)}catch{return Gt(this,gt)}const dr=ar.reduce((fr,hr)=>fr?fr.concat([[fr[fr.length-1][1],hr]]):[[vt,hr]],null);return dr.push([ar[ar.length-1],this.db._maxKey]),this.inAnyRange(dr,{includeLowers:!1,includeUppers:!1})}inAnyRange(ar,dr){const fr=this._cmp,hr=this._ascending,pr=this._descending,mr=this._min,gr=this._max;if(ar.length===0)return Ht(this);if(!ar.every(kr=>kr[0]!==void 0&&kr[1]!==void 0&&hr(kr[0],kr[1])<=0))return Gt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X$1.InvalidArgument);const yr=!dr||dr.includeLowers!==!1,xr=dr&&dr.includeUppers===!0;let wr,br=hr;function Sr(kr,Rr){return br(kr[0],Rr[0])}try{wr=ar.reduce(function(kr,Rr){let Ir=0,Nr=kr.length;for(;Ir<Nr;++Ir){const Pr=kr[Ir];if(fr(Rr[0],Pr[1])<0&&fr(Rr[1],Pr[0])>0){Pr[0]=mr(Pr[0],Rr[0]),Pr[1]=gr(Pr[1],Rr[1]);break}}return Ir===Nr&&kr.push(Rr),kr},[]),wr.sort(Sr)}catch{return Gt(this,gt)}let vr=0;const Er=xr?kr=>hr(kr,wr[vr][1])>0:kr=>hr(kr,wr[vr][1])>=0,Ar=yr?kr=>pr(kr,wr[vr][0])>0:kr=>pr(kr,wr[vr][0])>=0;let _r=Er;const Cr=new this.Collection(this,()=>Jt(wr[0][0],wr[wr.length-1][1],!yr,!xr));return Cr._ondirectionchange=kr=>{kr==="next"?(_r=Er,br=hr):(_r=Ar,br=pr),wr.sort(Sr)},Cr._addAlgorithm((kr,Rr,Ir)=>{for(var Nr=kr.key;_r(Nr);)if(++vr,vr===wr.length)return Rr(Ir),!1;return!!function(Pr){return!Er(Pr)&&!Ar(Pr)}(Nr)||(this._cmp(Nr,wr[vr][1])===0||this._cmp(Nr,wr[vr][0])===0||Rr(()=>{br===hr?kr.continue(wr[vr][0]):kr.continue(wr[vr][1])}),!1)}),Cr}startsWithAnyOf(){const ar=B$2.apply(I$2,arguments);return ar.every(dr=>typeof dr=="string")?ar.length===0?Ht(this):this.inAnyRange(ar.map(dr=>[dr,dr+mt])):Gt(this,"startsWithAnyOf() only works with strings")}}function tn(cr){return Ye$1(function(ar){return nn(ar),cr(ar.target.error),!1})}function nn(cr){cr.stopPropagation&&cr.stopPropagation(),cr.preventDefault&&cr.preventDefault()}const rn="storagemutated",sn="x-storagemutated-1",on=Dt(null,rn);class an{_lock(){return m$4(!Oe$1.global),++this._reculock,this._reculock!==1||Oe$1.global||(Oe$1.lockOwnerFor=this),this}_unlock(){if(m$4(!Oe$1.global),--this._reculock==0)for(Oe$1.global||(Oe$1.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var ar=this._blockedFuncs.shift();try{at(ar[1],ar[0])}catch{}}return this}_locked(){return this._reculock&&Oe$1.lockOwnerFor!==this}create(ar){if(!this.mode)return this;const dr=this.db.idbdb,fr=this.db._state.dbOpenError;if(m$4(!this.idbtrans),!ar&&!dr)switch(fr&&fr.name){case"DatabaseClosedError":throw new X$1.DatabaseClosed(fr);case"MissingAPIError":throw new X$1.MissingAPI(fr.message,fr);default:throw new X$1.OpenFailed(fr)}if(!this.active)throw new X$1.TransactionInactive;return m$4(this._completion._state===null),(ar=this.idbtrans=ar||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):dr.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ye$1(hr=>{nn(hr),this._reject(ar.error)}),ar.onabort=Ye$1(hr=>{nn(hr),this.active&&this._reject(new X$1.Abort(ar.error)),this.active=!1,this.on("abort").fire(hr)}),ar.oncomplete=Ye$1(()=>{this.active=!1,this._resolve(),"mutatedParts"in ar&&on.storagemutated.fire(ar.mutatedParts)}),this}_promise(ar,dr,fr){if(ar==="readwrite"&&this.mode!=="readwrite")return ft(new X$1.ReadOnly("Transaction is readonly"));if(!this.active)return ft(new X$1.TransactionInactive);if(this._locked())return new je$1((pr,mr)=>{this._blockedFuncs.push([()=>{this._promise(ar,dr,fr).then(pr,mr)},Oe$1])});if(fr)return Ze(()=>{var pr=new je$1((mr,gr)=>{this._lock();const yr=dr(mr,gr,this);yr&&yr.then&&yr.then(mr,gr)});return pr.finally(()=>this._unlock()),pr._lib=!0,pr});var hr=new je$1((pr,mr)=>{var gr=dr(pr,mr,this);gr&&gr.then&&gr.then(pr,mr)});return hr._lib=!0,hr}_root(){return this.parent?this.parent._root():this}waitFor(ar){var dr=this._root();const fr=je$1.resolve(ar);if(dr._waitingFor)dr._waitingFor=dr._waitingFor.then(()=>fr);else{dr._waitingFor=fr,dr._waitingQueue=[];var hr=dr.idbtrans.objectStore(dr.storeNames[0]);(function mr(){for(++dr._spinCount;dr._waitingQueue.length;)dr._waitingQueue.shift()();dr._waitingFor&&(hr.get(-1/0).onsuccess=mr)})()}var pr=dr._waitingFor;return new je$1((mr,gr)=>{fr.then(yr=>dr._waitingQueue.push(Ye$1(mr.bind(null,yr))),yr=>dr._waitingQueue.push(Ye$1(gr.bind(null,yr)))).finally(()=>{dr._waitingFor===pr&&(dr._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X$1.Abort))}table(ar){const dr=this._memoizedTables||(this._memoizedTables={});if(o$1(dr,ar))return dr[ar];const fr=this.schema[ar];if(!fr)throw new X$1.NotFound("Table "+ar+" not part of transaction");const hr=new this.db.Table(ar,fr,this);return hr.core=this.db.core.table(ar),dr[ar]=hr,hr}}function un(cr,ar,dr,fr,hr,pr,mr){return{name:cr,keyPath:ar,unique:dr,multi:fr,auto:hr,compound:pr,src:(dr&&!mr?"&":"")+(fr?"*":"")+(hr?"++":"")+ln(ar)}}function ln(cr){return typeof cr=="string"?cr:cr?"["+[].join.call(cr,"+")+"]":""}function cn(cr,ar,dr){return{name:cr,primKey:ar,indexes:dr,mappedClass:null,idxByName:g$6(dr,fr=>[fr.name,fr])}}let hn=cr=>{try{return cr.only([[]]),hn=()=>[[]],[[]]}catch{return hn=()=>mt,mt}};function dn(cr){return cr==null?()=>{}:typeof cr=="string"?function(ar){return ar.split(".").length===1?fr=>fr[ar]:fr=>b$5(fr,ar)}(cr):ar=>b$5(ar,cr)}function fn(cr){return[].slice.call(cr)}let pn=0;function yn(cr){return cr==null?":id":typeof cr=="string"?cr:`[${cr.join("+")}]`}function mn(cr,ar,dr){function fr(yr){if(yr.type===3)return null;if(yr.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:xr,upper:wr,lowerOpen:br,upperOpen:Sr}=yr;return xr===void 0?wr===void 0?null:ar.upperBound(wr,!!Sr):wr===void 0?ar.lowerBound(xr,!!br):ar.bound(xr,wr,!!br,!!Sr)}const{schema:hr,hasGetAll:pr}=function(yr,xr){const wr=fn(yr.objectStoreNames);return{schema:{name:yr.name,tables:wr.map(br=>xr.objectStore(br)).map(br=>{const{keyPath:Sr,autoIncrement:vr}=br,Er=n$5(Sr),Ar=Sr==null,_r={},Cr={name:br.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ar,compound:Er,keyPath:Sr,autoIncrement:vr,unique:!0,extractKey:dn(Sr)},indexes:fn(br.indexNames).map(kr=>br.index(kr)).map(kr=>{const{name:Rr,unique:Ir,multiEntry:Nr,keyPath:Pr}=kr,Tr={name:Rr,compound:n$5(Pr),keyPath:Pr,unique:Ir,multiEntry:Nr,extractKey:dn(Pr)};return _r[yn(Pr)]=Tr,Tr}),getIndexByKeyPath:kr=>_r[yn(kr)]};return _r[":id"]=Cr.primaryKey,Sr!=null&&(_r[yn(Sr)]=Cr.primaryKey),Cr})},hasGetAll:wr.length>0&&"getAll"in xr.objectStore(wr[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(cr,dr),mr=hr.tables.map(yr=>function(xr){const wr=xr.name;return{name:wr,schema:xr,mutate:function({trans:br,type:Sr,keys:vr,values:Er,range:Ar}){return new Promise((_r,Cr)=>{_r=Ye$1(_r);const kr=br.objectStore(wr),Rr=kr.keyPath==null,Ir=Sr==="put"||Sr==="add";if(!Ir&&Sr!=="delete"&&Sr!=="deleteRange")throw new Error("Invalid operation type: "+Sr);const{length:Nr}=vr||Er||{length:1};if(vr&&Er&&vr.length!==Er.length)throw new Error("Given keys array must have same length as given values array.");if(Nr===0)return _r({numFailures:0,failures:{},results:[],lastResult:void 0});let Pr;const Tr=[],Br=[];let Fr=0;const jr=qr=>{++Fr,nn(qr)};if(Sr==="deleteRange"){if(Ar.type===4)return _r({numFailures:Fr,failures:Br,results:[],lastResult:void 0});Ar.type===3?Tr.push(Pr=kr.clear()):Tr.push(Pr=kr.delete(fr(Ar)))}else{const[qr,Hr]=Ir?Rr?[Er,vr]:[Er,null]:[vr,null];if(Ir)for(let Or=0;Or<Nr;++Or)Tr.push(Pr=Hr&&Hr[Or]!==void 0?kr[Sr](qr[Or],Hr[Or]):kr[Sr](qr[Or])),Pr.onerror=jr;else for(let Or=0;Or<Nr;++Or)Tr.push(Pr=kr[Sr](qr[Or])),Pr.onerror=jr}const Ur=qr=>{const Hr=qr.target.result;Tr.forEach((Or,Mr)=>Or.error!=null&&(Br[Mr]=Or.error)),_r({numFailures:Fr,failures:Br,results:Sr==="delete"?vr:Tr.map(Or=>Or.result),lastResult:Hr})};Pr.onerror=qr=>{jr(qr),Ur(qr)},Pr.onsuccess=Ur})},getMany:({trans:br,keys:Sr})=>new Promise((vr,Er)=>{vr=Ye$1(vr);const Ar=br.objectStore(wr),_r=Sr.length,Cr=new Array(_r);let kr,Rr=0,Ir=0;const Nr=Tr=>{const Br=Tr.target;Cr[Br._pos]=Br.result,++Ir===Rr&&vr(Cr)},Pr=tn(Er);for(let Tr=0;Tr<_r;++Tr)Sr[Tr]!=null&&(kr=Ar.get(Sr[Tr]),kr._pos=Tr,kr.onsuccess=Nr,kr.onerror=Pr,++Rr);Rr===0&&vr(Cr)}),get:({trans:br,key:Sr})=>new Promise((vr,Er)=>{vr=Ye$1(vr);const Ar=br.objectStore(wr).get(Sr);Ar.onsuccess=_r=>vr(_r.target.result),Ar.onerror=tn(Er)}),query:function(br){return Sr=>new Promise((vr,Er)=>{vr=Ye$1(vr);const{trans:Ar,values:_r,limit:Cr,query:kr}=Sr,Rr=Cr===1/0?void 0:Cr,{index:Ir,range:Nr}=kr,Pr=Ar.objectStore(wr),Tr=Ir.isPrimaryKey?Pr:Pr.index(Ir.name),Br=fr(Nr);if(Cr===0)return vr({result:[]});if(br){const Fr=_r?Tr.getAll(Br,Rr):Tr.getAllKeys(Br,Rr);Fr.onsuccess=jr=>vr({result:jr.target.result}),Fr.onerror=tn(Er)}else{let Fr=0;const jr=_r||!("openKeyCursor"in Tr)?Tr.openCursor(Br):Tr.openKeyCursor(Br),Ur=[];jr.onsuccess=qr=>{const Hr=jr.result;return Hr?(Ur.push(_r?Hr.value:Hr.primaryKey),++Fr===Cr?vr({result:Ur}):void Hr.continue()):vr({result:Ur})},jr.onerror=tn(Er)}})}(pr),openCursor:function({trans:br,values:Sr,query:vr,reverse:Er,unique:Ar}){return new Promise((_r,Cr)=>{_r=Ye$1(_r);const{index:kr,range:Rr}=vr,Ir=br.objectStore(wr),Nr=kr.isPrimaryKey?Ir:Ir.index(kr.name),Pr=Er?Ar?"prevunique":"prev":Ar?"nextunique":"next",Tr=Sr||!("openKeyCursor"in Nr)?Nr.openCursor(fr(Rr),Pr):Nr.openKeyCursor(fr(Rr),Pr);Tr.onerror=tn(Cr),Tr.onsuccess=Ye$1(Br=>{const Fr=Tr.result;if(!Fr)return void _r(null);Fr.___id=++pn,Fr.done=!1;const jr=Fr.continue.bind(Fr);let Ur=Fr.continuePrimaryKey;Ur&&(Ur=Ur.bind(Fr));const qr=Fr.advance.bind(Fr),Hr=()=>{throw new Error("Cursor not stopped")};Fr.trans=br,Fr.stop=Fr.continue=Fr.continuePrimaryKey=Fr.advance=()=>{throw new Error("Cursor not started")},Fr.fail=Ye$1(Cr),Fr.next=function(){let Or=1;return this.start(()=>Or--?this.continue():this.stop()).then(()=>this)},Fr.start=Or=>{const Mr=new Promise((Vr,Jr)=>{Vr=Ye$1(Vr),Tr.onerror=tn(Jr),Fr.fail=Jr,Fr.stop=es=>{Fr.stop=Fr.continue=Fr.continuePrimaryKey=Fr.advance=Hr,Vr(es)}}),Lr=()=>{if(Tr.result)try{Or()}catch(Vr){Fr.fail(Vr)}else Fr.done=!0,Fr.start=()=>{throw new Error("Cursor behind last entry")},Fr.stop()};return Tr.onsuccess=Ye$1(Vr=>{Tr.onsuccess=Lr,Lr()}),Fr.continue=jr,Fr.continuePrimaryKey=Ur,Fr.advance=qr,Lr(),Mr},_r(Fr)},Cr)})},count({query:br,trans:Sr}){const{index:vr,range:Er}=br;return new Promise((Ar,_r)=>{const Cr=Sr.objectStore(wr),kr=vr.isPrimaryKey?Cr:Cr.index(vr.name),Rr=fr(Er),Ir=Rr?kr.count(Rr):kr.count();Ir.onsuccess=Ye$1(Nr=>Ar(Nr.target.result)),Ir.onerror=tn(_r)})}}}(yr)),gr={};return mr.forEach(yr=>gr[yr.name]=yr),{stack:"dbcore",transaction:cr.transaction.bind(cr),table(yr){if(!gr[yr])throw new Error(`Table '${yr}' not found`);return gr[yr]},MIN_KEY:-1/0,MAX_KEY:hn(ar),schema:hr}}function vn({_novip:cr},ar){const dr=ar.db,fr=function(hr,pr,{IDBKeyRange:mr,indexedDB:gr},yr){return{dbcore:function(wr,br){return br.reduce((Sr,{create:vr})=>({...Sr,...vr(Sr)}),wr)}(mn(pr,mr,yr),hr.dbcore)}}(cr._middlewares,dr,cr._deps,ar);cr.core=fr.dbcore,cr.tables.forEach(hr=>{const pr=hr.name;cr.core.schema.tables.some(mr=>mr.name===pr)&&(hr.core=cr.core.table(pr),cr[pr]instanceof cr.Table&&(cr[pr].core=hr.core))})}function gn({_novip:cr},ar,dr,fr){dr.forEach(hr=>{const pr=fr[hr];ar.forEach(mr=>{const gr=d$4(mr,hr);(!gr||"value"in gr&&gr.value===void 0)&&(mr===cr.Transaction.prototype||mr instanceof cr.Transaction?l$4(mr,hr,{get(){return this.table(hr)},set(yr){u$1(this,hr,{value:yr,writable:!0,configurable:!0,enumerable:!0})}}):mr[hr]=new cr.Table(hr,pr))})})}function bn({_novip:cr},ar){ar.forEach(dr=>{for(let fr in dr)dr[fr]instanceof cr.Table&&delete dr[fr]})}function _n(cr,ar){return cr._cfg.version-ar._cfg.version}function wn(cr,ar,dr,fr){const hr=cr._dbSchema,pr=cr._createTransaction("readwrite",cr._storeNames,hr);pr.create(dr),pr._completion.catch(fr);const mr=pr._reject.bind(pr),gr=Oe$1.transless||Oe$1;Ze(()=>{Oe$1.trans=pr,Oe$1.transless=gr,ar===0?(t$4(hr).forEach(yr=>{kn(dr,yr,hr[yr].primKey,hr[yr].indexes)}),vn(cr,dr),je$1.follow(()=>cr.on.populate.fire(pr)).catch(mr)):function({_novip:yr},xr,wr,br){const Sr=[],vr=yr._versions;let Er=yr._dbSchema=Pn(yr,yr.idbdb,br),Ar=!1;const _r=vr.filter(kr=>kr._cfg.version>=xr);function Cr(){return Sr.length?je$1.resolve(Sr.shift()(wr.idbtrans)).then(Cr):je$1.resolve()}return _r.forEach(kr=>{Sr.push(()=>{const Rr=Er,Ir=kr._cfg.dbschema;Kn(yr,Rr,br),Kn(yr,Ir,br),Er=yr._dbSchema=Ir;const Nr=xn(Rr,Ir);Nr.add.forEach(Tr=>{kn(br,Tr[0],Tr[1].primKey,Tr[1].indexes)}),Nr.change.forEach(Tr=>{if(Tr.recreate)throw new X$1.Upgrade("Not yet support for changing primary key");{const Br=br.objectStore(Tr.name);Tr.add.forEach(Fr=>En(Br,Fr)),Tr.change.forEach(Fr=>{Br.deleteIndex(Fr.name),En(Br,Fr)}),Tr.del.forEach(Fr=>Br.deleteIndex(Fr))}});const Pr=kr._cfg.contentUpgrade;if(Pr&&kr._cfg.version>xr){vn(yr,br),wr._memoizedTables={},Ar=!0;let Tr=w$5(Ir);Nr.del.forEach(Ur=>{Tr[Ur]=Rr[Ur]}),bn(yr,[yr.Transaction.prototype]),gn(yr,[yr.Transaction.prototype],t$4(Tr),Tr),wr.schema=Tr;const Br=T$2(Pr);let Fr;Br&&et();const jr=je$1.follow(()=>{if(Fr=Pr(wr),Fr&&Br){var Ur=tt.bind(null,null);Fr.then(Ur,Ur)}});return Fr&&typeof Fr.then=="function"?je$1.resolve(Fr):jr.then(()=>Fr)}}),Sr.push(Rr=>{(!Ar||!xt)&&function(Ir,Nr){[].slice.call(Nr.db.objectStoreNames).forEach(Pr=>Ir[Pr]==null&&Nr.db.deleteObjectStore(Pr))}(kr._cfg.dbschema,Rr),bn(yr,[yr.Transaction.prototype]),gn(yr,[yr.Transaction.prototype],yr._storeNames,yr._dbSchema),wr.schema=yr._dbSchema})}),Cr().then(()=>{var kr,Rr;Rr=br,t$4(kr=Er).forEach(Ir=>{Rr.db.objectStoreNames.contains(Ir)||kn(Rr,Ir,kr[Ir].primKey,kr[Ir].indexes)})})}(cr,ar,pr,dr).catch(mr)})}function xn(cr,ar){const dr={del:[],add:[],change:[]};let fr;for(fr in cr)ar[fr]||dr.del.push(fr);for(fr in ar){const hr=cr[fr],pr=ar[fr];if(hr){const mr={name:fr,def:pr,recreate:!1,del:[],add:[],change:[]};if(""+(hr.primKey.keyPath||"")!=""+(pr.primKey.keyPath||"")||hr.primKey.auto!==pr.primKey.auto&&!wt)mr.recreate=!0,dr.change.push(mr);else{const gr=hr.idxByName,yr=pr.idxByName;let xr;for(xr in gr)yr[xr]||mr.del.push(xr);for(xr in yr){const wr=gr[xr],br=yr[xr];wr?wr.src!==br.src&&mr.change.push(br):mr.add.push(br)}(mr.del.length>0||mr.add.length>0||mr.change.length>0)&&dr.change.push(mr)}}else dr.add.push([fr,pr])}return dr}function kn(cr,ar,dr,fr){const hr=cr.db.createObjectStore(ar,dr.keyPath?{keyPath:dr.keyPath,autoIncrement:dr.auto}:{autoIncrement:dr.auto});return fr.forEach(pr=>En(hr,pr)),hr}function En(cr,ar){cr.createIndex(ar.name,ar.keyPath,{unique:ar.unique,multiEntry:ar.multi})}function Pn(cr,ar,dr){const fr={};return p$3(ar.objectStoreNames,0).forEach(hr=>{const pr=dr.objectStore(hr);let mr=pr.keyPath;const gr=un(ln(mr),mr||"",!1,!1,!!pr.autoIncrement,mr&&typeof mr!="string",!0),yr=[];for(let wr=0;wr<pr.indexNames.length;++wr){const br=pr.index(pr.indexNames[wr]);mr=br.keyPath;var xr=un(br.name,mr,!!br.unique,!!br.multiEntry,!1,mr&&typeof mr!="string",!1);yr.push(xr)}fr[hr]=cn(hr,gr,yr)}),fr}function Kn({_novip:cr},ar,dr){const fr=dr.db.objectStoreNames;for(let hr=0;hr<fr.length;++hr){const pr=fr[hr],mr=dr.objectStore(pr);cr._hasGetAll="getAll"in mr;for(let gr=0;gr<mr.indexNames.length;++gr){const yr=mr.indexNames[gr],xr=mr.index(yr).keyPath,wr=typeof xr=="string"?xr:"["+p$3(xr).join("+")+"]";if(ar[pr]){const br=ar[pr].idxByName[wr];br&&(br.name=yr,delete ar[pr].idxByName[wr],ar[pr].idxByName[yr]=br)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&e$3.WorkerGlobalScope&&e$3 instanceof e$3.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(cr._hasGetAll=!1)}class On{_parseStoresSpec(ar,dr){t$4(ar).forEach(fr=>{if(ar[fr]!==null){var hr=ar[fr].split(",").map((mr,gr)=>{const yr=(mr=mr.trim()).replace(/([&*]|\+\+)/g,""),xr=/^\[/.test(yr)?yr.match(/^\[(.*)\]$/)[1].split("+"):yr;return un(yr,xr||null,/\&/.test(mr),/\*/.test(mr),/\+\+/.test(mr),n$5(xr),gr===0)}),pr=hr.shift();if(pr.multi)throw new X$1.Schema("Primary key cannot be multi-valued");hr.forEach(mr=>{if(mr.auto)throw new X$1.Schema("Only primary key can be marked as autoIncrement (++)");if(!mr.keyPath)throw new X$1.Schema("Index must have a name and cannot be an empty string")}),dr[fr]=cn(fr,pr,hr)}})}stores(ar){const dr=this.db;this._cfg.storesSource=this._cfg.storesSource?r$4(this._cfg.storesSource,ar):ar;const fr=dr._versions,hr={};let pr={};return fr.forEach(mr=>{r$4(hr,mr._cfg.storesSource),pr=mr._cfg.dbschema={},mr._parseStoresSpec(hr,pr)}),dr._dbSchema=pr,bn(dr,[dr._allTables,dr,dr.Transaction.prototype]),gn(dr,[dr._allTables,dr,dr.Transaction.prototype,this._cfg.tables],t$4(pr),pr),dr._storeNames=t$4(pr),this}upgrade(ar){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||ee$1,ar),this}}function Sn(cr,ar){let dr=cr._dbNamesDB;return dr||(dr=cr._dbNamesDB=new Xn(Pt,{addons:[],indexedDB:cr,IDBKeyRange:ar}),dr.version(1).stores({dbnames:"name"})),dr.table("dbnames")}function An(cr){return cr&&typeof cr.databases=="function"}function Cn(cr){return Ze(function(){return Oe$1.letThrough=!0,cr()})}function jn(){var cr;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ar){var dr=function(){return indexedDB.databases().finally(ar)};cr=setInterval(dr,100),dr()}).finally(function(){return clearInterval(cr)}):Promise.resolve()}function Dn(cr){const ar=cr._state,{indexedDB:dr}=cr._deps;if(ar.isBeingOpened||cr.idbdb)return ar.dbReadyPromise.then(()=>ar.dbOpenError?ft(ar.dbOpenError):cr);R$1&&(ar.openCanceller._stackHolder=q$3()),ar.isBeingOpened=!0,ar.dbOpenError=null,ar.openComplete=!1;const fr=ar.openCanceller;function hr(){if(ar.openCanceller!==fr)throw new X$1.DatabaseClosed("db.open() was cancelled")}let pr=ar.dbReadyResolve,mr=null,gr=!1;return je$1.race([fr,(typeof navigator>"u"?je$1.resolve():jn()).then(()=>new je$1((yr,xr)=>{if(hr(),!dr)throw new X$1.MissingAPI;const wr=cr.name,br=ar.autoSchema?dr.open(wr):dr.open(wr,Math.round(10*cr.verno));if(!br)throw new X$1.MissingAPI;br.onerror=tn(xr),br.onblocked=Ye$1(cr._fireOnBlocked),br.onupgradeneeded=Ye$1(Sr=>{if(mr=br.transaction,ar.autoSchema&&!cr._options.allowEmptyDB){br.onerror=nn,mr.abort(),br.result.close();const Er=dr.deleteDatabase(wr);Er.onsuccess=Er.onerror=Ye$1(()=>{xr(new X$1.NoSuchDatabase(`Database ${wr} doesnt exist`))})}else{mr.onerror=tn(xr);var vr=Sr.oldVersion>Math.pow(2,62)?0:Sr.oldVersion;gr=vr<1,cr._novip.idbdb=br.result,wn(cr,vr/10,mr,xr)}},xr),br.onsuccess=Ye$1(()=>{mr=null;const Sr=cr._novip.idbdb=br.result,vr=p$3(Sr.objectStoreNames);if(vr.length>0)try{const Ar=Sr.transaction((Er=vr).length===1?Er[0]:Er,"readonly");ar.autoSchema?function({_novip:_r},Cr,kr){_r.verno=Cr.version/10;const Rr=_r._dbSchema=Pn(0,Cr,kr);_r._storeNames=p$3(Cr.objectStoreNames,0),gn(_r,[_r._allTables],t$4(Rr),Rr)}(cr,Sr,Ar):(Kn(cr,cr._dbSchema,Ar),function(_r,Cr){const kr=xn(Pn(0,_r.idbdb,Cr),_r._dbSchema);return!(kr.add.length||kr.change.some(Rr=>Rr.add.length||Rr.change.length))}(cr,Ar)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),vn(cr,Ar)}catch{}var Er;_t.push(cr),Sr.onversionchange=Ye$1(Ar=>{ar.vcFired=!0,cr.on("versionchange").fire(Ar)}),Sr.onclose=Ye$1(Ar=>{cr.on("close").fire(Ar)}),gr&&function({indexedDB:Ar,IDBKeyRange:_r},Cr){!An(Ar)&&Cr!==Pt&&Sn(Ar,_r).put({name:Cr}).catch(ee$1)}(cr._deps,wr),yr()},xr)}))]).then(()=>(hr(),ar.onReadyBeingFired=[],je$1.resolve(Cn(()=>cr.on.ready.fire(cr.vip))).then(function yr(){if(ar.onReadyBeingFired.length>0){let xr=ar.onReadyBeingFired.reduce(ue,ee$1);return ar.onReadyBeingFired=[],je$1.resolve(Cn(()=>xr(cr.vip))).then(yr)}}))).finally(()=>{ar.onReadyBeingFired=null,ar.isBeingOpened=!1}).then(()=>cr).catch(yr=>{ar.dbOpenError=yr;try{mr&&mr.abort()}catch{}return fr===ar.openCanceller&&cr._close(),ft(yr)}).finally(()=>{ar.openComplete=!0,pr()})}function In(cr){var ar=pr=>cr.next(pr),dr=hr(ar),fr=hr(pr=>cr.throw(pr));function hr(pr){return mr=>{var gr=pr(mr),yr=gr.value;return gr.done?yr:yr&&typeof yr.then=="function"?yr.then(dr,fr):n$5(yr)?Promise.all(yr).then(dr,fr):dr(yr)}}return hr(ar)()}function Bn(cr,ar,dr){var fr=arguments.length;if(fr<2)throw new X$1.InvalidArgument("Too few arguments");for(var hr=new Array(fr-1);--fr;)hr[fr-1]=arguments[fr];return dr=hr.pop(),[cr,k$3(hr),dr]}function Tn(cr,ar,dr,fr,hr){return je$1.resolve().then(()=>{const pr=Oe$1.transless||Oe$1,mr=cr._createTransaction(ar,dr,cr._dbSchema,fr),gr={trans:mr,transless:pr};if(fr)mr.idbtrans=fr.idbtrans;else try{mr.create(),cr._state.PR1398_maxLoop=3}catch(br){return br.name===H$1.InvalidState&&cr.isOpen()&&--cr._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),cr._close(),cr.open().then(()=>Tn(cr,ar,dr,null,hr))):ft(br)}const yr=T$2(hr);let xr;yr&&et();const wr=je$1.follow(()=>{if(xr=hr.call(mr,mr),xr)if(yr){var br=tt.bind(null,null);xr.then(br,br)}else typeof xr.next=="function"&&typeof xr.throw=="function"&&(xr=In(xr))},gr);return(xr&&typeof xr.then=="function"?je$1.resolve(xr).then(br=>mr.active?br:ft(new X$1.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):wr.then(()=>xr)).then(br=>(fr&&mr._resolve(),mr._completion.then(()=>br))).catch(br=>(mr._reject(br),ft(br)))})}function Rn(cr,ar,dr){const fr=n$5(cr)?cr.slice():[cr];for(let hr=0;hr<dr;++hr)fr.push(ar);return fr}const Fn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(cr){return{...cr,table(ar){const dr=cr.table(ar),{schema:fr}=dr,hr={},pr=[];function mr(wr,br,Sr){const vr=yn(wr),Er=hr[vr]=hr[vr]||[],Ar=wr==null?0:typeof wr=="string"?1:wr.length,_r=br>0,Cr={...Sr,isVirtual:_r,keyTail:br,keyLength:Ar,extractKey:dn(wr),unique:!_r&&Sr.unique};return Er.push(Cr),Cr.isPrimaryKey||pr.push(Cr),Ar>1&&mr(Ar===2?wr[0]:wr.slice(0,Ar-1),br+1,Sr),Er.sort((kr,Rr)=>kr.keyTail-Rr.keyTail),Cr}const gr=mr(fr.primaryKey.keyPath,0,fr.primaryKey);hr[":id"]=[gr];for(const wr of fr.indexes)mr(wr.keyPath,0,wr);function yr(wr){const br=wr.query.index;return br.isVirtual?{...wr,query:{index:br,range:(Sr=wr.query.range,vr=br.keyTail,{type:Sr.type===1?2:Sr.type,lower:Rn(Sr.lower,Sr.lowerOpen?cr.MAX_KEY:cr.MIN_KEY,vr),lowerOpen:!0,upper:Rn(Sr.upper,Sr.upperOpen?cr.MIN_KEY:cr.MAX_KEY,vr),upperOpen:!0})}}:wr;var Sr,vr}return{...dr,schema:{...fr,primaryKey:gr,indexes:pr,getIndexByKeyPath:function(wr){const br=hr[yn(wr)];return br&&br[0]}},count:wr=>dr.count(yr(wr)),query:wr=>dr.query(yr(wr)),openCursor(wr){const{keyTail:br,isVirtual:Sr,keyLength:vr}=wr.query.index;return Sr?dr.openCursor(yr(wr)).then(Er=>Er&&function(Ar){return Object.create(Ar,{continue:{value:function(Cr){Cr!=null?Ar.continue(Rn(Cr,wr.reverse?cr.MAX_KEY:cr.MIN_KEY,br)):wr.unique?Ar.continue(Ar.key.slice(0,vr).concat(wr.reverse?cr.MIN_KEY:cr.MAX_KEY,br)):Ar.continue()}},continuePrimaryKey:{value(Cr,kr){Ar.continuePrimaryKey(Rn(Cr,cr.MAX_KEY,br),kr)}},primaryKey:{get:()=>Ar.primaryKey},key:{get(){const Cr=Ar.key;return vr===1?Cr[0]:Cr.slice(0,vr)}},value:{get:()=>Ar.value}})}(Er)):dr.openCursor(wr)}}}}}};function Mn(cr,ar,dr,fr){return dr=dr||{},fr=fr||"",t$4(cr).forEach(hr=>{if(o$1(ar,hr)){var pr=cr[hr],mr=ar[hr];if(typeof pr=="object"&&typeof mr=="object"&&pr&&mr){const gr=C$2(pr);gr!==C$2(mr)?dr[fr+hr]=ar[hr]:gr==="Object"?Mn(pr,mr,dr,fr+hr+"."):pr!==mr&&(dr[fr+hr]=ar[hr])}else pr!==mr&&(dr[fr+hr]=ar[hr])}else dr[fr+hr]=void 0}),t$4(ar).forEach(hr=>{o$1(cr,hr)||(dr[fr+hr]=ar[hr])}),dr}const Nn={stack:"dbcore",name:"HooksMiddleware",level:2,create:cr=>({...cr,table(ar){const dr=cr.table(ar),{primaryKey:fr}=dr.schema;return{...dr,mutate(pr){const mr=Oe$1.trans,{deleting:gr,creating:yr,updating:xr}=mr.table(ar).hook;switch(pr.type){case"add":if(yr.fire===ee$1)break;return mr._promise("readwrite",()=>wr(pr),!0);case"put":if(yr.fire===ee$1&&xr.fire===ee$1)break;return mr._promise("readwrite",()=>wr(pr),!0);case"delete":if(gr.fire===ee$1)break;return mr._promise("readwrite",()=>wr(pr),!0);case"deleteRange":if(gr.fire===ee$1)break;return mr._promise("readwrite",()=>function(Sr){return br(Sr.trans,Sr.range,1e4)}(pr),!0)}return dr.mutate(pr);function wr(Sr){const vr=Oe$1.trans,Er=Sr.keys||function(Ar,_r){return _r.type==="delete"?_r.keys:_r.keys||_r.values.map(Ar.extractKey)}(fr,Sr);if(!Er)throw new Error("Keys missing");return(Sr=Sr.type==="add"||Sr.type==="put"?{...Sr,keys:Er}:{...Sr}).type!=="delete"&&(Sr.values=[...Sr.values]),Sr.keys&&(Sr.keys=[...Sr.keys]),function(Ar,_r,Cr){return _r.type==="add"?Promise.resolve([]):Ar.getMany({trans:_r.trans,keys:Cr,cache:"immutable"})}(dr,Sr,Er).then(Ar=>{const _r=Er.map((Cr,kr)=>{const Rr=Ar[kr],Ir={onerror:null,onsuccess:null};if(Sr.type==="delete")gr.fire.call(Ir,Cr,Rr,vr);else if(Sr.type==="add"||Rr===void 0){const Nr=yr.fire.call(Ir,Cr,Sr.values[kr],vr);Cr==null&&Nr!=null&&(Cr=Nr,Sr.keys[kr]=Cr,fr.outbound||_$2(Sr.values[kr],fr.keyPath,Cr))}else{const Nr=Mn(Rr,Sr.values[kr]),Pr=xr.fire.call(Ir,Nr,Cr,Rr,vr);if(Pr){const Tr=Sr.values[kr];Object.keys(Pr).forEach(Br=>{o$1(Tr,Br)?Tr[Br]=Pr[Br]:_$2(Tr,Br,Pr[Br])})}}return Ir});return dr.mutate(Sr).then(({failures:Cr,results:kr,numFailures:Rr,lastResult:Ir})=>{for(let Nr=0;Nr<Er.length;++Nr){const Pr=kr?kr[Nr]:Er[Nr],Tr=_r[Nr];Pr==null?Tr.onerror&&Tr.onerror(Cr[Nr]):Tr.onsuccess&&Tr.onsuccess(Sr.type==="put"&&Ar[Nr]?Sr.values[Nr]:Pr)}return{failures:Cr,results:kr,numFailures:Rr,lastResult:Ir}}).catch(Cr=>(_r.forEach(kr=>kr.onerror&&kr.onerror(Cr)),Promise.reject(Cr)))})}function br(Sr,vr,Er){return dr.query({trans:Sr,values:!1,query:{index:fr,range:vr},limit:Er}).then(({result:Ar})=>wr({type:"delete",keys:Ar,trans:Sr}).then(_r=>_r.numFailures>0?Promise.reject(_r.failures[0]):Ar.length<Er?{failures:[],numFailures:0,lastResult:void 0}:br(Sr,{...vr,lower:Ar[Ar.length-1],lowerOpen:!0},Er)))}}}}})};function qn(cr,ar,dr){try{if(!ar||ar.keys.length<cr.length)return null;const fr=[];for(let hr=0,pr=0;hr<ar.keys.length&&pr<cr.length;++hr)$t(ar.keys[hr],cr[pr])===0&&(fr.push(dr?O$1(ar.values[hr]):ar.values[hr]),++pr);return fr.length===cr.length?fr:null}catch{return null}}const $n={stack:"dbcore",level:-1,create:cr=>({table:ar=>{const dr=cr.table(ar);return{...dr,getMany:fr=>{if(!fr.cache)return dr.getMany(fr);const hr=qn(fr.keys,fr.trans._cache,fr.cache==="clone");return hr?je$1.resolve(hr):dr.getMany(fr).then(pr=>(fr.trans._cache={keys:fr.keys,values:fr.cache==="clone"?O$1(pr):pr},pr))},mutate:fr=>(fr.type!=="add"&&(fr.trans._cache=null),dr.mutate(fr))}}})};function Un(cr){return!("from"in cr)}const Ln=function(cr,ar){if(!this){const dr=new Ln;return cr&&"d"in cr&&r$4(dr,cr),dr}r$4(this,arguments.length?{d:1,from:cr,to:arguments.length>1?ar:cr}:{d:0})};function Vn(cr,ar,dr){const fr=$t(ar,dr);if(isNaN(fr))return;if(fr>0)throw RangeError();if(Un(cr))return r$4(cr,{from:ar,to:dr,d:1});const hr=cr.l,pr=cr.r;if($t(dr,cr.from)<0)return hr?Vn(hr,ar,dr):cr.l={from:ar,to:dr,d:1,l:null,r:null},Gn(cr);if($t(ar,cr.to)>0)return pr?Vn(pr,ar,dr):cr.r={from:ar,to:dr,d:1,l:null,r:null},Gn(cr);$t(ar,cr.from)<0&&(cr.from=ar,cr.l=null,cr.d=pr?pr.d+1:1),$t(dr,cr.to)>0&&(cr.to=dr,cr.r=null,cr.d=cr.l?cr.l.d+1:1);const mr=!cr.r;hr&&!cr.l&&Wn(cr,hr),pr&&mr&&Wn(cr,pr)}function Wn(cr,ar){Un(ar)||function dr(fr,{from:hr,to:pr,l:mr,r:gr}){Vn(fr,hr,pr),mr&&dr(fr,mr),gr&&dr(fr,gr)}(cr,ar)}function Yn(cr,ar){const dr=zn(ar);let fr=dr.next();if(fr.done)return!1;let hr=fr.value;const pr=zn(cr);let mr=pr.next(hr.from),gr=mr.value;for(;!fr.done&&!mr.done;){if($t(gr.from,hr.to)<=0&&$t(gr.to,hr.from)>=0)return!0;$t(hr.from,gr.from)<0?hr=(fr=dr.next(gr.from)).value:gr=(mr=pr.next(hr.from)).value}return!1}function zn(cr){let ar=Un(cr)?null:{s:0,n:cr};return{next(dr){const fr=arguments.length>0;for(;ar;)switch(ar.s){case 0:if(ar.s=1,fr)for(;ar.n.l&&$t(dr,ar.n.from)<0;)ar={up:ar,n:ar.n.l,s:1};else for(;ar.n.l;)ar={up:ar,n:ar.n.l,s:1};case 1:if(ar.s=2,!fr||$t(dr,ar.n.to)<=0)return{value:ar.n,done:!1};case 2:if(ar.n.r){ar.s=3,ar={up:ar,n:ar.n.r,s:0};continue}case 3:ar=ar.up}return{done:!0}}}}function Gn(cr){var ar,dr;const fr=(((ar=cr.r)===null||ar===void 0?void 0:ar.d)||0)-(((dr=cr.l)===null||dr===void 0?void 0:dr.d)||0),hr=fr>1?"r":fr<-1?"l":"";if(hr){const pr=hr==="r"?"l":"r",mr={...cr},gr=cr[hr];cr.from=gr.from,cr.to=gr.to,cr[hr]=gr[hr],mr[hr]=gr[pr],cr[pr]=mr,mr.d=Hn(mr)}cr.d=Hn(cr)}function Hn({r:cr,l:ar}){return(cr?ar?Math.max(cr.d,ar.d):cr.d:ar?ar.d:0)+1}a$1(Ln.prototype,{add(cr){return Wn(this,cr),this},addKey(cr){return Vn(this,cr,cr),this},addKeys(cr){return cr.forEach(ar=>Vn(this,ar,ar)),this},[j$3](){return zn(this)}});const Qn={stack:"dbcore",level:0,create:cr=>{const ar=cr.schema.name,dr=new Ln(cr.MIN_KEY,cr.MAX_KEY);return{...cr,table:fr=>{const hr=cr.table(fr),{schema:pr}=hr,{primaryKey:mr}=pr,{extractKey:gr,outbound:yr}=mr,xr={...hr,mutate:Sr=>{const vr=Sr.trans,Er=vr.mutatedParts||(vr.mutatedParts={}),Ar=Pr=>{const Tr=`idb://${ar}/${fr}/${Pr}`;return Er[Tr]||(Er[Tr]=new Ln)},_r=Ar(""),Cr=Ar(":dels"),{type:kr}=Sr;let[Rr,Ir]=Sr.type==="deleteRange"?[Sr.range]:Sr.type==="delete"?[Sr.keys]:Sr.values.length<50?[[],Sr.values]:[];const Nr=Sr.trans._cache;return hr.mutate(Sr).then(Pr=>{if(n$5(Rr)){kr!=="delete"&&(Rr=Pr.results),_r.addKeys(Rr);const Tr=qn(Rr,Nr);Tr||kr==="add"||Cr.addKeys(Rr),(Tr||Ir)&&function(Br,Fr,jr,Ur){function qr(Hr){const Or=Br(Hr.name||"");function Mr(Vr){return Vr!=null?Hr.extractKey(Vr):null}const Lr=Vr=>Hr.multiEntry&&n$5(Vr)?Vr.forEach(Jr=>Or.addKey(Jr)):Or.addKey(Vr);(jr||Ur).forEach((Vr,Jr)=>{const es=jr&&Mr(jr[Jr]),ns=Ur&&Mr(Ur[Jr]);$t(es,ns)!==0&&(es!=null&&Lr(es),ns!=null&&Lr(ns))})}Fr.indexes.forEach(qr)}(Ar,pr,Tr,Ir)}else if(Rr){const Tr={from:Rr.lower,to:Rr.upper};Cr.add(Tr),_r.add(Tr)}else _r.add(dr),Cr.add(dr),pr.indexes.forEach(Tr=>Ar(Tr.name).add(dr));return Pr})}},wr=({query:{index:Sr,range:vr}})=>{var Er,Ar;return[Sr,new Ln((Er=vr.lower)!==null&&Er!==void 0?Er:cr.MIN_KEY,(Ar=vr.upper)!==null&&Ar!==void 0?Ar:cr.MAX_KEY)]},br={get:Sr=>[mr,new Ln(Sr.key)],getMany:Sr=>[mr,new Ln().addKeys(Sr.keys)],count:wr,query:wr,openCursor:wr};return t$4(br).forEach(Sr=>{xr[Sr]=function(vr){const{subscr:Er}=Oe$1;if(Er){const Ar=Ir=>{const Nr=`idb://${ar}/${fr}/${Ir}`;return Er[Nr]||(Er[Nr]=new Ln)},_r=Ar(""),Cr=Ar(":dels"),[kr,Rr]=br[Sr](vr);if(Ar(kr.name||"").add(Rr),!kr.isPrimaryKey){if(Sr!=="count"){const Ir=Sr==="query"&&yr&&vr.values&&hr.query({...vr,values:!1});return hr[Sr].apply(this,arguments).then(Nr=>{if(Sr==="query"){if(yr&&vr.values)return Ir.then(({result:Tr})=>(_r.addKeys(Tr),Nr));const Pr=vr.values?Nr.result.map(gr):Nr.result;vr.values?_r.addKeys(Pr):Cr.addKeys(Pr)}else if(Sr==="openCursor"){const Pr=Nr,Tr=vr.values;return Pr&&Object.create(Pr,{key:{get:()=>(Cr.addKey(Pr.primaryKey),Pr.key)},primaryKey:{get(){const Br=Pr.primaryKey;return Cr.addKey(Br),Br}},value:{get:()=>(Tr&&_r.addKey(Pr.primaryKey),Pr.value)}})}return Nr})}Cr.add(dr)}}return hr[Sr].apply(this,arguments)}}),xr}}}};class Xn{constructor(ar,dr){this._middlewares={},this.verno=0;const fr=Xn.dependencies;this._options=dr={addons:Xn.addons,autoOpen:!0,indexedDB:fr.indexedDB,IDBKeyRange:fr.IDBKeyRange,...dr},this._deps={indexedDB:dr.indexedDB,IDBKeyRange:dr.IDBKeyRange};const{addons:hr}=dr;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const pr={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee$1,dbReadyPromise:null,cancelOpen:ee$1,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var mr;pr.dbReadyPromise=new je$1(gr=>{pr.dbReadyResolve=gr}),pr.openCanceller=new je$1((gr,yr)=>{pr.cancelOpen=yr}),this._state=pr,this.name=ar,this.on=Dt(this,"populate","blocked","versionchange","close",{ready:[ue,ee$1]}),this.on.ready.subscribe=y$6(this.on.ready.subscribe,gr=>(yr,xr)=>{Xn.vip(()=>{const wr=this._state;if(wr.openComplete)wr.dbOpenError||je$1.resolve().then(yr),xr&&gr(yr);else if(wr.onReadyBeingFired)wr.onReadyBeingFired.push(yr),xr&&gr(yr);else{gr(yr);const br=this;xr||gr(function Sr(){br.on.ready.unsubscribe(yr),br.on.ready.unsubscribe(Sr)})}})}),this.Collection=(mr=this,It(Vt.prototype,function(gr,yr){this.db=mr;let xr=At,wr=null;if(yr)try{xr=yr()}catch(Er){wr=Er}const br=gr._ctx,Sr=br.table,vr=Sr.hook.reading.fire;this._ctx={table:Sr,index:br.index,isPrimKey:!br.index||Sr.schema.primKey.keyPath&&br.index===Sr.schema.primKey.name,range:xr,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:wr,or:br.or,valueMapper:vr!==te$1?vr:null}})),this.Table=function(gr){return It(jt.prototype,function(yr,xr,wr){this.db=gr,this._tx=wr,this.name=yr,this.schema=xr,this.hook=gr._allTables[yr]?gr._allTables[yr].hook:Dt(null,{creating:[se$1,ee$1],reading:[ne$1,te$1],updating:[oe$1,ee$1],deleting:[ie$1,ee$1]})})}(this),this.Transaction=function(gr){return It(an.prototype,function(yr,xr,wr,br,Sr){this.db=gr,this.mode=yr,this.storeNames=xr,this.schema=wr,this.chromeTransactionDurability=br,this.idbtrans=null,this.on=Dt(this,"complete","error","abort"),this.parent=Sr||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new je$1((vr,Er)=>{this._resolve=vr,this._reject=Er}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},vr=>{var Er=this.active;return this.active=!1,this.on.error.fire(vr),this.parent?this.parent._reject(vr):Er&&this.idbtrans&&this.idbtrans.abort(),ft(vr)})})}(this),this.Version=function(gr){return It(On.prototype,function(yr){this.db=gr,this._cfg={version:yr,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(gr){return It(en.prototype,function(yr,xr,wr){this.db=gr,this._ctx={table:yr,index:xr===":id"?null:xr,or:wr};const br=gr._deps.indexedDB;if(!br)throw new X$1.MissingAPI;this._cmp=this._ascending=br.cmp.bind(br),this._descending=(Sr,vr)=>br.cmp(vr,Sr),this._max=(Sr,vr)=>br.cmp(Sr,vr)>0?Sr:vr,this._min=(Sr,vr)=>br.cmp(Sr,vr)<0?Sr:vr,this._IDBKeyRange=gr._deps.IDBKeyRange})}(this),this.on("versionchange",gr=>{gr.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",gr=>{!gr.newVersion||gr.newVersion<gr.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${gr.oldVersion/10}`)}),this._maxKey=hn(dr.IDBKeyRange),this._createTransaction=(gr,yr,xr,wr)=>new this.Transaction(gr,yr,xr,this._options.chromeTransactionDurability,wr),this._fireOnBlocked=gr=>{this.on("blocked").fire(gr),_t.filter(yr=>yr.name===this.name&&yr!==this&&!yr._state.vcFired).map(yr=>yr.on("versionchange").fire(gr))},this.use(Fn),this.use(Nn),this.use(Qn),this.use($n),this.vip=Object.create(this,{_vip:{value:!0}}),hr.forEach(gr=>gr(this))}version(ar){if(isNaN(ar)||ar<.1)throw new X$1.Type("Given version is not a positive number");if(ar=Math.round(10*ar)/10,this.idbdb||this._state.isBeingOpened)throw new X$1.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,ar);const dr=this._versions;var fr=dr.filter(hr=>hr._cfg.version===ar)[0];return fr||(fr=new this.Version(ar),dr.push(fr),dr.sort(_n),fr.stores({}),this._state.autoSchema=!1,fr)}_whenReady(ar){return this.idbdb&&(this._state.openComplete||Oe$1.letThrough||this._vip)?ar():new je$1((dr,fr)=>{if(this._state.openComplete)return fr(new X$1.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void fr(new X$1.DatabaseClosed);this.open().catch(ee$1)}this._state.dbReadyPromise.then(dr,fr)}).then(ar)}use({stack:ar,create:dr,level:fr,name:hr}){hr&&this.unuse({stack:ar,name:hr});const pr=this._middlewares[ar]||(this._middlewares[ar]=[]);return pr.push({stack:ar,create:dr,level:fr??10,name:hr}),pr.sort((mr,gr)=>mr.level-gr.level),this}unuse({stack:ar,name:dr,create:fr}){return ar&&this._middlewares[ar]&&(this._middlewares[ar]=this._middlewares[ar].filter(hr=>fr?hr.create!==fr:!!dr&&hr.name!==dr)),this}open(){return Dn(this)}_close(){const ar=this._state,dr=_t.indexOf(this);if(dr>=0&&_t.splice(dr,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}ar.dbReadyPromise=new je$1(fr=>{ar.dbReadyResolve=fr}),ar.openCanceller=new je$1((fr,hr)=>{ar.cancelOpen=hr})}close(){this._close();const ar=this._state;this._options.autoOpen=!1,ar.dbOpenError=new X$1.DatabaseClosed,ar.isBeingOpened&&ar.cancelOpen(ar.dbOpenError)}delete(){const ar=arguments.length>0,dr=this._state;return new je$1((fr,hr)=>{const pr=()=>{this.close();var mr=this._deps.indexedDB.deleteDatabase(this.name);mr.onsuccess=Ye$1(()=>{(function({indexedDB:gr,IDBKeyRange:yr},xr){!An(gr)&&xr!==Pt&&Sn(gr,yr).delete(xr).catch(ee$1)})(this._deps,this.name),fr()}),mr.onerror=tn(hr),mr.onblocked=this._fireOnBlocked};if(ar)throw new X$1.InvalidArgument("Arguments not allowed in db.delete()");dr.isBeingOpened?dr.dbReadyPromise.then(pr):pr()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const ar=this._state.dbOpenError;return ar&&ar.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return t$4(this._allTables).map(ar=>this._allTables[ar])}transaction(){const ar=Bn.apply(this,arguments);return this._transaction.apply(this,ar)}_transaction(ar,dr,fr){let hr=Oe$1.trans;hr&&hr.db===this&&ar.indexOf("!")===-1||(hr=null);const pr=ar.indexOf("?")!==-1;let mr,gr;ar=ar.replace("!","").replace("?","");try{if(gr=dr.map(xr=>{var wr=xr instanceof this.Table?xr.name:xr;if(typeof wr!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return wr}),ar=="r"||ar===Kt)mr=Kt;else{if(ar!="rw"&&ar!=Ot)throw new X$1.InvalidArgument("Invalid transaction mode: "+ar);mr=Ot}if(hr){if(hr.mode===Kt&&mr===Ot){if(!pr)throw new X$1.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");hr=null}hr&&gr.forEach(xr=>{if(hr&&hr.storeNames.indexOf(xr)===-1){if(!pr)throw new X$1.SubTransaction("Table "+xr+" not included in parent transaction.");hr=null}}),pr&&hr&&!hr.active&&(hr=null)}}catch(xr){return hr?hr._promise(null,(wr,br)=>{br(xr)}):ft(xr)}const yr=Tn.bind(null,this,mr,gr,hr,fr);return hr?hr._promise(mr,yr,"lock"):Oe$1.trans?at(Oe$1.transless,()=>this._whenReady(yr)):this._whenReady(yr)}table(ar){if(!o$1(this._allTables,ar))throw new X$1.InvalidTable(`Table ${ar} does not exist`);return this._allTables[ar]}}const Jn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Zn{constructor(ar){this._subscribe=ar}subscribe(ar,dr,fr){return this._subscribe(ar&&typeof ar!="function"?ar:{next:ar,error:dr,complete:fr})}[Jn](){return this}}function er(cr,ar){return t$4(ar).forEach(dr=>{Wn(cr[dr]||(cr[dr]=new Ln),ar[dr])}),cr}function tr(cr){let ar,dr=!1;const fr=new Zn(hr=>{const pr=T$2(cr);let mr=!1,gr={},yr={};const xr={get closed(){return mr},unsubscribe:()=>{mr=!0,on.storagemutated.unsubscribe(vr)}};hr.start&&hr.start(xr);let wr=!1,br=!1;function Sr(){return t$4(yr).some(Ar=>gr[Ar]&&Yn(gr[Ar],yr[Ar]))}const vr=Ar=>{er(gr,Ar),Sr()&&Er()},Er=()=>{if(wr||mr)return;gr={};const Ar={},_r=function(Cr){pr&&et();const kr=()=>Ze(cr,{subscr:Cr,trans:null}),Rr=Oe$1.trans?at(Oe$1.transless,kr):kr();return pr&&Rr.then(tt,tt),Rr}(Ar);br||(on(rn,vr),br=!0),wr=!0,Promise.resolve(_r).then(Cr=>{dr=!0,ar=Cr,wr=!1,mr||(Sr()?Er():(gr={},yr=Ar,hr.next&&hr.next(Cr)))},Cr=>{wr=!1,dr=!1,hr.error&&hr.error(Cr),xr.unsubscribe()})};return Er(),xr});return fr.hasValue=()=>dr,fr.getValue=()=>ar,fr}let nr;try{nr={indexedDB:e$3.indexedDB||e$3.mozIndexedDB||e$3.webkitIndexedDB||e$3.msIndexedDB,IDBKeyRange:e$3.IDBKeyRange||e$3.webkitIDBKeyRange}}catch{nr={indexedDB:null,IDBKeyRange:null}}const rr$1=Xn;function sr(cr){let ar=ir;try{ir=!0,on.storagemutated.fire(cr)}finally{ir=ar}}a$1(rr$1,{...Z$1,delete:cr=>new rr$1(cr,{addons:[]}).delete(),exists:cr=>new rr$1(cr,{addons:[]}).open().then(ar=>(ar.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(cr){try{return function({indexedDB:ar,IDBKeyRange:dr}){return An(ar)?Promise.resolve(ar.databases()).then(fr=>fr.map(hr=>hr.name).filter(hr=>hr!==Pt)):Sn(ar,dr).toCollection().primaryKeys()}(rr$1.dependencies).then(cr)}catch{return ft(new X$1.MissingAPI)}},defineClass:()=>function(cr){r$4(this,cr)},ignoreTransaction:cr=>Oe$1.trans?at(Oe$1.transless,cr):cr(),vip:Cn,async:function(cr){return function(){try{var ar=In(cr.apply(this,arguments));return ar&&typeof ar.then=="function"?ar:je$1.resolve(ar)}catch(dr){return ft(dr)}}},spawn:function(cr,ar,dr){try{var fr=In(cr.apply(dr,ar||[]));return fr&&typeof fr.then=="function"?fr:je$1.resolve(fr)}catch(hr){return ft(hr)}},currentTransaction:{get:()=>Oe$1.trans||null},waitFor:function(cr,ar){const dr=je$1.resolve(typeof cr=="function"?rr$1.ignoreTransaction(cr):cr).timeout(ar||6e4);return Oe$1.trans?Oe$1.trans.waitFor(dr):dr},Promise:je$1,debug:{get:()=>R$1,set:cr=>{F$2(cr,cr==="dexie"?()=>!0:Et)}},derive:c$3,extend:r$4,props:a$1,override:y$6,Events:Dt,on,liveQuery:tr,extendObservabilitySet:er,getByKeyPath:b$5,setByKeyPath:_$2,delByKeyPath:function(cr,ar){typeof ar=="string"?_$2(cr,ar,void 0):"length"in ar&&[].map.call(ar,function(dr){_$2(cr,dr,void 0)})},shallowClone:w$5,deepClone:O$1,getObjectDiff:Mn,cmp:$t,asap:v$4,minKey:vt,addons:[],connections:_t,errnames:H$1,dependencies:nr,semVer:yt,version:yt.split(".").map(cr=>parseInt(cr)).reduce((cr,ar,dr)=>cr+ar/Math.pow(10,2*dr))}),rr$1.maxKey=hn(rr$1.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(on(rn,cr=>{if(!ir){let ar;wt?(ar=document.createEvent("CustomEvent"),ar.initCustomEvent(sn,!0,!0,cr)):ar=new CustomEvent(sn,{detail:cr}),ir=!0,dispatchEvent(ar),ir=!1}}),addEventListener(sn,({detail:cr})=>{ir||sr(cr)}));let ir=!1;if(typeof BroadcastChannel<"u"){const cr=new BroadcastChannel(sn);typeof cr.unref=="function"&&cr.unref(),on(rn,ar=>{ir||cr.postMessage(ar)}),cr.onmessage=ar=>{ar.data&&sr(ar.data)}}else if(typeof self<"u"&&typeof navigator<"u"){on(rn,ar=>{try{ir||(typeof localStorage<"u"&&localStorage.setItem(sn,JSON.stringify({trig:Math.random(),changedParts:ar})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(dr=>dr.postMessage({type:sn,changedParts:ar})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",ar=>{if(ar.key===sn){const dr=JSON.parse(ar.newValue);dr&&sr(dr.changedParts)}});const cr=self.document&&navigator.serviceWorker;cr&&cr.addEventListener("message",function({data:ar}){ar&&ar.type===sn&&sr(ar.changedParts)})}je$1.rejectionMapper=function(cr,ar){if(!cr||cr instanceof W$1||cr instanceof TypeError||cr instanceof SyntaxError||!cr.name||!J$1[cr.name])return cr;var dr=new J$1[cr.name](ar||cr.message,cr);return"stack"in cr&&l$4(dr,"stack",{get:function(){return this.inner.stack}}),dr},F$2(R$1,Et);class TransactionDB extends Xn{transactions;constructor(ar,dr){super(`transactions-${ar}-${dr}`),this.version(1).stores({transactions:"key, entity, systemCall, gasEstimate, manualGasEstimate, status, hash, error, submittedBlock, completedBlock, submittedTimestamp, completedTimestamp"})}}var n$4=/\[\]$/;function b$4(cr){return n$4.test(cr)}function r$3(cr){return cr.replace(n$4,"")}var i$3=["uint8","uint16","uint24","uint32","uint40","uint48","uint56","uint64","uint72","uint80","uint88","uint96","uint104","uint112","uint120","uint128","uint136","uint144","uint152","uint160","uint168","uint176","uint184","uint192","uint200","uint208","uint216","uint224","uint232","uint240","uint248","uint256","int8","int16","int24","int32","int40","int48","int56","int64","int72","int80","int88","int96","int104","int112","int120","int128","int136","int144","int152","int160","int168","int176","int184","int192","int200","int208","int216","int224","int232","int240","int248","int256","bytes1","bytes2","bytes3","bytes4","bytes5","bytes6","bytes7","bytes8","bytes9","bytes10","bytes11","bytes12","bytes13","bytes14","bytes15","bytes16","bytes17","bytes18","bytes19","bytes20","bytes21","bytes22","bytes23","bytes24","bytes25","bytes26","bytes27","bytes28","bytes29","bytes30","bytes31","bytes32","bool","address","uint8[]","uint16[]","uint24[]","uint32[]","uint40[]","uint48[]","uint56[]","uint64[]","uint72[]","uint80[]","uint88[]","uint96[]","uint104[]","uint112[]","uint120[]","uint128[]","uint136[]","uint144[]","uint152[]","uint160[]","uint168[]","uint176[]","uint184[]","uint192[]","uint200[]","uint208[]","uint216[]","uint224[]","uint232[]","uint240[]","uint248[]","uint256[]","int8[]","int16[]","int24[]","int32[]","int40[]","int48[]","int56[]","int64[]","int72[]","int80[]","int88[]","int96[]","int104[]","int112[]","int120[]","int128[]","int136[]","int144[]","int152[]","int160[]","int168[]","int176[]","int184[]","int192[]","int200[]","int208[]","int216[]","int224[]","int232[]","int240[]","int248[]","int256[]","bytes1[]","bytes2[]","bytes3[]","bytes4[]","bytes5[]","bytes6[]","bytes7[]","bytes8[]","bytes9[]","bytes10[]","bytes11[]","bytes12[]","bytes13[]","bytes14[]","bytes15[]","bytes16[]","bytes17[]","bytes18[]","bytes19[]","bytes20[]","bytes21[]","bytes22[]","bytes23[]","bytes24[]","bytes25[]","bytes26[]","bytes27[]","bytes28[]","bytes29[]","bytes30[]","bytes31[]","bytes32[]","bool[]","address[]","bytes","string"],e$2=i$3.slice(0,98),y$5=i$3.slice(98),s$4={"uint8[]":[],"uint16[]":[],"uint24[]":[],"uint32[]":[],"uint40[]":[],"uint48[]":[],"uint56[]":[],"uint64[]":[],"uint72[]":[],"uint80[]":[],"uint88[]":[],"uint96[]":[],"uint104[]":[],"uint112[]":[],"uint120[]":[],"uint128[]":[],"uint136[]":[],"uint144[]":[],"uint152[]":[],"uint160[]":[],"uint168[]":[],"uint176[]":[],"uint184[]":[],"uint192[]":[],"uint200[]":[],"uint208[]":[],"uint216[]":[],"uint224[]":[],"uint232[]":[],"uint240[]":[],"uint248[]":[],"uint256[]":[],"int8[]":[],"int16[]":[],"int24[]":[],"int32[]":[],"int40[]":[],"int48[]":[],"int56[]":[],"int64[]":[],"int72[]":[],"int80[]":[],"int88[]":[],"int96[]":[],"int104[]":[],"int112[]":[],"int120[]":[],"int128[]":[],"int136[]":[],"int144[]":[],"int152[]":[],"int160[]":[],"int168[]":[],"int176[]":[],"int184[]":[],"int192[]":[],"int200[]":[],"int208[]":[],"int216[]":[],"int224[]":[],"int232[]":[],"int240[]":[],"int248[]":[],"int256[]":[],"bytes1[]":[],"bytes2[]":[],"bytes3[]":[],"bytes4[]":[],"bytes5[]":[],"bytes6[]":[],"bytes7[]":[],"bytes8[]":[],"bytes9[]":[],"bytes10[]":[],"bytes11[]":[],"bytes12[]":[],"bytes13[]":[],"bytes14[]":[],"bytes15[]":[],"bytes16[]":[],"bytes17[]":[],"bytes18[]":[],"bytes19[]":[],"bytes20[]":[],"bytes21[]":[],"bytes22[]":[],"bytes23[]":[],"bytes24[]":[],"bytes25[]":[],"bytes26[]":[],"bytes27[]":[],"bytes28[]":[],"bytes29[]":[],"bytes30[]":[],"bytes31[]":[],"bytes32[]":[],"bool[]":[],"address[]":[],bytes:"0x",string:""};function x$3(cr){return y$5.includes(cr)}var a={uint8:0,uint16:0,uint24:0,uint32:0,uint40:0,uint48:0,uint56:0n,uint64:0n,uint72:0n,uint80:0n,uint88:0n,uint96:0n,uint104:0n,uint112:0n,uint120:0n,uint128:0n,uint136:0n,uint144:0n,uint152:0n,uint160:0n,uint168:0n,uint176:0n,uint184:0n,uint192:0n,uint200:0n,uint208:0n,uint216:0n,uint224:0n,uint232:0n,uint240:0n,uint248:0n,uint256:0n,int8:0,int16:0,int24:0,int32:0,int40:0,int48:0,int56:0n,int64:0n,int72:0n,int80:0n,int88:0n,int96:0n,int104:0n,int112:0n,int120:0n,int128:0n,int136:0n,int144:0n,int152:0n,int160:0n,int168:0n,int176:0n,int184:0n,int192:0n,int200:0n,int208:0n,int216:0n,int224:0n,int232:0n,int240:0n,int248:0n,int256:0n,bytes1:"0x00",bytes2:"0x0000",bytes3:"0x000000",bytes4:"0x00000000",bytes5:"0x0000000000",bytes6:"0x000000000000",bytes7:"0x00000000000000",bytes8:"0x0000000000000000",bytes9:"0x000000000000000000",bytes10:"0x00000000000000000000",bytes11:"0x0000000000000000000000",bytes12:"0x000000000000000000000000",bytes13:"0x00000000000000000000000000",bytes14:"0x0000000000000000000000000000",bytes15:"0x000000000000000000000000000000",bytes16:"0x00000000000000000000000000000000",bytes17:"0x0000000000000000000000000000000000",bytes18:"0x000000000000000000000000000000000000",bytes19:"0x00000000000000000000000000000000000000",bytes20:"0x0000000000000000000000000000000000000000",bytes21:"0x000000000000000000000000000000000000000000",bytes22:"0x00000000000000000000000000000000000000000000",bytes23:"0x0000000000000000000000000000000000000000000000",bytes24:"0x000000000000000000000000000000000000000000000000",bytes25:"0x00000000000000000000000000000000000000000000000000",bytes26:"0x0000000000000000000000000000000000000000000000000000",bytes27:"0x000000000000000000000000000000000000000000000000000000",bytes28:"0x00000000000000000000000000000000000000000000000000000000",bytes29:"0x0000000000000000000000000000000000000000000000000000000000",bytes30:"0x000000000000000000000000000000000000000000000000000000000000",bytes31:"0x00000000000000000000000000000000000000000000000000000000000000",bytes32:"0x0000000000000000000000000000000000000000000000000000000000000000",bool:!1,address:"0x0000000000000000000000000000000000000000"},g$5={uint8:1,uint16:2,uint24:3,uint32:4,uint40:5,uint48:6,uint56:7,uint64:8,uint72:9,uint80:10,uint88:11,uint96:12,uint104:13,uint112:14,uint120:15,uint128:16,uint136:17,uint144:18,uint152:19,uint160:20,uint168:21,uint176:22,uint184:23,uint192:24,uint200:25,uint208:26,uint216:27,uint224:28,uint232:29,uint240:30,uint248:31,uint256:32,int8:1,int16:2,int24:3,int32:4,int40:5,int48:6,int56:7,int64:8,int72:9,int80:10,int88:11,int96:12,int104:13,int112:14,int120:15,int128:16,int136:17,int144:18,int152:19,int160:20,int168:21,int176:22,int184:23,int192:24,int200:25,int208:26,int216:27,int224:28,int232:29,int240:30,int248:31,int256:32,bytes1:1,bytes2:2,bytes3:3,bytes4:4,bytes5:5,bytes6:6,bytes7:7,bytes8:8,bytes9:9,bytes10:10,bytes11:11,bytes12:12,bytes13:13,bytes14:14,bytes15:15,bytes16:16,bytes17:17,bytes18:18,bytes19:19,bytes20:20,bytes21:21,bytes22:22,bytes23:23,bytes24:24,bytes25:25,bytes26:26,bytes27:27,bytes28:28,bytes29:29,bytes30:30,bytes31:31,bytes32:32,bool:1,address:20};function f$4(cr){return e$2.includes(cr)}var r$2=class extends Error{name="MUDError"},l$3=class extends r$2{name="InvalidHexValueError";constructor(ar){super(`Hex value "${ar}" is an odd length (${ar.length-2}). It must be an even length.`)}},g$4=class extends r$2{name="InvalidHexLengthForPackedCounterError";constructor(ar){super(`Hex value "${ar}" has length of ${ar.length-2}, but expected length of 64 for a packed counter.`)}},A$2=class extends r$2{name="InvalidHexLengthForStaticFieldError";constructor(ar,dr){super(`Hex value "${dr}" has length of ${dr.length-2}, but expected length of ${g$5[ar]*2} for ${ar} type.`)}},v$3=class extends r$2{name="InvalidHexLengthForArrayFieldError";constructor(ar,dr){super(`Hex value "${dr}" has length of ${dr.length-2}, but expected a multiple of ${g$5[ar]*2} for ${ar}[] type.`)}},F$1=class extends r$2{name="PackedCounterLengthMismatchError";constructor(ar,dr,fr){super(`PackedCounter "${ar}" total bytes length (${dr}) did not match the summed length of all field byte lengths (${fr}).`)}};function y$4(cr,ar){if(ar.length>3&&ar.length%2!==0)throw new l$3(ar);if((ar.length-2)/2!==g$5[cr])throw new A$2(cr,ar);switch(cr){case"uint8":case"uint16":case"uint24":case"uint32":case"uint40":case"uint48":case"uint56":case"uint64":case"uint72":case"uint80":case"uint88":case"uint96":case"uint104":case"uint112":case"uint120":case"uint128":case"uint136":case"uint144":case"uint152":case"uint160":case"uint168":case"uint176":case"uint184":case"uint192":case"uint200":case"uint208":case"uint216":case"uint224":case"uint232":case"uint240":case"uint248":case"uint256":case"int8":case"int16":case"int24":case"int32":case"int40":case"int48":case"int56":case"int64":case"int72":case"int80":case"int88":case"int96":case"int104":case"int112":case"int120":case"int128":case"int136":case"int144":case"int152":case"int160":case"int168":case"int176":case"int184":case"int192":case"int200":case"int208":case"int216":case"int224":case"int232":case"int240":case"int248":case"int256":{let dr=hexToBigInt(ar,{signed:cr.startsWith("int")}),fr=typeof a[cr];if(fr==="number")return Number(dr);if(fr==="bigint")return dr;throw new Error(`Unexpected default value type (${fr}) for ABI type (${cr})`)}case"bytes1":case"bytes2":case"bytes3":case"bytes4":case"bytes5":case"bytes6":case"bytes7":case"bytes8":case"bytes9":case"bytes10":case"bytes11":case"bytes12":case"bytes13":case"bytes14":case"bytes15":case"bytes16":case"bytes17":case"bytes18":case"bytes19":case"bytes20":case"bytes21":case"bytes22":case"bytes23":case"bytes24":case"bytes25":case"bytes26":case"bytes27":case"bytes28":case"bytes29":case"bytes30":case"bytes31":case"bytes32":return ar;case"bool":return hexToBool(ar);case"address":return getAddress$2(ar)}return a$2(cr,`Unsupported static ABI type: ${cr}`)}function f$3(cr,ar){if(cr==="bytes")return ar;if(cr==="string")return hexToString(ar);if(ar.length>3&&ar.length%2!==0)throw new l$3(ar);let dr=(ar.length-2)/2;switch(cr){case"uint8[]":case"uint16[]":case"uint24[]":case"uint32[]":case"uint40[]":case"uint48[]":case"uint56[]":case"uint64[]":case"uint72[]":case"uint80[]":case"uint88[]":case"uint96[]":case"uint104[]":case"uint112[]":case"uint120[]":case"uint128[]":case"uint136[]":case"uint144[]":case"uint152[]":case"uint160[]":case"uint168[]":case"uint176[]":case"uint184[]":case"uint192[]":case"uint200[]":case"uint208[]":case"uint216[]":case"uint224[]":case"uint232[]":case"uint240[]":case"uint248[]":case"uint256[]":case"int8[]":case"int16[]":case"int24[]":case"int32[]":case"int40[]":case"int48[]":case"int56[]":case"int64[]":case"int72[]":case"int80[]":case"int88[]":case"int96[]":case"int104[]":case"int112[]":case"int120[]":case"int128[]":case"int136[]":case"int144[]":case"int152[]":case"int160[]":case"int168[]":case"int176[]":case"int184[]":case"int192[]":case"int200[]":case"int208[]":case"int216[]":case"int224[]":case"int232[]":case"int240[]":case"int248[]":case"int256[]":case"bytes1[]":case"bytes2[]":case"bytes3[]":case"bytes4[]":case"bytes5[]":case"bytes6[]":case"bytes7[]":case"bytes8[]":case"bytes9[]":case"bytes10[]":case"bytes11[]":case"bytes12[]":case"bytes13[]":case"bytes14[]":case"bytes15[]":case"bytes16[]":case"bytes17[]":case"bytes18[]":case"bytes19[]":case"bytes20[]":case"bytes21[]":case"bytes22[]":case"bytes23[]":case"bytes24[]":case"bytes25[]":case"bytes26[]":case"bytes27[]":case"bytes28[]":case"bytes29[]":case"bytes30[]":case"bytes31[]":case"bytes32[]":case"bool[]":case"address[]":{let fr=r$3(cr),hr=g$5[fr];if(dr%hr!==0)throw new v$3(fr,ar);return new Array(dr/hr).fill(void 0).map((pr,mr)=>{let gr=sliceHex(ar,mr*hr,(mr+1)*hr);return y$4(fr,gr)})}}return a$2(cr,`Unsupported dynamic ABI type: ${cr}`)}function w$4(cr){if(cr.length!==66)throw new g$4(cr);let ar=y$4("uint56",N$6(cr,32-7,32)),dr=f$3("uint40[]",N$6(cr,0,32-7)),fr=Object.freeze([...dr].reverse()),hr=BigInt(fr.reduce((pr,mr)=>pr+mr,0));if(hr!==ar)throw new F$1(cr,ar,hr);return{totalByteLength:ar,fieldByteLengths:fr}}function T$1(cr){return cr.reduce((ar,dr)=>ar+g$5[dr],0)}function j$2(cr,ar){let dr=[],fr=0;cr.staticFields.forEach(mr=>{let gr=g$5[mr],yr=y$4(mr,N$6(ar,fr,fr+gr));fr+=gr,dr.push(yr)});let hr=T$1(cr.staticFields),pr=fr;if(pr!==hr&&console.warn("Decoded static data length does not match value schema's expected static data length. Data may get corrupted. Is `getStaticByteLength` outdated?",{expectedLength:hr,actualLength:pr,bytesOffset:fr}),cr.dynamicFields.length>0){let mr=w$4(N$6(ar,fr,fr+32));fr+=32,cr.dynamicFields.forEach((yr,xr)=>{let wr=mr.fieldByteLengths[xr];if(wr>0){let br=f$3(yr,N$6(ar,fr,fr+wr));fr+=wr,dr.push(br)}else dr.push(s$4[yr])});let gr=fr-32-pr;BigInt(gr)!==mr.totalByteLength&&console.warn("Decoded dynamic data length does not match data layout's expected data length. Data may get corrupted. Did the data layout change?",{expectedLength:mr.totalByteLength,actualLength:gr,bytesOffset:fr})}return dr}function E$2(cr,ar){let dr=Object.values(cr).filter(f$4),fr=Object.values(cr).filter(x$3),hr=j$2({staticFields:dr,dynamicFields:fr},ar);return Object.fromEntries(Object.keys(cr).map((pr,mr)=>[pr,hr[mr]]))}function p$2(cr,ar){if(b$4(cr)&&Array.isArray(ar)){let dr=r$3(cr);return ar.length===0?"0x":encodePacked(ar.map(()=>dr),ar)}return encodePacked([cr],[ar])}function K$1(cr){let ar=cr.map(size$1).reverse(),dr=ar.reduce((fr,hr)=>fr+BigInt(hr),0n);return padHex(concatHex([...ar.map(fr=>p$2("uint40",fr)),p$2("uint56",dr)]),{size:32,dir:"left"})}function z$2(cr,ar){let dr=Object.entries(cr),fr=dr.filter(([,yr])=>f$4(yr)),hr=dr.filter(([,yr])=>x$3(yr)),pr=fr.map(([yr,xr])=>p$2(xr,ar[yr])),mr=hr.map(([yr,xr])=>p$2(xr,ar[yr])),gr=K$1(mr);return{staticData:concatHex(pr),encodedLengths:gr,dynamicData:concatHex(mr)}}function matchIdFromEntity(cr){if(!isHex(cr))throw new Error("match entity is not hex");return hexToNumber$1(N$6(cr,0,4))}function matchIdToEntity(cr){return padHex(numberToHex(cr,{size:4}),{size:32,dir:"right"})}const BYTES32_ZERO="0x0000000000000000000000000000000000000000000000000000000000000000",SPAWN_SETTLEMENT=stringToHex("SpawnSettlement",{size:32}),EMOJI="",SEASON_NAME="Season 0.2",UNLIMITED_DELEGATION=E$4({type:"system",namespace:"",name:"unlimited"}),SYSTEMBOUND_DELEGATION=E$4({type:"system",namespace:"",name:"systembound"}),CORE_SYSTEM_ID=E$4({type:"system",namespace:"",name:"core"}),PLAYER_REGISTER_SYSTEM_ID=E$4({type:"system",namespace:"",name:"PlayerRegisterSystem"}),ALLOW_LIST_SYSTEM_ID=E$4({type:"system",namespace:"",name:"AllowListSystem"}),SEASON_PASS_ONLY_SYSTEM_ID=E$4({type:"system",namespace:"MatchAccess",name:"SeasonPassOnly"}),NAME_SYSTEM_ID=E$4({type:"system",namespace:"",name:"NameSystem"}),LOBBY_SYSTEM_ID=E$4({type:"system",namespace:"",name:"LobbySystem"}),MATCH_SYSTEM_ID=E$4({type:"system",namespace:"",name:"MatchSystem"}),LEVEL_UPLOAD_SYSTEM_ID=E$4({type:"system",namespace:"",name:"LevelUploadSystem"}),BUILD_SYSTEM_ID=E$4({type:"system",namespace:"",name:"BuildSystem"}),MOVE_SYSTEM_ID=E$4({type:"system",namespace:"",name:"MoveSystem"}),COPY_MAP_SYSTEM_ID=E$4({type:"system",namespace:"",name:"CopyMapSystem"});function decodeMatchEntity(cr){return cr==null?{matchEntity:BYTES32_ZERO,entity:BYTES32_ZERO}:isHex(cr)&&size$1(cr)===32?{matchEntity:BYTES32_ZERO,entity:cr}:ft$3({matchEntity:"bytes32",entity:"bytes32"},cr)}function encodeMatchEntity(cr,ar){if(!isHex(cr))throw new Error("matchEntity is not hex");if(!isHex(ar))throw new Error("entity is not hex");if(size$1(cr)!=32)throw new Error(`Expected 32 bytes matchEntity but got ${size$1(cr)} bytes`);if(size$1(ar)!=32)throw new Error(`Expected 32 bytes entity but got ${size$1(ar)} bytes`);return w$9({matchEntity:"bytes32",entity:"bytes32"},{matchEntity:cr,entity:ar})}class LuxonError extends Error{}class InvalidDateTimeError extends LuxonError{constructor(ar){super(`Invalid DateTime: ${ar.toMessage()}`)}}class InvalidIntervalError extends LuxonError{constructor(ar){super(`Invalid Interval: ${ar.toMessage()}`)}}class InvalidDurationError extends LuxonError{constructor(ar){super(`Invalid Duration: ${ar.toMessage()}`)}}class ConflictingSpecificationError extends LuxonError{}class InvalidUnitError extends LuxonError{constructor(ar){super(`Invalid unit ${ar}`)}}class InvalidArgumentError extends LuxonError{}class ZoneIsAbstractError extends LuxonError{constructor(){super("Zone is an abstract class")}}const n$3="numeric",s$3="short",l$2="long",DATE_SHORT={year:n$3,month:n$3,day:n$3},DATE_MED={year:n$3,month:s$3,day:n$3},DATE_MED_WITH_WEEKDAY={year:n$3,month:s$3,day:n$3,weekday:s$3},DATE_FULL={year:n$3,month:l$2,day:n$3},DATE_HUGE={year:n$3,month:l$2,day:n$3,weekday:l$2},TIME_SIMPLE={hour:n$3,minute:n$3},TIME_WITH_SECONDS={hour:n$3,minute:n$3,second:n$3},TIME_WITH_SHORT_OFFSET={hour:n$3,minute:n$3,second:n$3,timeZoneName:s$3},TIME_WITH_LONG_OFFSET={hour:n$3,minute:n$3,second:n$3,timeZoneName:l$2},TIME_24_SIMPLE={hour:n$3,minute:n$3,hourCycle:"h23"},TIME_24_WITH_SECONDS={hour:n$3,minute:n$3,second:n$3,hourCycle:"h23"},TIME_24_WITH_SHORT_OFFSET={hour:n$3,minute:n$3,second:n$3,hourCycle:"h23",timeZoneName:s$3},TIME_24_WITH_LONG_OFFSET={hour:n$3,minute:n$3,second:n$3,hourCycle:"h23",timeZoneName:l$2},DATETIME_SHORT={year:n$3,month:n$3,day:n$3,hour:n$3,minute:n$3},DATETIME_SHORT_WITH_SECONDS={year:n$3,month:n$3,day:n$3,hour:n$3,minute:n$3,second:n$3},DATETIME_MED={year:n$3,month:s$3,day:n$3,hour:n$3,minute:n$3},DATETIME_MED_WITH_SECONDS={year:n$3,month:s$3,day:n$3,hour:n$3,minute:n$3,second:n$3},DATETIME_MED_WITH_WEEKDAY={year:n$3,month:s$3,day:n$3,weekday:s$3,hour:n$3,minute:n$3},DATETIME_FULL={year:n$3,month:l$2,day:n$3,hour:n$3,minute:n$3,timeZoneName:s$3},DATETIME_FULL_WITH_SECONDS={year:n$3,month:l$2,day:n$3,hour:n$3,minute:n$3,second:n$3,timeZoneName:s$3},DATETIME_HUGE={year:n$3,month:l$2,day:n$3,weekday:l$2,hour:n$3,minute:n$3,timeZoneName:l$2},DATETIME_HUGE_WITH_SECONDS={year:n$3,month:l$2,day:n$3,weekday:l$2,hour:n$3,minute:n$3,second:n$3,timeZoneName:l$2};class Zone{get type(){throw new ZoneIsAbstractError}get name(){throw new ZoneIsAbstractError}get ianaName(){return this.name}get isUniversal(){throw new ZoneIsAbstractError}offsetName(ar,dr){throw new ZoneIsAbstractError}formatOffset(ar,dr){throw new ZoneIsAbstractError}offset(ar){throw new ZoneIsAbstractError}equals(ar){throw new ZoneIsAbstractError}get isValid(){throw new ZoneIsAbstractError}}let singleton$1=null;class SystemZone extends Zone{static get instance(){return singleton$1===null&&(singleton$1=new SystemZone),singleton$1}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(ar,{format:dr,locale:fr}){return parseZoneInfo(ar,dr,fr)}formatOffset(ar,dr){return formatOffset(this.offset(ar),dr)}offset(ar){return-new Date(ar).getTimezoneOffset()}equals(ar){return ar.type==="system"}get isValid(){return!0}}let dtfCache={};function makeDTF(cr){return dtfCache[cr]||(dtfCache[cr]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:cr,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),dtfCache[cr]}const typeToPos={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function hackyOffset(cr,ar){const dr=cr.format(ar).replace(/\u200E/g,""),fr=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(dr),[,hr,pr,mr,gr,yr,xr,wr]=fr;return[mr,hr,pr,gr,yr,xr,wr]}function partsOffset(cr,ar){const dr=cr.formatToParts(ar),fr=[];for(let hr=0;hr<dr.length;hr++){const{type:pr,value:mr}=dr[hr],gr=typeToPos[pr];pr==="era"?fr[gr]=mr:isUndefined(gr)||(fr[gr]=parseInt(mr,10))}return fr}let ianaZoneCache={};class IANAZone extends Zone{static create(ar){return ianaZoneCache[ar]||(ianaZoneCache[ar]=new IANAZone(ar)),ianaZoneCache[ar]}static resetCache(){ianaZoneCache={},dtfCache={}}static isValidSpecifier(ar){return this.isValidZone(ar)}static isValidZone(ar){if(!ar)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:ar}).format(),!0}catch{return!1}}constructor(ar){super(),this.zoneName=ar,this.valid=IANAZone.isValidZone(ar)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(ar,{format:dr,locale:fr}){return parseZoneInfo(ar,dr,fr,this.name)}formatOffset(ar,dr){return formatOffset(this.offset(ar),dr)}offset(ar){const dr=new Date(ar);if(isNaN(dr))return NaN;const fr=makeDTF(this.name);let[hr,pr,mr,gr,yr,xr,wr]=fr.formatToParts?partsOffset(fr,dr):hackyOffset(fr,dr);gr==="BC"&&(hr=-Math.abs(hr)+1);const Sr=objToLocalTS({year:hr,month:pr,day:mr,hour:yr===24?0:yr,minute:xr,second:wr,millisecond:0});let vr=+dr;const Er=vr%1e3;return vr-=Er>=0?Er:1e3+Er,(Sr-vr)/(60*1e3)}equals(ar){return ar.type==="iana"&&ar.name===this.name}get isValid(){return this.valid}}let intlLFCache={};function getCachedLF(cr,ar={}){const dr=JSON.stringify([cr,ar]);let fr=intlLFCache[dr];return fr||(fr=new Intl.ListFormat(cr,ar),intlLFCache[dr]=fr),fr}let intlDTCache={};function getCachedDTF(cr,ar={}){const dr=JSON.stringify([cr,ar]);let fr=intlDTCache[dr];return fr||(fr=new Intl.DateTimeFormat(cr,ar),intlDTCache[dr]=fr),fr}let intlNumCache={};function getCachedINF(cr,ar={}){const dr=JSON.stringify([cr,ar]);let fr=intlNumCache[dr];return fr||(fr=new Intl.NumberFormat(cr,ar),intlNumCache[dr]=fr),fr}let intlRelCache={};function getCachedRTF(cr,ar={}){const{base:dr,...fr}=ar,hr=JSON.stringify([cr,fr]);let pr=intlRelCache[hr];return pr||(pr=new Intl.RelativeTimeFormat(cr,ar),intlRelCache[hr]=pr),pr}let sysLocaleCache=null;function systemLocale(){return sysLocaleCache||(sysLocaleCache=new Intl.DateTimeFormat().resolvedOptions().locale,sysLocaleCache)}function parseLocaleString(cr){const ar=cr.indexOf("-x-");ar!==-1&&(cr=cr.substring(0,ar));const dr=cr.indexOf("-u-");if(dr===-1)return[cr];{let fr,hr;try{fr=getCachedDTF(cr).resolvedOptions(),hr=cr}catch{const yr=cr.substring(0,dr);fr=getCachedDTF(yr).resolvedOptions(),hr=yr}const{numberingSystem:pr,calendar:mr}=fr;return[hr,pr,mr]}}function intlConfigString(cr,ar,dr){return(dr||ar)&&(cr.includes("-u-")||(cr+="-u"),dr&&(cr+=`-ca-${dr}`),ar&&(cr+=`-nu-${ar}`)),cr}function mapMonths(cr){const ar=[];for(let dr=1;dr<=12;dr++){const fr=DateTime$1.utc(2016,dr,1);ar.push(cr(fr))}return ar}function mapWeekdays(cr){const ar=[];for(let dr=1;dr<=7;dr++){const fr=DateTime$1.utc(2016,11,13+dr);ar.push(cr(fr))}return ar}function listStuff(cr,ar,dr,fr,hr){const pr=cr.listingMode(dr);return pr==="error"?null:pr==="en"?fr(ar):hr(ar)}function supportsFastNumbers(cr){return cr.numberingSystem&&cr.numberingSystem!=="latn"?!1:cr.numberingSystem==="latn"||!cr.locale||cr.locale.startsWith("en")||new Intl.DateTimeFormat(cr.intl).resolvedOptions().numberingSystem==="latn"}class PolyNumberFormatter{constructor(ar,dr,fr){this.padTo=fr.padTo||0,this.floor=fr.floor||!1;const{padTo:hr,floor:pr,...mr}=fr;if(!dr||Object.keys(mr).length>0){const gr={useGrouping:!1,...fr};fr.padTo>0&&(gr.minimumIntegerDigits=fr.padTo),this.inf=getCachedINF(ar,gr)}}format(ar){if(this.inf){const dr=this.floor?Math.floor(ar):ar;return this.inf.format(dr)}else{const dr=this.floor?Math.floor(ar):roundTo$1(ar,3);return padStart(dr,this.padTo)}}}class PolyDateFormatter{constructor(ar,dr,fr){this.opts=fr,this.originalZone=void 0;let hr;if(this.opts.timeZone)this.dt=ar;else if(ar.zone.type==="fixed"){const mr=-1*(ar.offset/60),gr=mr>=0?`Etc/GMT+${mr}`:`Etc/GMT${mr}`;ar.offset!==0&&IANAZone.create(gr).valid?(hr=gr,this.dt=ar):(hr="UTC",this.dt=ar.offset===0?ar:ar.setZone("UTC").plus({minutes:ar.offset}),this.originalZone=ar.zone)}else ar.zone.type==="system"?this.dt=ar:ar.zone.type==="iana"?(this.dt=ar,hr=ar.zone.name):(hr="UTC",this.dt=ar.setZone("UTC").plus({minutes:ar.offset}),this.originalZone=ar.zone);const pr={...this.opts};pr.timeZone=pr.timeZone||hr,this.dtf=getCachedDTF(dr,pr)}format(){return this.originalZone?this.formatToParts().map(({value:ar})=>ar).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const ar=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?ar.map(dr=>{if(dr.type==="timeZoneName"){const fr=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...dr,value:fr}}else return dr}):ar}resolvedOptions(){return this.dtf.resolvedOptions()}}class PolyRelFormatter{constructor(ar,dr,fr){this.opts={style:"long",...fr},!dr&&hasRelative()&&(this.rtf=getCachedRTF(ar,fr))}format(ar,dr){return this.rtf?this.rtf.format(ar,dr):formatRelativeTime(dr,ar,this.opts.numeric,this.opts.style!=="long")}formatToParts(ar,dr){return this.rtf?this.rtf.formatToParts(ar,dr):[]}}class Locale{static fromOpts(ar){return Locale.create(ar.locale,ar.numberingSystem,ar.outputCalendar,ar.defaultToEN)}static create(ar,dr,fr,hr=!1){const pr=ar||Settings.defaultLocale,mr=pr||(hr?"en-US":systemLocale()),gr=dr||Settings.defaultNumberingSystem,yr=fr||Settings.defaultOutputCalendar;return new Locale(mr,gr,yr,pr)}static resetCache(){sysLocaleCache=null,intlDTCache={},intlNumCache={},intlRelCache={}}static fromObject({locale:ar,numberingSystem:dr,outputCalendar:fr}={}){return Locale.create(ar,dr,fr)}constructor(ar,dr,fr,hr){const[pr,mr,gr]=parseLocaleString(ar);this.locale=pr,this.numberingSystem=dr||mr||null,this.outputCalendar=fr||gr||null,this.intl=intlConfigString(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=hr,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=supportsFastNumbers(this)),this.fastNumbersCached}listingMode(){const ar=this.isEnglish(),dr=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return ar&&dr?"en":"intl"}clone(ar){return!ar||Object.getOwnPropertyNames(ar).length===0?this:Locale.create(ar.locale||this.specifiedLocale,ar.numberingSystem||this.numberingSystem,ar.outputCalendar||this.outputCalendar,ar.defaultToEN||!1)}redefaultToEN(ar={}){return this.clone({...ar,defaultToEN:!0})}redefaultToSystem(ar={}){return this.clone({...ar,defaultToEN:!1})}months(ar,dr=!1,fr=!0){return listStuff(this,ar,fr,months,()=>{const hr=dr?{month:ar,day:"numeric"}:{month:ar},pr=dr?"format":"standalone";return this.monthsCache[pr][ar]||(this.monthsCache[pr][ar]=mapMonths(mr=>this.extract(mr,hr,"month"))),this.monthsCache[pr][ar]})}weekdays(ar,dr=!1,fr=!0){return listStuff(this,ar,fr,weekdays,()=>{const hr=dr?{weekday:ar,year:"numeric",month:"long",day:"numeric"}:{weekday:ar},pr=dr?"format":"standalone";return this.weekdaysCache[pr][ar]||(this.weekdaysCache[pr][ar]=mapWeekdays(mr=>this.extract(mr,hr,"weekday"))),this.weekdaysCache[pr][ar]})}meridiems(ar=!0){return listStuff(this,void 0,ar,()=>meridiems,()=>{if(!this.meridiemCache){const dr={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[DateTime$1.utc(2016,11,13,9),DateTime$1.utc(2016,11,13,19)].map(fr=>this.extract(fr,dr,"dayperiod"))}return this.meridiemCache})}eras(ar,dr=!0){return listStuff(this,ar,dr,eras,()=>{const fr={era:ar};return this.eraCache[ar]||(this.eraCache[ar]=[DateTime$1.utc(-40,1,1),DateTime$1.utc(2017,1,1)].map(hr=>this.extract(hr,fr,"era"))),this.eraCache[ar]})}extract(ar,dr,fr){const hr=this.dtFormatter(ar,dr),pr=hr.formatToParts(),mr=pr.find(gr=>gr.type.toLowerCase()===fr);return mr?mr.value:null}numberFormatter(ar={}){return new PolyNumberFormatter(this.intl,ar.forceSimple||this.fastNumbers,ar)}dtFormatter(ar,dr={}){return new PolyDateFormatter(ar,this.intl,dr)}relFormatter(ar={}){return new PolyRelFormatter(this.intl,this.isEnglish(),ar)}listFormatter(ar={}){return getCachedLF(this.intl,ar)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(ar){return this.locale===ar.locale&&this.numberingSystem===ar.numberingSystem&&this.outputCalendar===ar.outputCalendar}}let singleton=null;class FixedOffsetZone extends Zone{static get utcInstance(){return singleton===null&&(singleton=new FixedOffsetZone(0)),singleton}static instance(ar){return ar===0?FixedOffsetZone.utcInstance:new FixedOffsetZone(ar)}static parseSpecifier(ar){if(ar){const dr=ar.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(dr)return new FixedOffsetZone(signedOffset(dr[1],dr[2]))}return null}constructor(ar){super(),this.fixed=ar}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${formatOffset(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${formatOffset(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(ar,dr){return formatOffset(this.fixed,dr)}get isUniversal(){return!0}offset(){return this.fixed}equals(ar){return ar.type==="fixed"&&ar.fixed===this.fixed}get isValid(){return!0}}class InvalidZone extends Zone{constructor(ar){super(),this.zoneName=ar}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function normalizeZone(cr,ar){if(isUndefined(cr)||cr===null)return ar;if(cr instanceof Zone)return cr;if(isString(cr)){const dr=cr.toLowerCase();return dr==="default"?ar:dr==="local"||dr==="system"?SystemZone.instance:dr==="utc"||dr==="gmt"?FixedOffsetZone.utcInstance:FixedOffsetZone.parseSpecifier(dr)||IANAZone.create(cr)}else return isNumber$1(cr)?FixedOffsetZone.instance(cr):typeof cr=="object"&&cr.offset&&typeof cr.offset=="number"?cr:new InvalidZone(cr)}let now=()=>Date.now(),defaultZone="system",defaultLocale=null,defaultNumberingSystem=null,defaultOutputCalendar=null,twoDigitCutoffYear=60,throwOnInvalid;class Settings{static get now(){return now}static set now(ar){now=ar}static set defaultZone(ar){defaultZone=ar}static get defaultZone(){return normalizeZone(defaultZone,SystemZone.instance)}static get defaultLocale(){return defaultLocale}static set defaultLocale(ar){defaultLocale=ar}static get defaultNumberingSystem(){return defaultNumberingSystem}static set defaultNumberingSystem(ar){defaultNumberingSystem=ar}static get defaultOutputCalendar(){return defaultOutputCalendar}static set defaultOutputCalendar(ar){defaultOutputCalendar=ar}static get twoDigitCutoffYear(){return twoDigitCutoffYear}static set twoDigitCutoffYear(ar){twoDigitCutoffYear=ar%100}static get throwOnInvalid(){return throwOnInvalid}static set throwOnInvalid(ar){throwOnInvalid=ar}static resetCaches(){Locale.resetCache(),IANAZone.resetCache()}}function isUndefined(cr){return typeof cr>"u"}function isNumber$1(cr){return typeof cr=="number"}function isInteger$1(cr){return typeof cr=="number"&&cr%1===0}function isString(cr){return typeof cr=="string"}function isDate(cr){return Object.prototype.toString.call(cr)==="[object Date]"}function hasRelative(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function maybeArray(cr){return Array.isArray(cr)?cr:[cr]}function bestBy(cr,ar,dr){if(cr.length!==0)return cr.reduce((fr,hr)=>{const pr=[ar(hr),hr];return fr&&dr(fr[0],pr[0])===fr[0]?fr:pr},null)[1]}function pick(cr,ar){return ar.reduce((dr,fr)=>(dr[fr]=cr[fr],dr),{})}function hasOwnProperty$2(cr,ar){return Object.prototype.hasOwnProperty.call(cr,ar)}function integerBetween(cr,ar,dr){return isInteger$1(cr)&&cr>=ar&&cr<=dr}function floorMod(cr,ar){return cr-ar*Math.floor(cr/ar)}function padStart(cr,ar=2){const dr=cr<0;let fr;return dr?fr="-"+(""+-cr).padStart(ar,"0"):fr=(""+cr).padStart(ar,"0"),fr}function parseInteger(cr){if(!(isUndefined(cr)||cr===null||cr===""))return parseInt(cr,10)}function parseFloating(cr){if(!(isUndefined(cr)||cr===null||cr===""))return parseFloat(cr)}function parseMillis(cr){if(!(isUndefined(cr)||cr===null||cr==="")){const ar=parseFloat("0."+cr)*1e3;return Math.floor(ar)}}function roundTo$1(cr,ar,dr=!1){const fr=10**ar;return(dr?Math.trunc:Math.round)(cr*fr)/fr}function isLeapYear(cr){return cr%4===0&&(cr%100!==0||cr%400===0)}function daysInYear(cr){return isLeapYear(cr)?366:365}function daysInMonth(cr,ar){const dr=floorMod(ar-1,12)+1,fr=cr+(ar-dr)/12;return dr===2?isLeapYear(fr)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][dr-1]}function objToLocalTS(cr){let ar=Date.UTC(cr.year,cr.month-1,cr.day,cr.hour,cr.minute,cr.second,cr.millisecond);return cr.year<100&&cr.year>=0&&(ar=new Date(ar),ar.setUTCFullYear(cr.year,cr.month-1,cr.day)),+ar}function weeksInWeekYear(cr){const ar=(cr+Math.floor(cr/4)-Math.floor(cr/100)+Math.floor(cr/400))%7,dr=cr-1,fr=(dr+Math.floor(dr/4)-Math.floor(dr/100)+Math.floor(dr/400))%7;return ar===4||fr===3?53:52}function untruncateYear(cr){return cr>99?cr:cr>Settings.twoDigitCutoffYear?1900+cr:2e3+cr}function parseZoneInfo(cr,ar,dr,fr=null){const hr=new Date(cr),pr={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};fr&&(pr.timeZone=fr);const mr={timeZoneName:ar,...pr},gr=new Intl.DateTimeFormat(dr,mr).formatToParts(hr).find(yr=>yr.type.toLowerCase()==="timezonename");return gr?gr.value:null}function signedOffset(cr,ar){let dr=parseInt(cr,10);Number.isNaN(dr)&&(dr=0);const fr=parseInt(ar,10)||0,hr=dr<0||Object.is(dr,-0)?-fr:fr;return dr*60+hr}function asNumber(cr){const ar=Number(cr);if(typeof cr=="boolean"||cr===""||Number.isNaN(ar))throw new InvalidArgumentError(`Invalid unit value ${cr}`);return ar}function normalizeObject(cr,ar){const dr={};for(const fr in cr)if(hasOwnProperty$2(cr,fr)){const hr=cr[fr];if(hr==null)continue;dr[ar(fr)]=asNumber(hr)}return dr}function formatOffset(cr,ar){const dr=Math.trunc(Math.abs(cr/60)),fr=Math.trunc(Math.abs(cr%60)),hr=cr>=0?"+":"-";switch(ar){case"short":return`${hr}${padStart(dr,2)}:${padStart(fr,2)}`;case"narrow":return`${hr}${dr}${fr>0?`:${fr}`:""}`;case"techie":return`${hr}${padStart(dr,2)}${padStart(fr,2)}`;default:throw new RangeError(`Value format ${ar} is out of range for property format`)}}function timeObject(cr){return pick(cr,["hour","minute","second","millisecond"])}const monthsLong=["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsNarrow=["J","F","M","A","M","J","J","A","S","O","N","D"];function months(cr){switch(cr){case"narrow":return[...monthsNarrow];case"short":return[...monthsShort];case"long":return[...monthsLong];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const weekdaysLong=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],weekdaysShort=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],weekdaysNarrow=["M","T","W","T","F","S","S"];function weekdays(cr){switch(cr){case"narrow":return[...weekdaysNarrow];case"short":return[...weekdaysShort];case"long":return[...weekdaysLong];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const meridiems=["AM","PM"],erasLong=["Before Christ","Anno Domini"],erasShort=["BC","AD"],erasNarrow=["B","A"];function eras(cr){switch(cr){case"narrow":return[...erasNarrow];case"short":return[...erasShort];case"long":return[...erasLong];default:return null}}function meridiemForDateTime(cr){return meridiems[cr.hour<12?0:1]}function weekdayForDateTime(cr,ar){return weekdays(ar)[cr.weekday-1]}function monthForDateTime(cr,ar){return months(ar)[cr.month-1]}function eraForDateTime(cr,ar){return eras(ar)[cr.year<0?0:1]}function formatRelativeTime(cr,ar,dr="always",fr=!1){const hr={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},pr=["hours","minutes","seconds"].indexOf(cr)===-1;if(dr==="auto"&&pr){const br=cr==="days";switch(ar){case 1:return br?"tomorrow":`next ${hr[cr][0]}`;case-1:return br?"yesterday":`last ${hr[cr][0]}`;case 0:return br?"today":`this ${hr[cr][0]}`}}const mr=Object.is(ar,-0)||ar<0,gr=Math.abs(ar),yr=gr===1,xr=hr[cr],wr=fr?yr?xr[1]:xr[2]||xr[1]:yr?hr[cr][0]:cr;return mr?`${gr} ${wr} ago`:`in ${gr} ${wr}`}function stringifyTokens(cr,ar){let dr="";for(const fr of cr)fr.literal?dr+=fr.val:dr+=ar(fr.val);return dr}const macroTokenToFormatOpts={D:DATE_SHORT,DD:DATE_MED,DDD:DATE_FULL,DDDD:DATE_HUGE,t:TIME_SIMPLE,tt:TIME_WITH_SECONDS,ttt:TIME_WITH_SHORT_OFFSET,tttt:TIME_WITH_LONG_OFFSET,T:TIME_24_SIMPLE,TT:TIME_24_WITH_SECONDS,TTT:TIME_24_WITH_SHORT_OFFSET,TTTT:TIME_24_WITH_LONG_OFFSET,f:DATETIME_SHORT,ff:DATETIME_MED,fff:DATETIME_FULL,ffff:DATETIME_HUGE,F:DATETIME_SHORT_WITH_SECONDS,FF:DATETIME_MED_WITH_SECONDS,FFF:DATETIME_FULL_WITH_SECONDS,FFFF:DATETIME_HUGE_WITH_SECONDS};class Formatter{static create(ar,dr={}){return new Formatter(ar,dr)}static parseFormat(ar){let dr=null,fr="",hr=!1;const pr=[];for(let mr=0;mr<ar.length;mr++){const gr=ar.charAt(mr);gr==="'"?(fr.length>0&&pr.push({literal:hr||/^\s+$/.test(fr),val:fr}),dr=null,fr="",hr=!hr):hr||gr===dr?fr+=gr:(fr.length>0&&pr.push({literal:/^\s+$/.test(fr),val:fr}),fr=gr,dr=gr)}return fr.length>0&&pr.push({literal:hr||/^\s+$/.test(fr),val:fr}),pr}static macroTokenToFormatOpts(ar){return macroTokenToFormatOpts[ar]}constructor(ar,dr){this.opts=dr,this.loc=ar,this.systemLoc=null}formatWithSystemDefault(ar,dr){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(ar,{...this.opts,...dr}).format()}formatDateTime(ar,dr={}){return this.loc.dtFormatter(ar,{...this.opts,...dr}).format()}formatDateTimeParts(ar,dr={}){return this.loc.dtFormatter(ar,{...this.opts,...dr}).formatToParts()}formatInterval(ar,dr={}){return this.loc.dtFormatter(ar.start,{...this.opts,...dr}).dtf.formatRange(ar.start.toJSDate(),ar.end.toJSDate())}resolvedOptions(ar,dr={}){return this.loc.dtFormatter(ar,{...this.opts,...dr}).resolvedOptions()}num(ar,dr=0){if(this.opts.forceSimple)return padStart(ar,dr);const fr={...this.opts};return dr>0&&(fr.padTo=dr),this.loc.numberFormatter(fr).format(ar)}formatDateTimeFromString(ar,dr){const fr=this.loc.listingMode()==="en",hr=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",pr=(vr,Er)=>this.loc.extract(ar,vr,Er),mr=vr=>ar.isOffsetFixed&&ar.offset===0&&vr.allowZ?"Z":ar.isValid?ar.zone.formatOffset(ar.ts,vr.format):"",gr=()=>fr?meridiemForDateTime(ar):pr({hour:"numeric",hourCycle:"h12"},"dayperiod"),yr=(vr,Er)=>fr?monthForDateTime(ar,vr):pr(Er?{month:vr}:{month:vr,day:"numeric"},"month"),xr=(vr,Er)=>fr?weekdayForDateTime(ar,vr):pr(Er?{weekday:vr}:{weekday:vr,month:"long",day:"numeric"},"weekday"),wr=vr=>{const Er=Formatter.macroTokenToFormatOpts(vr);return Er?this.formatWithSystemDefault(ar,Er):vr},br=vr=>fr?eraForDateTime(ar,vr):pr({era:vr},"era"),Sr=vr=>{switch(vr){case"S":return this.num(ar.millisecond);case"u":case"SSS":return this.num(ar.millisecond,3);case"s":return this.num(ar.second);case"ss":return this.num(ar.second,2);case"uu":return this.num(Math.floor(ar.millisecond/10),2);case"uuu":return this.num(Math.floor(ar.millisecond/100));case"m":return this.num(ar.minute);case"mm":return this.num(ar.minute,2);case"h":return this.num(ar.hour%12===0?12:ar.hour%12);case"hh":return this.num(ar.hour%12===0?12:ar.hour%12,2);case"H":return this.num(ar.hour);case"HH":return this.num(ar.hour,2);case"Z":return mr({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return mr({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return mr({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return ar.zone.offsetName(ar.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return ar.zone.offsetName(ar.ts,{format:"long",locale:this.loc.locale});case"z":return ar.zoneName;case"a":return gr();case"d":return hr?pr({day:"numeric"},"day"):this.num(ar.day);case"dd":return hr?pr({day:"2-digit"},"day"):this.num(ar.day,2);case"c":return this.num(ar.weekday);case"ccc":return xr("short",!0);case"cccc":return xr("long",!0);case"ccccc":return xr("narrow",!0);case"E":return this.num(ar.weekday);case"EEE":return xr("short",!1);case"EEEE":return xr("long",!1);case"EEEEE":return xr("narrow",!1);case"L":return hr?pr({month:"numeric",day:"numeric"},"month"):this.num(ar.month);case"LL":return hr?pr({month:"2-digit",day:"numeric"},"month"):this.num(ar.month,2);case"LLL":return yr("short",!0);case"LLLL":return yr("long",!0);case"LLLLL":return yr("narrow",!0);case"M":return hr?pr({month:"numeric"},"month"):this.num(ar.month);case"MM":return hr?pr({month:"2-digit"},"month"):this.num(ar.month,2);case"MMM":return yr("short",!1);case"MMMM":return yr("long",!1);case"MMMMM":return yr("narrow",!1);case"y":return hr?pr({year:"numeric"},"year"):this.num(ar.year);case"yy":return hr?pr({year:"2-digit"},"year"):this.num(ar.year.toString().slice(-2),2);case"yyyy":return hr?pr({year:"numeric"},"year"):this.num(ar.year,4);case"yyyyyy":return hr?pr({year:"numeric"},"year"):this.num(ar.year,6);case"G":return br("short");case"GG":return br("long");case"GGGGG":return br("narrow");case"kk":return this.num(ar.weekYear.toString().slice(-2),2);case"kkkk":return this.num(ar.weekYear,4);case"W":return this.num(ar.weekNumber);case"WW":return this.num(ar.weekNumber,2);case"o":return this.num(ar.ordinal);case"ooo":return this.num(ar.ordinal,3);case"q":return this.num(ar.quarter);case"qq":return this.num(ar.quarter,2);case"X":return this.num(Math.floor(ar.ts/1e3));case"x":return this.num(ar.ts);default:return wr(vr)}};return stringifyTokens(Formatter.parseFormat(dr),Sr)}formatDurationFromString(ar,dr){const fr=yr=>{switch(yr[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},hr=yr=>xr=>{const wr=fr(xr);return wr?this.num(yr.get(wr),xr.length):xr},pr=Formatter.parseFormat(dr),mr=pr.reduce((yr,{literal:xr,val:wr})=>xr?yr:yr.concat(wr),[]),gr=ar.shiftTo(...mr.map(fr).filter(yr=>yr));return stringifyTokens(pr,hr(gr))}}class Invalid{constructor(ar,dr){this.reason=ar,this.explanation=dr}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const ianaRegex=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function combineRegexes(...cr){const ar=cr.reduce((dr,fr)=>dr+fr.source,"");return RegExp(`^${ar}$`)}function combineExtractors(...cr){return ar=>cr.reduce(([dr,fr,hr],pr)=>{const[mr,gr,yr]=pr(ar,hr);return[{...dr,...mr},gr||fr,yr]},[{},null,1]).slice(0,2)}function parse$3(cr,...ar){if(cr==null)return[null,null];for(const[dr,fr]of ar){const hr=dr.exec(cr);if(hr)return fr(hr)}return[null,null]}function simpleParse(...cr){return(ar,dr)=>{const fr={};let hr;for(hr=0;hr<cr.length;hr++)fr[cr[hr]]=parseInteger(ar[dr+hr]);return[fr,null,dr+hr]}}const offsetRegex=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,isoExtendedZone=`(?:${offsetRegex.source}?(?:\\[(${ianaRegex.source})\\])?)?`,isoTimeBaseRegex=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,isoTimeRegex=RegExp(`${isoTimeBaseRegex.source}${isoExtendedZone}`),isoTimeExtensionRegex=RegExp(`(?:T${isoTimeRegex.source})?`),isoYmdRegex=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,isoWeekRegex=/(\d{4})-?W(\d\d)(?:-?(\d))?/,isoOrdinalRegex=/(\d{4})-?(\d{3})/,extractISOWeekData=simpleParse("weekYear","weekNumber","weekDay"),extractISOOrdinalData=simpleParse("year","ordinal"),sqlYmdRegex=/(\d{4})-(\d\d)-(\d\d)/,sqlTimeRegex=RegExp(`${isoTimeBaseRegex.source} ?(?:${offsetRegex.source}|(${ianaRegex.source}))?`),sqlTimeExtensionRegex=RegExp(`(?: ${sqlTimeRegex.source})?`);function int(cr,ar,dr){const fr=cr[ar];return isUndefined(fr)?dr:parseInteger(fr)}function extractISOYmd(cr,ar){return[{year:int(cr,ar),month:int(cr,ar+1,1),day:int(cr,ar+2,1)},null,ar+3]}function extractISOTime(cr,ar){return[{hours:int(cr,ar,0),minutes:int(cr,ar+1,0),seconds:int(cr,ar+2,0),milliseconds:parseMillis(cr[ar+3])},null,ar+4]}function extractISOOffset(cr,ar){const dr=!cr[ar]&&!cr[ar+1],fr=signedOffset(cr[ar+1],cr[ar+2]),hr=dr?null:FixedOffsetZone.instance(fr);return[{},hr,ar+3]}function extractIANAZone(cr,ar){const dr=cr[ar]?IANAZone.create(cr[ar]):null;return[{},dr,ar+1]}const isoTimeOnly=RegExp(`^T?${isoTimeBaseRegex.source}$`),isoDuration=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function extractISODuration(cr){const[ar,dr,fr,hr,pr,mr,gr,yr,xr]=cr,wr=ar[0]==="-",br=yr&&yr[0]==="-",Sr=(vr,Er=!1)=>vr!==void 0&&(Er||vr&&wr)?-vr:vr;return[{years:Sr(parseFloating(dr)),months:Sr(parseFloating(fr)),weeks:Sr(parseFloating(hr)),days:Sr(parseFloating(pr)),hours:Sr(parseFloating(mr)),minutes:Sr(parseFloating(gr)),seconds:Sr(parseFloating(yr),yr==="-0"),milliseconds:Sr(parseMillis(xr),br)}]}const obsOffsets={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function fromStrings(cr,ar,dr,fr,hr,pr,mr){const gr={year:ar.length===2?untruncateYear(parseInteger(ar)):parseInteger(ar),month:monthsShort.indexOf(dr)+1,day:parseInteger(fr),hour:parseInteger(hr),minute:parseInteger(pr)};return mr&&(gr.second=parseInteger(mr)),cr&&(gr.weekday=cr.length>3?weekdaysLong.indexOf(cr)+1:weekdaysShort.indexOf(cr)+1),gr}const rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function extractRFC2822(cr){const[,ar,dr,fr,hr,pr,mr,gr,yr,xr,wr,br]=cr,Sr=fromStrings(ar,hr,fr,dr,pr,mr,gr);let vr;return yr?vr=obsOffsets[yr]:xr?vr=0:vr=signedOffset(wr,br),[Sr,new FixedOffsetZone(vr)]}function preprocessRFC2822(cr){return cr.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const rfc1123=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,rfc850=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ascii$2=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function extractRFC1123Or850(cr){const[,ar,dr,fr,hr,pr,mr,gr]=cr;return[fromStrings(ar,hr,fr,dr,pr,mr,gr),FixedOffsetZone.utcInstance]}function extractASCII(cr){const[,ar,dr,fr,hr,pr,mr,gr]=cr;return[fromStrings(ar,gr,dr,fr,hr,pr,mr),FixedOffsetZone.utcInstance]}const isoYmdWithTimeExtensionRegex=combineRegexes(isoYmdRegex,isoTimeExtensionRegex),isoWeekWithTimeExtensionRegex=combineRegexes(isoWeekRegex,isoTimeExtensionRegex),isoOrdinalWithTimeExtensionRegex=combineRegexes(isoOrdinalRegex,isoTimeExtensionRegex),isoTimeCombinedRegex=combineRegexes(isoTimeRegex),extractISOYmdTimeAndOffset=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset,extractIANAZone),extractISOWeekTimeAndOffset=combineExtractors(extractISOWeekData,extractISOTime,extractISOOffset,extractIANAZone),extractISOOrdinalDateAndTime=combineExtractors(extractISOOrdinalData,extractISOTime,extractISOOffset,extractIANAZone),extractISOTimeAndOffset=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseISODate(cr){return parse$3(cr,[isoYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[isoWeekWithTimeExtensionRegex,extractISOWeekTimeAndOffset],[isoOrdinalWithTimeExtensionRegex,extractISOOrdinalDateAndTime],[isoTimeCombinedRegex,extractISOTimeAndOffset])}function parseRFC2822Date(cr){return parse$3(preprocessRFC2822(cr),[rfc2822,extractRFC2822])}function parseHTTPDate(cr){return parse$3(cr,[rfc1123,extractRFC1123Or850],[rfc850,extractRFC1123Or850],[ascii$2,extractASCII])}function parseISODuration(cr){return parse$3(cr,[isoDuration,extractISODuration])}const extractISOTimeOnly=combineExtractors(extractISOTime);function parseISOTimeOnly(cr){return parse$3(cr,[isoTimeOnly,extractISOTimeOnly])}const sqlYmdWithTimeExtensionRegex=combineRegexes(sqlYmdRegex,sqlTimeExtensionRegex),sqlTimeCombinedRegex=combineRegexes(sqlTimeRegex),extractISOTimeOffsetAndIANAZone=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseSQL(cr){return parse$3(cr,[sqlYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[sqlTimeCombinedRegex,extractISOTimeOffsetAndIANAZone])}const INVALID$2="Invalid Duration",lowOrderMatrix={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},casualMatrix={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...lowOrderMatrix},daysInYearAccurate=146097/400,daysInMonthAccurate=146097/4800,accurateMatrix={years:{quarters:4,months:12,weeks:daysInYearAccurate/7,days:daysInYearAccurate,hours:daysInYearAccurate*24,minutes:daysInYearAccurate*24*60,seconds:daysInYearAccurate*24*60*60,milliseconds:daysInYearAccurate*24*60*60*1e3},quarters:{months:3,weeks:daysInYearAccurate/28,days:daysInYearAccurate/4,hours:daysInYearAccurate*24/4,minutes:daysInYearAccurate*24*60/4,seconds:daysInYearAccurate*24*60*60/4,milliseconds:daysInYearAccurate*24*60*60*1e3/4},months:{weeks:daysInMonthAccurate/7,days:daysInMonthAccurate,hours:daysInMonthAccurate*24,minutes:daysInMonthAccurate*24*60,seconds:daysInMonthAccurate*24*60*60,milliseconds:daysInMonthAccurate*24*60*60*1e3},...lowOrderMatrix},orderedUnits$1=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],reverseUnits=orderedUnits$1.slice(0).reverse();function clone$2(cr,ar,dr=!1){const fr={values:dr?ar.values:{...cr.values,...ar.values||{}},loc:cr.loc.clone(ar.loc),conversionAccuracy:ar.conversionAccuracy||cr.conversionAccuracy,matrix:ar.matrix||cr.matrix};return new Duration$1(fr)}function antiTrunc(cr){return cr<0?Math.floor(cr):Math.ceil(cr)}function convert$4(cr,ar,dr,fr,hr){const pr=cr[hr][dr],mr=ar[dr]/pr,gr=Math.sign(mr)===Math.sign(fr[hr]),yr=!gr&&fr[hr]!==0&&Math.abs(mr)<=1?antiTrunc(mr):Math.trunc(mr);fr[hr]+=yr,ar[dr]-=yr*pr}function normalizeValues(cr,ar){reverseUnits.reduce((dr,fr)=>isUndefined(ar[fr])?dr:(dr&&convert$4(cr,ar,dr,ar,fr),fr),null)}function removeZeroes(cr){const ar={};for(const[dr,fr]of Object.entries(cr))fr!==0&&(ar[dr]=fr);return ar}let Duration$1=class Ei{constructor(ar){const dr=ar.conversionAccuracy==="longterm"||!1;let fr=dr?accurateMatrix:casualMatrix;ar.matrix&&(fr=ar.matrix),this.values=ar.values,this.loc=ar.loc||Locale.create(),this.conversionAccuracy=dr?"longterm":"casual",this.invalid=ar.invalid||null,this.matrix=fr,this.isLuxonDuration=!0}static fromMillis(ar,dr){return Ei.fromObject({milliseconds:ar},dr)}static fromObject(ar,dr={}){if(ar==null||typeof ar!="object")throw new InvalidArgumentError(`Duration.fromObject: argument expected to be an object, got ${ar===null?"null":typeof ar}`);return new Ei({values:normalizeObject(ar,Ei.normalizeUnit),loc:Locale.fromObject(dr),conversionAccuracy:dr.conversionAccuracy,matrix:dr.matrix})}static fromDurationLike(ar){if(isNumber$1(ar))return Ei.fromMillis(ar);if(Ei.isDuration(ar))return ar;if(typeof ar=="object")return Ei.fromObject(ar);throw new InvalidArgumentError(`Unknown duration argument ${ar} of type ${typeof ar}`)}static fromISO(ar,dr){const[fr]=parseISODuration(ar);return fr?Ei.fromObject(fr,dr):Ei.invalid("unparsable",`the input "${ar}" can't be parsed as ISO 8601`)}static fromISOTime(ar,dr){const[fr]=parseISOTimeOnly(ar);return fr?Ei.fromObject(fr,dr):Ei.invalid("unparsable",`the input "${ar}" can't be parsed as ISO 8601`)}static invalid(ar,dr=null){if(!ar)throw new InvalidArgumentError("need to specify a reason the Duration is invalid");const fr=ar instanceof Invalid?ar:new Invalid(ar,dr);if(Settings.throwOnInvalid)throw new InvalidDurationError(fr);return new Ei({invalid:fr})}static normalizeUnit(ar){const dr={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[ar&&ar.toLowerCase()];if(!dr)throw new InvalidUnitError(ar);return dr}static isDuration(ar){return ar&&ar.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(ar,dr={}){const fr={...dr,floor:dr.round!==!1&&dr.floor!==!1};return this.isValid?Formatter.create(this.loc,fr).formatDurationFromString(this,ar):INVALID$2}toHuman(ar={}){const dr=orderedUnits$1.map(fr=>{const hr=this.values[fr];return isUndefined(hr)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...ar,unit:fr.slice(0,-1)}).format(hr)}).filter(fr=>fr);return this.loc.listFormatter({type:"conjunction",style:ar.listStyle||"narrow",...ar}).format(dr)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let ar="P";return this.years!==0&&(ar+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(ar+=this.months+this.quarters*3+"M"),this.weeks!==0&&(ar+=this.weeks+"W"),this.days!==0&&(ar+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(ar+="T"),this.hours!==0&&(ar+=this.hours+"H"),this.minutes!==0&&(ar+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(ar+=roundTo$1(this.seconds+this.milliseconds/1e3,3)+"S"),ar==="P"&&(ar+="T0S"),ar}toISOTime(ar={}){if(!this.isValid)return null;const dr=this.toMillis();if(dr<0||dr>=864e5)return null;ar={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...ar};const fr=this.shiftTo("hours","minutes","seconds","milliseconds");let hr=ar.format==="basic"?"hhmm":"hh:mm";(!ar.suppressSeconds||fr.seconds!==0||fr.milliseconds!==0)&&(hr+=ar.format==="basic"?"ss":":ss",(!ar.suppressMilliseconds||fr.milliseconds!==0)&&(hr+=".SSS"));let pr=fr.toFormat(hr);return ar.includePrefix&&(pr="T"+pr),pr}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(ar){if(!this.isValid)return this;const dr=Ei.fromDurationLike(ar),fr={};for(const hr of orderedUnits$1)(hasOwnProperty$2(dr.values,hr)||hasOwnProperty$2(this.values,hr))&&(fr[hr]=dr.get(hr)+this.get(hr));return clone$2(this,{values:fr},!0)}minus(ar){if(!this.isValid)return this;const dr=Ei.fromDurationLike(ar);return this.plus(dr.negate())}mapUnits(ar){if(!this.isValid)return this;const dr={};for(const fr of Object.keys(this.values))dr[fr]=asNumber(ar(this.values[fr],fr));return clone$2(this,{values:dr},!0)}get(ar){return this[Ei.normalizeUnit(ar)]}set(ar){if(!this.isValid)return this;const dr={...this.values,...normalizeObject(ar,Ei.normalizeUnit)};return clone$2(this,{values:dr})}reconfigure({locale:ar,numberingSystem:dr,conversionAccuracy:fr,matrix:hr}={}){const mr={loc:this.loc.clone({locale:ar,numberingSystem:dr}),matrix:hr,conversionAccuracy:fr};return clone$2(this,mr)}as(ar){return this.isValid?this.shiftTo(ar).get(ar):NaN}normalize(){if(!this.isValid)return this;const ar=this.toObject();return normalizeValues(this.matrix,ar),clone$2(this,{values:ar},!0)}rescale(){if(!this.isValid)return this;const ar=removeZeroes(this.normalize().shiftToAll().toObject());return clone$2(this,{values:ar},!0)}shiftTo(...ar){if(!this.isValid)return this;if(ar.length===0)return this;ar=ar.map(mr=>Ei.normalizeUnit(mr));const dr={},fr={},hr=this.toObject();let pr;for(const mr of orderedUnits$1)if(ar.indexOf(mr)>=0){pr=mr;let gr=0;for(const xr in fr)gr+=this.matrix[xr][mr]*fr[xr],fr[xr]=0;isNumber$1(hr[mr])&&(gr+=hr[mr]);const yr=Math.trunc(gr);dr[mr]=yr,fr[mr]=(gr*1e3-yr*1e3)/1e3;for(const xr in hr)orderedUnits$1.indexOf(xr)>orderedUnits$1.indexOf(mr)&&convert$4(this.matrix,hr,xr,dr,mr)}else isNumber$1(hr[mr])&&(fr[mr]=hr[mr]);for(const mr in fr)fr[mr]!==0&&(dr[pr]+=mr===pr?fr[mr]:fr[mr]/this.matrix[pr][mr]);return clone$2(this,{values:dr},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const ar={};for(const dr of Object.keys(this.values))ar[dr]=this.values[dr]===0?0:-this.values[dr];return clone$2(this,{values:ar},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(ar){if(!this.isValid||!ar.isValid||!this.loc.equals(ar.loc))return!1;function dr(fr,hr){return fr===void 0||fr===0?hr===void 0||hr===0:fr===hr}for(const fr of orderedUnits$1)if(!dr(this.values[fr],ar.values[fr]))return!1;return!0}};const INVALID$1="Invalid Interval";function validateStartEnd(cr,ar){return!cr||!cr.isValid?Interval.invalid("missing or invalid start"):!ar||!ar.isValid?Interval.invalid("missing or invalid end"):ar<cr?Interval.invalid("end before start",`The end of an interval must be after its start, but you had start=${cr.toISO()} and end=${ar.toISO()}`):null}class Interval{constructor(ar){this.s=ar.start,this.e=ar.end,this.invalid=ar.invalid||null,this.isLuxonInterval=!0}static invalid(ar,dr=null){if(!ar)throw new InvalidArgumentError("need to specify a reason the Interval is invalid");const fr=ar instanceof Invalid?ar:new Invalid(ar,dr);if(Settings.throwOnInvalid)throw new InvalidIntervalError(fr);return new Interval({invalid:fr})}static fromDateTimes(ar,dr){const fr=friendlyDateTime(ar),hr=friendlyDateTime(dr),pr=validateStartEnd(fr,hr);return pr??new Interval({start:fr,end:hr})}static after(ar,dr){const fr=Duration$1.fromDurationLike(dr),hr=friendlyDateTime(ar);return Interval.fromDateTimes(hr,hr.plus(fr))}static before(ar,dr){const fr=Duration$1.fromDurationLike(dr),hr=friendlyDateTime(ar);return Interval.fromDateTimes(hr.minus(fr),hr)}static fromISO(ar,dr){const[fr,hr]=(ar||"").split("/",2);if(fr&&hr){let pr,mr;try{pr=DateTime$1.fromISO(fr,dr),mr=pr.isValid}catch{mr=!1}let gr,yr;try{gr=DateTime$1.fromISO(hr,dr),yr=gr.isValid}catch{yr=!1}if(mr&&yr)return Interval.fromDateTimes(pr,gr);if(mr){const xr=Duration$1.fromISO(hr,dr);if(xr.isValid)return Interval.after(pr,xr)}else if(yr){const xr=Duration$1.fromISO(fr,dr);if(xr.isValid)return Interval.before(gr,xr)}}return Interval.invalid("unparsable",`the input "${ar}" can't be parsed as ISO 8601`)}static isInterval(ar){return ar&&ar.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(ar="milliseconds"){return this.isValid?this.toDuration(ar).get(ar):NaN}count(ar="milliseconds"){if(!this.isValid)return NaN;const dr=this.start.startOf(ar),fr=this.end.startOf(ar);return Math.floor(fr.diff(dr,ar).get(ar))+(fr.valueOf()!==this.end.valueOf())}hasSame(ar){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,ar):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(ar){return this.isValid?this.s>ar:!1}isBefore(ar){return this.isValid?this.e<=ar:!1}contains(ar){return this.isValid?this.s<=ar&&this.e>ar:!1}set({start:ar,end:dr}={}){return this.isValid?Interval.fromDateTimes(ar||this.s,dr||this.e):this}splitAt(...ar){if(!this.isValid)return[];const dr=ar.map(friendlyDateTime).filter(mr=>this.contains(mr)).sort(),fr=[];let{s:hr}=this,pr=0;for(;hr<this.e;){const mr=dr[pr]||this.e,gr=+mr>+this.e?this.e:mr;fr.push(Interval.fromDateTimes(hr,gr)),hr=gr,pr+=1}return fr}splitBy(ar){const dr=Duration$1.fromDurationLike(ar);if(!this.isValid||!dr.isValid||dr.as("milliseconds")===0)return[];let{s:fr}=this,hr=1,pr;const mr=[];for(;fr<this.e;){const gr=this.start.plus(dr.mapUnits(yr=>yr*hr));pr=+gr>+this.e?this.e:gr,mr.push(Interval.fromDateTimes(fr,pr)),fr=pr,hr+=1}return mr}divideEqually(ar){return this.isValid?this.splitBy(this.length()/ar).slice(0,ar):[]}overlaps(ar){return this.e>ar.s&&this.s<ar.e}abutsStart(ar){return this.isValid?+this.e==+ar.s:!1}abutsEnd(ar){return this.isValid?+ar.e==+this.s:!1}engulfs(ar){return this.isValid?this.s<=ar.s&&this.e>=ar.e:!1}equals(ar){return!this.isValid||!ar.isValid?!1:this.s.equals(ar.s)&&this.e.equals(ar.e)}intersection(ar){if(!this.isValid)return this;const dr=this.s>ar.s?this.s:ar.s,fr=this.e<ar.e?this.e:ar.e;return dr>=fr?null:Interval.fromDateTimes(dr,fr)}union(ar){if(!this.isValid)return this;const dr=this.s<ar.s?this.s:ar.s,fr=this.e>ar.e?this.e:ar.e;return Interval.fromDateTimes(dr,fr)}static merge(ar){const[dr,fr]=ar.sort((hr,pr)=>hr.s-pr.s).reduce(([hr,pr],mr)=>pr?pr.overlaps(mr)||pr.abutsStart(mr)?[hr,pr.union(mr)]:[hr.concat([pr]),mr]:[hr,mr],[[],null]);return fr&&dr.push(fr),dr}static xor(ar){let dr=null,fr=0;const hr=[],pr=ar.map(yr=>[{time:yr.s,type:"s"},{time:yr.e,type:"e"}]),mr=Array.prototype.concat(...pr),gr=mr.sort((yr,xr)=>yr.time-xr.time);for(const yr of gr)fr+=yr.type==="s"?1:-1,fr===1?dr=yr.time:(dr&&+dr!=+yr.time&&hr.push(Interval.fromDateTimes(dr,yr.time)),dr=null);return Interval.merge(hr)}difference(...ar){return Interval.xor([this].concat(ar)).map(dr=>this.intersection(dr)).filter(dr=>dr&&!dr.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:INVALID$1}toLocaleString(ar=DATE_SHORT,dr={}){return this.isValid?Formatter.create(this.s.loc.clone(dr),ar).formatInterval(this):INVALID$1}toISO(ar){return this.isValid?`${this.s.toISO(ar)}/${this.e.toISO(ar)}`:INVALID$1}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:INVALID$1}toISOTime(ar){return this.isValid?`${this.s.toISOTime(ar)}/${this.e.toISOTime(ar)}`:INVALID$1}toFormat(ar,{separator:dr="  "}={}){return this.isValid?`${this.s.toFormat(ar)}${dr}${this.e.toFormat(ar)}`:INVALID$1}toDuration(ar,dr){return this.isValid?this.e.diff(this.s,ar,dr):Duration$1.invalid(this.invalidReason)}mapEndpoints(ar){return Interval.fromDateTimes(ar(this.s),ar(this.e))}}class Info{static hasDST(ar=Settings.defaultZone){const dr=DateTime$1.now().setZone(ar).set({month:12});return!ar.isUniversal&&dr.offset!==dr.set({month:6}).offset}static isValidIANAZone(ar){return IANAZone.isValidZone(ar)}static normalizeZone(ar){return normalizeZone(ar,Settings.defaultZone)}static months(ar="long",{locale:dr=null,numberingSystem:fr=null,locObj:hr=null,outputCalendar:pr="gregory"}={}){return(hr||Locale.create(dr,fr,pr)).months(ar)}static monthsFormat(ar="long",{locale:dr=null,numberingSystem:fr=null,locObj:hr=null,outputCalendar:pr="gregory"}={}){return(hr||Locale.create(dr,fr,pr)).months(ar,!0)}static weekdays(ar="long",{locale:dr=null,numberingSystem:fr=null,locObj:hr=null}={}){return(hr||Locale.create(dr,fr,null)).weekdays(ar)}static weekdaysFormat(ar="long",{locale:dr=null,numberingSystem:fr=null,locObj:hr=null}={}){return(hr||Locale.create(dr,fr,null)).weekdays(ar,!0)}static meridiems({locale:ar=null}={}){return Locale.create(ar).meridiems()}static eras(ar="short",{locale:dr=null}={}){return Locale.create(dr,null,"gregory").eras(ar)}static features(){return{relative:hasRelative()}}}function dayDiff(cr,ar){const dr=hr=>hr.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),fr=dr(ar)-dr(cr);return Math.floor(Duration$1.fromMillis(fr).as("days"))}function highOrderDiffs(cr,ar,dr){const fr=[["years",(yr,xr)=>xr.year-yr.year],["quarters",(yr,xr)=>xr.quarter-yr.quarter+(xr.year-yr.year)*4],["months",(yr,xr)=>xr.month-yr.month+(xr.year-yr.year)*12],["weeks",(yr,xr)=>{const wr=dayDiff(yr,xr);return(wr-wr%7)/7}],["days",dayDiff]],hr={},pr=cr;let mr,gr;for(const[yr,xr]of fr)dr.indexOf(yr)>=0&&(mr=yr,hr[yr]=xr(cr,ar),gr=pr.plus(hr),gr>ar?(hr[yr]--,cr=pr.plus(hr)):cr=gr);return[cr,hr,gr,mr]}function diff(cr,ar,dr,fr){let[hr,pr,mr,gr]=highOrderDiffs(cr,ar,dr);const yr=ar-hr,xr=dr.filter(br=>["hours","minutes","seconds","milliseconds"].indexOf(br)>=0);xr.length===0&&(mr<ar&&(mr=hr.plus({[gr]:1})),mr!==hr&&(pr[gr]=(pr[gr]||0)+yr/(mr-hr)));const wr=Duration$1.fromObject(pr,fr);return xr.length>0?Duration$1.fromMillis(yr,fr).shiftTo(...xr).plus(wr):wr}const numberingSystems={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},numberingSystemsUTF16={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hanidecChars=numberingSystems.hanidec.replace(/[\[|\]]/g,"").split("");function parseDigits(cr){let ar=parseInt(cr,10);if(isNaN(ar)){ar="";for(let dr=0;dr<cr.length;dr++){const fr=cr.charCodeAt(dr);if(cr[dr].search(numberingSystems.hanidec)!==-1)ar+=hanidecChars.indexOf(cr[dr]);else for(const hr in numberingSystemsUTF16){const[pr,mr]=numberingSystemsUTF16[hr];fr>=pr&&fr<=mr&&(ar+=fr-pr)}}return parseInt(ar,10)}else return ar}function digitRegex({numberingSystem:cr},ar=""){return new RegExp(`${numberingSystems[cr||"latn"]}${ar}`)}const MISSING_FTP="missing Intl.DateTimeFormat.formatToParts support";function intUnit(cr,ar=dr=>dr){return{regex:cr,deser:([dr])=>ar(parseDigits(dr))}}const NBSP=String.fromCharCode(160),spaceOrNBSP=`[ ${NBSP}]`,spaceOrNBSPRegExp=new RegExp(spaceOrNBSP,"g");function fixListRegex(cr){return cr.replace(/\./g,"\\.?").replace(spaceOrNBSPRegExp,spaceOrNBSP)}function stripInsensitivities(cr){return cr.replace(/\./g,"").replace(spaceOrNBSPRegExp," ").toLowerCase()}function oneOf(cr,ar){return cr===null?null:{regex:RegExp(cr.map(fixListRegex).join("|")),deser:([dr])=>cr.findIndex(fr=>stripInsensitivities(dr)===stripInsensitivities(fr))+ar}}function offset$1(cr,ar){return{regex:cr,deser:([,dr,fr])=>signedOffset(dr,fr),groups:ar}}function simple(cr){return{regex:cr,deser:([ar])=>ar}}function escapeToken(cr){return cr.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function unitForToken(cr,ar){const dr=digitRegex(ar),fr=digitRegex(ar,"{2}"),hr=digitRegex(ar,"{3}"),pr=digitRegex(ar,"{4}"),mr=digitRegex(ar,"{6}"),gr=digitRegex(ar,"{1,2}"),yr=digitRegex(ar,"{1,3}"),xr=digitRegex(ar,"{1,6}"),wr=digitRegex(ar,"{1,9}"),br=digitRegex(ar,"{2,4}"),Sr=digitRegex(ar,"{4,6}"),vr=_r=>({regex:RegExp(escapeToken(_r.val)),deser:([Cr])=>Cr,literal:!0}),Ar=(_r=>{if(cr.literal)return vr(_r);switch(_r.val){case"G":return oneOf(ar.eras("short",!1),0);case"GG":return oneOf(ar.eras("long",!1),0);case"y":return intUnit(xr);case"yy":return intUnit(br,untruncateYear);case"yyyy":return intUnit(pr);case"yyyyy":return intUnit(Sr);case"yyyyyy":return intUnit(mr);case"M":return intUnit(gr);case"MM":return intUnit(fr);case"MMM":return oneOf(ar.months("short",!0,!1),1);case"MMMM":return oneOf(ar.months("long",!0,!1),1);case"L":return intUnit(gr);case"LL":return intUnit(fr);case"LLL":return oneOf(ar.months("short",!1,!1),1);case"LLLL":return oneOf(ar.months("long",!1,!1),1);case"d":return intUnit(gr);case"dd":return intUnit(fr);case"o":return intUnit(yr);case"ooo":return intUnit(hr);case"HH":return intUnit(fr);case"H":return intUnit(gr);case"hh":return intUnit(fr);case"h":return intUnit(gr);case"mm":return intUnit(fr);case"m":return intUnit(gr);case"q":return intUnit(gr);case"qq":return intUnit(fr);case"s":return intUnit(gr);case"ss":return intUnit(fr);case"S":return intUnit(yr);case"SSS":return intUnit(hr);case"u":return simple(wr);case"uu":return simple(gr);case"uuu":return intUnit(dr);case"a":return oneOf(ar.meridiems(),0);case"kkkk":return intUnit(pr);case"kk":return intUnit(br,untruncateYear);case"W":return intUnit(gr);case"WW":return intUnit(fr);case"E":case"c":return intUnit(dr);case"EEE":return oneOf(ar.weekdays("short",!1,!1),1);case"EEEE":return oneOf(ar.weekdays("long",!1,!1),1);case"ccc":return oneOf(ar.weekdays("short",!0,!1),1);case"cccc":return oneOf(ar.weekdays("long",!0,!1),1);case"Z":case"ZZ":return offset$1(new RegExp(`([+-]${gr.source})(?::(${fr.source}))?`),2);case"ZZZ":return offset$1(new RegExp(`([+-]${gr.source})(${fr.source})?`),2);case"z":return simple(/[a-z_+-/]{1,256}?/i);case" ":return simple(/[^\S\n\r]/);default:return vr(_r)}})(cr)||{invalidReason:MISSING_FTP};return Ar.token=cr,Ar}const partTypeStyleToTokenVal={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function tokenForPart(cr,ar){const{type:dr,value:fr}=cr;if(dr==="literal"){const mr=/^\s+$/.test(fr);return{literal:!mr,val:mr?" ":fr}}const hr=ar[dr];let pr=partTypeStyleToTokenVal[dr];if(typeof pr=="object"&&(pr=pr[hr]),pr)return{literal:!1,val:pr}}function buildRegex(cr){return[`^${cr.map(dr=>dr.regex).reduce((dr,fr)=>`${dr}(${fr.source})`,"")}$`,cr]}function match(cr,ar,dr){const fr=cr.match(ar);if(fr){const hr={};let pr=1;for(const mr in dr)if(hasOwnProperty$2(dr,mr)){const gr=dr[mr],yr=gr.groups?gr.groups+1:1;!gr.literal&&gr.token&&(hr[gr.token.val[0]]=gr.deser(fr.slice(pr,pr+yr))),pr+=yr}return[fr,hr]}else return[fr,{}]}function dateTimeFromMatches(cr){const ar=pr=>{switch(pr){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let dr=null,fr;return isUndefined(cr.z)||(dr=IANAZone.create(cr.z)),isUndefined(cr.Z)||(dr||(dr=new FixedOffsetZone(cr.Z)),fr=cr.Z),isUndefined(cr.q)||(cr.M=(cr.q-1)*3+1),isUndefined(cr.h)||(cr.h<12&&cr.a===1?cr.h+=12:cr.h===12&&cr.a===0&&(cr.h=0)),cr.G===0&&cr.y&&(cr.y=-cr.y),isUndefined(cr.u)||(cr.S=parseMillis(cr.u)),[Object.keys(cr).reduce((pr,mr)=>{const gr=ar(mr);return gr&&(pr[gr]=cr[mr]),pr},{}),dr,fr]}let dummyDateTimeCache=null;function getDummyDateTime(){return dummyDateTimeCache||(dummyDateTimeCache=DateTime$1.fromMillis(1555555555555)),dummyDateTimeCache}function maybeExpandMacroToken(cr,ar){if(cr.literal)return cr;const dr=Formatter.macroTokenToFormatOpts(cr.val),fr=formatOptsToTokens(dr,ar);return fr==null||fr.includes(void 0)?cr:fr}function expandMacroTokens(cr,ar){return Array.prototype.concat(...cr.map(dr=>maybeExpandMacroToken(dr,ar)))}function explainFromTokens(cr,ar,dr){const fr=expandMacroTokens(Formatter.parseFormat(dr),cr),hr=fr.map(mr=>unitForToken(mr,cr)),pr=hr.find(mr=>mr.invalidReason);if(pr)return{input:ar,tokens:fr,invalidReason:pr.invalidReason};{const[mr,gr]=buildRegex(hr),yr=RegExp(mr,"i"),[xr,wr]=match(ar,yr,gr),[br,Sr,vr]=wr?dateTimeFromMatches(wr):[null,null,void 0];if(hasOwnProperty$2(wr,"a")&&hasOwnProperty$2(wr,"H"))throw new ConflictingSpecificationError("Can't include meridiem when specifying 24-hour format");return{input:ar,tokens:fr,regex:yr,rawMatches:xr,matches:wr,result:br,zone:Sr,specificOffset:vr}}}function parseFromTokens(cr,ar,dr){const{result:fr,zone:hr,specificOffset:pr,invalidReason:mr}=explainFromTokens(cr,ar,dr);return[fr,hr,pr,mr]}function formatOptsToTokens(cr,ar){return cr?Formatter.create(ar,cr).formatDateTimeParts(getDummyDateTime()).map(hr=>tokenForPart(hr,cr)):null}const nonLeapLadder=[0,31,59,90,120,151,181,212,243,273,304,334],leapLadder=[0,31,60,91,121,152,182,213,244,274,305,335];function unitOutOfRange(cr,ar){return new Invalid("unit out of range",`you specified ${ar} (of type ${typeof ar}) as a ${cr}, which is invalid`)}function dayOfWeek(cr,ar,dr){const fr=new Date(Date.UTC(cr,ar-1,dr));cr<100&&cr>=0&&fr.setUTCFullYear(fr.getUTCFullYear()-1900);const hr=fr.getUTCDay();return hr===0?7:hr}function computeOrdinal(cr,ar,dr){return dr+(isLeapYear(cr)?leapLadder:nonLeapLadder)[ar-1]}function uncomputeOrdinal(cr,ar){const dr=isLeapYear(cr)?leapLadder:nonLeapLadder,fr=dr.findIndex(pr=>pr<ar),hr=ar-dr[fr];return{month:fr+1,day:hr}}function gregorianToWeek(cr){const{year:ar,month:dr,day:fr}=cr,hr=computeOrdinal(ar,dr,fr),pr=dayOfWeek(ar,dr,fr);let mr=Math.floor((hr-pr+10)/7),gr;return mr<1?(gr=ar-1,mr=weeksInWeekYear(gr)):mr>weeksInWeekYear(ar)?(gr=ar+1,mr=1):gr=ar,{weekYear:gr,weekNumber:mr,weekday:pr,...timeObject(cr)}}function weekToGregorian(cr){const{weekYear:ar,weekNumber:dr,weekday:fr}=cr,hr=dayOfWeek(ar,1,4),pr=daysInYear(ar);let mr=dr*7+fr-hr-3,gr;mr<1?(gr=ar-1,mr+=daysInYear(gr)):mr>pr?(gr=ar+1,mr-=daysInYear(ar)):gr=ar;const{month:yr,day:xr}=uncomputeOrdinal(gr,mr);return{year:gr,month:yr,day:xr,...timeObject(cr)}}function gregorianToOrdinal(cr){const{year:ar,month:dr,day:fr}=cr,hr=computeOrdinal(ar,dr,fr);return{year:ar,ordinal:hr,...timeObject(cr)}}function ordinalToGregorian(cr){const{year:ar,ordinal:dr}=cr,{month:fr,day:hr}=uncomputeOrdinal(ar,dr);return{year:ar,month:fr,day:hr,...timeObject(cr)}}function hasInvalidWeekData(cr){const ar=isInteger$1(cr.weekYear),dr=integerBetween(cr.weekNumber,1,weeksInWeekYear(cr.weekYear)),fr=integerBetween(cr.weekday,1,7);return ar?dr?fr?!1:unitOutOfRange("weekday",cr.weekday):unitOutOfRange("week",cr.week):unitOutOfRange("weekYear",cr.weekYear)}function hasInvalidOrdinalData(cr){const ar=isInteger$1(cr.year),dr=integerBetween(cr.ordinal,1,daysInYear(cr.year));return ar?dr?!1:unitOutOfRange("ordinal",cr.ordinal):unitOutOfRange("year",cr.year)}function hasInvalidGregorianData(cr){const ar=isInteger$1(cr.year),dr=integerBetween(cr.month,1,12),fr=integerBetween(cr.day,1,daysInMonth(cr.year,cr.month));return ar?dr?fr?!1:unitOutOfRange("day",cr.day):unitOutOfRange("month",cr.month):unitOutOfRange("year",cr.year)}function hasInvalidTimeData(cr){const{hour:ar,minute:dr,second:fr,millisecond:hr}=cr,pr=integerBetween(ar,0,23)||ar===24&&dr===0&&fr===0&&hr===0,mr=integerBetween(dr,0,59),gr=integerBetween(fr,0,59),yr=integerBetween(hr,0,999);return pr?mr?gr?yr?!1:unitOutOfRange("millisecond",hr):unitOutOfRange("second",fr):unitOutOfRange("minute",dr):unitOutOfRange("hour",ar)}const INVALID="Invalid DateTime",MAX_DATE=864e13;function unsupportedZone(cr){return new Invalid("unsupported zone",`the zone "${cr.name}" is not supported`)}function possiblyCachedWeekData(cr){return cr.weekData===null&&(cr.weekData=gregorianToWeek(cr.c)),cr.weekData}function clone$1(cr,ar){const dr={ts:cr.ts,zone:cr.zone,c:cr.c,o:cr.o,loc:cr.loc,invalid:cr.invalid};return new DateTime$1({...dr,...ar,old:dr})}function fixOffset(cr,ar,dr){let fr=cr-ar*60*1e3;const hr=dr.offset(fr);if(ar===hr)return[fr,ar];fr-=(hr-ar)*60*1e3;const pr=dr.offset(fr);return hr===pr?[fr,hr]:[cr-Math.min(hr,pr)*60*1e3,Math.max(hr,pr)]}function tsToObj(cr,ar){cr+=ar*60*1e3;const dr=new Date(cr);return{year:dr.getUTCFullYear(),month:dr.getUTCMonth()+1,day:dr.getUTCDate(),hour:dr.getUTCHours(),minute:dr.getUTCMinutes(),second:dr.getUTCSeconds(),millisecond:dr.getUTCMilliseconds()}}function objToTS(cr,ar,dr){return fixOffset(objToLocalTS(cr),ar,dr)}function adjustTime(cr,ar){const dr=cr.o,fr=cr.c.year+Math.trunc(ar.years),hr=cr.c.month+Math.trunc(ar.months)+Math.trunc(ar.quarters)*3,pr={...cr.c,year:fr,month:hr,day:Math.min(cr.c.day,daysInMonth(fr,hr))+Math.trunc(ar.days)+Math.trunc(ar.weeks)*7},mr=Duration$1.fromObject({years:ar.years-Math.trunc(ar.years),quarters:ar.quarters-Math.trunc(ar.quarters),months:ar.months-Math.trunc(ar.months),weeks:ar.weeks-Math.trunc(ar.weeks),days:ar.days-Math.trunc(ar.days),hours:ar.hours,minutes:ar.minutes,seconds:ar.seconds,milliseconds:ar.milliseconds}).as("milliseconds"),gr=objToLocalTS(pr);let[yr,xr]=fixOffset(gr,dr,cr.zone);return mr!==0&&(yr+=mr,xr=cr.zone.offset(yr)),{ts:yr,o:xr}}function parseDataToDateTime(cr,ar,dr,fr,hr,pr){const{setZone:mr,zone:gr}=dr;if(cr&&Object.keys(cr).length!==0||ar){const yr=ar||gr,xr=DateTime$1.fromObject(cr,{...dr,zone:yr,specificOffset:pr});return mr?xr:xr.setZone(gr)}else return DateTime$1.invalid(new Invalid("unparsable",`the input "${hr}" can't be parsed as ${fr}`))}function toTechFormat(cr,ar,dr=!0){return cr.isValid?Formatter.create(Locale.create("en-US"),{allowZ:dr,forceSimple:!0}).formatDateTimeFromString(cr,ar):null}function toISODate(cr,ar){const dr=cr.c.year>9999||cr.c.year<0;let fr="";return dr&&cr.c.year>=0&&(fr+="+"),fr+=padStart(cr.c.year,dr?6:4),ar?(fr+="-",fr+=padStart(cr.c.month),fr+="-",fr+=padStart(cr.c.day)):(fr+=padStart(cr.c.month),fr+=padStart(cr.c.day)),fr}function toISOTime(cr,ar,dr,fr,hr,pr){let mr=padStart(cr.c.hour);return ar?(mr+=":",mr+=padStart(cr.c.minute),(cr.c.second!==0||!dr)&&(mr+=":")):mr+=padStart(cr.c.minute),(cr.c.second!==0||!dr)&&(mr+=padStart(cr.c.second),(cr.c.millisecond!==0||!fr)&&(mr+=".",mr+=padStart(cr.c.millisecond,3))),hr&&(cr.isOffsetFixed&&cr.offset===0&&!pr?mr+="Z":cr.o<0?(mr+="-",mr+=padStart(Math.trunc(-cr.o/60)),mr+=":",mr+=padStart(Math.trunc(-cr.o%60))):(mr+="+",mr+=padStart(Math.trunc(cr.o/60)),mr+=":",mr+=padStart(Math.trunc(cr.o%60)))),pr&&(mr+="["+cr.zone.ianaName+"]"),mr}const defaultUnitValues={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},defaultWeekUnitValues={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},defaultOrdinalUnitValues={ordinal:1,hour:0,minute:0,second:0,millisecond:0},orderedUnits=["year","month","day","hour","minute","second","millisecond"],orderedWeekUnits=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],orderedOrdinalUnits=["year","ordinal","hour","minute","second","millisecond"];function normalizeUnit(cr){const ar={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[cr.toLowerCase()];if(!ar)throw new InvalidUnitError(cr);return ar}function quickDT(cr,ar){const dr=normalizeZone(ar.zone,Settings.defaultZone),fr=Locale.fromObject(ar),hr=Settings.now();let pr,mr;if(isUndefined(cr.year))pr=hr;else{for(const xr of orderedUnits)isUndefined(cr[xr])&&(cr[xr]=defaultUnitValues[xr]);const gr=hasInvalidGregorianData(cr)||hasInvalidTimeData(cr);if(gr)return DateTime$1.invalid(gr);const yr=dr.offset(hr);[pr,mr]=objToTS(cr,yr,dr)}return new DateTime$1({ts:pr,zone:dr,loc:fr,o:mr})}function diffRelative(cr,ar,dr){const fr=isUndefined(dr.round)?!0:dr.round,hr=(mr,gr)=>(mr=roundTo$1(mr,fr||dr.calendary?0:2,!0),ar.loc.clone(dr).relFormatter(dr).format(mr,gr)),pr=mr=>dr.calendary?ar.hasSame(cr,mr)?0:ar.startOf(mr).diff(cr.startOf(mr),mr).get(mr):ar.diff(cr,mr).get(mr);if(dr.unit)return hr(pr(dr.unit),dr.unit);for(const mr of dr.units){const gr=pr(mr);if(Math.abs(gr)>=1)return hr(gr,mr)}return hr(cr>ar?-0:0,dr.units[dr.units.length-1])}function lastOpts(cr){let ar={},dr;return cr.length>0&&typeof cr[cr.length-1]=="object"?(ar=cr[cr.length-1],dr=Array.from(cr).slice(0,cr.length-1)):dr=Array.from(cr),[ar,dr]}let DateTime$1=class yi{constructor(ar){const dr=ar.zone||Settings.defaultZone;let fr=ar.invalid||(Number.isNaN(ar.ts)?new Invalid("invalid input"):null)||(dr.isValid?null:unsupportedZone(dr));this.ts=isUndefined(ar.ts)?Settings.now():ar.ts;let hr=null,pr=null;if(!fr)if(ar.old&&ar.old.ts===this.ts&&ar.old.zone.equals(dr))[hr,pr]=[ar.old.c,ar.old.o];else{const gr=dr.offset(this.ts);hr=tsToObj(this.ts,gr),fr=Number.isNaN(hr.year)?new Invalid("invalid input"):null,hr=fr?null:hr,pr=fr?null:gr}this._zone=dr,this.loc=ar.loc||Locale.create(),this.invalid=fr,this.weekData=null,this.c=hr,this.o=pr,this.isLuxonDateTime=!0}static now(){return new yi({})}static local(){const[ar,dr]=lastOpts(arguments),[fr,hr,pr,mr,gr,yr,xr]=dr;return quickDT({year:fr,month:hr,day:pr,hour:mr,minute:gr,second:yr,millisecond:xr},ar)}static utc(){const[ar,dr]=lastOpts(arguments),[fr,hr,pr,mr,gr,yr,xr]=dr;return ar.zone=FixedOffsetZone.utcInstance,quickDT({year:fr,month:hr,day:pr,hour:mr,minute:gr,second:yr,millisecond:xr},ar)}static fromJSDate(ar,dr={}){const fr=isDate(ar)?ar.valueOf():NaN;if(Number.isNaN(fr))return yi.invalid("invalid input");const hr=normalizeZone(dr.zone,Settings.defaultZone);return hr.isValid?new yi({ts:fr,zone:hr,loc:Locale.fromObject(dr)}):yi.invalid(unsupportedZone(hr))}static fromMillis(ar,dr={}){if(isNumber$1(ar))return ar<-MAX_DATE||ar>MAX_DATE?yi.invalid("Timestamp out of range"):new yi({ts:ar,zone:normalizeZone(dr.zone,Settings.defaultZone),loc:Locale.fromObject(dr)});throw new InvalidArgumentError(`fromMillis requires a numerical input, but received a ${typeof ar} with value ${ar}`)}static fromSeconds(ar,dr={}){if(isNumber$1(ar))return new yi({ts:ar*1e3,zone:normalizeZone(dr.zone,Settings.defaultZone),loc:Locale.fromObject(dr)});throw new InvalidArgumentError("fromSeconds requires a numerical input")}static fromObject(ar,dr={}){ar=ar||{};const fr=normalizeZone(dr.zone,Settings.defaultZone);if(!fr.isValid)return yi.invalid(unsupportedZone(fr));const hr=Settings.now(),pr=isUndefined(dr.specificOffset)?fr.offset(hr):dr.specificOffset,mr=normalizeObject(ar,normalizeUnit),gr=!isUndefined(mr.ordinal),yr=!isUndefined(mr.year),xr=!isUndefined(mr.month)||!isUndefined(mr.day),wr=yr||xr,br=mr.weekYear||mr.weekNumber,Sr=Locale.fromObject(dr);if((wr||gr)&&br)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(xr&&gr)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");const vr=br||mr.weekday&&!wr;let Er,Ar,_r=tsToObj(hr,pr);vr?(Er=orderedWeekUnits,Ar=defaultWeekUnitValues,_r=gregorianToWeek(_r)):gr?(Er=orderedOrdinalUnits,Ar=defaultOrdinalUnitValues,_r=gregorianToOrdinal(_r)):(Er=orderedUnits,Ar=defaultUnitValues);let Cr=!1;for(const Br of Er){const Fr=mr[Br];isUndefined(Fr)?Cr?mr[Br]=Ar[Br]:mr[Br]=_r[Br]:Cr=!0}const kr=vr?hasInvalidWeekData(mr):gr?hasInvalidOrdinalData(mr):hasInvalidGregorianData(mr),Rr=kr||hasInvalidTimeData(mr);if(Rr)return yi.invalid(Rr);const Ir=vr?weekToGregorian(mr):gr?ordinalToGregorian(mr):mr,[Nr,Pr]=objToTS(Ir,pr,fr),Tr=new yi({ts:Nr,zone:fr,o:Pr,loc:Sr});return mr.weekday&&wr&&ar.weekday!==Tr.weekday?yi.invalid("mismatched weekday",`you can't specify both a weekday of ${mr.weekday} and a date of ${Tr.toISO()}`):Tr}static fromISO(ar,dr={}){const[fr,hr]=parseISODate(ar);return parseDataToDateTime(fr,hr,dr,"ISO 8601",ar)}static fromRFC2822(ar,dr={}){const[fr,hr]=parseRFC2822Date(ar);return parseDataToDateTime(fr,hr,dr,"RFC 2822",ar)}static fromHTTP(ar,dr={}){const[fr,hr]=parseHTTPDate(ar);return parseDataToDateTime(fr,hr,dr,"HTTP",dr)}static fromFormat(ar,dr,fr={}){if(isUndefined(ar)||isUndefined(dr))throw new InvalidArgumentError("fromFormat requires an input string and a format");const{locale:hr=null,numberingSystem:pr=null}=fr,mr=Locale.fromOpts({locale:hr,numberingSystem:pr,defaultToEN:!0}),[gr,yr,xr,wr]=parseFromTokens(mr,ar,dr);return wr?yi.invalid(wr):parseDataToDateTime(gr,yr,fr,`format ${dr}`,ar,xr)}static fromString(ar,dr,fr={}){return yi.fromFormat(ar,dr,fr)}static fromSQL(ar,dr={}){const[fr,hr]=parseSQL(ar);return parseDataToDateTime(fr,hr,dr,"SQL",ar)}static invalid(ar,dr=null){if(!ar)throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");const fr=ar instanceof Invalid?ar:new Invalid(ar,dr);if(Settings.throwOnInvalid)throw new InvalidDateTimeError(fr);return new yi({invalid:fr})}static isDateTime(ar){return ar&&ar.isLuxonDateTime||!1}static parseFormatForOpts(ar,dr={}){const fr=formatOptsToTokens(ar,Locale.fromObject(dr));return fr?fr.map(hr=>hr?hr.val:null).join(""):null}static expandFormat(ar,dr={}){return expandMacroTokens(Formatter.parseFormat(ar),Locale.fromObject(dr)).map(hr=>hr.val).join("")}get(ar){return this[ar]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?possiblyCachedWeekData(this).weekYear:NaN}get weekNumber(){return this.isValid?possiblyCachedWeekData(this).weekNumber:NaN}get weekday(){return this.isValid?possiblyCachedWeekData(this).weekday:NaN}get ordinal(){return this.isValid?gregorianToOrdinal(this.c).ordinal:NaN}get monthShort(){return this.isValid?Info.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Info.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Info.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Info.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return isLeapYear(this.year)}get daysInMonth(){return daysInMonth(this.year,this.month)}get daysInYear(){return this.isValid?daysInYear(this.year):NaN}get weeksInWeekYear(){return this.isValid?weeksInWeekYear(this.weekYear):NaN}resolvedLocaleOptions(ar={}){const{locale:dr,numberingSystem:fr,calendar:hr}=Formatter.create(this.loc.clone(ar),ar).resolvedOptions(this);return{locale:dr,numberingSystem:fr,outputCalendar:hr}}toUTC(ar=0,dr={}){return this.setZone(FixedOffsetZone.instance(ar),dr)}toLocal(){return this.setZone(Settings.defaultZone)}setZone(ar,{keepLocalTime:dr=!1,keepCalendarTime:fr=!1}={}){if(ar=normalizeZone(ar,Settings.defaultZone),ar.equals(this.zone))return this;if(ar.isValid){let hr=this.ts;if(dr||fr){const pr=ar.offset(this.ts),mr=this.toObject();[hr]=objToTS(mr,pr,ar)}return clone$1(this,{ts:hr,zone:ar})}else return yi.invalid(unsupportedZone(ar))}reconfigure({locale:ar,numberingSystem:dr,outputCalendar:fr}={}){const hr=this.loc.clone({locale:ar,numberingSystem:dr,outputCalendar:fr});return clone$1(this,{loc:hr})}setLocale(ar){return this.reconfigure({locale:ar})}set(ar){if(!this.isValid)return this;const dr=normalizeObject(ar,normalizeUnit),fr=!isUndefined(dr.weekYear)||!isUndefined(dr.weekNumber)||!isUndefined(dr.weekday),hr=!isUndefined(dr.ordinal),pr=!isUndefined(dr.year),mr=!isUndefined(dr.month)||!isUndefined(dr.day),gr=pr||mr,yr=dr.weekYear||dr.weekNumber;if((gr||hr)&&yr)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(mr&&hr)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");let xr;fr?xr=weekToGregorian({...gregorianToWeek(this.c),...dr}):isUndefined(dr.ordinal)?(xr={...this.toObject(),...dr},isUndefined(dr.day)&&(xr.day=Math.min(daysInMonth(xr.year,xr.month),xr.day))):xr=ordinalToGregorian({...gregorianToOrdinal(this.c),...dr});const[wr,br]=objToTS(xr,this.o,this.zone);return clone$1(this,{ts:wr,o:br})}plus(ar){if(!this.isValid)return this;const dr=Duration$1.fromDurationLike(ar);return clone$1(this,adjustTime(this,dr))}minus(ar){if(!this.isValid)return this;const dr=Duration$1.fromDurationLike(ar).negate();return clone$1(this,adjustTime(this,dr))}startOf(ar){if(!this.isValid)return this;const dr={},fr=Duration$1.normalizeUnit(ar);switch(fr){case"years":dr.month=1;case"quarters":case"months":dr.day=1;case"weeks":case"days":dr.hour=0;case"hours":dr.minute=0;case"minutes":dr.second=0;case"seconds":dr.millisecond=0;break}if(fr==="weeks"&&(dr.weekday=1),fr==="quarters"){const hr=Math.ceil(this.month/3);dr.month=(hr-1)*3+1}return this.set(dr)}endOf(ar){return this.isValid?this.plus({[ar]:1}).startOf(ar).minus(1):this}toFormat(ar,dr={}){return this.isValid?Formatter.create(this.loc.redefaultToEN(dr)).formatDateTimeFromString(this,ar):INVALID}toLocaleString(ar=DATE_SHORT,dr={}){return this.isValid?Formatter.create(this.loc.clone(dr),ar).formatDateTime(this):INVALID}toLocaleParts(ar={}){return this.isValid?Formatter.create(this.loc.clone(ar),ar).formatDateTimeParts(this):[]}toISO({format:ar="extended",suppressSeconds:dr=!1,suppressMilliseconds:fr=!1,includeOffset:hr=!0,extendedZone:pr=!1}={}){if(!this.isValid)return null;const mr=ar==="extended";let gr=toISODate(this,mr);return gr+="T",gr+=toISOTime(this,mr,dr,fr,hr,pr),gr}toISODate({format:ar="extended"}={}){return this.isValid?toISODate(this,ar==="extended"):null}toISOWeekDate(){return toTechFormat(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:ar=!1,suppressSeconds:dr=!1,includeOffset:fr=!0,includePrefix:hr=!1,extendedZone:pr=!1,format:mr="extended"}={}){return this.isValid?(hr?"T":"")+toISOTime(this,mr==="extended",dr,ar,fr,pr):null}toRFC2822(){return toTechFormat(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return toTechFormat(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?toISODate(this,!0):null}toSQLTime({includeOffset:ar=!0,includeZone:dr=!1,includeOffsetSpace:fr=!0}={}){let hr="HH:mm:ss.SSS";return(dr||ar)&&(fr&&(hr+=" "),dr?hr+="z":ar&&(hr+="ZZ")),toTechFormat(this,hr,!0)}toSQL(ar={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(ar)}`:null}toString(){return this.isValid?this.toISO():INVALID}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(ar={}){if(!this.isValid)return{};const dr={...this.c};return ar.includeConfig&&(dr.outputCalendar=this.outputCalendar,dr.numberingSystem=this.loc.numberingSystem,dr.locale=this.loc.locale),dr}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(ar,dr="milliseconds",fr={}){if(!this.isValid||!ar.isValid)return Duration$1.invalid("created by diffing an invalid DateTime");const hr={locale:this.locale,numberingSystem:this.numberingSystem,...fr},pr=maybeArray(dr).map(Duration$1.normalizeUnit),mr=ar.valueOf()>this.valueOf(),gr=mr?this:ar,yr=mr?ar:this,xr=diff(gr,yr,pr,hr);return mr?xr.negate():xr}diffNow(ar="milliseconds",dr={}){return this.diff(yi.now(),ar,dr)}until(ar){return this.isValid?Interval.fromDateTimes(this,ar):this}hasSame(ar,dr){if(!this.isValid)return!1;const fr=ar.valueOf(),hr=this.setZone(ar.zone,{keepLocalTime:!0});return hr.startOf(dr)<=fr&&fr<=hr.endOf(dr)}equals(ar){return this.isValid&&ar.isValid&&this.valueOf()===ar.valueOf()&&this.zone.equals(ar.zone)&&this.loc.equals(ar.loc)}toRelative(ar={}){if(!this.isValid)return null;const dr=ar.base||yi.fromObject({},{zone:this.zone}),fr=ar.padding?this<dr?-ar.padding:ar.padding:0;let hr=["years","months","days","hours","minutes","seconds"],pr=ar.unit;return Array.isArray(ar.unit)&&(hr=ar.unit,pr=void 0),diffRelative(dr,this.plus(fr),{...ar,numeric:"always",units:hr,unit:pr})}toRelativeCalendar(ar={}){return this.isValid?diffRelative(ar.base||yi.fromObject({},{zone:this.zone}),this,{...ar,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...ar){if(!ar.every(yi.isDateTime))throw new InvalidArgumentError("min requires all arguments be DateTimes");return bestBy(ar,dr=>dr.valueOf(),Math.min)}static max(...ar){if(!ar.every(yi.isDateTime))throw new InvalidArgumentError("max requires all arguments be DateTimes");return bestBy(ar,dr=>dr.valueOf(),Math.max)}static fromFormatExplain(ar,dr,fr={}){const{locale:hr=null,numberingSystem:pr=null}=fr,mr=Locale.fromOpts({locale:hr,numberingSystem:pr,defaultToEN:!0});return explainFromTokens(mr,ar,dr)}static fromStringExplain(ar,dr,fr={}){return yi.fromFormatExplain(ar,dr,fr)}static get DATE_SHORT(){return DATE_SHORT}static get DATE_MED(){return DATE_MED}static get DATE_MED_WITH_WEEKDAY(){return DATE_MED_WITH_WEEKDAY}static get DATE_FULL(){return DATE_FULL}static get DATE_HUGE(){return DATE_HUGE}static get TIME_SIMPLE(){return TIME_SIMPLE}static get TIME_WITH_SECONDS(){return TIME_WITH_SECONDS}static get TIME_WITH_SHORT_OFFSET(){return TIME_WITH_SHORT_OFFSET}static get TIME_WITH_LONG_OFFSET(){return TIME_WITH_LONG_OFFSET}static get TIME_24_SIMPLE(){return TIME_24_SIMPLE}static get TIME_24_WITH_SECONDS(){return TIME_24_WITH_SECONDS}static get TIME_24_WITH_SHORT_OFFSET(){return TIME_24_WITH_SHORT_OFFSET}static get TIME_24_WITH_LONG_OFFSET(){return TIME_24_WITH_LONG_OFFSET}static get DATETIME_SHORT(){return DATETIME_SHORT}static get DATETIME_SHORT_WITH_SECONDS(){return DATETIME_SHORT_WITH_SECONDS}static get DATETIME_MED(){return DATETIME_MED}static get DATETIME_MED_WITH_SECONDS(){return DATETIME_MED_WITH_SECONDS}static get DATETIME_MED_WITH_WEEKDAY(){return DATETIME_MED_WITH_WEEKDAY}static get DATETIME_FULL(){return DATETIME_FULL}static get DATETIME_FULL_WITH_SECONDS(){return DATETIME_FULL_WITH_SECONDS}static get DATETIME_HUGE(){return DATETIME_HUGE}static get DATETIME_HUGE_WITH_SECONDS(){return DATETIME_HUGE_WITH_SECONDS}};function friendlyDateTime(cr){if(DateTime$1.isDateTime(cr))return cr;if(cr&&cr.valueOf&&isNumber$1(cr.valueOf()))return DateTime$1.fromJSDate(cr);if(cr&&typeof cr=="object")return DateTime$1.fromObject(cr);throw new InvalidArgumentError(`Unknown datetime argument: ${cr}, of type ${typeof cr}`)}function createJoinableMatchSystem(cr){const{world:ar,components:{MatchJoinable:dr,MatchConfig:fr,MatchReady:hr,MatchFinished:pr},utils:{matchIsLive:mr}}=cr,gr=xr=>{const wr=DateTime$1.utc().toSeconds(),br=!mr(xr),Sr=de$2(fr,xr).registrationTime<=BigInt(Math.floor(wr));br&&Sr?E$5(dr,xr,{value:!0}):E$5(dr,xr,{value:!1})},yr=()=>{const xr=A$6([Ye$3(fr),Ge$2(pr)]);for(const wr of xr)gr(wr)};yr(),setInterval(yr,5e3),_$4(ar,[Ye$3(fr),Ye$3(hr),Ge$2(pr)],({entity:xr})=>gr(xr)),_$4(ar,[Ye$3(fr),Ge$2(hr),Ge$2(pr)],({entity:xr})=>gr(xr))}async function createNetworkLayer(cr){const{network:ar,components:dr}=await setup(cr),{worldContract:fr,matchEntity:hr}=ar,pr=hr?matchIdFromEntity(hr):null,mr=typeof window<"u",gr=()=>mr?localStorage.getItem("analytics-consent")==="true":!1,yr=()=>{const ts=[...A$6([Ye$3(dr.Transaction)])];return ts.reduce((fs,rs)=>{const as=g$7(dr.Transaction,rs);if(!as||as.status!=="completed")return fs;const ps=Number((as.completedTimestamp??0n)-(as.submittedTimestamp??0n));return fs+ps},0)/(ts.filter(fs=>g$7(dr.Transaction,fs)?.status==="completed").length||1)},{executeSystem:xr,executeSystemWithExternalWallet:wr}=createSystemExecutor({worldContract:fr,network:ar,components:dr,sendAnalytics:gr(),calculateMeanTxResponseTime:yr});async function br(ts,fs){if(!hr)return;console.log(`Moving entity ${ts} to position (${fs[fs.length-1].x}, ${fs[fs.length-1].y})}`);const rs=fs[fs.length-1],{externalWalletClient:as}=useStore.getState();await xr({entity:ts,systemCall:"callFrom",systemId:"Move",confirmCompletionCallback:()=>new Promise(ps=>{const xs=dr.Position.update$.subscribe(Ss=>{if(Ss.entity!==ts)return;const[Ns]=Ss.value,Ts=Ns;Ts?.x!==rs.x||Ts?.y!==rs.y||(ps(),xs.unsubscribe())})}),args:[a$3({abi:IWorldAbi,from:as.account.address,systemId:MOVE_SYSTEM_ID,functionName:"move",args:[hr,decodeMatchEntity(ts).entity,fs]})]})}async function Sr(ts,fs){if(!hr)return;console.log(`Attacking entity ${fs} with entity ${ts}`);const{externalWalletClient:rs}=useStore.getState();await xr({entity:ts,systemCall:"callFrom",systemId:"Attack",confirmCompletionCallback:()=>new Promise(as=>{const ps=dr.CombatOutcome.update$.subscribe(xs=>{if(xs.entity!==ts)return;const[Ss]=xs.value;encodeMatchEntity(hr,Ss?.attacker??"0x0")===ts&&(as(),ps.unsubscribe())})}),args:[a$3({abi:IWorldAbi,from:rs.account.address,systemId:MOVE_SYSTEM_ID,functionName:"fight",args:[hr,decodeMatchEntity(ts).entity,decodeMatchEntity(fs).entity]})]})}async function vr(ts,fs,rs){if(!hr)return;console.log(`Moving entity ${ts} to position (${fs[fs.length-1].x}, ${fs[fs.length-1].y}) and attacking entity ${rs}`);const{externalWalletClient:as}=useStore.getState();await xr({entity:ts,systemCall:"callFrom",systemId:"MoveAndAttack",confirmCompletionCallback:()=>new Promise(ps=>{const xs=dr.CombatOutcome.update$.subscribe(Ss=>{if(Ss.entity!==ts)return;const[Ns]=Ss.value;encodeMatchEntity(hr,Ns?.attacker??"0x0")===ts&&(ps(),xs.unsubscribe())})}),args:[a$3({abi:IWorldAbi,from:as.account.address,systemId:MOVE_SYSTEM_ID,functionName:"moveAndAttack",args:[hr,decodeMatchEntity(ts).entity,fs,decodeMatchEntity(rs).entity]})]})}async function Er(ts,fs,rs){if(!hr)return;console.log(`Building prototype ${fs} at ${JSON.stringify(rs)}`);const{externalWalletClient:as}=useStore.getState();await xr({entity:ts,systemCall:"callFrom",systemId:"Build",args:[a$3({abi:IWorldAbi,from:as.account.address,systemId:BUILD_SYSTEM_ID,functionName:"build",args:[hr,decodeMatchEntity(ts).entity,fs,{x:rs.x,y:rs.y}]})]})}async function Ar(ts,fs,{owner:rs,matchId:as}){console.log(`Spawning prototype ${ts} at ${JSON.stringify(fs)}`);const ps=as??pr??-1;return await fr.write.spawnTemplate([matchIdToEntity(ps),ts,rs?decodeMatchEntity(rs).entity:BYTES32_ZERO,{x:fs.x,y:fs.y}])}function _r(ts){if(le$3(dr.Player,ts))return ts;if(le$3(dr.OwnedBy,ts))return de$2(dr.OwnedBy,ts).value}function Cr(ts,fs){const rs=_r(ts);return rs&&rs===fs}function kr(ts,fs=hr){if(!ts||!fs)return;const rs=ts;return[...A$6([Je$2(dr.OwnedBy,{value:rs}),Ye$3(dr.Player),Je$2(dr.Match,{matchEntity:fs})])][0]}let Rr;function Ir(){if(Rr)return Rr;const{externalWalletClient:ts}=useStore.getState();if(ts&&ts.account)return Rr=kr(addressToEntityID(ts.account.address)),Rr}function Nr(ts){const fs=le$3(dr.UnitType,ts),rs=le$3(dr.OwnedByCurrentPlayer,ts);if(fs&&rs)return de$2(dr.OwnedByCurrentPlayer,ts).value;const as=Ir();if(!as)return!1;const ps=ft$3(dr.Player.metadata.keySchema,as).entity;return ps?!!Cr(ts,ps):!1}const Pr=(ts,fs)=>{const rs={distance:1/0,Entity:null},as=g$7(dr.Position,ts);if(!as)return rs;for(const ps of fs){const xs=g$7(dr.Position,ps);if(!xs)continue;const Ss=manhattan(as,xs);Ss<rs.distance&&(rs.distance=Ss,rs.Entity=ps)}return rs},Tr=()=>hr?g$7(dr.MatchConfig,hr):void 0,Br=(ts,fs)=>{const rs=g$7(dr.MatchConfig,ts);if(!rs)return-1;const as=BigNumber.from(rs.startTime),ps=BigNumber.from(rs.turnLength);let xs=BigNumber.from(fs);return xs<as&&(xs=as),xs.sub(as).div(ps).toNumber()},Fr=ts=>hr?Br(hr,ts):-1,jr=ts=>qr(ts,SPAWN_SETTLEMENT),Ur=ts=>{const fs=g$7(dr.MatchConfig,ts);return fs?jr(fs.levelId).length:0},qr=(ts,fs)=>{const{LevelTemplates:rs}=dr,as=g$7(rs,ts);if(!as)return[];const ps=[];return as.value.reduce((xs,Ss,Ns)=>Ss===fs?xs.concat(BigInt(Ns)):xs,ps)},Hr=(ts,fs)=>{const{SpawnReservedBy:rs}=dr;return jr(ts).filter(as=>!le$3(rs,w$9(rs.metadata.keySchema,{matchEntity:fs,index:as})))},Or=ts=>{const{MatchConfig:fs,MatchFinished:rs}=dr;if(le$3(rs,ts))return!1;const as=g$7(fs,ts);return as?as.startTime>0:!1};function Mr(ts,fs){const{name:rs}=I$4(ts),as=dr[rs];return["TerrainType","StructureType","UnitType"].includes(rs)?E$2({value:"uint8"},fs):E$2(as.metadata?.valueSchema,fs)}function Lr(ts,fs){const rs={...dr.TemplateContent.metadata.keySchema,tableId:"bytes32"},{staticData:as}=de$2(dr.TemplateContent,w$9(rs,{templateId:fs,tableId:ts}));return Mr(ts,as)}function Vr(ts,fs){return de$2(dr.LevelPosition,w$9(dr.LevelPosition.metadata.keySchema,{levelId:ts,index:fs}))}function Jr(ts,fs){const rs=de$2(dr.LevelTemplates,ts).value[Number(fs)],as={},{value:ps}=de$2(dr.TemplateTables,rs);return ps.forEach(xs=>{const{name:Ss}=I$4(xs);as[Ss]=Lr(xs,rs)}),as.Position=Vr(ts,fs),as}function es(ts){const{value:fs}=de$2(dr.LevelTemplates,ts),rs=[];return fs.reduce((as,ps,xs)=>(le$3(dr.VirtualLevelTemplates,ps)&&as.push(Jr(ts,BigInt(xs))),as),rs)}function ns(ts,fs){return Array.from(A$6([Ye$3(dr.UserDelegationControl)])).some(rs=>{const as=ft$3(dr.UserDelegationControl.metadata.keySchema,rs),{delegationControlId:ps}=de$2(dr.UserDelegationControl,rs);return as.delegator===ts&&as.delegatee===fs&&ps===UNLIMITED_DELEGATION})}function Qr(ts,fs,rs){return Array.from(A$6([Ye$3(dr.SystemboundDelegations)])).some(as=>{const ps=ft$3(dr.SystemboundDelegations.metadata.keySchema,as);return ps.delegator===ts&&ps.delegatee===fs&&ps.systemId===rs})}let zr;async function Wr(ts,fs){zr||(zr=ue$1());const rs=ar.networkConfig.chain.id,{address:as}=fr,{externalWalletClient:ps}=useStore.getState(),xs=ps?.account?.address;try{await fetch(`${ANALYTICS_URL}/track-client-event/${rs}/${as}`,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({event_name:ts,world_address:as,player_address:xs??"",session_wallet_address:ar.walletClient.account.address,data:JSON.stringify({...fs,session_id:zr})})})}catch{return}}const ss={world:ar.world,network:ar,components:{...ar.components,...dr},executeSystem:xr,executeSystemWithExternalWallet:wr,api:{getCurrentMatchConfig:Tr,move:br,moveAndAttack:vr,attack:Sr,buildAt:Er,dev:{spawnTemplateAt:Ar}},utils:{findClosest:Pr,getTurnAtTime:Br,getTurnAtTimeForCurrentMatch:Fr,getOwningPlayer:_r,isOwnedBy:Cr,isOwnedByCurrentPlayer:Nr,getPlayerEntity:kr,getCurrentPlayerEntity:Ir,manhattan,getTemplateValueStrict:Lr,getLevelPositionStrict:Vr,getLevelIndices:qr,getLevelSpawns:jr,getAvailableLevelSpawns:Hr,matchIsLive:Or,getMaxPlayers:Ur,getVirtualLevelData:es,getAnalyticsConsent:gr,hasUnlimitedDelegation:ns,hasSystemDelegation:Qr,sendAnalyticsEvent:Wr,calculateMeanTxResponseTime:yr},isBrowser:mr};if(mr&&"indexedDB"in window){const ts=new TransactionDB(ar.networkConfig.worldAddress,ar.networkConfig.chainId);createTransactionCacheSystem(ss,ts)}return hr||createJoinableMatchSystem(ss),ss}var UnitTypes=(cr=>(cr[cr.Unknown=0]="Unknown",cr[cr.Swordsman=1]="Swordsman",cr[cr.Pikeman=2]="Pikeman",cr[cr.Golem=3]="Golem",cr[cr.Rider=4]="Rider",cr[cr.Knight=5]="Knight",cr[cr.Dragon=6]="Dragon",cr[cr.Archer=7]="Archer",cr[cr.Catapult=8]="Catapult",cr[cr.Wizard=9]="Wizard",cr[cr.Brute=10]="Brute",cr))(UnitTypes||{});const UnitTypeNames={0:"Unknown",1:"Swordsman",2:"Pikeman",3:"Halberdier",7:"Archer",8:"Crossbowman",9:"Marksman",4:"Rider",5:"Knight",6:"Dragoon",10:"Brute"},UnitTypeDescriptions={0:"Unknown",3:"Infantry Hero",9:"Ranged Hero",6:"Cavalry Hero"};var StructureTypes=(cr=>(cr[cr.Unknown=0]="Unknown",cr[cr.Settlement=1]="Settlement",cr[cr.SpawnSettlement=2]="SpawnSettlement",cr[cr.GoldShrine=3]="GoldShrine",cr[cr.EscapePortal=4]="EscapePortal",cr[cr.Portal=5]="Portal",cr[cr.Container=6]="Container",cr[cr.SummoningAltar=7]="SummoningAltar",cr[cr.BlazingHeartShrine=8]="BlazingHeartShrine",cr[cr.WoodenWall=9]="WoodenWall",cr[cr.GoldMine=10]="GoldMine",cr[cr.Village=11]="Village",cr[cr.EmberCrownShrine=12]="EmberCrownShrine",cr[cr.CrystalGenerator=13]="CrystalGenerator",cr[cr.MetalGenerator=14]="MetalGenerator",cr[cr.FossilGenerator=15]="FossilGenerator",cr[cr.WidgetGenerator=16]="WidgetGenerator",cr[cr.EmberCrownShrineRuins=17]="EmberCrownShrineRuins",cr))(StructureTypes||{});const StructureTypeNames={2:"Spawn Settlement",1:"Settlement",11:"Village",3:"Gold Shrine",4:"Escape Portal",5:"Portal",6:"Container",7:"Summoning Altar",8:"Crystal Heart Shrine",9:"Wooden Wall",10:"Charging Crystal",12:"Ember Crown Shrine",13:"Crystal Mine",14:"Metal Mine",15:"Fossil Pile",16:"Widget Pile",17:"Ember Crown Shrine Ruins"},ItemTypeNames={1:"Gold",2:"Ember Crown",3:"Crystal Heart",4:"Movement Amplifier",5:"Strength Amplifier",6:"Energy Amplifier",7:"Crystal",8:"Metal",9:"Fossil",10:"Widget"};var TerrainTypes=(cr=>(cr[cr.Unknown=0]="Unknown",cr[cr.Grass=1]="Grass",cr[cr.Mountain=2]="Mountain",cr[cr.Water=3]="Water",cr[cr.Wall=4]="Wall",cr[cr.Forest=5]="Forest",cr[cr.StoneWall=6]="StoneWall",cr[cr.LavaGround=7]="LavaGround",cr[cr.LavaMountain=8]="LavaMountain",cr[cr.LavaForest=9]="LavaForest",cr[cr.Lava=10]="Lava",cr[cr.RockWall=11]="RockWall",cr))(TerrainTypes||{});const TerrainTypeNames={1:"Grass",2:"Mountain",3:"Water",4:"Wall",5:"Forest",7:"Ground",8:"Mountain",9:"Forest",10:"Lava"},TILE_WIDTH=32,TILE_HEIGHT=32;var Scenes=(cr=>(cr.Main="Main",cr.UI="UI",cr))(Scenes||{}),Maps=(cr=>(cr.Main="Main",cr.Pixel="Pixel",cr.Tactic="Tactic",cr.Strategic="Strategic",cr))(Maps||{}),Assets=(cr=>(cr.OverworldTileset="OverworldTileset",cr.MainAtlas="MainAtlas",cr.Background="Background",cr.TiledBackground="TiledBackground",cr.MinimapBackground="MinimapBackground",cr.CloudBackground="CloudBackground",cr.Cloud1="Cloud1",cr.Cloud2="Cloud2",cr.Professor="Professor",cr.Splash="Splash",cr.Gold="Gold",cr.Central="Central",cr.LeftMid="LeftMid",cr.RightMid="RightMid",cr.LeftCornerUpA="LeftCornerUpA",cr.LeftCornerUpB="LeftCornerUpB",cr.RightCornerUpA="RightCornerUpA",cr.RightCornerUpB="RightCornerUpB",cr.UpperEdge="UpperEdge",cr.UpperEdgeLeft="UpperEdgeLeft",cr.UpperEdgeRight="UpperEdgeRight",cr.LeftEdge="LeftEdge",cr.RightEdge="RightEdge",cr))(Assets||{}),Sprites=(cr=>(cr[cr.Settlement=0]="Settlement",cr[cr.SpawnSettlement=1]="SpawnSettlement",cr[cr.Gold=2]="Gold",cr[cr.GoldMine=3]="GoldMine",cr[cr.SelectUI=4]="SelectUI",cr[cr.SummoningAltar=5]="SummoningAltar",cr[cr.WoodenWall=6]="WoodenWall",cr[cr.Crystal=7]="Crystal",cr[cr.Chain=8]="Chain",cr[cr.Cog=9]="Cog",cr[cr.Swordsman=10]="Swordsman",cr[cr.Pikeman=11]="Pikeman",cr[cr.Golem=12]="Golem",cr[cr.Archer=13]="Archer",cr[cr.Catapult=14]="Catapult",cr[cr.Wizard=15]="Wizard",cr[cr.Rider=16]="Rider",cr[cr.Knight=17]="Knight",cr[cr.Dragon=18]="Dragon",cr[cr.Brute=19]="Brute",cr[cr.BarBackground=20]="BarBackground",cr[cr.HealthBar=21]="HealthBar",cr[cr.HealthBarRed=22]="HealthBarRed",cr[cr.GoldBar=23]="GoldBar",cr[cr.Banner=24]="Banner",cr[cr.ResourceBar=25]="ResourceBar",cr[cr.Shadow=26]="Shadow",cr[cr.Boot=27]="Boot",cr[cr.BootConfirm=28]="BootConfirm",cr[cr.Sword=29]="Sword",cr[cr.SwordConfirm=30]="SwordConfirm",cr[cr.SwordUp=31]="SwordUp",cr[cr.SwordDown=32]="SwordDown",cr[cr.Armor=33]="Armor",cr[cr.NoArmor=34]="NoArmor",cr[cr.GrassPreview=35]="GrassPreview",cr[cr.MountainPreview=36]="MountainPreview",cr[cr.ForestPreview=37]="ForestPreview",cr[cr.Skull=38]="Skull",cr))(Sprites||{}),Animations=(cr=>(cr.ChainCarousel="ChainCarousel",cr.Selection="Selection",cr.EnemySelection="EnemySelection",cr.TileHighlightRed="TileHighlightRed",cr.TileHighlightYellow="TileHighlightYellow",cr.TileOutlineRed="TileOutlineRed",cr.TileOutlineYellow="TileOutlineYellow",cr.TileOutlineWhite="TileOutlineWhite",cr.TileSelect="TileSelect",cr.Banner="Banner",cr.Gold="Gold",cr.Portal="Portal",cr.GoldShrine="GoldShrine",cr.GoldMine="GoldMine",cr.SummoningAltar="SummoningAltar",cr.Sphinx="Sphinx",cr.SpawnSettlement="SpawnSettlement",cr.Settlement="Settlement",cr.SwordsmanIdle="SwordsmanIdle",cr.PikemanIdle="PikemanIdle",cr.GolemIdle="GolemIdle",cr.ArcherIdle="ArcherIdle",cr.CatapultIdle="CatapultIdle",cr.WizardIdle="WizardIdle",cr.RiderIdle="RiderIdle",cr.KnightIdle="KnightIdle",cr.DragonIdle="DragonIdle",cr.SwordsmanAttack="SwordsmanAttack",cr.PikemanAttack="PikemanAttack",cr.GolemAttack="GolemAttack",cr.ArcherAttack="ArcherAttack",cr.CatapultAttack="CatapultAttack",cr.WizardAttack="WizardAttack",cr.RiderAttack="RiderAttack",cr.KnightAttack="KnightAttack",cr.DragonAttack="DragonAttack",cr.SwordsmanDeath="SwordsmanDeath",cr.PikemanDeath="PikemanDeath",cr.GolemDeath="GolemDeath",cr.ArcherDeath="ArcherDeath",cr.CatapultDeath="CatapultDeath",cr.WizardDeath="WizardDeath",cr.RiderDeath="RiderDeath",cr.KnightDeath="KnightDeath",cr.DragonDeath="DragonDeath",cr.BruteIdle="BruteIdle",cr.BruteAttack="BruteAttack",cr.BruteDeath="BruteDeath",cr.Capture="Capture",cr.LongGrass="LongGrass",cr))(Animations||{});function createWalkAnimations$1(){return[UnitTypes.Swordsman,UnitTypes.Pikeman,UnitTypes.Golem,UnitTypes.Archer,UnitTypes.Catapult,UnitTypes.Wizard,UnitTypes.Rider,UnitTypes.Knight,UnitTypes.Dragon,UnitTypes.Brute].reduce((cr,ar)=>(cr[ar]=[`${ar}WalkUp`,`${ar}WalkDown`,`${ar}WalkLeft`,`${ar}WalkRight`],cr),{})}const WALK_ANIMATIONS=createWalkAnimations$1(),UnitTypeSprites={[UnitTypes.Unknown]:2,[UnitTypes.Swordsman]:10,[UnitTypes.Pikeman]:11,[UnitTypes.Golem]:12,[UnitTypes.Archer]:13,[UnitTypes.Catapult]:14,[UnitTypes.Wizard]:15,[UnitTypes.Rider]:16,[UnitTypes.Knight]:17,[UnitTypes.Dragon]:18,[UnitTypes.Brute]:19},StructureTypeSprites={[StructureTypes.Settlement]:0,[StructureTypes.SpawnSettlement]:1,[StructureTypes.WoodenWall]:6,[StructureTypes.GoldMine]:3},UnitTypeAnimations={[UnitTypes.Swordsman]:"SwordsmanIdle",[UnitTypes.Pikeman]:"PikemanIdle",[UnitTypes.Golem]:"GolemIdle",[UnitTypes.Archer]:"ArcherIdle",[UnitTypes.Catapult]:"CatapultIdle",[UnitTypes.Wizard]:"WizardIdle",[UnitTypes.Rider]:"RiderIdle",[UnitTypes.Knight]:"KnightIdle",[UnitTypes.Dragon]:"DragonIdle",[UnitTypes.Brute]:"BruteIdle"},UnitTypeAttackAnimations={[UnitTypes.Swordsman]:"SwordsmanAttack",[UnitTypes.Pikeman]:"PikemanAttack",[UnitTypes.Golem]:"GolemAttack",[UnitTypes.Archer]:"ArcherAttack",[UnitTypes.Catapult]:"CatapultAttack",[UnitTypes.Wizard]:"WizardAttack",[UnitTypes.Rider]:"RiderAttack",[UnitTypes.Knight]:"KnightAttack",[UnitTypes.Dragon]:"DragonAttack",[UnitTypes.Brute]:"BruteAttack"},UnitTypeDeathAnimations={[UnitTypes.Swordsman]:"SwordsmanDeath",[UnitTypes.Pikeman]:"PikemanDeath",[UnitTypes.Golem]:"GolemDeath",[UnitTypes.Archer]:"ArcherDeath",[UnitTypes.Catapult]:"CatapultDeath",[UnitTypes.Wizard]:"WizardDeath",[UnitTypes.Rider]:"RiderDeath",[UnitTypes.Knight]:"KnightDeath",[UnitTypes.Dragon]:"DragonDeath",[UnitTypes.Brute]:"BruteDeath"},StructureTypeAnimations={[StructureTypes.EscapePortal]:"Portal",[StructureTypes.Portal]:"Portal",[StructureTypes.BlazingHeartShrine]:"Sphinx",[StructureTypes.GoldMine]:"GoldMine",[StructureTypes.SummoningAltar]:"SummoningAltar",[StructureTypes.SpawnSettlement]:"SpawnSettlement",[StructureTypes.Settlement]:"Settlement"};var Tileset=(cr=>(cr[cr.Water=8]="Water",cr[cr.Blank=9]="Blank",cr[cr.Flower1=10]="Flower1",cr[cr.Flower2=11]="Flower2",cr[cr.Grass1=12]="Grass1",cr[cr.Grass2=13]="Grass2",cr[cr.Grass3=14]="Grass3",cr[cr.LongGrassBackground=58]="LongGrassBackground",cr[cr.LavaGround=65]="LavaGround",cr[cr.LavaMountain=80]="LavaMountain",cr[cr.Forest=81]="Forest",cr[cr.LavaForest=86]="LavaForest",cr[cr.Mountain=87]="Mountain",cr))(Tileset||{}),TileAnimationKey=(cr=>(cr.LongGrassBackground="LongGrassBackground",cr))(TileAnimationKey||{});const TileAnimations={LongGrassBackground:[58,59,60,61,62,63,74,75]};var WangSetKey=(cr=>(cr.StoneWall="StoneWall",cr.Water="Water",cr.Lava="Lava",cr.RockWall="RockWall",cr))(WangSetKey||{});const WangSets={StoneWall:{1:17,4:18,5:19,16:20,17:21,20:22,21:23,64:24,65:25,68:26,69:27,80:28,81:29,84:30,85:31},Water:{1:33,4:34,5:35,16:36,17:37,20:38,21:39,64:40,65:41,68:42,69:43,80:44,81:45,84:46,85:47},Lava:{64:48,5:49,65:50,80:51,20:52,16:53,4:54,17:55,1:56,68:57},RockWall:{80:66,20:67,4:68,16:69,1:70,64:71,65:82,5:83,68:84,17:85}};var RenderDepth=(cr=>(cr[cr.AlwaysOnTop=1e4]="AlwaysOnTop",cr[cr.UI1=75]="UI1",cr[cr.UI2=70]="UI2",cr[cr.UI3=65]="UI3",cr[cr.UI4=60]="UI4",cr[cr.UI5=55]="UI5",cr[cr.Foreground1=50]="Foreground1",cr[cr.Foreground2=45]="Foreground2",cr[cr.Foreground3=40]="Foreground3",cr[cr.Foreground4=35]="Foreground4",cr[cr.Foreground5=30]="Foreground5",cr[cr.Background1=20]="Background1",cr[cr.Background2=10]="Background2",cr[cr.Background3=0]="Background3",cr[cr.Background4=-10]="Background4",cr[cr.Background5=-20]="Background5",cr))(RenderDepth||{});function addCoords(cr,ar){return{x:cr.x+ar.x,y:cr.y+ar.y}}const terrainTypeToTile={[TerrainTypes.Grass]:[Tileset.Grass1,Tileset.Grass1,Tileset.Grass1,Tileset.Grass1,Tileset.Grass2,Tileset.Grass3],[TerrainTypes.Mountain]:Tileset.Grass2,[TerrainTypes.Water]:Tileset.Blank,[TerrainTypes.Forest]:Tileset.Grass2,[TerrainTypes.StoneWall]:Tileset.Grass2,[TerrainTypes.RockWall]:Tileset.Grass2,[TerrainTypes.LavaGround]:Tileset.LavaGround,[TerrainTypes.LavaForest]:Tileset.LavaGround,[TerrainTypes.LavaMountain]:Tileset.LavaGround,[TerrainTypes.Lava]:Tileset.LavaGround},terrainTypesToForegroundTile={[TerrainTypes.Grass]:[Tileset.Flower1,Tileset.Flower2,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[TerrainTypes.Forest]:Tileset.Forest,[TerrainTypes.Mountain]:Tileset.Mountain,[TerrainTypes.LavaForest]:Tileset.LavaForest,[TerrainTypes.LavaMountain]:Tileset.LavaMountain},terrainTypeToAnimation={[TerrainTypes.Grass]:[TileAnimationKey.LongGrassBackground,null,null,null,null]},terrainTypeToForegroundAnimation={},terrainTypeToWangSet={[TerrainTypes.StoneWall]:WangSetKey.StoneWall,[TerrainTypes.RockWall]:WangSetKey.RockWall,[TerrainTypes.Water]:WangSetKey.Water,[TerrainTypes.Lava]:WangSetKey.Lava};function createMapSystem(cr){const{world:ar,parentLayers:{network:{components:{Position:dr,TerrainType:fr,MatchReady:hr},network:{matchEntity:pr}},headless:{components:{InCurrentMatch:mr}}},scenes:{Main:{config:gr,objectPool:yr,maps:{Main:xr}}}}=cr,wr=[{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:0},{x:-1,y:-1}];function br(Ar,_r){const Cr=[];for(const kr of wr){const Rr=addCoords(Ar,kr);A$6([Je$2(dr,Rr),Je$2(fr,{value:_r})]).size>0?Cr.push(1):Cr.push(0)}return Cr.reduce((kr,Rr,Ir,Nr)=>{if(Ir%2===0)return kr+Math.pow(2,Ir)*Rr;{const Pr=(Ir-1)%8,Tr=(Ir+1)%8;return Nr[Pr]&&Nr[Tr]?kr+Math.pow(2,Ir)*Rr:kr}})}function Sr(Ar){const _r=terrainTypeToWangSet[Ar];if(_r)return WangSets[_r]}function vr(Ar,_r){const Cr=Sr(_r);if(Cr)for(const kr of[Oe$2,...wr]){const Rr=addCoords(Ar,kr);if(A$6([Je$2(dr,Rr),Je$2(fr,{value:_r})]).size===0)continue;const Nr=br(Rr,_r);Cr[Nr]!=null&&xr.putTileAt(Rr,Cr[Nr],"Foreground")}}const Er=(Ar,_r,Cr)=>{const kr=de$2(dr,Ar),Rr=B$4(kr,_r,Cr);for(const qr in Assets)yr.remove(`depth-${kr.x}-${kr.y}-${qr}`);const Ir=(qr,Hr)=>{const Or=addCoords(Rr,Hr);yr.get(`depth-${kr.x}-${kr.y}-${qr}`,"Sprite").setComponent({id:"depth",once:async Lr=>{const Vr=gr.assets[qr];Lr.setTexture(Vr.key,0),Lr.setPosition(Or.x,Or.y),Lr.setDepth(RenderDepth.Background4)}})},Nr=wr.map(qr=>[...ce$4(dr,addCoords(kr,qr))].every(Hr=>!le$3(fr,Hr))),Pr=Nr[0],Tr=Nr[1],Br=Nr[2],Fr=Nr[4],jr=Nr[6],Ur=Nr[7];if(Pr&&Ir(Assets.UpperEdge,{x:0,y:-_r}),Fr)if(jr||Br)jr?Ir(Assets.LeftCornerUpA,{x:0,y:_r}):Ir(Assets.RightCornerUpA,{x:0,y:_r});else{const qr=[{x:-2,y:0},{x:2,y:0}].map(Mr=>[...ce$4(dr,addCoords(kr,Mr))].every(Lr=>!le$3(fr,Lr))),Hr=qr[0],Or=qr[1];Hr||Or?Hr?Ir(Assets.LeftCornerUpB,{x:0,y:_r}):Ir(Assets.RightCornerUpB,{x:0,y:_r}):Ir(Assets.Central,{x:0,y:_r})}jr&&(Ir(Assets.LeftEdge,{x:-_r,y:0}),Ur&&Ir(Assets.UpperEdgeLeft,{x:-_r,y:-_r})),Br&&(Ir(Assets.RightEdge,{x:_r,y:0}),Tr&&Ir(Assets.UpperEdgeRight,{x:_r,y:-_r}))};at$2(ar,[Ye$3(hr)],({entity:Ar})=>{if(Ar!=pr)return;let _r=0;at$2(ar,[Ye$3(mr),Ye$3(dr),Ye$3(fr)],Cr=>{const kr=de$2(dr,Cr.entity),{tileWidth:Rr,tileHeight:Ir}=xr,Nr=B$4(kr,Rr,Ir),Pr=de$2(fr,Cr.entity),Tr=terrainTypeToTile[Pr.value],Br=terrainTypesToForegroundTile[Pr.value],Fr=terrainTypeToAnimation[Pr.value];if(Tr==null)return;if(Fr){const qr=lodashExports.isArray(Fr)?lodashExports.sample(Fr):Fr;if(qr){xr.putAnimationAt(kr,qr);const Hr=terrainTypeToForegroundAnimation[Pr.value];Hr&&yr.get(`terrain-foreground-animation-${_r++}`,"Sprite").setComponent({id:"foreground-animation-tile",once:Mr=>{Mr.play(Hr),Mr.setPosition(Nr.x,Nr.y),Mr.setDepth(RenderDepth.Foreground1)}})}}let jr;Pr.value===TerrainTypes.StoneWall&&(jr=4473924);const Ur=lodashExports.isArray(Tr)?lodashExports.sample(Tr):Tr;if(Ur){if(xr.putTileAt(kr,Ur,void 0,jr),Er(Cr.entity,Rr,Ir),Br){const qr=lodashExports.isArray(Br)?lodashExports.sample(Br):Br;if(!qr)return;xr.putTileAt(kr,qr,"Foreground")}vr(kr,Pr.value)}},{runOnInit:!0})})}const FAST_MOVE_SPEED=250,UNIT_OFFSET=8;function createLocalPositionSystem(cr){const{world:ar,components:{Appearance:dr},parentLayers:{network:{components:{UnitType:fr,Movable:hr,Tier:pr}},local:{components:{LocalPosition:mr}}},scenes:{Main:{objectPool:gr,maps:{Main:{tileWidth:yr,tileHeight:xr}}}},api:{playAnimationWithOwnerColor:wr}}=cr;function br(Sr,vr){return vr.y<Sr.y?0:vr.y>Sr.y?1:vr.x<Sr.x?2:3}_$4(ar,[Ye$3(mr),Ye$3(dr),Ge$2(pr)],({entity:Sr,type:vr})=>{if(vr===k$5.Enter){const Er=gr.get(Sr,"Sprite"),Ar=g$7(mr,Sr);if(!Ar)return;const _r=B$4(Ar,yr,xr);Er.setComponent({id:mr.id,once:Cr=>{Cr.setPosition(_r.x,_r.y)}})}}),_$4(ar,[Ye$3(mr),Ye$3(dr),Ye$3(pr)],({entity:Sr,type:vr})=>{if(vr===k$5.Enter){const Er=gr.get(Sr,"Sprite"),Ar=g$7(mr,Sr);if(!Ar)return;let _r=1,Cr=B$4(Ar,yr,xr);const kr=g$7(pr,Sr)?.value;kr&&(_r=.7+kr*.1,Cr={x:Cr.x,y:Cr.y+(1-_r)*xr/2}),Er.setComponent({id:mr.id,once:Rr=>{Rr.setScale(_r),Rr.setPosition(Cr.x,Cr.y-UNIT_OFFSET)}})}}),_$4(ar,[Ye$3(mr),Ye$3(dr),Ge$2(hr)],Sr=>{if(!X$4(Sr,mr))return;const[vr]=Sr.value;if(!vr)return;const Er=B$4(vr,yr,xr);gr.get(Sr.entity,"Sprite").setComponent({id:"moving position",once:_r=>{_r.setPosition(Er.x,Er.y)}})}),yt$2(ar,[Ye$3(mr),Ye$3(dr)],({entity:Sr})=>{gr.remove(Sr)}),_$4(ar,[Ye$3(mr),Ye$3(fr),Ye$3(pr),Ye$3(dr)],Sr=>{if(Sr.type===k$5.Exit)return gr.remove(Sr.entity);if(!X$4(Sr,mr))return;const[vr,Er]=Sr.value;if(!vr||!Er)return;const Ar=gr.get(Sr.entity,"Sprite");if(Sr.type===k$5.Update&&Sr.component.id===mr.id){const[_r,Cr]=Sr.value;if(!_r||!Cr)return;const kr=de$2(fr,Sr.entity).value,Rr=manhattan(_r,Cr)===1,Ir=WALK_ANIMATIONS[kr];let Nr=1,Pr=B$4(_r,yr,xr);const Tr=g$7(pr,Sr.entity)?.value;Tr&&(Nr=.7+Tr*.1,Pr={x:Pr.x,y:Pr.y+(1-Nr)*xr/2}),Ar.setComponent({id:mr.id,now:async Br=>{if(Br.setScale(Nr),Rr&&Ir){const jr=br(Cr,_r),Ur=Ir[jr],qr=Br.anims.currentAnim;Ur!==qr?.key&&wr(Sr.entity,Ur)}await Ae$3({targets:Br,duration:FAST_MOVE_SPEED,props:{x:Pr.x,y:Pr.y-UNIT_OFFSET},ease:Phaser.Math.Easing.Linear},{keepExistingTweens:!0})},once:Br=>{Br.setScale(Nr),Br.setPosition(Pr.x,Pr.y-UNIT_OFFSET)}})}})}function createSetVisualsSystem(cr){const{world:ar,parentLayers:{network:{components:{UnitType:dr,StructureType:fr}},local:{components:{LocalPosition:hr,Path:pr}}},components:{Appearance:mr,SpriteAnimation:gr},api:{playAnimationWithOwnerColor:yr}}=cr;_$4(ar,[Ye$3(dr),Ye$3(hr)],({entity:xr,type:wr})=>{const br=de$2(dr,xr).value;wr===k$5.Exit&&ue$2(mr,xr),E$5(mr,xr,{value:UnitTypeSprites[br]})}),_$4(ar,[Ye$3(fr),Ye$3(hr)],({entity:xr,type:wr})=>{const br=de$2(fr,xr).value;wr===k$5.Exit&&ue$2(mr,xr),E$5(mr,xr,{value:StructureTypeSprites[br]})}),_$4(ar,[Ye$3(fr),Ye$3(hr)],({entity:xr,type:wr})=>{wr===k$5.Exit&&ue$2(gr,xr);const br=de$2(fr,xr).value;StructureTypeAnimations[br]&&E$5(gr,xr,{value:StructureTypeAnimations[br]})}),_$4(ar,[Ye$3(dr),Ye$3(hr)],({entity:xr,type:wr})=>{if(wr===k$5.Exit&&ue$2(gr,xr),wr!==k$5.Enter)return;const br=de$2(dr,xr).value;UnitTypeAnimations[br]&&E$5(gr,xr,{value:UnitTypeAnimations[br]})}),_$4(ar,[Ye$3(gr),Ye$3(hr),Ye$3(pr)],xr=>{const{entity:wr,type:br}=xr;if(X$4(xr,pr)&&br===k$5.Exit&&le$3(gr,wr)){const Sr=de$2(gr,wr).value;yr(wr,Sr)}})}function createAppearanceSystem(cr){const{world:ar,components:{Appearance:dr},scenes:{Main:{objectPool:fr,config:hr}},parentLayers:{local:{components:{LocalPosition:pr}},network:{components:{StructureType:mr}}}}=cr;_$4(ar,[Ye$3(dr),Ye$3(pr),Ge$2(mr)],gr=>{const{entity:yr,type:xr}=gr;if(xr===k$5.Enter){const wr=g$7(dr,yr);if(!wr)return;const br=hr.sprites[wr.value];fr.get(yr,"Sprite").setComponent({id:dr.id,once:vr=>{vr.setTexture(br.assetKey,br.frame)}})}}),_$4(ar,[Ye$3(dr),Ye$3(pr),Ye$3(mr)],gr=>{const{entity:yr,type:xr}=gr;if(xr===k$5.Enter||xr===k$5.Update){const wr=g$7(dr,yr);if(!wr)return;const br=hr.sprites[wr.value];fr.get(yr,"Sprite").setComponent({id:dr.id,once:vr=>{vr.setTexture(br.assetKey,br.frame)}})}})}function createSpriteAnimationSystem(cr){const{world:ar,components:{SpriteAnimation:dr,HueTint:fr},api:{playTintedAnimation:hr},scenes:{Main:{objectPool:pr,maps:{Main:{tileWidth:mr}}}},parentLayers:{local:{components:{LocalPosition:gr}}}}=cr;_$4(ar,[Ye$3(dr),Ye$3(fr),Ye$3(gr)],({entity:yr,type:xr,component:wr})=>{if(![k$5.Enter,k$5.Update].includes(xr)||xr===k$5.Update&&wr.id===gr.id)return;const br=pr.get(yr,"Sprite"),Sr=de$2(dr,yr).value,vr=de$2(fr,yr).value;hr(yr,Sr,vr),br.setComponent({id:dr.id,once:Er=>{const Ar=Er.width*Er.scaleX,_r=(Ar-mr)/(2*Ar);Er.setOrigin(_r)}})})}function createHueTintSystem(cr){const{world:ar,components:{HueTint:dr},parentLayers:{network:{components:{OwnedBy:fr,Player:hr,Name:pr,Capturable:mr}},local:{api:{getOwnerColor:gr}},headless:{components:{InCurrentMatch:yr}}}}=cr;_$4(ar,[Ye$3(hr),Ye$3(pr)],({entity:xr,type:wr})=>{if(wr===k$5.Exit)return;const br=A$6([Je$2(fr,{value:decodeMatchEntity(xr).entity})]),Sr=gr(xr);for(const vr of br)E$5(dr,vr,{value:Sr.name})}),at$2(ar,[Ye$3(fr),Ye$3(yr)],({entity:xr})=>{const wr=gr(xr);wr&&(E$5(dr,xr,{value:wr.name}),setTimeout(()=>{const br=gr(xr);br&&E$5(dr,xr,{value:br.name})},1e3))}),pt$2(ar,[Ye$3(fr),Ye$3(mr)],({entity:xr})=>{const wr=gr(xr);wr&&E$5(dr,xr,{value:wr.name})}),at$2(ar,[Ye$3(mr),Ye$3(yr)],({entity:xr})=>{E$5(dr,xr,{value:"white"})})}function createSelectionSystem$1(cr){const{world:ar,scenes:{Main:{input:dr,maps:fr,objectPool:hr}},parentLayers:{local:{components:{LocalPosition:pr,Path:mr,Selected:gr},api:{resetSelection:yr}},headless:{components:{NextPosition:xr}}}}=cr;dr.onKeyPress(br=>br.has("ESC"),()=>{yr()});function wr(br){const{entity:Sr,type:vr}=br,Er=`${Sr}-select`;if(vr===k$5.Exit)return hr.remove(Er);hr.get(Er,"Sprite").setComponent({id:"select",once:_r=>{_r.play(Animations.TileHighlightYellow);const Cr=de$2(pr,Sr),kr=B$4(Cr,fr.Main.tileWidth,fr.Main.tileHeight);_r.setSize(fr.Main.tileWidth,fr.Main.tileHeight),_r.setPosition(kr.x,kr.y),_r.setDepth(RenderDepth.Background1),_r.setOrigin(0)}})}_$4(ar,[Ye$3(gr),Ye$3(pr),Ge$2(mr),Ge$2(xr)],br=>{wr(br)}),_$4(ar,[Ye$3(gr),Ye$3(pr),Ge$2(mr),Ye$3(xr)],br=>{wr(br)})}function createDrawDevHighlightSystem(cr){const{world:ar,parentLayers:{local:{components:{LocalPosition:dr}}},scenes:{Main:{objectPool:fr,maps:{Main:{tileWidth:hr,tileHeight:pr}}}},components:{DevHighlight:mr}}=cr;_$4(ar,[Ye$3(mr),Ye$3(dr)],({entity:gr,type:yr})=>{if(yr===k$5.Exit)return fr.remove(`${gr}-dev-highlight`);const xr=de$2(mr,gr),wr=de$2(dr,gr);fr.get(`${gr}-dev-highlight`,"Rectangle").setComponent({id:"highlight",once:Sr=>{const vr=B$4(wr,hr,pr);Sr.setFillStyle(xr.value??15787805,.5),Sr.setSize(hr,pr),Sr.setPosition(vr.x,vr.y)}})})}function clamp$2(cr,ar,dr){return Math.max(ar,Math.min(cr,dr))}const V$2={toVector(cr,ar){return cr===void 0&&(cr=ar),Array.isArray(cr)?cr:[cr,cr]},add(cr,ar){return[cr[0]+ar[0],cr[1]+ar[1]]},sub(cr,ar){return[cr[0]-ar[0],cr[1]-ar[1]]},addTo(cr,ar){cr[0]+=ar[0],cr[1]+=ar[1]},subTo(cr,ar){cr[0]-=ar[0],cr[1]-=ar[1]}};function rubberband(cr,ar,dr){return ar===0||Math.abs(ar)===1/0?Math.pow(cr,dr*5):cr*ar*dr/(ar+dr*cr)}function rubberbandIfOutOfBounds(cr,ar,dr,fr=.15){return fr===0?clamp$2(cr,ar,dr):cr<ar?-rubberband(ar-cr,dr-ar,fr)+ar:cr>dr?+rubberband(cr-dr,dr-ar,fr)+dr:cr}function computeRubberband(cr,[ar,dr],[fr,hr]){const[[pr,mr],[gr,yr]]=cr;return[rubberbandIfOutOfBounds(ar,pr,mr,fr),rubberbandIfOutOfBounds(dr,gr,yr,hr)]}function _defineProperty$1(cr,ar,dr){return ar in cr?Object.defineProperty(cr,ar,{value:dr,enumerable:!0,configurable:!0,writable:!0}):cr[ar]=dr,cr}function ownKeys$1(cr,ar){var dr=Object.keys(cr);if(Object.getOwnPropertySymbols){var fr=Object.getOwnPropertySymbols(cr);ar&&(fr=fr.filter(function(hr){return Object.getOwnPropertyDescriptor(cr,hr).enumerable})),dr.push.apply(dr,fr)}return dr}function _objectSpread2$1(cr){for(var ar=1;ar<arguments.length;ar++){var dr=arguments[ar]!=null?arguments[ar]:{};ar%2?ownKeys$1(Object(dr),!0).forEach(function(fr){_defineProperty$1(cr,fr,dr[fr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(cr,Object.getOwnPropertyDescriptors(dr)):ownKeys$1(Object(dr)).forEach(function(fr){Object.defineProperty(cr,fr,Object.getOwnPropertyDescriptor(dr,fr))})}return cr}const EVENT_TYPE_MAP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function capitalize(cr){return cr?cr[0].toUpperCase()+cr.slice(1):""}function toHandlerProp(cr,ar="",dr=!1){const fr=EVENT_TYPE_MAP[cr],hr=fr&&fr[ar]||ar;return"on"+capitalize(cr)+capitalize(hr)+(dr?"Capture":"")}const pointerCaptureEvents=["gotpointercapture","lostpointercapture"];function parseProp(cr){let ar=cr.substring(2).toLowerCase();const dr=!!~ar.indexOf("passive");dr&&(ar=ar.replace("passive",""));const fr=pointerCaptureEvents.includes(ar)?"capturecapture":"capture",hr=!!~ar.indexOf(fr);return hr&&(ar=ar.replace("capture","")),{device:ar,capture:hr,passive:dr}}function toDomEventType(cr,ar=""){const dr=EVENT_TYPE_MAP[cr],fr=dr&&dr[ar]||ar;return cr+fr}function isTouch(cr){return"touches"in cr}function getCurrentTargetTouchList(cr){return Array.from(cr.touches).filter(ar=>{var dr,fr;return ar.target===cr.currentTarget||((dr=cr.currentTarget)===null||dr===void 0||(fr=dr.contains)===null||fr===void 0?void 0:fr.call(dr,ar.target))})}function getTouchList(cr){return cr.type==="touchend"||cr.type==="touchcancel"?cr.changedTouches:cr.targetTouches}function getValueEvent(cr){return isTouch(cr)?getTouchList(cr)[0]:cr}function distanceAngle(cr,ar){const dr=ar.clientX-cr.clientX,fr=ar.clientY-cr.clientY,hr=(ar.clientX+cr.clientX)/2,pr=(ar.clientY+cr.clientY)/2,mr=Math.hypot(dr,fr);return{angle:-(Math.atan2(dr,fr)*180)/Math.PI,distance:mr,origin:[hr,pr]}}function touchIds(cr){return getCurrentTargetTouchList(cr).map(ar=>ar.identifier)}function touchDistanceAngle(cr,ar){const[dr,fr]=Array.from(cr.touches).filter(hr=>ar.includes(hr.identifier));return distanceAngle(dr,fr)}function pointerId(cr){const ar=getValueEvent(cr);return isTouch(cr)?ar.identifier:ar.pointerId}function pointerValues(cr){const ar=getValueEvent(cr);return[ar.clientX,ar.clientY]}const LINE_HEIGHT=40,PAGE_HEIGHT=800;function wheelValues(cr){let{deltaX:ar,deltaY:dr,deltaMode:fr}=cr;return fr===1?(ar*=LINE_HEIGHT,dr*=LINE_HEIGHT):fr===2&&(ar*=PAGE_HEIGHT,dr*=PAGE_HEIGHT),[ar,dr]}function scrollValues(cr){var ar,dr;const{scrollX:fr,scrollY:hr,scrollLeft:pr,scrollTop:mr}=cr.currentTarget;return[(ar=fr??pr)!==null&&ar!==void 0?ar:0,(dr=hr??mr)!==null&&dr!==void 0?dr:0]}function getEventDetails(cr){const ar={};if("buttons"in cr&&(ar.buttons=cr.buttons),"shiftKey"in cr){const{shiftKey:dr,altKey:fr,metaKey:hr,ctrlKey:pr}=cr;Object.assign(ar,{shiftKey:dr,altKey:fr,metaKey:hr,ctrlKey:pr})}return ar}function call(cr,...ar){return typeof cr=="function"?cr(...ar):cr}function noop$2(){}function chain(...cr){return cr.length===0?noop$2:cr.length===1?cr[0]:function(){let ar;for(const dr of cr)ar=dr.apply(this,arguments)||ar;return ar}}function assignDefault(cr,ar){return Object.assign({},ar,cr||{})}const BEFORE_LAST_KINEMATICS_DELAY=32;class Engine{constructor(ar,dr,fr){this.ctrl=ar,this.args=dr,this.key=fr,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(ar){this.ctrl.state[this.key]=ar}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:ar,shared:dr,ingKey:fr,args:hr}=this;dr[fr]=ar._active=ar.active=ar._blocked=ar._force=!1,ar._step=[!1,!1],ar.intentional=!1,ar._movement=[0,0],ar._distance=[0,0],ar._direction=[0,0],ar._delta=[0,0],ar._bounds=[[-1/0,1/0],[-1/0,1/0]],ar.args=hr,ar.axis=void 0,ar.memo=void 0,ar.elapsedTime=0,ar.direction=[0,0],ar.distance=[0,0],ar.overflow=[0,0],ar._movementBound=[!1,!1],ar.velocity=[0,0],ar.movement=[0,0],ar.delta=[0,0],ar.timeStamp=0}start(ar){const dr=this.state,fr=this.config;dr._active||(this.reset(),this.computeInitial(),dr._active=!0,dr.target=ar.target,dr.currentTarget=ar.currentTarget,dr.lastOffset=fr.from?call(fr.from,dr):dr.offset,dr.offset=dr.lastOffset),dr.startTime=dr.timeStamp=ar.timeStamp}computeValues(ar){const dr=this.state;dr._values=ar,dr.values=this.config.transform(ar)}computeInitial(){const ar=this.state;ar._initial=ar._values,ar.initial=ar.values}compute(ar){const{state:dr,config:fr,shared:hr}=this;dr.args=this.args;let pr=0;if(ar&&(dr.event=ar,fr.preventDefault&&ar.cancelable&&dr.event.preventDefault(),dr.type=ar.type,hr.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,hr.locked=!!document.pointerLockElement,Object.assign(hr,getEventDetails(ar)),hr.down=hr.pressed=hr.buttons%2===1||hr.touches>0,pr=ar.timeStamp-dr.timeStamp,dr.timeStamp=ar.timeStamp,dr.elapsedTime=dr.timeStamp-dr.startTime),dr._active){const Pr=dr._delta.map(Math.abs);V$2.addTo(dr._distance,Pr)}const[mr,gr]=dr._movement,[yr,xr]=fr.threshold,{_step:wr,values:br}=dr;if(fr.hasCustomTransform?(wr[0]===!1&&(wr[0]=Math.abs(mr)>=yr&&br[0]),wr[1]===!1&&(wr[1]=Math.abs(gr)>=xr&&br[1])):(wr[0]===!1&&(wr[0]=Math.abs(mr)>=yr&&Math.sign(mr)*yr),wr[1]===!1&&(wr[1]=Math.abs(gr)>=xr&&Math.sign(gr)*xr)),dr.intentional=wr[0]!==!1||wr[1]!==!1,!dr.intentional)return;const Sr=[0,0];if(fr.hasCustomTransform){const[Pr,Tr]=br;Sr[0]=wr[0]!==!1?Pr-wr[0]:0,Sr[1]=wr[1]!==!1?Tr-wr[1]:0}else Sr[0]=wr[0]!==!1?mr-wr[0]:0,Sr[1]=wr[1]!==!1?gr-wr[1]:0;this.intent&&this.intent(Sr);const vr=dr.offset,Er=dr._active&&!dr._blocked||dr.active;Er&&(dr.first=dr._active&&!dr.active,dr.last=!dr._active&&dr.active,dr.active=hr[this.ingKey]=dr._active,ar&&(dr.first&&("bounds"in fr&&(dr._bounds=call(fr.bounds,dr)),this.setup&&this.setup()),dr.movement=Sr,this.computeOffset()));const[Ar,_r]=dr.offset,[[Cr,kr],[Rr,Ir]]=dr._bounds;dr.overflow=[Ar<Cr?-1:Ar>kr?1:0,_r<Rr?-1:_r>Ir?1:0],dr._movementBound[0]=dr.overflow[0]?dr._movementBound[0]===!1?dr._movement[0]:dr._movementBound[0]:!1,dr._movementBound[1]=dr.overflow[1]?dr._movementBound[1]===!1?dr._movement[1]:dr._movementBound[1]:!1;const Nr=dr._active?fr.rubberband||[0,0]:[0,0];if(dr.offset=computeRubberband(dr._bounds,dr.offset,Nr),dr.delta=V$2.sub(dr.offset,vr),this.computeMovement(),Er&&(!dr.last||pr>BEFORE_LAST_KINEMATICS_DELAY)){dr.delta=V$2.sub(dr.offset,vr);const Pr=dr.delta.map(Math.abs);V$2.addTo(dr.distance,Pr),dr.direction=dr.delta.map(Math.sign),dr._direction=dr._delta.map(Math.sign),!dr.first&&pr>0&&(dr.velocity=[Pr[0]/pr,Pr[1]/pr])}}emit(){const ar=this.state,dr=this.shared,fr=this.config;if(ar._active||this.clean(),(ar._blocked||!ar.intentional)&&!ar._force&&!fr.triggerAllEvents)return;const hr=this.handler(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},dr),ar),{},{[this.aliasKey]:ar.values}));hr!==void 0&&(ar.memo=hr)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function selectAxis([cr,ar]){const dr=Math.abs(cr)-Math.abs(ar);if(dr>0)return"x";if(dr<0)return"y"}function restrictVectorToAxis(cr,ar){switch(ar){case"x":cr[1]=0;break;case"y":cr[0]=0;break}}class CoordinatesEngine extends Engine{constructor(...ar){super(...ar),_defineProperty$1(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=V$2.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=V$2.sub(this.state.offset,this.state.lastOffset)}intent(ar){this.state.axis=this.state.axis||selectAxis(ar),this.state._blocked=(this.config.lockDirection||!!this.config.axis)&&!this.state.axis||!!this.config.axis&&this.config.axis!==this.state.axis,!this.state._blocked&&(this.config.axis||this.config.lockDirection)&&restrictVectorToAxis(ar,this.state.axis)}}const identity$5=cr=>cr,DEFAULT_RUBBERBAND=.15,commonConfigResolver={enabled(cr=!0){return cr},preventDefault(cr=!1){return cr},triggerAllEvents(cr=!1){return cr},rubberband(cr=0){switch(cr){case!0:return[DEFAULT_RUBBERBAND,DEFAULT_RUBBERBAND];case!1:return[0,0];default:return V$2.toVector(cr)}},from(cr){if(typeof cr=="function")return cr;if(cr!=null)return V$2.toVector(cr)},transform(cr,ar,dr){const fr=cr||dr.shared.transform;return this.hasCustomTransform=!!fr,fr||identity$5},threshold(cr){return V$2.toVector(cr,0)}},coordinatesConfigResolver=_objectSpread2$1(_objectSpread2$1({},commonConfigResolver),{},{axis(cr,ar,{axis:dr}){if(this.lockDirection=dr==="lock",!this.lockDirection)return dr},bounds(cr={}){if(typeof cr=="function")return pr=>coordinatesConfigResolver.bounds(cr(pr));if("current"in cr)return()=>cr.current;if(typeof HTMLElement=="function"&&cr instanceof HTMLElement)return cr;const{left:ar=-1/0,right:dr=1/0,top:fr=-1/0,bottom:hr=1/0}=cr;return[[ar,dr],[fr,hr]]}}),DISPLACEMENT=10,KEYS_DELTA_MAP={ArrowRight:(cr=1)=>[DISPLACEMENT*cr,0],ArrowLeft:(cr=1)=>[-DISPLACEMENT*cr,0],ArrowUp:(cr=1)=>[0,-DISPLACEMENT*cr],ArrowDown:(cr=1)=>[0,DISPLACEMENT*cr]};class DragEngine extends CoordinatesEngine{constructor(...ar){super(...ar),_defineProperty$1(this,"ingKey","dragging")}reset(){super.reset();const ar=this.state;ar._pointerId=void 0,ar._pointerActive=!1,ar._keyboardActive=!1,ar._preventScroll=!1,ar._delayed=!1,ar.swipe=[0,0],ar.tap=!1,ar.canceled=!1,ar.cancel=this.cancel.bind(this)}setup(){const ar=this.state;if(ar._bounds instanceof HTMLElement){const dr=ar._bounds.getBoundingClientRect(),fr=ar.currentTarget.getBoundingClientRect(),hr={left:dr.left-fr.left+ar.offset[0],right:dr.right-fr.right+ar.offset[0],top:dr.top-fr.top+ar.offset[1],bottom:dr.bottom-fr.bottom+ar.offset[1]};ar._bounds=coordinatesConfigResolver.bounds(hr)}}cancel(){const ar=this.state;ar.canceled||(ar.canceled=!0,ar._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(ar){const dr=this.config,fr=this.state;ar.buttons!=null&&(Array.isArray(dr.pointerButtons)?!dr.pointerButtons.includes(ar.buttons):dr.pointerButtons!==-1&&dr.pointerButtons!==ar.buttons)||(this.ctrl.setEventIds(ar),dr.pointerCapture&&ar.target.setPointerCapture(ar.pointerId),!fr._pointerActive&&(this.start(ar),this.setupPointer(ar),fr._pointerId=pointerId(ar),fr._pointerActive=!0,this.computeValues(pointerValues(ar)),this.computeInitial(),dr.preventScroll?this.setupScrollPrevention(ar):dr.delay>0?this.setupDelayTrigger(ar):this.startPointerDrag(ar)))}startPointerDrag(ar){const dr=this.state;dr._active=!0,dr._preventScroll=!0,dr._delayed=!1,this.compute(ar),this.emit()}pointerMove(ar){const dr=this.state,fr=this.config;if(!dr._pointerActive||dr.type===ar.type&&ar.timeStamp===dr.timeStamp)return;const hr=pointerId(ar);if(dr._pointerId!==void 0&&hr!==dr._pointerId)return;const pr=pointerValues(ar);if(document.pointerLockElement===ar.target?dr._delta=[ar.movementX,ar.movementY]:(dr._delta=V$2.sub(pr,dr._values),this.computeValues(pr)),V$2.addTo(dr._movement,dr._delta),this.compute(ar),dr._delayed){this.timeoutStore.remove("dragDelay"),dr.active=!1,this.startPointerDrag(ar);return}if(fr.preventScroll&&!dr._preventScroll)if(dr.axis)if(dr.axis===fr.preventScrollAxis||fr.preventScrollAxis==="xy"){dr._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(ar);return}else return;this.emit()}pointerUp(ar){this.ctrl.setEventIds(ar);try{this.config.pointerCapture&&ar.target.hasPointerCapture(ar.pointerId)&&ar.target.releasePointerCapture(ar.pointerId)}catch{}const dr=this.state,fr=this.config;if(!dr._pointerActive)return;const hr=pointerId(ar);if(dr._pointerId!==void 0&&hr!==dr._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(ar);const[pr,mr]=dr._distance;if(dr.tap=pr<=fr.tapsThreshold&&mr<=fr.tapsThreshold,dr.tap&&fr.filterTaps)dr._force=!0;else{const[gr,yr]=dr.direction,[xr,wr]=dr.velocity,[br,Sr]=dr.movement,[vr,Er]=fr.swipe.velocity,[Ar,_r]=fr.swipe.distance,Cr=fr.swipe.duration;dr.elapsedTime<Cr&&(Math.abs(xr)>vr&&Math.abs(br)>Ar&&(dr.swipe[0]=gr),Math.abs(wr)>Er&&Math.abs(Sr)>_r&&(dr.swipe[1]=yr))}this.emit()}pointerClick(ar){this.state.tap||(ar.preventDefault(),ar.stopPropagation())}setupPointer(ar){const dr=this.config;let fr=dr.device;dr.pointerLock&&ar.currentTarget.requestPointerLock(),dr.pointerCapture||(this.eventStore.add(this.sharedConfig.window,fr,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,fr,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,fr,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(ar){this.state._preventScroll&&ar.cancelable&&ar.preventDefault()}setupScrollPrevention(ar){persistEvent(ar),this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","end",this.clean.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","cancel",this.clean.bind(this),{passive:!1}),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScroll,ar)}setupDelayTrigger(ar){this.state._delayed=!0,this.timeoutStore.add("dragDelay",this.startPointerDrag.bind(this),this.config.delay,ar)}keyDown(ar){const dr=KEYS_DELTA_MAP[ar.key];if(dr){const fr=this.state,hr=ar.shiftKey?10:ar.altKey?.1:1;fr._delta=dr(hr),this.start(ar),fr._keyboardActive=!0,V$2.addTo(fr._movement,fr._delta),this.compute(ar),this.emit()}}keyUp(ar){ar.key in KEYS_DELTA_MAP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(ar),this.emit())}bind(ar){const dr=this.config.device;ar(dr,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(ar(dr,"change",this.pointerMove.bind(this)),ar(dr,"end",this.pointerUp.bind(this)),ar(dr,"cancel",this.pointerUp.bind(this)),ar("lostPointerCapture","",this.pointerUp.bind(this))),ar("key","down",this.keyDown.bind(this)),ar("key","up",this.keyUp.bind(this)),this.config.filterTaps&&ar("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function persistEvent(cr){"persist"in cr&&typeof cr.persist=="function"&&cr.persist()}const isBrowser$1=typeof window<"u"&&window.document&&window.document.createElement;function supportsTouchEvents(){return isBrowser$1&&"ontouchstart"in window}function isTouchScreen(){return supportsTouchEvents()||isBrowser$1&&window.navigator.maxTouchPoints>1}function supportsPointerEvents(){return isBrowser$1&&"onpointerdown"in window}function supportsPointerLock(){return isBrowser$1&&"exitPointerLock"in window.document}function supportsGestureEvents(){try{return"constructor"in GestureEvent}catch{return!1}}const SUPPORT={isBrowser:isBrowser$1,gesture:supportsGestureEvents(),touch:isTouchScreen(),touchscreen:isTouchScreen(),pointer:supportsPointerEvents(),pointerLock:supportsPointerLock()},DEFAULT_PREVENT_SCROLL_DELAY=250,DEFAULT_DRAG_DELAY=180,DEFAULT_SWIPE_VELOCITY=.5,DEFAULT_SWIPE_DISTANCE=50,DEFAULT_SWIPE_DURATION=250,dragConfigResolver=_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{device(cr,ar,{pointer:{touch:dr=!1,lock:fr=!1,mouse:hr=!1}={}}){return this.pointerLock=fr&&SUPPORT.pointerLock,SUPPORT.touch&&dr?"touch":this.pointerLock?"mouse":SUPPORT.pointer&&!hr?"pointer":SUPPORT.touch?"touch":"mouse"},preventScroll(cr=!1,ar,{preventScrollAxis:dr="y"}){return this.preventScrollAxis=dr,SUPPORT.touchscreen?typeof cr=="number"?cr:cr?DEFAULT_PREVENT_SCROLL_DELAY:!1:!1},pointerCapture(cr,ar,{pointer:{capture:dr=!0,buttons:fr=1}={}}){return this.pointerButtons=fr,!this.pointerLock&&this.device==="pointer"&&dr},threshold(cr,ar,{filterTaps:dr=!1,tapsThreshold:fr=3,axis:hr=void 0}){const pr=V$2.toVector(cr,dr?fr:hr?1:0);return this.filterTaps=dr,this.tapsThreshold=fr,pr},swipe({velocity:cr=DEFAULT_SWIPE_VELOCITY,distance:ar=DEFAULT_SWIPE_DISTANCE,duration:dr=DEFAULT_SWIPE_DURATION}={}){return{velocity:this.transform(V$2.toVector(cr)),distance:this.transform(V$2.toVector(ar)),duration:dr}},delay(cr=0){switch(cr){case!0:return DEFAULT_DRAG_DELAY;case!1:return 0;default:return cr}}}),SCALE_ANGLE_RATIO_INTENT_DEG=30,PINCH_WHEEL_RATIO=36;class PinchEngine extends Engine{constructor(...ar){super(...ar),_defineProperty$1(this,"ingKey","pinching"),_defineProperty$1(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const ar=this.state;ar._touchIds=[],ar.canceled=!1,ar.cancel=this.cancel.bind(this),ar.turns=0}computeOffset(){const{type:ar,movement:dr,lastOffset:fr}=this.state;ar==="wheel"?this.state.offset=V$2.add(dr,fr):this.state.offset=[(1+dr[0])*fr[0],dr[1]+fr[1]]}computeMovement(){const{offset:ar,lastOffset:dr}=this.state;this.state.movement=[ar[0]/dr[0],ar[1]-dr[1]]}intent(ar){const dr=this.state;if(!dr.axis){const fr=Math.abs(ar[0])*SCALE_ANGLE_RATIO_INTENT_DEG-Math.abs(ar[1]);fr<0?dr.axis="angle":fr>0&&(dr.axis="scale")}this.config.lockDirection&&(dr.axis==="scale"?ar[1]=0:dr.axis==="angle"&&(ar[0]=0))}cancel(){const ar=this.state;ar.canceled||setTimeout(()=>{ar.canceled=!0,ar._active=!1,this.compute(),this.emit()},0)}touchStart(ar){this.ctrl.setEventIds(ar);const dr=this.state,fr=this.ctrl.touchIds;if(dr._active&&dr._touchIds.every(pr=>fr.has(pr))||fr.size<2)return;this.start(ar),dr._touchIds=Array.from(fr).slice(0,2);const hr=touchDistanceAngle(ar,dr._touchIds);this.pinchStart(ar,hr)}pointerStart(ar){if(ar.buttons!=null&&ar.buttons%2!==1)return;this.ctrl.setEventIds(ar),ar.target.setPointerCapture(ar.pointerId);const dr=this.state,fr=dr._pointerEvents,hr=this.ctrl.pointerIds;if(dr._active&&Array.from(fr.keys()).every(mr=>hr.has(mr))||(fr.size<2&&fr.set(ar.pointerId,ar),dr._pointerEvents.size<2))return;this.start(ar);const pr=distanceAngle(...Array.from(fr.values()));this.pinchStart(ar,pr)}pinchStart(ar,dr){const fr=this.state;fr.origin=dr.origin,this.computeValues([dr.distance,dr.angle]),this.computeInitial(),this.compute(ar),this.emit()}touchMove(ar){if(!this.state._active)return;const dr=touchDistanceAngle(ar,this.state._touchIds);this.pinchMove(ar,dr)}pointerMove(ar){const dr=this.state._pointerEvents;if(dr.has(ar.pointerId)&&dr.set(ar.pointerId,ar),!this.state._active)return;const fr=distanceAngle(...Array.from(dr.values()));this.pinchMove(ar,fr)}pinchMove(ar,dr){const fr=this.state,hr=fr._values[1],pr=dr.angle-hr;let mr=0;Math.abs(pr)>270&&(mr+=Math.sign(pr)),this.computeValues([dr.distance,dr.angle-360*mr]),fr.origin=dr.origin,fr.turns=mr,fr._movement=[fr._values[0]/fr._initial[0]-1,fr._values[1]-fr._initial[1]],this.compute(ar),this.emit()}touchEnd(ar){this.ctrl.setEventIds(ar),this.state._active&&this.state._touchIds.some(dr=>!this.ctrl.touchIds.has(dr))&&(this.state._active=!1,this.compute(ar),this.emit())}pointerEnd(ar){const dr=this.state;this.ctrl.setEventIds(ar);try{ar.target.releasePointerCapture(ar.pointerId)}catch{}dr._pointerEvents.has(ar.pointerId)&&dr._pointerEvents.delete(ar.pointerId),dr._active&&dr._pointerEvents.size<2&&(dr._active=!1,this.compute(ar),this.emit())}gestureStart(ar){ar.cancelable&&ar.preventDefault();const dr=this.state;dr._active||(this.start(ar),this.computeValues([ar.scale,ar.rotation]),dr.origin=[ar.clientX,ar.clientY],this.compute(ar),this.emit())}gestureMove(ar){if(ar.cancelable&&ar.preventDefault(),!this.state._active)return;const dr=this.state;this.computeValues([ar.scale,ar.rotation]),dr.origin=[ar.clientX,ar.clientY];const fr=dr._movement;dr._movement=[ar.scale-1,ar.rotation],dr._delta=V$2.sub(dr._movement,fr),this.compute(ar),this.emit()}gestureEnd(ar){this.state._active&&(this.state._active=!1,this.compute(ar),this.emit())}wheel(ar){ar.ctrlKey&&(this.state._active?this.wheelChange(ar):this.wheelStart(ar),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(ar){this.start(ar),this.wheelChange(ar)}wheelChange(ar){"uv"in ar||ar.cancelable&&ar.preventDefault();const fr=this.state;fr._delta=[-wheelValues(ar)[1]/PINCH_WHEEL_RATIO*fr.offset[0],0],V$2.addTo(fr._movement,fr._delta),this.state.origin=[ar.clientX,ar.clientY],this.compute(ar),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(ar){const dr=this.config.device;dr?(ar(dr,"start",this[dr+"Start"].bind(this)),ar(dr,"change",this[dr+"Move"].bind(this)),ar(dr,"end",this[dr+"End"].bind(this)),ar(dr,"cancel",this[dr+"End"].bind(this))):ar("wheel","",this.wheel.bind(this),{passive:!1})}}const pinchConfigResolver=_objectSpread2$1(_objectSpread2$1({},commonConfigResolver),{},{device(cr,ar,{shared:dr,pointer:{touch:fr=!1}={}}){if(dr.target&&!SUPPORT.touch&&SUPPORT.gesture)return"gesture";if(SUPPORT.touch&&fr)return"touch";if(SUPPORT.touchscreen){if(SUPPORT.pointer)return"pointer";if(SUPPORT.touch)return"touch"}},bounds(cr,ar,{scaleBounds:dr={},angleBounds:fr={}}){const hr=mr=>{const gr=assignDefault(call(dr,mr),{min:-1/0,max:1/0});return[gr.min,gr.max]},pr=mr=>{const gr=assignDefault(call(fr,mr),{min:-1/0,max:1/0});return[gr.min,gr.max]};return typeof dr!="function"&&typeof fr!="function"?[hr(),pr()]:mr=>[hr(mr),pr(mr)]},threshold(cr,ar,dr){return this.lockDirection=dr.axis==="lock",V$2.toVector(cr,this.lockDirection?[.1,3]:0)}});class MoveEngine extends CoordinatesEngine{constructor(...ar){super(...ar),_defineProperty$1(this,"ingKey","moving")}move(ar){this.config.mouseOnly&&ar.pointerType!=="mouse"||(this.state._active?this.moveChange(ar):this.moveStart(ar),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(ar){this.start(ar),this.computeValues(pointerValues(ar)),this.compute(ar),this.computeInitial(),this.emit()}moveChange(ar){if(!this.state._active)return;const dr=pointerValues(ar),fr=this.state;fr._delta=V$2.sub(dr,fr._values),V$2.addTo(fr._movement,fr._delta),this.computeValues(dr),this.compute(ar),this.emit()}moveEnd(ar){this.state._active&&(this.state._active=!1,this.compute(ar),this.emit())}bind(ar){ar("pointer","change",this.move.bind(this)),ar("pointer","leave",this.moveEnd.bind(this))}}const moveConfigResolver=_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{mouseOnly:(cr=!0)=>cr});class ScrollEngine extends CoordinatesEngine{constructor(...ar){super(...ar),_defineProperty$1(this,"ingKey","scrolling")}scroll(ar){this.state._active||this.start(ar),this.scrollChange(ar),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(ar){ar.cancelable&&ar.preventDefault();const dr=this.state,fr=scrollValues(ar);dr._delta=V$2.sub(fr,dr._values),V$2.addTo(dr._movement,dr._delta),this.computeValues(fr),this.compute(ar),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(ar){ar("scroll","",this.scroll.bind(this))}}const scrollConfigResolver=coordinatesConfigResolver;class WheelEngine extends CoordinatesEngine{constructor(...ar){super(...ar),_defineProperty$1(this,"ingKey","wheeling")}wheel(ar){this.state._active||this.start(ar),this.wheelChange(ar),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(ar){const dr=this.state;dr._delta=wheelValues(ar),V$2.addTo(dr._movement,dr._delta);const[fr,hr]=dr.overflow,[pr,mr]=dr._delta,[gr,yr]=dr._direction;(fr<0&&pr>0&&gr<0||fr>0&&pr<0&&gr>0)&&(dr._movement[0]=dr._movementBound[0]),(hr<0&&mr>0&&yr<0||hr>0&&mr<0&&yr>0)&&(dr._movement[1]=dr._movementBound[1]),this.compute(ar),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(ar){ar("wheel","",this.wheel.bind(this))}}const wheelConfigResolver=coordinatesConfigResolver;class HoverEngine extends CoordinatesEngine{constructor(...ar){super(...ar),_defineProperty$1(this,"ingKey","hovering")}enter(ar){this.config.mouseOnly&&ar.pointerType!=="mouse"||(this.start(ar),this.computeValues(pointerValues(ar)),this.compute(ar),this.emit())}leave(ar){if(this.config.mouseOnly&&ar.pointerType!=="mouse")return;const dr=this.state;if(!dr._active)return;dr._active=!1;const fr=pointerValues(ar);dr._movement=dr._delta=V$2.sub(fr,dr._values),this.computeValues(fr),this.compute(ar),dr.delta=dr.movement,this.emit()}bind(ar){ar("pointer","enter",this.enter.bind(this)),ar("pointer","leave",this.leave.bind(this))}}const hoverConfigResolver=_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{mouseOnly:(cr=!0)=>cr}),EngineMap=new Map,ConfigResolverMap=new Map;function registerAction(cr){EngineMap.set(cr.key,cr.engine),ConfigResolverMap.set(cr.key,cr.resolver)}const dragAction={key:"drag",engine:DragEngine,resolver:dragConfigResolver},hoverAction={key:"hover",engine:HoverEngine,resolver:hoverConfigResolver},moveAction={key:"move",engine:MoveEngine,resolver:moveConfigResolver},pinchAction={key:"pinch",engine:PinchEngine,resolver:pinchConfigResolver},scrollAction={key:"scroll",engine:ScrollEngine,resolver:scrollConfigResolver},wheelAction={key:"wheel",engine:WheelEngine,resolver:wheelConfigResolver};function _objectWithoutPropertiesLoose$1(cr,ar){if(cr==null)return{};var dr={},fr=Object.keys(cr),hr,pr;for(pr=0;pr<fr.length;pr++)hr=fr[pr],!(ar.indexOf(hr)>=0)&&(dr[hr]=cr[hr]);return dr}function _objectWithoutProperties(cr,ar){if(cr==null)return{};var dr=_objectWithoutPropertiesLoose$1(cr,ar),fr,hr;if(Object.getOwnPropertySymbols){var pr=Object.getOwnPropertySymbols(cr);for(hr=0;hr<pr.length;hr++)fr=pr[hr],!(ar.indexOf(fr)>=0)&&Object.prototype.propertyIsEnumerable.call(cr,fr)&&(dr[fr]=cr[fr])}return dr}const sharedConfigResolver={target(cr){if(cr)return()=>"current"in cr?cr.current:cr},enabled(cr=!0){return cr},window(cr=SUPPORT.isBrowser?window:void 0){return cr},eventOptions({passive:cr=!0,capture:ar=!1}={}){return{passive:cr,capture:ar}},transform(cr){return cr}},_excluded$1=["target","eventOptions","window","enabled","transform"];function resolveWith(cr={},ar){const dr={};for(const[fr,hr]of Object.entries(ar))switch(typeof hr){case"function":dr[fr]=hr.call(dr,cr[fr],fr,cr);break;case"object":dr[fr]=resolveWith(cr[fr],hr);break;case"boolean":hr&&(dr[fr]=cr[fr]);break}return dr}function parse$2(cr,ar){const dr=cr,{target:fr,eventOptions:hr,window:pr,enabled:mr,transform:gr}=dr,yr=_objectWithoutProperties(dr,_excluded$1),xr={shared:resolveWith({target:fr,eventOptions:hr,window:pr,enabled:mr,transform:gr},sharedConfigResolver)};if(ar){const wr=ConfigResolverMap.get(ar);xr[ar]=resolveWith(_objectSpread2$1({shared:xr.shared},yr),wr)}else for(const wr in yr){const br=ConfigResolverMap.get(wr);br&&(xr[wr]=resolveWith(_objectSpread2$1({shared:xr.shared},yr[wr]),br))}return xr}class EventStore{constructor(ar){_defineProperty$1(this,"_listeners",[]),this._ctrl=ar}add(ar,dr,fr,hr,pr){const mr=toDomEventType(dr,fr),gr=_objectSpread2$1(_objectSpread2$1({},this._ctrl.config.shared.eventOptions),pr);ar.addEventListener(mr,hr,gr),this._listeners.push(()=>ar.removeEventListener(mr,hr,gr))}clean(){this._listeners.forEach(ar=>ar()),this._listeners=[]}}class TimeoutStore{constructor(){_defineProperty$1(this,"_timeouts",new Map)}add(ar,dr,fr=140,...hr){this.remove(ar),this._timeouts.set(ar,window.setTimeout(dr,fr,...hr))}remove(ar){const dr=this._timeouts.get(ar);dr&&window.clearTimeout(dr)}clean(){this._timeouts.forEach(ar=>void window.clearTimeout(ar)),this._timeouts.clear()}}class Controller{constructor(ar){_defineProperty$1(this,"gestures",new Set),_defineProperty$1(this,"_targetEventStore",new EventStore(this)),_defineProperty$1(this,"gestureEventStores",{}),_defineProperty$1(this,"gestureTimeoutStores",{}),_defineProperty$1(this,"handlers",{}),_defineProperty$1(this,"config",{}),_defineProperty$1(this,"pointerIds",new Set),_defineProperty$1(this,"touchIds",new Set),_defineProperty$1(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),resolveGestures(this,ar)}setEventIds(ar){isTouch(ar)?this.touchIds=new Set(touchIds(ar)):"pointerId"in ar&&(ar.type==="pointerup"||ar.type==="pointercancel"?this.pointerIds.delete(ar.pointerId):ar.type==="pointerdown"&&this.pointerIds.add(ar.pointerId))}applyHandlers(ar,dr){this.handlers=ar,this.nativeHandlers=dr}applyConfig(ar,dr){this.config=parse$2(ar,dr)}clean(){this._targetEventStore.clean();for(const ar of this.gestures)this.gestureEventStores[ar].clean(),this.gestureTimeoutStores[ar].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...ar){const dr=this.config.shared,fr=dr.eventOptions,hr={};let pr;if(dr.target&&(pr=dr.target(),!pr))return;const mr=bindToProps(hr,fr,!!pr);if(dr.enabled){for(const gr of this.gestures)if(this.config[gr].enabled){const yr=EngineMap.get(gr);new yr(this,ar,gr).bind(mr)}for(const gr in this.nativeHandlers)mr(gr,"",yr=>this.nativeHandlers[gr](_objectSpread2$1(_objectSpread2$1({},this.state.shared),{},{event:yr,args:ar})),void 0,!0)}for(const gr in hr)hr[gr]=chain(...hr[gr]);if(!pr)return hr;for(const gr in hr){const{device:yr,capture:xr,passive:wr}=parseProp(gr);this._targetEventStore.add(pr,yr,"",hr[gr],{capture:xr,passive:wr})}}}function setupGesture(cr,ar){cr.gestures.add(ar),cr.gestureEventStores[ar]=new EventStore(cr),cr.gestureTimeoutStores[ar]=new TimeoutStore}function resolveGestures(cr,ar){ar.drag&&setupGesture(cr,"drag"),ar.wheel&&setupGesture(cr,"wheel"),ar.scroll&&setupGesture(cr,"scroll"),ar.move&&setupGesture(cr,"move"),ar.pinch&&setupGesture(cr,"pinch"),ar.hover&&setupGesture(cr,"hover")}const bindToProps=(cr,ar,dr)=>(fr,hr,pr,mr={},gr=!1)=>{var yr,xr;const wr=(yr=mr.capture)!==null&&yr!==void 0?yr:ar.capture,br=(xr=mr.passive)!==null&&xr!==void 0?xr:ar.passive;let Sr=gr?fr:toHandlerProp(fr,hr,wr);dr&&br&&(Sr+="Passive"),cr[Sr]=cr[Sr]||[],cr[Sr].push(pr)},RE_NOT_NATIVE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function sortHandlers(cr){const ar={},dr={},fr=new Set;for(let hr in cr)RE_NOT_NATIVE.test(hr)?(fr.add(RegExp.lastMatch),dr[hr]=cr[hr]):ar[hr]=cr[hr];return[dr,ar,fr]}function registerGesture(cr,ar,dr,fr,hr,pr){if(!cr.has(dr)||!EngineMap.has(fr))return;const mr=dr+"Start",gr=dr+"End",yr=xr=>{let wr;return xr.first&&mr in ar&&ar[mr](xr),dr in ar&&(wr=ar[dr](xr)),xr.last&&gr in ar&&ar[gr](xr),wr};hr[fr]=yr,pr[fr]=pr[fr]||{}}function parseMergedHandlers(cr,ar){const[dr,fr,hr]=sortHandlers(cr),pr={};return registerGesture(hr,dr,"onDrag","drag",pr,ar),registerGesture(hr,dr,"onWheel","wheel",pr,ar),registerGesture(hr,dr,"onScroll","scroll",pr,ar),registerGesture(hr,dr,"onPinch","pinch",pr,ar),registerGesture(hr,dr,"onMove","move",pr,ar),registerGesture(hr,dr,"onHover","hover",pr,ar),{handlers:pr,config:ar,nativeHandlers:fr}}function _defineProperty(cr,ar,dr){return ar in cr?Object.defineProperty(cr,ar,{value:dr,enumerable:!0,configurable:!0,writable:!0}):cr[ar]=dr,cr}function ownKeys(cr,ar){var dr=Object.keys(cr);if(Object.getOwnPropertySymbols){var fr=Object.getOwnPropertySymbols(cr);ar&&(fr=fr.filter(function(hr){return Object.getOwnPropertyDescriptor(cr,hr).enumerable})),dr.push.apply(dr,fr)}return dr}function _objectSpread2(cr){for(var ar=1;ar<arguments.length;ar++){var dr=arguments[ar]!=null?arguments[ar]:{};ar%2?ownKeys(Object(dr),!0).forEach(function(fr){_defineProperty(cr,fr,dr[fr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(cr,Object.getOwnPropertyDescriptors(dr)):ownKeys(Object(dr)).forEach(function(fr){Object.defineProperty(cr,fr,Object.getOwnPropertyDescriptor(dr,fr))})}return cr}const Recognizer=function(ar,dr,fr,hr,pr){this._gestureKey=hr,this._ctrl=new Controller(dr),this._ctrl.applyHandlers(dr,pr),this._ctrl.applyConfig(_objectSpread2(_objectSpread2({},fr),{},{target:ar}),this._gestureKey),this._ctrl.effect()};Recognizer.prototype.destroy=function(){this._ctrl.clean()};function createGesture(cr){return cr.forEach(registerAction),function(ar,dr,fr={}){const{handlers:hr,nativeHandlers:pr,config:mr}=parseMergedHandlers(dr,fr);return new Recognizer(ar,hr,mr,void 0,pr)}}const Gesture=function(ar,dr,fr={}){return createGesture([dragAction,pinchAction,scrollAction,wheelAction,moveAction,hoverAction])(ar,dr,fr)};function registerCameraControls(cr){const{scenes:{Main:{input:ar,camera:dr}},api:{mapInteraction:{mapInteractionEnabled:fr}}}=cr;dr.setZoom(2);const pr=(()=>{const Er=[2.8,2.4,2,1.6];let Ar=2;function _r(){return Ar=Math.max(Ar-1,0),Er[Ar]}function Cr(){return Ar=Math.min(Ar+1,Er.length-1),Er[Ar]}function kr(Rr){const Ir=Math.min(Math.max(Rr,Er[0]),Er[Er.length-1]);return Er.reduce((Nr,Pr)=>Math.abs(Pr-Ir)<Math.abs(Nr-Ir)?Pr:Nr)}return{zoomStages:Er,current:Ar,getCurrentZoom:()=>Er[Ar],zoomIn:_r,zoomOut:Cr,findClosestZoomStage:kr}})(),mr=6,gr=100,yr=new Subject;new Gesture(dr.phaserCamera.scene.game.canvas,{onWheel:Er=>yr.next(Er)},{}),yr.pipe(filter$2(Er=>!Er.pinching),throttleTime(500),filter$2(()=>fr()),filter$2(Er=>Er.axis==="y")).subscribe(Er=>{const{direction:Ar}=Er,_r=Ar[1];xr(_r>0?"out":"in")}),ar.pointermove$.pipe(filter$2(()=>fr()),filter$2(({pointer:Er})=>Er.isDown)).subscribe(({pointer:Er})=>{dr.setScroll(dr.phaserCamera.scrollX-(Er.x-Er.prevPosition.x)*1.7/dr.phaserCamera.zoom,dr.phaserCamera.scrollY-(Er.y-Er.prevPosition.y)*1.7/dr.phaserCamera.zoom)});const xr=Er=>{if(!fr())return;const{getCurrentZoom:Ar,zoomIn:_r,zoomOut:Cr}=pr,kr=Ar(),Ir=(Er==="in"?_r():Cr())-kr,Nr=200,Pr=10,Tr=Nr/Pr,Br=Ir/Tr;let Fr=0;const jr=setInterval(()=>{dr.setZoom(dr.phaserCamera.zoom+Br),Fr++,Fr===Tr&&clearInterval(jr)},Pr)};ar.onKeyPress(Er=>Er.has("PLUS"),()=>xr("in")),ar.onKeyPress(Er=>Er.has("MINUS"),()=>xr("out")),ar.onKeyPress(Er=>Er.has("ENTER")&&Er.has("CTRL")||Er.has("SPACE"),()=>{if(!fr())return;const Er=!!document.fullscreenElement,Ar=document.getElementsByTagName("body")[0];Er?document.exitFullscreen():Ar.requestFullscreen({navigationUI:"hide"})});const wr=Er=>{const Ar={x:0,y:0};let _r=1/0;if(Er.clientX<gr){Ar.x=-1;const Cr=Er.clientX;Cr<_r&&(_r=Cr)}if(Er.clientY<gr){Ar.y=-1;const Cr=Er.clientY;Cr<_r&&(_r=Cr)}if(Er.clientX>window.innerWidth-gr){Ar.x=1;const Cr=window.innerWidth-Er.clientX;Cr<_r&&(_r=Cr)}if(Er.clientY>window.innerHeight-gr){Ar.y=1;const Cr=window.innerHeight-Er.clientY;Cr<_r&&(_r=Cr)}return new Phaser.Math.Vector2(Ar).normalize().scale((gr-_r)/gr)},br=fromEvent$1(document,"mousemove"),Sr=merge$2(interval(2),br).pipe(filter$2(()=>!!document.fullscreenElement),throttleTime(2),scan((Er,Ar)=>lodashExports.isNumber(Ar)?Er:Ar,void 0),map$1(Er=>{if(Er)return wr(Er)}),ur());let vr;br.subscribe(Er=>{if(wr(Er).length()>0){if(vr!==void 0)return;vr=Sr.subscribe(_r=>{dr.setScroll(Math.floor(dr.phaserCamera.scrollX+_r.x*mr),Math.floor(dr.phaserCamera.scrollY+_r.y*mr))})}else vr!==void 0&&(vr?.unsubscribe(),vr=void 0)})}function worldCoordEq(cr,ar){return!cr||!ar?!1:cr.x===ar.x&&cr.y===ar.y}function pixelToWorldCoord(cr,ar){return{x:Math.floor(ar.x/cr.tileWidth),y:Math.floor(ar.y/cr.tileHeight)}}function registerClicks(cr,{getSelectedEntity:ar,getHighlightedEntity:dr}){const{parentLayers:{network:{utils:{isOwnedByCurrentPlayer:fr},components:{RequiresSetup:hr,BuildingUnit:pr}},headless:{components:{NextPosition:mr,OnCooldown:gr},api:{canAttack:yr,attack:xr,calculateMovementPath:wr,getAttackableEntities:br}},local:{api:{selectArea:Sr,resetSelection:vr,move:Er},components:{PotentialPath:Ar,LocalPosition:_r}}},api:{mapInteraction:{mapInteractionEnabled:Cr,enableMapInteraction:kr}},scenes:{Main:{input:Rr,maps:Ir}}}=cr,Nr=function(Pr){const Tr=ar();if(Tr&&!le$3(_r,Tr)){vr(),Sr({...Pr,width:1,height:1});return}if(Tr&&fr(Tr)){const Br=dr(),Fr=g$7(_r,Tr);if(!Fr)return;if(Br==null){if(le$3(gr,Tr)){vr(),Sr({...Pr,width:1,height:1});return}const jr=g$7(mr,Tr),Ur=[...A$6([Je$2(mr,{x:Pr.x,y:Pr.y})])][0];if(jr&&jr.userCommittedToPosition&&worldCoordEq(Pr,jr))Er(Tr,Pr),vr(!1);else if(!(!jr&&Ur))if((!jr||!jr.userCommittedToPosition)&&le$3(Ar,Tr)&&wr(_r,Tr,Fr,Pr).length>0){E$5(mr,Tr,{...Pr,userCommittedToPosition:!0,intendedTarget:void 0});const qr=br(Tr,Pr);(g$7(hr,Tr)?.value||qr&&qr.length===0)&&(Er(Tr,Pr),vr(!1))}else vr(),Sr({...Pr,width:1,height:1})}else{const jr=g$7(mr,Tr);jr&&!worldCoordEq(jr,Fr)?(Er(Tr,jr,Br),vr(!1)):yr(Tr,Br)?(xr(Tr,Br),vr(!1)):(vr(),Sr({...Pr,width:1,height:1}))}}else vr(),Sr({...Pr,width:1,height:1})};merge$2(Rr.click$,Rr.rightClick$).pipe(filter$2(Pr=>{const Tr=Pr.event.target instanceof HTMLCanvasElement;return[...A$6([Ye$3(pr)])].length>0?!1:(Tr&&!Cr()&&kr(),Tr)}),map$1(Pr=>({x:Pr.worldX,y:Pr.worldY})),map$1(Pr=>pixelToWorldCoord(Ir.Main,Pr))).subscribe(Pr=>{Nr(Pr)})}function registerHotkeys(cr,ar){const{parentLayers:{local:{api:{resetSelection:dr}}},scenes:{Main:{input:fr}}}=cr;fr.onKeyPress(hr=>hr.has(Phaser.Input.Keyboard.KeyCodes.ESC),()=>{dr()})}function registerHoverIcon(cr,{getSelectedEntity:ar}){const{scenes:{Main:{input:dr,maps:fr,phaserScene:hr}},components:{HoverHighlight:pr,PreviousHoverHighlight:mr},api:{highlightCoord:gr,mapInteraction:{mapInteractionEnabled:yr}},parentLayers:{network:{components:{TerrainType:xr,Position:wr,Range:br},utils:{isOwnedByCurrentPlayer:Sr}},headless:{api:{getMoveAndAttackPath:vr,canAttack:Er},components:{NextPosition:Ar,OnCooldown:_r}},local:{components:{Selected:Cr,LocalPosition:kr,AttackableEntities:Rr},api:{hasPotentialPath:Ir}}}}=cr,Nr=function(Br){const Fr=g$7(pr,f$8),jr=Fr&&[...A$6([Je$2(kr,{x:Fr.x,y:Fr.y}),Ge$2(xr)])][0];gr(Br);const Ur=ar();if(!Ur){dr.setCursor("url(public/assets/default-cursor-3.png), auto");return}if(le$3(_r,Ur)){dr.setCursor("url(public/assets/default-cursor-3.png), auto");return}if(!Sr(Ur)){dr.setCursor("url(public/assets/default-cursor-3.png), auto");return}const qr=g$7(Ar,Ur),Hr=g$7(Rr,Ur),Or=Hr&&Hr.value.find(Lr=>worldCoordEq(Br,g$7(wr,Lr)));if(Or){dr.setCursor("url(public/assets/attack.png), pointer");const Lr=g$7(kr,Ur);if(!Lr)return;const Vr=()=>{const zr={x:Lr.x,y:Lr.y,userCommittedToPosition:!1,intendedTarget:Or};K$4(zr,qr)||E$5(Ar,Ur,zr)};if(qr&&qr.userCommittedToPosition){se$4(Ar,Ur,{intendedTarget:Or});return}const Jr=(g$7(br,Ur)?.max??0)>1;let es=Lr;if(!Jr)es=g$7(mr,f$8)??Lr;else if(Er(Ur,Or)){Vr();return}if(worldCoordEq(es,Lr)&&Er(Ur,Or)){Vr();return}const ns=vr(kr,Ur,Or,es);if(ns.length===0&&Er(Ur,Or)){Vr();return}const Qr={x:ns[ns.length-1].x,y:ns[ns.length-1].y,userCommittedToPosition:!1,intendedTarget:Or};if(K$4(Qr,qr))return;E$5(Ar,Ur,Qr);return}else qr&&se$4(Ar,Ur,{intendedTarget:void 0});qr&&!qr.userCommittedToPosition&&ue$2(Ar,Ur);const Mr=qr&&qr.userCommittedToPosition&&worldCoordEq(Br,qr);if(Ur==jr&&!Mr){dr.setCursor("url(public/assets/default-cursor-3.png), auto");return}if(Ir(Ur,Br)||Mr){dr.setCursor("url(public/assets/move.png), pointer");return}dr.setCursor("url(public/assets/default-cursor-3.png), auto")};let Pr;const Tr=f$7([Ye$3(Cr),Ye$3(wr)]);merge$2(Tr.update$,dr.pointermove$).pipe(filter$2(()=>yr()),map$1(()=>{if(!hr.input)return{x:0,y:0};const Br=hr.input.activePointer;return{x:Br.worldX,y:Br.worldY}}),map$1(Br=>{const Fr=pixelToWorldCoord(fr.Main,Br);return worldCoordEq(Fr,Pr)?null:(Pr=Fr,Fr)}),ur()).subscribe(Br=>{Nr(Br)})}function registerDevModeToggle(cr){const{parentLayers:{local:{components:{DevMode:ar},api:{devModeEnabled:dr}}},scenes:{Main:{input:fr}}}=cr;fr.onKeyPress(hr=>hr.has("BACKTICK"),()=>{E$5(ar,f$8,{value:!dr()})})}function createInputSystem(cr){const{components:{HoverHighlight:ar},parentLayers:{headless:{components:{InCurrentMatch:dr}},local:{components:{Selected:fr,LocalPosition:hr,Interactable:pr}}}}=cr,mr={getSelectedEntity:()=>[...A$6([Ye$3(fr)])][0],getHighlightedEntity:()=>{const gr=g$7(ar,f$8);return gr?[...A$6([Ye$3(dr),Je$2(hr,{x:gr.x,y:gr.y}),Ye$3(pr)])][0]:void 0},getHoverPosition:()=>{const gr=g$7(ar,f$8);if(gr)return{x:gr.x,y:gr.y}}};registerDevModeToggle(cr),registerCameraControls(cr),registerClicks(cr,mr),registerHotkeys(cr),registerHoverIcon(cr,mr)}function createDrawHighlightCoordSystem(cr){const{world:ar,scenes:{Main:{objectPool:dr,maps:{Main:{tileWidth:fr,tileHeight:hr}}}},components:{HoverHighlight:pr},api:{playTintedAnimation:mr}}=cr;_$4(ar,[Ye$3(pr)],({entity:gr,type:yr})=>{const xr=`${gr}-hover-highlight`;if(yr===k$5.Exit){dr.remove(xr);return}const wr=de$2(pr,f$8),br=dr.get(xr,"Sprite"),Sr={x:wr.x,y:wr.y};mr(xr,Animations.TileSelect,"white"),br.setComponent({id:"highlight",once:vr=>{const Er=B$4(Sr,fr,hr);vr.setPosition(Er.x,Er.y),vr.setDepth(RenderDepth.Background2)}})})}var __awaiter$5=function(cr,ar,dr,fr){function hr(pr){return pr instanceof dr?pr:new dr(function(mr){mr(pr)})}return new(dr||(dr=Promise))(function(pr,mr){function gr(wr){try{xr(fr.next(wr))}catch(br){mr(br)}}function yr(wr){try{xr(fr.throw(wr))}catch(br){mr(br)}}function xr(wr){wr.done?pr(wr.value):hr(wr.value).then(gr,yr)}xr((fr=fr.apply(cr,ar||[])).next())})},__generator$1=function(cr,ar){var dr={label:0,sent:function(){if(pr[0]&1)throw pr[1];return pr[1]},trys:[],ops:[]},fr,hr,pr,mr;return mr={next:gr(0),throw:gr(1),return:gr(2)},typeof Symbol=="function"&&(mr[Symbol.iterator]=function(){return this}),mr;function gr(xr){return function(wr){return yr([xr,wr])}}function yr(xr){if(fr)throw new TypeError("Generator is already executing.");for(;mr&&(mr=0,xr[0]&&(dr=0)),dr;)try{if(fr=1,hr&&(pr=xr[0]&2?hr.return:xr[0]?hr.throw||((pr=hr.return)&&pr.call(hr),0):hr.next)&&!(pr=pr.call(hr,xr[1])).done)return pr;switch(hr=0,pr&&(xr=[xr[0]&2,pr.value]),xr[0]){case 0:case 1:pr=xr;break;case 4:return dr.label++,{value:xr[1],done:!1};case 5:dr.label++,hr=xr[1],xr=[0];continue;case 7:xr=dr.ops.pop(),dr.trys.pop();continue;default:if(pr=dr.trys,!(pr=pr.length>0&&pr[pr.length-1])&&(xr[0]===6||xr[0]===2)){dr=0;continue}if(xr[0]===3&&(!pr||xr[1]>pr[0]&&xr[1]<pr[3])){dr.label=xr[1];break}if(xr[0]===6&&dr.label<pr[1]){dr.label=pr[1],pr=xr;break}if(pr&&dr.label<pr[2]){dr.label=pr[2],dr.ops.push(xr);break}pr[2]&&dr.ops.pop(),dr.trys.pop();continue}xr=ar.call(cr,dr)}catch(wr){xr=[6,wr],hr=0}finally{fr=pr=0}if(xr[0]&5)throw xr[1];return{value:xr[0]?xr[1]:void 0,done:!0}}},__read$1=function(cr,ar){var dr=typeof Symbol=="function"&&cr[Symbol.iterator];if(!dr)return cr;var fr=dr.call(cr),hr,pr=[],mr;try{for(;(ar===void 0||ar-- >0)&&!(hr=fr.next()).done;)pr.push(hr.value)}catch(gr){mr={error:gr}}finally{try{hr&&!hr.done&&(dr=fr.return)&&dr.call(fr)}finally{if(mr)throw mr.error}}return pr},__spreadArray$1=function(cr,ar,dr){if(dr||arguments.length===2)for(var fr=0,hr=ar.length,pr;fr<hr;fr++)(pr||!(fr in ar))&&(pr||(pr=Array.prototype.slice.call(ar,0,fr)),pr[fr]=ar[fr]);return cr.concat(pr||Array.prototype.slice.call(ar))},__values$1=function(cr){var ar=typeof Symbol=="function"&&Symbol.iterator,dr=ar&&cr[ar],fr=0;if(dr)return dr.call(cr);if(cr&&typeof cr.length=="number")return{next:function(){return cr&&fr>=cr.length&&(cr=void 0),{value:cr&&cr[fr++],done:!cr}}};throw new TypeError(ar?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function cr(ar){ar===void 0&&(ar=cr.minComparator);var dr=this;this.compare=ar,this.heapArray=[],this._limit=0,this.offer=this.add,this.element=this.peek,this.poll=this.pop,this._invertedCompare=function(fr,hr){return dr.compare(fr,hr).then(function(pr){return-1*pr})}}return cr.getChildrenIndexOf=function(ar){return[ar*2+1,ar*2+2]},cr.getParentIndexOf=function(ar){if(ar<=0)return-1;var dr=ar%2?1:2;return Math.floor((ar-dr)/2)},cr.getSiblingIndexOf=function(ar){if(ar<=0)return-1;var dr=ar%2?1:-1;return ar+dr},cr.minComparator=function(ar,dr){return __awaiter$5(this,void 0,void 0,function(){return __generator$1(this,function(fr){return ar>dr?[2,1]:ar<dr?[2,-1]:[2,0]})})},cr.maxComparator=function(ar,dr){return __awaiter$5(this,void 0,void 0,function(){return __generator$1(this,function(fr){return dr>ar?[2,1]:dr<ar?[2,-1]:[2,0]})})},cr.minComparatorNumber=function(ar,dr){return __awaiter$5(this,void 0,void 0,function(){return __generator$1(this,function(fr){return[2,ar-dr]})})},cr.maxComparatorNumber=function(ar,dr){return __awaiter$5(this,void 0,void 0,function(){return __generator$1(this,function(fr){return[2,dr-ar]})})},cr.defaultIsEqual=function(ar,dr){return __awaiter$5(this,void 0,void 0,function(){return __generator$1(this,function(fr){return[2,ar===dr]})})},cr.print=function(ar){function dr(wr){var br=cr.getParentIndexOf(wr);return Math.floor(Math.log2(br+1))}function fr(wr,br){for(var Sr="";br>0;--br)Sr+=wr;return Sr}for(var hr=0,pr=[],mr=dr(ar.length-1)+2,gr=0;hr<ar.length;){var yr=dr(hr)+1;hr===0&&(yr=0);var xr=String(ar.get(hr));xr.length>gr&&(gr=xr.length),pr[yr]=pr[yr]||[],pr[yr].push(xr),hr+=1}return pr.map(function(wr,br){var Sr=Math.pow(2,mr-br)-1;return fr(" ",Math.floor(Sr/2)*gr)+wr.map(function(vr){var Er=(gr-vr.length)/2;return fr(" ",Math.ceil(Er))+vr+fr(" ",Math.floor(Er))}).join(fr(" ",Sr*gr))}).join(`
`)},cr.heapify=function(ar,dr){return __awaiter$5(this,void 0,void 0,function(){var fr;return __generator$1(this,function(hr){switch(hr.label){case 0:return fr=new cr(dr),fr.heapArray=ar,[4,fr.init()];case 1:return hr.sent(),[2,fr]}})})},cr.heappop=function(ar,dr){var fr=new cr(dr);return fr.heapArray=ar,fr.pop()},cr.heappush=function(ar,dr,fr){return __awaiter$5(this,void 0,void 0,function(){var hr;return __generator$1(this,function(pr){switch(pr.label){case 0:return hr=new cr(fr),hr.heapArray=ar,[4,hr.push(dr)];case 1:return pr.sent(),[2]}})})},cr.heappushpop=function(ar,dr,fr){var hr=new cr(fr);return hr.heapArray=ar,hr.pushpop(dr)},cr.heapreplace=function(ar,dr,fr){var hr=new cr(fr);return hr.heapArray=ar,hr.replace(dr)},cr.heaptop=function(ar,dr,fr){dr===void 0&&(dr=1);var hr=new cr(fr);return hr.heapArray=ar,hr.top(dr)},cr.heapbottom=function(ar,dr,fr){dr===void 0&&(dr=1);var hr=new cr(fr);return hr.heapArray=ar,hr.bottom(dr)},cr.nlargest=function(ar,dr,fr){return __awaiter$5(this,void 0,void 0,function(){var hr;return __generator$1(this,function(pr){switch(pr.label){case 0:return hr=new cr(fr),hr.heapArray=__spreadArray$1([],__read$1(dr),!1),[4,hr.init()];case 1:return pr.sent(),[2,hr.top(ar)]}})})},cr.nsmallest=function(ar,dr,fr){return __awaiter$5(this,void 0,void 0,function(){var hr;return __generator$1(this,function(pr){switch(pr.label){case 0:return hr=new cr(fr),hr.heapArray=__spreadArray$1([],__read$1(dr),!1),[4,hr.init()];case 1:return pr.sent(),[2,hr.bottom(ar)]}})})},cr.prototype.add=function(ar){return __awaiter$5(this,void 0,void 0,function(){return __generator$1(this,function(dr){switch(dr.label){case 0:return[4,this._sortNodeUp(this.heapArray.push(ar)-1)];case 1:return dr.sent(),this._applyLimit(),[2,!0]}})})},cr.prototype.addAll=function(ar){return __awaiter$5(this,void 0,void 0,function(){var dr,fr,hr;return __generator$1(this,function(pr){switch(pr.label){case 0:dr=this.length,(hr=this.heapArray).push.apply(hr,__spreadArray$1([],__read$1(ar),!1)),fr=this.length,pr.label=1;case 1:return dr<fr?[4,this._sortNodeUp(dr)]:[3,4];case 2:pr.sent(),pr.label=3;case 3:return++dr,[3,1];case 4:return this._applyLimit(),[2,!0]}})})},cr.prototype.bottom=function(ar){return ar===void 0&&(ar=1),__awaiter$5(this,void 0,void 0,function(){return __generator$1(this,function(dr){return this.heapArray.length===0||ar<=0?[2,[]]:this.heapArray.length===1?[2,[this.heapArray[0]]]:ar>=this.heapArray.length?[2,__spreadArray$1([],__read$1(this.heapArray),!1)]:[2,this._bottomN_push(~~ar)]})})},cr.prototype.check=function(){return __awaiter$5(this,void 0,void 0,function(){var ar,dr,fr,hr,pr,mr,gr,yr,xr;return __generator$1(this,function(wr){switch(wr.label){case 0:ar=0,wr.label=1;case 1:if(!(ar<this.heapArray.length))return[3,10];dr=this.heapArray[ar],fr=this.getChildrenOf(ar),wr.label=2;case 2:wr.trys.push([2,7,8,9]),hr=(yr=void 0,__values$1(fr)),pr=hr.next(),wr.label=3;case 3:return pr.done?[3,6]:(mr=pr.value,[4,this.compare(dr,mr)]);case 4:if(wr.sent()>0)return[2,dr];wr.label=5;case 5:return pr=hr.next(),[3,3];case 6:return[3,9];case 7:return gr=wr.sent(),yr={error:gr},[3,9];case 8:try{pr&&!pr.done&&(xr=hr.return)&&xr.call(hr)}finally{if(yr)throw yr.error}return[7];case 9:return++ar,[3,1];case 10:return[2]}})})},cr.prototype.clear=function(){this.heapArray=[]},cr.prototype.clone=function(){var ar=new cr(this.comparator());return ar.heapArray=this.toArray(),ar._limit=this._limit,ar},cr.prototype.comparator=function(){return this.compare},cr.prototype.contains=function(ar,dr){return dr===void 0&&(dr=cr.defaultIsEqual),__awaiter$5(this,void 0,void 0,function(){var fr,hr,pr,mr,gr,yr;return __generator$1(this,function(xr){switch(xr.label){case 0:xr.trys.push([0,5,6,7]),fr=__values$1(this.heapArray),hr=fr.next(),xr.label=1;case 1:return hr.done?[3,4]:(pr=hr.value,[4,dr(pr,ar)]);case 2:if(xr.sent())return[2,!0];xr.label=3;case 3:return hr=fr.next(),[3,1];case 4:return[3,7];case 5:return mr=xr.sent(),gr={error:mr},[3,7];case 6:try{hr&&!hr.done&&(yr=fr.return)&&yr.call(fr)}finally{if(gr)throw gr.error}return[7];case 7:return[2,!1]}})})},cr.prototype.init=function(ar){return __awaiter$5(this,void 0,void 0,function(){var dr;return __generator$1(this,function(fr){switch(fr.label){case 0:ar&&(this.heapArray=__spreadArray$1([],__read$1(ar),!1)),dr=Math.floor(this.heapArray.length),fr.label=1;case 1:return dr>=0?[4,this._sortNodeDown(dr)]:[3,4];case 2:fr.sent(),fr.label=3;case 3:return--dr,[3,1];case 4:return this._applyLimit(),[2]}})})},cr.prototype.isEmpty=function(){return this.length===0},cr.prototype.leafs=function(){if(this.heapArray.length===0)return[];var ar=cr.getParentIndexOf(this.heapArray.length-1);return this.heapArray.slice(ar+1)},Object.defineProperty(cr.prototype,"length",{get:function(){return this.heapArray.length},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"limit",{get:function(){return this._limit},set:function(ar){this._limit=~~ar,this._applyLimit()},enumerable:!1,configurable:!0}),cr.prototype.peek=function(){return this.heapArray[0]},cr.prototype.pop=function(){return __awaiter$5(this,void 0,void 0,function(){var ar;return __generator$1(this,function(dr){return ar=this.heapArray.pop(),this.length>0&&ar!==void 0?[2,this.replace(ar)]:[2,ar]})})},cr.prototype.push=function(){for(var ar=[],dr=0;dr<arguments.length;dr++)ar[dr]=arguments[dr];return __awaiter$5(this,void 0,void 0,function(){return __generator$1(this,function(fr){return ar.length<1?[2,!1]:ar.length===1?[2,this.add(ar[0])]:[2,this.addAll(ar)]})})},cr.prototype.pushpop=function(ar){return __awaiter$5(this,void 0,void 0,function(){var dr;return __generator$1(this,function(fr){switch(fr.label){case 0:return[4,this.compare(this.heapArray[0],ar)];case 1:return fr.sent()<0?(dr=__read$1([this.heapArray[0],ar],2),ar=dr[0],this.heapArray[0]=dr[1],[4,this._sortNodeDown(0)]):[3,3];case 2:fr.sent(),fr.label=3;case 3:return[2,ar]}})})},cr.prototype.remove=function(ar,dr){return dr===void 0&&(dr=cr.defaultIsEqual),__awaiter$5(this,void 0,void 0,function(){var fr,hr;return __generator$1(this,function(pr){switch(pr.label){case 0:return this.length>0?ar!==void 0?[3,2]:[4,this.pop()]:[3,13];case 1:return pr.sent(),[2,!0];case 2:fr=-1,hr=0,pr.label=3;case 3:return hr<this.heapArray.length?[4,dr(this.heapArray[hr],ar)]:[3,6];case 4:if(pr.sent())return fr=hr,[3,6];pr.label=5;case 5:return++hr,[3,3];case 6:return fr>=0?fr!==0?[3,8]:[4,this.pop()]:[3,13];case 7:return pr.sent(),[3,12];case 8:return fr!==this.length-1?[3,9]:(this.heapArray.pop(),[3,12]);case 9:return this.heapArray.splice(fr,1,this.heapArray.pop()),[4,this._sortNodeUp(fr)];case 10:return pr.sent(),[4,this._sortNodeDown(fr)];case 11:pr.sent(),pr.label=12;case 12:return[2,!0];case 13:return[2,!1]}})})},cr.prototype.replace=function(ar){return __awaiter$5(this,void 0,void 0,function(){var dr;return __generator$1(this,function(fr){switch(fr.label){case 0:return dr=this.heapArray[0],this.heapArray[0]=ar,[4,this._sortNodeDown(0)];case 1:return fr.sent(),[2,dr]}})})},cr.prototype.size=function(){return this.length},cr.prototype.top=function(ar){return ar===void 0&&(ar=1),__awaiter$5(this,void 0,void 0,function(){return __generator$1(this,function(dr){return this.heapArray.length===0||ar<=0?[2,[]]:this.heapArray.length===1||ar===1?[2,[this.heapArray[0]]]:ar>=this.heapArray.length?[2,__spreadArray$1([],__read$1(this.heapArray),!1)]:[2,this._topN_push(~~ar)]})})},cr.prototype.toArray=function(){return __spreadArray$1([],__read$1(this.heapArray),!1)},cr.prototype.toString=function(){return this.heapArray.toString()},cr.prototype.get=function(ar){return this.heapArray[ar]},cr.prototype.getChildrenOf=function(ar){var dr=this;return cr.getChildrenIndexOf(ar).map(function(fr){return dr.heapArray[fr]}).filter(function(fr){return fr!==void 0})},cr.prototype.getParentOf=function(ar){var dr=cr.getParentIndexOf(ar);return this.heapArray[dr]},cr.prototype[Symbol.iterator]=function(){return __generator$1(this,function(ar){switch(ar.label){case 0:return this.length?[4,this.pop()]:[3,2];case 1:return ar.sent(),[3,0];case 2:return[2]}})},cr.prototype.iterator=function(){return this},cr.prototype._applyLimit=function(){if(this._limit&&this._limit<this.heapArray.length)for(var ar=this.heapArray.length-this._limit;ar;)this.heapArray.pop(),--ar},cr.prototype._bottomN_push=function(ar){return __awaiter$5(this,void 0,void 0,function(){var dr,fr,hr,pr,gr,mr,gr;return __generator$1(this,function(yr){switch(yr.label){case 0:return dr=new cr(this.compare),dr.limit=ar,dr.heapArray=this.heapArray.slice(-ar),[4,dr.init()];case 1:for(yr.sent(),fr=this.heapArray.length-1-ar,hr=cr.getParentIndexOf(fr),pr=[],gr=fr;gr>hr;--gr)pr.push(gr);mr=this.heapArray,yr.label=2;case 2:return pr.length?(gr=pr.shift(),[4,this.compare(mr[gr],dr.peek())]):[3,6];case 3:return yr.sent()>0?[4,dr.replace(mr[gr])]:[3,5];case 4:yr.sent(),gr%2&&pr.push(cr.getParentIndexOf(gr)),yr.label=5;case 5:return[3,2];case 6:return[2,dr.toArray()]}})})},cr.prototype._moveNode=function(ar,dr){var fr;fr=__read$1([this.heapArray[dr],this.heapArray[ar]],2),this.heapArray[ar]=fr[0],this.heapArray[dr]=fr[1]},cr.prototype._sortNodeDown=function(ar){return __awaiter$5(this,void 0,void 0,function(){var dr,fr,hr,pr,mr,gr,yr,xr,wr=this;return __generator$1(this,function(br){switch(br.label){case 0:dr=ar<this.heapArray.length-1,fr=this.heapArray[ar],hr=function(Sr,vr){return __awaiter$5(wr,void 0,void 0,function(){var Er;return __generator$1(this,function(Ar){switch(Ar.label){case 0:return Er=this.heapArray.length>vr,Er?[4,this.compare(this.heapArray[vr],this.heapArray[Sr])]:[3,2];case 1:Er=Ar.sent()<0,Ar.label=2;case 2:return Er&&(Sr=vr),[2,Sr]}})})},br.label=1;case 1:if(!dr)return[3,8];pr=cr.getChildrenIndexOf(ar),mr=pr[0],gr=1,br.label=2;case 2:return gr<pr.length?[4,hr(mr,pr[gr])]:[3,5];case 3:mr=br.sent(),br.label=4;case 4:return++gr,[3,2];case 5:return yr=this.heapArray[mr],xr=typeof yr<"u",xr?[4,this.compare(fr,yr)]:[3,7];case 6:xr=br.sent()>0,br.label=7;case 7:return xr?(this._moveNode(ar,mr),ar=mr):dr=!1,[3,1];case 8:return[2]}})})},cr.prototype._sortNodeUp=function(ar){return __awaiter$5(this,void 0,void 0,function(){var dr,fr,hr;return __generator$1(this,function(pr){switch(pr.label){case 0:dr=ar>0,pr.label=1;case 1:return dr?(fr=cr.getParentIndexOf(ar),hr=fr>=0,hr?[4,this.compare(this.heapArray[fr],this.heapArray[ar])]:[3,3]):[3,4];case 2:hr=pr.sent()>0,pr.label=3;case 3:return hr?(this._moveNode(ar,fr),ar=fr):dr=!1,[3,1];case 4:return[2]}})})},cr.prototype._topN_push=function(ar){return __awaiter$5(this,void 0,void 0,function(){var dr,fr,hr,pr;return __generator$1(this,function(mr){switch(mr.label){case 0:dr=new cr(this._invertedCompare),dr.limit=ar,fr=[0],hr=this.heapArray,mr.label=1;case 1:return fr.length?(pr=fr.shift(),pr<hr.length?dr.length<ar?[4,dr.push(hr[pr])]:[3,3]:[3,6]):[3,7];case 2:return mr.sent(),fr.push.apply(fr,__spreadArray$1([],__read$1(cr.getChildrenIndexOf(pr)),!1)),[3,6];case 3:return[4,this.compare(hr[pr],dr.peek())];case 4:return mr.sent()<0?[4,dr.replace(hr[pr])]:[3,6];case 5:mr.sent(),fr.push.apply(fr,__spreadArray$1([],__read$1(cr.getChildrenIndexOf(pr)),!1)),mr.label=6;case 6:return[3,1];case 7:return[2,dr.toArray()]}})})},cr.prototype._topN_fill=function(ar){return __awaiter$5(this,void 0,void 0,function(){var dr,fr,hr,pr,mr,mr;return __generator$1(this,function(gr){switch(gr.label){case 0:return dr=this.heapArray,fr=new cr(this._invertedCompare),fr.limit=ar,fr.heapArray=dr.slice(0,ar),[4,fr.init()];case 1:for(gr.sent(),hr=cr.getParentIndexOf(ar-1)+1,pr=[],mr=hr;mr<ar;++mr)pr.push.apply(pr,__spreadArray$1([],__read$1(cr.getChildrenIndexOf(mr).filter(function(yr){return yr<dr.length})),!1));(ar-1)%2&&pr.push(ar),gr.label=2;case 2:return pr.length?(mr=pr.shift(),mr<dr.length?[4,this.compare(dr[mr],fr.peek())]:[3,5]):[3,6];case 3:return gr.sent()<0?[4,fr.replace(dr[mr])]:[3,5];case 4:gr.sent(),pr.push.apply(pr,__spreadArray$1([],__read$1(cr.getChildrenIndexOf(mr)),!1)),gr.label=5;case 5:return[3,2];case 6:return[2,fr.toArray()]}})})},cr.prototype._topN_heap=function(ar){return __awaiter$5(this,void 0,void 0,function(){var dr,fr,hr,pr,mr;return __generator$1(this,function(gr){switch(gr.label){case 0:dr=this.clone(),fr=[],hr=0,gr.label=1;case 1:return hr<ar?(mr=(pr=fr).push,[4,dr.pop()]):[3,4];case 2:mr.apply(pr,[gr.sent()]),gr.label=3;case 3:return++hr,[3,1];case 4:return[2,fr]}})})},cr.prototype._topIdxOf=function(ar){return __awaiter$5(this,void 0,void 0,function(){var dr,fr,hr,pr;return __generator$1(this,function(mr){switch(mr.label){case 0:if(!ar.length)return[2,-1];dr=0,fr=ar[dr],hr=1,mr.label=1;case 1:return hr<ar.length?[4,this.compare(ar[hr],fr)]:[3,4];case 2:pr=mr.sent(),pr<0&&(dr=hr,fr=ar[hr]),mr.label=3;case 3:return++hr,[3,1];case 4:return[2,dr]}})})},cr.prototype._topOf=function(){for(var ar=[],dr=0;dr<arguments.length;dr++)ar[dr]=arguments[dr];return __awaiter$5(this,void 0,void 0,function(){var fr;return __generator$1(this,function(hr){switch(hr.label){case 0:return fr=new cr(this.compare),[4,fr.init(ar)];case 1:return hr.sent(),[2,fr.peek()]}})})},cr})();var __generator$2=function(cr,ar){var dr={label:0,sent:function(){if(pr[0]&1)throw pr[1];return pr[1]},trys:[],ops:[]},fr,hr,pr,mr;return mr={next:gr(0),throw:gr(1),return:gr(2)},typeof Symbol=="function"&&(mr[Symbol.iterator]=function(){return this}),mr;function gr(xr){return function(wr){return yr([xr,wr])}}function yr(xr){if(fr)throw new TypeError("Generator is already executing.");for(;mr&&(mr=0,xr[0]&&(dr=0)),dr;)try{if(fr=1,hr&&(pr=xr[0]&2?hr.return:xr[0]?hr.throw||((pr=hr.return)&&pr.call(hr),0):hr.next)&&!(pr=pr.call(hr,xr[1])).done)return pr;switch(hr=0,pr&&(xr=[xr[0]&2,pr.value]),xr[0]){case 0:case 1:pr=xr;break;case 4:return dr.label++,{value:xr[1],done:!1};case 5:dr.label++,hr=xr[1],xr=[0];continue;case 7:xr=dr.ops.pop(),dr.trys.pop();continue;default:if(pr=dr.trys,!(pr=pr.length>0&&pr[pr.length-1])&&(xr[0]===6||xr[0]===2)){dr=0;continue}if(xr[0]===3&&(!pr||xr[1]>pr[0]&&xr[1]<pr[3])){dr.label=xr[1];break}if(xr[0]===6&&dr.label<pr[1]){dr.label=pr[1],pr=xr;break}if(pr&&dr.label<pr[2]){dr.label=pr[2],dr.ops.push(xr);break}pr[2]&&dr.ops.pop(),dr.trys.pop();continue}xr=ar.call(cr,dr)}catch(wr){xr=[6,wr],hr=0}finally{fr=pr=0}if(xr[0]&5)throw xr[1];return{value:xr[0]?xr[1]:void 0,done:!0}}},__read$2=function(cr,ar){var dr=typeof Symbol=="function"&&cr[Symbol.iterator];if(!dr)return cr;var fr=dr.call(cr),hr,pr=[],mr;try{for(;(ar===void 0||ar-- >0)&&!(hr=fr.next()).done;)pr.push(hr.value)}catch(gr){mr={error:gr}}finally{try{hr&&!hr.done&&(dr=fr.return)&&dr.call(fr)}finally{if(mr)throw mr.error}}return pr},__spreadArray$2=function(cr,ar,dr){if(dr||arguments.length===2)for(var fr=0,hr=ar.length,pr;fr<hr;fr++)(pr||!(fr in ar))&&(pr||(pr=Array.prototype.slice.call(ar,0,fr)),pr[fr]=ar[fr]);return cr.concat(pr||Array.prototype.slice.call(ar))},Heap=function(){function cr(ar){ar===void 0&&(ar=cr.minComparator);var dr=this;this.compare=ar,this.heapArray=[],this._limit=0,this.offer=this.add,this.element=this.peek,this.poll=this.pop,this._invertedCompare=function(fr,hr){return-1*dr.compare(fr,hr)}}return cr.getChildrenIndexOf=function(ar){return[ar*2+1,ar*2+2]},cr.getParentIndexOf=function(ar){if(ar<=0)return-1;var dr=ar%2?1:2;return Math.floor((ar-dr)/2)},cr.getSiblingIndexOf=function(ar){if(ar<=0)return-1;var dr=ar%2?1:-1;return ar+dr},cr.minComparator=function(ar,dr){return ar>dr?1:ar<dr?-1:0},cr.maxComparator=function(ar,dr){return dr>ar?1:dr<ar?-1:0},cr.minComparatorNumber=function(ar,dr){return ar-dr},cr.maxComparatorNumber=function(ar,dr){return dr-ar},cr.defaultIsEqual=function(ar,dr){return ar===dr},cr.print=function(ar){function dr(wr){var br=cr.getParentIndexOf(wr);return Math.floor(Math.log2(br+1))}function fr(wr,br){for(var Sr="";br>0;--br)Sr+=wr;return Sr}for(var hr=0,pr=[],mr=dr(ar.length-1)+2,gr=0;hr<ar.length;){var yr=dr(hr)+1;hr===0&&(yr=0);var xr=String(ar.get(hr));xr.length>gr&&(gr=xr.length),pr[yr]=pr[yr]||[],pr[yr].push(xr),hr+=1}return pr.map(function(wr,br){var Sr=Math.pow(2,mr-br)-1;return fr(" ",Math.floor(Sr/2)*gr)+wr.map(function(vr){var Er=(gr-vr.length)/2;return fr(" ",Math.ceil(Er))+vr+fr(" ",Math.floor(Er))}).join(fr(" ",Sr*gr))}).join(`
`)},cr.heapify=function(ar,dr){var fr=new cr(dr);return fr.heapArray=ar,fr.init(),fr},cr.heappop=function(ar,dr){var fr=new cr(dr);return fr.heapArray=ar,fr.pop()},cr.heappush=function(ar,dr,fr){var hr=new cr(fr);hr.heapArray=ar,hr.push(dr)},cr.heappushpop=function(ar,dr,fr){var hr=new cr(fr);return hr.heapArray=ar,hr.pushpop(dr)},cr.heapreplace=function(ar,dr,fr){var hr=new cr(fr);return hr.heapArray=ar,hr.replace(dr)},cr.heaptop=function(ar,dr,fr){dr===void 0&&(dr=1);var hr=new cr(fr);return hr.heapArray=ar,hr.top(dr)},cr.heapbottom=function(ar,dr,fr){dr===void 0&&(dr=1);var hr=new cr(fr);return hr.heapArray=ar,hr.bottom(dr)},cr.nlargest=function(ar,dr,fr){var hr=new cr(fr);return hr.heapArray=__spreadArray$2([],__read$2(dr),!1),hr.init(),hr.top(ar)},cr.nsmallest=function(ar,dr,fr){var hr=new cr(fr);return hr.heapArray=__spreadArray$2([],__read$2(dr),!1),hr.init(),hr.bottom(ar)},cr.prototype.add=function(ar){return this._sortNodeUp(this.heapArray.push(ar)-1),this._applyLimit(),!0},cr.prototype.addAll=function(ar){var dr,fr=this.length;(dr=this.heapArray).push.apply(dr,__spreadArray$2([],__read$2(ar),!1));for(var hr=this.length;fr<hr;++fr)this._sortNodeUp(fr);return this._applyLimit(),!0},cr.prototype.bottom=function(ar){return ar===void 0&&(ar=1),this.heapArray.length===0||ar<=0?[]:this.heapArray.length===1?[this.heapArray[0]]:ar>=this.heapArray.length?__spreadArray$2([],__read$2(this.heapArray),!1):this._bottomN_push(~~ar)},cr.prototype.check=function(){var ar=this;return this.heapArray.find(function(dr,fr){return!!ar.getChildrenOf(fr).find(function(hr){return ar.compare(dr,hr)>0})})},cr.prototype.clear=function(){this.heapArray=[]},cr.prototype.clone=function(){var ar=new cr(this.comparator());return ar.heapArray=this.toArray(),ar._limit=this._limit,ar},cr.prototype.comparator=function(){return this.compare},cr.prototype.contains=function(ar,dr){return dr===void 0&&(dr=cr.defaultIsEqual),this.heapArray.findIndex(function(fr){return dr(fr,ar)})>=0},cr.prototype.init=function(ar){ar&&(this.heapArray=__spreadArray$2([],__read$2(ar),!1));for(var dr=Math.floor(this.heapArray.length);dr>=0;--dr)this._sortNodeDown(dr);this._applyLimit()},cr.prototype.isEmpty=function(){return this.length===0},cr.prototype.leafs=function(){if(this.heapArray.length===0)return[];var ar=cr.getParentIndexOf(this.heapArray.length-1);return this.heapArray.slice(ar+1)},Object.defineProperty(cr.prototype,"length",{get:function(){return this.heapArray.length},enumerable:!1,configurable:!0}),Object.defineProperty(cr.prototype,"limit",{get:function(){return this._limit},set:function(ar){this._limit=~~ar,this._applyLimit()},enumerable:!1,configurable:!0}),cr.prototype.peek=function(){return this.heapArray[0]},cr.prototype.pop=function(){var ar=this.heapArray.pop();return this.length>0&&ar!==void 0?this.replace(ar):ar},cr.prototype.push=function(){for(var ar=[],dr=0;dr<arguments.length;dr++)ar[dr]=arguments[dr];return ar.length<1?!1:ar.length===1?this.add(ar[0]):this.addAll(ar)},cr.prototype.pushpop=function(ar){var dr;return this.compare(this.heapArray[0],ar)<0&&(dr=__read$2([this.heapArray[0],ar],2),ar=dr[0],this.heapArray[0]=dr[1],this._sortNodeDown(0)),ar},cr.prototype.remove=function(ar,dr){if(dr===void 0&&(dr=cr.defaultIsEqual),this.length>0){if(ar===void 0)return this.pop(),!0;var fr=this.heapArray.findIndex(function(hr){return dr(hr,ar)});if(fr>=0)return fr===0?this.pop():fr===this.length-1?this.heapArray.pop():(this.heapArray.splice(fr,1,this.heapArray.pop()),this._sortNodeUp(fr),this._sortNodeDown(fr)),!0}return!1},cr.prototype.replace=function(ar){var dr=this.heapArray[0];return this.heapArray[0]=ar,this._sortNodeDown(0),dr},cr.prototype.size=function(){return this.length},cr.prototype.top=function(ar){return ar===void 0&&(ar=1),this.heapArray.length===0||ar<=0?[]:this.heapArray.length===1||ar===1?[this.heapArray[0]]:ar>=this.heapArray.length?__spreadArray$2([],__read$2(this.heapArray),!1):this._topN_push(~~ar)},cr.prototype.toArray=function(){return __spreadArray$2([],__read$2(this.heapArray),!1)},cr.prototype.toString=function(){return this.heapArray.toString()},cr.prototype.get=function(ar){return this.heapArray[ar]},cr.prototype.getChildrenOf=function(ar){var dr=this;return cr.getChildrenIndexOf(ar).map(function(fr){return dr.heapArray[fr]}).filter(function(fr){return fr!==void 0})},cr.prototype.getParentOf=function(ar){var dr=cr.getParentIndexOf(ar);return this.heapArray[dr]},cr.prototype[Symbol.iterator]=function(){return __generator$2(this,function(ar){switch(ar.label){case 0:return this.length?[4,this.pop()]:[3,2];case 1:return ar.sent(),[3,0];case 2:return[2]}})},cr.prototype.iterator=function(){return this.toArray()},cr.prototype._applyLimit=function(){if(this._limit&&this._limit<this.heapArray.length)for(var ar=this.heapArray.length-this._limit;ar;)this.heapArray.pop(),--ar},cr.prototype._bottomN_push=function(ar){var dr=new cr(this.compare);dr.limit=ar,dr.heapArray=this.heapArray.slice(-ar),dr.init();for(var fr=this.heapArray.length-1-ar,hr=cr.getParentIndexOf(fr),pr=[],mr=fr;mr>hr;--mr)pr.push(mr);for(var gr=this.heapArray;pr.length;){var mr=pr.shift();this.compare(gr[mr],dr.peek())>0&&(dr.replace(gr[mr]),mr%2&&pr.push(cr.getParentIndexOf(mr)))}return dr.toArray()},cr.prototype._moveNode=function(ar,dr){var fr;fr=__read$2([this.heapArray[dr],this.heapArray[ar]],2),this.heapArray[ar]=fr[0],this.heapArray[dr]=fr[1]},cr.prototype._sortNodeDown=function(ar){for(var dr=this,fr=ar<this.heapArray.length-1,hr=this.heapArray[ar],pr=function(xr,wr){return dr.heapArray.length>wr&&dr.compare(dr.heapArray[wr],dr.heapArray[xr])<0&&(xr=wr),xr};fr;){var mr=cr.getChildrenIndexOf(ar),gr=mr.reduce(pr,mr[0]),yr=this.heapArray[gr];typeof yr<"u"&&this.compare(hr,yr)>0?(this._moveNode(ar,gr),ar=gr):fr=!1}},cr.prototype._sortNodeUp=function(ar){for(var dr=ar>0;dr;){var fr=cr.getParentIndexOf(ar);fr>=0&&this.compare(this.heapArray[fr],this.heapArray[ar])>0?(this._moveNode(ar,fr),ar=fr):dr=!1}},cr.prototype._topN_push=function(ar){var dr=new cr(this._invertedCompare);dr.limit=ar;for(var fr=[0],hr=this.heapArray;fr.length;){var pr=fr.shift();pr<hr.length&&(dr.length<ar?(dr.push(hr[pr]),fr.push.apply(fr,__spreadArray$2([],__read$2(cr.getChildrenIndexOf(pr)),!1))):this.compare(hr[pr],dr.peek())<0&&(dr.replace(hr[pr]),fr.push.apply(fr,__spreadArray$2([],__read$2(cr.getChildrenIndexOf(pr)),!1))))}return dr.toArray()},cr.prototype._topN_fill=function(ar){var dr=this.heapArray,fr=new cr(this._invertedCompare);fr.limit=ar,fr.heapArray=dr.slice(0,ar),fr.init();for(var hr=cr.getParentIndexOf(ar-1)+1,pr=[],mr=hr;mr<ar;++mr)pr.push.apply(pr,__spreadArray$2([],__read$2(cr.getChildrenIndexOf(mr).filter(function(gr){return gr<dr.length})),!1));for((ar-1)%2&&pr.push(ar);pr.length;){var mr=pr.shift();mr<dr.length&&this.compare(dr[mr],fr.peek())<0&&(fr.replace(dr[mr]),pr.push.apply(pr,__spreadArray$2([],__read$2(cr.getChildrenIndexOf(mr)),!1)))}return fr.toArray()},cr.prototype._topN_heap=function(ar){for(var dr=this.clone(),fr=[],hr=0;hr<ar;++hr)fr.push(dr.pop());return fr},cr.prototype._topIdxOf=function(ar){if(!ar.length)return-1;for(var dr=0,fr=ar[dr],hr=1;hr<ar.length;++hr){var pr=this.compare(ar[hr],fr);pr<0&&(dr=hr,fr=ar[hr])}return dr},cr.prototype._topOf=function(){for(var ar=[],dr=0;dr<arguments.length;dr++)ar[dr]=arguments[dr];var fr=new cr(this.compare);return fr.init(ar),fr.peek()},cr}();function coordEq(cr,ar){return!cr&&!ar?!0:!cr||!ar?!1:cr.x===ar.x&&cr.y===ar.y}function getVisitableNeighbor(cr,ar){const dr=[{x:cr.x,y:cr.y-1},{x:cr.x+1,y:cr.y},{x:cr.x,y:cr.y+1},{x:cr.x-1,y:cr.y}],fr=[];for(const hr of dr)ar(hr)||fr.push(hr);return fr}function aStar(cr,ar,dr,fr,hr){if(manhattan(cr,ar)>dr)return[];const mr=[],gr=new A$5,yr={x:cr.x,y:cr.y,f:0,g:0,h:0,cost:0,visited:!1,closed:!1,parent:null};gr.set(cr,yr);const xr=(br,Sr)=>br.f-Sr.f,wr=new Heap(xr);for(wr.push(yr);wr.size()>0;){const br=wr.pop();if(worldCoordEq(br,ar)){let vr=br;for(;vr&&vr.parent;)mr.push({x:vr.x,y:vr.y}),vr=vr.parent;return mr.reverse()}br.closed=!0;const Sr=getVisitableNeighbor(br,vr=>hr(coordEq(vr,ar),vr));for(let vr=0;vr<Sr.length;vr++){let Er=gr.get(Sr[vr]);if(!Er){const Cr=Sr[vr];Er={...Cr,f:0,g:0,h:0,cost:fr(Cr),visited:!1,closed:!1,parent:null},gr.set(Cr,Er)}if(Er.closed)continue;const Ar=br.g+Er.cost,_r=Er.visited;Ar<=dr&&(!_r||Ar<Er.g)&&(Er.visited=!0,Er.parent=br,Er.h=Er.h||manhattan({x:Er.x,y:Er.y},ar),Er.g=Ar,Er.f=Er.g+Er.h,_r||wr.push(Er))}}return[]}function BFS(cr,ar,dr,fr){const hr=[],pr=[],mr=new A$5,gr=[],yr={f:0,cost:1,visited:!0};for(mr.set(cr,yr),gr.push(cr);gr.length>0;){const xr=gr.shift(),wr=mr.get(xr),br=getVisitableNeighbor(xr,function(Sr){return fr(wr.f===ar-1,Sr)});for(let Sr=0;Sr<br.length;Sr++){let vr=mr.get(br[Sr]);if(!vr)vr={f:0,cost:dr(br[Sr]),visited:!1},mr.set(br[Sr],vr);else{const _r=dr(br[Sr]);vr.cost>_r&&(vr.cost=_r)}const Er=wr.f+vr.cost,Ar=vr.visited;if(Er<=ar){if(!Ar)gr.push(br[Sr]),hr.push(br[Sr]),pr.push(Er),vr.visited=!0,vr.f=Er;else if(Er<vr.f){vr.f=Er,gr.push(br[Sr]);const _r=hr.findIndex(Cr=>br[Sr].x==Cr.x&&br[Sr].y==Cr.y);pr[_r]=Er}}}}return[hr,pr]}function createDrawPotentialPathSystem(cr){const{world:ar,api:{drawTileHighlight:dr,arrowPainter:{paintArrowAlongPath:fr}},components:{HoverHighlight:hr},parentLayers:{network:{components:{OwnedBy:pr,Combat:mr,Transaction:gr},utils:{isOwnedByCurrentPlayer:yr,getOwningPlayer:xr}},local:{components:{PotentialPath:wr,LocalPosition:br}},headless:{api:{getMovementDifficulty:Sr,isUntraversable:vr},components:{NextPosition:Er,OnCooldown:Ar}}},scenes:{Main:{objectPool:_r,phaserScene:Cr}}}=cr;function kr(Br,Fr){for(let jr=0;jr<Fr.x.length;jr++)_r.remove(`${Br}-path-highlight-${jr}`)}function Rr(Br){const{entity:Fr}=Br;if(kr(Fr,{x:Array.from({length:250},()=>0),y:Array.from({length:250},()=>0)}),Br.type===k$5.Exit)return;const jr=g$7(wr,Fr);if(jr){const Ur=yr(Fr),qr=!le$3(Ar,Fr)&&Ur?"yellow":"white",Hr=Ur?1:.5,Or=g$7(br,Fr);if(!Or)return;jr.x.push(Or.x),jr.y.push(Or.y);for(let Mr=0;Mr<jr.x.length;Mr++){const Lr={x:jr.x[Mr],y:jr.y[Mr]};dr(`${Fr}-path-highlight-${Mr}`,Lr,qr,Hr)}}}_$4(ar,[Ye$3(wr),Ye$3(br)],Br=>{Rr(Br)});const Ir=(Br,Fr,jr)=>{const Ur=aStar(Br,Fr,1e5,lodashExports.curry(Sr)(br),lodashExports.curry(vr)(br,jr));return Ur.unshift(Br),fr("Move",Ur)},Nr={};function Pr(Br){Nr[Br]||(Nr[Br]={lines:Cr.add.group(),linesNext:Cr.add.group(),linesNextBlinkTween:void 0,pathLineDrawSub:void 0,pathLineDrawSubNext:void 0})}_$4(ar,[Ye$3(wr),Ye$3(br)],({entity:Br,type:Fr})=>{Pr(Br);const jr=Nr[Br];if(jr.pathLineDrawSub?.unsubscribe(),Nr[Br].pathLineDrawSub=void 0,jr.lines?.clear(!0),!yr(Br)||Fr===k$5.Exit)return;const Ur=xr(Br);if(!Ur)return;const qr=g$7(wr,Br);qr&&(Nr[Br].lines=Cr.add.group(),Nr[Br].pathLineDrawSub=hr.update$.subscribe(Hr=>{if(!yr(Br)||le$3(Ar,Br))return;Nr[Br].lines?.clear(!0);const Or=de$2(br,Br),Mr=g$7(hr,Hr.entity);if(!Mr)return;const Lr={x:Mr.x,y:Mr.y},Jr=lodashExports.compact(lodashExports.zip(qr.x,qr.y).map(([ns,Qr])=>ns===void 0||Qr===void 0?null:{x:ns,y:Qr})).find(({x:ns,y:Qr})=>ns===Mr.x&&Qr===Mr.y),es=[...A$6([Je$2(br,Lr),Ye$3(mr),Ke$1(pr,{value:decodeMatchEntity(Ur).entity})])];Jr&&es.length===0&&(jr.lines=Ir(Or,Lr,Ur))}))}),_$4(ar,[Ye$3(br),Ye$3(Er)],({entity:Br,type:Fr})=>{Pr(Br);const jr=Nr[Br];jr.pathLineDrawSubNext?.unsubscribe(),Nr[Br].pathLineDrawSubNext=void 0,jr.linesNext?.clear(!0),jr.linesNextBlinkTween?.destroy();const Ur=xr(Br);if(!Ur||Fr===k$5.Exit)return;Nr[Br].linesNext=Cr.add.group();const qr=de$2(br,Br),Hr=de$2(Er,Br);jr.linesNext=Ir(qr,Hr,Ur)});const Tr={};gr.update$.subscribe(Br=>{const[Fr]=Br.value;if(!Fr)return;const{entity:jr}=Fr;if(jr){if(["submitted","pending"].includes(Fr.status)){const Ur=Nr[jr]?.linesNext;if(Ur&&!Tr[jr]){const qr=Cr.add.tween({targets:Ur.getChildren(),ease:"Linear",duration:250,repeat:-1,alpha:0,yoyo:!0});Tr[jr]=qr}}["reverted","completed"].includes(Fr.status)&&Tr[jr]&&(Tr[jr].destroy(),delete Tr[jr])}})}function createDrawNextPositionSystem(cr){const{world:ar,components:{SpriteAnimation:dr},parentLayers:{headless:{components:{NextPosition:fr}},local:{api:{getOwnerColor:hr,systemDecoders:{onCombat:pr}},components:{LocalPosition:mr,Path:gr}},network:{components:{Transaction:yr,UnitType:xr}}},scenes:{Main:{objectPool:wr,phaserScene:br,maps:{Main:{tileWidth:Sr,tileHeight:vr}}}},api:{playTintedAnimation:Er,arrowPainter:{paintArrowAlongPath:Ar},drawSpriteAtTile:_r,depthFromPosition:Cr}}=cr,kr=new Map,Rr={};function Ir(Nr){const{entity:Pr,type:Tr}=Nr,Br=kr.get(Pr);kr.delete(Pr),Br?.destroy(!0);const Fr=`${Pr}-nextPosition`,jr=`${Pr}-attack`;if(wr.remove(Fr),wr.remove(jr),Tr===k$5.Exit)return;const Ur=de$2(fr,Pr),qr=g$7(dr,Pr);if(!qr)return;const Hr=g$7(mr,Pr);if(!Hr||!worldCoordEq(Hr,Ur)){const Or=hr(Pr);Er(Fr,qr.value,Or.name,Mr=>{const Lr=B$4(Ur,Sr,vr);Mr.setPosition(Lr.x,Lr.y-UNIT_OFFSET),Mr.setDepth(Cr({x:Ur.x,y:Ur.y},RenderDepth.Foreground3)),Mr.setAlpha(.65),g$7(xr,Pr)?.value===UnitTypes.Brute&&Mr.setOrigin(.18,.18)})}if(Ur.intendedTarget){const Or=g$7(mr,Ur.intendedTarget);if(!Or)return;const Mr=aStar(Ur,Or,1e5,Vr=>0,()=>!1);Mr.unshift(Ur);const Lr=Ar("Attack",Mr);Lr&&(kr.set(Pr,Lr),Rr[Pr]&&(Rr[Pr].destroy(),Rr[Pr]=br.add.tween({targets:Lr.getChildren(),ease:"Linear",duration:250,repeat:-1,alpha:0,yoyo:!0})))}}_$4(ar,[Ye$3(fr)],Nr=>{Ir(Nr)}),yr.update$.subscribe(Nr=>{const[Pr]=Nr.value;if(!Pr)return;const{entity:Tr}=Pr;if(Tr){if(["submitted","pending"].includes(Pr.status)){const Br=g$7(fr,Tr);if(Br&&Br.intendedTarget){const jr=g$7(mr,Br.intendedTarget);if(jr){const Ur=`${Tr}-attack`,qr=_r(Ur,Sprites.Sword,jr,RenderDepth.UI2,{yOffset:-1*UNIT_OFFSET});br.add.tween({targets:qr,ease:"Linear",duration:250,repeat:-1,alpha:0,yoyo:!0})}}const Fr=kr.get(Tr);if(Fr&&!Rr[Tr]){const jr=br.add.tween({targets:Fr.getChildren(),ease:"Linear",duration:250,repeat:-1,alpha:0,yoyo:!0});Rr[Tr]=jr}}if(["reverted","completed"].includes(Pr.status)&&Rr[Tr]){Rr[Tr].destroy(),delete Rr[Tr];const Br=kr.get(Tr);if(Br)for(const Fr of Br.getChildren())Fr.setAlpha(1)}}}),yt$2(ar,[Ye$3(gr)],({entity:Nr})=>{ue$2(fr,Nr)}),pr(Nr=>{ue$2(fr,Nr.attacker)})}function createPlayerSpawnSystem(cr){const{world:ar,parentLayers:{network:{components:{SpawnPoint:dr,OwnedBy:fr,MatchFinished:hr,Match:pr},utils:{getPlayerEntity:mr},network:{matchEntity:gr}},local:{components:{MatchStarted:yr},api:{resetSelection:xr}}},api:{selectAndView:wr}}=cr;at$2(ar,[Ye$3(yr)],()=>{const{externalWalletClient:br}=useStore.getState();if(!br||!br.account)return;const{address:Sr}=br.account,vr=[...A$6([Ye$3(dr),Je$2(fr,{value:decodeMatchEntity(mr(addressToEntityID(Sr))).entity})])][0];vr&&wr(vr)}),gr&&at$2(ar,[Ye$3(hr),Je$2(pr,{matchEntity:gr})],()=>{xr()})}function drawPlayerColorBanner(cr,ar,dr,fr){const{parentLayers:{local:{components:{LocalPosition:hr},api:{getOwnerColor:pr}}},api:{playTintedAnimation:mr,depthFromPosition:gr},scenes:{Main:{objectPool:yr,maps:{Main:{tileWidth:xr,tileHeight:wr}}}}}=cr,br=`${ar}-player-color-banner`;if(dr===k$5.Exit){yr.remove(br);return}const Sr=pr(ar),vr=de$2(hr,ar);mr(br,Animations.Banner,Sr.name),yr.get(br,"Sprite").setComponent({id:"player-color-banner",once:Ar=>{const _r=B$4(vr,xr,wr);Ar.setPosition(_r.x+4,_r.y+fr),Ar.setDepth(gr(vr,RenderDepth.UI5))}})}function drawGoldBar(cr,ar,dr,fr){const{parentLayers:{local:{components:{LocalPosition:hr}},network:{components:{ChargeCap:pr}}},scenes:{Main:{objectPool:mr,config:gr,maps:{Main:{tileWidth:yr,tileHeight:xr}}}},api:{depthFromPosition:wr}}=cr,{entity:br,type:Sr}=ar;if(Sr===k$5.Exit){mr.remove(`${br}-gold-bar`);return}const vr=de$2(hr,br),{totalCharged:Er,cap:Ar}=de$2(pr,br);if(Er>=Ar){mr.remove(`${br}-gold-bar`);return}let _r=1-Er/Ar;Er===0&&(_r=1);const Cr=B$4(vr,yr,xr),kr=gr.sprites[Sprites.GoldBar];mr.get(`${br}-gold-bar`,"Sprite").setComponent({id:`${br}-gold-bar`,once:Ir=>{Ir.setTexture(kr.assetKey,kr.frame),Ir.setPosition(Cr.x+dr,Cr.y+fr+2),Ir.setDepth(wr(vr,RenderDepth.UI5+6)),Ir.setScale(_r,1)}})}function drawHealthBar(cr,ar,dr,fr){const{components:{IncomingDamage:hr},parentLayers:{network:{components:{Combat:pr}},local:{components:{LocalPosition:mr,LocalHealth:gr}},headless:{components:{NextPosition:yr}}},scenes:{Main:{objectPool:xr,config:wr,phaserScene:br,maps:{Main:{tileWidth:Sr,tileHeight:vr}}}},api:{depthFromPosition:Er}}=cr,{entity:Ar,type:_r}=ar;if(_r===k$5.Exit)xr.remove(`${Ar}-health`),xr.remove(`${Ar}-health-bar`),xr.remove(`${Ar}-health-loss`);else if([k$5.Enter,k$5.Update].includes(_r)){let Cr=de$2(mr,Ar);le$3(yr,Ar)&&(Cr=de$2(yr,Ar));const kr=de$2(pr,Ar).maxHealth,Rr=de$2(gr,Ar).value,Ir=Rr/kr,Nr=wr.sprites[Sprites.BarBackground],Pr=wr.sprites[Sprites.HealthBar],Tr=B$4(Cr,Sr,vr);if(xr.get(`${Ar}-health`,"Sprite").setComponent({id:"health-bar",once:jr=>{jr.setScale(Ir,1),jr.setTexture(Pr.assetKey,Pr.frame),jr.setPosition(Tr.x+dr,Tr.y+fr),jr.setDepth(Er(Cr,RenderDepth.UI5+6))}}),xr.get(`${Ar}-health-bar`,"Sprite").setComponent({id:"health-bar-frame",once:jr=>{jr.setTexture(Nr.assetKey,Nr.frame),jr.setPosition(Tr.x+dr,Tr.y+fr),jr.setDepth(Er(Cr,RenderDepth.UI5+4))}}),X$4(ar,hr)){const{value:jr}=ar,[Ur,qr]=jr,Hr=Ur?.value??0;if(Hr===qr?.value)return;if(Hr===0)return xr.remove(`${Ar}-health-loss`);const Or=Math.min(Hr,Rr)/kr,Mr=wr.sprites[Sprites.HealthBarRed],Lr=Tr.x+dr+(1-Or)*19-(1-Ir)*19;xr.get(`${Ar}-health-loss`,"Sprite").setComponent({id:`${Ar}-health-loss`,once:Jr=>{Jr.setTexture(Mr.assetKey,Mr.frame),Jr.setPosition(Lr,Tr.y+fr),Jr.setDepth(Er(Cr,RenderDepth.UI5+8)),Jr.setScale(Or,1),br.tweens.add({targets:Jr,alpha:.5,duration:500,ease:Phaser.Math.Easing.Quadratic.InOut,repeat:-1,yoyo:!0})}})}if(X$4(ar,gr)){const{value:jr}=ar,[Ur,qr]=jr.map(Hr=>Hr?.value??0);if(Ur<qr){xr.remove(`${Ar}-health-loss`);const Or=qr/kr-Ir,Mr=Tr.x+dr+Ir*19,Lr=wr.sprites[Sprites.HealthBarRed];xr.get(`${Ar}-red-bar`,"Sprite").setComponent({id:"red-bar",once:Jr=>{Jr.setTexture(Lr.assetKey,Lr.frame),Jr.setPosition(Mr,Tr.y+fr),Jr.setDepth(Er(Cr,RenderDepth.UI5+5)),Jr.setAlpha(.6),Jr.setScale(Or,1),br.tweens.add({targets:Jr,scaleX:0,duration:800,ease:Phaser.Math.Easing.Quadratic.Out,onComplete:()=>{xr.remove(`${Ar}-red-bar`)}})}})}}}}function createDrawEntityHeader(cr){const{world:ar,components:{HeaderHeight:dr,IncomingDamage:fr},parentLayers:{network:{components:{Tier:hr,StructureType:pr,Combat:mr,ChargeCap:gr,OwnedBy:yr}},local:{components:{LocalPosition:xr,LocalHealth:wr,Path:br}},headless:{components:{InCurrentMatch:Sr,NextPosition:vr}}}}=cr;_$4(ar,[Ye$3(hr),Ye$3(Sr)],({entity:Er})=>{const _r=3-de$2(hr,Er).value*2-UNIT_OFFSET;E$5(dr,Er,{value:_r})}),_$4(ar,[Ye$3(pr),Ye$3(Sr)],({entity:Er})=>{const Ar=de$2(pr,Er).value;let _r=0;[StructureTypes.SpawnSettlement].includes(Ar)?_r=-15:[StructureTypes.Settlement].includes(Ar)?_r=-13:_r=-3,E$5(dr,Er,{value:_r})}),_$4(ar,[Ye$3(xr),Ge$2(yr),Je$2(pr,{value:StructureTypes.GoldMine}),Ye$3(dr)],({entity:Er,type:Ar})=>{const _r=de$2(dr,Er).value;drawPlayerColorBanner(cr,Er,Ar,_r)}),_$4(ar,[Ye$3(xr),Ye$3(yr),Je$2(pr,{value:StructureTypes.GoldMine}),Ye$3(dr)],({entity:Er,type:Ar})=>{const _r=de$2(dr,Er).value;drawPlayerColorBanner(cr,Er,Ar,_r)}),_$4(ar,[Ye$3(xr),Ye$3(wr),Ye$3(mr),Ye$3(dr),Ye$3(fr),Ke$1(pr,{value:StructureTypes.GoldMine}),Ge$2(br),Ge$2(vr)],Er=>{const Ar=de$2(dr,Er.entity).value;drawHealthBar(cr,Er,7,Ar)}),_$4(ar,[Ye$3(xr),Ye$3(wr),Ye$3(mr),Ye$3(dr),Ye$3(fr),Ye$3(vr),Ke$1(pr,{value:StructureTypes.GoldMine})],Er=>{const Ar=de$2(dr,Er.entity).value;drawHealthBar(cr,Er,7,Ar)}),_$4(ar,[Ye$3(xr),Ye$3(wr),Ye$3(mr),Ye$3(dr),Ye$3(fr),Je$2(pr,{value:StructureTypes.GoldMine})],Er=>{const Ar=de$2(dr,Er.entity).value;drawHealthBar(cr,Er,11,Ar)}),_$4(ar,[Ye$3(xr),Ye$3(dr),Ye$3(gr),Ke$1(pr,{value:StructureTypes.GoldMine})],Er=>{const Ar=de$2(dr,Er.entity).value;drawGoldBar(cr,Er,7,Ar+3)}),_$4(ar,[Ye$3(xr),Ye$3(dr),Ye$3(gr),Je$2(pr,{value:StructureTypes.GoldMine})],Er=>{const Ar=de$2(dr,Er.entity).value;drawGoldBar(cr,Er,11,Ar+3)})}function calculateDamageAttacker(cr,ar,dr){const{components:{Combat:fr,ArmorModifier:hr,Position:pr}}=cr,mr=g$7(fr,ar);if(!mr)return 0;const gr=getArchetypeMatchupModifier(cr,ar,dr),yr=getModiferAtPosition(cr,hr,g$7(pr,dr)||{x:0,y:0});return mr.strength*((100+gr+yr)/100)}function calculateDamageDefender(cr,ar,dr,fr){const{components:{Combat:hr,ArmorModifier:pr,Position:mr}}=cr,gr=g$7(hr,dr);if(!gr)return 0;const yr=getArchetypeMatchupModifier(cr,dr,ar),xr=getModiferAtPosition(cr,pr,fr||g$7(mr,ar)||{x:0,y:0}),wr=gr.strength*((100+yr+xr)/100),br=(100+gr.counterStrength)/100;return wr*br}function getArchetypeMatchupModifier(cr,ar,dr){const{components:{CombatArchetype:fr,ArchetypeModifier:hr}}=cr,pr=g$7(fr,ar)?.value,mr=g$7(fr,dr)?.value;if(!pr||!mr)return 0;const gr=w$9({attacker:"uint8",defender:"uint8"},{attacker:pr,defender:mr});return g$7(hr,gr)?.mod??0}function calculateCombatResult(cr,ar,dr,fr){const hr=calculateDamageAttacker(cr,ar,dr),mr=(g$7(cr.components.Range,ar)?.max??0)>1||isPassive(cr,dr)?0:calculateDamageDefender(cr,ar,dr,fr);return{attackerDamage:Math.min(Math.round(hr/1e3),100),defenderDamage:Math.min(Math.round(mr/1e3),100)}}function getModiferAtPosition(cr,ar,dr){const{components:{Position:fr,TerrainType:hr}}=cr,pr=[...A$6([Je$2(fr,dr),Ye$3(hr),Ye$3(ar)])][0],mr=g$7(ar,pr);return mr?mr.value:0}function isNeutralStructure(cr,ar){const{components:{StructureType:dr,OwnedBy:fr}}=cr;return le$3(dr,ar)&&(!le$3(fr,ar)||BigNumber.from(g$7(fr,ar)?.value)===BigNumber.from(0))}function isPassive(cr,ar){const{components:{Combat:dr}}=cr;return g$7(dr,ar)?.counterStrength===-100||isNeutralStructure(cr,ar)}function canRetaliate(cr,ar){return!isPassive(cr,ar)&&!isNeutralStructure(cr,ar)}function createDrawAttackableEntitiesSystem(cr){const{parentLayers:{network:ar,network:{world:dr,components:{UnitType:fr}},headless:{components:{NextPosition:hr}},local:{components:{AttackableEntities:pr,LocalPosition:mr}}},scenes:{Main:{objectPool:gr}},api:{drawSpriteAtTile:yr,drawTileHighlight:xr}}=cr;function wr(Sr,vr,Er=!1){const Ar=`${vr}-attackable-highlight`,_r=`${vr}-attackable-outline`,Cr=g$7(mr,vr);if(!Cr)return;let kr=Sprites.Sword;if(Er){const Rr=getArchetypeMatchupModifier(ar,Sr,vr);Rr>0?kr=Sprites.SwordUp:Rr<0&&(kr=Sprites.SwordDown)}yr(Ar,kr,Cr,RenderDepth.UI2,{yOffset:le$3(fr,vr)?-1*UNIT_OFFSET:0}),xr(_r,Cr,"red")}function br(Sr){const vr=Sr.entity;if(gr.remove(`${vr}-attackable-destination`),X$4(Sr,pr)){const[,_r]=Sr.value;if(_r)for(let Cr=0;Cr<_r.value.length;Cr++)gr.remove(`${_r.value[Cr]}-attackable-highlight`),gr.remove(`${_r.value[Cr]}-attackable-outline`)}const Er=g$7(pr,vr)?.value;if(!Er)return;const Ar=g$7(hr,vr);if(Ar&&Ar.userCommittedToPosition){const _r=`${vr}-attackable-destination`;yr(_r,Sprites.BootConfirm,Ar,RenderDepth.UI1)}if(Ar&&Ar.intendedTarget){Er.forEach(Cr=>{Cr!==Ar.intendedTarget&&gr.remove(`${Cr}-attackable-highlight`)});const _r=Ar.intendedTarget;wr(vr,_r,!0)}else for(let _r=0;_r<Er.length;_r++){const Cr=Er[_r];wr(vr,Cr)}}_$4(dr,[Ye$3(pr),Ye$3(hr)],Sr=>{br(Sr)}),_$4(dr,[Ye$3(pr),Ge$2(hr)],Sr=>{br(Sr)})}function defineAppearanceComponent(cr){return ie$4(cr,{value:P$1.Number},{id:"Appearance"})}function defineHueTintComponent(cr){return ie$4(cr,{value:P$1.String},{id:"HueTint"})}function defineOutlineComponent(cr){return ie$4(cr,{color:P$1.OptionalNumber},{id:"Outline"})}function defineSpriteAnimationComponent(cr){return ie$4(cr,{value:P$1.String},{id:"SpriteAnimation"})}function createPhaserComponents(cr){const ar=defineAppearanceComponent(cr),dr=defineSpriteAnimationComponent(cr),fr=defineOutlineComponent(cr),hr=defineHueTintComponent(cr),pr=ie$4(cr,{x:P$1.Number,y:P$1.Number},{id:"HoverHighlight"}),mr=ie$4(cr,{x:P$1.Number,y:P$1.Number},{id:"PreviousHoverHighlight"}),gr=ie$4(cr,{icon:P$1.String},{id:"HoverIcon"}),yr=ie$4(cr,{icon:P$1.Number},{id:"Alpha"}),xr=ie$4(cr,{top:P$1.Number,right:P$1.Number,bottom:P$1.Number,left:P$1.Number}),wr=ie$4(cr,{value:P$1.Number},{id:"HeaderHeight"}),br=ie$4(cr,{value:P$1.Number},{id:"IncomingDamage"}),Sr=ie$4(cr,{value:P$1.OptionalNumber},{id:"DevHighlight"}),vr=ie$4(cr,{value:P$1.Number},{id:"TerrainArmorBonus"}),Er=ie$4(cr,{value:P$1.Boolean},{id:"WillBeDestroyed"});return{Appearance:ar,SpriteAnimation:dr,Outline:fr,HueTint:hr,DevHighlight:Sr,HoverHighlight:pr,PreviousHoverHighlight:mr,HoverIcon:gr,Alpha:yr,MapBounds:xr,HeaderHeight:wr,IncomingDamage:br,TerrainArmorBonus:vr,WillBeDestroyed:Er}}const overworldTileset="/assets/overworld-88d026ea.png",PLAYER_COLORS={"0xffffff":"white","0x3cb44b":"green","0x4363d8":"blue","0xffe119":"yellow","0xe6194b":"red","0x911eb4":"purple","0xf58231":"orange","0xaaffc3":"cyan","0x9a6324":"brown","0x808000":"olive","0x008080":"teal","0xf032e6":"magenta","0xbcf60c":"lime","0xfabebe":"pink","0x46f0f0":"lightblue","0x800000":"maroon","0xe6beff":"lavender","0xfffac8":"beige","0x000075":"navy","0xffd8b1":"tan","0x808080":"gray","0x000000":"black"};function createWalkAnimations(){const cr=[];for(const ar in UnitTypes){const dr=Number(ar);if(!WALK_ANIMATIONS[dr])continue;const fr=lodashExports.toLower(UnitTypes[dr]),hr=WALK_ANIMATIONS[dr],pr=["up","down","left","right"];hr.forEach((mr,gr)=>{cr.push({key:mr,assetKey:Assets.MainAtlas,startFrame:0,endFrame:[UnitTypes.Archer,UnitTypes.Catapult,UnitTypes.Wizard].includes(dr)?2:3,frameRate:6,repeat:-1,prefix:`sprites/greyscale/units/${fr}/walk/${pr[gr]}/`,suffix:".png"})})}return cr}const baseAnimations=[{key:Animations.Gold,assetKey:Assets.MainAtlas,startFrame:0,endFrame:0,frameRate:0,repeat:0,prefix:"sprites/icons/gold/",suffix:".png"},{key:Animations.Banner,assetKey:Assets.MainAtlas,startFrame:0,endFrame:0,frameRate:0,repeat:0,prefix:"sprites/greyscale/ui/banner/",suffix:".png"},{key:Animations.TileHighlightRed,assetKey:Assets.MainAtlas,startFrame:0,endFrame:2,frameRate:3,repeat:-1,prefix:"sprites/tile_ui/red/highlight/",suffix:".png"},{key:Animations.TileHighlightYellow,assetKey:Assets.MainAtlas,startFrame:0,endFrame:2,frameRate:3,repeat:-1,prefix:"sprites/tile_ui/yellow/highlight/",suffix:".png"},{key:Animations.TileOutlineRed,assetKey:Assets.MainAtlas,startFrame:0,endFrame:0,frameRate:3,repeat:-1,prefix:"sprites/tile_ui/red/outline/",suffix:".png"},{key:Animations.TileOutlineYellow,assetKey:Assets.MainAtlas,startFrame:0,endFrame:0,frameRate:3,repeat:-1,prefix:"sprites/tile_ui/yellow/outline/",suffix:".png"},{key:Animations.TileOutlineWhite,assetKey:Assets.MainAtlas,startFrame:0,endFrame:0,frameRate:3,repeat:-1,prefix:"sprites/tile_ui/white/outline/",suffix:".png"},{key:Animations.TileSelect,assetKey:Assets.MainAtlas,startFrame:0,endFrame:0,frameRate:3,repeat:-1,prefix:"sprites/greyscale/ui/tile-select/",suffix:".png"},{key:Animations.GoldMine,assetKey:Assets.MainAtlas,startFrame:0,endFrame:9,frameRate:6,repeat:-1,prefix:"sprites/greyscale/structures/big/generators/metal/",suffix:".png"},{key:Animations.SpawnSettlement,assetKey:Assets.MainAtlas,startFrame:0,endFrame:11,frameRate:6,repeat:-1,prefix:"sprites/greyscale/structures/big/home-settlement-2/",suffix:".png"},{key:Animations.Settlement,assetKey:Assets.MainAtlas,startFrame:0,endFrame:4,frameRate:6,repeat:-1,prefix:"sprites/greyscale/structures/big/forward-settlement/",suffix:".png"},{key:Animations.SwordsmanIdle,assetKey:Assets.MainAtlas,startFrame:0,endFrame:3,frameRate:6,repeat:-1,prefix:"sprites/greyscale/units/swordsman/idle/",suffix:".png"},{key:Animations.SwordsmanAttack,assetKey:Assets.MainAtlas,startFrame:0,endFrame:5,frameRate:6,repeat:0,prefix:"sprites/greyscale/units/swordsman/attack/",suffix:".png"},{key:Animations.SwordsmanDeath,assetKey:Assets.MainAtlas,startFrame:0,endFrame:5,frameRate:6,repeat:0,prefix:"sprites/greyscale/units/swordsman/death/",suffix:".png"},{key:Animations.PikemanIdle,assetKey:Assets.MainAtlas,startFrame:0,endFrame:3,frameRate:4,repeat:-1,prefix:"sprites/greyscale/units/pikeman/idle/",suffix:".png"},{key:Animations.PikemanAttack,assetKey:Assets.MainAtlas,startFrame:0,endFrame:5,frameRate:6,repeat:0,prefix:"sprites/greyscale/units/pikeman/attack/",suffix:".png"},{key:Animations.PikemanDeath,assetKey:Assets.MainAtlas,startFrame:0,endFrame:11,frameRate:4,repeat:0,prefix:"sprites/greyscale/units/pikeman/death/",suffix:".png"},{key:Animations.GolemIdle,assetKey:Assets.MainAtlas,startFrame:0,endFrame:3,frameRate:4,repeat:-1,prefix:"sprites/greyscale/units/golem/idle/",suffix:".png"},{key:Animations.GolemAttack,assetKey:Assets.MainAtlas,startFrame:0,endFrame:5,frameRate:6,repeat:0,prefix:"sprites/greyscale/units/golem/attack/",suffix:".png"},{key:Animations.GolemDeath,assetKey:Assets.MainAtlas,startFrame:0,endFrame:11,frameRate:4,repeat:0,prefix:"sprites/greyscale/units/golem/death/",suffix:".png"},{key:Animations.ArcherIdle,assetKey:Assets.MainAtlas,startFrame:0,endFrame:3,frameRate:4,repeat:-1,prefix:"sprites/greyscale/units/archer/idle/",suffix:".png"},{key:Animations.ArcherAttack,assetKey:Assets.MainAtlas,startFrame:0,endFrame:5,frameRate:6,repeat:0,prefix:"sprites/greyscale/units/archer/attack/",suffix:".png"},{key:Animations.ArcherDeath,assetKey:Assets.MainAtlas,startFrame:0,endFrame:5,frameRate:4,repeat:0,prefix:"sprites/greyscale/units/archer/death/",suffix:".png"},{key:Animations.CatapultIdle,assetKey:Assets.MainAtlas,startFrame:0,endFrame:3,frameRate:4,repeat:-1,prefix:"sprites/greyscale/units/catapult/idle/",suffix:".png"},{key:Animations.CatapultAttack,assetKey:Assets.MainAtlas,startFrame:0,endFrame:3,frameRate:4,repeat:0,prefix:"sprites/greyscale/units/catapult/attack/",suffix:".png"},{key:Animations.CatapultDeath,assetKey:Assets.MainAtlas,startFrame:0,endFrame:2,frameRate:4,repeat:0,prefix:"sprites/greyscale/units/catapult/death/",suffix:".png"},{key:Animations.WizardIdle,assetKey:Assets.MainAtlas,startFrame:0,endFrame:3,frameRate:4,repeat:-1,prefix:"sprites/greyscale/units/wizard/idle/",suffix:".png"},{key:Animations.WizardAttack,assetKey:Assets.MainAtlas,startFrame:0,endFrame:5,frameRate:6,repeat:0,prefix:"sprites/greyscale/units/wizard/attack/",suffix:".png"},{key:Animations.WizardDeath,assetKey:Assets.MainAtlas,startFrame:0,endFrame:11,frameRate:4,repeat:0,prefix:"sprites/greyscale/units/wizard/death/",suffix:".png"},{key:Animations.RiderIdle,assetKey:Assets.MainAtlas,startFrame:0,endFrame:3,frameRate:4,repeat:-1,prefix:"sprites/greyscale/units/rider/idle/",suffix:".png"},{key:Animations.RiderAttack,assetKey:Assets.MainAtlas,startFrame:0,endFrame:5,frameRate:6,repeat:0,prefix:"sprites/greyscale/units/rider/attack/",suffix:".png"},{key:Animations.RiderDeath,assetKey:Assets.MainAtlas,startFrame:0,endFrame:7,frameRate:4,repeat:0,prefix:"sprites/greyscale/units/rider/death/",suffix:".png"},{key:Animations.KnightIdle,assetKey:Assets.MainAtlas,startFrame:0,endFrame:3,frameRate:4,repeat:-1,prefix:"sprites/greyscale/units/knight/idle/",suffix:".png"},{key:Animations.KnightAttack,assetKey:Assets.MainAtlas,startFrame:0,endFrame:5,frameRate:6,repeat:0,prefix:"sprites/greyscale/units/knight/attack/",suffix:".png"},{key:Animations.KnightDeath,assetKey:Assets.MainAtlas,startFrame:0,endFrame:8,frameRate:4,repeat:0,prefix:"sprites/greyscale/units/knight/death/",suffix:".png"},{key:Animations.DragonIdle,assetKey:Assets.MainAtlas,startFrame:0,endFrame:3,frameRate:4,repeat:-1,prefix:"sprites/greyscale/units/dragon/idle/",suffix:".png"},{key:Animations.DragonAttack,assetKey:Assets.MainAtlas,startFrame:0,endFrame:5,frameRate:6,repeat:0,prefix:"sprites/greyscale/units/dragon/attack/",suffix:".png"},{key:Animations.DragonDeath,assetKey:Assets.MainAtlas,startFrame:0,endFrame:11,frameRate:4,repeat:0,prefix:"sprites/greyscale/units/dragon/death/",suffix:".png"},{key:Animations.BruteIdle,assetKey:Assets.MainAtlas,startFrame:0,endFrame:3,frameRate:4,repeat:-1,prefix:"sprites/greyscale/units/brute/idle/",suffix:".png"},{key:Animations.BruteAttack,assetKey:Assets.MainAtlas,startFrame:0,endFrame:5,frameRate:6,repeat:0,prefix:"sprites/greyscale/units/brute/attack/",suffix:".png"},{key:Animations.BruteDeath,assetKey:Assets.MainAtlas,startFrame:0,endFrame:7,frameRate:5,repeat:0,prefix:"sprites/greyscale/units/brute/death/",suffix:".png"},{key:Animations.GoldMine,assetKey:Assets.MainAtlas,startFrame:0,endFrame:9,frameRate:4,repeat:-1,prefix:"sprites/greyscale/structures/big/generators/metal/",suffix:".png"},{key:Animations.Capture,assetKey:Assets.MainAtlas,startFrame:0,endFrame:28,frameRate:6,repeat:0,prefix:"sprites/greyscale/animations/capture/",suffix:".png"},{key:Animations.LongGrass,assetKey:Assets.MainAtlas,startFrame:0,endFrame:7,frameRate:6,repeat:-1,prefix:"sprites/terrain/grass/",suffix:".png"},...createWalkAnimations()];baseAnimations.forEach(cr=>{if(!cr.prefix.includes("sprites/greyscale"))return;Object.values(PLAYER_COLORS).slice(1,5).forEach(dr=>{const fr={...cr};fr.key=`${cr.key}-${dr}`,fr.prefix=`sprites/tinted_images/${dr}/${cr.prefix.replace("sprites/greyscale/","")}`,baseAnimations.push(fr)})});const getAnimations=()=>baseAnimations,baseSprites={[Sprites.Boot]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/ui/icons/boot.png"},[Sprites.BootConfirm]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/ui/icons/boot-check.png"},[Sprites.Sword]:{assetKey:Assets.MainAtlas,frame:"sprites/combat/sword.png"},[Sprites.SwordConfirm]:{assetKey:Assets.MainAtlas,frame:"sprites/combat/sword-confirm.png"},[Sprites.SwordUp]:{assetKey:Assets.MainAtlas,frame:"sprites/combat/sword-up.png"},[Sprites.SwordDown]:{assetKey:Assets.MainAtlas,frame:"sprites/combat/sword-down.png"},[Sprites.Skull]:{assetKey:Assets.MainAtlas,frame:"sprites/combat/skull.png"},[Sprites.Shadow]:{assetKey:Assets.MainAtlas,frame:"sprites/base/shadow-round.png"},[Sprites.Settlement]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/structures/big/forward-settlement/0.png"},[Sprites.SpawnSettlement]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/structures/big/home-settlement/0.png"},[Sprites.SummoningAltar]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/structures/big/magic-portal/0.png"},[Sprites.WoodenWall]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/structures/big/wooden-barricade/0.png"},[Sprites.SelectUI]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/ui/icons/big-select.png"},[Sprites.Chain]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/ui/icons/chain.png"},[Sprites.Cog]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/ui/icons/cog.png"},[Sprites.Crystal]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/structures/big/power-crystal/0.png"},[Sprites.BarBackground]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/ui/bars/background.png"},[Sprites.HealthBar]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/ui/bars/green.png"},[Sprites.HealthBarRed]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/ui/bars/red.png"},[Sprites.GoldBar]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/ui/bars/yellow.png"},[Sprites.Banner]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/ui/banner/0.png"},[Sprites.Swordsman]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/units/swordsman/idle/0.png"},[Sprites.Pikeman]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/units/pikeman/idle/0.png"},[Sprites.Golem]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/units/golem/idle/0.png"},[Sprites.Archer]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/units/archer/idle/0.png"},[Sprites.Catapult]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/units/catapult/idle/0.png"},[Sprites.Wizard]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/units/wizard/idle/0.png"},[Sprites.Brute]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/units/brute/idle/0.png"},[Sprites.Rider]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/units/rider/idle/0.png"},[Sprites.Knight]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/units/knight/idle/0.png"},[Sprites.Dragon]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/units/dragon/idle/0.png"},[Sprites.GoldMine]:{assetKey:Assets.MainAtlas,frame:"sprites/greyscale/structures/big/generators/metal/0.png"},[Sprites.Gold]:{assetKey:Assets.MainAtlas,frame:"sprites/icons/gold/0.png"},[Sprites.Armor]:{assetKey:Assets.MainAtlas,frame:"sprites/icons/armor/blue.png"},[Sprites.NoArmor]:{assetKey:Assets.MainAtlas,frame:"sprites/icons/armor/white.png"},[Sprites.GrassPreview]:{assetKey:Assets.MainAtlas,frame:"sprites/terrain_preview/grass.png"},[Sprites.MountainPreview]:{assetKey:Assets.MainAtlas,frame:"sprites/terrain_preview/mountain.png"},[Sprites.ForestPreview]:{assetKey:Assets.MainAtlas,frame:"sprites/terrain_preview/forest.png"}},getSprites=()=>{Object.entries(baseSprites).forEach(([ar,dr])=>{if(!dr.frame.includes("sprites/greyscale"))return;Object.values(PLAYER_COLORS).slice(0,5).forEach(hr=>{const pr={...dr};pr.frame=`sprites/tinted_images/${hr}/${pr.frame.replace("sprites/greyscale/","")}`,baseSprites[`${ar}-${hr}`]=pr})});const cr=["0-end","0-start","02","04","06","2-end","2-start","24","26","4-end","4-start","46","6-end","6-start"];for(const ar of cr)baseSprites[`ArrowAttack-${ar}`]={assetKey:Assets.MainAtlas,frame:`sprites/arrows/attack/${ar}.png`},baseSprites[`ArrowMove-${ar}`]={assetKey:Assets.MainAtlas,frame:`sprites/arrows/move/${ar}.png`};return baseSprites},ANIMATION_INTERVAL=200,MAX_CAMERA_ZOOM=3,MIN_CAMERA_ZOOM=1,gameConfig={sceneConfig:{[Scenes.Main]:{assets:{[Assets.OverworldTileset]:{type:ce$3.Image,key:Assets.OverworldTileset,path:overworldTileset},[Assets.MainAtlas]:{type:ce$3.MultiAtlas,key:Assets.MainAtlas,path:`/public/atlases/sprites/atlas.json?timestamp=${Date.now()}`,options:{imagePath:"/public/atlases/sprites/"}},[Assets.Background]:{type:ce$3.Image,key:Assets.Background,path:"/public/assets/background.png"},[Assets.CloudBackground]:{type:ce$3.Image,key:Assets.CloudBackground,path:"/public/assets/cloud-background.png"},[Assets.Cloud1]:{type:ce$3.Image,key:Assets.Cloud1,path:"/public/assets/cloud-1.png"},[Assets.Cloud2]:{type:ce$3.Image,key:Assets.Cloud2,path:"/public/assets/cloud-2.png"},[Assets.TiledBackground]:{type:ce$3.Image,key:Assets.TiledBackground,path:"/public/assets/tiled-background-4.png"},[Assets.MinimapBackground]:{type:ce$3.Image,key:Assets.MinimapBackground,path:"/public/assets/minimap-background.png"},[Assets.Professor]:{type:ce$3.Image,key:Assets.Professor,path:"/public/assets/professor.png"},[Assets.Splash]:{type:ce$3.Image,key:Assets.Splash,path:"/public/assets/splash.png"},[Assets.Gold]:{type:ce$3.Image,key:Assets.Gold,path:"/public/assets/gold.png"},[Assets.Central]:{type:ce$3.Image,key:Assets.Central,path:"/public/assets/depth/central.png"},[Assets.LeftMid]:{type:ce$3.Image,key:Assets.LeftMid,path:"/public/assets/depth/left-mid.png"},[Assets.RightMid]:{type:ce$3.Image,key:Assets.RightMid,path:"/public/assets/depth/right-mid.png"},[Assets.LeftCornerUpA]:{type:ce$3.Image,key:Assets.LeftCornerUpA,path:"/public/assets/depth/left-corner-up-a.png"},[Assets.LeftCornerUpB]:{type:ce$3.Image,key:Assets.LeftCornerUpB,path:"/public/assets/depth/left-corner-up-b.png"},[Assets.RightCornerUpA]:{type:ce$3.Image,key:Assets.RightCornerUpA,path:"/public/assets/depth/right-corner-up-a.png"},[Assets.RightCornerUpB]:{type:ce$3.Image,key:Assets.RightCornerUpB,path:"/public/assets/depth/right-corner-up-b.png"},[Assets.LeftEdge]:{type:ce$3.Image,key:Assets.LeftEdge,path:"/public/assets/depth/left-edge.png"},[Assets.RightEdge]:{type:ce$3.Image,key:Assets.RightEdge,path:"/public/assets/depth/right-edge.png"},[Assets.UpperEdge]:{type:ce$3.Image,key:Assets.UpperEdge,path:"/public/assets/depth/upper-edge.png"},[Assets.UpperEdgeLeft]:{type:ce$3.Image,key:Assets.UpperEdgeLeft,path:"/public/assets/depth/upper-corner-left.png"},[Assets.UpperEdgeRight]:{type:ce$3.Image,key:Assets.UpperEdgeRight,path:"/public/assets/depth/upper-corner-right.png"}},maps:{[Maps.Main]:{chunkSize:TILE_WIDTH*64,tileWidth:TILE_WIDTH,tileHeight:TILE_HEIGHT,backgroundTile:[Tileset.Blank],animationInterval:ANIMATION_INTERVAL,tileAnimations:TileAnimations,layers:{layers:{Background:{tilesets:["Default"]},Foreground:{tilesets:["Default"]}},defaultLayer:"Background"}}},sprites:getSprites(),animations:getAnimations(),tilesets:{Default:{assetKey:Assets.OverworldTileset,tileWidth:TILE_WIDTH,tileHeight:TILE_HEIGHT}}},[Scenes.UI]:{assets:{},maps:{},animations:[],tilesets:{},sprites:{}}},scale:{parent:"phaser-game",zoom:1,mode:Phaser.Scale.NONE},cameraConfig:{pinchSpeed:1,wheelSpeed:1,maxZoom:MAX_CAMERA_ZOOM,minZoom:MIN_CAMERA_ZOOM},cullingChunkSize:TILE_HEIGHT*16};function highlightCoord(cr,ar){const{components:{HoverHighlight:dr,PreviousHoverHighlight:fr}}=cr,hr=g$7(dr,f$8);if(hr){const pr={x:hr.x,y:hr.y};if(worldCoordEq(pr,ar))return;E$5(fr,f$8,{x:hr.x,y:hr.y})}E$5(dr,f$8,{...ar})}function createConstrainCameraSystem(cr){const{world:ar,components:{MapBounds:dr},parentLayers:{local:{components:{LocalPosition:fr,Preferences:hr}},network:{components:{TerrainType:pr}}},scenes:{Main:{camera:mr,phaserScene:gr,maps:{Main:{tileWidth:yr,tileHeight:xr}}}}}=cr;let wr=-1/0,br=-1/0,Sr=1/0,vr=1/0;const Er=TILE_HEIGHT*12;let Ar,_r;const Cr={x:1500,y:1e3};_$4(ar,[Ye$3(dr),Ye$3(hr)],({type:kr,entity:Rr})=>{if(kr===k$5.Exit)return;const{disableBackground:Ir}=de$2(hr,Rr);if(Ar?.clear(!0),Ir)return;Ar=gr.add.group();const{top:Nr,bottom:Pr,left:Tr,right:Br}=de$2(dr,Rr),Fr={x:Br-Tr,y:Pr-Nr},jr=Math.ceil(Fr.x/Cr.x)+1,Ur=Math.ceil(Fr.y/Cr.y)+1;for(let qr=0;qr<jr;qr++)for(let Hr=0;Hr<Ur;Hr++){const Or=gr.add.image(qr*Cr.x,Hr*Cr.y,Assets.TiledBackground,0);Or.setDepth(RenderDepth.Background5),Or.setScrollFactor(.3),Ar.add(Or,!1)}}),_$4(ar,[Ye$3(dr),Ye$3(hr)],({type:kr,entity:Rr})=>{if(kr===k$5.Exit)return;const{disableClouds:Ir}=de$2(hr,Rr);if(_r?.clear(!0),Ir)return;_r=gr.add.group();const{top:Nr,bottom:Pr,left:Tr,right:Br}=de$2(dr,Rr),Fr=.02,jr=(Br-Tr)/Fr,Ur=gr.add.image(Tr,Nr,Assets.CloudBackground,0);_r.add(Ur,!1),Ur.setX(Tr-Ur.width),Ur.setY(Nr-Ur.height),Ur.setDepth(RenderDepth.Background4-2),Ur.setScrollFactor(.5),gr.add.tween({targets:Ur,x:{from:Ur.x+Ur.width,to:Br},y:{from:Ur.y+Ur.height,to:Pr},repeat:-1,yoyo:!1,duration:jr,ease:Phaser.Math.Easing.Linear});const qr=gr.add.image(Tr+500,Nr,Assets.CloudBackground,0);_r.add(qr,!1),qr.setScale(.6),qr.setX(Tr-qr.width),qr.setY(Nr-qr.height),qr.setDepth(RenderDepth.Background4-4),qr.setScrollFactor(.4),gr.add.tween({targets:qr,x:{from:qr.x+qr.width,to:Br},y:{from:qr.y+qr.height,to:Pr},repeat:-1,yoyo:!1,duration:jr*1.1,ease:Phaser.Math.Easing.Linear});const Hr=gr.add.image(Tr,Nr+500,Assets.CloudBackground,0);_r.add(Hr,!1),Hr.setScale(.3),Hr.setX(Tr-Hr.width),Hr.setY(Nr-Hr.height),Hr.setDepth(RenderDepth.Background4-6),Hr.setScrollFactor(.3),gr.add.tween({targets:Hr,x:{from:Hr.x+Hr.width,to:Br},y:{from:Hr.y+Hr.height,to:Pr},repeat:-1,yoyo:!1,duration:jr*1.2,ease:Phaser.Math.Easing.Linear})}),_$4(ar,[Ye$3(fr),Ye$3(pr)],({type:kr,entity:Rr})=>{if(kr===k$5.Exit)return;const Ir=de$2(fr,Rr);let Nr=!1;if(Ir.x>wr&&(Nr=!0,wr=Ir.x),Ir.y>br&&(Nr=!0,br=Ir.y),Ir.x<Sr&&(Nr=!0,Sr=Ir.x),Ir.y<vr&&(Nr=!0,vr=Ir.y),Nr){const Pr=Sr*yr-Er,Tr=vr*xr-Er,Br=(wr+Math.abs(Sr))*yr+Er*2,Fr=(br+Math.abs(vr))*yr+Er*2;mr.phaserCamera.setBounds(Sr*yr-Er,vr*xr-Er,(wr+Math.abs(Sr))*yr+Er*2,(br+Math.abs(vr))*yr+Er*2);const jr=Sr-wr/2,Ur=vr-br/2;mr.phaserCamera.centerOn(jr,Ur),E$5(dr,f$8,{top:Tr,bottom:Br,left:Pr,right:Fr})}}),E$5(fr,f$8,{x:0,y:0}),ue$2(fr,f$8)}function createCycleUsableUnitsSystem(cr){const{world:ar,parentLayers:{network:{components:{Position:dr,OwnedBy:fr,Stamina:hr},utils:{isOwnedByCurrentPlayer:pr}},headless:{components:{LocalStamina:mr,OnCooldown:gr},api:{getCurrentStamina:yr,unitSort:xr,getActionStaminaCost:wr}}},scenes:{Main:{input:br}},api:{selectAndView:Sr}}=cr;let vr=new Set,Er=-1;_$4(ar,[Ye$3(dr),Ye$3(fr),Ye$3(hr),Ye$3(mr),Ge$2(gr)],({entity:Ar,type:_r})=>{if(_r===k$5.Exit){vr.delete(Ar);return}if(yr(Ar)<wr()){vr.delete(Ar);return}pr(Ar)&&vr.add(Ar),vr=new Set([...vr].sort(xr))}),br.onKeyPress(Ar=>Ar.has("TAB"),()=>{Er++;const Ar=[...vr];Er>=Ar.length&&(Er=0);const _r=Ar[Er];Sr(_r)})}function createCombatSystem(cr){const{parentLayers:{network:{network:{matchEntity:ar},components:{UnitType:dr,StructureType:fr,Combat:hr,StaminaOnKill:pr},utils:{isOwnedByCurrentPlayer:mr}},local:{components:{LocalHealth:gr,LocalPosition:yr,Capturer:xr,Selected:wr},api:{getOwnerColor:br,systemDecoders:{onCombat:Sr}}},headless:{components:{PreviousOwner:vr},api:{combat:{canRetaliate:Er}}}},scenes:{Main:{objectPool:Ar,phaserScene:_r}},animations:{triggerBloodSplatter:Cr},api:{playTintedAnimation:kr,depthFromPosition:Rr}}=cr;function Ir(Tr,Br){const Fr=B$4(Tr,TILE_WIDTH,TILE_HEIGHT),jr=_r.add.group(),Ur=_r.add.text(0,0,`${Br}`,{fontFamily:"Arial",fontSize:"12px",color:"#FFD700",stroke:"#000000",strokeThickness:4});Ur.setPosition(Fr.x+12,Fr.y),Ur.setOrigin(0,0),Ur.setDepth(Rr(Tr,RenderDepth.UI1)),jr.add(Ur);const qr=_r.add.sprite(0,0,"");qr.setPosition(Fr.x-4,Fr.y),qr.setOrigin(0,0),qr.setDepth(Rr(Tr,RenderDepth.UI1)),qr.setScale(.5),qr.play(Animations.Gold),jr.add(qr),_r.tweens.add({targets:jr.getChildren(),y:Fr.y-32,alpha:0,duration:1500,ease:"Cubic.easeOut",onComplete:()=>{jr.destroy(!0)}})}function Nr(Tr,Br,{onStart:Fr,onContact:jr,onComplete:Ur}){const qr=g$7(dr,Tr)?.value;if(!qr){Fr&&Fr(),jr&&jr(),Ur&&Ur();return}const Hr=UnitTypeAttackAnimations[qr],Or=UnitTypeAnimations[qr],Mr=Ar.get(Tr,"Sprite"),Lr=br(Br);Mr.setComponent({id:"attack-animation",once:Vr=>{if(!Hr){Ur&&Ur(Vr);return}const Jr=kr(Tr,Hr,Lr.name);let es=!1;const ns=(Qr,zr)=>{Qr.key===Jr&&(!es&&Fr&&(Fr(Vr),es=!0),zr.progress>=1&&kr(Tr,Or,Lr.name),jr&&zr.nextFrame?.isLast&&jr(Vr),Ur&&zr.progress>=1&&(Ur(Vr),Vr.removeListener("animationupdate",ns)))};Vr.on("animationupdate",ns)}})}function Pr(Tr,Br,Fr){const jr=g$7(dr,Tr)?.value;if(!jr){Fr();return}const Ur=UnitTypeDeathAnimations[jr],qr=br(Br);Ar.get(Tr,"Sprite").setComponent({id:"death-animation",once:Or=>{kr(Tr,Ur,qr.name),Or.on("animationcomplete",()=>{Fr()})}})}Sr(({attacker:Tr,attackerDied:Br,attackerDamageReceived:Fr,defenderDamageReceived:jr,defender:Ur,defenderDied:qr,ranged:Hr,defenderCaptured:Or})=>{if(!ar)return;Br&&le$3(wr,Tr)&&ue$2(wr,Tr),qr&&le$3(wr,Ur)&&ue$2(wr,Ur);const Mr=g$7(yr,Tr);if(!Mr)return;const Lr=g$7(yr,Ur);if(!Lr)return;const Vr=g$7(vr,Tr),Jr=g$7(vr,Ur),es=Vr?encodeMatchEntity(ar,Vr.value):"0",ns=Jr?encodeMatchEntity(ar,Jr.value):"0",Qr=g$7(fr,Ur),zr=Lr.x<Mr.x,Wr=Mr.x<Lr.x,ss=Fr>0,Xr=jr>0,ts=g$7(hr,Tr)?.health||0,fs=g$7(hr,Ur)?.health||0;Nr(Tr,es,{onStart:rs=>{rs&&(rs.flipX=zr)},onContact:()=>{Br?E$5(gr,Tr,{value:0}):ss&&E$5(gr,Tr,{value:ts}),(Br||ss)&&Cr(Mr),qr?E$5(gr,Ur,{value:0}):Xr&&E$5(gr,Ur,{value:fs}),(qr||Xr)&&(Qr||Cr(Lr)),Or&&E$5(xr,Ur,{value:Tr})},onComplete:rs=>{if(rs&&zr&&(rs.flipX=!1),Br&&Pr(Tr,es,()=>{ue$2(gr,Tr),ue$2(yr,Tr)}),qr){Pr(Ur,ns,()=>{ue$2(gr,Ur),ue$2(yr,Ur)});const as=g$7(pr,Ur)?.value;mr(Tr)&&as&&Ir(Lr,as)}}}),!Hr&&Er(cr.parentLayers.network,Ur)&&Nr(Ur,ns,{onStart:rs=>{rs&&(rs.flipX=Wr)},onComplete:rs=>{rs&&Wr&&(rs.flipX=!1)}})})}function createTriggerBloodSplatter(cr,ar){const{Main:{config:dr,phaserScene:fr,maps:{Main:{tileHeight:hr,tileWidth:pr}}}}=cr,mr=dr.sprites[Sprites.Banner],gr=fr.add.particles(mr.assetKey,mr.frame);return yr=>{const xr=gr.createEmitter({scale:{start:1.5,end:.3},speed:{min:-200,max:200},gravityY:400,lifespan:200,blendMode:Phaser.BlendModes.SCREEN,deathCallback:()=>gr.removeEmitter(xr)});gr.setDepth(ar(yr,RenderDepth.Foreground1));const wr=B$4(yr,pr,hr);xr.setBounds(wr.x-6,wr.y,pr+12,hr),xr.explode(8,wr.x+pr/2,wr.y+hr/2)}}function createFlashRed(cr){const{Main:{objectPool:ar}}=cr;return dr=>{ar.get(dr,"Sprite").setComponent({id:"flash-red",now:hr=>{const pr=hr.tint;hr.setTint(11537182),setTimeout(()=>hr.setTint(pr),125)}})}}function createPlayDeathAnimation(cr,ar,dr){const{UnitType:fr}=dr.parentLayers.network.components;return function(hr,pr){const mr=g$7(fr,hr)?.value;if(!mr){pr();return}const gr=UnitTypeDeathAnimations[mr],yr=ar.Main.objectPool.get(hr,"Sprite");cr(hr,gr),yr.setComponent({id:"death-animation",now:xr=>{xr.on(`animationcomplete-${gr}`,()=>{pr()})}})}}function createAnimations(cr,ar,dr,fr){return{flashRed:createFlashRed(dr),playDeathAnimation:createPlayDeathAnimation(cr,dr,fr),triggerBloodSplatter:createTriggerBloodSplatter(dr,ar)}}function createScreenFlashes(cr){const{world:ar,scenes:{Main:{camera:dr}},parentLayers:{headless:{turn$:fr}}}=cr;x$6(ar,fr,()=>{dr.phaserCamera.flashEffect.alpha=.3,dr.phaserCamera.flash(500)})}function createSmoothCameraControls(cr){const{scenes:{Main:{phaserScene:ar,camera:dr}},api:{mapInteraction:{mapInteractionEnabled:fr}}}=cr,hr=pr=>{const mr=new Phaser.Cameras.Controls.SmoothedKeyControl(pr),gr=lodashExports.throttle(()=>{dr.setScroll(dr.phaserCamera.scrollX,dr.phaserCamera.scrollY),dr.setZoom(dr.phaserCamera.zoom)},750);let yr=Date.now();function xr(wr){const br=wr-yr;fr()&&mr.update(br),yr=wr,gr(),window.requestAnimationFrame(xr)}requestAnimationFrame(xr)};ar.input.keyboard&&(hr({camera:dr.phaserCamera,left:ar.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),right:ar.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D),up:ar.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W),down:ar.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),acceleration:.5,drag:.005,maxSpeed:.8,zoomSpeed:.02}),hr({camera:dr.phaserCamera,left:ar.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.LEFT),right:ar.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.RIGHT),up:ar.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.UP),down:ar.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.DOWN),acceleration:.5,drag:.005,maxSpeed:.8,zoomSpeed:.02}))}function createPreferencesSystem(cr){const{parentLayers:{local:{world:ar,components:{Preferences:dr},api:{getPreferences:fr}}},game:hr}=cr;_$4(ar,[Ye$3(dr)],()=>{const pr=fr(),{musicVolume:mr,muteMusic:gr}=pr;hr.sound.mute=gr,hr.sound.volume!==mr&&(hr.sound.volume=mr/100)})}const createDrawShadowSystem=cr=>{const{defineGameObjectSystem:ar,scenes:{Main:{config:dr,maps:{Main:{tileWidth:fr,tileHeight:hr}}}},api:{depthFromPosition:pr},parentLayers:{network:{components:{UnitType:mr}},local:{components:{LocalPosition:gr,Path:yr}}}}=cr;ar(1,"Sprite",[Ye$3(mr),Ye$3(gr),Ge$2(yr)],({entity:xr},[wr])=>{const br=g$7(gr,xr);if(!br)return;const Sr=B$4(br,fr,hr),vr=dr.sprites[Sprites.Shadow],Er=g$7(mr,xr)?.value;wr.setComponent({id:"Shadow",once:Ar=>{Ar.setTexture(vr.assetKey,vr.frame);let _r=Sr.y+hr/2-UNIT_OFFSET+4;Er===UnitTypes.Brute&&(_r+=7),Ar.setPosition(Sr.x,_r),Ar.setDepth(pr(br,RenderDepth.Foreground5)),Ar.setOrigin(0,.5)}})})},asyncFileLoader=cr=>new Promise(ar=>{cr.on("filecomplete",()=>ar()).on("loaderror",()=>ar()),cr.start()}),createSounds=async cr=>{const ar={},dr=["field-battle","game-over","intense-battle"];for(const hr of dr){const pr=cr.load.audio(hr,`public/assets/sounds/${hr}.m4a`);await asyncFileLoader(pr),ar[hr]=cr.sound.add(hr,{loop:!0,volume:.12})}const fr=["ui-1"];for(const hr of fr){const pr=cr.load.audio(hr,`public/assets/sounds/${hr}.wav`);await asyncFileLoader(pr),ar[hr]=cr.sound.add(hr,{volume:.5})}return ar};function createTintNoStaminaSystem(cr){const{world:ar,parentLayers:{network:{components:{UnitType:dr,StructureType:fr}},headless:{components:{OnCooldown:hr,Depleted:pr}},local:{components:{LocalPosition:mr}}},scenes:{Main:{objectPool:gr}}}=cr,yr=xr=>{gr.get(xr,"Sprite").setComponent({id:"stamina-tint",once:br=>{le$3(hr,xr)||le$3(pr,xr)?br.setTint(8421504):br.clearTint()}})};_$4(ar,[Ye$3(dr),Ye$3(hr),Ye$3(mr)],({entity:xr,type:wr})=>{wr===k$5.Exit&&!g$7(mr,xr)||yr(xr)}),_$4(ar,[Ye$3(dr),Ge$2(hr),Ye$3(mr)],({entity:xr,type:wr})=>{wr===k$5.Exit&&!g$7(mr,xr)||yr(xr)}),_$4(ar,[Ye$3(pr),Ye$3(mr),Ye$3(fr)],({entity:xr,type:wr})=>{wr!==k$5.Exit&&de$2(fr,xr).value!==StructureTypes.SpawnSettlement&&de$2(fr,xr).value!==StructureTypes.Settlement&&yr(xr)})}function createHideBlackBoxSystem(cr){const{world:ar,scenes:{Main:{phaserScene:dr,objectPool:fr}}}=cr;setInterval(()=>{dr.children.getAll().forEach(hr=>{if(hr instanceof Phaser.GameObjects.Sprite&&hr.texture.key==="__MISSING"){const pr=hr.getData("objectPoolId");console.warn(`[HideBlackBoxSystem] despawn object ${pr} because of missing texture`),console.warn("[HideBlackBoxSystem] components:");const mr=Tt$2(ar,pr).reduce((gr,yr)=>(gr[yr.id]=g$7(yr,pr),gr),{});console.table(mr),fr.remove(pr)}})},1e3)}function createCaptureAnimationSystem(cr){const{parentLayers:{local:{components:{Capturer:ar},api:{getOwnerColor:dr}},network:{network:{world:fr}}},api:{getEntityPixelCoord:hr,setOriginCenter:pr,depthFromPosition:mr},scenes:{Main:{phaserScene:gr}}}=cr;_$4(fr,[Ye$3(ar)],({entity:yr})=>{const{x:xr,y:wr}=hr(yr),br=gr.add.sprite(xr,wr,""),Sr=dr(yr).name,vr=se$3({x:xr,y:wr},TILE_WIDTH,TILE_HEIGHT);br.setPosition(xr,wr-20),br.play(`${Animations.Capture}-${Sr}`),br.setDepth(mr(vr,RenderDepth.UI1)),pr(br),br.once("animationcomplete",()=>{br.destroy()})})}function createCalculateCombatResultSystem(cr){const{world:ar,parentLayers:{network:dr,network:{components:{Combat:fr,ArmorModifier:hr,Position:pr}},headless:{components:{NextPosition:mr}}},components:{IncomingDamage:gr,WillBeDestroyed:yr,TerrainArmorBonus:xr}}=cr;mt$2(ar,[Ye$3(fr)],()=>gr,()=>({value:0}),{runOnInit:!0});const wr=ie$4(ar,{attacker:P$1.OptionalEntity,defender:P$1.OptionalEntity},{id:"PreviouslySetIncomingDamage"});mt$2(ar,[Ye$3(fr)],()=>wr,()=>({attacker:void 0,defender:void 0}),{runOnInit:!0}),_$4(ar,[Ye$3(mr)],({entity:br,type:Sr})=>{const vr=g$7(wr,br);if(vr){const Ar=vr.attacker,_r=vr.defender;Ar&&(E$5(gr,Ar,{value:0}),E$5(yr,Ar,{value:!1}),ue$2(xr,Ar)),_r&&(E$5(gr,_r,{value:0}),E$5(yr,_r,{value:!1}),ue$2(xr,_r))}if(Sr===k$5.Exit)return;const Er=de$2(mr,br);if(Er.intendedTarget){const Ar=Er.intendedTarget,_r=br,Cr=calculateCombatResult(cr.parentLayers.network,_r,Ar,{x:Er.x,y:Er.y});E$5(gr,_r,{value:Cr.defenderDamage*1e3}),E$5(gr,Ar,{value:Cr.attackerDamage*1e3});const kr=(g$7(fr,_r)?.health??0)/1e3,Rr=(g$7(fr,Ar)?.health??0)/1e3;kr-Cr.defenderDamage<=0&&E$5(yr,_r,{value:!0}),Rr-Cr.attackerDamage<=0&&E$5(yr,Ar,{value:!0});const Ir=getModiferAtPosition(dr,hr,{x:Er.x,y:Er.y});E$5(xr,_r,{value:Ir});const Nr=getModiferAtPosition(dr,hr,g$7(pr,Ar)||{x:0,y:0});E$5(xr,Ar,{value:Nr}),E$5(wr,br,{attacker:_r,defender:Ar})}})}const createArrowPainter=cr=>{const ar=(hr,pr,mr)=>{if(!hr&&!mr)return"-1";let gr;const yr=hr?hr.x-pr.x:0,xr=hr?hr.y-pr.y:0;yr===0&&xr===-1?gr=0:yr===1&&xr===-1?gr=1:yr===1&&xr===0?gr=2:yr===1&&xr===1?gr=3:yr===0&&xr===1?gr=4:yr===-1&&xr===1?gr=5:yr===-1&&xr===0?gr=6:yr===-1&&xr===-1&&(gr=7);let wr;const br=mr?mr.x-pr.x:0,Sr=mr?mr.y-pr.y:0;return br===0&&Sr===-1?wr=0:br===1&&Sr===-1?wr=1:br===1&&Sr===0?wr=2:br===1&&Sr===1?wr=3:br===0&&Sr===1?wr=4:br===-1&&Sr===1?wr=5:br===-1&&Sr===0?wr=6:br===-1&&Sr===-1&&(wr=7),gr===void 0&&wr!==void 0?`${wr}-start`:gr!==void 0&&wr===void 0?`${gr}-end`:[gr,wr].filter(vr=>vr!=null).sort().join("")},dr=hr=>{const pr=[];for(let mr=0;mr<hr.length;mr++){const gr=hr[mr-1],yr=hr[mr],xr=hr[mr+1],wr=ar(gr,yr,xr);pr.push(wr)}return pr};return{arrowCodeFromPoints:ar,pathToArrowCodes:dr,paintArrowAlongPath:(hr,pr)=>{const mr=dr(pr).filter(xr=>xr!=="-1");if(mr.length<2)return;const gr=mr.map(xr=>`Arrow${hr}-${xr}`),yr=cr.phaserScene.add.group();for(let xr=0;xr<gr.length;xr++){const wr=pr[xr],br=B$4(wr,TILE_WIDTH,TILE_HEIGHT),Sr=cr.phaserScene.add.sprite(br.x,br.y,""),vr=cr.config.sprites[gr[xr]];Sr.setTexture(vr.assetKey,vr.frame),Sr.setDepth(RenderDepth.Foreground5);const Er=Sr.width*Sr.scaleX,Ar=(Er-TILE_WIDTH)/(2*Er);Sr.setOrigin(Ar),yr.add(Sr)}return yr}}};function createDepthSystem(cr){const{world:ar,parentLayers:{network:{components:{StructureType:dr,UnitType:fr}},local:{components:{LocalPosition:hr}}},api:{setDepth:pr}}=cr;_$4(ar,[Ye$3(hr),Ye$3(dr)],({entity:mr,type:gr})=>{gr!==k$5.Exit&&pr(mr,RenderDepth.Foreground2)}),_$4(ar,[Ye$3(hr),Ye$3(fr)],({entity:mr,type:gr})=>{gr!==k$5.Exit&&pr(mr,RenderDepth.Foreground3)})}function createSkullSystem(cr){const{world:ar,parentLayers:{network:{components:{Combat:dr}},headless:{components:{NextPosition:fr}},local:{components:{LocalPosition:hr}}},components:{WillBeDestroyed:pr},defineGameObjectSystem:mr,api:{depthFromPosition:gr},scenes:{Main:{config:{sprites:yr},phaserScene:xr}}}=cr;function wr(br,Sr){const vr=B$4(Sr,TILE_WIDTH,TILE_HEIGHT),Er=yr[Sprites.Skull];br.setComponent({id:"skull",once:Ar=>{Ar.setPosition(vr.x+TILE_WIDTH/2,vr.y-28),Ar.setDepth(gr(Sr,RenderDepth.UI1)),Ar.setOrigin(.5,0),Ar.setTexture(Er.assetKey,Er.frame),Ar.setAlpha(.25),xr.add.tween({targets:Ar,duration:500,repeat:-1,yoyo:!0,ease:"Sine.easeInOut",alpha:1,scale:1.1,y:"-=2"})}})}mr(1,"Sprite",[Ye$3(hr),Ye$3(fr),Je$2(pr,{value:!0})],(br,Sr)=>{const vr=g$7(fr,br.entity);vr&&wr(Sr[0],vr)}),mr(1,"Sprite",[Ye$3(hr),Ge$2(fr),Je$2(pr,{value:!0})],(br,Sr)=>{const vr=g$7(hr,br.entity);vr&&wr(Sr[0],vr)})}function createShieldSystem(cr){const{parentLayers:{local:{components:{LocalPosition:ar}},headless:{components:{NextPosition:dr}}},components:{WillBeDestroyed:fr,TerrainArmorBonus:hr},defineGameObjectSystem:pr,api:{depthFromPosition:mr},scenes:{Main:{config:{sprites:gr}}}}=cr;function yr(xr,wr,br){const Sr=gr[Sprites.Armor];wr.forEach(_r=>{_r.setComponent({id:"tex",once:Cr=>{Cr.setTexture(Sr.assetKey,Sr.frame),Cr.setVisible(!1)}})});const vr=g$7(hr,xr)?.value;if(!vr)return;const Er=B$4(br,TILE_WIDTH,TILE_HEIGHT);let Ar=0;if(vr<=-30?Ar=2:vr<=-15&&(Ar=1),Ar!==0)for(let _r=0;_r<Ar;_r++)wr[_r].setComponent({id:"shield",once:kr=>{let Rr=Er.x+TILE_WIDTH/2;Ar===2&&(Rr+=_r===0?-TILE_WIDTH/6:TILE_WIDTH/6),kr.setScale(.5),kr.setPosition(Rr,Er.y-22),kr.setDepth(mr(br,RenderDepth.UI1)),kr.setOrigin(.5,0),kr.setVisible(!0)}})}pr(2,"Sprite",[Ye$3(ar),Ge$2(dr),Ke$1(fr,{value:!0}),Ye$3(hr)],(xr,wr)=>{const br=g$7(ar,xr.entity);br&&yr(xr.entity,wr,br)}),pr(2,"Sprite",[Ye$3(ar),Ye$3(dr),Ke$1(fr,{value:!0}),Ye$3(hr)],(xr,wr)=>{const br=g$7(dr,xr.entity);br&&yr(xr.entity,wr,br)})}async function createPhaserLayer(cr,ar=gameConfig){const{api:{selectEntity:dr,getOwnerColor:fr},components:{LocalPosition:hr},parentLayers:{network:{components:{UnitType:pr,OwnedBy:mr},utils:{isOwnedByCurrentPlayer:gr,getCurrentPlayerEntity:yr,getTemplateValueStrict:xr},api:{buildAt:wr}},headless:{components:{NextPosition:br,InCurrentMatch:Sr}}}}=cr,vr=xt$2(cr.parentLayers.network.network.world,"phaser"),Er=createPhaserComponents(vr),{game:Ar,scenes:_r,dispose:Cr}=await Vo(ar);vr.registerDisposer(Cr);const kr=await createSounds(_r.Main.phaserScene);kr["field-battle"].play(),Ar.scene.start(Scenes.UI),_r.UI.camera.zoom$.subscribe(()=>{_r.UI.camera.phaserCamera.setZoom(1)});function Rr(Wr){const ss=g$7(hr,Wr);if(!ss)return;const{Main:{camera:Xr,maps:{Main:{tileHeight:ts,tileWidth:fs}}}}=_r,rs=B$4(ss,fs,ts);Xr.phaserCamera.pan(rs.x,rs.y,350,Phaser.Math.Easing.Cubic.InOut),setTimeout(()=>{Xr.setScroll(Xr.phaserCamera.scrollX,Xr.phaserCamera.scrollY),Xr.setZoom(Xr.phaserCamera.zoom)},250),dr(Wr)}function Ir(Wr,ss,Xr,ts=1){const{objectPool:fs,maps:{Main:{tileHeight:rs,tileWidth:as}}}=_r.Main;let ps=Animations.TileOutlineWhite;Xr==="red"&&(ps=Animations.TileOutlineRed),Xr==="yellow"&&(ps=Animations.TileOutlineYellow),fs.get(Wr,"Sprite").setComponent({id:"tile-highlight",once:async Ss=>{const Ns=B$4(ss,as,rs);Ss.play(ps),Ss.setOrigin(0,0),Ss.setPosition(Ns.x,Ns.y),Ss.setDepth(RenderDepth.Background1),Ss.setAlpha(ts)}})}function Nr(){let Wr=!0;return{disableMapInteraction:()=>{Wr=!1},enableMapInteraction:()=>{Wr=!0},mapInteractionEnabled:()=>Wr}}function Pr(Wr,ss,Xr,ts){const{objectPool:fs,config:{animations:rs}}=_r.Main,as=fs.get(Wr,"Sprite"),xs=((Ss,Ns)=>{const Ts=`${Ss}-${Ns}`;return rs.find(bs=>bs.key===Ts)})(ss,Xr)?.key??ss;return as.setComponent({id:`play-tinted-animation-${Wr}`,once:Ss=>{Ss.play(xs),ts&&ts(Ss)}}),xs}function Tr(Wr,ss,Xr){const ts=fr(Wr);return Pr(Wr,ss,ts.name,Xr)}const Br=1200;function Fr(){return window.innerWidth>Br}const jr=observable$1({hideLoading:!1,map:{fullscreen:!1}});let Ur=0;const qr=Wr=>`${Wr}-${Ur++}`,Hr=(Wr,ss,Xr,ts,fs)=>{const rs=fs??qr("game-object");_$4(vr,Xr,as=>{const{type:ps,entity:xs}=as;if(ps===k$5.Exit){for(let Ns=0;Ns<Wr;Ns++)_r.Main.objectPool.remove(`${rs}-${xs}-${Ns}`);return}const Ss=[];for(let Ns=0;Ns<Wr;Ns++){const Ts=_r.Main.objectPool.get(`${rs}-${xs}-${Ns}`,ss);Ss.push(Ts)}ts(as,Ss)})},Or=Wr=>{const ss=Wr.width*Wr.scaleX,Xr=(ss-_r.Main.maps.Main.tileWidth)/(2*ss);Wr.setOrigin(Xr)};function Mr(Wr){const{tileWidth:ss,tileHeight:Xr}=_r.Main.maps.Main,ts=de$2(hr,Wr);return B$4(ts,ss,Xr)}const Lr=(Wr,ss,Xr,ts,fs)=>{const{objectPool:rs,maps:{Main:{tileWidth:as,tileHeight:ps}},config:{sprites:xs}}=_r.Main,Ss=xs[ss],Ns=B$4(Xr,as,ps),Ts=rs.get(Wr,"Sprite");let os;return Ts.setComponent({id:`draw-sprite-at-tile-${Wr}`,once:bs=>{bs.setOrigin(0,0),bs.setPosition(Ns.x+(fs?.xOffset??0),Ns.y+(fs?.yOffset??0)),bs.setDepth(es(fs?.depthPosition??Xr,ts)),bs.setTexture(Ss.assetKey,Ss.frame),os=bs}}),os},Vr=(Wr,ss,Xr,ts)=>{const{objectPool:fs,maps:{Main:{tileWidth:rs,tileHeight:as}}}=_r.Main,ps=B$4(Xr,rs,as);fs.get(Wr,"Sprite").setComponent({id:`draw-animation-at-tile-${Wr}`,once:Ss=>{Ss.setOrigin(0,0),Ss.setPosition(ps.x,ps.y),Ss.setDepth(es(Xr,ts)),Ss.play(ss)}})},Jr=async(Wr,ss,Xr)=>{if(!gr(Wr))return;const ts=yr();if(!ts)return;const fs=xr(pr.id,ss).value,rs=UnitTypeAnimations[fs],as=vr.registerEntity({idSuffix:"build-ghost"});E$5(mr,as,{value:ts}),E$5(pr,as,{value:fs}),E$5(Er.SpriteAnimation,as,{value:rs}),E$5(br,as,{x:Xr.x,y:Xr.y,userCommittedToPosition:!0,intendedTarget:void 0}),E$5(Sr,as,{value:!0});try{await wr(Wr,ss,Xr)}catch(ps){console.error(ps)}ue$2(br,as),ue$2(Er.SpriteAnimation,as),ue$2(mr,as),ue$2(Sr,as)},es=(Wr,ss)=>(Wr.y+100)*10+ss,ns=(Wr,ss)=>{const Xr=g$7(hr,Wr);if(!Xr)return;_r.Main.objectPool.get(Wr,"Sprite").setComponent({id:"depth",once:fs=>{fs.setDepth(es(Xr,ss))}})},Qr=createArrowPainter(_r.Main),zr={world:vr,components:Er,sounds:kr,parentLayers:{...cr.parentLayers,local:cr},game:Ar,scenes:_r,api:{selectAndView:Rr,drawTileHighlight:Ir,mapInteraction:Nr(),highlightCoord:Wr=>{"no-op for types"},playTintedAnimation:Pr,playAnimationWithOwnerColor:Tr,setOriginCenter:Or,getEntityPixelCoord:Mr,drawSpriteAtTile:Lr,drawAnimationAtTile:Vr,depthFromPosition:es,setDepth:ns,buildAt:Jr,arrowPainter:Qr},animations:createAnimations(Tr,es,_r,cr),ui:{isLargeScreen:Fr},uiState:jr,defineGameObjectSystem:Hr};return zr.api.highlightCoord=lodashExports.curry(highlightCoord)(zr),createSetVisualsSystem(zr),createMapSystem(zr),createLocalPositionSystem(zr),createAppearanceSystem(zr),createSpriteAnimationSystem(zr),createHueTintSystem(zr),createSelectionSystem$1(zr),createDrawDevHighlightSystem(zr),createInputSystem(zr),createDrawHighlightCoordSystem(zr),createDrawPotentialPathSystem(zr),createDrawNextPositionSystem(zr),createPlayerSpawnSystem(zr),createDrawEntityHeader(zr),createDrawAttackableEntitiesSystem(zr),createConstrainCameraSystem(zr),createCycleUsableUnitsSystem(zr),createCalculateCombatResultSystem(zr),createCombatSystem(zr),createScreenFlashes(zr),createSmoothCameraControls(zr),createPreferencesSystem(zr),createDrawShadowSystem(zr),createTintNoStaminaSystem(zr),createCaptureAnimationSystem(zr),createDepthSystem(zr),createSkullSystem(zr),createShieldSystem(zr),createHideBlackBoxSystem(zr),zr}function useResolvedElement(cr,ar){var dr=reactExports.useRef(null),fr=reactExports.useRef(null);fr.current=ar;var hr=reactExports.useRef(null);reactExports.useEffect(function(){pr()});var pr=reactExports.useCallback(function(){var mr=hr.current,gr=fr.current,yr=mr||(gr?gr instanceof Element?gr:gr.current:null);dr.current&&dr.current.element===yr&&dr.current.subscriber===cr||(dr.current&&dr.current.cleanup&&dr.current.cleanup(),dr.current={element:yr,subscriber:cr,cleanup:yr?cr(yr):void 0})},[cr]);return reactExports.useEffect(function(){return function(){dr.current&&dr.current.cleanup&&(dr.current.cleanup(),dr.current=null)}},[]),reactExports.useCallback(function(mr){hr.current=mr,pr()},[pr])}function extractSize(cr,ar,dr){return cr[ar]?cr[ar][0]?cr[ar][0][dr]:cr[ar][dr]:ar==="contentBoxSize"?cr.contentRect[dr==="inlineSize"?"width":"height"]:void 0}function useResizeObserver(cr){cr===void 0&&(cr={});var ar=cr.onResize,dr=reactExports.useRef(void 0);dr.current=ar;var fr=cr.round||Math.round,hr=reactExports.useRef(),pr=reactExports.useState({width:void 0,height:void 0}),mr=pr[0],gr=pr[1],yr=reactExports.useRef(!1);reactExports.useEffect(function(){return yr.current=!1,function(){yr.current=!0}},[]);var xr=reactExports.useRef({width:void 0,height:void 0}),wr=useResolvedElement(reactExports.useCallback(function(br){return(!hr.current||hr.current.box!==cr.box||hr.current.round!==fr)&&(hr.current={box:cr.box,round:fr,instance:new ResizeObserver(function(Sr){var vr=Sr[0],Er=cr.box==="border-box"?"borderBoxSize":cr.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",Ar=extractSize(vr,Er,"inlineSize"),_r=extractSize(vr,Er,"blockSize"),Cr=Ar?fr(Ar):void 0,kr=_r?fr(_r):void 0;if(xr.current.width!==Cr||xr.current.height!==kr){var Rr={width:Cr,height:kr};xr.current.width=Cr,xr.current.height=kr,dr.current?dr.current(Rr):yr.current||gr(Rr)}})}),hr.current.instance.observe(br,{box:cr.box}),function(){hr.current&&hr.current.instance.unobserve(br)}},[cr.box,fr]),cr.ref);return reactExports.useMemo(function(){return{ref:wr,width:mr.width,height:mr.height}},[wr,mr.width,mr.height])}const usePromiseValue=cr=>{const ar=reactExports.useRef(cr),[dr,fr]=reactExports.useState(null);return reactExports.useEffect(()=>{if(!cr)return;let hr=!0;return ar.current=cr,cr.then(pr=>{hr&&ar.current===cr&&fr(pr)}),()=>{hr=!1}},[cr]),dr},createContainer=()=>{const cr=document.createElement("div");return cr.style.width="100%",cr.style.height="100%",cr.style.pointerEvents="all",cr},usePhaserLayer=({localLayer:cr})=>{const ar=reactExports.useRef(null),[{width:dr,height:fr},hr]=reactExports.useState({width:0,height:0}),{phaserLayerPromise:pr,container:mr}=reactExports.useMemo(()=>{if(!cr)return{phaserLayerPromise:null,container:null};const wr=createContainer();return ar.current&&ar.current.appendChild(wr),{container:wr,phaserLayerPromise:createPhaserLayer(cr,{...gameConfig,scale:{...gameConfig.scale,parent:wr,mode:Phaser.Scale.NONE,width:dr,height:fr}})}},[cr]);reactExports.useEffect(()=>()=>{pr?.then(wr=>wr.world.dispose()),mr?.remove()},[mr,pr]);const gr=usePromiseValue(pr),yr=reactExports.useMemo(()=>lodashExports.throttle(({width:wr,height:br})=>{hr({width:wr??0,height:br??0})},500),[]);useResizeObserver({ref:mr,onResize:yr});const xr=reactExports.useCallback(wr=>{ar.current=wr,mr&&(ar.current?ar.current.appendChild(mr):mr.remove())},[mr]);return reactExports.useMemo(()=>({ref:xr,phaserLayer:gr}),[xr,gr])},PhaserLayer=({localLayer:cr})=>{const{ref:ar,phaserLayer:dr}=usePhaserLayer({localLayer:cr});return reactExports.useEffect(()=>{dr&&useStore.setState({phaserLayer:dr})},[dr]),jsxRuntimeExports.jsx("div",{ref:ar,style:{width:"100%",height:"100%"}})};function defineLocalPositionComponent(cr){return ie$4(cr,{x:P$1.Number,y:P$1.Number},{id:"LocalPosition",indexed:!0})}function defineLocalEntityTypeComponent(cr){return ie$4(cr,{value:P$1.Number},{id:"LocalEntityType"})}function definePathComponent(cr){return ie$4(cr,{x:P$1.NumberArray,y:P$1.NumberArray},{id:"Path"})}function defineSelectionComponent(cr){return ie$4(cr,{x:P$1.Number,y:P$1.Number,width:P$1.Number,height:P$1.Number},{id:"Selection"})}function defineSelectableComponent(cr){return ie$4(cr,{value:P$1.Boolean},{id:"Selectable"})}function defineSelectedComponent(cr){return ie$4(cr,{value:P$1.Boolean},{id:"Selected"})}function createSyncSystem(cr){const{world:ar,parentLayers:{network:{components:{ItemType:dr,UnitType:fr,TerrainType:hr,StructureType:pr,Name:mr,Combat:gr}}},components:{Selectable:yr,LocalName:xr,LocalHealth:wr,Interactable:br}}=cr;mt$2(ar,[Ye$3(fr)],()=>yr,()=>({value:!0})),mt$2(ar,[Ye$3(pr)],()=>yr,()=>({value:!0})),mt$2(ar,[Ye$3(dr)],()=>yr,()=>({value:!0})),mt$2(ar,[Ye$3(fr)],()=>br,()=>({value:!0})),mt$2(ar,[Ye$3(pr)],()=>br,()=>({value:!0})),ut$3(ar,gr,({entity:Sr,value:vr})=>{const[Er]=vr;if(!Er)return;const Ar=Er.health,_r=g$7(wr,Sr)?.value;(_r===void 0||Ar>_r)&&E$5(wr,Sr,{value:Er.health})}),ut$3(ar,mr,({entity:Sr,value:vr})=>{const[Er]=vr,Ar=Er?.value;Ar?E$5(xr,Sr,{value:Ar}):ue$2(xr,Sr)}),ut$3(ar,fr,({entity:Sr,value:vr})=>{const[Er]=vr,Ar=Er?.value;if(Ar==null)return;let _r="Unknown";UnitTypeNames[Ar]&&(_r=UnitTypeNames[Ar]),E$5(xr,Sr,{value:_r})}),ut$3(ar,pr,({entity:Sr,value:vr})=>{const[Er]=vr,Ar=Er?.value;if(Ar==null)return;let _r="Unknown";StructureTypeNames[Ar]&&(_r=StructureTypeNames[Ar]),E$5(xr,Sr,{value:_r})}),ut$3(ar,dr,({entity:Sr,value:vr})=>{const[Er]=vr,Ar=Er?.value;if(Ar==null)return;let _r="Unknown";ItemTypeNames[Ar]&&(_r=ItemTypeNames[Ar]),E$5(xr,Sr,{value:_r})}),ut$3(ar,hr,({entity:Sr,value:vr})=>{const[Er]=vr,Ar=Er?.value;if(Ar==null)return;let _r="Unknown";TerrainTypeNames[Ar]&&(_r=TerrainTypeNames[Ar]),E$5(xr,Sr,{value:_r})})}function createPathSystem(cr){const{world:ar,components:{Path:dr,LocalPosition:fr}}=cr;ut$3(ar,dr,hr=>{const pr=hr.value[0];if(!pr)return;const mr={x:pr.x[0],y:pr.y[0]},gr=from$5(pr.x).pipe(zipWith(from$5(pr.y)),concatMap(br=>{const Sr=br[0]===mr.x&&br[1]===mr.y?0:FAST_MOVE_SPEED;return of(br).pipe(delay$2(Sr))})),yr={x:lodashExports.last(pr.x),y:lodashExports.last(pr.y)},xr=gr.subscribe({next:([br,Sr])=>{if(!g$7(fr,hr.entity)){xr.unsubscribe();return}E$5(fr,hr.entity,{x:br,y:Sr}),br===yr.x&&Sr===yr.y&&setTimeout(()=>{ue$2(dr,hr.entity)},FAST_MOVE_SPEED)}}),wr=dr.update$.pipe(find(br=>br.entity===hr.entity)).subscribe(()=>{xr?.unsubscribe()});ar.registerDisposer(()=>{xr?.unsubscribe(),wr?.unsubscribe()})})}function createPositionSystem(cr){const{world:ar,parentLayers:{network:{components:{Position:dr,Movable:fr},utils:{getOwningPlayer:hr},network:{matchEntity:pr}},headless:{api:{calculateMovementPath:mr,getMoveSpeed:gr},components:{NextPosition:yr,InCurrentMatch:xr}}},components:{LocalPosition:wr,Path:br}}=cr;pr&&(at$2(ar,[Ye$3(xr),Ye$3(dr)],({entity:Sr})=>{const vr=de$2(dr,Sr);le$3(wr,Sr)||E$5(wr,Sr,{x:vr.x,y:vr.y})}),yt$2(ar,[Ye$3(dr)],({entity:Sr})=>{ue$2(yr,Sr),setTimeout(()=>{ue$2(wr,Sr)},5e3)}),pt$2(ar,[Ye$3(xr),Ye$3(dr),Ge$2(fr)],({entity:Sr})=>{const vr=g$7(dr,Sr);vr&&E$5(wr,Sr,{x:vr.x,y:vr.y})}),pt$2(ar,[Ye$3(xr),Ye$3(dr),Ye$3(fr),Ye$3(wr)],({entity:Sr,component:vr,value:Er})=>{if(vr!==dr||Er[0]===Er[1]||!gr(Sr))return;const _r=de$2(dr,Sr),Cr=g$7(br,Sr);if(Cr){const Nr={x:lodashExports.last(Cr.x)||1/0,y:lodashExports.last(Cr.y)||1/0};if(q$5(Nr,_r))return}const kr=de$2(wr,Sr);if(worldCoordEq(_r,kr)||hr(Sr)==null)return;const Ir=mr(wr,Sr,kr,_r);if(Ir.length>0){const Nr=[],Pr=[];for(const Tr of Ir)Nr.push(Tr.x),Pr.push(Tr.y);E$5(br,Sr,{x:Nr,y:Pr})}else E$5(wr,Sr,{x:_r.x,y:_r.y})}))}function createSelectionSystem(cr){const{world:ar,components:{LocalPosition:dr,Selection:fr,Selected:hr,Selectable:pr},parentLayers:{headless:{components:{InCurrentMatch:mr}}}}=cr;ut$3(ar,fr,({value:gr})=>{const yr=gr[0];if(!yr)return;if(yr.width===0||yr.height===0){for(const wr of V$4(hr))ue$2(hr,wr);return}const xr=A$6([Ye$3(pr),Je$2(dr,{x:yr.x,y:yr.y}),Ye$3(mr)]);for(const wr of xr)E$5(hr,wr,{value:!0})})}function createAttackableEntitiesSystem(cr){const{world:ar,components:{Selected:dr,AttackableEntities:fr,LocalPosition:hr,PotentialPath:pr},parentLayers:{headless:{components:{OnCooldown:mr,NextPosition:gr},api:{getAttackableEntities:yr}},network:{components:{Combat:xr,Untraversable:wr,Range:br,OwnedBy:Sr,RequiresSetup:vr},utils:{getOwningPlayer:Er}}}}=cr;_$4(ar,[Ye$3(dr),Ye$3(hr),Ye$3(xr),Ge$2(mr),Ge$2(vr)],({type:Ar,entity:_r,component:Cr,value:kr})=>{if(Ar===k$5.Update&&Cr.id===mr.id)return;if(Ar===k$5.Exit){ue$2(fr,_r);return}const[Rr,Ir]=kr;if(Cr.id===mr.id&&Rr?.value===Ir?.value)return;const Nr=g$7(pr,_r);if(!Nr)return;const Pr=g$7(hr,_r);if(!Pr)return;const Tr=[];for(let qr=0;qr<Nr.x.length;qr++){const Hr={x:Nr.x[qr],y:Nr.y[qr]},Or=[...A$6([Je$2(gr,Hr)])].length>0;!worldCoordEq(Pr,Hr)&&(Or||isUntraversable(wr,hr,Hr))||Tr.push(Hr)}const Br=new Set,Fr=Er(_r),jr=[...A$6([Ye$3(hr),Ye$3(xr),Ke$1(Sr,{value:Fr})])],Ur=g$7(br,_r);if(Ur){for(const qr of Tr)for(const Hr of jr){const Or=g$7(hr,Hr);if(!Or)continue;const Mr=manhattan(qr,Or);Mr<=Ur.max&&Mr>=Ur.min&&Br.add(Hr)}E$5(fr,_r,{value:[...Br]})}}),_$4(ar,[Ye$3(dr),Ye$3(hr),Ye$3(xr),Ye$3(vr),Ge$2(mr)],({type:Ar,entity:_r})=>{if(Ar===k$5.Exit){ue$2(fr,_r);return}const Cr=g$7(hr,_r);if(!Cr)return;const kr=yr(_r,Cr);kr&&E$5(fr,_r,{value:kr})}),_$4(ar,[Ye$3(dr),Ye$3(hr),Ye$3(gr),Ye$3(xr),Ge$2(mr),Ge$2(vr)],Ar=>{const{type:_r,entity:Cr,value:kr}=Ar;if(_r===k$5.Exit){if(X$4(Ar,gr)){const[,Ir]=kr;if(Ir&&!Ir.userCommittedToPosition)return}ue$2(fr,Cr);return}const Rr=g$7(gr,Cr);if(Rr&&Rr.userCommittedToPosition){const Ir=yr(Cr,Rr);if(!Ir)return;E$5(fr,Cr,{value:Ir})}})}function createPositionErrorFallbackSystem(cr){const{components:{LocalPosition:ar,Path:dr},parentLayers:{network:{components:{Position:fr,UnitType:hr}}}}=cr;function pr(mr,gr=!1){const yr=de$2(ar,mr),xr=de$2(fr,mr);(yr.x!==xr.x||yr.y!==xr.y)&&(console.warn(`Position error detected for entity ${mr}. Correcting...`),gr?E$5(ar,mr,{x:xr.x,y:xr.y}):setTimeout(()=>pr(mr,!0),1e3))}setInterval(()=>{for(const mr of A$6([Ye$3(hr),Ye$3(ar),Ye$3(fr),Ge$2(dr)]))pr(mr)},5e3)}function createMatchStartSystem(cr){const{parentLayers:{network:{network:{components:{MatchConfig:ar},clock:dr,matchEntity:fr}}},components:{MatchStarted:hr},world:pr}=cr;x$6(pr,dr.time$,mr=>{if(!fr)return;const gr=g$7(ar,fr)?.startTime;gr&&mr/1e3>=gr&&E$5(hr,fr,{value:!0})})}function createPotentialPathSystem(cr){const{world:ar,components:{Selected:dr,PotentialPath:fr,LocalPosition:hr,Path:pr},parentLayers:{headless:{components:{NextPosition:mr},api:{getMoveSpeed:gr,getMovementDifficulty:yr,isUntraversable:xr}},network:{utils:{getOwningPlayer:wr}}}}=cr;_$4(ar,[Ye$3(dr),Ye$3(hr),Ge$2(pr),Ge$2(mr)],({type:br,entity:Sr})=>{if(br===k$5.Exit)ue$2(fr,Sr);else if([k$5.Enter,k$5.Update].includes(br)){const vr=gr(Sr);if(!vr)return;const Er=g$7(hr,Sr);if(!Er)return;const Ar=wr(Sr)??"0",_r=[],Cr=[],[kr,Rr]=BFS(Er,vr,lodashExports.curry(yr)(hr),lodashExports.curry(xr)(hr,Ar));for(const Nr of kr)_r.push(Nr.x),Cr.push(Nr.y);E$5(fr,Sr,{x:_r,y:Cr,costs:Rr})}})}const useAmalgema=()=>{const{networkLayer:cr,externalWalletClient:ar,externalWorldContract:dr,writes:fr}=useStore();if(cr===null)throw new Error("Network layer not initialized");return{...cr,externalWalletClient:ar,externalWorldContract:dr,writes:fr}};function twJoin(){for(var cr=0,ar,dr,fr="";cr<arguments.length;)(ar=arguments[cr++])&&(dr=toValue(ar))&&(fr&&(fr+=" "),fr+=dr);return fr}function toValue(cr){if(typeof cr=="string")return cr;for(var ar,dr="",fr=0;fr<cr.length;fr++)cr[fr]&&(ar=toValue(cr[fr]))&&(dr&&(dr+=" "),dr+=ar);return dr}var CLASS_PART_SEPARATOR="-";function createClassUtils(cr){var ar=createClassMap(cr),dr=cr.conflictingClassGroups,fr=cr.conflictingClassGroupModifiers,hr=fr===void 0?{}:fr;function pr(gr){var yr=gr.split(CLASS_PART_SEPARATOR);return yr[0]===""&&yr.length!==1&&yr.shift(),getGroupRecursive(yr,ar)||getGroupIdForArbitraryProperty(gr)}function mr(gr,yr){var xr=dr[gr]||[];return yr&&hr[gr]?[].concat(xr,hr[gr]):xr}return{getClassGroupId:pr,getConflictingClassGroupIds:mr}}function getGroupRecursive(cr,ar){if(cr.length===0)return ar.classGroupId;var dr=cr[0],fr=ar.nextPart.get(dr),hr=fr?getGroupRecursive(cr.slice(1),fr):void 0;if(hr)return hr;if(ar.validators.length!==0){var pr=cr.join(CLASS_PART_SEPARATOR);return ar.validators.find(function(mr){var gr=mr.validator;return gr(pr)})?.classGroupId}}var arbitraryPropertyRegex=/^\[(.+)\]$/;function getGroupIdForArbitraryProperty(cr){if(arbitraryPropertyRegex.test(cr)){var ar=arbitraryPropertyRegex.exec(cr)[1],dr=ar?.substring(0,ar.indexOf(":"));if(dr)return"arbitrary.."+dr}}function createClassMap(cr){var ar=cr.theme,dr=cr.prefix,fr={nextPart:new Map,validators:[]},hr=getPrefixedClassGroupEntries(Object.entries(cr.classGroups),dr);return hr.forEach(function(pr){var mr=pr[0],gr=pr[1];processClassesRecursively(gr,fr,mr,ar)}),fr}function processClassesRecursively(cr,ar,dr,fr){cr.forEach(function(hr){if(typeof hr=="string"){var pr=hr===""?ar:getPart(ar,hr);pr.classGroupId=dr;return}if(typeof hr=="function"){if(isThemeGetter(hr)){processClassesRecursively(hr(fr),ar,dr,fr);return}ar.validators.push({validator:hr,classGroupId:dr});return}Object.entries(hr).forEach(function(mr){var gr=mr[0],yr=mr[1];processClassesRecursively(yr,getPart(ar,gr),dr,fr)})})}function getPart(cr,ar){var dr=cr;return ar.split(CLASS_PART_SEPARATOR).forEach(function(fr){dr.nextPart.has(fr)||dr.nextPart.set(fr,{nextPart:new Map,validators:[]}),dr=dr.nextPart.get(fr)}),dr}function isThemeGetter(cr){return cr.isThemeGetter}function getPrefixedClassGroupEntries(cr,ar){return ar?cr.map(function(dr){var fr=dr[0],hr=dr[1],pr=hr.map(function(mr){return typeof mr=="string"?ar+mr:typeof mr=="object"?Object.fromEntries(Object.entries(mr).map(function(gr){var yr=gr[0],xr=gr[1];return[ar+yr,xr]})):mr});return[fr,pr]}):cr}function createLruCache(cr){if(cr<1)return{get:function(){},set:function(){}};var ar=0,dr=new Map,fr=new Map;function hr(pr,mr){dr.set(pr,mr),ar++,ar>cr&&(ar=0,fr=dr,dr=new Map)}return{get:function(mr){var gr=dr.get(mr);if(gr!==void 0)return gr;if((gr=fr.get(mr))!==void 0)return hr(mr,gr),gr},set:function(mr,gr){dr.has(mr)?dr.set(mr,gr):hr(mr,gr)}}}var IMPORTANT_MODIFIER="!";function createSplitModifiers(cr){var ar=cr.separator||":",dr=ar.length===1,fr=ar[0],hr=ar.length;return function(mr){for(var gr=[],yr=0,xr=0,wr,br=0;br<mr.length;br++){var Sr=mr[br];if(yr===0){if(Sr===fr&&(dr||mr.slice(br,br+hr)===ar)){gr.push(mr.slice(xr,br)),xr=br+hr;continue}if(Sr==="/"){wr=br;continue}}Sr==="["?yr++:Sr==="]"&&yr--}var vr=gr.length===0?mr:mr.substring(xr),Er=vr.startsWith(IMPORTANT_MODIFIER),Ar=Er?vr.substring(1):vr,_r=wr&&wr>xr?wr-xr:void 0;return{modifiers:gr,hasImportantModifier:Er,baseClassName:Ar,maybePostfixModifierPosition:_r}}}function sortModifiers(cr){if(cr.length<=1)return cr;var ar=[],dr=[];return cr.forEach(function(fr){var hr=fr[0]==="[";hr?(ar.push.apply(ar,dr.sort().concat([fr])),dr=[]):dr.push(fr)}),ar.push.apply(ar,dr.sort()),ar}function createConfigUtils(cr){return{cache:createLruCache(cr.cacheSize),splitModifiers:createSplitModifiers(cr),...createClassUtils(cr)}}var SPLIT_CLASSES_REGEX=/\s+/;function mergeClassList(cr,ar){var dr=ar.splitModifiers,fr=ar.getClassGroupId,hr=ar.getConflictingClassGroupIds,pr=new Set;return cr.trim().split(SPLIT_CLASSES_REGEX).map(function(mr){var gr=dr(mr),yr=gr.modifiers,xr=gr.hasImportantModifier,wr=gr.baseClassName,br=gr.maybePostfixModifierPosition,Sr=fr(br?wr.substring(0,br):wr),vr=!!br;if(!Sr){if(!br)return{isTailwindClass:!1,originalClassName:mr};if(Sr=fr(wr),!Sr)return{isTailwindClass:!1,originalClassName:mr};vr=!1}var Er=sortModifiers(yr).join(":"),Ar=xr?Er+IMPORTANT_MODIFIER:Er;return{isTailwindClass:!0,modifierId:Ar,classGroupId:Sr,originalClassName:mr,hasPostfixModifier:vr}}).reverse().filter(function(mr){if(!mr.isTailwindClass)return!0;var gr=mr.modifierId,yr=mr.classGroupId,xr=mr.hasPostfixModifier,wr=gr+yr;return pr.has(wr)?!1:(pr.add(wr),hr(yr,xr).forEach(function(br){return pr.add(gr+br)}),!0)}).reverse().map(function(mr){return mr.originalClassName}).join(" ")}function createTailwindMerge(){for(var cr=arguments.length,ar=new Array(cr),dr=0;dr<cr;dr++)ar[dr]=arguments[dr];var fr,hr,pr,mr=gr;function gr(xr){var wr=ar[0],br=ar.slice(1),Sr=br.reduce(function(vr,Er){return Er(vr)},wr());return fr=createConfigUtils(Sr),hr=fr.cache.get,pr=fr.cache.set,mr=yr,yr(xr)}function yr(xr){var wr=hr(xr);if(wr)return wr;var br=mergeClassList(xr,fr);return pr(xr,br),br}return function(){return mr(twJoin.apply(null,arguments))}}function fromTheme(cr){var ar=function(fr){return fr[cr]||[]};return ar.isThemeGetter=!0,ar}var arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,shadowRegex=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function isLength(cr){return isNumber(cr)||stringLengths.has(cr)||fractionRegex.test(cr)||isArbitraryLength(cr)}function isArbitraryLength(cr){return getIsArbitraryValue(cr,"length",isLengthOnly)}function isArbitrarySize(cr){return getIsArbitraryValue(cr,"size",isNever)}function isArbitraryPosition(cr){return getIsArbitraryValue(cr,"position",isNever)}function isArbitraryUrl(cr){return getIsArbitraryValue(cr,"url",isUrl)}function isArbitraryNumber(cr){return getIsArbitraryValue(cr,"number",isNumber)}function isNumber(cr){return!Number.isNaN(Number(cr))}function isPercent(cr){return cr.endsWith("%")&&isNumber(cr.slice(0,-1))}function isInteger(cr){return isIntegerOnly(cr)||getIsArbitraryValue(cr,"number",isIntegerOnly)}function isArbitraryValue(cr){return arbitraryValueRegex.test(cr)}function isAny(){return!0}function isTshirtSize(cr){return tshirtUnitRegex.test(cr)}function isArbitraryShadow(cr){return getIsArbitraryValue(cr,"",isShadow)}function getIsArbitraryValue(cr,ar,dr){var fr=arbitraryValueRegex.exec(cr);return fr?fr[1]?fr[1]===ar:dr(fr[2]):!1}function isLengthOnly(cr){return lengthUnitRegex.test(cr)}function isNever(){return!1}function isUrl(cr){return cr.startsWith("url(")}function isIntegerOnly(cr){return Number.isInteger(Number(cr))}function isShadow(cr){return shadowRegex.test(cr)}function getDefaultConfig(){var cr=fromTheme("colors"),ar=fromTheme("spacing"),dr=fromTheme("blur"),fr=fromTheme("brightness"),hr=fromTheme("borderColor"),pr=fromTheme("borderRadius"),mr=fromTheme("borderSpacing"),gr=fromTheme("borderWidth"),yr=fromTheme("contrast"),xr=fromTheme("grayscale"),wr=fromTheme("hueRotate"),br=fromTheme("invert"),Sr=fromTheme("gap"),vr=fromTheme("gradientColorStops"),Er=fromTheme("gradientColorStopPositions"),Ar=fromTheme("inset"),_r=fromTheme("margin"),Cr=fromTheme("opacity"),kr=fromTheme("padding"),Rr=fromTheme("saturate"),Ir=fromTheme("scale"),Nr=fromTheme("sepia"),Pr=fromTheme("skew"),Tr=fromTheme("space"),Br=fromTheme("translate"),Fr=function(){return["auto","contain","none"]},jr=function(){return["auto","hidden","clip","visible","scroll"]},Ur=function(){return["auto",isArbitraryValue,ar]},qr=function(){return[isArbitraryValue,ar]},Hr=function(){return["",isLength]},Or=function(){return["auto",isNumber,isArbitraryValue]},Mr=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},Lr=function(){return["solid","dashed","dotted","double","none"]},Vr=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},Jr=function(){return["start","end","center","between","around","evenly","stretch"]},es=function(){return["","0",isArbitraryValue]},ns=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},Qr=function(){return[isNumber,isArbitraryNumber]},zr=function(){return[isNumber,isArbitraryValue]};return{cacheSize:500,theme:{colors:[isAny],spacing:[isLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:Qr(),borderColor:[cr],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:qr(),borderWidth:Hr(),contrast:Qr(),grayscale:es(),hueRotate:zr(),invert:es(),gap:qr(),gradientColorStops:[cr],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:Ur(),margin:Ur(),opacity:Qr(),padding:qr(),saturate:Qr(),scale:Qr(),sepia:es(),skew:zr(),space:qr(),translate:qr()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":ns()}],"break-before":[{"break-before":ns()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(Mr(),[isArbitraryValue])}],overflow:[{overflow:jr()}],"overflow-x":[{"overflow-x":jr()}],"overflow-y":[{"overflow-y":jr()}],overscroll:[{overscroll:Fr()}],"overscroll-x":[{"overscroll-x":Fr()}],"overscroll-y":[{"overscroll-y":Fr()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[Ar]}],"inset-x":[{"inset-x":[Ar]}],"inset-y":[{"inset-y":[Ar]}],start:[{start:[Ar]}],end:[{end:[Ar]}],top:[{top:[Ar]}],right:[{right:[Ar]}],bottom:[{bottom:[Ar]}],left:[{left:[Ar]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger]}],basis:[{basis:Ur()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:es()}],shrink:[{shrink:es()}],order:[{order:["first","last","none",isInteger]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger]},isArbitraryValue]}],"col-start":[{"col-start":Or()}],"col-end":[{"col-end":Or()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger]},isArbitraryValue]}],"row-start":[{"row-start":Or()}],"row-end":[{"row-end":Or()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[Sr]}],"gap-x":[{"gap-x":[Sr]}],"gap-y":[{"gap-y":[Sr]}],"justify-content":[{justify:["normal"].concat(Jr())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(Jr(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(Jr(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[kr]}],px:[{px:[kr]}],py:[{py:[kr]}],ps:[{ps:[kr]}],pe:[{pe:[kr]}],pt:[{pt:[kr]}],pr:[{pr:[kr]}],pb:[{pb:[kr]}],pl:[{pl:[kr]}],m:[{m:[_r]}],mx:[{mx:[_r]}],my:[{my:[_r]}],ms:[{ms:[_r]}],me:[{me:[_r]}],mt:[{mt:[_r]}],mr:[{mr:[_r]}],mb:[{mb:[_r]}],ml:[{ml:[_r]}],"space-x":[{"space-x":[Tr]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Tr]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",isArbitraryValue,ar]}],"min-w":[{"min-w":["min","max","fit",isArbitraryValue,isLength]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize,isArbitraryValue]}],h:[{h:[isArbitraryValue,ar,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",isArbitraryValue,isLength]}],"max-h":[{"max-h":[isArbitraryValue,ar,"min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isArbitraryValue,isLength]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[cr]}],"placeholder-opacity":[{"placeholder-opacity":[Cr]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[cr]}],"text-opacity":[{"text-opacity":[Cr]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(Lr(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength]}],"underline-offset":[{"underline-offset":["auto",isArbitraryValue,isLength]}],"text-decoration-color":[{decoration:[cr]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:qr()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Cr]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(Mr(),[isArbitraryPosition])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryUrl]}],"bg-color":[{bg:[cr]}],"gradient-from-pos":[{from:[Er]}],"gradient-via-pos":[{via:[Er]}],"gradient-to-pos":[{to:[Er]}],"gradient-from":[{from:[vr]}],"gradient-via":[{via:[vr]}],"gradient-to":[{to:[vr]}],rounded:[{rounded:[pr]}],"rounded-s":[{"rounded-s":[pr]}],"rounded-e":[{"rounded-e":[pr]}],"rounded-t":[{"rounded-t":[pr]}],"rounded-r":[{"rounded-r":[pr]}],"rounded-b":[{"rounded-b":[pr]}],"rounded-l":[{"rounded-l":[pr]}],"rounded-ss":[{"rounded-ss":[pr]}],"rounded-se":[{"rounded-se":[pr]}],"rounded-ee":[{"rounded-ee":[pr]}],"rounded-es":[{"rounded-es":[pr]}],"rounded-tl":[{"rounded-tl":[pr]}],"rounded-tr":[{"rounded-tr":[pr]}],"rounded-br":[{"rounded-br":[pr]}],"rounded-bl":[{"rounded-bl":[pr]}],"border-w":[{border:[gr]}],"border-w-x":[{"border-x":[gr]}],"border-w-y":[{"border-y":[gr]}],"border-w-s":[{"border-s":[gr]}],"border-w-e":[{"border-e":[gr]}],"border-w-t":[{"border-t":[gr]}],"border-w-r":[{"border-r":[gr]}],"border-w-b":[{"border-b":[gr]}],"border-w-l":[{"border-l":[gr]}],"border-opacity":[{"border-opacity":[Cr]}],"border-style":[{border:[].concat(Lr(),["hidden"])}],"divide-x":[{"divide-x":[gr]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[gr]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Cr]}],"divide-style":[{divide:Lr()}],"border-color":[{border:[hr]}],"border-color-x":[{"border-x":[hr]}],"border-color-y":[{"border-y":[hr]}],"border-color-t":[{"border-t":[hr]}],"border-color-r":[{"border-r":[hr]}],"border-color-b":[{"border-b":[hr]}],"border-color-l":[{"border-l":[hr]}],"divide-color":[{divide:[hr]}],"outline-style":[{outline:[""].concat(Lr())}],"outline-offset":[{"outline-offset":[isArbitraryValue,isLength]}],"outline-w":[{outline:[isLength]}],"outline-color":[{outline:[cr]}],"ring-w":[{ring:Hr()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[cr]}],"ring-opacity":[{"ring-opacity":[Cr]}],"ring-offset-w":[{"ring-offset":[isLength]}],"ring-offset-color":[{"ring-offset":[cr]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[Cr]}],"mix-blend":[{"mix-blend":Vr()}],"bg-blend":[{"bg-blend":Vr()}],filter:[{filter:["","none"]}],blur:[{blur:[dr]}],brightness:[{brightness:[fr]}],contrast:[{contrast:[yr]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[xr]}],"hue-rotate":[{"hue-rotate":[wr]}],invert:[{invert:[br]}],saturate:[{saturate:[Rr]}],sepia:[{sepia:[Nr]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[dr]}],"backdrop-brightness":[{"backdrop-brightness":[fr]}],"backdrop-contrast":[{"backdrop-contrast":[yr]}],"backdrop-grayscale":[{"backdrop-grayscale":[xr]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[wr]}],"backdrop-invert":[{"backdrop-invert":[br]}],"backdrop-opacity":[{"backdrop-opacity":[Cr]}],"backdrop-saturate":[{"backdrop-saturate":[Rr]}],"backdrop-sepia":[{"backdrop-sepia":[Nr]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[mr]}],"border-spacing-x":[{"border-spacing-x":[mr]}],"border-spacing-y":[{"border-spacing-y":[mr]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:zr()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:zr()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[Ir]}],"scale-x":[{"scale-x":[Ir]}],"scale-y":[{"scale-y":[Ir]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[Br]}],"translate-y":[{"translate-y":[Br]}],"skew-x":[{"skew-x":[Pr]}],"skew-y":[{"skew-y":[Pr]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",cr]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[cr]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":qr()}],"scroll-mx":[{"scroll-mx":qr()}],"scroll-my":[{"scroll-my":qr()}],"scroll-ms":[{"scroll-ms":qr()}],"scroll-me":[{"scroll-me":qr()}],"scroll-mt":[{"scroll-mt":qr()}],"scroll-mr":[{"scroll-mr":qr()}],"scroll-mb":[{"scroll-mb":qr()}],"scroll-ml":[{"scroll-ml":qr()}],"scroll-p":[{"scroll-p":qr()}],"scroll-px":[{"scroll-px":qr()}],"scroll-py":[{"scroll-py":qr()}],"scroll-ps":[{"scroll-ps":qr()}],"scroll-pe":[{"scroll-pe":qr()}],"scroll-pt":[{"scroll-pt":qr()}],"scroll-pr":[{"scroll-pr":qr()}],"scroll-pb":[{"scroll-pb":qr()}],"scroll-pl":[{"scroll-pl":qr()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[cr,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryNumber]}],stroke:[{stroke:[cr,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var twMerge=createTailwindMerge(getDefaultConfig);function Card(cr){const{className:ar,children:dr,primary:fr,style:hr,ref:pr}=cr;return jsxRuntimeExports.jsx("div",{ref:pr,className:twMerge("w-full",fr?"bg-ss-bg-1":"bg-ss-bg-0","rounded","px-6 py-4","border border-ss-stroke","shadow-ss-default",ar),style:hr,children:dr})}const Button$1=React.forwardRef(({type:cr,className:ar,buttonType:dr,disabled:fr,children:hr,size:pr,style:mr,...gr},yr)=>(pr||(pr="md"),jsxRuntimeExports.jsx("button",{ref:yr,type:cr||"button",disabled:fr,style:{lineHeight:"24px",letterSpacing:"1px",...mr},className:twMerge("group transition enabled:active:translate-y-0.5 rounded text-ss-text-default","disabled:grayscale-[60%] disabled:cursor-not-allowed disabled:aria-busy:cursor-wait","uppercase",pr==="lg"&&"px-6 py-3 text-base font-medium rounded-sm",pr==="md"&&"px-4 py-2 text-sm font-medium rounded-sm",dr==="primary"&&"bg-ss-blue hover:bg-ss-blue-hover disabled:hover:bg-ss-blue disabled:text-ss-text-x-light shadow-ss-default disabled:shadow-ss-default active:shadow-ss-active",dr==="secondary"&&"bg-ss-gold hover:bg-ss-gold-hover disabled:hover:bg-ss-gold disabled:text-ss-text-x-light shadow-ss-small disabled:shadow-ss-small active:shadow-ss-small-active",dr==="tertiary"&&"text-ss-text-light outline bg-ss-bg-0 hover:bg-white disabled:hover:bg-ss-bg-0 disabled:text-ss-text-x-light outline-ss-stroke  hover:text-ss-text-default",dr==="danger"&&"bg-ss-bg-0 disabled:hover:bg-ss-bg-0 hover:bg-white outline outline-red-600 text-red-600 disabled:text-red-900 disabled:outline-red-900",ar),...gr,children:jsxRuntimeExports.jsx("span",{className:"inline-grid pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("span",{className:"row-start-1 col-start-1 transition opacity-100 translate-y-0 group-[[aria-busy=true]]:-translate-y-3 group-[[aria-busy=true]]:opacity-0",children:hr})})})));Button$1.displayName="Button";const baseStyle={lineHeight:"24px",fontWeight:400};function OverlineLarge(cr){const{className:ar,children:dr,style:fr}=cr;return jsxRuntimeExports.jsx("div",{style:{fontSize:"18px",letterSpacing:"1px",...baseStyle,fontWeight:500,...fr},className:twMerge("text-ss-text-default uppercase",ar),children:dr})}function OverlineSmall(cr){const{className:ar,children:dr}=cr;return jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",letterSpacing:"1px",...baseStyle,fontWeight:400,lineHeight:"32px"},className:twMerge("text-ss-text-light uppercase",ar),children:dr})}function Heading(cr){const{className:ar,style:dr,children:fr}=cr;return jsxRuntimeExports.jsx("div",{style:{fontSize:"18px",...baseStyle,fontWeight:500,...dr},className:twMerge("text-ss-text-default",ar),children:fr})}function Body(cr){const{className:ar,children:dr,style:fr}=cr;return jsxRuntimeExports.jsx("div",{style:{fontSize:"16px",...baseStyle,...fr},className:twMerge("text-ss-text-x-light",ar),children:dr})}function Caption(cr){const{className:ar,children:dr}=cr;return jsxRuntimeExports.jsx("div",{style:{fontSize:"14px",...baseStyle},className:twMerge("text-ss-text-x-light",ar),children:dr})}function Link(cr){const{className:ar,children:dr,href:fr,style:hr}=cr;return jsxRuntimeExports.jsx("a",{href:fr,target:"_blank",style:{fontSize:"14px",...baseStyle,...hr},className:twMerge("text-ss-text-link","hover:text-ss-text-link-hover hover:underline",ar),rel:"noreferrer",children:dr})}const index$1="";function useOnClickOutside(cr,ar){reactExports.useEffect(()=>{const dr=fr=>{cr.current&&!cr.current.contains(fr.target)&&ar(fr)};return document.addEventListener("mousedown",dr),document.addEventListener("touchstart",dr),()=>{document.removeEventListener("mousedown",dr),document.removeEventListener("touchstart",dr)}},[cr,ar])}var t$3=debug("mud:faucet"),s$2=debug("mud:faucet");t$3.log=console.debug.bind(console);s$2.log=console.error.bind(console);function n$2({url:cr}){return createTRPCProxyClient({links:[httpBatchLink({url:cr})]})}const MINIMUM_BALANCE=parseEther("0.01"),DRIP_INTERVAL=2e4;function drip(cr,ar,dr){console.info("[Dev Faucet]: Player address -> ",cr);try{console.log("creating faucet client");const fr=n$2({url:ar}),hr=async()=>{const pr=await dr.getBalance({address:cr});if(console.info(`[Dev Faucet]: Player balance -> ${pr}`),pr<MINIMUM_BALANCE){console.log("dripping");const mr=await fr.drip.mutate({address:cr});console.log("got drip",mr)}};hr(),setInterval(hr,DRIP_INTERVAL)}catch(fr){console.error(fr)}}function useExternalAccount$1(){const{externalWalletClient:cr}=useAmalgema();if(cr&&cr.account){const{address:ar}=cr.account;return{address:ar}}return{address:void 0}}function useDrip(){const{network:{publicClient:cr,networkConfig:{faucetServiceUrl:ar}}}=useAmalgema(),{address:dr}=useExternalAccount$1();reactExports.useEffect(()=>{dr&&ar&&drip(dr,ar,cr)},[dr,ar,cr])}function NetworkStatus(){const{network:{publicClient:cr}}=useAmalgema(),{chain:ar}=useNetwork(),{openChainModal:dr}=useChainModal();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",onClick:dr,className:"h-[32px] flex justify-center items-center border-1 rounded-2xl ml-8",children:ar?ar.id===cr.chain.id?jsxRuntimeExports.jsxs("div",{className:"flex flex-row justify-center items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-md m-1"}),jsxRuntimeExports.jsx(Caption,{children:cr.chain.name})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-row justify-center items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-md m-1"}),jsxRuntimeExports.jsx(Caption,{children:"Wrong network"})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-row justify-center items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-md m-1"}),jsxRuntimeExports.jsx(Caption,{children:"Not connected"})]})})})}const inMemoryData=new Map;function useLocalStorageState(cr,ar){if(reactExports.useSyncExternalStore===void 0)throw new TypeError('You are using React 17 or below. Install with "npm install use-local-storage-state@17".');const[dr]=reactExports.useState(ar?.defaultValue);if(typeof window>"u")return[dr,()=>{},{isPersistent:!0,removeItem:()=>{}}];const fr=ar?.serializer;return useBrowserLocalStorageState(cr,dr,ar?.storageSync,fr?.parse,fr?.stringify)}function useBrowserLocalStorageState(cr,ar,dr=!0,fr=parseJSON,hr=JSON.stringify){!inMemoryData.has(cr)&&ar!==void 0&&goodTry(()=>localStorage.getItem(cr))===null&&goodTry(()=>localStorage.setItem(cr,hr(ar)));const pr=reactExports.useRef({item:null,parsed:ar}),mr=reactExports.useSyncExternalStore(reactExports.useCallback(yr=>{const xr=wr=>{cr===wr&&yr()};return callbacks.add(xr),()=>{callbacks.delete(xr)}},[cr]),()=>{var yr;const xr=(yr=goodTry(()=>localStorage.getItem(cr)))!==null&&yr!==void 0?yr:null;if(inMemoryData.has(cr))pr.current={item:xr,parsed:inMemoryData.get(cr)};else if(xr!==pr.current.item){let wr;try{wr=xr===null?ar:fr(xr)}catch{wr=ar}pr.current={item:xr,parsed:wr}}return pr.current.parsed},()=>ar),gr=reactExports.useCallback(yr=>{const xr=yr instanceof Function?yr(pr.current.parsed):yr;try{localStorage.setItem(cr,hr(xr)),inMemoryData.delete(cr)}catch{inMemoryData.set(cr,xr)}triggerCallbacks(cr)},[cr,hr]);return reactExports.useEffect(()=>{if(!dr)return;const yr=xr=>{xr.storageArea===goodTry(()=>localStorage)&&xr.key===cr&&triggerCallbacks(cr)};return window.addEventListener("storage",yr),()=>window.removeEventListener("storage",yr)},[cr,dr]),reactExports.useMemo(()=>[mr,gr,{isPersistent:mr===ar||!inMemoryData.has(cr),removeItem(){goodTry(()=>localStorage.removeItem(cr)),inMemoryData.delete(cr),triggerCallbacks(cr)}}],[cr,gr,mr,ar])}const callbacks=new Set;function triggerCallbacks(cr){for(const ar of[...callbacks])ar(cr)}function parseJSON(cr){return cr==="undefined"?void 0:JSON.parse(cr)}function goodTry(cr){try{return cr()}catch{return}}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=cr=>({x:cr,y:cr}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(cr,ar,dr){return max(cr,min(ar,dr))}function evaluate(cr,ar){return typeof cr=="function"?cr(ar):cr}function getSide(cr){return cr.split("-")[0]}function getAlignment(cr){return cr.split("-")[1]}function getOppositeAxis(cr){return cr==="x"?"y":"x"}function getAxisLength(cr){return cr==="y"?"height":"width"}function getSideAxis(cr){return["top","bottom"].includes(getSide(cr))?"y":"x"}function getAlignmentAxis(cr){return getOppositeAxis(getSideAxis(cr))}function getAlignmentSides(cr,ar,dr){dr===void 0&&(dr=!1);const fr=getAlignment(cr),hr=getAlignmentAxis(cr),pr=getAxisLength(hr);let mr=hr==="x"?fr===(dr?"end":"start")?"right":"left":fr==="start"?"bottom":"top";return ar.reference[pr]>ar.floating[pr]&&(mr=getOppositePlacement(mr)),[mr,getOppositePlacement(mr)]}function getExpandedPlacements(cr){const ar=getOppositePlacement(cr);return[getOppositeAlignmentPlacement(cr),ar,getOppositeAlignmentPlacement(ar)]}function getOppositeAlignmentPlacement(cr){return cr.replace(/start|end/g,ar=>oppositeAlignmentMap[ar])}function getSideList(cr,ar,dr){const fr=["left","right"],hr=["right","left"],pr=["top","bottom"],mr=["bottom","top"];switch(cr){case"top":case"bottom":return dr?ar?hr:fr:ar?fr:hr;case"left":case"right":return ar?pr:mr;default:return[]}}function getOppositeAxisPlacements(cr,ar,dr,fr){const hr=getAlignment(cr);let pr=getSideList(getSide(cr),dr==="start",fr);return hr&&(pr=pr.map(mr=>mr+"-"+hr),ar&&(pr=pr.concat(pr.map(getOppositeAlignmentPlacement)))),pr}function getOppositePlacement(cr){return cr.replace(/left|right|bottom|top/g,ar=>oppositeSideMap[ar])}function expandPaddingObject(cr){return{top:0,right:0,bottom:0,left:0,...cr}}function getPaddingObject(cr){return typeof cr!="number"?expandPaddingObject(cr):{top:cr,right:cr,bottom:cr,left:cr}}function rectToClientRect(cr){return{...cr,top:cr.y,left:cr.x,right:cr.x+cr.width,bottom:cr.y+cr.height}}function computeCoordsFromPlacement(cr,ar,dr){let{reference:fr,floating:hr}=cr;const pr=getSideAxis(ar),mr=getAlignmentAxis(ar),gr=getAxisLength(mr),yr=getSide(ar),xr=pr==="y",wr=fr.x+fr.width/2-hr.width/2,br=fr.y+fr.height/2-hr.height/2,Sr=fr[gr]/2-hr[gr]/2;let vr;switch(yr){case"top":vr={x:wr,y:fr.y-hr.height};break;case"bottom":vr={x:wr,y:fr.y+fr.height};break;case"right":vr={x:fr.x+fr.width,y:br};break;case"left":vr={x:fr.x-hr.width,y:br};break;default:vr={x:fr.x,y:fr.y}}switch(getAlignment(ar)){case"start":vr[mr]-=Sr*(dr&&xr?-1:1);break;case"end":vr[mr]+=Sr*(dr&&xr?-1:1);break}return vr}const computePosition$1=async(cr,ar,dr)=>{const{placement:fr="bottom",strategy:hr="absolute",middleware:pr=[],platform:mr}=dr,gr=pr.filter(Boolean),yr=await(mr.isRTL==null?void 0:mr.isRTL(ar));let xr=await mr.getElementRects({reference:cr,floating:ar,strategy:hr}),{x:wr,y:br}=computeCoordsFromPlacement(xr,fr,yr),Sr=fr,vr={},Er=0;for(let Ar=0;Ar<gr.length;Ar++){const{name:_r,fn:Cr}=gr[Ar],{x:kr,y:Rr,data:Ir,reset:Nr}=await Cr({x:wr,y:br,initialPlacement:fr,placement:Sr,strategy:hr,middlewareData:vr,rects:xr,platform:mr,elements:{reference:cr,floating:ar}});if(wr=kr??wr,br=Rr??br,vr={...vr,[_r]:{...vr[_r],...Ir}},Nr&&Er<=50){Er++,typeof Nr=="object"&&(Nr.placement&&(Sr=Nr.placement),Nr.rects&&(xr=Nr.rects===!0?await mr.getElementRects({reference:cr,floating:ar,strategy:hr}):Nr.rects),{x:wr,y:br}=computeCoordsFromPlacement(xr,Sr,yr)),Ar=-1;continue}}return{x:wr,y:br,placement:Sr,strategy:hr,middlewareData:vr}};async function detectOverflow(cr,ar){var dr;ar===void 0&&(ar={});const{x:fr,y:hr,platform:pr,rects:mr,elements:gr,strategy:yr}=cr,{boundary:xr="clippingAncestors",rootBoundary:wr="viewport",elementContext:br="floating",altBoundary:Sr=!1,padding:vr=0}=evaluate(ar,cr),Er=getPaddingObject(vr),_r=gr[Sr?br==="floating"?"reference":"floating":br],Cr=rectToClientRect(await pr.getClippingRect({element:(dr=await(pr.isElement==null?void 0:pr.isElement(_r)))==null||dr?_r:_r.contextElement||await(pr.getDocumentElement==null?void 0:pr.getDocumentElement(gr.floating)),boundary:xr,rootBoundary:wr,strategy:yr})),kr=br==="floating"?{...mr.floating,x:fr,y:hr}:mr.reference,Rr=await(pr.getOffsetParent==null?void 0:pr.getOffsetParent(gr.floating)),Ir=await(pr.isElement==null?void 0:pr.isElement(Rr))?await(pr.getScale==null?void 0:pr.getScale(Rr))||{x:1,y:1}:{x:1,y:1},Nr=rectToClientRect(pr.convertOffsetParentRelativeRectToViewportRelativeRect?await pr.convertOffsetParentRelativeRectToViewportRelativeRect({rect:kr,offsetParent:Rr,strategy:yr}):kr);return{top:(Cr.top-Nr.top+Er.top)/Ir.y,bottom:(Nr.bottom-Cr.bottom+Er.bottom)/Ir.y,left:(Cr.left-Nr.left+Er.left)/Ir.x,right:(Nr.right-Cr.right+Er.right)/Ir.x}}const arrow$1=cr=>({name:"arrow",options:cr,async fn(ar){const{x:dr,y:fr,placement:hr,rects:pr,platform:mr,elements:gr,middlewareData:yr}=ar,{element:xr,padding:wr=0}=evaluate(cr,ar)||{};if(xr==null)return{};const br=getPaddingObject(wr),Sr={x:dr,y:fr},vr=getAlignmentAxis(hr),Er=getAxisLength(vr),Ar=await mr.getDimensions(xr),_r=vr==="y",Cr=_r?"top":"left",kr=_r?"bottom":"right",Rr=_r?"clientHeight":"clientWidth",Ir=pr.reference[Er]+pr.reference[vr]-Sr[vr]-pr.floating[Er],Nr=Sr[vr]-pr.reference[vr],Pr=await(mr.getOffsetParent==null?void 0:mr.getOffsetParent(xr));let Tr=Pr?Pr[Rr]:0;(!Tr||!await(mr.isElement==null?void 0:mr.isElement(Pr)))&&(Tr=gr.floating[Rr]||pr.floating[Er]);const Br=Ir/2-Nr/2,Fr=Tr/2-Ar[Er]/2-1,jr=min(br[Cr],Fr),Ur=min(br[kr],Fr),qr=jr,Hr=Tr-Ar[Er]-Ur,Or=Tr/2-Ar[Er]/2+Br,Mr=clamp$1(qr,Or,Hr),Lr=!yr.arrow&&getAlignment(hr)!=null&&Or!=Mr&&pr.reference[Er]/2-(Or<qr?jr:Ur)-Ar[Er]/2<0,Vr=Lr?Or<qr?Or-qr:Or-Hr:0;return{[vr]:Sr[vr]+Vr,data:{[vr]:Mr,centerOffset:Or-Mr-Vr,...Lr&&{alignmentOffset:Vr}},reset:Lr}}}),flip=function(cr){return cr===void 0&&(cr={}),{name:"flip",options:cr,async fn(ar){var dr,fr;const{placement:hr,middlewareData:pr,rects:mr,initialPlacement:gr,platform:yr,elements:xr}=ar,{mainAxis:wr=!0,crossAxis:br=!0,fallbackPlacements:Sr,fallbackStrategy:vr="bestFit",fallbackAxisSideDirection:Er="none",flipAlignment:Ar=!0,..._r}=evaluate(cr,ar);if((dr=pr.arrow)!=null&&dr.alignmentOffset)return{};const Cr=getSide(hr),kr=getSide(gr)===gr,Rr=await(yr.isRTL==null?void 0:yr.isRTL(xr.floating)),Ir=Sr||(kr||!Ar?[getOppositePlacement(gr)]:getExpandedPlacements(gr));!Sr&&Er!=="none"&&Ir.push(...getOppositeAxisPlacements(gr,Ar,Er,Rr));const Nr=[gr,...Ir],Pr=await detectOverflow(ar,_r),Tr=[];let Br=((fr=pr.flip)==null?void 0:fr.overflows)||[];if(wr&&Tr.push(Pr[Cr]),br){const qr=getAlignmentSides(hr,mr,Rr);Tr.push(Pr[qr[0]],Pr[qr[1]])}if(Br=[...Br,{placement:hr,overflows:Tr}],!Tr.every(qr=>qr<=0)){var Fr,jr;const qr=(((Fr=pr.flip)==null?void 0:Fr.index)||0)+1,Hr=Nr[qr];if(Hr)return{data:{index:qr,overflows:Br},reset:{placement:Hr}};let Or=(jr=Br.filter(Mr=>Mr.overflows[0]<=0).sort((Mr,Lr)=>Mr.overflows[1]-Lr.overflows[1])[0])==null?void 0:jr.placement;if(!Or)switch(vr){case"bestFit":{var Ur;const Mr=(Ur=Br.map(Lr=>[Lr.placement,Lr.overflows.filter(Vr=>Vr>0).reduce((Vr,Jr)=>Vr+Jr,0)]).sort((Lr,Vr)=>Lr[1]-Vr[1])[0])==null?void 0:Ur[0];Mr&&(Or=Mr);break}case"initialPlacement":Or=gr;break}if(hr!==Or)return{reset:{placement:Or}}}return{}}}};function getSideOffsets(cr,ar){return{top:cr.top-ar.height,right:cr.right-ar.width,bottom:cr.bottom-ar.height,left:cr.left-ar.width}}function isAnySideFullyClipped(cr){return sides.some(ar=>cr[ar]>=0)}const hide=function(cr){return cr===void 0&&(cr={}),{name:"hide",options:cr,async fn(ar){const{rects:dr}=ar,{strategy:fr="referenceHidden",...hr}=evaluate(cr,ar);switch(fr){case"referenceHidden":{const pr=await detectOverflow(ar,{...hr,elementContext:"reference"}),mr=getSideOffsets(pr,dr.reference);return{data:{referenceHiddenOffsets:mr,referenceHidden:isAnySideFullyClipped(mr)}}}case"escaped":{const pr=await detectOverflow(ar,{...hr,altBoundary:!0}),mr=getSideOffsets(pr,dr.floating);return{data:{escapedOffsets:mr,escaped:isAnySideFullyClipped(mr)}}}default:return{}}}}};async function convertValueToCoords(cr,ar){const{placement:dr,platform:fr,elements:hr}=cr,pr=await(fr.isRTL==null?void 0:fr.isRTL(hr.floating)),mr=getSide(dr),gr=getAlignment(dr),yr=getSideAxis(dr)==="y",xr=["left","top"].includes(mr)?-1:1,wr=pr&&yr?-1:1,br=evaluate(ar,cr);let{mainAxis:Sr,crossAxis:vr,alignmentAxis:Er}=typeof br=="number"?{mainAxis:br,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...br};return gr&&typeof Er=="number"&&(vr=gr==="end"?Er*-1:Er),yr?{x:vr*wr,y:Sr*xr}:{x:Sr*xr,y:vr*wr}}const offset=function(cr){return cr===void 0&&(cr=0),{name:"offset",options:cr,async fn(ar){const{x:dr,y:fr}=ar,hr=await convertValueToCoords(ar,cr);return{x:dr+hr.x,y:fr+hr.y,data:hr}}}},shift=function(cr){return cr===void 0&&(cr={}),{name:"shift",options:cr,async fn(ar){const{x:dr,y:fr,placement:hr}=ar,{mainAxis:pr=!0,crossAxis:mr=!1,limiter:gr={fn:_r=>{let{x:Cr,y:kr}=_r;return{x:Cr,y:kr}}},...yr}=evaluate(cr,ar),xr={x:dr,y:fr},wr=await detectOverflow(ar,yr),br=getSideAxis(getSide(hr)),Sr=getOppositeAxis(br);let vr=xr[Sr],Er=xr[br];if(pr){const _r=Sr==="y"?"top":"left",Cr=Sr==="y"?"bottom":"right",kr=vr+wr[_r],Rr=vr-wr[Cr];vr=clamp$1(kr,vr,Rr)}if(mr){const _r=br==="y"?"top":"left",Cr=br==="y"?"bottom":"right",kr=Er+wr[_r],Rr=Er-wr[Cr];Er=clamp$1(kr,Er,Rr)}const Ar=gr.fn({...ar,[Sr]:vr,[br]:Er});return{...Ar,data:{x:Ar.x-dr,y:Ar.y-fr}}}}},limitShift=function(cr){return cr===void 0&&(cr={}),{options:cr,fn(ar){const{x:dr,y:fr,placement:hr,rects:pr,middlewareData:mr}=ar,{offset:gr=0,mainAxis:yr=!0,crossAxis:xr=!0}=evaluate(cr,ar),wr={x:dr,y:fr},br=getSideAxis(hr),Sr=getOppositeAxis(br);let vr=wr[Sr],Er=wr[br];const Ar=evaluate(gr,ar),_r=typeof Ar=="number"?{mainAxis:Ar,crossAxis:0}:{mainAxis:0,crossAxis:0,...Ar};if(yr){const Rr=Sr==="y"?"height":"width",Ir=pr.reference[Sr]-pr.floating[Rr]+_r.mainAxis,Nr=pr.reference[Sr]+pr.reference[Rr]-_r.mainAxis;vr<Ir?vr=Ir:vr>Nr&&(vr=Nr)}if(xr){var Cr,kr;const Rr=Sr==="y"?"width":"height",Ir=["top","left"].includes(getSide(hr)),Nr=pr.reference[br]-pr.floating[Rr]+(Ir&&((Cr=mr.offset)==null?void 0:Cr[br])||0)+(Ir?0:_r.crossAxis),Pr=pr.reference[br]+pr.reference[Rr]+(Ir?0:((kr=mr.offset)==null?void 0:kr[br])||0)-(Ir?_r.crossAxis:0);Er<Nr?Er=Nr:Er>Pr&&(Er=Pr)}return{[Sr]:vr,[br]:Er}}}},size=function(cr){return cr===void 0&&(cr={}),{name:"size",options:cr,async fn(ar){const{placement:dr,rects:fr,platform:hr,elements:pr}=ar,{apply:mr=()=>{},...gr}=evaluate(cr,ar),yr=await detectOverflow(ar,gr),xr=getSide(dr),wr=getAlignment(dr),br=getSideAxis(dr)==="y",{width:Sr,height:vr}=fr.floating;let Er,Ar;xr==="top"||xr==="bottom"?(Er=xr,Ar=wr===(await(hr.isRTL==null?void 0:hr.isRTL(pr.floating))?"start":"end")?"left":"right"):(Ar=xr,Er=wr==="end"?"top":"bottom");const _r=vr-yr[Er],Cr=Sr-yr[Ar],kr=!ar.middlewareData.shift;let Rr=_r,Ir=Cr;if(br){const Pr=Sr-yr.left-yr.right;Ir=wr||kr?min(Cr,Pr):Pr}else{const Pr=vr-yr.top-yr.bottom;Rr=wr||kr?min(_r,Pr):Pr}if(kr&&!wr){const Pr=max(yr.left,0),Tr=max(yr.right,0),Br=max(yr.top,0),Fr=max(yr.bottom,0);br?Ir=Sr-2*(Pr!==0||Tr!==0?Pr+Tr:max(yr.left,yr.right)):Rr=vr-2*(Br!==0||Fr!==0?Br+Fr:max(yr.top,yr.bottom))}await mr({...ar,availableWidth:Ir,availableHeight:Rr});const Nr=await hr.getDimensions(pr.floating);return Sr!==Nr.width||vr!==Nr.height?{reset:{rects:!0}}:{}}}};function getNodeName(cr){return isNode$1(cr)?(cr.nodeName||"").toLowerCase():"#document"}function getWindow(cr){var ar;return(cr==null||(ar=cr.ownerDocument)==null?void 0:ar.defaultView)||window}function getDocumentElement(cr){var ar;return(ar=(isNode$1(cr)?cr.ownerDocument:cr.document)||window.document)==null?void 0:ar.documentElement}function isNode$1(cr){return cr instanceof Node||cr instanceof getWindow(cr).Node}function isElement(cr){return cr instanceof Element||cr instanceof getWindow(cr).Element}function isHTMLElement(cr){return cr instanceof HTMLElement||cr instanceof getWindow(cr).HTMLElement}function isShadowRoot(cr){return typeof ShadowRoot>"u"?!1:cr instanceof ShadowRoot||cr instanceof getWindow(cr).ShadowRoot}function isOverflowElement(cr){const{overflow:ar,overflowX:dr,overflowY:fr,display:hr}=getComputedStyle$1(cr);return/auto|scroll|overlay|hidden|clip/.test(ar+fr+dr)&&!["inline","contents"].includes(hr)}function isTableElement(cr){return["table","td","th"].includes(getNodeName(cr))}function isContainingBlock(cr){const ar=isWebKit(),dr=getComputedStyle$1(cr);return dr.transform!=="none"||dr.perspective!=="none"||(dr.containerType?dr.containerType!=="normal":!1)||!ar&&(dr.backdropFilter?dr.backdropFilter!=="none":!1)||!ar&&(dr.filter?dr.filter!=="none":!1)||["transform","perspective","filter"].some(fr=>(dr.willChange||"").includes(fr))||["paint","layout","strict","content"].some(fr=>(dr.contain||"").includes(fr))}function getContainingBlock(cr){let ar=getParentNode(cr);for(;isHTMLElement(ar)&&!isLastTraversableNode(ar);){if(isContainingBlock(ar))return ar;ar=getParentNode(ar)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(cr){return["html","body","#document"].includes(getNodeName(cr))}function getComputedStyle$1(cr){return getWindow(cr).getComputedStyle(cr)}function getNodeScroll(cr){return isElement(cr)?{scrollLeft:cr.scrollLeft,scrollTop:cr.scrollTop}:{scrollLeft:cr.pageXOffset,scrollTop:cr.pageYOffset}}function getParentNode(cr){if(getNodeName(cr)==="html")return cr;const ar=cr.assignedSlot||cr.parentNode||isShadowRoot(cr)&&cr.host||getDocumentElement(cr);return isShadowRoot(ar)?ar.host:ar}function getNearestOverflowAncestor(cr){const ar=getParentNode(cr);return isLastTraversableNode(ar)?cr.ownerDocument?cr.ownerDocument.body:cr.body:isHTMLElement(ar)&&isOverflowElement(ar)?ar:getNearestOverflowAncestor(ar)}function getOverflowAncestors(cr,ar,dr){var fr;ar===void 0&&(ar=[]),dr===void 0&&(dr=!0);const hr=getNearestOverflowAncestor(cr),pr=hr===((fr=cr.ownerDocument)==null?void 0:fr.body),mr=getWindow(hr);return pr?ar.concat(mr,mr.visualViewport||[],isOverflowElement(hr)?hr:[],mr.frameElement&&dr?getOverflowAncestors(mr.frameElement):[]):ar.concat(hr,getOverflowAncestors(hr,[],dr))}function getCssDimensions(cr){const ar=getComputedStyle$1(cr);let dr=parseFloat(ar.width)||0,fr=parseFloat(ar.height)||0;const hr=isHTMLElement(cr),pr=hr?cr.offsetWidth:dr,mr=hr?cr.offsetHeight:fr,gr=round(dr)!==pr||round(fr)!==mr;return gr&&(dr=pr,fr=mr),{width:dr,height:fr,$:gr}}function unwrapElement(cr){return isElement(cr)?cr:cr.contextElement}function getScale(cr){const ar=unwrapElement(cr);if(!isHTMLElement(ar))return createCoords(1);const dr=ar.getBoundingClientRect(),{width:fr,height:hr,$:pr}=getCssDimensions(ar);let mr=(pr?round(dr.width):dr.width)/fr,gr=(pr?round(dr.height):dr.height)/hr;return(!mr||!Number.isFinite(mr))&&(mr=1),(!gr||!Number.isFinite(gr))&&(gr=1),{x:mr,y:gr}}const noOffsets=createCoords(0);function getVisualOffsets(cr){const ar=getWindow(cr);return!isWebKit()||!ar.visualViewport?noOffsets:{x:ar.visualViewport.offsetLeft,y:ar.visualViewport.offsetTop}}function shouldAddVisualOffsets(cr,ar,dr){return ar===void 0&&(ar=!1),!dr||ar&&dr!==getWindow(cr)?!1:ar}function getBoundingClientRect(cr,ar,dr,fr){ar===void 0&&(ar=!1),dr===void 0&&(dr=!1);const hr=cr.getBoundingClientRect(),pr=unwrapElement(cr);let mr=createCoords(1);ar&&(fr?isElement(fr)&&(mr=getScale(fr)):mr=getScale(cr));const gr=shouldAddVisualOffsets(pr,dr,fr)?getVisualOffsets(pr):createCoords(0);let yr=(hr.left+gr.x)/mr.x,xr=(hr.top+gr.y)/mr.y,wr=hr.width/mr.x,br=hr.height/mr.y;if(pr){const Sr=getWindow(pr),vr=fr&&isElement(fr)?getWindow(fr):fr;let Er=Sr.frameElement;for(;Er&&fr&&vr!==Sr;){const Ar=getScale(Er),_r=Er.getBoundingClientRect(),Cr=getComputedStyle$1(Er),kr=_r.left+(Er.clientLeft+parseFloat(Cr.paddingLeft))*Ar.x,Rr=_r.top+(Er.clientTop+parseFloat(Cr.paddingTop))*Ar.y;yr*=Ar.x,xr*=Ar.y,wr*=Ar.x,br*=Ar.y,yr+=kr,xr+=Rr,Er=getWindow(Er).frameElement}}return rectToClientRect({width:wr,height:br,x:yr,y:xr})}function convertOffsetParentRelativeRectToViewportRelativeRect(cr){let{rect:ar,offsetParent:dr,strategy:fr}=cr;const hr=isHTMLElement(dr),pr=getDocumentElement(dr);if(dr===pr)return ar;let mr={scrollLeft:0,scrollTop:0},gr=createCoords(1);const yr=createCoords(0);if((hr||!hr&&fr!=="fixed")&&((getNodeName(dr)!=="body"||isOverflowElement(pr))&&(mr=getNodeScroll(dr)),isHTMLElement(dr))){const xr=getBoundingClientRect(dr);gr=getScale(dr),yr.x=xr.x+dr.clientLeft,yr.y=xr.y+dr.clientTop}return{width:ar.width*gr.x,height:ar.height*gr.y,x:ar.x*gr.x-mr.scrollLeft*gr.x+yr.x,y:ar.y*gr.y-mr.scrollTop*gr.y+yr.y}}function getClientRects(cr){return Array.from(cr.getClientRects())}function getWindowScrollBarX(cr){return getBoundingClientRect(getDocumentElement(cr)).left+getNodeScroll(cr).scrollLeft}function getDocumentRect(cr){const ar=getDocumentElement(cr),dr=getNodeScroll(cr),fr=cr.ownerDocument.body,hr=max(ar.scrollWidth,ar.clientWidth,fr.scrollWidth,fr.clientWidth),pr=max(ar.scrollHeight,ar.clientHeight,fr.scrollHeight,fr.clientHeight);let mr=-dr.scrollLeft+getWindowScrollBarX(cr);const gr=-dr.scrollTop;return getComputedStyle$1(fr).direction==="rtl"&&(mr+=max(ar.clientWidth,fr.clientWidth)-hr),{width:hr,height:pr,x:mr,y:gr}}function getViewportRect(cr,ar){const dr=getWindow(cr),fr=getDocumentElement(cr),hr=dr.visualViewport;let pr=fr.clientWidth,mr=fr.clientHeight,gr=0,yr=0;if(hr){pr=hr.width,mr=hr.height;const xr=isWebKit();(!xr||xr&&ar==="fixed")&&(gr=hr.offsetLeft,yr=hr.offsetTop)}return{width:pr,height:mr,x:gr,y:yr}}function getInnerBoundingClientRect(cr,ar){const dr=getBoundingClientRect(cr,!0,ar==="fixed"),fr=dr.top+cr.clientTop,hr=dr.left+cr.clientLeft,pr=isHTMLElement(cr)?getScale(cr):createCoords(1),mr=cr.clientWidth*pr.x,gr=cr.clientHeight*pr.y,yr=hr*pr.x,xr=fr*pr.y;return{width:mr,height:gr,x:yr,y:xr}}function getClientRectFromClippingAncestor(cr,ar,dr){let fr;if(ar==="viewport")fr=getViewportRect(cr,dr);else if(ar==="document")fr=getDocumentRect(getDocumentElement(cr));else if(isElement(ar))fr=getInnerBoundingClientRect(ar,dr);else{const hr=getVisualOffsets(cr);fr={...ar,x:ar.x-hr.x,y:ar.y-hr.y}}return rectToClientRect(fr)}function hasFixedPositionAncestor(cr,ar){const dr=getParentNode(cr);return dr===ar||!isElement(dr)||isLastTraversableNode(dr)?!1:getComputedStyle$1(dr).position==="fixed"||hasFixedPositionAncestor(dr,ar)}function getClippingElementAncestors(cr,ar){const dr=ar.get(cr);if(dr)return dr;let fr=getOverflowAncestors(cr,[],!1).filter(gr=>isElement(gr)&&getNodeName(gr)!=="body"),hr=null;const pr=getComputedStyle$1(cr).position==="fixed";let mr=pr?getParentNode(cr):cr;for(;isElement(mr)&&!isLastTraversableNode(mr);){const gr=getComputedStyle$1(mr),yr=isContainingBlock(mr);!yr&&gr.position==="fixed"&&(hr=null),(pr?!yr&&!hr:!yr&&gr.position==="static"&&!!hr&&["absolute","fixed"].includes(hr.position)||isOverflowElement(mr)&&!yr&&hasFixedPositionAncestor(cr,mr))?fr=fr.filter(wr=>wr!==mr):hr=gr,mr=getParentNode(mr)}return ar.set(cr,fr),fr}function getClippingRect(cr){let{element:ar,boundary:dr,rootBoundary:fr,strategy:hr}=cr;const mr=[...dr==="clippingAncestors"?getClippingElementAncestors(ar,this._c):[].concat(dr),fr],gr=mr[0],yr=mr.reduce((xr,wr)=>{const br=getClientRectFromClippingAncestor(ar,wr,hr);return xr.top=max(br.top,xr.top),xr.right=min(br.right,xr.right),xr.bottom=min(br.bottom,xr.bottom),xr.left=max(br.left,xr.left),xr},getClientRectFromClippingAncestor(ar,gr,hr));return{width:yr.right-yr.left,height:yr.bottom-yr.top,x:yr.left,y:yr.top}}function getDimensions(cr){return getCssDimensions(cr)}function getRectRelativeToOffsetParent(cr,ar,dr){const fr=isHTMLElement(ar),hr=getDocumentElement(ar),pr=dr==="fixed",mr=getBoundingClientRect(cr,!0,pr,ar);let gr={scrollLeft:0,scrollTop:0};const yr=createCoords(0);if(fr||!fr&&!pr)if((getNodeName(ar)!=="body"||isOverflowElement(hr))&&(gr=getNodeScroll(ar)),fr){const xr=getBoundingClientRect(ar,!0,pr,ar);yr.x=xr.x+ar.clientLeft,yr.y=xr.y+ar.clientTop}else hr&&(yr.x=getWindowScrollBarX(hr));return{x:mr.left+gr.scrollLeft-yr.x,y:mr.top+gr.scrollTop-yr.y,width:mr.width,height:mr.height}}function getTrueOffsetParent(cr,ar){return!isHTMLElement(cr)||getComputedStyle$1(cr).position==="fixed"?null:ar?ar(cr):cr.offsetParent}function getOffsetParent(cr,ar){const dr=getWindow(cr);if(!isHTMLElement(cr))return dr;let fr=getTrueOffsetParent(cr,ar);for(;fr&&isTableElement(fr)&&getComputedStyle$1(fr).position==="static";)fr=getTrueOffsetParent(fr,ar);return fr&&(getNodeName(fr)==="html"||getNodeName(fr)==="body"&&getComputedStyle$1(fr).position==="static"&&!isContainingBlock(fr))?dr:fr||getContainingBlock(cr)||dr}const getElementRects=async function(cr){let{reference:ar,floating:dr,strategy:fr}=cr;const hr=this.getOffsetParent||getOffsetParent,pr=this.getDimensions;return{reference:getRectRelativeToOffsetParent(ar,await hr(dr),fr),floating:{x:0,y:0,...await pr(dr)}}};function isRTL(cr){return getComputedStyle$1(cr).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(cr,ar){let dr=null,fr;const hr=getDocumentElement(cr);function pr(){clearTimeout(fr),dr&&dr.disconnect(),dr=null}function mr(gr,yr){gr===void 0&&(gr=!1),yr===void 0&&(yr=1),pr();const{left:xr,top:wr,width:br,height:Sr}=cr.getBoundingClientRect();if(gr||ar(),!br||!Sr)return;const vr=floor(wr),Er=floor(hr.clientWidth-(xr+br)),Ar=floor(hr.clientHeight-(wr+Sr)),_r=floor(xr),kr={rootMargin:-vr+"px "+-Er+"px "+-Ar+"px "+-_r+"px",threshold:max(0,min(1,yr))||1};let Rr=!0;function Ir(Nr){const Pr=Nr[0].intersectionRatio;if(Pr!==yr){if(!Rr)return mr();Pr?mr(!1,Pr):fr=setTimeout(()=>{mr(!1,1e-7)},100)}Rr=!1}try{dr=new IntersectionObserver(Ir,{...kr,root:hr.ownerDocument})}catch{dr=new IntersectionObserver(Ir,kr)}dr.observe(cr)}return mr(!0),pr}function autoUpdate(cr,ar,dr,fr){fr===void 0&&(fr={});const{ancestorScroll:hr=!0,ancestorResize:pr=!0,elementResize:mr=typeof ResizeObserver=="function",layoutShift:gr=typeof IntersectionObserver=="function",animationFrame:yr=!1}=fr,xr=unwrapElement(cr),wr=hr||pr?[...xr?getOverflowAncestors(xr):[],...getOverflowAncestors(ar)]:[];wr.forEach(Cr=>{hr&&Cr.addEventListener("scroll",dr,{passive:!0}),pr&&Cr.addEventListener("resize",dr)});const br=xr&&gr?observeMove(xr,dr):null;let Sr=-1,vr=null;mr&&(vr=new ResizeObserver(Cr=>{let[kr]=Cr;kr&&kr.target===xr&&vr&&(vr.unobserve(ar),cancelAnimationFrame(Sr),Sr=requestAnimationFrame(()=>{vr&&vr.observe(ar)})),dr()}),xr&&!yr&&vr.observe(xr),vr.observe(ar));let Er,Ar=yr?getBoundingClientRect(cr):null;yr&&_r();function _r(){const Cr=getBoundingClientRect(cr);Ar&&(Cr.x!==Ar.x||Cr.y!==Ar.y||Cr.width!==Ar.width||Cr.height!==Ar.height)&&dr(),Ar=Cr,Er=requestAnimationFrame(_r)}return dr(),()=>{wr.forEach(Cr=>{hr&&Cr.removeEventListener("scroll",dr),pr&&Cr.removeEventListener("resize",dr)}),br&&br(),vr&&vr.disconnect(),vr=null,yr&&cancelAnimationFrame(Er)}}const computePosition=(cr,ar,dr)=>{const fr=new Map,hr={platform,...dr},pr={...hr.platform,_c:fr};return computePosition$1(cr,ar,{...hr,platform:pr})};var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(cr){(function(){var ar={}.hasOwnProperty;function dr(){for(var fr=[],hr=0;hr<arguments.length;hr++){var pr=arguments[hr];if(pr){var mr=typeof pr;if(mr==="string"||mr==="number")fr.push(pr);else if(Array.isArray(pr)){if(pr.length){var gr=dr.apply(null,pr);gr&&fr.push(gr)}}else if(mr==="object"){if(pr.toString!==Object.prototype.toString&&!pr.toString.toString().includes("[native code]")){fr.push(pr.toString());continue}for(var yr in pr)ar.call(pr,yr)&&pr[yr]&&fr.push(yr)}}}return fr.join(" ")}cr.exports?(dr.default=dr,cr.exports=dr):window.classNames=dr})()})(classnames);var classnamesExports=classnames.exports;const f$2=getDefaultExportFromCjs(classnamesExports);/*
* React Tooltip
* {@link https://github.com/ReactTooltip/react-tooltip}
* @copyright ReactTooltip Team
* @license MIT
*/const y$3="react-tooltip-core-styles",h$3="react-tooltip-base-styles",w$3={core:!1,base:!1};function b$3({css:cr,id:ar=h$3,type:dr="base",ref:fr}){var hr,pr;if(!cr||typeof document>"u"||w$3[dr]||dr==="core"&&typeof process<"u"&&(!((hr=process==null?void 0:process.env)===null||hr===void 0)&&hr.REACT_TOOLTIP_DISABLE_CORE_STYLES)||dr!=="base"&&typeof process<"u"&&(!((pr=process==null?void 0:process.env)===null||pr===void 0)&&pr.REACT_TOOLTIP_DISABLE_BASE_STYLES))return;dr==="core"&&(ar=y$3),fr||(fr={});const{insertAt:mr}=fr;if(document.getElementById(ar))return void console.warn(`[react-tooltip] Element with id '${ar}' already exists. Call \`removeStyle()\` first`);const gr=document.head||document.getElementsByTagName("head")[0],yr=document.createElement("style");yr.id=ar,yr.type="text/css",mr==="top"&&gr.firstChild?gr.insertBefore(yr,gr.firstChild):gr.appendChild(yr),yr.styleSheet?yr.styleSheet.cssText=cr:yr.appendChild(document.createTextNode(cr)),w$3[dr]=!0}const S$2=(cr,ar,dr)=>{let fr=null;return function(...hr){const pr=()=>{fr=null,dr||cr.apply(this,hr)};dr&&!fr&&(cr.apply(this,hr),fr=setTimeout(pr,ar)),dr||(fr&&clearTimeout(fr),fr=setTimeout(pr,ar))}},g$3="DEFAULT_TOOLTIP_ID",_$1={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},A$1=reactExports.createContext({getTooltipData:()=>_$1});function O(cr=g$3){return reactExports.useContext(A$1).getTooltipData(cr)}const L$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,C$1=cr=>{if(!(cr instanceof HTMLElement||cr instanceof SVGElement))return!1;const ar=getComputedStyle(cr);return["overflow","overflow-x","overflow-y"].some(dr=>{const fr=ar.getPropertyValue(dr);return fr==="auto"||fr==="scroll"})},x$2=cr=>{if(!cr)return null;let ar=cr.parentElement;for(;ar;){if(C$1(ar))return ar;ar=ar.parentElement}return document.scrollingElement||document.documentElement},R=async({elementReference:cr=null,tooltipReference:ar=null,tooltipArrowReference:dr=null,place:fr="top",offset:hr=10,strategy:pr="absolute",middlewares:mr=[offset(Number(hr)),flip(),shift({padding:5})],border:gr})=>{if(!cr)return{tooltipStyles:{},tooltipArrowStyles:{},place:fr};if(ar===null)return{tooltipStyles:{},tooltipArrowStyles:{},place:fr};const yr=mr;return dr?(yr.push(arrow$1({element:dr,padding:5})),computePosition(cr,ar,{placement:fr,strategy:pr,middleware:yr}).then(({x:xr,y:wr,placement:br,middlewareData:Sr})=>{var vr,Er;const Ar={left:`${xr}px`,top:`${wr}px`,border:gr},{x:_r,y:Cr}=(vr=Sr.arrow)!==null&&vr!==void 0?vr:{x:0,y:0},kr=(Er={top:"bottom",right:"left",bottom:"top",left:"right"}[br.split("-")[0]])!==null&&Er!==void 0?Er:"bottom",Rr=gr&&{borderBottom:gr,borderRight:gr};let Ir=0;if(gr){const Nr=`${gr}`.match(/(\d+)px/);Ir=Nr?.[1]?Number(Nr[1]):1}return{tooltipStyles:Ar,tooltipArrowStyles:{left:_r!=null?`${_r}px`:"",top:Cr!=null?`${Cr}px`:"",right:"",bottom:"",...Rr,[kr]:`-${4+Ir}px`},place:br}})):computePosition(cr,ar,{placement:"bottom",strategy:pr,middleware:yr}).then(({x:xr,y:wr,placement:br})=>({tooltipStyles:{left:`${xr}px`,top:`${wr}px`},tooltipArrowStyles:{},place:br}))};var N$2={tooltip:"core-styles-module_tooltip__3vRRp",fixed:"core-styles-module_fixed__pcSol",arrow:"core-styles-module_arrow__cvMwQ",noArrow:"core-styles-module_noArrow__xock6",clickable:"core-styles-module_clickable__ZuTTB",show:"core-styles-module_show__Nt9eE",closing:"core-styles-module_closing__sGnxF"},$$2={tooltip:"styles-module_tooltip__mnnfp",arrow:"styles-module_arrow__K0L3T",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const I$1=({id:cr,className:ar,classNameArrow:dr,variant:fr="dark",anchorId:hr,anchorSelect:pr,place:mr="top",offset:gr=10,events:yr=["hover"],openOnClick:xr=!1,positionStrategy:wr="absolute",middlewares:br,wrapper:Sr,delayShow:vr=0,delayHide:Er=0,float:Ar=!1,hidden:_r=!1,noArrow:Cr=!1,clickable:kr=!1,closeOnEsc:Rr=!1,closeOnScroll:Ir=!1,closeOnResize:Nr=!1,openEvents:Pr,closeEvents:Tr,globalCloseEvents:Br,style:Fr,position:jr,afterShow:Ur,afterHide:qr,content:Hr,contentWrapperRef:Or,isOpen:Mr,setIsOpen:Lr,activeAnchor:Vr,setActiveAnchor:Jr,border:es,opacity:ns,arrowColor:Qr})=>{const zr=reactExports.useRef(null),Wr=reactExports.useRef(null),ss=reactExports.useRef(null),Xr=reactExports.useRef(null),[ts,fs]=reactExports.useState(mr),[rs,as]=reactExports.useState({}),[ps,xs]=reactExports.useState({}),[Ss,Ns]=reactExports.useState(!1),[Ts,os]=reactExports.useState(!1),bs=reactExports.useRef(!1),ws=reactExports.useRef(null),{anchorRefs:As,setActiveAnchor:gs}=O(cr),vs=reactExports.useRef(!1),[Ps,Os]=reactExports.useState([]),Ms=reactExports.useRef(!1),zs=xr||yr.includes("click"),Hs=zs||Pr?.click||Pr?.dblclick||Pr?.mousedown,Cs=Pr?{...Pr}:{mouseenter:!0,focus:!0,click:!1,dblclick:!1,mousedown:!1};!Pr&&zs&&Object.assign(Cs,{mouseenter:!1,focus:!1,click:!0});const ls=Tr?{...Tr}:{mouseleave:!0,blur:!0,click:!1};!Tr&&zs&&Object.assign(ls,{mouseleave:!1,blur:!1});const Kr=Br?{...Br}:{escape:Rr||!1,scroll:Ir||!1,resize:Nr||!1,clickOutsideAnchor:Hs||!1};L$1(()=>(Ms.current=!0,()=>{Ms.current=!1}),[]);const Zr=js=>{Ms.current&&(js&&os(!0),setTimeout(()=>{Ms.current&&(Lr?.(js),Mr===void 0&&Ns(js))},10))};reactExports.useEffect(()=>{if(Mr===void 0)return()=>null;Mr&&os(!0);const js=setTimeout(()=>{Ns(Mr)},10);return()=>{clearTimeout(js)}},[Mr]),reactExports.useEffect(()=>{Ss!==bs.current&&(bs.current=Ss,Ss?Ur?.():qr?.())},[Ss]);const hs=(js=Er)=>{Xr.current&&clearTimeout(Xr.current),Xr.current=setTimeout(()=>{vs.current||Zr(!1)},js)},ys=js=>{var Us;if(!js)return;const Vs=(Us=js.currentTarget)!==null&&Us!==void 0?Us:js.target;if(!Vs?.isConnected)return Jr(null),void gs({current:null});vr?(ss.current&&clearTimeout(ss.current),ss.current=setTimeout(()=>{Zr(!0)},vr)):Zr(!0),Jr(Vs),gs({current:Vs}),Xr.current&&clearTimeout(Xr.current)},Es=()=>{kr?hs(Er||100):Er?hs():Zr(!1),ss.current&&clearTimeout(ss.current)},Is=({x:js,y:Us})=>{R({place:mr,offset:gr,elementReference:{getBoundingClientRect:()=>({x:js,y:Us,width:0,height:0,top:Us,left:js,right:js,bottom:Us})},tooltipReference:zr.current,tooltipArrowReference:Wr.current,strategy:wr,middlewares:br,border:es}).then(Vs=>{Object.keys(Vs.tooltipStyles).length&&as(Vs.tooltipStyles),Object.keys(Vs.tooltipArrowStyles).length&&xs(Vs.tooltipArrowStyles),fs(Vs.place)})},$s=js=>{if(!js)return;const Us=js,Vs={x:Us.clientX,y:Us.clientY};Is(Vs),ws.current=Vs},Rs=js=>{var Us;[document.querySelector(`[id='${hr}']`),...Ps].some(Vs=>Vs?.contains(js.target))||!((Us=zr.current)===null||Us===void 0)&&Us.contains(js.target)||(Zr(!1),ss.current&&clearTimeout(ss.current))},Bs=S$2(ys,50,!0),Ds=S$2(Es,50,!0),Ls=reactExports.useCallback(()=>{jr?Is(jr):Ar?ws.current&&Is(ws.current):Vr?.isConnected&&R({place:mr,offset:gr,elementReference:Vr,tooltipReference:zr.current,tooltipArrowReference:Wr.current,strategy:wr,middlewares:br,border:es}).then(js=>{Ms.current&&(Object.keys(js.tooltipStyles).length&&as(js.tooltipStyles),Object.keys(js.tooltipArrowStyles).length&&xs(js.tooltipArrowStyles),fs(js.place))})},[Ss,Vr,Hr,Fr,mr,gr,wr,jr,Ar]);reactExports.useEffect(()=>{var js,Us;const Vs=new Set(As);Ps.forEach(ei=>{Vs.add({current:ei})});const ni=document.querySelector(`[id='${hr}']`);ni&&Vs.add({current:ni});const Js=()=>{Zr(!1)},Ys=x$2(Vr),Xs=x$2(zr.current);Kr.scroll&&(window.addEventListener("scroll",Js),Ys?.addEventListener("scroll",Js),Xs?.addEventListener("scroll",Js));let Qs=null;Kr.resize?window.addEventListener("resize",Js):Vr&&zr.current&&(Qs=autoUpdate(Vr,zr.current,Ls,{ancestorResize:!0,elementResize:!0,layoutShift:!0}));const ai=ei=>{ei.key==="Escape"&&Zr(!1)};Kr.escape&&window.addEventListener("keydown",ai),Kr.clickOutsideAnchor&&window.addEventListener("click",Rs);const hi=[],li=ei=>{Ss||ys(ei)},fi=()=>{Ss&&Es()},gi=["mouseenter","mouseleave","focus","blur"],ui=["click","dblclick","mousedown","mouseup"];Object.entries(Cs).forEach(([ei,ci])=>{ci&&(gi.includes(ei)?hi.push({event:ei,listener:Bs}):ui.includes(ei)&&hi.push({event:ei,listener:li}))}),Object.entries(ls).forEach(([ei,ci])=>{ci&&(gi.includes(ei)?hi.push({event:ei,listener:Ds}):ui.includes(ei)&&hi.push({event:ei,listener:fi}))}),Ar&&hi.push({event:"mousemove",listener:$s});const pi=()=>{vs.current=!0},wi=()=>{vs.current=!1,Es()};return kr&&!Hs&&((js=zr.current)===null||js===void 0||js.addEventListener("mouseenter",pi),(Us=zr.current)===null||Us===void 0||Us.addEventListener("mouseleave",wi)),hi.forEach(({event:ei,listener:ci})=>{Vs.forEach(ii=>{var si;(si=ii.current)===null||si===void 0||si.addEventListener(ei,ci)})}),()=>{var ei,ci;Kr.scroll&&(window.removeEventListener("scroll",Js),Ys?.removeEventListener("scroll",Js),Xs?.removeEventListener("scroll",Js)),Kr.resize?window.removeEventListener("resize",Js):Qs?.(),Kr.clickOutsideAnchor&&window.removeEventListener("click",Rs),Kr.escape&&window.removeEventListener("keydown",ai),kr&&!Hs&&((ei=zr.current)===null||ei===void 0||ei.removeEventListener("mouseenter",pi),(ci=zr.current)===null||ci===void 0||ci.removeEventListener("mouseleave",wi)),hi.forEach(({event:ii,listener:si})=>{Vs.forEach(di=>{var xi;(xi=di.current)===null||xi===void 0||xi.removeEventListener(ii,si)})})}},[Vr,Ls,Ts,As,Ps,Pr,Tr,Br,zs]),reactExports.useEffect(()=>{let js=pr??"";!js&&cr&&(js=`[data-tooltip-id='${cr}']`);const Us=new MutationObserver(Vs=>{const ni=[],Js=[];Vs.forEach(Ys=>{if(Ys.type==="attributes"&&Ys.attributeName==="data-tooltip-id"&&Ys.target.getAttribute("data-tooltip-id")===cr&&ni.push(Ys.target),Ys.type==="childList"){if(Vr){const Xs=[...Ys.removedNodes].filter(Qs=>Qs.nodeType===1);if(js)try{Js.push(...Xs.filter(Qs=>Qs.matches(js))),Js.push(...Xs.flatMap(Qs=>[...Qs.querySelectorAll(js)]))}catch{}Xs.some(Qs=>{var ai;return!!(!((ai=Qs?.contains)===null||ai===void 0)&&ai.call(Qs,Vr))&&(os(!1),Zr(!1),Jr(null),ss.current&&clearTimeout(ss.current),Xr.current&&clearTimeout(Xr.current),!0)})}if(js)try{const Xs=[...Ys.addedNodes].filter(Qs=>Qs.nodeType===1);ni.push(...Xs.filter(Qs=>Qs.matches(js))),ni.push(...Xs.flatMap(Qs=>[...Qs.querySelectorAll(js)]))}catch{}}}),(ni.length||Js.length)&&Os(Ys=>[...Ys.filter(Xs=>!Js.includes(Xs)),...ni])});return Us.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"]}),()=>{Us.disconnect()}},[cr,pr,Vr]),reactExports.useEffect(()=>{Ls()},[Ls]),reactExports.useEffect(()=>{if(!Or?.current)return()=>null;const js=new ResizeObserver(()=>{Ls()});return js.observe(Or.current),()=>{js.disconnect()}},[Hr,Or?.current]),reactExports.useEffect(()=>{var js;const Us=document.querySelector(`[id='${hr}']`),Vs=[...Ps,Us];Vr&&Vs.includes(Vr)||Jr((js=Ps[0])!==null&&js!==void 0?js:Us)},[hr,Ps,Vr]),reactExports.useEffect(()=>()=>{ss.current&&clearTimeout(ss.current),Xr.current&&clearTimeout(Xr.current)},[]),reactExports.useEffect(()=>{let js=pr;if(!js&&cr&&(js=`[data-tooltip-id='${cr}']`),js)try{const Us=Array.from(document.querySelectorAll(js));Os(Us)}catch{Os([])}},[cr,pr]);const Fs=!_r&&Hr&&Ss&&Object.keys(rs).length>0;return Ts?React.createElement(Sr,{id:cr,role:"tooltip",className:f$2("react-tooltip",N$2.tooltip,$$2.tooltip,$$2[fr],ar,`react-tooltip__place-${ts}`,N$2[Fs?"show":"closing"],Fs?"react-tooltip__show":"react-tooltip__closing",wr==="fixed"&&N$2.fixed,kr&&N$2.clickable),onTransitionEnd:js=>{Ss||js.propertyName!=="opacity"||os(!1)},style:{...Fr,...rs,opacity:ns!==void 0&&Fs?ns:void 0},ref:zr},Hr,React.createElement(Sr,{className:f$2("react-tooltip-arrow",N$2.arrow,$$2.arrow,dr,Cr&&N$2.noArrow),style:{...ps,background:Qr?`linear-gradient(to right bottom, transparent 50%, ${Qr} 50%)`:void 0},ref:Wr})):null},j$1=({content:cr})=>React.createElement("span",{dangerouslySetInnerHTML:{__html:cr}}),B$1=({id:cr,anchorId:ar,anchorSelect:dr,content:fr,html:hr,render:pr,className:mr,classNameArrow:gr,variant:yr="dark",place:xr="top",offset:wr=10,wrapper:br="div",children:Sr=null,events:vr=["hover"],openOnClick:Er=!1,positionStrategy:Ar="absolute",middlewares:_r,delayShow:Cr=0,delayHide:kr=0,float:Rr=!1,hidden:Ir=!1,noArrow:Nr=!1,clickable:Pr=!1,closeOnEsc:Tr=!1,closeOnScroll:Br=!1,closeOnResize:Fr=!1,openEvents:jr,closeEvents:Ur,globalCloseEvents:qr,style:Hr,position:Or,isOpen:Mr,disableStyleInjection:Lr=!1,border:Vr,opacity:Jr,arrowColor:es,setIsOpen:ns,afterShow:Qr,afterHide:zr})=>{const[Wr,ss]=reactExports.useState(fr),[Xr,ts]=reactExports.useState(hr),[fs,rs]=reactExports.useState(xr),[as,ps]=reactExports.useState(yr),[xs,Ss]=reactExports.useState(wr),[Ns,Ts]=reactExports.useState(Cr),[os,bs]=reactExports.useState(kr),[ws,As]=reactExports.useState(Rr),[gs,vs]=reactExports.useState(Ir),[Ps,Os]=reactExports.useState(br),[Ms,zs]=reactExports.useState(vr),[Hs,Cs]=reactExports.useState(Ar),[ls,Kr]=reactExports.useState(null),Zr=reactExports.useRef(Lr),{anchorRefs:hs,activeAnchor:ys}=O(cr),Es=Ds=>Ds?.getAttributeNames().reduce((Ls,Fs)=>{var js;return Fs.startsWith("data-tooltip-")&&(Ls[Fs.replace(/^data-tooltip-/,"")]=(js=Ds?.getAttribute(Fs))!==null&&js!==void 0?js:null),Ls},{}),Is=Ds=>{const Ls={place:Fs=>{var js;rs((js=Fs)!==null&&js!==void 0?js:xr)},content:Fs=>{ss(Fs??fr)},html:Fs=>{ts(Fs??hr)},variant:Fs=>{var js;ps((js=Fs)!==null&&js!==void 0?js:yr)},offset:Fs=>{Ss(Fs===null?wr:Number(Fs))},wrapper:Fs=>{var js;Os((js=Fs)!==null&&js!==void 0?js:br)},events:Fs=>{const js=Fs?.split(" ");zs(js??vr)},"position-strategy":Fs=>{var js;Cs((js=Fs)!==null&&js!==void 0?js:Ar)},"delay-show":Fs=>{Ts(Fs===null?Cr:Number(Fs))},"delay-hide":Fs=>{bs(Fs===null?kr:Number(Fs))},float:Fs=>{As(Fs===null?Rr:Fs==="true")},hidden:Fs=>{vs(Fs===null?Ir:Fs==="true")}};Object.values(Ls).forEach(Fs=>Fs(null)),Object.entries(Ds).forEach(([Fs,js])=>{var Us;(Us=Ls[Fs])===null||Us===void 0||Us.call(Ls,js)})};reactExports.useEffect(()=>{ss(fr)},[fr]),reactExports.useEffect(()=>{ts(hr)},[hr]),reactExports.useEffect(()=>{rs(xr)},[xr]),reactExports.useEffect(()=>{ps(yr)},[yr]),reactExports.useEffect(()=>{Ss(wr)},[wr]),reactExports.useEffect(()=>{Ts(Cr)},[Cr]),reactExports.useEffect(()=>{bs(kr)},[kr]),reactExports.useEffect(()=>{As(Rr)},[Rr]),reactExports.useEffect(()=>{vs(Ir)},[Ir]),reactExports.useEffect(()=>{Cs(Ar)},[Ar]),reactExports.useEffect(()=>{Zr.current!==Lr&&console.warn("[react-tooltip] Do not change `disableStyleInjection` dynamically.")},[Lr]),reactExports.useEffect(()=>{typeof window<"u"&&window.dispatchEvent(new CustomEvent("react-tooltip-inject-styles",{detail:{disableCore:Lr==="core",disableBase:Lr}}))},[]),reactExports.useEffect(()=>{var Ds;const Ls=new Set(hs);let Fs=dr;if(!Fs&&cr&&(Fs=`[data-tooltip-id='${cr}']`),Fs)try{document.querySelectorAll(Fs).forEach(Js=>{Ls.add({current:Js})})}catch{console.warn(`[react-tooltip] "${Fs}" is not a valid CSS selector`)}const js=document.querySelector(`[id='${ar}']`);if(js&&Ls.add({current:js}),!Ls.size)return()=>null;const Us=(Ds=ls??js)!==null&&Ds!==void 0?Ds:ys.current,Vs=new MutationObserver(Js=>{Js.forEach(Ys=>{var Xs;if(!Us||Ys.type!=="attributes"||!(!((Xs=Ys.attributeName)===null||Xs===void 0)&&Xs.startsWith("data-tooltip-")))return;const Qs=Es(Us);Is(Qs)})}),ni={attributes:!0,childList:!1,subtree:!1};if(Us){const Js=Es(Us);Is(Js),Vs.observe(Us,ni)}return()=>{Vs.disconnect()}},[hs,ys,ls,ar,dr]),reactExports.useEffect(()=>{Hr?.border&&console.warn("[react-tooltip] Do not set `style.border`. Use `border` prop instead."),Vr&&!CSS.supports("border",`${Vr}`)&&console.warn(`[react-tooltip] "${Vr}" is not a valid \`border\`.`),Hr?.opacity&&console.warn("[react-tooltip] Do not set `style.opacity`. Use `opacity` prop instead."),Jr&&!CSS.supports("opacity",`${Jr}`)&&console.warn(`[react-tooltip] "${Jr}" is not a valid \`opacity\`.`)},[]);let $s=Sr;const Rs=reactExports.useRef(null);if(pr){const Ds=pr({content:Wr??null,activeAnchor:ls});$s=Ds?React.createElement("div",{ref:Rs,className:"react-tooltip-content-wrapper"},Ds):null}else Wr&&($s=Wr);Xr&&($s=React.createElement(j$1,{content:Xr}));const Bs={id:cr,anchorId:ar,anchorSelect:dr,className:mr,classNameArrow:gr,content:$s,contentWrapperRef:Rs,place:fs,variant:as,offset:xs,wrapper:Ps,events:Ms,openOnClick:Er,positionStrategy:Hs,middlewares:_r,delayShow:Ns,delayHide:os,float:ws,hidden:gs,noArrow:Nr,clickable:Pr,closeOnEsc:Tr,closeOnScroll:Br,closeOnResize:Fr,openEvents:jr,closeEvents:Ur,globalCloseEvents:qr,style:Hr,position:Or,isOpen:Mr,border:Vr,opacity:Jr,arrowColor:es,setIsOpen:ns,afterShow:Qr,afterHide:zr,activeAnchor:ls,setActiveAnchor:Ds=>Kr(Ds)};return React.createElement(I$1,{...Bs})};typeof window<"u"&&window.addEventListener("react-tooltip-inject-styles",cr=>{cr.detail.disableCore||b$3({css:":root{--rt-color-white:#fff;--rt-color-dark:#222;--rt-color-success:#8dc572;--rt-color-error:#be6464;--rt-color-warning:#f0ad4e;--rt-color-info:#337ab7;--rt-opacity:0.9;--rt-transition-show-delay:0.15s;--rt-transition-closing-delay:0.15s}.core-styles-module_tooltip__3vRRp{position:absolute;top:0;left:0;pointer-events:none;opacity:0;will-change:opacity}.core-styles-module_fixed__pcSol{position:fixed}.core-styles-module_arrow__cvMwQ{position:absolute;background:inherit}.core-styles-module_noArrow__xock6{display:none}.core-styles-module_clickable__ZuTTB{pointer-events:auto}.core-styles-module_show__Nt9eE{opacity:var(--rt-opacity);transition:opacity var(--rt-transition-show-delay)ease-out}.core-styles-module_closing__sGnxF{opacity:0;transition:opacity var(--rt-transition-closing-delay)ease-in}",type:"core"}),cr.detail.disableBase||b$3({css:`
.styles-module_tooltip__mnnfp{padding:8px 16px;border-radius:3px;font-size:90%;width:max-content}.styles-module_arrow__K0L3T{width:8px;height:8px}[class*='react-tooltip__place-top']>.styles-module_arrow__K0L3T{transform:rotate(45deg)}[class*='react-tooltip__place-right']>.styles-module_arrow__K0L3T{transform:rotate(135deg)}[class*='react-tooltip__place-bottom']>.styles-module_arrow__K0L3T{transform:rotate(225deg)}[class*='react-tooltip__place-left']>.styles-module_arrow__K0L3T{transform:rotate(315deg)}.styles-module_dark__xNqje{background:var(--rt-color-dark);color:var(--rt-color-white)}.styles-module_light__Z6W-X{background-color:var(--rt-color-white);color:var(--rt-color-dark)}.styles-module_success__A2AKt{background-color:var(--rt-color-success);color:var(--rt-color-white)}.styles-module_warning__SCK0X{background-color:var(--rt-color-warning);color:var(--rt-color-white)}.styles-module_error__JvumD{background-color:var(--rt-color-error);color:var(--rt-color-white)}.styles-module_info__BWdHW{background-color:var(--rt-color-info);color:var(--rt-color-white)}`,type:"base"})});function AnalyticsConsentForm(){const[cr,ar]=useLocalStorageState("analytics-consent",{defaultValue:!0});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row justify-around",children:[jsxRuntimeExports.jsx("label",{style:{borderBottom:"2px dotted #000"},htmlFor:"analytics-consent",className:"","data-tooltip-id":"analytics-consent-tooltip","data-tooltip-content":`Gameplay analytics contain information about the transactions your client attempts to send to the blockchain.
          We use this information to improve the stability, cost, and performance of Sky Strife. We do not collect any
          personal or identifying information.`,children:"I consent to send client gameplay analytics to help improve Sky Strife."}),jsxRuntimeExports.jsx("input",{id:"analytics-consent",type:"checkbox",className:"",checked:cr,onChange:dr=>ar(dr.target.checked)})]}),jsxRuntimeExports.jsx(B$1,{style:{width:"320px"},opacity:1,id:"analytics-consent-tooltip"})]})}function PromiseButton({size:cr,buttonType:ar,disabled:dr,className:fr,children:hr,promise:pr}){const[mr,gr]=React.useState(!1),yr=async()=>{if(!mr){gr(!0);try{await pr()}catch(xr){console.error(xr)}finally{gr(!1)}}};return jsxRuntimeExports.jsx(Button$1,{disabled:dr||mr,buttonType:ar,size:cr,className:fr,onClick:yr,children:mr?"Pending...":hr})}function ChooseUsernameForm(){const{components:{Name:cr},externalWorldContract:ar,executeSystemWithExternalWallet:dr}=useAmalgema(),{address:fr}=useExternalAccount$1(),hr=H$4(cr,fr?addressToEntityID(fr):"0")?.value,pr=te$5([Ye$3(cr)]).map(br=>g$7(cr,br)?.value),[mr,gr]=reactExports.useState(hr??""),yr=pr.includes(mr);if(reactExports.useEffect(()=>{mr.length>32&&gr(mr.slice(0,32))},[mr]),!ar||!fr)return;let xr="";yr?xr="Name taken":mr.length===0&&(xr="Save and Continue");const wr=yr||mr.length===0;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx(Heading,{className:"uppercase",children:"choose a name"}),jsxRuntimeExports.jsx(NetworkStatus,{})]}),jsxRuntimeExports.jsx(Body,{children:"Set a name to be associated with your wallet address."}),jsxRuntimeExports.jsx("div",{className:"h-8"}),jsxRuntimeExports.jsxs("form",{onSubmit:br=>{br.preventDefault(),wr||dr({systemCall:"setName",args:[[mr]]})},className:"flex flex-col items-start",children:[jsxRuntimeExports.jsx("label",{htmlFor:"username",className:"text-ss-text-x-light uppercase",children:"Username"}),jsxRuntimeExports.jsx("div",{className:"h-1"}),jsxRuntimeExports.jsx("input",{id:"username",className:"bg-ss-bg-0 rounded border border-ss-stroke w-full px-3 py-2 shadow-ss-small",placeholder:"Enter a username",value:mr,onChange:br=>gr(br.target.value)})]}),jsxRuntimeExports.jsx(AnalyticsConsentForm,{}),jsxRuntimeExports.jsx("div",{className:"h-6"}),jsxRuntimeExports.jsx("div",{className:"flex",children:jsxRuntimeExports.jsx(PromiseButton,{buttonType:"primary",disabled:wr,promise:()=>dr({systemCall:"setName",args:[[mr]]}),className:"uppercase grow",children:xr||"Save and Continue"})})]})}const formatAddress=cr=>cr.slice(0,6)+"..."+cr.slice(-4),SettingsModal=({address:cr,close:ar})=>{const{network:dr}=useAmalgema(),{publicClient:fr}=dr,hr=fr.chain.blockExplorers?.default.url,pr=reactExports.useRef(null);return useOnClickOutside(pr,ar),jsxRuntimeExports.jsx("div",{style:{background:"rgba(24, 23, 16, 0.65)",zIndex:100},className:"fixed top-0 left-0 w-screen h-screen flex flex-col justify-around",children:jsxRuntimeExports.jsx("div",{ref:pr,className:"mx-auto",children:jsxRuntimeExports.jsxs(Card,{primary:!0,className:"bg-ss-bg-1 flex flex-col justify-center p-8 w-fit w-[624px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx(OverlineLarge,{children:"Account"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",onClick:ar,className:"h-fit py-1",children:"Close"})]}),jsxRuntimeExports.jsx("div",{className:"h-8"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(OverlineSmall,{children:"Connection"}),jsxRuntimeExports.jsx(ConnectButton,{}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsx(OverlineSmall,{children:"Wallet address"}),hr?jsxRuntimeExports.jsx(Link,{href:`${hr}/address/${cr}
            `,children:cr}):jsxRuntimeExports.jsx("span",{children:cr})]}),jsxRuntimeExports.jsx("div",{className:"h-6"}),jsxRuntimeExports.jsx(ChooseUsernameForm,{})]})})})};function Profile({address:cr}){const{network:{components:{Name:ar}}}=useAmalgema(),[dr,fr]=reactExports.useState(!1),hr=H$4(ar,addressToEntityID(cr)),{data:pr}=useBalance({address:cr,watch:!0});return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Heading,{className:"text-lg",children:hr?hr.value:formatAddress(cr)}),jsxRuntimeExports.jsxs(Caption,{className:"text-sm text-ss-text-x-light",children:["Balance: ",pr?.formatted," ",pr?.symbol]})]}),jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",onClick:()=>fr(!0),className:"h-fit",children:"Settings"}),dr&&jsxRuntimeExports.jsx(SettingsModal,{address:cr,close:()=>fr(!1)})]})})}function SkyStrifeConnectButton(){const{openConnectModal:cr}=useConnectModal();return jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",className:"h-fit w-full",onClick:cr,children:"connect wallet"})}function CurrentProfile(){const{network:{initialiseWallet:cr}}=useAmalgema(),{address:ar}=useAccount(),{address:dr}=useExternalAccount$1();return useDrip(),reactExports.useEffect(()=>{cr(ar)},[ar,cr]),dr?jsxRuntimeExports.jsx(Profile,{address:dr}):jsxRuntimeExports.jsx(SkyStrifeConnectButton,{})}function createUnitOwnedByCurrentPlayerSystem(cr){const{world:ar,components:{LocalPosition:dr},parentLayers:{network:{components:{UnitType:fr,OwnedBy:hr,OwnedByCurrentPlayer:pr},utils:{isOwnedByCurrentPlayer:mr}}}}=cr;at$2(ar,[Ye$3(fr),Ye$3(dr),Ye$3(hr)],({entity:gr})=>{const yr=mr(gr);yr&&E$5(pr,gr,{value:yr})})}async function createLocalLayer(cr){const ar=xt$2(cr.parentLayers.network.network.world,"local"),{parentLayers:{network:{components:{Match:dr,MatchConfig:fr,SpawnReservedBy:hr,Player:pr,Name:mr,Untraversable:gr,Range:yr,Combat:xr,CombatOutcome:wr,OwnedBy:br},utils:{getOwningPlayer:Sr,isOwnedByCurrentPlayer:vr,getLevelSpawns:Er},network:{matchEntity:Ar},api:{move:_r,moveAndAttack:Cr}}},components:kr,api:{calculateMovementPath:Rr}}=cr,Ir=defineLocalPositionComponent(ar),Nr=defineLocalEntityTypeComponent(ar),Pr=definePathComponent(ar),Tr=defineSelectionComponent(ar),Br=defineSelectedComponent(ar),Fr=defineSelectableComponent(ar),jr=ie$4(ar,{x:P$1.NumberArray,y:P$1.NumberArray,costs:P$1.NumberArray},{id:"PotentialPath"}),Ur=ie$4(ar,{value:P$1.EntityArray},{id:"AttackableEntities"}),qr=ie$4(ar,{value:P$1.String},{id:"LocalName"}),Hr=ie$4(ar,{value:P$1.Number},{id:"LocalHealth"}),Or=ie$4(ar,{value:P$1.Boolean},{id:"DevMode"}),Mr=ie$4(ar,{on:P$1.Entity,type:P$1.Number,message:P$1.String},{id:"Alert"}),Lr=ie$4(ar,{teleportee:P$1.Entity,entrance:P$1.Entity},{id:"ChoosingTeleportLocation"}),Vr=ie$4(ar,{showPreferences:P$1.Boolean,hideTutorial:P$1.Boolean,muteMusic:P$1.Boolean,musicVolume:P$1.Number,disableClouds:P$1.Boolean,disableBackground:P$1.Boolean},{id:"Preferences"}),Jr=ie$4(ar,{hideLoading:P$1.Boolean},{id:"UIState"}),es=ie$4(ar,{value:P$1.Boolean},{id:"Interactable"}),ns=ie$4(ar,{value:P$1.Entity},{id:"Capturer"}),Qr=ie$4(ar,{value:P$1.Boolean},{id:"MatchStarted"}),zr={Alert:Mr,AttackableEntities:Ur,Capturer:ns,ChoosingTeleportLocation:Lr,DevMode:Or,Interactable:es,LocalEntityType:Nr,LocalHealth:Hr,LocalName:qr,LocalPosition:Ir,MatchStarted:Qr,Path:Pr,PotentialPath:jr,Preferences:Vr,Selectable:Fr,Selected:Br,Selection:Tr,UIState:Jr};E$5(Tr,f$8,{x:0,y:0,width:0,height:0}),E$5(Or,f$8,{value:!1});function Wr(vs){E$5(Tr,f$8,vs??{x:0,y:0,width:0,height:0})}function ss(vs=!0){if(vs){const Ps=[...A$6([Ye$3(Br)])][0];Ps&&ue$2(kr.NextPosition,Ps)}E$5(Tr,f$8,{x:0,y:0,width:0,height:0})}function Xr(vs){for(const Ps of V$4(Br))ue$2(kr.NextPosition,Ps),ue$2(Br,Ps);g$7(Fr,vs)&&E$5(Br,vs,{value:!0})}function ts(){return de$2(Or,f$8).value}function fs(vs){E$5(Vr,f$8,vs),localStorage.setItem("preferences",JSON.stringify(vs))}function rs(){const vs=g$7(Vr,f$8);if(vs)return vs;const Ps=localStorage.getItem("preferences");return Ps?JSON.parse(Ps):{hideTutorial:!1,muteMusic:!1,showPreferences:!1,musicVolume:50,disableClouds:!1,disableBackground:!1}}const as=rs();as&&E$5(Vr,f$8,as);function ps(vs){const Ps={color:16777215,name:"white"};if(Ar==null)return Ps;const Os=Sr(vs);if(!Os)return Ps;const zs=Array.from(A$6([Je$2(hr,{value:decodeMatchEntity(Os).entity})])).map(Zr=>ft$3(hr.metadata.keySchema,Zr)).filter(Zr=>Zr.matchEntity===Ar)[0];if(!zs)return Ps;const Hs=g$7(fr,Ar);if(!Hs)return Ps;const Cs=Er(Hs.levelId);Cs.sort();const ls=Cs.indexOf(zs.index);if(ls===-1)return Ps;const Kr=Object.entries(PLAYER_COLORS)[ls+1];return{color:parseInt(Kr[0],16),name:Kr[1]}}const xs=(vs,Ps)=>{if(le$3(kr.OnCooldown,vs)||A$6([Je$2(Ir,Ps),Ye$3(gr)]).size>0)return!1;const zs=g$7(jr,vs);if(!zs||zs.x.length===0)return!1;for(let Hs=0;Hs<zs.x.length;Hs++)if(zs.x[Hs]==Ps.x&&zs.y[Hs]==Ps.y)return!0;return!1},Ss=(vs,Ps)=>{const Os=Sr(vs),Ms=Sr(Ps);if(Os===Ms||!le$3(xr,Ps))return;const zs=g$7(yr,vs);if(zs&&zs.max>1||le$3(kr.OnCooldown,vs))return;const Hs=getClosestTraversablePositionToTarget(Ir,xs,vs,Ps);if(Hs)return Hs};function Ns(vs){const{parentLayers:{network:{network:{playerEntity:Ps}}}}=gs;let Os=!1;x$6(ar,merge$2(pr.update$,mr.update$),()=>{Os||(Os=!0,vs({playerId:Ps}))})}function Ts(vs){const Ps=g$7(br,vs)?.value;if(!Ps)return;const Os=g$7(mr,Ps),Ms=Os?Os.value:formatAddress(X$5(Ps)),zs=g$7(dr,vs)?.matchEntity;if(!zs)return;const Hs=ps(vs);return{player:vs,playerId:vs,name:Ms,playerColor:Hs,matchEntity:zs}}function os(vs){const{parentLayers:{network:{network:{playerEntity:Ps}}}}=gs;let Os=!1;x$6(ar,merge$2(pr.update$,mr.update$),()=>{if(Os)return;const Ms=Ts(Ps);Ms&&(Os=!0,vs(Ms))})}function bs(vs,Ps,Os){E$5(Lr,Ps,{teleportee:Os,entrance:vs})}const ws=vs=>{const Ps=k$6([Ye$3(Pr)]),Os=merge$2(wr.update$).pipe(concatMap(async Ms=>{const{value:zs}=Ms,[Hs]=zs;if(!Hs)return;const{matchEntity:Cs}=decodeMatchEntity(Ms.entity),ls=encodeMatchEntity(Cs,Hs.attacker),Kr=encodeMatchEntity(Cs,Hs.defender);if(le$3(Pr,ls)){const Zr=lr(Ps,({entity:ys})=>ls===ys),hs=U$4(1500);await Promise.any([Zr,hs])}return{attacker:ls,defender:Kr,attackerDamageReceived:Hs.attackerDamageReceived,defenderDamageReceived:Hs.defenderDamageReceived,attackerDamage:Hs.attackerDamage,defenderDamage:Hs.defenderDamage,ranged:Hs.ranged,attackerDied:Hs.attackerDied,defenderDied:Hs.defenderDied,defenderCaptured:Hs.defenderCaptured}}));x$6(ar,Os,Ms=>{Ms&&vs(Ms)})},As=async(vs,Ps,Os)=>{if(!vr(vs))return;const{NextPosition:Ms,OnCooldown:zs}=kr;if(le$3(zs,vs)){console.warn("on cooldown"),ue$2(Ms,vs);return}const Hs=g$7(Ir,vs);if(!Hs){console.warn("no current position"),ue$2(Ms,vs);return}const Cs=Rr(Ir,vs,Hs,Ps);if(Cs.length==0){console.warn("no path found from",Hs,"to",Ps),ue$2(Ms,vs);return}try{Os?await Cr(vs,Cs,Os):await _r(vs,Cs)}catch(ls){console.error(ls),ue$2(Ms,vs)}},gs={world:ar,components:zr,parentLayers:{...cr.parentLayers,headless:cr},api:{startTeleport:bs,selectArea:Wr,selectEntity:Xr,resetSelection:ss,devModeEnabled:ts,getOwnerColor:ps,onPlayerLoaded:os,onAccountLoaded:Ns,hasPotentialPath:xs,canMoveToAndAttack:Ss,canAttack:cr.api.canAttack,persistPreferences:fs,getPreferences:rs,getPlayerInfo:Ts,systemDecoders:{onCombat:ws},move:As,attack:cr.api.attack},singletonEntity:f$8};return createSelectionSystem(gs),createSyncSystem(gs),createPositionSystem(gs),createPathSystem(gs),createPotentialPathSystem(gs),createAttackableEntitiesSystem(gs),createPositionErrorFallbackSystem(gs),createMatchStartSystem(gs),createUnitOwnedByCurrentPlayerSystem(gs),gs}const useLocalLayer=cr=>{const ar=reactExports.useMemo(()=>cr?createLocalLayer(cr):null,[cr]);return reactExports.useEffect(()=>()=>{ar?.then(dr=>dr.world.dispose())},[ar]),usePromiseValue(ar)},LocalLayer=({headlessLayer:cr})=>{const ar=useLocalLayer(cr);return reactExports.useEffect(()=>{ar&&useStore.setState({localLayer:ar})},[ar]),jsxRuntimeExports.jsx(PhaserLayer,{localLayer:ar})};async function attack(cr,ar,dr){const{network:fr}=cr,{utils:{isOwnedByCurrentPlayer:hr},network:{components:{Position:pr,Range:mr}},api:{attack:gr}}=fr;if(!hr(ar))return;const yr=ar,xr=dr,wr=g$7(pr,ar);if(!wr)return;const br=g$7(pr,dr);if(!br)return;const Sr=manhattan(wr,br),vr=g$7(mr,ar);vr&&(Sr<=vr.max||Sr>=vr.min)&&await gr(yr,xr)}function createCurrentStaminaSystem(cr){const{world:ar,turn$:dr,parentLayers:{network:{components:{Transaction:fr},network:{clock:hr,components:{Stamina:pr,LastAction:mr,ChargedByStart:gr,Chargee:yr,Charger:xr,UnitType:wr,Combat:br,StructureType:Sr,OwnedBy:vr}},components:{NetworkChargeCap:Er,ChargeCap:Ar},utils:{getTurnAtTimeForCurrentMatch:_r},api:{getCurrentMatchConfig:Cr}}},components:{LocalStamina:kr,Depleted:Rr,InCurrentMatch:Ir}}=cr,Nr=Pr=>{const Tr=Cr();if(!Tr)return;const Br=getCurrentTurn(BigNumber.from(Tr.startTime),BigNumber.from(Tr.turnLength),hr),Fr=g$7(mr,Pr);if(!Fr)return;const jr=Fr.value,Ur=Br-_r(Number(jr));let qr=0;[...A$6([Ye$3(Ir),Je$2(yr,{value:decodeMatchEntity(Pr).entity})])].forEach(Or=>{const Mr=g$7(xr,Or)?.value;if(!Mr)return;const Lr=de$2(gr,Or).value;let Vr;Lr>jr?Vr=Br-_r(Number(Lr)):Vr=Ur;let Jr=Vr*Mr;if(le$3(Er,Or)){const{cap:es,totalCharged:ns}=de$2(Er,Or);ns+Jr>=es&&(E$5(Rr,Or,{value:!0}),g$7(Sr,Or)?.value===StructureTypes.GoldMine&&(ue$2(br,Or),ue$2(vr,Or)),Jr=es-ns),E$5(Ar,Or,{totalCharged:Jr+ns,cap:es})}qr+=Jr}),qr<0&&(qr=0),E$5(kr,Pr,{current:qr})};_$4(ar,[Ye$3(pr),Ye$3(Ir)],({entity:Pr,value:Tr})=>{const[Br]=Tr;Br?.current!=null&&Nr(Pr)},{runOnInit:!0}),_$4(ar,[Ye$3(pr),Ye$3(Ar),Ye$3(Sr),Ye$3(br),Ye$3(vr),Ye$3(Ir)],({entity:Pr,value:Tr})=>{const[Br]=Tr;Br?.current!=null&&Nr(Pr)},{runOnInit:!0}),at$2(ar,[Ye$3(pr),Ye$3(Ir)],({entity:Pr})=>{Nr(Pr)}),_$4(ar,[Ye$3(pr),Ye$3(mr),Ye$3(Ir)],({entity:Pr})=>{Nr(Pr)}),x$6(ar,dr,()=>{for(const Pr of[...A$6([Ye$3(pr),Ye$3(Ir)])])Nr(Pr)}),_$4(ar,[Ye$3(Er),Ye$3(pr),Ye$3(Ir)],({entity:Pr})=>{Nr(Pr)}),_$4(ar,[Ye$3(Er),Ye$3(Ir),Ge$2(Ar)],({entity:Pr})=>{const Tr=de$2(Er,Pr);E$5(Ar,Pr,Tr)}),at$2(ar,[Ye$3(fr),Je$2(fr,{status:"completed"})],({entity:Pr})=>{const Tr=g$7(fr,Pr);Tr&&Tr.entity&&le$3(wr,Tr.entity)&&Nr(Tr.entity)})}function createScopeClientToMatchSystem(cr){const{world:ar,parentLayers:{network:{components:dr,components:{Match:fr,MatchConfig:hr,TerrainType:pr},network:{matchEntity:mr},utils:{getVirtualLevelData:gr}}},components:{InCurrentMatch:yr}}=cr;mr&&(_$4(ar,[Je$2(fr,{matchEntity:mr})],({entity:xr,type:wr})=>{wr===k$5.Exit?ue$2(yr,xr):E$5(yr,xr,{value:!0})}),at$2(ar,[Ye$3(hr)],({entity:xr})=>{if(xr!=mr)return;const{levelId:wr}=de$2(hr,xr);gr(wr).forEach((Sr,vr)=>{const Er=stringToHex(`levelIndex:${vr}`,{size:32}),{TerrainType:Ar,..._r}=Sr;E$5(pr,Er,{value:TerrainTypes[TerrainTypes[Sr.TerrainType.value]]});for(const[Cr,kr]of Object.entries(_r))E$5(dr[Cr],Er,kr);E$5(yr,Er,{value:!0})})}))}function createTurnStream(cr,ar){return ar.time$.pipe(map$1(()=>{const dr=cr();return dr?getCurrentTurn(dr.startTime,dr.turnLength,ar):-1}),filter$2(dr=>dr!==-1),distinctUntilChanged())}function createCooldownSystem(cr){const{world:ar,components:{OnCooldown:dr,InCurrentMatch:fr},parentLayers:{network:{network:{components:{LastAction:hr},clock:pr},utils:{getTurnAtTimeForCurrentMatch:mr}}}}=cr,gr=(yr,xr)=>{const br=de$2(hr,xr).value;mr(yr)<=mr(Number(br))?E$5(dr,xr,{value:!0}):ue$2(dr,xr)};x$6(ar,pr.time$,yr=>{const xr=yr/1e3;for(const wr of A$6([Ye$3(hr),Ye$3(fr)]))gr(xr,wr)}),_$4(ar,[Ye$3(hr),Ye$3(fr)],({entity:yr})=>{gr(pr.currentTime/1e3,yr)})}function createPreviousOwnerSystem(cr){const{parentLayers:{network:{components:{OwnedBy:ar}}},world:dr,components:{PreviousOwner:fr}}=cr;ut$3(dr,ar,({entity:hr,value:pr})=>{const[mr,gr]=pr;if(!le$3(fr,hr)&&mr!=null){E$5(fr,hr,{value:mr.value});return}const yr=gr?.value;yr!=null&&E$5(fr,hr,{value:yr})})}const{curry}=lodash;async function createHeadlessLayer(cr){const ar=xt$2(cr.network.world,"headless"),{utils:{getOwningPlayer:dr,isOwnedBy:fr},api:{getCurrentMatchConfig:hr},network:{clock:pr,components:{Combat:mr,Movable:gr,MoveDifficulty:yr,OwnedBy:xr,Position:wr,Range:br,Stamina:Sr,StructureType:vr,TerrainType:Er,UnitType:Ar,Untraversable:_r}}}=cr,Cr=ie$4(ar,{current:P$1.Number},{id:"LocalStamina"}),kr=ie$4(ar,{x:P$1.Number,y:P$1.Number,userCommittedToPosition:P$1.Boolean,intendedTarget:P$1.OptionalEntity},{id:"NextPosition"}),Rr=ie$4(ar,{value:P$1.Boolean},{id:"OnCooldown"}),Ir=ie$4(ar,{value:P$1.Boolean},{id:"Depleted"}),Nr=ie$4(ar,{value:P$1.Boolean},{id:"InCurrentMatch"}),Pr=ie$4(ar,{value:P$1.Entity},{id:"PreviousOwner"}),Tr={LocalStamina:Cr,OnCooldown:Rr,NextPosition:kr,Depleted:Ir,InCurrentMatch:Nr,PreviousOwner:Pr},Br=createTurnStream(()=>{const Qr=hr();if(Qr)return{startTime:BigNumber.from(Qr.startTime),turnLength:BigNumber.from(Qr.turnLength)}},pr),Fr=Qr=>{const zr=g$7(Sr,Qr)?.current;if(zr==null)return 0;const Wr=g$7(Cr,Qr)?.current;return Wr==null?0:zr+Wr},jr=()=>1e3,Ur=(Qr,zr,Wr,ss)=>{const Xr=A$6([Ye$3(Nr),Je$2(Qr,ss),Ye$3(_r)]);if(!(Xr.size>0))return!1;if(Wr)return!0;const fs=[...Xr][0];return le$3(vr,fs)?de$2(vr,fs).value!==StructureTypes.Container:!fr(fs,zr)},qr=(Qr,zr)=>{const Wr=[...A$6([Je$2(Qr,zr),Ye$3(yr)])][0];return Wr==null?1/0:de$2(yr,Wr).value};function Hr(Qr,zr){const Wr=Fr(Qr)<1e3,ss=Fr(zr)<1e3;if(Wr&&!ss)return 1;if(ss&&!Wr)return-1;const Xr=g$7(Ar,Qr)?.value,ts=g$7(Ar,zr)?.value;if(Xr&&ts&&Xr!==ts)return ts-Xr;const fs=g$7(vr,Qr)?.value,rs=g$7(vr,zr)?.value;return fs&&rs&&fs!==rs?rs-fs:Xr&&rs?-1:fs&&ts?1:0}const Or=(Qr,zr)=>{if(g$7(Rr,Qr))return!1;const ss=g$7(xr,Qr),Xr=g$7(xr,zr);if(!ss||ss.value===Xr?.value||!g$7(mr,zr))return!1;const fs=g$7(wr,Qr);if(!fs)return;const rs=g$7(wr,zr);if(!rs)return;const as=manhattan(fs,rs),ps=g$7(br,Qr);if(ps)return!(ps&&(as>ps.max||as<ps.min))};function Mr(Qr,zr,Wr){const ss=[];for(let Xr=Qr.y-Wr;Xr<=Qr.y+Wr;Xr++)for(let ts=Qr.x-Wr;ts<=Qr.x+Wr;ts++){const fs=manhattan(Qr,{x:ts,y:Xr});if(fs>=zr&&fs<=Wr){const rs=[...A$6([Ye$3(Nr),Je$2(wr,{x:ts,y:Xr}),Ge$2(Er)])][0];rs&&ss.push(rs)}}return ss}const Lr=(Qr,zr)=>{const Wr=g$7(xr,Qr);if(!Wr)return;const ss=g$7(br,Qr);let Xr;ss?Xr=Mr(zr,ss.min,ss.max):Xr=Mr(zr,1,1);const ts=[];for(const fs of Xr){if(!g$7(mr,fs))continue;const as=g$7(xr,fs);Wr.value!==as?.value&&ts.push(fs)}return ts},Vr=Qr=>{const zr=g$7(gr,Qr)?.value;if(zr)return zr},Jr=(Qr,zr,Wr,ss)=>{const Xr=dr(zr),ts=Vr(zr);return!Xr||!ts?[]:aStar(Wr,ss,ts/1e3,fs=>qr(Qr,fs)/1e3,curry(Ur)(Qr,Xr))},es=(Qr,zr,Wr,ss)=>{if(le$3(Rr,zr))return[];const Xr=g$7(Qr,zr);if(!Xr)return[];const ts=g$7(Qr,Wr);if(!ts)return[];const fs=g$7(br,zr);if(!fs)return[];if(ss){const ps=manhattan(ss,ts);if(ps<=fs.max&&ps>=fs.min){const xs=Jr(Qr,zr,Xr,ss);if(xs.length>0)return xs}}const as=getClosestTraversablePositionToTarget(wr,(ps,xs)=>[...A$6([Je$2(kr,{x:xs.x,y:xs.y,userCommittedToPosition:!0})])].filter(Ns=>Ns!==zr).length>0?!1:Jr(Qr,ps,Xr,xs).length>0,zr,Wr,fs.min,fs.max);return as?Jr(Qr,zr,Xr,as):[]},ns={world:ar,parentLayers:{network:cr},components:Tr,turn$:Br,api:{attack:curry(attack)({network:cr}),canAttack:Or,isUntraversable:Ur,getMovementDifficulty:qr,getAttackableEntities:Lr,unitSort:Hr,getCurrentStamina:Fr,calculateMovementPath:Jr,getMoveAndAttackPath:es,getMoveSpeed:Vr,getActionStaminaCost:jr,combat:{isPassive,isNeutralStructure,canRetaliate}}};return createCurrentStaminaSystem(ns),createCooldownSystem(ns),createScopeClientToMatchSystem(ns),createPreviousOwnerSystem(ns),ns}const useHeadlessLayer=cr=>{const ar=reactExports.useMemo(()=>cr?createHeadlessLayer(cr):null,[cr]);return reactExports.useEffect(()=>()=>{ar?.then(dr=>dr.world.dispose())},[ar]),usePromiseValue(ar)},HeadlessLayer=({networkLayer:cr})=>{const ar=useHeadlessLayer(cr);return reactExports.useEffect(()=>{ar&&useStore.setState({headlessLayer:ar})},[ar]),jsxRuntimeExports.jsx(LocalLayer,{headlessLayer:ar})},useMUD=()=>{const{networkLayer:cr,headlessLayer:ar,localLayer:dr,phaserLayer:fr,externalWalletClient:hr,externalWorldContract:pr}=useStore();if(cr===null||ar===null||dr===null||fr===null)throw new Error("Store not initialized");return window.layers===void 0&&(window.layers={networkLayer:cr,headlessLayer:ar,localLayer:dr,phaserLayer:fr},window.components={...cr.components,...ar.components,...dr.components,...fr.components},window.ecs={getComponentValue:g$7,getComponentValueStrict:de$2,runQuery:A$6,defineSystem:_$4}),{networkLayer:cr,headlessLayer:ar,localLayer:dr,phaserLayer:fr,externalWalletClient:hr,externalWorldContract:pr}};var reactIs$2={exports:{}},reactIs_production_min$1={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$2=Symbol.for("react.element"),c$2=Symbol.for("react.portal"),d$3=Symbol.for("react.fragment"),e$1=Symbol.for("react.strict_mode"),f$1=Symbol.for("react.profiler"),g$2=Symbol.for("react.provider"),h$2=Symbol.for("react.context"),k$2=Symbol.for("react.server_context"),l$1=Symbol.for("react.forward_ref"),m$3=Symbol.for("react.suspense"),n$1=Symbol.for("react.suspense_list"),p$1=Symbol.for("react.memo"),q$2=Symbol.for("react.lazy"),t$2=Symbol.for("react.offscreen"),u;u=Symbol.for("react.module.reference");function v$2(cr){if(typeof cr=="object"&&cr!==null){var ar=cr.$$typeof;switch(ar){case b$2:switch(cr=cr.type,cr){case d$3:case f$1:case e$1:case m$3:case n$1:return cr;default:switch(cr=cr&&cr.$$typeof,cr){case k$2:case h$2:case l$1:case q$2:case p$1:case g$2:return cr;default:return ar}}case c$2:return ar}}}reactIs_production_min$1.ContextConsumer=h$2;reactIs_production_min$1.ContextProvider=g$2;reactIs_production_min$1.Element=b$2;reactIs_production_min$1.ForwardRef=l$1;reactIs_production_min$1.Fragment=d$3;reactIs_production_min$1.Lazy=q$2;reactIs_production_min$1.Memo=p$1;reactIs_production_min$1.Portal=c$2;reactIs_production_min$1.Profiler=f$1;reactIs_production_min$1.StrictMode=e$1;reactIs_production_min$1.Suspense=m$3;reactIs_production_min$1.SuspenseList=n$1;reactIs_production_min$1.isAsyncMode=function(){return!1};reactIs_production_min$1.isConcurrentMode=function(){return!1};reactIs_production_min$1.isContextConsumer=function(cr){return v$2(cr)===h$2};reactIs_production_min$1.isContextProvider=function(cr){return v$2(cr)===g$2};reactIs_production_min$1.isElement=function(cr){return typeof cr=="object"&&cr!==null&&cr.$$typeof===b$2};reactIs_production_min$1.isForwardRef=function(cr){return v$2(cr)===l$1};reactIs_production_min$1.isFragment=function(cr){return v$2(cr)===d$3};reactIs_production_min$1.isLazy=function(cr){return v$2(cr)===q$2};reactIs_production_min$1.isMemo=function(cr){return v$2(cr)===p$1};reactIs_production_min$1.isPortal=function(cr){return v$2(cr)===c$2};reactIs_production_min$1.isProfiler=function(cr){return v$2(cr)===f$1};reactIs_production_min$1.isStrictMode=function(cr){return v$2(cr)===e$1};reactIs_production_min$1.isSuspense=function(cr){return v$2(cr)===m$3};reactIs_production_min$1.isSuspenseList=function(cr){return v$2(cr)===n$1};reactIs_production_min$1.isValidElementType=function(cr){return typeof cr=="string"||typeof cr=="function"||cr===d$3||cr===f$1||cr===e$1||cr===m$3||cr===n$1||cr===t$2||typeof cr=="object"&&cr!==null&&(cr.$$typeof===q$2||cr.$$typeof===p$1||cr.$$typeof===g$2||cr.$$typeof===h$2||cr.$$typeof===l$1||cr.$$typeof===u||cr.getModuleId!==void 0)};reactIs_production_min$1.typeOf=v$2;reactIs$2.exports=reactIs_production_min$1;var reactIsExports$1=reactIs$2.exports;function stylis_min(cr){function ar(zr,Wr,ss,Xr,ts){for(var fs=0,rs=0,as=0,ps=0,xs,Ss,Ns=0,Ts=0,os,bs=os=xs=0,ws=0,As=0,gs=0,vs=0,Ps=ss.length,Os=Ps-1,Ms,zs="",Hs="",Cs="",ls="",Kr;ws<Ps;){if(Ss=ss.charCodeAt(ws),ws===Os&&rs+ps+as+fs!==0&&(rs!==0&&(Ss=rs===47?10:47),ps=as=fs=0,Ps++,Os++),rs+ps+as+fs===0){if(ws===Os&&(0<As&&(zs=zs.replace(Sr,"")),0<zs.trim().length)){switch(Ss){case 32:case 9:case 59:case 13:case 10:break;default:zs+=ss.charAt(ws)}Ss=59}switch(Ss){case 123:for(zs=zs.trim(),xs=zs.charCodeAt(0),os=1,vs=++ws;ws<Ps;){switch(Ss=ss.charCodeAt(ws)){case 123:os++;break;case 125:os--;break;case 47:switch(Ss=ss.charCodeAt(ws+1)){case 42:case 47:e:{for(bs=ws+1;bs<Os;++bs)switch(ss.charCodeAt(bs)){case 47:if(Ss===42&&ss.charCodeAt(bs-1)===42&&ws+2!==bs){ws=bs+1;break e}break;case 10:if(Ss===47){ws=bs+1;break e}}ws=bs}}break;case 91:Ss++;case 40:Ss++;case 34:case 39:for(;ws++<Os&&ss.charCodeAt(ws)!==Ss;);}if(os===0)break;ws++}switch(os=ss.substring(vs,ws),xs===0&&(xs=(zs=zs.replace(br,"").trim()).charCodeAt(0)),xs){case 64:switch(0<As&&(zs=zs.replace(Sr,"")),Ss=zs.charCodeAt(1),Ss){case 100:case 109:case 115:case 45:As=Wr;break;default:As=Lr}if(os=ar(Wr,As,os,Ss,ts+1),vs=os.length,0<Jr&&(As=dr(Lr,zs,gs),Kr=gr(3,os,As,Wr,Hr,qr,vs,Ss,ts,Xr),zs=As.join(""),Kr!==void 0&&(vs=(os=Kr.trim()).length)===0&&(Ss=0,os="")),0<vs)switch(Ss){case 115:zs=zs.replace(Pr,mr);case 100:case 109:case 45:os=zs+"{"+os+"}";break;case 107:zs=zs.replace(kr,"$1 $2"),os=zs+"{"+os+"}",os=Mr===1||Mr===2&&pr("@"+os,3)?"@-webkit-"+os+"@"+os:"@"+os;break;default:os=zs+os,Xr===112&&(os=(Hs+=os,""))}else os="";break;default:os=ar(Wr,dr(Wr,zs,gs),os,Xr,ts+1)}Cs+=os,os=gs=As=bs=xs=0,zs="",Ss=ss.charCodeAt(++ws);break;case 125:case 59:if(zs=(0<As?zs.replace(Sr,""):zs).trim(),1<(vs=zs.length))switch(bs===0&&(xs=zs.charCodeAt(0),xs===45||96<xs&&123>xs)&&(vs=(zs=zs.replace(" ",":")).length),0<Jr&&(Kr=gr(1,zs,Wr,zr,Hr,qr,Hs.length,Xr,ts,Xr))!==void 0&&(vs=(zs=Kr.trim()).length)===0&&(zs="\0\0"),xs=zs.charCodeAt(0),Ss=zs.charCodeAt(1),xs){case 0:break;case 64:if(Ss===105||Ss===99){ls+=zs+ss.charAt(ws);break}default:zs.charCodeAt(vs-1)!==58&&(Hs+=hr(zs,xs,Ss,zs.charCodeAt(2)))}gs=As=bs=xs=0,zs="",Ss=ss.charCodeAt(++ws)}}switch(Ss){case 13:case 10:rs===47?rs=0:1+xs===0&&Xr!==107&&0<zs.length&&(As=1,zs+="\0"),0<Jr*ns&&gr(0,zs,Wr,zr,Hr,qr,Hs.length,Xr,ts,Xr),qr=1,Hr++;break;case 59:case 125:if(rs+ps+as+fs===0){qr++;break}default:switch(qr++,Ms=ss.charAt(ws),Ss){case 9:case 32:if(ps+fs+rs===0)switch(Ns){case 44:case 58:case 9:case 32:Ms="";break;default:Ss!==32&&(Ms=" ")}break;case 0:Ms="\\0";break;case 12:Ms="\\f";break;case 11:Ms="\\v";break;case 38:ps+rs+fs===0&&(As=gs=1,Ms="\f"+Ms);break;case 108:if(ps+rs+fs+Or===0&&0<bs)switch(ws-bs){case 2:Ns===112&&ss.charCodeAt(ws-3)===58&&(Or=Ns);case 8:Ts===111&&(Or=Ts)}break;case 58:ps+rs+fs===0&&(bs=ws);break;case 44:rs+as+ps+fs===0&&(As=1,Ms+="\r");break;case 34:case 39:rs===0&&(ps=ps===Ss?0:ps===0?Ss:ps);break;case 91:ps+rs+as===0&&fs++;break;case 93:ps+rs+as===0&&fs--;break;case 41:ps+rs+fs===0&&as--;break;case 40:if(ps+rs+fs===0){if(xs===0)switch(2*Ns+3*Ts){case 533:break;default:xs=1}as++}break;case 64:rs+as+ps+fs+bs+os===0&&(os=1);break;case 42:case 47:if(!(0<ps+fs+as))switch(rs){case 0:switch(2*Ss+3*ss.charCodeAt(ws+1)){case 235:rs=47;break;case 220:vs=ws,rs=42}break;case 42:Ss===47&&Ns===42&&vs+2!==ws&&(ss.charCodeAt(vs+2)===33&&(Hs+=ss.substring(vs,ws+1)),Ms="",rs=0)}}rs===0&&(zs+=Ms)}Ts=Ns,Ns=Ss,ws++}if(vs=Hs.length,0<vs){if(As=Wr,0<Jr&&(Kr=gr(2,Hs,As,zr,Hr,qr,vs,Xr,ts,Xr),Kr!==void 0&&(Hs=Kr).length===0))return ls+Hs+Cs;if(Hs=As.join(",")+"{"+Hs+"}",Mr*Or!==0){switch(Mr!==2||pr(Hs,2)||(Or=0),Or){case 111:Hs=Hs.replace(Ir,":-moz-$1")+Hs;break;case 112:Hs=Hs.replace(Rr,"::-webkit-input-$1")+Hs.replace(Rr,"::-moz-$1")+Hs.replace(Rr,":-ms-input-$1")+Hs}Or=0}}return ls+Hs+Cs}function dr(zr,Wr,ss){var Xr=Wr.trim().split(_r);Wr=Xr;var ts=Xr.length,fs=zr.length;switch(fs){case 0:case 1:var rs=0;for(zr=fs===0?"":zr[0]+" ";rs<ts;++rs)Wr[rs]=fr(zr,Wr[rs],ss).trim();break;default:var as=rs=0;for(Wr=[];rs<ts;++rs)for(var ps=0;ps<fs;++ps)Wr[as++]=fr(zr[ps]+" ",Xr[rs],ss).trim()}return Wr}function fr(zr,Wr,ss){var Xr=Wr.charCodeAt(0);switch(33>Xr&&(Xr=(Wr=Wr.trim()).charCodeAt(0)),Xr){case 38:return Wr.replace(Cr,"$1"+zr.trim());case 58:return zr.trim()+Wr.replace(Cr,"$1"+zr.trim());default:if(0<1*ss&&0<Wr.indexOf("\f"))return Wr.replace(Cr,(zr.charCodeAt(0)===58?"":"$1")+zr.trim())}return zr+Wr}function hr(zr,Wr,ss,Xr){var ts=zr+";",fs=2*Wr+3*ss+4*Xr;if(fs===944){zr=ts.indexOf(":",9)+1;var rs=ts.substring(zr,ts.length-1).trim();return rs=ts.substring(0,zr).trim()+rs+";",Mr===1||Mr===2&&pr(rs,1)?"-webkit-"+rs+rs:rs}if(Mr===0||Mr===2&&!pr(ts,1))return ts;switch(fs){case 1015:return ts.charCodeAt(10)===97?"-webkit-"+ts+ts:ts;case 951:return ts.charCodeAt(3)===116?"-webkit-"+ts+ts:ts;case 963:return ts.charCodeAt(5)===110?"-webkit-"+ts+ts:ts;case 1009:if(ts.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+ts+ts;case 978:return"-webkit-"+ts+"-moz-"+ts+ts;case 1019:case 983:return"-webkit-"+ts+"-moz-"+ts+"-ms-"+ts+ts;case 883:if(ts.charCodeAt(8)===45)return"-webkit-"+ts+ts;if(0<ts.indexOf("image-set(",11))return ts.replace(Ur,"$1-webkit-$2")+ts;break;case 932:if(ts.charCodeAt(4)===45)switch(ts.charCodeAt(5)){case 103:return"-webkit-box-"+ts.replace("-grow","")+"-webkit-"+ts+"-ms-"+ts.replace("grow","positive")+ts;case 115:return"-webkit-"+ts+"-ms-"+ts.replace("shrink","negative")+ts;case 98:return"-webkit-"+ts+"-ms-"+ts.replace("basis","preferred-size")+ts}return"-webkit-"+ts+"-ms-"+ts+ts;case 964:return"-webkit-"+ts+"-ms-flex-"+ts+ts;case 1023:if(ts.charCodeAt(8)!==99)break;return rs=ts.substring(ts.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+rs+"-webkit-"+ts+"-ms-flex-pack"+rs+ts;case 1005:return Er.test(ts)?ts.replace(vr,":-webkit-")+ts.replace(vr,":-moz-")+ts:ts;case 1e3:switch(rs=ts.substring(13).trim(),Wr=rs.indexOf("-")+1,rs.charCodeAt(0)+rs.charCodeAt(Wr)){case 226:rs=ts.replace(Nr,"tb");break;case 232:rs=ts.replace(Nr,"tb-rl");break;case 220:rs=ts.replace(Nr,"lr");break;default:return ts}return"-webkit-"+ts+"-ms-"+rs+ts;case 1017:if(ts.indexOf("sticky",9)===-1)break;case 975:switch(Wr=(ts=zr).length-10,rs=(ts.charCodeAt(Wr)===33?ts.substring(0,Wr):ts).substring(zr.indexOf(":",7)+1).trim(),fs=rs.charCodeAt(0)+(rs.charCodeAt(7)|0)){case 203:if(111>rs.charCodeAt(8))break;case 115:ts=ts.replace(rs,"-webkit-"+rs)+";"+ts;break;case 207:case 102:ts=ts.replace(rs,"-webkit-"+(102<fs?"inline-":"")+"box")+";"+ts.replace(rs,"-webkit-"+rs)+";"+ts.replace(rs,"-ms-"+rs+"box")+";"+ts}return ts+";";case 938:if(ts.charCodeAt(5)===45)switch(ts.charCodeAt(6)){case 105:return rs=ts.replace("-items",""),"-webkit-"+ts+"-webkit-box-"+rs+"-ms-flex-"+rs+ts;case 115:return"-webkit-"+ts+"-ms-flex-item-"+ts.replace(Br,"")+ts;default:return"-webkit-"+ts+"-ms-flex-line-pack"+ts.replace("align-content","").replace(Br,"")+ts}break;case 973:case 989:if(ts.charCodeAt(3)!==45||ts.charCodeAt(4)===122)break;case 931:case 953:if(jr.test(zr)===!0)return(rs=zr.substring(zr.indexOf(":")+1)).charCodeAt(0)===115?hr(zr.replace("stretch","fill-available"),Wr,ss,Xr).replace(":fill-available",":stretch"):ts.replace(rs,"-webkit-"+rs)+ts.replace(rs,"-moz-"+rs.replace("fill-",""))+ts;break;case 962:if(ts="-webkit-"+ts+(ts.charCodeAt(5)===102?"-ms-"+ts:"")+ts,ss+Xr===211&&ts.charCodeAt(13)===105&&0<ts.indexOf("transform",10))return ts.substring(0,ts.indexOf(";",27)+1).replace(Ar,"$1-webkit-$2")+ts}return ts}function pr(zr,Wr){var ss=zr.indexOf(Wr===1?":":"{"),Xr=zr.substring(0,Wr!==3?ss:10);return ss=zr.substring(ss+1,zr.length-1),es(Wr!==2?Xr:Xr.replace(Fr,"$1"),ss,Wr)}function mr(zr,Wr){var ss=hr(Wr,Wr.charCodeAt(0),Wr.charCodeAt(1),Wr.charCodeAt(2));return ss!==Wr+";"?ss.replace(Tr," or ($1)").substring(4):"("+Wr+")"}function gr(zr,Wr,ss,Xr,ts,fs,rs,as,ps,xs){for(var Ss=0,Ns=Wr,Ts;Ss<Jr;++Ss)switch(Ts=Vr[Ss].call(wr,zr,Ns,ss,Xr,ts,fs,rs,as,ps,xs)){case void 0:case!1:case!0:case null:break;default:Ns=Ts}if(Ns!==Wr)return Ns}function yr(zr){switch(zr){case void 0:case null:Jr=Vr.length=0;break;default:if(typeof zr=="function")Vr[Jr++]=zr;else if(typeof zr=="object")for(var Wr=0,ss=zr.length;Wr<ss;++Wr)yr(zr[Wr]);else ns=!!zr|0}return yr}function xr(zr){return zr=zr.prefix,zr!==void 0&&(es=null,zr?typeof zr!="function"?Mr=1:(Mr=2,es=zr):Mr=0),xr}function wr(zr,Wr){var ss=zr;if(33>ss.charCodeAt(0)&&(ss=ss.trim()),Qr=ss,ss=[Qr],0<Jr){var Xr=gr(-1,Wr,ss,ss,Hr,qr,0,0,0,0);Xr!==void 0&&typeof Xr=="string"&&(Wr=Xr)}var ts=ar(Lr,ss,Wr,0,0);return 0<Jr&&(Xr=gr(-2,ts,ss,ss,Hr,qr,ts.length,0,0,0),Xr!==void 0&&(ts=Xr)),Qr="",Or=0,qr=Hr=1,ts}var br=/^\0+/g,Sr=/[\0\r\f]/g,vr=/: */g,Er=/zoo|gra/,Ar=/([,: ])(transform)/g,_r=/,\r+?/g,Cr=/([\t\r\n ])*\f?&/g,kr=/@(k\w+)\s*(\S*)\s*/,Rr=/::(place)/g,Ir=/:(read-only)/g,Nr=/[svh]\w+-[tblr]{2}/,Pr=/\(\s*(.*)\s*\)/g,Tr=/([\s\S]*?);/g,Br=/-self|flex-/g,Fr=/[^]*?(:[rp][el]a[\w-]+)[^]*/,jr=/stretch|:\s*\w+\-(?:conte|avail)/,Ur=/([^-])(image-set\()/,qr=1,Hr=1,Or=0,Mr=1,Lr=[],Vr=[],Jr=0,es=null,ns=0,Qr="";return wr.use=yr,wr.set=xr,cr!==void 0&&xr(cr),wr}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function memoize(cr){var ar=Object.create(null);return function(dr){return ar[dr]===void 0&&(ar[dr]=cr(dr)),ar[dr]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize(function(cr){return reactPropsRegex.test(cr)||cr.charCodeAt(0)===111&&cr.charCodeAt(1)===110&&cr.charCodeAt(2)<91}),reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=typeof Symbol=="function"&&Symbol.for,c$1=b$1?Symbol.for("react.element"):60103,d$2=b$1?Symbol.for("react.portal"):60106,e=b$1?Symbol.for("react.fragment"):60107,f=b$1?Symbol.for("react.strict_mode"):60108,g$1=b$1?Symbol.for("react.profiler"):60114,h$1=b$1?Symbol.for("react.provider"):60109,k$1=b$1?Symbol.for("react.context"):60110,l=b$1?Symbol.for("react.async_mode"):60111,m$2=b$1?Symbol.for("react.concurrent_mode"):60111,n=b$1?Symbol.for("react.forward_ref"):60112,p=b$1?Symbol.for("react.suspense"):60113,q$1=b$1?Symbol.for("react.suspense_list"):60120,r$1=b$1?Symbol.for("react.memo"):60115,t$1=b$1?Symbol.for("react.lazy"):60116,v$1=b$1?Symbol.for("react.block"):60121,w$2=b$1?Symbol.for("react.fundamental"):60117,x$1=b$1?Symbol.for("react.responder"):60118,y$2=b$1?Symbol.for("react.scope"):60119;function z$1(cr){if(typeof cr=="object"&&cr!==null){var ar=cr.$$typeof;switch(ar){case c$1:switch(cr=cr.type,cr){case l:case m$2:case e:case g$1:case f:case p:return cr;default:switch(cr=cr&&cr.$$typeof,cr){case k$1:case n:case t$1:case r$1:case h$1:return cr;default:return ar}}case d$2:return ar}}}function A(cr){return z$1(cr)===m$2}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m$2;reactIs_production_min.ContextConsumer=k$1;reactIs_production_min.ContextProvider=h$1;reactIs_production_min.Element=c$1;reactIs_production_min.ForwardRef=n;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t$1;reactIs_production_min.Memo=r$1;reactIs_production_min.Portal=d$2;reactIs_production_min.Profiler=g$1;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p;reactIs_production_min.isAsyncMode=function(cr){return A(cr)||z$1(cr)===l};reactIs_production_min.isConcurrentMode=A;reactIs_production_min.isContextConsumer=function(cr){return z$1(cr)===k$1};reactIs_production_min.isContextProvider=function(cr){return z$1(cr)===h$1};reactIs_production_min.isElement=function(cr){return typeof cr=="object"&&cr!==null&&cr.$$typeof===c$1};reactIs_production_min.isForwardRef=function(cr){return z$1(cr)===n};reactIs_production_min.isFragment=function(cr){return z$1(cr)===e};reactIs_production_min.isLazy=function(cr){return z$1(cr)===t$1};reactIs_production_min.isMemo=function(cr){return z$1(cr)===r$1};reactIs_production_min.isPortal=function(cr){return z$1(cr)===d$2};reactIs_production_min.isProfiler=function(cr){return z$1(cr)===g$1};reactIs_production_min.isStrictMode=function(cr){return z$1(cr)===f};reactIs_production_min.isSuspense=function(cr){return z$1(cr)===p};reactIs_production_min.isValidElementType=function(cr){return typeof cr=="string"||typeof cr=="function"||cr===e||cr===m$2||cr===g$1||cr===f||cr===p||cr===q$1||typeof cr=="object"&&cr!==null&&(cr.$$typeof===t$1||cr.$$typeof===r$1||cr.$$typeof===h$1||cr.$$typeof===k$1||cr.$$typeof===n||cr.$$typeof===w$2||cr.$$typeof===x$1||cr.$$typeof===y$2||cr.$$typeof===v$1)};reactIs_production_min.typeOf=z$1;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;function getStatics(cr){return reactIs.isMemo(cr)?MEMO_STATICS:TYPE_STATICS[cr.$$typeof]||REACT_STATICS}var defineProperty$1=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(cr,ar,dr){if(typeof ar!="string"){if(objectPrototype){var fr=getPrototypeOf(ar);fr&&fr!==objectPrototype&&hoistNonReactStatics(cr,fr,dr)}var hr=getOwnPropertyNames(ar);getOwnPropertySymbols&&(hr=hr.concat(getOwnPropertySymbols(ar)));for(var pr=getStatics(cr),mr=getStatics(ar),gr=0;gr<hr.length;++gr){var yr=hr[gr];if(!KNOWN_STATICS[yr]&&!(dr&&dr[yr])&&!(mr&&mr[yr])&&!(pr&&pr[yr])){var xr=getOwnPropertyDescriptor(ar,yr);try{defineProperty$1(cr,yr,xr)}catch{}}}}return cr}var hoistNonReactStatics_cjs=hoistNonReactStatics;const m$1=getDefaultExportFromCjs(hoistNonReactStatics_cjs);function y$1(){return(y$1=Object.assign||function(cr){for(var ar=1;ar<arguments.length;ar++){var dr=arguments[ar];for(var fr in dr)Object.prototype.hasOwnProperty.call(dr,fr)&&(cr[fr]=dr[fr])}return cr}).apply(this,arguments)}var v=function(cr,ar){for(var dr=[cr[0]],fr=0,hr=ar.length;fr<hr;fr+=1)dr.push(ar[fr],cr[fr+1]);return dr},g=function(cr){return cr!==null&&typeof cr=="object"&&(cr.toString?cr.toString():Object.prototype.toString.call(cr))==="[object Object]"&&!reactIsExports$1.typeOf(cr)},S$1=Object.freeze([]),w$1=Object.freeze({});function E$1(cr){return typeof cr=="function"}function b(cr){return cr.displayName||cr.name||"Component"}function _(cr){return cr&&typeof cr.styledComponentId=="string"}var N$1=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",C=typeof window<"u"&&"HTMLElement"in window,I=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY));function D(cr){for(var ar=arguments.length,dr=new Array(ar>1?ar-1:0),fr=1;fr<ar;fr++)dr[fr-1]=arguments[fr];throw new Error("An error occurred. See https://git.io/JUIaE#"+cr+" for more information."+(dr.length>0?" Args: "+dr.join(", "):""))}var j=function(){function cr(dr){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=dr}var ar=cr.prototype;return ar.indexOfGroup=function(dr){for(var fr=0,hr=0;hr<dr;hr++)fr+=this.groupSizes[hr];return fr},ar.insertRules=function(dr,fr){if(dr>=this.groupSizes.length){for(var hr=this.groupSizes,pr=hr.length,mr=pr;dr>=mr;)(mr<<=1)<0&&D(16,""+dr);this.groupSizes=new Uint32Array(mr),this.groupSizes.set(hr),this.length=mr;for(var gr=pr;gr<mr;gr++)this.groupSizes[gr]=0}for(var yr=this.indexOfGroup(dr+1),xr=0,wr=fr.length;xr<wr;xr++)this.tag.insertRule(yr,fr[xr])&&(this.groupSizes[dr]++,yr++)},ar.clearGroup=function(dr){if(dr<this.length){var fr=this.groupSizes[dr],hr=this.indexOfGroup(dr),pr=hr+fr;this.groupSizes[dr]=0;for(var mr=hr;mr<pr;mr++)this.tag.deleteRule(hr)}},ar.getGroup=function(dr){var fr="";if(dr>=this.length||this.groupSizes[dr]===0)return fr;for(var hr=this.groupSizes[dr],pr=this.indexOfGroup(dr),mr=pr+hr,gr=pr;gr<mr;gr++)fr+=this.tag.getRule(gr)+`/*!sc*/
`;return fr},cr}(),T=new Map,x=new Map,k=1,V$1=function(cr){if(T.has(cr))return T.get(cr);for(;x.has(k);)k++;var ar=k++;return T.set(cr,ar),x.set(ar,cr),ar},B=function(cr){return x.get(cr)},z=function(cr,ar){ar>=k&&(k=ar+1),T.set(cr,ar),x.set(ar,cr)},M$1="style["+N$1+'][data-styled-version="5.3.11"]',G=new RegExp("^"+N$1+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),L=function(cr,ar,dr){for(var fr,hr=dr.split(","),pr=0,mr=hr.length;pr<mr;pr++)(fr=hr[pr])&&cr.registerName(ar,fr)},F=function(cr,ar){for(var dr=(ar.textContent||"").split(`/*!sc*/
`),fr=[],hr=0,pr=dr.length;hr<pr;hr++){var mr=dr[hr].trim();if(mr){var gr=mr.match(G);if(gr){var yr=0|parseInt(gr[1],10),xr=gr[2];yr!==0&&(z(xr,yr),L(cr,xr,gr[3]),cr.getTag().insertRules(yr,fr)),fr.length=0}else fr.push(mr)}}},Y=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},q=function(cr){var ar=document.head,dr=cr||ar,fr=document.createElement("style"),hr=function(gr){for(var yr=gr.childNodes,xr=yr.length;xr>=0;xr--){var wr=yr[xr];if(wr&&wr.nodeType===1&&wr.hasAttribute(N$1))return wr}}(dr),pr=hr!==void 0?hr.nextSibling:null;fr.setAttribute(N$1,"active"),fr.setAttribute("data-styled-version","5.3.11");var mr=Y();return mr&&fr.setAttribute("nonce",mr),dr.insertBefore(fr,pr),fr},H=function(){function cr(dr){var fr=this.element=q(dr);fr.appendChild(document.createTextNode("")),this.sheet=function(hr){if(hr.sheet)return hr.sheet;for(var pr=document.styleSheets,mr=0,gr=pr.length;mr<gr;mr++){var yr=pr[mr];if(yr.ownerNode===hr)return yr}D(17)}(fr),this.length=0}var ar=cr.prototype;return ar.insertRule=function(dr,fr){try{return this.sheet.insertRule(fr,dr),this.length++,!0}catch{return!1}},ar.deleteRule=function(dr){this.sheet.deleteRule(dr),this.length--},ar.getRule=function(dr){var fr=this.sheet.cssRules[dr];return fr!==void 0&&typeof fr.cssText=="string"?fr.cssText:""},cr}(),$$1=function(){function cr(dr){var fr=this.element=q(dr);this.nodes=fr.childNodes,this.length=0}var ar=cr.prototype;return ar.insertRule=function(dr,fr){if(dr<=this.length&&dr>=0){var hr=document.createTextNode(fr),pr=this.nodes[dr];return this.element.insertBefore(hr,pr||null),this.length++,!0}return!1},ar.deleteRule=function(dr){this.element.removeChild(this.nodes[dr]),this.length--},ar.getRule=function(dr){return dr<this.length?this.nodes[dr].textContent:""},cr}(),W=function(){function cr(dr){this.rules=[],this.length=0}var ar=cr.prototype;return ar.insertRule=function(dr,fr){return dr<=this.length&&(this.rules.splice(dr,0,fr),this.length++,!0)},ar.deleteRule=function(dr){this.rules.splice(dr,1),this.length--},ar.getRule=function(dr){return dr<this.length?this.rules[dr]:""},cr}(),U=C,J={isServer:!C,useCSSOMInjection:!I},X=function(){function cr(dr,fr,hr){dr===void 0&&(dr=w$1),fr===void 0&&(fr={}),this.options=y$1({},J,{},dr),this.gs=fr,this.names=new Map(hr),this.server=!!dr.isServer,!this.server&&C&&U&&(U=!1,function(pr){for(var mr=document.querySelectorAll(M$1),gr=0,yr=mr.length;gr<yr;gr++){var xr=mr[gr];xr&&xr.getAttribute(N$1)!=="active"&&(F(pr,xr),xr.parentNode&&xr.parentNode.removeChild(xr))}}(this))}cr.registerId=function(dr){return V$1(dr)};var ar=cr.prototype;return ar.reconstructWithOptions=function(dr,fr){return fr===void 0&&(fr=!0),new cr(y$1({},this.options,{},dr),this.gs,fr&&this.names||void 0)},ar.allocateGSInstance=function(dr){return this.gs[dr]=(this.gs[dr]||0)+1},ar.getTag=function(){return this.tag||(this.tag=(hr=(fr=this.options).isServer,pr=fr.useCSSOMInjection,mr=fr.target,dr=hr?new W(mr):pr?new H(mr):new $$1(mr),new j(dr)));var dr,fr,hr,pr,mr},ar.hasNameForId=function(dr,fr){return this.names.has(dr)&&this.names.get(dr).has(fr)},ar.registerName=function(dr,fr){if(V$1(dr),this.names.has(dr))this.names.get(dr).add(fr);else{var hr=new Set;hr.add(fr),this.names.set(dr,hr)}},ar.insertRules=function(dr,fr,hr){this.registerName(dr,fr),this.getTag().insertRules(V$1(dr),hr)},ar.clearNames=function(dr){this.names.has(dr)&&this.names.get(dr).clear()},ar.clearRules=function(dr){this.getTag().clearGroup(V$1(dr)),this.clearNames(dr)},ar.clearTag=function(){this.tag=void 0},ar.toString=function(){return function(dr){for(var fr=dr.getTag(),hr=fr.length,pr="",mr=0;mr<hr;mr++){var gr=B(mr);if(gr!==void 0){var yr=dr.names.get(gr),xr=fr.getGroup(mr);if(yr&&xr&&yr.size){var wr=N$1+".g"+mr+'[id="'+gr+'"]',br="";yr!==void 0&&yr.forEach(function(Sr){Sr.length>0&&(br+=Sr+",")}),pr+=""+xr+wr+'{content:"'+br+`"}/*!sc*/
`}}}return pr}(this)},cr}(),Z=/(a)(d)/gi,K=function(cr){return String.fromCharCode(cr+(cr>25?39:97))};function Q(cr){var ar,dr="";for(ar=Math.abs(cr);ar>52;ar=ar/52|0)dr=K(ar%52)+dr;return(K(ar%52)+dr).replace(Z,"$1-$2")}var ee=function(cr,ar){for(var dr=ar.length;dr;)cr=33*cr^ar.charCodeAt(--dr);return cr},te=function(cr){return ee(5381,cr)};function ne(cr){for(var ar=0;ar<cr.length;ar+=1){var dr=cr[ar];if(E$1(dr)&&!_(dr))return!1}return!0}var re=te("5.3.11"),oe=function(){function cr(ar,dr,fr){this.rules=ar,this.staticRulesId="",this.isStatic=(fr===void 0||fr.isStatic)&&ne(ar),this.componentId=dr,this.baseHash=ee(re,dr),this.baseStyle=fr,X.registerId(dr)}return cr.prototype.generateAndInjectStyles=function(ar,dr,fr){var hr=this.componentId,pr=[];if(this.baseStyle&&pr.push(this.baseStyle.generateAndInjectStyles(ar,dr,fr)),this.isStatic&&!fr.hash)if(this.staticRulesId&&dr.hasNameForId(hr,this.staticRulesId))pr.push(this.staticRulesId);else{var mr=_e(this.rules,ar,dr,fr).join(""),gr=Q(ee(this.baseHash,mr)>>>0);if(!dr.hasNameForId(hr,gr)){var yr=fr(mr,"."+gr,void 0,hr);dr.insertRules(hr,gr,yr)}pr.push(gr),this.staticRulesId=gr}else{for(var xr=this.rules.length,wr=ee(this.baseHash,fr.hash),br="",Sr=0;Sr<xr;Sr++){var vr=this.rules[Sr];if(typeof vr=="string")br+=vr;else if(vr){var Er=_e(vr,ar,dr,fr),Ar=Array.isArray(Er)?Er.join(""):Er;wr=ee(wr,Ar+Sr),br+=Ar}}if(br){var _r=Q(wr>>>0);if(!dr.hasNameForId(hr,_r)){var Cr=fr(br,"."+_r,void 0,hr);dr.insertRules(hr,_r,Cr)}pr.push(_r)}}return pr.join(" ")},cr}(),se=/^\s*\/\/.*$/gm,ie=[":","[",".","#"];function ae(cr){var ar,dr,fr,hr,pr=cr===void 0?w$1:cr,mr=pr.options,gr=mr===void 0?w$1:mr,yr=pr.plugins,xr=yr===void 0?S$1:yr,wr=new stylis_min(gr),br=[],Sr=function(Ar){function _r(Cr){if(Cr)try{Ar(Cr+"}")}catch{}}return function(Cr,kr,Rr,Ir,Nr,Pr,Tr,Br,Fr,jr){switch(Cr){case 1:if(Fr===0&&kr.charCodeAt(0)===64)return Ar(kr+";"),"";break;case 2:if(Br===0)return kr+"/*|*/";break;case 3:switch(Br){case 102:case 112:return Ar(Rr[0]+kr),"";default:return kr+(jr===0?"/*|*/":"")}case-2:kr.split("/*|*/}").forEach(_r)}}}(function(Ar){br.push(Ar)}),vr=function(Ar,_r,Cr){return _r===0&&ie.indexOf(Cr[dr.length])!==-1||Cr.match(hr)?Ar:"."+ar};function Er(Ar,_r,Cr,kr){kr===void 0&&(kr="&");var Rr=Ar.replace(se,""),Ir=_r&&Cr?Cr+" "+_r+" { "+Rr+" }":Rr;return ar=kr,dr=_r,fr=new RegExp("\\"+dr+"\\b","g"),hr=new RegExp("(\\"+dr+"\\b){2,}"),wr(Cr||!_r?"":_r,Ir)}return wr.use([].concat(xr,[function(Ar,_r,Cr){Ar===2&&Cr.length&&Cr[0].lastIndexOf(dr)>0&&(Cr[0]=Cr[0].replace(fr,vr))},Sr,function(Ar){if(Ar===-2){var _r=br;return br=[],_r}}])),Er.hash=xr.length?xr.reduce(function(Ar,_r){return _r.name||D(15),ee(Ar,_r.name)},5381).toString():"",Er}var ce=React.createContext();ce.Consumer;var le=React.createContext(),de=(le.Consumer,new X),he=ae();function pe(){return reactExports.useContext(ce)||de}function fe(){return reactExports.useContext(le)||he}var ye=function(){function cr(ar,dr){var fr=this;this.inject=function(hr,pr){pr===void 0&&(pr=he);var mr=fr.name+pr.hash;hr.hasNameForId(fr.id,mr)||hr.insertRules(fr.id,mr,pr(fr.rules,mr,"@keyframes"))},this.toString=function(){return D(12,String(fr.name))},this.name=ar,this.id="sc-keyframes-"+ar,this.rules=dr}return cr.prototype.getName=function(ar){return ar===void 0&&(ar=he),this.name+ar.hash},cr}(),ve=/([A-Z])/,ge=/([A-Z])/g,Se=/^ms-/,we=function(cr){return"-"+cr.toLowerCase()};function Ee(cr){return ve.test(cr)?cr.replace(ge,we).replace(Se,"-ms-"):cr}var be=function(cr){return cr==null||cr===!1||cr===""};function _e(cr,ar,dr,fr){if(Array.isArray(cr)){for(var hr,pr=[],mr=0,gr=cr.length;mr<gr;mr+=1)(hr=_e(cr[mr],ar,dr,fr))!==""&&(Array.isArray(hr)?pr.push.apply(pr,hr):pr.push(hr));return pr}if(be(cr))return"";if(_(cr))return"."+cr.styledComponentId;if(E$1(cr)){if(typeof(xr=cr)!="function"||xr.prototype&&xr.prototype.isReactComponent||!ar)return cr;var yr=cr(ar);return _e(yr,ar,dr,fr)}var xr;return cr instanceof ye?dr?(cr.inject(dr,fr),cr.getName(fr)):cr:g(cr)?function wr(br,Sr){var vr,Er,Ar=[];for(var _r in br)br.hasOwnProperty(_r)&&!be(br[_r])&&(Array.isArray(br[_r])&&br[_r].isCss||E$1(br[_r])?Ar.push(Ee(_r)+":",br[_r],";"):g(br[_r])?Ar.push.apply(Ar,wr(br[_r],_r)):Ar.push(Ee(_r)+": "+(vr=_r,(Er=br[_r])==null||typeof Er=="boolean"||Er===""?"":typeof Er!="number"||Er===0||vr in unitlessKeys||vr.startsWith("--")?String(Er).trim():Er+"px")+";"));return Sr?[Sr+" {"].concat(Ar,["}"]):Ar}(cr):cr.toString()}var Ne=function(cr){return Array.isArray(cr)&&(cr.isCss=!0),cr};function Ae(cr){for(var ar=arguments.length,dr=new Array(ar>1?ar-1:0),fr=1;fr<ar;fr++)dr[fr-1]=arguments[fr];return E$1(cr)||g(cr)?Ne(_e(v(S$1,[cr].concat(dr)))):dr.length===0&&cr.length===1&&typeof cr[0]=="string"?cr:Ne(_e(v(cr,dr)))}var Oe=function(cr,ar,dr){return dr===void 0&&(dr=w$1),cr.theme!==dr.theme&&cr.theme||ar||dr.theme},Re=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,De=/(^-|-$)/g;function je(cr){return cr.replace(Re,"-").replace(De,"")}var Te=function(cr){return Q(te(cr)>>>0)};function xe(cr){return typeof cr=="string"&&!0}var ke=function(cr){return typeof cr=="function"||typeof cr=="object"&&cr!==null&&!Array.isArray(cr)},Ve=function(cr){return cr!=="__proto__"&&cr!=="constructor"&&cr!=="prototype"};function Be(cr,ar,dr){var fr=cr[dr];ke(ar)&&ke(fr)?ze(fr,ar):cr[dr]=ar}function ze(cr){for(var ar=arguments.length,dr=new Array(ar>1?ar-1:0),fr=1;fr<ar;fr++)dr[fr-1]=arguments[fr];for(var hr=0,pr=dr;hr<pr.length;hr++){var mr=pr[hr];if(ke(mr))for(var gr in mr)Ve(gr)&&Be(cr,mr[gr],gr)}return cr}var Me=React.createContext();Me.Consumer;var Fe={};function Ye(cr,ar,dr){var fr=_(cr),hr=!xe(cr),pr=ar.attrs,mr=pr===void 0?S$1:pr,gr=ar.componentId,yr=gr===void 0?function(kr,Rr){var Ir=typeof kr!="string"?"sc":je(kr);Fe[Ir]=(Fe[Ir]||0)+1;var Nr=Ir+"-"+Te("5.3.11"+Ir+Fe[Ir]);return Rr?Rr+"-"+Nr:Nr}(ar.displayName,ar.parentComponentId):gr,xr=ar.displayName,wr=xr===void 0?function(kr){return xe(kr)?"styled."+kr:"Styled("+b(kr)+")"}(cr):xr,br=ar.displayName&&ar.componentId?je(ar.displayName)+"-"+ar.componentId:ar.componentId||yr,Sr=fr&&cr.attrs?Array.prototype.concat(cr.attrs,mr).filter(Boolean):mr,vr=ar.shouldForwardProp;fr&&cr.shouldForwardProp&&(vr=ar.shouldForwardProp?function(kr,Rr,Ir){return cr.shouldForwardProp(kr,Rr,Ir)&&ar.shouldForwardProp(kr,Rr,Ir)}:cr.shouldForwardProp);var Er,Ar=new oe(dr,br,fr?cr.componentStyle:void 0),_r=Ar.isStatic&&mr.length===0,Cr=function(kr,Rr){return function(Ir,Nr,Pr,Tr){var Br=Ir.attrs,Fr=Ir.componentStyle,jr=Ir.defaultProps,Ur=Ir.foldedComponentIds,qr=Ir.shouldForwardProp,Hr=Ir.styledComponentId,Or=Ir.target,Mr=function(Xr,ts,fs){Xr===void 0&&(Xr=w$1);var rs=y$1({},ts,{theme:Xr}),as={};return fs.forEach(function(ps){var xs,Ss,Ns,Ts=ps;for(xs in E$1(Ts)&&(Ts=Ts(rs)),Ts)rs[xs]=as[xs]=xs==="className"?(Ss=as[xs],Ns=Ts[xs],Ss&&Ns?Ss+" "+Ns:Ss||Ns):Ts[xs]}),[rs,as]}(Oe(Nr,reactExports.useContext(Me),jr)||w$1,Nr,Br),Lr=Mr[0],Vr=Mr[1],Jr=function(Xr,ts,fs,rs){var as=pe(),ps=fe(),xs=ts?Xr.generateAndInjectStyles(w$1,as,ps):Xr.generateAndInjectStyles(fs,as,ps);return xs}(Fr,Tr,Lr),es=Pr,ns=Vr.$as||Nr.$as||Vr.as||Nr.as||Or,Qr=xe(ns),zr=Vr!==Nr?y$1({},Nr,{},Vr):Nr,Wr={};for(var ss in zr)ss[0]!=="$"&&ss!=="as"&&(ss==="forwardedAs"?Wr.as=zr[ss]:(qr?qr(ss,isPropValid,ns):!Qr||isPropValid(ss))&&(Wr[ss]=zr[ss]));return Nr.style&&Vr.style!==Nr.style&&(Wr.style=y$1({},Nr.style,{},Vr.style)),Wr.className=Array.prototype.concat(Ur,Hr,Jr!==Hr?Jr:null,Nr.className,Vr.className).filter(Boolean).join(" "),Wr.ref=es,reactExports.createElement(ns,Wr)}(Er,kr,Rr,_r)};return Cr.displayName=wr,(Er=React.forwardRef(Cr)).attrs=Sr,Er.componentStyle=Ar,Er.displayName=wr,Er.shouldForwardProp=vr,Er.foldedComponentIds=fr?Array.prototype.concat(cr.foldedComponentIds,cr.styledComponentId):S$1,Er.styledComponentId=br,Er.target=fr?cr.target:cr,Er.withComponent=function(kr){var Rr=ar.componentId,Ir=function(Pr,Tr){if(Pr==null)return{};var Br,Fr,jr={},Ur=Object.keys(Pr);for(Fr=0;Fr<Ur.length;Fr++)Br=Ur[Fr],Tr.indexOf(Br)>=0||(jr[Br]=Pr[Br]);return jr}(ar,["componentId"]),Nr=Rr&&Rr+"-"+(xe(kr)?kr:je(b(kr)));return Ye(kr,y$1({},Ir,{attrs:Sr,componentId:Nr}),dr)},Object.defineProperty(Er,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(kr){this._foldedDefaultProps=fr?ze({},cr.defaultProps,kr):kr}}),Object.defineProperty(Er,"toString",{value:function(){return"."+Er.styledComponentId}}),hr&&m$1(Er,cr,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),Er}var qe=function(cr){return function ar(dr,fr,hr){if(hr===void 0&&(hr=w$1),!reactIsExports$1.isValidElementType(fr))return D(1,String(fr));var pr=function(){return dr(fr,hr,Ae.apply(void 0,arguments))};return pr.withConfig=function(mr){return ar(dr,fr,y$1({},hr,{},mr))},pr.attrs=function(mr){return ar(dr,fr,y$1({},hr,{attrs:Array.prototype.concat(hr.attrs,mr).filter(Boolean)}))},pr}(Ye,cr)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(cr){qe[cr]=qe(cr)});const styled=qe,Layer=styled.div`
  position: absolute;
  inset: 0;
  pointer-events: none;
`,ClickWrapper=cr=>{const{phaserLayer:{api:{mapInteraction:{disableMapInteraction:ar,enableMapInteraction:dr}}}}=useMUD();reactExports.useEffect(()=>()=>{dr()},[dr]);const{children:fr,style:hr}=cr;return jsxRuntimeExports.jsx("div",{...cr,onMouseEnter:()=>ar(),onMouseLeave:()=>dr(),style:{pointerEvents:"all",...hr},children:fr})},useAllPlayerDetails=cr=>{const{networkLayer:{components:{Player:ar,Match:dr}},localLayer:{api:{getPlayerInfo:fr}}}=useMUD(),hr=te$5([Ye$3(ar),...cr?[Je$2(dr,{matchEntity:cr})]:[]]);return lodashExports.compact(hr.map(mr=>fr(mr)))},PrototypeSpawner=()=>{const{networkLayer:{components:{Admin:cr,TemplateTables:ar},api:{dev:{spawnTemplateAt:dr}},network:{matchEntity:fr}},phaserLayer:{components:{HoverHighlight:hr},scenes:{Main:{input:pr}}}}=useMUD(),[mr,gr]=reactExports.useState(),[yr,xr]=reactExports.useState(),[wr,br]=reactExports.useState(!1),Sr=H$4(hr,f$8),Er=te$5([Ye$3(ar)]).map(Cr=>{const kr=hexToString(Cr,{size:32});return{id:Cr,name:kr,spawning:mr,toggleSpawning:()=>{gr(Cr)}}}).filter(({name:Cr})=>Cr),Ar=useAllPlayerDetails(fr||void 0),_r=te$5([Ye$3(cr)]);return reactExports.useEffect(()=>{if(!wr)return;const Cr=pr.click$.subscribe(()=>{mr&&Sr&&Sr?.x!=null&&Sr?.y!=null&&(dr(mr,{x:Sr.x,y:Sr.y},{owner:yr}),br(!1)),Cr.unsubscribe()});return()=>Cr.unsubscribe()},[Sr,pr.click$,yr,wr,dr,mr]),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("select",{value:mr,onChange:Cr=>gr(Cr.target.value),className:"mb-4",children:[jsxRuntimeExports.jsx("option",{value:void 0,children:"Select a prototype"}),Er.map(({id:Cr,name:kr})=>jsxRuntimeExports.jsx("option",{value:Cr,children:kr},Cr))]}),jsxRuntimeExports.jsxs("select",{value:yr,onChange:Cr=>xr(Cr.target.value),className:"mb-4",children:[jsxRuntimeExports.jsx("option",{value:BYTES32_ZERO,children:"No Owner"},BYTES32_ZERO),_r.map(Cr=>jsxRuntimeExports.jsx("option",{value:Cr,children:"Admin"},Cr)),Ar.map(Cr=>{const{playerId:kr,name:Rr}=Cr;return jsxRuntimeExports.jsx("option",{value:kr,children:Rr},kr)})]}),jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",onClick:()=>{mr&&br(!0)},children:mr?wr?`Spawning at (${Sr?.x}, ${Sr?.y})`:"Start Spawning":"Select a Prototype"})]})})},ComponentBrowser$1=()=>{const cr=useMUD(),{networkLayer:{network:{world:ar,worldContract:dr},components:fr},phaserLayer:{components:{DevHighlight:hr}}}=cr;return jsxRuntimeExports.jsx(ClickWrapper,{children:jsxRuntimeExports.jsx(ot$1,{world:ar,layers:{phaser:cr.phaserLayer,network:cr.networkLayer,local:cr.localLayer,headless:cr.headlessLayer},devHighlightComponent:hr,setContractComponentValue:(pr,mr,gr)=>{const yr=Object.values(fr).find(xr=>xr.id===mr.id);if(yr&&yr.metadata){const xr=[],wr=ft$3(yr.metadata.keySchema,pr);Object.values(wr).forEach(Er=>xr.push(Er));const{staticData:br,encodedLengths:Sr,dynamicData:vr}=z$2(yr.metadata.valueSchema,gr);dr.write.setRecord([yr.id,xr,br,Sr,vr])}}})})};function DevTools$1(){return useMUD(),reactExports.useEffect(()=>{},[]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}const Separator=()=>jsxRuntimeExports.jsx("div",{className:"border-b border-white-400 my-4 -mx-4"}),SectionTitle=({children:cr})=>jsxRuntimeExports.jsx("h1",{className:"self-start text-3xl text-white",children:cr}),Admin$1=()=>{const[cr,ar]=reactExports.useState(!1),{phaserLayer:{components:{HoverHighlight:dr}}}=useMUD(),fr=H$4(dr,f$8);return reactExports.useEffect(()=>{const hr=pr=>{pr.key==="\\"&&ar(mr=>!mr)};return window.addEventListener("keydown",hr),()=>{window.removeEventListener("keydown",hr)}},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DevTools$1,{}),cr&&jsxRuntimeExports.jsxs("div",{className:"fixed right-0 top-0 z-100 h-screen w-1/3",children:[jsxRuntimeExports.jsx("div",{className:"h-2/3",children:jsxRuntimeExports.jsx(ComponentBrowser$1,{})}),jsxRuntimeExports.jsxs(ClickWrapper,{className:"h-1/3 bg-[#1b1c20] p-4 overflow-y-scroll",children:[jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(SectionTitle,{children:"Prototypes"}),jsxRuntimeExports.jsx(PrototypeSpawner,{})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsx(OverlineLarge,{className:"text-white",children:" Hover Location "}),jsxRuntimeExports.jsxs(Body,{children:[fr?.x,", ",fr?.y]})]})]})]})},usePlayerGold=cr=>{const{networkLayer:{components:{Chargee:ar,Charger:dr}},headlessLayer:{components:{LocalStamina:fr,Depleted:hr,InCurrentMatch:pr},api:{getCurrentStamina:mr}}}=useMUD(),[gr,yr]=reactExports.useState(0),[xr,wr]=reactExports.useState(0),br=reactExports.useMemo(()=>fr.update$.pipe(filter$2(Er=>Er.entity===cr?.player)),[fr.update$,cr?.player]),Sr=reactExports.useMemo(()=>ar.update$.pipe(filter$2(Er=>Er.value[0]?.value===cr?.player)),[ar.update$,cr?.player]),vr=reactExports.useCallback(()=>cr?.player?[...A$6([Ye$3(pr),Je$2(ar,{value:decodeMatchEntity(cr.player).entity})])].reduce((_r,Cr)=>{if(le$3(hr,Cr))return _r;const kr=g$7(dr,Cr)?.value;return kr?_r+kr:_r},0):0,[cr?.player]);return reactExports.useEffect(()=>{if(!cr?.player)return;yr(mr(cr?.player)),wr(vr());const Er=merge$2(br,Sr).subscribe(()=>{cr?.player&&(yr(mr(cr.player)),wr(vr()))});return()=>Er.unsubscribe()},[br,mr,cr?.player,Sr,vr]),{amount:gr,regen:xr}},meta={app:"",version:"1.0.0"},textures=[{image:"atlas.png?timestamp=1708572971790",format:"RGBA8888",size:{w:2048,h:2048},scale:1,frames:[{filename:"sprites/greyscale/structures/big/forward-settlement/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:1,y:1,w:72,h:72}},{filename:"sprites/greyscale/structures/big/forward-settlement/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:75,y:1,w:72,h:72}},{filename:"sprites/greyscale/structures/big/forward-settlement/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:1,y:75,w:72,h:72}},{filename:"sprites/greyscale/structures/big/forward-settlement/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:75,y:75,w:72,h:72}},{filename:"sprites/greyscale/structures/big/forward-settlement/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:149,y:1,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement-2/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:149,y:75,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement-2/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:1,y:149,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement-2/10.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:75,y:149,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement-2/11.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:149,y:149,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement-2/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:223,y:1,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement-2/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:223,y:75,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement-2/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:223,y:149,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement-2/5.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:1,y:223,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement-2/6.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:75,y:223,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement-2/7.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:149,y:223,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement-2/8.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:223,y:223,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement-2/9.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:297,y:1,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:297,y:75,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:297,y:149,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement/10.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:297,y:223,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement/11.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:1,y:297,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:75,y:297,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:149,y:297,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:223,y:297,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement/5.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:297,y:297,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement/6.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:371,y:1,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement/7.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:371,y:75,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement/8.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:371,y:149,w:72,h:72}},{filename:"sprites/greyscale/structures/big/home-settlement/9.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:371,y:223,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/forward-settlement/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:371,y:297,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/forward-settlement/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:1,y:371,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/forward-settlement/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:75,y:371,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/forward-settlement/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:149,y:371,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/forward-settlement/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:223,y:371,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement-2/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:297,y:371,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement-2/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:371,y:371,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement-2/10.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:445,y:1,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement-2/11.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:445,y:75,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement-2/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:445,y:149,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement-2/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:445,y:223,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement-2/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:445,y:297,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement-2/5.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:445,y:371,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement-2/6.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:1,y:445,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement-2/7.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:75,y:445,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement-2/8.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:149,y:445,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement-2/9.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:223,y:445,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:297,y:445,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:371,y:445,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement/10.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:445,y:445,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement/11.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:519,y:1,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:519,y:75,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:519,y:149,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:519,y:223,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement/5.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:519,y:297,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement/6.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:519,y:371,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement/7.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:519,y:445,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement/8.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:1,y:519,w:72,h:72}},{filename:"sprites/tinted_images/blue/structures/big/home-settlement/9.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:75,y:519,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/forward-settlement/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:149,y:519,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/forward-settlement/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:223,y:519,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/forward-settlement/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:297,y:519,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/forward-settlement/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:371,y:519,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/forward-settlement/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:445,y:519,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement-2/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:519,y:519,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement-2/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:593,y:1,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement-2/10.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:593,y:75,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement-2/11.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:593,y:149,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement-2/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:593,y:223,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement-2/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:593,y:297,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement-2/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:593,y:371,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement-2/5.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:593,y:445,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement-2/6.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:593,y:519,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement-2/7.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:1,y:593,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement-2/8.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:75,y:593,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement-2/9.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:149,y:593,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:223,y:593,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:297,y:593,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement/10.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:371,y:593,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement/11.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:445,y:593,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:519,y:593,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:593,y:593,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:667,y:1,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement/5.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:667,y:75,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement/6.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:667,y:149,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement/7.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:667,y:223,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement/8.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:667,y:297,w:72,h:72}},{filename:"sprites/tinted_images/green/structures/big/home-settlement/9.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:667,y:371,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/forward-settlement/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:667,y:445,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/forward-settlement/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:667,y:519,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/forward-settlement/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:667,y:593,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/forward-settlement/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:1,y:667,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/forward-settlement/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:75,y:667,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement-2/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:149,y:667,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement-2/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:223,y:667,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement-2/10.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:297,y:667,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement-2/11.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:371,y:667,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement-2/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:445,y:667,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement-2/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:519,y:667,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement-2/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:593,y:667,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement-2/5.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:667,y:667,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement-2/6.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:741,y:1,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement-2/7.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:741,y:75,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement-2/8.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:741,y:149,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement-2/9.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:741,y:223,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:741,y:297,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:741,y:371,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement/10.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:741,y:445,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement/11.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:741,y:519,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:741,y:593,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:741,y:667,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:1,y:741,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement/5.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:75,y:741,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement/6.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:149,y:741,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement/7.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:223,y:741,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement/8.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:297,y:741,w:72,h:72}},{filename:"sprites/tinted_images/red/structures/big/home-settlement/9.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:371,y:741,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/forward-settlement/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:445,y:741,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/forward-settlement/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:519,y:741,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/forward-settlement/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:593,y:741,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/forward-settlement/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:667,y:741,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/forward-settlement/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:741,y:741,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement-2/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:815,y:1,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement-2/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:815,y:75,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement-2/10.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:815,y:149,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement-2/11.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:815,y:223,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement-2/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:815,y:297,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement-2/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:815,y:371,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement-2/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:815,y:445,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement-2/5.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:815,y:519,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement-2/6.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:815,y:593,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement-2/7.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:815,y:667,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement-2/8.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:815,y:741,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement-2/9.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:1,y:815,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:75,y:815,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:149,y:815,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement/10.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:223,y:815,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement/11.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:297,y:815,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:371,y:815,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:445,y:815,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:519,y:815,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement/5.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:593,y:815,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement/6.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:667,y:815,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement/7.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:741,y:815,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement/8.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:815,y:815,w:72,h:72}},{filename:"sprites/tinted_images/white/structures/big/home-settlement/9.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:889,y:1,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/forward-settlement/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:889,y:75,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/forward-settlement/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:889,y:149,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/forward-settlement/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:889,y:223,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/forward-settlement/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:889,y:297,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/forward-settlement/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:889,y:371,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement-2/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:889,y:445,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement-2/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:889,y:519,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement-2/10.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:889,y:593,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement-2/11.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:889,y:667,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement-2/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:889,y:741,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement-2/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:889,y:815,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement-2/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:1,y:889,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement-2/5.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:75,y:889,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement-2/6.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:149,y:889,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement-2/7.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:223,y:889,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement-2/8.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:297,y:889,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement-2/9.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:371,y:889,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement/0.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:445,y:889,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement/1.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:519,y:889,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement/10.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:593,y:889,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement/11.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:667,y:889,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement/2.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:741,y:889,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement/3.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:815,y:889,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement/4.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:889,y:889,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement/5.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:963,y:1,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement/6.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:963,y:75,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement/7.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:963,y:149,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement/8.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:963,y:223,w:72,h:72}},{filename:"sprites/tinted_images/yellow/structures/big/home-settlement/9.png",rotated:!1,trimmed:!1,sourceSize:{w:72,h:72},spriteSourceSize:{x:0,y:0,w:72,h:72},frame:{x:963,y:297,w:72,h:72}},{filename:"sprites/greyscale/structures/big/generators/metal/0.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/greyscale/structures/big/generators/metal/1.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:437,w:64,h:64}},{filename:"sprites/greyscale/structures/big/generators/metal/2.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:503,w:64,h:64}},{filename:"sprites/greyscale/structures/big/generators/metal/3.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:569,w:64,h:64}},{filename:"sprites/greyscale/structures/big/generators/metal/5.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/greyscale/units/brute/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:963,y:701,w:48,h:48}},{filename:"sprites/greyscale/units/brute/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:963,y:751,w:48,h:48}},{filename:"sprites/greyscale/units/brute/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:963,y:801,w:48,h:48}},{filename:"sprites/greyscale/units/brute/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:963,y:851,w:48,h:48}},{filename:"sprites/greyscale/units/brute/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:963,y:901,w:48,h:48}},{filename:"sprites/greyscale/units/brute/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:51,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:101,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:151,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:201,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:251,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:301,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:351,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:401,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:451,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:501,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:551,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:601,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:651,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:701,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:751,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:801,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:851,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:901,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:951,y:963,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1,y:1013,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:51,y:1013,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:101,y:1013,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:151,y:1013,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:201,y:1013,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:251,y:1013,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:301,y:1013,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:351,y:1013,w:48,h:48}},{filename:"sprites/greyscale/units/brute/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:401,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:451,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:501,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:551,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:601,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:651,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:701,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:751,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:801,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:851,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:901,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:951,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1037,y:1,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1037,y:51,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1037,y:101,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1037,y:151,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1037,y:201,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1037,y:251,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1037,y:301,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1037,y:351,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1029,y:401,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1029,y:451,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1029,y:501,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1029,y:551,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1029,y:601,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1029,y:651,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1013,y:701,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1013,y:751,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1013,y:801,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1013,y:851,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1013,y:901,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1001,y:951,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1001,y:1001,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/blue/units/brute/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:51,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:101,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:151,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:201,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:251,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:301,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:351,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:401,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:451,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:501,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:551,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:601,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:651,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:701,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:751,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:801,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:851,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:901,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:951,y:1063,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1001,y:1051,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1087,y:1,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1087,y:51,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1087,y:101,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1087,y:151,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1087,y:201,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1087,y:251,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1087,y:301,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1087,y:351,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1079,y:401,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1079,y:451,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1079,y:501,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1079,y:551,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1079,y:601,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1079,y:651,w:48,h:48}},{filename:"sprites/tinted_images/green/units/brute/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1063,y:701,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1063,y:751,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1063,y:801,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1063,y:851,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1063,y:901,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1051,y:951,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1051,y:1001,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1051,y:1051,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:51,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:101,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:151,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:201,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:251,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:301,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:351,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:401,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:451,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:501,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:551,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:601,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:651,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:701,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:751,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:801,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:851,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:901,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:951,y:1113,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1001,y:1101,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1051,y:1101,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1137,y:1,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1137,y:51,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1137,y:101,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1137,y:151,w:48,h:48}},{filename:"sprites/tinted_images/red/units/brute/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1137,y:201,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1137,y:251,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1137,y:301,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1137,y:351,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1129,y:401,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1129,y:451,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1129,y:501,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1129,y:551,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1129,y:601,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1129,y:651,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1113,y:701,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1113,y:751,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1113,y:801,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1113,y:851,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1113,y:901,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1101,y:951,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1101,y:1001,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1101,y:1051,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1101,y:1101,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:51,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:101,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:151,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:201,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:251,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:301,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:351,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:401,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:451,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:501,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:551,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:601,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:651,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:701,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:751,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:801,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:851,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:901,y:1163,w:48,h:48}},{filename:"sprites/tinted_images/yellow/units/brute/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:951,y:1163,w:48,h:48}},{filename:"sprites/greyscale/ui/enemy-selection/0.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:951,w:34,h:34}},{filename:"sprites/greyscale/ui/enemy-selection/1.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:987,w:34,h:34}},{filename:"sprites/greyscale/ui/enemy-selection/2.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:1023,w:34,h:34}},{filename:"sprites/greyscale/ui/enemy-selection/3.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:1059,w:34,h:34}},{filename:"sprites/tinted_images/blue/ui/enemy-selection/0.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:1095,w:34,h:34}},{filename:"sprites/tinted_images/blue/ui/enemy-selection/1.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:1131,w:34,h:34}},{filename:"sprites/tinted_images/blue/ui/enemy-selection/2.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1001,y:1167,w:34,h:34}},{filename:"sprites/tinted_images/blue/ui/enemy-selection/3.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1037,y:1167,w:34,h:34}},{filename:"sprites/tile_ui/red/outline/0.png",rotated:!1,trimmed:!1,sourceSize:{w:33,h:33},spriteSourceSize:{x:0,y:0,w:33,h:33},frame:{x:1073,y:1167,w:33,h:33}},{filename:"sprites/tile_ui/white/outline/0.png",rotated:!1,trimmed:!1,sourceSize:{w:33,h:33},spriteSourceSize:{x:0,y:0,w:33,h:33},frame:{x:1108,y:1151,w:33,h:33}},{filename:"sprites/tile_ui/yellow/outline/0.png",rotated:!1,trimmed:!1,sourceSize:{w:33,h:33},spriteSourceSize:{x:0,y:0,w:33,h:33},frame:{x:1143,y:1167,w:33,h:33}},{filename:"sprites/arrows/attack/0-end.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:1,w:32,h:32}},{filename:"sprites/arrows/attack/0-start.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:35,w:32,h:32}},{filename:"sprites/arrows/attack/02.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:69,w:32,h:32}},{filename:"sprites/arrows/attack/04.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:103,w:32,h:32}},{filename:"sprites/arrows/attack/06.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:137,w:32,h:32}},{filename:"sprites/arrows/attack/2-end.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:171,w:32,h:32}},{filename:"sprites/arrows/attack/2-start.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:205,w:32,h:32}},{filename:"sprites/arrows/attack/24.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:239,w:32,h:32}},{filename:"sprites/arrows/attack/26.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:273,w:32,h:32}},{filename:"sprites/arrows/attack/4-end.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:307,w:32,h:32}},{filename:"sprites/arrows/attack/4-start.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:341,w:32,h:32}},{filename:"sprites/arrows/attack/46.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:375,w:32,h:32}},{filename:"sprites/arrows/attack/6-end.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:409,w:32,h:32}},{filename:"sprites/arrows/attack/6-start.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:443,w:32,h:32}},{filename:"sprites/arrows/move/0-end.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:477,w:32,h:32}},{filename:"sprites/arrows/move/0-start.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:511,w:32,h:32}},{filename:"sprites/arrows/move/02.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:545,w:32,h:32}},{filename:"sprites/arrows/move/04.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:579,w:32,h:32}},{filename:"sprites/arrows/move/06.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:613,w:32,h:32}},{filename:"sprites/arrows/move/2-end.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:647,w:32,h:32}},{filename:"sprites/arrows/move/2-start.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:681,w:32,h:32}},{filename:"sprites/arrows/move/24.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:715,w:32,h:32}},{filename:"sprites/arrows/move/26.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:749,w:32,h:32}},{filename:"sprites/arrows/move/4-end.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:783,w:32,h:32}},{filename:"sprites/arrows/move/4-start.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:817,w:32,h:32}},{filename:"sprites/arrows/move/46.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:851,w:32,h:32}},{filename:"sprites/arrows/move/6-end.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:885,w:32,h:32}},{filename:"sprites/arrows/move/6-start.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:919,w:32,h:32}},{filename:"sprites/base/shadow-round.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:953,w:32,h:32}},{filename:"sprites/combat/sword-confirm.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:987,w:32,h:32}},{filename:"sprites/combat/sword-down.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:1021,w:32,h:32}},{filename:"sprites/combat/sword-up.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:1055,w:32,h:32}},{filename:"sprites/combat/sword.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:1089,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:1123,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1187,y:1157,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/12.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/13.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/14.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1213,w:32,h:32}},{filename:"sprites/greyscale/structures/big/wooden-barricade/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1213,w:32,h:32}},{filename:"sprites/greyscale/ui/icons/big-select.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1213,w:32,h:32}},{filename:"sprites/greyscale/ui/icons/boot-check.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1213,w:32,h:32}},{filename:"sprites/greyscale/ui/icons/boot.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1213,w:32,h:32}},{filename:"sprites/greyscale/ui/icons/crossed-swords.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1213,w:32,h:32}},{filename:"sprites/greyscale/ui/tile-select/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/prepare/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/prepare/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/prepare/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1108,y:1186,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1073,y:1202,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1178,y:1191,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1142,y:1202,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1203,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:1,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:35,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:69,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:103,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:137,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:171,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:205,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:239,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:273,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:307,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:341,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:375,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:409,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:443,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:477,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:511,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:545,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:579,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/prepare/1.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:613,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/prepare/2.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:647,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/prepare/3.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:681,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:715,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:749,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:783,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:817,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:851,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:885,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:919,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:953,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:987,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:1021,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:1055,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:1089,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:1123,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:1157,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1212,y:1191,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1107,y:1220,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1237,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1236,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1141,y:1236,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1175,y:1236,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1209,y:1225,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:1,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:35,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:69,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:103,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:137,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:171,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:205,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:239,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:273,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:307,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:341,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:375,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:409,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:443,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:477,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:511,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:545,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:579,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:613,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:647,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:681,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:715,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:749,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:783,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:817,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:851,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:885,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:919,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:953,w:32,h:32}},{filename:"sprites/greyscale/units/golem/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:987,w:32,h:32}},{filename:"sprites/greyscale/units/golem/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:1021,w:32,h:32}},{filename:"sprites/greyscale/units/golem/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:1055,w:32,h:32}},{filename:"sprites/greyscale/units/golem/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:1089,w:32,h:32}},{filename:"sprites/greyscale/units/golem/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:1123,w:32,h:32}},{filename:"sprites/greyscale/units/golem/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:1157,w:32,h:32}},{filename:"sprites/greyscale/units/golem/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1246,y:1191,w:32,h:32}},{filename:"sprites/greyscale/units/golem/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1243,y:1225,w:32,h:32}},{filename:"sprites/greyscale/units/golem/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/golem/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/knight/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/knight/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1271,w:32,h:32}},{filename:"sprites/greyscale/units/knight/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1270,w:32,h:32}},{filename:"sprites/greyscale/units/knight/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1270,w:32,h:32}},{filename:"sprites/greyscale/units/knight/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1270,w:32,h:32}},{filename:"sprites/greyscale/units/knight/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1270,w:32,h:32}},{filename:"sprites/greyscale/units/knight/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1270,w:32,h:32}},{filename:"sprites/greyscale/units/knight/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1259,w:32,h:32}},{filename:"sprites/greyscale/units/knight/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:1,w:32,h:32}},{filename:"sprites/greyscale/units/knight/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:35,w:32,h:32}},{filename:"sprites/greyscale/units/knight/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:69,w:32,h:32}},{filename:"sprites/greyscale/units/knight/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:103,w:32,h:32}},{filename:"sprites/greyscale/units/knight/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:137,w:32,h:32}},{filename:"sprites/greyscale/units/knight/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:171,w:32,h:32}},{filename:"sprites/greyscale/units/knight/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:205,w:32,h:32}},{filename:"sprites/greyscale/units/knight/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:239,w:32,h:32}},{filename:"sprites/greyscale/units/knight/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:273,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:307,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:341,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:375,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:409,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:443,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:477,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:511,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:545,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:579,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:613,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:647,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:681,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:715,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:749,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:783,w:32,h:32}},{filename:"sprites/greyscale/units/knight/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:817,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:851,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:885,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:919,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:953,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:987,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:1021,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:1055,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:1089,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:1123,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:1157,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1280,y:1191,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1277,y:1225,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1259,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/rider/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/rider/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/rider/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/rider/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/rider/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/rider/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/rider/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/rider/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/rider/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/rider/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1315,w:32,h:32}},{filename:"sprites/greyscale/units/rider/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1305,w:32,h:32}},{filename:"sprites/greyscale/units/rider/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1304,w:32,h:32}},{filename:"sprites/greyscale/units/rider/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1304,w:32,h:32}},{filename:"sprites/greyscale/units/rider/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1304,w:32,h:32}},{filename:"sprites/greyscale/units/rider/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1304,w:32,h:32}},{filename:"sprites/greyscale/units/rider/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1304,w:32,h:32}},{filename:"sprites/greyscale/units/rider/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1293,w:32,h:32}},{filename:"sprites/greyscale/units/rider/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1293,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:1,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:35,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:69,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:103,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:137,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:171,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:205,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:239,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:273,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:307,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:341,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:375,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:409,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:443,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:477,w:32,h:32}},{filename:"sprites/greyscale/units/rider/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:511,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:545,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:579,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:613,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:647,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:681,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:715,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:749,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:783,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:817,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:851,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:885,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:919,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:953,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/prepare/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:987,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:1021,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:1055,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:1089,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:1123,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:1157,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1314,y:1191,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1311,y:1225,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1259,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1293,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1349,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1339,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1338,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1338,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1338,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1338,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1338,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1327,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1327,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1327,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:1,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:35,w:32,h:32}},{filename:"sprites/icons/gold/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:69,w:32,h:32}},{filename:"sprites/terrain/grass/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:103,w:32,h:32}},{filename:"sprites/terrain/grass/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:137,w:32,h:32}},{filename:"sprites/terrain/grass/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:171,w:32,h:32}},{filename:"sprites/terrain/grass/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:205,w:32,h:32}},{filename:"sprites/terrain/grass/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:239,w:32,h:32}},{filename:"sprites/terrain/grass/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:273,w:32,h:32}},{filename:"sprites/terrain/grass/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:307,w:32,h:32}},{filename:"sprites/terrain/grass/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:341,w:32,h:32}},{filename:"sprites/terrain_preview/forest.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:375,w:32,h:32}},{filename:"sprites/terrain_preview/grass.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:409,w:32,h:32}},{filename:"sprites/terrain_preview/mountain.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:443,w:32,h:32}},{filename:"sprites/tile_ui/red/highlight/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:477,w:32,h:32}},{filename:"sprites/tile_ui/red/highlight/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:511,w:32,h:32}},{filename:"sprites/tile_ui/red/highlight/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:545,w:32,h:32}},{filename:"sprites/tile_ui/yellow/highlight/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:579,w:32,h:32}},{filename:"sprites/tile_ui/yellow/highlight/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:613,w:32,h:32}},{filename:"sprites/tile_ui/yellow/highlight/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:647,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:681,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:715,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:749,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:783,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/12.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:817,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/13.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:851,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/14.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:885,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:919,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:953,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:987,w:32,h:32}},{filename:"sprites/tinted_images/blue/ui/icons/big-select.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/blue/ui/icons/boot-check.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/blue/ui/icons/boot.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/blue/ui/icons/crossed-swords.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/blue/ui/tile-select/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1348,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1345,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/prepare/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/prepare/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/prepare/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1373,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1372,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1372,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1372,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/prepare/1.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1372,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/prepare/2.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1372,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/prepare/3.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:1,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:35,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:69,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:103,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:137,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:171,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:205,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:239,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:273,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:307,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:341,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:375,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:409,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:443,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:477,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:511,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:545,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:579,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:613,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:647,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:681,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:715,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:749,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:783,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:817,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:851,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:885,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:919,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:953,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:987,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1382,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1379,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1407,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1406,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1406,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1406,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1406,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1406,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:1,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:35,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:69,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:103,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:137,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:171,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:205,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:239,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:273,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:307,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:341,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:375,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:409,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:443,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:477,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:511,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:545,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:579,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:613,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:647,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:681,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:715,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:749,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:783,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:817,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:851,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:885,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:919,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:953,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:987,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1416,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1413,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1441,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1440,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1440,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1440,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1440,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1440,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:1,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:35,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:69,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:103,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:137,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:171,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:205,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:239,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:273,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:307,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:341,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:375,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:409,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:443,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:477,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:511,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:545,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:579,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:613,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:647,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:681,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:715,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:749,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:783,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:817,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:851,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:885,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:919,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:953,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:987,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1459,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1450,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1447,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/prepare/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1475,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1474,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1474,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1474,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1474,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1474,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:1,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:35,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:69,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:103,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:137,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:171,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:205,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:239,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:273,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:307,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:341,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:375,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:409,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:443,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:477,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:511,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:545,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:579,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:613,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:647,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:681,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:715,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:749,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:783,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/12.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:817,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/13.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:851,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/14.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:885,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:919,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:953,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:987,w:32,h:32}},{filename:"sprites/tinted_images/green/ui/icons/big-select.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/green/ui/icons/boot-check.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/green/ui/icons/boot.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/green/ui/icons/crossed-swords.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/green/ui/tile-select/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1484,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1481,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/prepare/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/prepare/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/prepare/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/prepare/1.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/prepare/2.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1509,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/prepare/3.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1508,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1508,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1508,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1508,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1508,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:1,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:35,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:69,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:103,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:137,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:171,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:205,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:239,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:273,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:307,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:341,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:375,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:409,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:443,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:477,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:511,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:545,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:579,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:613,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:647,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:681,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:715,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:749,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:783,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:817,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:851,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:885,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:919,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:953,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:987,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1518,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1515,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1543,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1542,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1542,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1542,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1542,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1542,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:1,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:35,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:69,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:103,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:137,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:171,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:205,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:239,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:273,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:307,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:341,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:375,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:409,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:443,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:477,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:511,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:545,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:579,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:613,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:647,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:681,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:715,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:749,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:783,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:817,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:851,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:885,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:919,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:953,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:987,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1552,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1549,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1577,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1576,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1576,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1576,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1576,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1576,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:1,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:35,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:69,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:103,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:137,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:171,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:205,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:239,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:273,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:307,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:341,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:375,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:409,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:443,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:477,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:511,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:545,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:579,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:613,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:647,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:681,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:715,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:749,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:783,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:817,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:851,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:885,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:919,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/prepare/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:953,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:987,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1586,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1583,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/12.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/13.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/14.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1611,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1610,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1610,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1610,w:32,h:32}},{filename:"sprites/tinted_images/red/ui/icons/big-select.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1610,w:32,h:32}},{filename:"sprites/tinted_images/red/ui/icons/boot-check.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1610,w:32,h:32}},{filename:"sprites/tinted_images/red/ui/icons/boot.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/ui/icons/crossed-swords.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/ui/tile-select/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:1,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:35,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:69,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:103,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:137,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/prepare/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:171,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/prepare/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:205,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/prepare/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:239,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:273,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:307,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:341,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:375,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:409,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:443,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:477,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:511,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:545,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:579,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:613,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:647,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:681,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:715,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:749,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:783,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:817,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:851,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:885,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:919,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:953,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:987,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/prepare/1.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/prepare/2.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/prepare/3.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1620,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1617,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1645,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1644,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1644,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1644,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1644,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1644,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:1,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:35,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:69,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:103,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:137,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:171,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:205,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:239,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:273,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:307,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:341,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:375,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:409,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:443,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:477,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:511,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:545,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:579,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:613,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:647,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:681,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:715,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:749,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:783,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:817,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:851,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:885,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:919,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:953,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:987,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1654,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1651,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1679,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1678,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1678,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1678,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1678,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1678,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:1,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:35,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:69,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:103,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:137,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:171,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:205,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:239,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:273,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:307,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:341,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:375,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:409,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:443,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:477,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:511,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:545,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:579,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:613,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:647,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:681,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:715,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:749,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:783,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:817,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:851,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:885,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:919,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:953,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:987,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1697,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1688,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1685,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/prepare/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1713,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1712,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1712,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1712,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1712,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1712,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:1,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:35,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:69,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:103,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:137,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:171,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:205,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:239,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/12.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:273,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/13.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:307,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/14.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:341,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:375,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:409,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:443,w:32,h:32}},{filename:"sprites/tinted_images/white/ui/icons/boot-check.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:477,w:32,h:32}},{filename:"sprites/tinted_images/white/ui/icons/boot.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:511,w:32,h:32}},{filename:"sprites/tinted_images/white/ui/icons/crossed-swords.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:545,w:32,h:32}},{filename:"sprites/tinted_images/white/ui/tile-select/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:579,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:613,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:647,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:681,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:715,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:749,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:783,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:817,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:851,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:885,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:919,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:953,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:987,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/prepare/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/prepare/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/prepare/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1722,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1719,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/prepare/1.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/prepare/2.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/prepare/3.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1747,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1746,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1746,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1746,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1746,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1746,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:1,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:35,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:69,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:103,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:137,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:171,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:205,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:239,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:273,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:307,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:341,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:375,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:409,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:443,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:477,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:511,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:545,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:579,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:613,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:647,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:681,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:715,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:749,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:783,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:817,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:851,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:885,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:919,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:953,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:987,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1756,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1753,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1791,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1781,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1780,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1780,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1780,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1780,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1780,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:1,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:35,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:69,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:103,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:137,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:171,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:205,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:239,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:273,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:307,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:341,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:375,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:409,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:443,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:477,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:511,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:545,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:579,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:613,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:647,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:681,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:715,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:749,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:783,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:817,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:851,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:885,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:919,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:953,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:987,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1790,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1787,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/prepare/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1815,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1814,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1814,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1814,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1814,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1814,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/12.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/13.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/14.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/ui/icons/big-select.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/ui/icons/boot-check.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/ui/icons/boot.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/ui/icons/crossed-swords.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/ui/tile-select/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:1,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:35,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:69,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:103,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:137,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:171,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:205,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:239,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:273,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:307,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:341,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:375,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/prepare/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:409,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/prepare/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:443,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/prepare/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:477,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:511,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:545,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:579,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:613,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:647,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:681,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:715,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:749,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:783,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:817,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:851,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:885,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:919,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:953,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:987,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1824,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1821,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/prepare/1.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/prepare/2.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/prepare/3.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1849,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1848,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1848,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1848,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1848,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1848,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:1,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:35,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:69,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:103,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:137,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:171,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:205,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:239,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:273,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:307,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:341,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:375,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:409,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:443,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:477,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:511,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:545,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:579,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:613,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:647,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:681,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:715,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:749,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:783,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:817,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:851,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:885,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:919,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:953,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:987,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1858,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1855,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1883,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1882,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1882,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1882,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1882,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1882,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1531,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1565,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1599,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1633,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1667,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1803,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1837,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:1,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:35,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:69,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:103,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:137,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:171,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:205,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:239,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:273,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:307,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:341,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:375,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:409,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:443,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:477,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:511,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:545,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:579,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:613,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:647,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:681,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:715,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:749,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:783,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:817,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:851,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:885,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:919,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:953,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:987,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:1089,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1892,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1889,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1259,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/prepare/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1633,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1769,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1837,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1871,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:205,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:545,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1917,w:32,h:32}},{filename:"sprites/greyscale/ui/icons/bar-5.png",rotated:!1,trimmed:!1,sourceSize:{w:26,h:6},spriteSourceSize:{x:0,y:0,w:26,h:6},frame:{x:1905,y:1259,w:26,h:6}},{filename:"sprites/greyscale/ui/health/bar-red.png",rotated:!1,trimmed:!1,sourceSize:{w:25,h:2},spriteSourceSize:{x:0,y:0,w:25,h:2},frame:{x:1905,y:1267,w:25,h:2}},{filename:"sprites/tinted_images/blue/ui/health/bar-red.png",rotated:!1,trimmed:!1,sourceSize:{w:25,h:2},spriteSourceSize:{x:0,y:0,w:25,h:2},frame:{x:1905,y:1271,w:25,h:2}},{filename:"sprites/tinted_images/green/ui/health/bar-red.png",rotated:!1,trimmed:!1,sourceSize:{w:25,h:2},spriteSourceSize:{x:0,y:0,w:25,h:2},frame:{x:1905,y:1275,w:25,h:2}},{filename:"sprites/tinted_images/red/ui/health/bar-red.png",rotated:!1,trimmed:!1,sourceSize:{w:25,h:2},spriteSourceSize:{x:0,y:0,w:25,h:2},frame:{x:1905,y:1279,w:25,h:2}},{filename:"sprites/tinted_images/yellow/ui/health/bar-red.png",rotated:!1,trimmed:!1,sourceSize:{w:25,h:2},spriteSourceSize:{x:0,y:0,w:25,h:2},frame:{x:1905,y:1283,w:25,h:2}},{filename:"sprites/greyscale/ui/bars/background.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1001,y:1203,w:18,h:4}},{filename:"sprites/greyscale/ui/bars/green.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:701,w:18,h:4}},{filename:"sprites/greyscale/ui/bars/red.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1021,y:1951,w:18,h:4}},{filename:"sprites/greyscale/ui/bars/yellow.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:707,w:18,h:4}},{filename:"sprites/tinted_images/blue/ui/bars/background.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1041,y:1951,w:18,h:4}},{filename:"sprites/tinted_images/blue/ui/bars/green.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:713,w:18,h:4}},{filename:"sprites/tinted_images/blue/ui/bars/red.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:719,w:18,h:4}},{filename:"sprites/tinted_images/blue/ui/bars/yellow.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:725,w:18,h:4}},{filename:"sprites/tinted_images/green/ui/bars/background.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:731,w:18,h:4}},{filename:"sprites/tinted_images/red/ui/bars/background.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:737,w:18,h:4}},{filename:"sprites/tinted_images/white/ui/bars/background.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:743,w:18,h:4}},{filename:"sprites/tinted_images/yellow/ui/bars/background.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:749,w:18,h:4}},{filename:"sprites/combat/skull.png",rotated:!1,trimmed:!1,sourceSize:{w:17,h:17},spriteSourceSize:{x:0,y:0,w:17,h:17},frame:{x:1163,y:755,w:17,h:17}},{filename:"sprites/greyscale/ui/icons/bar-3.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:6},spriteSourceSize:{x:0,y:0,w:16,h:6},frame:{x:1055,y:1203,w:16,h:6}},{filename:"sprites/greyscale/ui/icons/select.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:16},spriteSourceSize:{x:0,y:0,w:16,h:16},frame:{x:1089,y:1236,w:16,h:16}},{filename:"sprites/icons/armor/blue.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:16},spriteSourceSize:{x:0,y:0,w:16,h:16},frame:{x:1055,y:1211,w:16,h:16}},{filename:"sprites/icons/armor/white.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:16},spriteSourceSize:{x:0,y:0,w:16,h:16},frame:{x:1163,y:774,w:16,h:16}},{filename:"sprites/tinted_images/blue/ui/icons/select.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:16},spriteSourceSize:{x:0,y:0,w:16,h:16},frame:{x:1163,y:792,w:16,h:16}},{filename:"sprites/tinted_images/green/ui/icons/select.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:16},spriteSourceSize:{x:0,y:0,w:16,h:16},frame:{x:1163,y:810,w:16,h:16}},{filename:"sprites/tinted_images/red/ui/icons/select.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:16},spriteSourceSize:{x:0,y:0,w:16,h:16},frame:{x:1163,y:828,w:16,h:16}},{filename:"sprites/tinted_images/yellow/ui/icons/select.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:16},spriteSourceSize:{x:0,y:0,w:16,h:16},frame:{x:1163,y:846,w:16,h:16}},{filename:"sprites/greyscale/ui/banner/banner.png",rotated:!1,trimmed:!1,sourceSize:{w:9,h:12},spriteSourceSize:{x:0,y:0,w:9,h:12},frame:{x:1923,y:1225,w:9,h:12}},{filename:"sprites/tinted_images/blue/ui/banner/banner.png",rotated:!1,trimmed:!1,sourceSize:{w:9,h:12},spriteSourceSize:{x:0,y:0,w:9,h:12},frame:{x:1923,y:1239,w:9,h:12}},{filename:"sprites/tinted_images/green/ui/banner/banner.png",rotated:!1,trimmed:!1,sourceSize:{w:9,h:12},spriteSourceSize:{x:0,y:0,w:9,h:12},frame:{x:1001,y:1151,w:9,h:12}},{filename:"sprites/tinted_images/red/ui/banner/banner.png",rotated:!1,trimmed:!1,sourceSize:{w:9,h:12},spriteSourceSize:{x:0,y:0,w:9,h:12},frame:{x:1089,y:1254,w:9,h:12}},{filename:"sprites/tinted_images/white/ui/banner/banner.png",rotated:!1,trimmed:!1,sourceSize:{w:9,h:12},spriteSourceSize:{x:0,y:0,w:9,h:12},frame:{x:1012,y:1151,w:9,h:12}},{filename:"sprites/tinted_images/yellow/ui/banner/banner.png",rotated:!1,trimmed:!1,sourceSize:{w:9,h:12},spriteSourceSize:{x:0,y:0,w:9,h:12},frame:{x:1100,y:1254,w:9,h:12}},{filename:"sprites/greyscale/ui/banner/0.png",rotated:!1,trimmed:!1,sourceSize:{w:7,h:10},spriteSourceSize:{x:0,y:0,w:7,h:10},frame:{x:963,y:951,w:7,h:10}},{filename:"sprites/greyscale/ui/icons/attack.png",rotated:!1,trimmed:!1,sourceSize:{w:10,h:10},spriteSourceSize:{x:0,y:0,w:10,h:10},frame:{x:972,y:951,w:10,h:10}},{filename:"sprites/greyscale/ui/icons/move.png",rotated:!1,trimmed:!1,sourceSize:{w:10,h:10},spriteSourceSize:{x:0,y:0,w:10,h:10},frame:{x:984,y:951,w:10,h:10}},{filename:"sprites/tinted_images/blue/ui/banner/0.png",rotated:!1,trimmed:!1,sourceSize:{w:7,h:10},spriteSourceSize:{x:0,y:0,w:7,h:10},frame:{x:1178,y:1167,w:7,h:10}},{filename:"sprites/tinted_images/blue/ui/icons/attack.png",rotated:!1,trimmed:!1,sourceSize:{w:10,h:10},spriteSourceSize:{x:0,y:0,w:10,h:10},frame:{x:1023,y:1151,w:10,h:10}},{filename:"sprites/tinted_images/blue/ui/icons/move.png",rotated:!1,trimmed:!1,sourceSize:{w:10,h:10},spriteSourceSize:{x:0,y:0,w:10,h:10},frame:{x:1111,y:1254,w:10,h:10}},{filename:"sprites/tinted_images/green/ui/banner/0.png",rotated:!1,trimmed:!1,sourceSize:{w:7,h:10},spriteSourceSize:{x:0,y:0,w:7,h:10},frame:{x:1926,y:1191,w:7,h:10}},{filename:"sprites/tinted_images/red/ui/banner/0.png",rotated:!1,trimmed:!1,sourceSize:{w:7,h:10},spriteSourceSize:{x:0,y:0,w:7,h:10},frame:{x:1178,y:1179,w:7,h:10}},{filename:"sprites/tinted_images/white/ui/banner/0.png",rotated:!1,trimmed:!1,sourceSize:{w:7,h:10},spriteSourceSize:{x:0,y:0,w:7,h:10},frame:{x:1926,y:1203,w:7,h:10}},{filename:"sprites/tinted_images/yellow/ui/banner/0.png",rotated:!1,trimmed:!1,sourceSize:{w:7,h:10},spriteSourceSize:{x:0,y:0,w:7,h:10},frame:{x:1035,y:1151,w:7,h:10}},{filename:"sprites/greyscale/ui/icons/bar-1.png",rotated:!1,trimmed:!1,sourceSize:{w:6,h:6},spriteSourceSize:{x:0,y:0,w:6,h:6},frame:{x:1029,y:371,w:6,h:6}},{filename:"sprites/greyscale/animations/capture/15.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/20.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/25.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/16.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/21.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/26.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/17.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/22.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/27.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/18.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/23.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/28.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/19.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/24.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1213,w:32,h:32}},{filename:"sprites/greyscale/animations/capture/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1213,w:32,h:32}},{filename:"sprites/greyscale/structures/big/generators/metal/6.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/greyscale/structures/big/generators/metal/8.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/blue/structures/big/generators/metal/0.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/blue/structures/big/generators/metal/6.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/blue/structures/big/generators/metal/8.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/green/structures/big/generators/metal/0.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/green/structures/big/generators/metal/6.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/green/structures/big/generators/metal/8.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/red/structures/big/generators/metal/0.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/red/structures/big/generators/metal/6.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/red/structures/big/generators/metal/8.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/white/structures/big/generators/metal/0.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/white/structures/big/generators/metal/6.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/white/structures/big/generators/metal/8.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/yellow/structures/big/generators/metal/0.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/yellow/structures/big/generators/metal/6.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/yellow/structures/big/generators/metal/8.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:371,w:64,h:64}},{filename:"sprites/tinted_images/blue/structures/big/generators/metal/1.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:437,w:64,h:64}},{filename:"sprites/tinted_images/green/structures/big/generators/metal/1.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:437,w:64,h:64}},{filename:"sprites/tinted_images/red/structures/big/generators/metal/1.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:437,w:64,h:64}},{filename:"sprites/tinted_images/white/structures/big/generators/metal/1.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:437,w:64,h:64}},{filename:"sprites/tinted_images/yellow/structures/big/generators/metal/1.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:437,w:64,h:64}},{filename:"sprites/greyscale/structures/big/generators/metal/4.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:503,w:64,h:64}},{filename:"sprites/tinted_images/blue/structures/big/generators/metal/2.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:503,w:64,h:64}},{filename:"sprites/tinted_images/blue/structures/big/generators/metal/4.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:503,w:64,h:64}},{filename:"sprites/tinted_images/green/structures/big/generators/metal/2.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:503,w:64,h:64}},{filename:"sprites/tinted_images/green/structures/big/generators/metal/4.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:503,w:64,h:64}},{filename:"sprites/tinted_images/red/structures/big/generators/metal/2.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:503,w:64,h:64}},{filename:"sprites/tinted_images/red/structures/big/generators/metal/4.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:503,w:64,h:64}},{filename:"sprites/tinted_images/white/structures/big/generators/metal/2.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:503,w:64,h:64}},{filename:"sprites/tinted_images/white/structures/big/generators/metal/4.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:503,w:64,h:64}},{filename:"sprites/tinted_images/yellow/structures/big/generators/metal/2.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:503,w:64,h:64}},{filename:"sprites/tinted_images/yellow/structures/big/generators/metal/4.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:503,w:64,h:64}},{filename:"sprites/tinted_images/blue/structures/big/generators/metal/3.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:569,w:64,h:64}},{filename:"sprites/tinted_images/green/structures/big/generators/metal/3.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:569,w:64,h:64}},{filename:"sprites/tinted_images/red/structures/big/generators/metal/3.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:569,w:64,h:64}},{filename:"sprites/tinted_images/white/structures/big/generators/metal/3.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:569,w:64,h:64}},{filename:"sprites/tinted_images/yellow/structures/big/generators/metal/3.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:569,w:64,h:64}},{filename:"sprites/greyscale/structures/big/generators/metal/7.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/greyscale/structures/big/generators/metal/9.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/blue/structures/big/generators/metal/5.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/blue/structures/big/generators/metal/7.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/blue/structures/big/generators/metal/9.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/green/structures/big/generators/metal/5.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/green/structures/big/generators/metal/7.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/green/structures/big/generators/metal/9.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/red/structures/big/generators/metal/5.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/red/structures/big/generators/metal/7.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/red/structures/big/generators/metal/9.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/white/structures/big/generators/metal/5.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/white/structures/big/generators/metal/7.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/white/structures/big/generators/metal/9.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/yellow/structures/big/generators/metal/5.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/yellow/structures/big/generators/metal/7.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/yellow/structures/big/generators/metal/9.png",rotated:!1,trimmed:!1,sourceSize:{w:64,h:64},spriteSourceSize:{x:0,y:0,w:64,h:64},frame:{x:963,y:635,w:64,h:64}},{filename:"sprites/tinted_images/blue/structures/big/wooden-barricade/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1213,w:32,h:32}},{filename:"sprites/tinted_images/green/structures/big/wooden-barricade/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1213,w:32,h:32}},{filename:"sprites/tinted_images/red/structures/big/wooden-barricade/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1213,w:32,h:32}},{filename:"sprites/tinted_images/white/structures/big/wooden-barricade/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1213,w:32,h:32}},{filename:"sprites/tinted_images/yellow/structures/big/wooden-barricade/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1213,w:32,h:32}},{filename:"sprites/tinted_images/white/ui/health/bar-red.png",rotated:!1,trimmed:!1,sourceSize:{w:25,h:2},spriteSourceSize:{x:0,y:0,w:25,h:2},frame:{x:1905,y:1267,w:25,h:2}},{filename:"sprites/tinted_images/blue/ui/icons/bar-1.png",rotated:!1,trimmed:!1,sourceSize:{w:6,h:6},spriteSourceSize:{x:0,y:0,w:6,h:6},frame:{x:1029,y:371,w:6,h:6}},{filename:"sprites/tinted_images/green/ui/icons/bar-1.png",rotated:!1,trimmed:!1,sourceSize:{w:6,h:6},spriteSourceSize:{x:0,y:0,w:6,h:6},frame:{x:1029,y:371,w:6,h:6}},{filename:"sprites/tinted_images/red/ui/icons/bar-1.png",rotated:!1,trimmed:!1,sourceSize:{w:6,h:6},spriteSourceSize:{x:0,y:0,w:6,h:6},frame:{x:1029,y:371,w:6,h:6}},{filename:"sprites/tinted_images/white/ui/icons/bar-1.png",rotated:!1,trimmed:!1,sourceSize:{w:6,h:6},spriteSourceSize:{x:0,y:0,w:6,h:6},frame:{x:1029,y:371,w:6,h:6}},{filename:"sprites/tinted_images/yellow/ui/icons/bar-1.png",rotated:!1,trimmed:!1,sourceSize:{w:6,h:6},spriteSourceSize:{x:0,y:0,w:6,h:6},frame:{x:1029,y:371,w:6,h:6}},{filename:"sprites/tinted_images/blue/ui/icons/bar-3.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:6},spriteSourceSize:{x:0,y:0,w:16,h:6},frame:{x:1055,y:1203,w:16,h:6}},{filename:"sprites/tinted_images/green/ui/icons/bar-3.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:6},spriteSourceSize:{x:0,y:0,w:16,h:6},frame:{x:1055,y:1203,w:16,h:6}},{filename:"sprites/tinted_images/red/ui/icons/bar-3.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:6},spriteSourceSize:{x:0,y:0,w:16,h:6},frame:{x:1055,y:1203,w:16,h:6}},{filename:"sprites/tinted_images/white/ui/icons/bar-3.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:6},spriteSourceSize:{x:0,y:0,w:16,h:6},frame:{x:1055,y:1203,w:16,h:6}},{filename:"sprites/tinted_images/yellow/ui/icons/bar-3.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:6},spriteSourceSize:{x:0,y:0,w:16,h:6},frame:{x:1055,y:1203,w:16,h:6}},{filename:"sprites/tinted_images/blue/ui/icons/bar-5.png",rotated:!1,trimmed:!1,sourceSize:{w:26,h:6},spriteSourceSize:{x:0,y:0,w:26,h:6},frame:{x:1905,y:1259,w:26,h:6}},{filename:"sprites/tinted_images/green/ui/icons/bar-5.png",rotated:!1,trimmed:!1,sourceSize:{w:26,h:6},spriteSourceSize:{x:0,y:0,w:26,h:6},frame:{x:1905,y:1259,w:26,h:6}},{filename:"sprites/tinted_images/red/ui/icons/bar-5.png",rotated:!1,trimmed:!1,sourceSize:{w:26,h:6},spriteSourceSize:{x:0,y:0,w:26,h:6},frame:{x:1905,y:1259,w:26,h:6}},{filename:"sprites/tinted_images/white/ui/icons/bar-5.png",rotated:!1,trimmed:!1,sourceSize:{w:26,h:6},spriteSourceSize:{x:0,y:0,w:26,h:6},frame:{x:1905,y:1259,w:26,h:6}},{filename:"sprites/tinted_images/yellow/ui/icons/bar-5.png",rotated:!1,trimmed:!1,sourceSize:{w:26,h:6},spriteSourceSize:{x:0,y:0,w:26,h:6},frame:{x:1905,y:1259,w:26,h:6}},{filename:"sprites/tinted_images/white/ui/icons/big-select.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1213,w:32,h:32}},{filename:"sprites/tinted_images/white/ui/icons/select.png",rotated:!1,trimmed:!1,sourceSize:{w:16,h:16},spriteSourceSize:{x:0,y:0,w:16,h:16},frame:{x:1089,y:1236,w:16,h:16}},{filename:"sprites/greyscale/units/archer/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:613,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/prepare/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1213,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1178,y:1191,w:32,h:32}},{filename:"sprites/greyscale/units/archer/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:205,w:32,h:32}},{filename:"sprites/tinted_images/white/units/brute/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:963,y:701,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:963,y:751,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:963,y:801,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:963,y:851,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:963,y:901,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:1,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:51,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:101,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:151,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:201,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:251,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:301,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:351,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:401,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:451,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:501,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:551,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:601,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:651,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:701,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:751,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:801,y:963,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:51,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:101,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:151,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:201,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:251,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:301,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:351,y:1013,w:48,h:48}},{filename:"sprites/tinted_images/white/units/brute/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:48,h:48},spriteSourceSize:{x:0,y:0,w:48,h:48},frame:{x:401,y:1013,w:48,h:48}},{filename:"sprites/greyscale/units/catapult/prepare/4.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:273,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:511,w:32,h:32}},{filename:"sprites/greyscale/units/catapult/prepare/0.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1221,y:579,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/crossbow/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1247,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:69,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:69,w:32,h:32}},{filename:"sprites/greyscale/units/dragon/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1255,y:69,w:32,h:32}},{filename:"sprites/greyscale/units/golem/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1281,w:32,h:32}},{filename:"sprites/greyscale/units/knight/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:103,w:32,h:32}},{filename:"sprites/greyscale/units/knight/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:103,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:1021,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:1123,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:1123,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:1123,w:32,h:32}},{filename:"sprites/greyscale/units/pikeman/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1289,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/attack/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1315,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/attack/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:715,y:1315,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/attack/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1315,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:783,y:1315,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/attack/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1315,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:851,y:1315,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1315,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/death/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1315,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/death/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1315,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/death/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1315,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1305,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1089,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1157,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/idle/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1304,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1225,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1293,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/down/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:1,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/down/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:35,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/down/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:69,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:103,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/left/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:137,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/left/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:171,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/left/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:205,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/left/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:239,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/right/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:273,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/right/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:307,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/right/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:341,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/right/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:375,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:409,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:409,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:409,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:409,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/up/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:409,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:443,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:443,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:443,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:443,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/up/1.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:443,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/up/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:477,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/rider/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:511,w:32,h:32}},{filename:"sprites/tinted_images/green/units/rider/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:511,w:32,h:32}},{filename:"sprites/tinted_images/red/units/rider/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:511,w:32,h:32}},{filename:"sprites/tinted_images/white/units/rider/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:511,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/rider/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:511,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:613,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:851,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/prepare/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:885,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/prepare/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:885,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:919,w:32,h:32}},{filename:"sprites/greyscale/units/swordsman/prepare/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1323,y:987,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1339,w:32,h:32}},{filename:"sprites/greyscale/units/wizard/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:1,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/15.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:749,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/20.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:749,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/25.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:749,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:749,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/16.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:783,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/21.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:783,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/26.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:783,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:783,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/17.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:817,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/22.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:817,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/27.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:817,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:817,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/18.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:851,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/23.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:851,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/28.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:851,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:851,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/19.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:885,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/24.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:885,w:32,h:32}},{filename:"sprites/tinted_images/blue/animations/capture/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1357,y:885,w:32,h:32}},{filename:"sprites/tinted_images/green/ui/bars/green.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:713,w:18,h:4}},{filename:"sprites/tinted_images/red/ui/bars/green.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:713,w:18,h:4}},{filename:"sprites/tinted_images/white/ui/bars/green.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:713,w:18,h:4}},{filename:"sprites/tinted_images/yellow/ui/bars/green.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:713,w:18,h:4}},{filename:"sprites/tinted_images/green/ui/bars/red.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:719,w:18,h:4}},{filename:"sprites/tinted_images/red/ui/bars/red.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:719,w:18,h:4}},{filename:"sprites/tinted_images/white/ui/bars/red.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:719,w:18,h:4}},{filename:"sprites/tinted_images/yellow/ui/bars/red.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:719,w:18,h:4}},{filename:"sprites/tinted_images/green/ui/bars/yellow.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:725,w:18,h:4}},{filename:"sprites/tinted_images/red/ui/bars/yellow.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:725,w:18,h:4}},{filename:"sprites/tinted_images/white/ui/bars/yellow.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:725,w:18,h:4}},{filename:"sprites/tinted_images/yellow/ui/bars/yellow.png",rotated:!1,trimmed:!1,sourceSize:{w:18,h:4},spriteSourceSize:{x:0,y:0,w:18,h:4},frame:{x:1163,y:725,w:18,h:4}},{filename:"sprites/tinted_images/green/ui/enemy-selection/0.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:1095,w:34,h:34}},{filename:"sprites/tinted_images/red/ui/enemy-selection/0.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:1095,w:34,h:34}},{filename:"sprites/tinted_images/white/ui/enemy-selection/0.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:1095,w:34,h:34}},{filename:"sprites/tinted_images/yellow/ui/enemy-selection/0.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:1095,w:34,h:34}},{filename:"sprites/tinted_images/green/ui/enemy-selection/1.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:1131,w:34,h:34}},{filename:"sprites/tinted_images/red/ui/enemy-selection/1.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:1131,w:34,h:34}},{filename:"sprites/tinted_images/white/ui/enemy-selection/1.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:1131,w:34,h:34}},{filename:"sprites/tinted_images/yellow/ui/enemy-selection/1.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1151,y:1131,w:34,h:34}},{filename:"sprites/tinted_images/green/ui/enemy-selection/2.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1001,y:1167,w:34,h:34}},{filename:"sprites/tinted_images/red/ui/enemy-selection/2.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1001,y:1167,w:34,h:34}},{filename:"sprites/tinted_images/white/ui/enemy-selection/2.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1001,y:1167,w:34,h:34}},{filename:"sprites/tinted_images/yellow/ui/enemy-selection/2.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1001,y:1167,w:34,h:34}},{filename:"sprites/tinted_images/green/ui/enemy-selection/3.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1037,y:1167,w:34,h:34}},{filename:"sprites/tinted_images/red/ui/enemy-selection/3.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1037,y:1167,w:34,h:34}},{filename:"sprites/tinted_images/white/ui/enemy-selection/3.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1037,y:1167,w:34,h:34}},{filename:"sprites/tinted_images/yellow/ui/enemy-selection/3.png",rotated:!1,trimmed:!1,sourceSize:{w:34,h:34},spriteSourceSize:{x:0,y:0,w:34,h:34},frame:{x:1037,y:1167,w:34,h:34}},{filename:"sprites/tinted_images/green/ui/icons/attack.png",rotated:!1,trimmed:!1,sourceSize:{w:10,h:10},spriteSourceSize:{x:0,y:0,w:10,h:10},frame:{x:1023,y:1151,w:10,h:10}},{filename:"sprites/tinted_images/red/ui/icons/attack.png",rotated:!1,trimmed:!1,sourceSize:{w:10,h:10},spriteSourceSize:{x:0,y:0,w:10,h:10},frame:{x:1023,y:1151,w:10,h:10}},{filename:"sprites/tinted_images/white/ui/icons/attack.png",rotated:!1,trimmed:!1,sourceSize:{w:10,h:10},spriteSourceSize:{x:0,y:0,w:10,h:10},frame:{x:1023,y:1151,w:10,h:10}},{filename:"sprites/tinted_images/yellow/ui/icons/attack.png",rotated:!1,trimmed:!1,sourceSize:{w:10,h:10},spriteSourceSize:{x:0,y:0,w:10,h:10},frame:{x:1023,y:1151,w:10,h:10}},{filename:"sprites/tinted_images/green/ui/icons/move.png",rotated:!1,trimmed:!1,sourceSize:{w:10,h:10},spriteSourceSize:{x:0,y:0,w:10,h:10},frame:{x:1111,y:1254,w:10,h:10}},{filename:"sprites/tinted_images/red/ui/icons/move.png",rotated:!1,trimmed:!1,sourceSize:{w:10,h:10},spriteSourceSize:{x:0,y:0,w:10,h:10},frame:{x:1111,y:1254,w:10,h:10}},{filename:"sprites/tinted_images/white/ui/icons/move.png",rotated:!1,trimmed:!1,sourceSize:{w:10,h:10},spriteSourceSize:{x:0,y:0,w:10,h:10},frame:{x:1111,y:1254,w:10,h:10}},{filename:"sprites/tinted_images/yellow/ui/icons/move.png",rotated:!1,trimmed:!1,sourceSize:{w:10,h:10},spriteSourceSize:{x:0,y:0,w:10,h:10},frame:{x:1111,y:1254,w:10,h:10}},{filename:"sprites/tinted_images/blue/units/archer/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/death/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/prepare/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/archer/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/prepare/4.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:817,y:1383,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1372,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/catapult/prepare/0.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1372,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:511,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:681,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:681,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:681,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:681,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1391,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/crossbow/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/dragon/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/green/units/dragon/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/red/units/dragon/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/white/units/dragon/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/dragon/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:511,y:1417,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/golem/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1425,y:103,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/knight/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1451,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1440,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1440,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1440,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/pikeman/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1440,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:35,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/prepare/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/prepare/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:341,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/swordsman/prepare/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:409,y:1485,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/death/10.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1259,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1293,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/death/4.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:1,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:1,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:1,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:1,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:35,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:35,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:35,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:35,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:69,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:69,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:69,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:69,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:103,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:103,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:103,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:103,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:307,w:32,h:32}},{filename:"sprites/tinted_images/blue/units/wizard/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:613,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/15.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:749,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/20.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:749,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/25.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:749,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:749,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/16.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:783,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/21.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:783,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/26.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:783,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:783,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/17.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:817,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/22.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:817,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/27.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:817,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:817,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/18.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:851,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/23.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:851,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/28.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:851,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:851,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/19.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:885,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/24.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:885,w:32,h:32}},{filename:"sprites/tinted_images/green/animations/capture/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1493,y:885,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1327,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/prepare/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/archer/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:579,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/prepare/4.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/catapult/prepare/0.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1519,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:205,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:375,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:375,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:375,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:375,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:749,w:32,h:32}},{filename:"sprites/tinted_images/green/units/crossbow/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1527,y:1055,w:32,h:32}},{filename:"sprites/tinted_images/green/units/golem/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1553,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:817,w:32,h:32}},{filename:"sprites/tinted_images/green/units/knight/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1561,y:817,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:171,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/pikeman/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1587,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:579,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:817,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/prepare/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:851,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/prepare/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:851,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:885,w:32,h:32}},{filename:"sprites/tinted_images/green/units/swordsman/prepare/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1595,y:953,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:443,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/green/units/wizard/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:749,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/15.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/20.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/25.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/16.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/21.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/26.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:919,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/17.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/22.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/27.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/18.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/23.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/28.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1621,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/19.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1611,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/24.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1611,w:32,h:32}},{filename:"sprites/tinted_images/red/animations/capture/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1611,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:137,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/prepare/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:137,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:307,w:32,h:32}},{filename:"sprites/tinted_images/red/units/archer/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:613,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/prepare/4.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:681,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:919,w:32,h:32}},{filename:"sprites/tinted_images/red/units/catapult/prepare/0.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1629,y:987,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:647,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/crossbow/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:953,y:1655,w:32,h:32}},{filename:"sprites/tinted_images/red/units/golem/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1663,y:783,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/knight/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:477,y:1689,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/pikeman/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1497,y:1667,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:239,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/prepare/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/prepare/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:273,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/swordsman/prepare/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:375,y:1723,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1701,w:32,h:32}},{filename:"sprites/tinted_images/red/units/wizard/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:69,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/15.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:205,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/20.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:205,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/25.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:205,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:205,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/16.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:239,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/21.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:239,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/26.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:239,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:239,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/17.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:273,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/22.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:273,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/27.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:273,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:273,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/18.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:307,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/23.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:307,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/28.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:307,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:307,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/19.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:341,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/24.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:341,w:32,h:32}},{filename:"sprites/tinted_images/white/animations/capture/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:341,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:749,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/prepare/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1731,y:1021,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1722,y:1191,w:32,h:32}},{filename:"sprites/tinted_images/white/units/archer/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/prepare/4.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1701,y:1565,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:69,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/catapult/prepare/0.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1757,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1746,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1746,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1746,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1746,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1735,w:32,h:32}},{filename:"sprites/tinted_images/white/units/crossbow/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1765,y:1,w:32,h:32}},{filename:"sprites/tinted_images/white/units/golem/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1735,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1780,w:32,h:32}},{filename:"sprites/tinted_images/white/units/knight/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1055,y:1780,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:205,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:307,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:307,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:307,w:32,h:32}},{filename:"sprites/tinted_images/white/units/pikeman/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1799,y:307,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1787,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1463,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/prepare/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/prepare/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1531,w:32,h:32}},{filename:"sprites/tinted_images/white/units/swordsman/prepare/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1769,y:1599,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:885,y:1825,w:32,h:32}},{filename:"sprites/tinted_images/white/units/wizard/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1191,y:1814,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/15.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/20.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/25.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1327,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/16.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/21.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/26.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1361,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/17.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/22.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/27.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1395,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/18.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/23.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/28.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1429,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/19.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/24.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/animations/capture/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1463,y:1803,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/attack/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:103,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:375,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/prepare/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:375,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:545,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/archer/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:851,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/prepare/4.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:919,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/idle/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1833,y:1157,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/catapult/prepare/0.ng.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1821,y:1225,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:137,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:307,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/crossbow/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1859,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/golem/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1867,y:613,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/death/6.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/knight/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:103,y:1893,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/idle/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1021,y:1883,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/death/11.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1882,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/death/7.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1882,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/death/8.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1882,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/pikeman/death/9.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1123,y:1882,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/attack/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1901,y:1123,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/death/5.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1361,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/prepare/0.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/prepare/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1395,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/idle/2.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1429,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/swordsman/prepare/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:1871,y:1497,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/down/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:681,y:1927,w:32,h:32}},{filename:"sprites/tinted_images/yellow/units/wizard/walk/up/3.png",rotated:!1,trimmed:!1,sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0,w:32,h:32},frame:{x:987,y:1927,w:32,h:32}}]}],atlasJson={meta,textures},SpriteImage=({spriteKey:cr,scale:ar,colorName:dr})=>{const fr=getSprites(),hr=ar??1;let pr=fr[cr];if(dr){const yr=fr[`${cr}-${dr}`];yr||console.error("Could not find colored sprite",cr,dr),pr=yr}const mr=atlasJson.textures[0].size,gr=atlasJson.textures[0].frames.find(yr=>yr.filename===pr.frame);if(!gr)throw new Error(`Could not find sprite ${cr} in atlas`);return jsxRuntimeExports.jsx("div",{style:{width:`${gr.sourceSize.w*hr}px`,height:`${gr.sourceSize.h*hr}px`,overflow:"hidden",position:"relative"},children:jsxRuntimeExports.jsx("img",{src:"atlases/sprites/atlas.png",style:{imageRendering:"pixelated",maxWidth:`${mr.w*hr}px`,maxHeight:`${mr.h*hr}px`,height:`${mr.h*hr}px`,width:`${mr.w*hr}px`,marginTop:`-${gr.frame.y*hr}px`,marginLeft:`-${gr.frame.x*hr}px`,clipPath:`inset(${gr.frame.y+1}px ${mr.w-(gr.frame.x+gr.sourceSize.w)}px ${mr.h-(gr.frame.y+gr.sourceSize.h)}px ${gr.frame.x}px)`}})})},useCurrentPlayer=cr=>{const{networkLayer:{components:{Name:ar,Match:dr,OwnedBy:fr,Player:hr}},localLayer:{api:{getOwnerColor:pr}},externalWalletClient:mr}=useMUD(),gr=te$5([Je$2(fr,{value:mr&&mr.account?addressToEntityID(mr.account.address):""}),Je$2(dr,{matchEntity:cr}),Ye$3(hr)])[0],yr=H$4(fr,gr)?.value??"0x00",xr=H$4(ar,yr)?.value,wr=gr?pr(gr):{name:"white",color:16777215};return{mainWallet:yr,player:gr,playerColor:wr,name:xr,matchEntity:cr}},BuildSprites=({matchEntity:cr,buildData:ar,position:dr,stopBuilding:fr})=>{const{phaserLayer:{components:{HoverHighlight:hr},scenes:{Main:{phaserScene:pr,objectPool:mr,input:gr,maps:{Main:{tileWidth:yr,tileHeight:xr}}}},api:{mapInteraction:{disableMapInteraction:wr,enableMapInteraction:br},drawTileHighlight:Sr,buildAt:vr,playTintedAnimation:Er,depthFromPosition:Ar}}}=useMUD(),_r=useCurrentPlayer(cr),[Cr,kr]=reactExports.useState([]),Rr=reactExports.useMemo(()=>[{...dr,x:dr.x+1},{...dr,x:dr.x-1},{...dr,y:dr.y+1},{...dr,y:dr.y-1}],[dr]);return reactExports.useEffect(()=>()=>{for(let Ir=0;Ir<Cr.length;Ir++)mr.remove(Cr[Ir])},[mr,Cr]),reactExports.useEffect(()=>{const Ir=ar.unitType,Nr=UnitTypeAnimations[Ir],Pr=ue$1();let Tr;Er(Pr,Nr,_r.playerColor.name,Fr=>{Fr.setOrigin(0,0),Ir===UnitTypes.Brute&&Fr.setOrigin(.18,.18),Tr=Fr});const Br=gr.pointermove$.subscribe(({pointer:Fr})=>{const jr=se$3({x:Fr.worldX,y:Fr.worldY},yr,xr);if(Tr){Tr.setDepth(Ar(jr,RenderDepth.UI1));const Ur=B$4(jr,yr,xr);Tr.setPosition(Ur.x,Ur.y-UNIT_OFFSET),Rr.find(qr=>qr.x===jr.x&&qr.y===jr.y)?Tr.clearTint():Tr.setTint(6710886)}});return()=>{Br.unsubscribe(),mr.remove(Pr)}},[ar.unitType,Rr,_r.playerColor,Ar,gr.pointermove$,mr,pr.add,Er,xr,yr]),reactExports.useEffect(()=>{wr(),ue$2(hr,f$8);for(let Nr=0;Nr<Rr.length;Nr++)kr(Pr=>[...Pr,`build-position-${Nr}`]),Sr(`build-position-${Nr}`,Rr[Nr],"yellow");const Ir=merge$2(gr.click$,gr.rightClick$).subscribe(Nr=>{const Pr=se$3({x:Nr.worldX,y:Nr.worldY},yr,xr);for(const Tr of Rr)Pr.x===Tr.x&&Pr.y===Tr.y&&vr(ar.factory,ar.prototypeId,Tr);fr(),br()});return()=>{Ir.unsubscribe(),br()}},[]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})};function worldCoordToScreenCoord(cr,ar){return{x:(cr.x-ar.worldView.x)*ar.zoom,y:(cr.y-ar.worldView.y)*ar.zoom}}function useTileCoordToScreenCoord(cr){const{phaserLayer:{scenes:{Main:{camera:{worldView$:ar,phaserCamera:dr}}}}}=useMUD(),[fr,hr]=reactExports.useState({x:0,y:0}),pr=reactExports.useMemo(()=>B$4({x:cr.x,y:cr.y},TILE_WIDTH,TILE_HEIGHT),[cr.x,cr.y]);return reactExports.useEffect(()=>{const mr=()=>{const yr=worldCoordToScreenCoord({x:pr.x,y:pr.y},dr);fr.x===yr.x&&fr.y===yr.y||hr(yr)},gr=ar.subscribe(()=>{mr()});return()=>{gr.unsubscribe()}},[dr,fr.x,fr.y,pr.x,pr.y,ar]),fr}const Factory=({matchEntity:cr})=>{const{networkLayer:{utils:{getCurrentPlayerEntity:ar},components:{BuildingUnit:dr},network:{components:{OwnedBy:fr,Factory:hr}}},localLayer:{components:{LocalPosition:pr,Selected:mr}}}=useMUD(),gr=te$5([Ye$3(mr),Ye$3(hr),Ye$3(pr)])[0],yr=reactExports.useMemo(()=>gr?ar():null,[ar,gr]),xr=te$5([Ye$3(mr),Ye$3(hr),Je$2(fr,{value:decodeMatchEntity(yr).entity}),Ye$3(pr)])[0],wr=H$4(dr,xr),br=reactExports.useCallback(kr=>{kr&&E$5(dr,xr,kr)},[dr,xr]),Sr=useCurrentPlayer(cr),{amount:vr}=usePlayerGold(Sr),Er=xr?de$2(pr,xr):{x:0,y:0},Ar=useTileCoordToScreenCoord(Er);if(reactExports.useEffect(()=>{xr||ue$2(dr,xr)},[dr,xr,br]),!xr)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const _r=de$2(hr,xr),Cr=[];if(_r)for(let kr=0;kr<_r.prototypeIds.length;kr++){const Rr=_r.staminaCosts[kr],Ir=_r.prototypeIds[kr],Nr=hexToString(Ir,{size:32}),Pr=UnitTypes[Nr];Cr.push({factory:xr,unitType:Pr,staminaCost:Rr,prototypeId:Ir})}return jsxRuntimeExports.jsxs("div",{style:{position:"absolute",top:Ar.y,left:Ar.x,display:wr?"none":"block"},className:"h-fit w-fit",children:[wr&&jsxRuntimeExports.jsx(BuildSprites,{matchEntity:cr,buildData:wr,position:Er,stopBuilding:()=>{ue$2(dr,xr),ue$2(mr,xr)}}),!wr&&jsxRuntimeExports.jsx(ClickWrapper,{style:{transform:"translateX(-50%)",marginTop:"-10rem"},className:"align-center flex flex-row",children:Cr.map((kr,Rr)=>{const Ir=kr.staminaCost>vr;return jsxRuntimeExports.jsxs("div",{onClick:Nr=>{Ir||(Nr.stopPropagation(),br(kr))},className:twMerge("align-center ml-2 flex h-fit w-fit cursor-pointer flex-col justify-center rounded border border-solid border-teal-900 bg-teal-800/80 text-yellow-200 transition-all duration-200 ease-in-out hover:-translate-y-2 hover:border-teal-800/60 hover:bg-teal-800/60 hover:text-yellow-300","p-1 pt-3",Ir&&"cursor-not-allowed border-teal-800/40 bg-teal-800/40 text-yellow-200/40"),children:[jsxRuntimeExports.jsx("div",{style:{opacity:Ir?.4:1},children:jsxRuntimeExports.jsx("div",{style:{marginTop:kr.unitType===UnitTypes.Brute?"-2rem":"0",marginLeft:kr.unitType===UnitTypes.Brute?"-0.75rem":"0",marginRight:kr.unitType===UnitTypes.Brute?"-0.75rem":"0"},children:jsxRuntimeExports.jsx(SpriteImage,{spriteKey:UnitTypeSprites[kr.unitType],scale:2,colorName:Sr.playerColor.name})})}),jsxRuntimeExports.jsx("span",{style:{fontSmooth:"never"},className:"self-center",children:kr.staminaCost})]},`${Rr}-${kr.unitType}`)})})]})};function useMatchRewards(cr){const{components:{MatchConfig:ar,MatchReward:dr,MatchSweepstake:fr},utils:{getLevelSpawns:hr}}=useAmalgema(),pr=[...A$6([Ye$3(dr)])].map(vr=>{const{entity:Er,rank:Ar}=ft$3(dr.metadata.keySchema,vr);if(Er!==cr)return;const{value:_r}=de$2(dr,vr);return{rank:Ar,value:_r,emoji:EMOJI}}).filter(w$8),mr=g$7(ar,cr),gr=hr(mr?.levelId??"0"),yr=g$7(fr,cr),xr=yr?.entranceFee??0n,wr=xr*BigInt(gr.length),br=lodashExports.times(gr.length+1,vr=>{const Er=yr?.rewardPercentages[vr]??0n,Ar=wr*Er/100n;return{rank:vr,value:Ar}}),Sr=pr.map(({value:vr},Er)=>{const Ar=br[Er]?.value??0n;return{rank:Er,value:vr+Ar}});return{skypoolRewards:pr,sweepstakeRewards:br,totalRewards:Sr,entranceFee:xr}}var colorString$1={exports:{}},colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},simpleSwizzle={exports:{}},isArrayish$1=function(ar){return!ar||typeof ar=="string"?!1:ar instanceof Array||Array.isArray(ar)||ar.length>=0&&(ar.splice instanceof Function||Object.getOwnPropertyDescriptor(ar,ar.length-1)&&ar.constructor.name!=="String")},isArrayish=isArrayish$1,concat$5=Array.prototype.concat,slice$1=Array.prototype.slice,swizzle$1=simpleSwizzle.exports=function(ar){for(var dr=[],fr=0,hr=ar.length;fr<hr;fr++){var pr=ar[fr];isArrayish(pr)?dr=concat$5.call(dr,slice$1.call(pr)):dr.push(pr)}return dr};swizzle$1.wrap=function(cr){return function(){return cr(swizzle$1(arguments))}};var simpleSwizzleExports=simpleSwizzle.exports,colorNames=colorName,swizzle=simpleSwizzleExports,hasOwnProperty$1=Object.hasOwnProperty,reverseNames=Object.create(null);for(var name$3 in colorNames)hasOwnProperty$1.call(colorNames,name$3)&&(reverseNames[colorNames[name$3]]=name$3);var cs=colorString$1.exports={to:{},get:{}};cs.get=function(cr){var ar=cr.substring(0,3).toLowerCase(),dr,fr;switch(ar){case"hsl":dr=cs.get.hsl(cr),fr="hsl";break;case"hwb":dr=cs.get.hwb(cr),fr="hwb";break;default:dr=cs.get.rgb(cr),fr="rgb";break}return dr?{model:fr,value:dr}:null};cs.get.rgb=function(cr){if(!cr)return null;var ar=/^#([a-f0-9]{3,4})$/i,dr=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,fr=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,hr=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,pr=/^(\w+)$/,mr=[0,0,0,1],gr,yr,xr;if(gr=cr.match(dr)){for(xr=gr[2],gr=gr[1],yr=0;yr<3;yr++){var wr=yr*2;mr[yr]=parseInt(gr.slice(wr,wr+2),16)}xr&&(mr[3]=parseInt(xr,16)/255)}else if(gr=cr.match(ar)){for(gr=gr[1],xr=gr[3],yr=0;yr<3;yr++)mr[yr]=parseInt(gr[yr]+gr[yr],16);xr&&(mr[3]=parseInt(xr+xr,16)/255)}else if(gr=cr.match(fr)){for(yr=0;yr<3;yr++)mr[yr]=parseInt(gr[yr+1],0);gr[4]&&(gr[5]?mr[3]=parseFloat(gr[4])*.01:mr[3]=parseFloat(gr[4]))}else if(gr=cr.match(hr)){for(yr=0;yr<3;yr++)mr[yr]=Math.round(parseFloat(gr[yr+1])*2.55);gr[4]&&(gr[5]?mr[3]=parseFloat(gr[4])*.01:mr[3]=parseFloat(gr[4]))}else return(gr=cr.match(pr))?gr[1]==="transparent"?[0,0,0,0]:hasOwnProperty$1.call(colorNames,gr[1])?(mr=colorNames[gr[1]],mr[3]=1,mr):null:null;for(yr=0;yr<3;yr++)mr[yr]=clamp(mr[yr],0,255);return mr[3]=clamp(mr[3],0,1),mr};cs.get.hsl=function(cr){if(!cr)return null;var ar=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,dr=cr.match(ar);if(dr){var fr=parseFloat(dr[4]),hr=(parseFloat(dr[1])%360+360)%360,pr=clamp(parseFloat(dr[2]),0,100),mr=clamp(parseFloat(dr[3]),0,100),gr=clamp(isNaN(fr)?1:fr,0,1);return[hr,pr,mr,gr]}return null};cs.get.hwb=function(cr){if(!cr)return null;var ar=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,dr=cr.match(ar);if(dr){var fr=parseFloat(dr[4]),hr=(parseFloat(dr[1])%360+360)%360,pr=clamp(parseFloat(dr[2]),0,100),mr=clamp(parseFloat(dr[3]),0,100),gr=clamp(isNaN(fr)?1:fr,0,1);return[hr,pr,mr,gr]}return null};cs.to.hex=function(){var cr=swizzle(arguments);return"#"+hexDouble(cr[0])+hexDouble(cr[1])+hexDouble(cr[2])+(cr[3]<1?hexDouble(Math.round(cr[3]*255)):"")};cs.to.rgb=function(){var cr=swizzle(arguments);return cr.length<4||cr[3]===1?"rgb("+Math.round(cr[0])+", "+Math.round(cr[1])+", "+Math.round(cr[2])+")":"rgba("+Math.round(cr[0])+", "+Math.round(cr[1])+", "+Math.round(cr[2])+", "+cr[3]+")"};cs.to.rgb.percent=function(){var cr=swizzle(arguments),ar=Math.round(cr[0]/255*100),dr=Math.round(cr[1]/255*100),fr=Math.round(cr[2]/255*100);return cr.length<4||cr[3]===1?"rgb("+ar+"%, "+dr+"%, "+fr+"%)":"rgba("+ar+"%, "+dr+"%, "+fr+"%, "+cr[3]+")"};cs.to.hsl=function(){var cr=swizzle(arguments);return cr.length<4||cr[3]===1?"hsl("+cr[0]+", "+cr[1]+"%, "+cr[2]+"%)":"hsla("+cr[0]+", "+cr[1]+"%, "+cr[2]+"%, "+cr[3]+")"};cs.to.hwb=function(){var cr=swizzle(arguments),ar="";return cr.length>=4&&cr[3]!==1&&(ar=", "+cr[3]),"hwb("+cr[0]+", "+cr[1]+"%, "+cr[2]+"%"+ar+")"};cs.to.keyword=function(cr){return reverseNames[cr.slice(0,3)]};function clamp(cr,ar,dr){return Math.min(Math.max(ar,cr),dr)}function hexDouble(cr){var ar=Math.round(cr).toString(16).toUpperCase();return ar.length<2?"0"+ar:ar}var colorStringExports=colorString$1.exports;const cssKeywords=colorName,reverseKeywords={};for(const cr of Object.keys(cssKeywords))reverseKeywords[cssKeywords[cr]]=cr;const convert$3={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var conversions$2=convert$3;for(const cr of Object.keys(convert$3)){if(!("channels"in convert$3[cr]))throw new Error("missing channels property: "+cr);if(!("labels"in convert$3[cr]))throw new Error("missing channel labels property: "+cr);if(convert$3[cr].labels.length!==convert$3[cr].channels)throw new Error("channel and label counts mismatch: "+cr);const{channels:ar,labels:dr}=convert$3[cr];delete convert$3[cr].channels,delete convert$3[cr].labels,Object.defineProperty(convert$3[cr],"channels",{value:ar}),Object.defineProperty(convert$3[cr],"labels",{value:dr})}convert$3.rgb.hsl=function(cr){const ar=cr[0]/255,dr=cr[1]/255,fr=cr[2]/255,hr=Math.min(ar,dr,fr),pr=Math.max(ar,dr,fr),mr=pr-hr;let gr,yr;pr===hr?gr=0:ar===pr?gr=(dr-fr)/mr:dr===pr?gr=2+(fr-ar)/mr:fr===pr&&(gr=4+(ar-dr)/mr),gr=Math.min(gr*60,360),gr<0&&(gr+=360);const xr=(hr+pr)/2;return pr===hr?yr=0:xr<=.5?yr=mr/(pr+hr):yr=mr/(2-pr-hr),[gr,yr*100,xr*100]};convert$3.rgb.hsv=function(cr){let ar,dr,fr,hr,pr;const mr=cr[0]/255,gr=cr[1]/255,yr=cr[2]/255,xr=Math.max(mr,gr,yr),wr=xr-Math.min(mr,gr,yr),br=function(Sr){return(xr-Sr)/6/wr+1/2};return wr===0?(hr=0,pr=0):(pr=wr/xr,ar=br(mr),dr=br(gr),fr=br(yr),mr===xr?hr=fr-dr:gr===xr?hr=1/3+ar-fr:yr===xr&&(hr=2/3+dr-ar),hr<0?hr+=1:hr>1&&(hr-=1)),[hr*360,pr*100,xr*100]};convert$3.rgb.hwb=function(cr){const ar=cr[0],dr=cr[1];let fr=cr[2];const hr=convert$3.rgb.hsl(cr)[0],pr=1/255*Math.min(ar,Math.min(dr,fr));return fr=1-1/255*Math.max(ar,Math.max(dr,fr)),[hr,pr*100,fr*100]};convert$3.rgb.cmyk=function(cr){const ar=cr[0]/255,dr=cr[1]/255,fr=cr[2]/255,hr=Math.min(1-ar,1-dr,1-fr),pr=(1-ar-hr)/(1-hr)||0,mr=(1-dr-hr)/(1-hr)||0,gr=(1-fr-hr)/(1-hr)||0;return[pr*100,mr*100,gr*100,hr*100]};function comparativeDistance(cr,ar){return(cr[0]-ar[0])**2+(cr[1]-ar[1])**2+(cr[2]-ar[2])**2}convert$3.rgb.keyword=function(cr){const ar=reverseKeywords[cr];if(ar)return ar;let dr=1/0,fr;for(const hr of Object.keys(cssKeywords)){const pr=cssKeywords[hr],mr=comparativeDistance(cr,pr);mr<dr&&(dr=mr,fr=hr)}return fr};convert$3.keyword.rgb=function(cr){return cssKeywords[cr]};convert$3.rgb.xyz=function(cr){let ar=cr[0]/255,dr=cr[1]/255,fr=cr[2]/255;ar=ar>.04045?((ar+.055)/1.055)**2.4:ar/12.92,dr=dr>.04045?((dr+.055)/1.055)**2.4:dr/12.92,fr=fr>.04045?((fr+.055)/1.055)**2.4:fr/12.92;const hr=ar*.4124+dr*.3576+fr*.1805,pr=ar*.2126+dr*.7152+fr*.0722,mr=ar*.0193+dr*.1192+fr*.9505;return[hr*100,pr*100,mr*100]};convert$3.rgb.lab=function(cr){const ar=convert$3.rgb.xyz(cr);let dr=ar[0],fr=ar[1],hr=ar[2];dr/=95.047,fr/=100,hr/=108.883,dr=dr>.008856?dr**(1/3):7.787*dr+16/116,fr=fr>.008856?fr**(1/3):7.787*fr+16/116,hr=hr>.008856?hr**(1/3):7.787*hr+16/116;const pr=116*fr-16,mr=500*(dr-fr),gr=200*(fr-hr);return[pr,mr,gr]};convert$3.hsl.rgb=function(cr){const ar=cr[0]/360,dr=cr[1]/100,fr=cr[2]/100;let hr,pr,mr;if(dr===0)return mr=fr*255,[mr,mr,mr];fr<.5?hr=fr*(1+dr):hr=fr+dr-fr*dr;const gr=2*fr-hr,yr=[0,0,0];for(let xr=0;xr<3;xr++)pr=ar+1/3*-(xr-1),pr<0&&pr++,pr>1&&pr--,6*pr<1?mr=gr+(hr-gr)*6*pr:2*pr<1?mr=hr:3*pr<2?mr=gr+(hr-gr)*(2/3-pr)*6:mr=gr,yr[xr]=mr*255;return yr};convert$3.hsl.hsv=function(cr){const ar=cr[0];let dr=cr[1]/100,fr=cr[2]/100,hr=dr;const pr=Math.max(fr,.01);fr*=2,dr*=fr<=1?fr:2-fr,hr*=pr<=1?pr:2-pr;const mr=(fr+dr)/2,gr=fr===0?2*hr/(pr+hr):2*dr/(fr+dr);return[ar,gr*100,mr*100]};convert$3.hsv.rgb=function(cr){const ar=cr[0]/60,dr=cr[1]/100;let fr=cr[2]/100;const hr=Math.floor(ar)%6,pr=ar-Math.floor(ar),mr=255*fr*(1-dr),gr=255*fr*(1-dr*pr),yr=255*fr*(1-dr*(1-pr));switch(fr*=255,hr){case 0:return[fr,yr,mr];case 1:return[gr,fr,mr];case 2:return[mr,fr,yr];case 3:return[mr,gr,fr];case 4:return[yr,mr,fr];case 5:return[fr,mr,gr]}};convert$3.hsv.hsl=function(cr){const ar=cr[0],dr=cr[1]/100,fr=cr[2]/100,hr=Math.max(fr,.01);let pr,mr;mr=(2-dr)*fr;const gr=(2-dr)*hr;return pr=dr*hr,pr/=gr<=1?gr:2-gr,pr=pr||0,mr/=2,[ar,pr*100,mr*100]};convert$3.hwb.rgb=function(cr){const ar=cr[0]/360;let dr=cr[1]/100,fr=cr[2]/100;const hr=dr+fr;let pr;hr>1&&(dr/=hr,fr/=hr);const mr=Math.floor(6*ar),gr=1-fr;pr=6*ar-mr,mr&1&&(pr=1-pr);const yr=dr+pr*(gr-dr);let xr,wr,br;switch(mr){default:case 6:case 0:xr=gr,wr=yr,br=dr;break;case 1:xr=yr,wr=gr,br=dr;break;case 2:xr=dr,wr=gr,br=yr;break;case 3:xr=dr,wr=yr,br=gr;break;case 4:xr=yr,wr=dr,br=gr;break;case 5:xr=gr,wr=dr,br=yr;break}return[xr*255,wr*255,br*255]};convert$3.cmyk.rgb=function(cr){const ar=cr[0]/100,dr=cr[1]/100,fr=cr[2]/100,hr=cr[3]/100,pr=1-Math.min(1,ar*(1-hr)+hr),mr=1-Math.min(1,dr*(1-hr)+hr),gr=1-Math.min(1,fr*(1-hr)+hr);return[pr*255,mr*255,gr*255]};convert$3.xyz.rgb=function(cr){const ar=cr[0]/100,dr=cr[1]/100,fr=cr[2]/100;let hr,pr,mr;return hr=ar*3.2406+dr*-1.5372+fr*-.4986,pr=ar*-.9689+dr*1.8758+fr*.0415,mr=ar*.0557+dr*-.204+fr*1.057,hr=hr>.0031308?1.055*hr**(1/2.4)-.055:hr*12.92,pr=pr>.0031308?1.055*pr**(1/2.4)-.055:pr*12.92,mr=mr>.0031308?1.055*mr**(1/2.4)-.055:mr*12.92,hr=Math.min(Math.max(0,hr),1),pr=Math.min(Math.max(0,pr),1),mr=Math.min(Math.max(0,mr),1),[hr*255,pr*255,mr*255]};convert$3.xyz.lab=function(cr){let ar=cr[0],dr=cr[1],fr=cr[2];ar/=95.047,dr/=100,fr/=108.883,ar=ar>.008856?ar**(1/3):7.787*ar+16/116,dr=dr>.008856?dr**(1/3):7.787*dr+16/116,fr=fr>.008856?fr**(1/3):7.787*fr+16/116;const hr=116*dr-16,pr=500*(ar-dr),mr=200*(dr-fr);return[hr,pr,mr]};convert$3.lab.xyz=function(cr){const ar=cr[0],dr=cr[1],fr=cr[2];let hr,pr,mr;pr=(ar+16)/116,hr=dr/500+pr,mr=pr-fr/200;const gr=pr**3,yr=hr**3,xr=mr**3;return pr=gr>.008856?gr:(pr-16/116)/7.787,hr=yr>.008856?yr:(hr-16/116)/7.787,mr=xr>.008856?xr:(mr-16/116)/7.787,hr*=95.047,pr*=100,mr*=108.883,[hr,pr,mr]};convert$3.lab.lch=function(cr){const ar=cr[0],dr=cr[1],fr=cr[2];let hr;hr=Math.atan2(fr,dr)*360/2/Math.PI,hr<0&&(hr+=360);const mr=Math.sqrt(dr*dr+fr*fr);return[ar,mr,hr]};convert$3.lch.lab=function(cr){const ar=cr[0],dr=cr[1],hr=cr[2]/360*2*Math.PI,pr=dr*Math.cos(hr),mr=dr*Math.sin(hr);return[ar,pr,mr]};convert$3.rgb.ansi16=function(cr,ar=null){const[dr,fr,hr]=cr;let pr=ar===null?convert$3.rgb.hsv(cr)[2]:ar;if(pr=Math.round(pr/50),pr===0)return 30;let mr=30+(Math.round(hr/255)<<2|Math.round(fr/255)<<1|Math.round(dr/255));return pr===2&&(mr+=60),mr};convert$3.hsv.ansi16=function(cr){return convert$3.rgb.ansi16(convert$3.hsv.rgb(cr),cr[2])};convert$3.rgb.ansi256=function(cr){const ar=cr[0],dr=cr[1],fr=cr[2];return ar===dr&&dr===fr?ar<8?16:ar>248?231:Math.round((ar-8)/247*24)+232:16+36*Math.round(ar/255*5)+6*Math.round(dr/255*5)+Math.round(fr/255*5)};convert$3.ansi16.rgb=function(cr){let ar=cr%10;if(ar===0||ar===7)return cr>50&&(ar+=3.5),ar=ar/10.5*255,[ar,ar,ar];const dr=(~~(cr>50)+1)*.5,fr=(ar&1)*dr*255,hr=(ar>>1&1)*dr*255,pr=(ar>>2&1)*dr*255;return[fr,hr,pr]};convert$3.ansi256.rgb=function(cr){if(cr>=232){const pr=(cr-232)*10+8;return[pr,pr,pr]}cr-=16;let ar;const dr=Math.floor(cr/36)/5*255,fr=Math.floor((ar=cr%36)/6)/5*255,hr=ar%6/5*255;return[dr,fr,hr]};convert$3.rgb.hex=function(cr){const dr=(((Math.round(cr[0])&255)<<16)+((Math.round(cr[1])&255)<<8)+(Math.round(cr[2])&255)).toString(16).toUpperCase();return"000000".substring(dr.length)+dr};convert$3.hex.rgb=function(cr){const ar=cr.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!ar)return[0,0,0];let dr=ar[0];ar[0].length===3&&(dr=dr.split("").map(gr=>gr+gr).join(""));const fr=parseInt(dr,16),hr=fr>>16&255,pr=fr>>8&255,mr=fr&255;return[hr,pr,mr]};convert$3.rgb.hcg=function(cr){const ar=cr[0]/255,dr=cr[1]/255,fr=cr[2]/255,hr=Math.max(Math.max(ar,dr),fr),pr=Math.min(Math.min(ar,dr),fr),mr=hr-pr;let gr,yr;return mr<1?gr=pr/(1-mr):gr=0,mr<=0?yr=0:hr===ar?yr=(dr-fr)/mr%6:hr===dr?yr=2+(fr-ar)/mr:yr=4+(ar-dr)/mr,yr/=6,yr%=1,[yr*360,mr*100,gr*100]};convert$3.hsl.hcg=function(cr){const ar=cr[1]/100,dr=cr[2]/100,fr=dr<.5?2*ar*dr:2*ar*(1-dr);let hr=0;return fr<1&&(hr=(dr-.5*fr)/(1-fr)),[cr[0],fr*100,hr*100]};convert$3.hsv.hcg=function(cr){const ar=cr[1]/100,dr=cr[2]/100,fr=ar*dr;let hr=0;return fr<1&&(hr=(dr-fr)/(1-fr)),[cr[0],fr*100,hr*100]};convert$3.hcg.rgb=function(cr){const ar=cr[0]/360,dr=cr[1]/100,fr=cr[2]/100;if(dr===0)return[fr*255,fr*255,fr*255];const hr=[0,0,0],pr=ar%1*6,mr=pr%1,gr=1-mr;let yr=0;switch(Math.floor(pr)){case 0:hr[0]=1,hr[1]=mr,hr[2]=0;break;case 1:hr[0]=gr,hr[1]=1,hr[2]=0;break;case 2:hr[0]=0,hr[1]=1,hr[2]=mr;break;case 3:hr[0]=0,hr[1]=gr,hr[2]=1;break;case 4:hr[0]=mr,hr[1]=0,hr[2]=1;break;default:hr[0]=1,hr[1]=0,hr[2]=gr}return yr=(1-dr)*fr,[(dr*hr[0]+yr)*255,(dr*hr[1]+yr)*255,(dr*hr[2]+yr)*255]};convert$3.hcg.hsv=function(cr){const ar=cr[1]/100,dr=cr[2]/100,fr=ar+dr*(1-ar);let hr=0;return fr>0&&(hr=ar/fr),[cr[0],hr*100,fr*100]};convert$3.hcg.hsl=function(cr){const ar=cr[1]/100,fr=cr[2]/100*(1-ar)+.5*ar;let hr=0;return fr>0&&fr<.5?hr=ar/(2*fr):fr>=.5&&fr<1&&(hr=ar/(2*(1-fr))),[cr[0],hr*100,fr*100]};convert$3.hcg.hwb=function(cr){const ar=cr[1]/100,dr=cr[2]/100,fr=ar+dr*(1-ar);return[cr[0],(fr-ar)*100,(1-fr)*100]};convert$3.hwb.hcg=function(cr){const ar=cr[1]/100,fr=1-cr[2]/100,hr=fr-ar;let pr=0;return hr<1&&(pr=(fr-hr)/(1-hr)),[cr[0],hr*100,pr*100]};convert$3.apple.rgb=function(cr){return[cr[0]/65535*255,cr[1]/65535*255,cr[2]/65535*255]};convert$3.rgb.apple=function(cr){return[cr[0]/255*65535,cr[1]/255*65535,cr[2]/255*65535]};convert$3.gray.rgb=function(cr){return[cr[0]/100*255,cr[0]/100*255,cr[0]/100*255]};convert$3.gray.hsl=function(cr){return[0,0,cr[0]]};convert$3.gray.hsv=convert$3.gray.hsl;convert$3.gray.hwb=function(cr){return[0,100,cr[0]]};convert$3.gray.cmyk=function(cr){return[0,0,0,cr[0]]};convert$3.gray.lab=function(cr){return[cr[0],0,0]};convert$3.gray.hex=function(cr){const ar=Math.round(cr[0]/100*255)&255,fr=((ar<<16)+(ar<<8)+ar).toString(16).toUpperCase();return"000000".substring(fr.length)+fr};convert$3.rgb.gray=function(cr){return[(cr[0]+cr[1]+cr[2])/3/255*100]};const conversions$1=conversions$2;function buildGraph(){const cr={},ar=Object.keys(conversions$1);for(let dr=ar.length,fr=0;fr<dr;fr++)cr[ar[fr]]={distance:-1,parent:null};return cr}function deriveBFS(cr){const ar=buildGraph(),dr=[cr];for(ar[cr].distance=0;dr.length;){const fr=dr.pop(),hr=Object.keys(conversions$1[fr]);for(let pr=hr.length,mr=0;mr<pr;mr++){const gr=hr[mr],yr=ar[gr];yr.distance===-1&&(yr.distance=ar[fr].distance+1,yr.parent=fr,dr.unshift(gr))}}return ar}function link(cr,ar){return function(dr){return ar(cr(dr))}}function wrapConversion(cr,ar){const dr=[ar[cr].parent,cr];let fr=conversions$1[ar[cr].parent][cr],hr=ar[cr].parent;for(;ar[hr].parent;)dr.unshift(ar[hr].parent),fr=link(conversions$1[ar[hr].parent][hr],fr),hr=ar[hr].parent;return fr.conversion=dr,fr}var route$1=function(cr){const ar=deriveBFS(cr),dr={},fr=Object.keys(ar);for(let hr=fr.length,pr=0;pr<hr;pr++){const mr=fr[pr];ar[mr].parent!==null&&(dr[mr]=wrapConversion(mr,ar))}return dr};const conversions=conversions$2,route=route$1,convert$2={},models=Object.keys(conversions);function wrapRaw(cr){const ar=function(...dr){const fr=dr[0];return fr==null?fr:(fr.length>1&&(dr=fr),cr(dr))};return"conversion"in cr&&(ar.conversion=cr.conversion),ar}function wrapRounded(cr){const ar=function(...dr){const fr=dr[0];if(fr==null)return fr;fr.length>1&&(dr=fr);const hr=cr(dr);if(typeof hr=="object")for(let pr=hr.length,mr=0;mr<pr;mr++)hr[mr]=Math.round(hr[mr]);return hr};return"conversion"in cr&&(ar.conversion=cr.conversion),ar}models.forEach(cr=>{convert$2[cr]={},Object.defineProperty(convert$2[cr],"channels",{value:conversions[cr].channels}),Object.defineProperty(convert$2[cr],"labels",{value:conversions[cr].labels});const ar=route(cr);Object.keys(ar).forEach(fr=>{const hr=ar[fr];convert$2[cr][fr]=wrapRounded(hr),convert$2[cr][fr].raw=wrapRaw(hr)})});var colorConvert=convert$2;const colorString=colorStringExports,convert$1=colorConvert,skippedModels=["keyword","gray","hex"],hashedModelKeys={};for(const cr of Object.keys(convert$1))hashedModelKeys[[...convert$1[cr].labels].sort().join("")]=cr;const limiters={};function Color(cr,ar){if(!(this instanceof Color))return new Color(cr,ar);if(ar&&ar in skippedModels&&(ar=null),ar&&!(ar in convert$1))throw new Error("Unknown model: "+ar);let dr,fr;if(cr==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(cr instanceof Color)this.model=cr.model,this.color=[...cr.color],this.valpha=cr.valpha;else if(typeof cr=="string"){const hr=colorString.get(cr);if(hr===null)throw new Error("Unable to parse color from string: "+cr);this.model=hr.model,fr=convert$1[this.model].channels,this.color=hr.value.slice(0,fr),this.valpha=typeof hr.value[fr]=="number"?hr.value[fr]:1}else if(cr.length>0){this.model=ar||"rgb",fr=convert$1[this.model].channels;const hr=Array.prototype.slice.call(cr,0,fr);this.color=zeroArray(hr,fr),this.valpha=typeof cr[fr]=="number"?cr[fr]:1}else if(typeof cr=="number")this.model="rgb",this.color=[cr>>16&255,cr>>8&255,cr&255],this.valpha=1;else{this.valpha=1;const hr=Object.keys(cr);"alpha"in cr&&(hr.splice(hr.indexOf("alpha"),1),this.valpha=typeof cr.alpha=="number"?cr.alpha:0);const pr=hr.sort().join("");if(!(pr in hashedModelKeys))throw new Error("Unable to parse color from object: "+JSON.stringify(cr));this.model=hashedModelKeys[pr];const{labels:mr}=convert$1[this.model],gr=[];for(dr=0;dr<mr.length;dr++)gr.push(cr[mr[dr]]);this.color=zeroArray(gr)}if(limiters[this.model])for(fr=convert$1[this.model].channels,dr=0;dr<fr;dr++){const hr=limiters[this.model][dr];hr&&(this.color[dr]=hr(this.color[dr]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Color.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(cr){let ar=this.model in colorString.to?this:this.rgb();ar=ar.round(typeof cr=="number"?cr:1);const dr=ar.valpha===1?ar.color:[...ar.color,this.valpha];return colorString.to[ar.model](dr)},percentString(cr){const ar=this.rgb().round(typeof cr=="number"?cr:1),dr=ar.valpha===1?ar.color:[...ar.color,this.valpha];return colorString.to.rgb.percent(dr)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const cr={},{channels:ar}=convert$1[this.model],{labels:dr}=convert$1[this.model];for(let fr=0;fr<ar;fr++)cr[dr[fr]]=this.color[fr];return this.valpha!==1&&(cr.alpha=this.valpha),cr},unitArray(){const cr=this.rgb().color;return cr[0]/=255,cr[1]/=255,cr[2]/=255,this.valpha!==1&&cr.push(this.valpha),cr},unitObject(){const cr=this.rgb().object();return cr.r/=255,cr.g/=255,cr.b/=255,this.valpha!==1&&(cr.alpha=this.valpha),cr},round(cr){return cr=Math.max(cr||0,0),new Color([...this.color.map(roundToPlace(cr)),this.valpha],this.model)},alpha(cr){return cr!==void 0?new Color([...this.color,Math.max(0,Math.min(1,cr))],this.model):this.valpha},red:getset("rgb",0,maxfn(255)),green:getset("rgb",1,maxfn(255)),blue:getset("rgb",2,maxfn(255)),hue:getset(["hsl","hsv","hsl","hwb","hcg"],0,cr=>(cr%360+360)%360),saturationl:getset("hsl",1,maxfn(100)),lightness:getset("hsl",2,maxfn(100)),saturationv:getset("hsv",1,maxfn(100)),value:getset("hsv",2,maxfn(100)),chroma:getset("hcg",1,maxfn(100)),gray:getset("hcg",2,maxfn(100)),white:getset("hwb",1,maxfn(100)),wblack:getset("hwb",2,maxfn(100)),cyan:getset("cmyk",0,maxfn(100)),magenta:getset("cmyk",1,maxfn(100)),yellow:getset("cmyk",2,maxfn(100)),black:getset("cmyk",3,maxfn(100)),x:getset("xyz",0,maxfn(95.047)),y:getset("xyz",1,maxfn(100)),z:getset("xyz",2,maxfn(108.833)),l:getset("lab",0,maxfn(100)),a:getset("lab",1),b:getset("lab",2),keyword(cr){return cr!==void 0?new Color(cr):convert$1[this.model].keyword(this.color)},hex(cr){return cr!==void 0?new Color(cr):colorString.to.hex(this.rgb().round().color)},hexa(cr){if(cr!==void 0)return new Color(cr);const ar=this.rgb().round().color;let dr=Math.round(this.valpha*255).toString(16).toUpperCase();return dr.length===1&&(dr="0"+dr),colorString.to.hex(ar)+dr},rgbNumber(){const cr=this.rgb().color;return(cr[0]&255)<<16|(cr[1]&255)<<8|cr[2]&255},luminosity(){const cr=this.rgb().color,ar=[];for(const[dr,fr]of cr.entries()){const hr=fr/255;ar[dr]=hr<=.04045?hr/12.92:((hr+.055)/1.055)**2.4}return .2126*ar[0]+.7152*ar[1]+.0722*ar[2]},contrast(cr){const ar=this.luminosity(),dr=cr.luminosity();return ar>dr?(ar+.05)/(dr+.05):(dr+.05)/(ar+.05)},level(cr){const ar=this.contrast(cr);return ar>=7?"AAA":ar>=4.5?"AA":""},isDark(){const cr=this.rgb().color;return(cr[0]*2126+cr[1]*7152+cr[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const cr=this.rgb();for(let ar=0;ar<3;ar++)cr.color[ar]=255-cr.color[ar];return cr},lighten(cr){const ar=this.hsl();return ar.color[2]+=ar.color[2]*cr,ar},darken(cr){const ar=this.hsl();return ar.color[2]-=ar.color[2]*cr,ar},saturate(cr){const ar=this.hsl();return ar.color[1]+=ar.color[1]*cr,ar},desaturate(cr){const ar=this.hsl();return ar.color[1]-=ar.color[1]*cr,ar},whiten(cr){const ar=this.hwb();return ar.color[1]+=ar.color[1]*cr,ar},blacken(cr){const ar=this.hwb();return ar.color[2]+=ar.color[2]*cr,ar},grayscale(){const cr=this.rgb().color,ar=cr[0]*.3+cr[1]*.59+cr[2]*.11;return Color.rgb(ar,ar,ar)},fade(cr){return this.alpha(this.valpha-this.valpha*cr)},opaquer(cr){return this.alpha(this.valpha+this.valpha*cr)},rotate(cr){const ar=this.hsl();let dr=ar.color[0];return dr=(dr+cr)%360,dr=dr<0?360+dr:dr,ar.color[0]=dr,ar},mix(cr,ar){if(!cr||!cr.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof cr);const dr=cr.rgb(),fr=this.rgb(),hr=ar===void 0?.5:ar,pr=2*hr-1,mr=dr.alpha()-fr.alpha(),gr=((pr*mr===-1?pr:(pr+mr)/(1+pr*mr))+1)/2,yr=1-gr;return Color.rgb(gr*dr.red()+yr*fr.red(),gr*dr.green()+yr*fr.green(),gr*dr.blue()+yr*fr.blue(),dr.alpha()*hr+fr.alpha()*(1-hr))}};for(const cr of Object.keys(convert$1)){if(skippedModels.includes(cr))continue;const{channels:ar}=convert$1[cr];Color.prototype[cr]=function(...dr){return this.model===cr?new Color(this):dr.length>0?new Color(dr,cr):new Color([...assertArray(convert$1[this.model][cr].raw(this.color)),this.valpha],cr)},Color[cr]=function(...dr){let fr=dr[0];return typeof fr=="number"&&(fr=zeroArray(dr,ar)),new Color(fr,cr)}}function roundTo(cr,ar){return Number(cr.toFixed(ar))}function roundToPlace(cr){return function(ar){return roundTo(ar,cr)}}function getset(cr,ar,dr){cr=Array.isArray(cr)?cr:[cr];for(const fr of cr)(limiters[fr]||(limiters[fr]=[]))[ar]=dr;return cr=cr[0],function(fr){let hr;return fr!==void 0?(dr&&(fr=dr(fr)),hr=this[cr](),hr.color[ar]=fr,hr):(hr=this[cr]().color[ar],dr&&(hr=dr(hr)),hr)}}function maxfn(cr){return function(ar){return Math.max(0,Math.min(cr,ar))}}function assertArray(cr){return Array.isArray(cr)?cr:[cr]}function zeroArray(cr,ar){for(let dr=0;dr<ar;dr++)typeof cr[dr]!="number"&&(cr[dr]=0);return cr}var color=Color;const Color$1=getDefaultExportFromCjs(color),FEEDBACK_URL="https://forms.gle/e5n4oazKY4gwsfpU8",LATTICE_URL="https://lattice.xyz",MUD_URL="https://mud.dev",TWITTER_URL="https://twitter.com/skystrifeHQ",DISCORD_URL="https://lattice.xyz/discord",HOW_TO_PLAY_URL="https://latticexyz.notion.site/How-to-play-Sky-Strife-8c9f951c605e487cad9e8158bc641835";function Mana({amount:cr,className:ar,style:dr}){return jsxRuntimeExports.jsxs(Body,{className:twMerge("flex flex-row items-center text-ss-text-highlight",ar),style:dr,children:[EMOJI," ",formatEther(cr)]})}const MAX_NAME_DISPLAY=20,DisplayNameUnformatted=({entity:cr})=>{const{components:{Name:ar}}=useAmalgema(),dr=H$4(ar,cr),fr=dr?dr.value.substring(0,MAX_NAME_DISPLAY):formatAddress(X$5(cr));return jsxRuntimeExports.jsx("span",{children:fr})},DisplayName=({entity:cr})=>jsxRuntimeExports.jsx("span",{className:"text-ss-text-link",children:jsxRuntimeExports.jsx(DisplayNameUnformatted,{entity:cr})}),DisplayNameWithLink=({entity:cr})=>{const{network:{publicClient:ar}}=useAmalgema(),dr=ar.chain.blockExplorers?.default.url;return jsxRuntimeExports.jsx("span",{children:dr?jsxRuntimeExports.jsx(Link,{href:`${dr}/address/${X$5(cr)}`,children:jsxRuntimeExports.jsx(DisplayName,{entity:cr})}):jsxRuntimeExports.jsx(DisplayName,{entity:cr})})},CreatedBy=({createdBy:cr})=>jsxRuntimeExports.jsxs(Caption,{children:["created by ",jsxRuntimeExports.jsx(DisplayNameWithLink,{entity:cr})]}),suffix=function(){const cr=["th","st","nd","rd"];return function(ar){const dr=(ar|0)%100;return dr>3&&dr<21?"th":cr[dr%10]||"th"}}(),PlayerName$1=({entity:cr})=>{const{networkLayer:{components:{OwnedBy:ar}},localLayer:{api:{getPlayerInfo:dr}}}=useMUD(),fr=dr(cr),hr=g$7(ar,cr);return jsxRuntimeExports.jsx("div",{style:{backgroundColor:fr?Color$1(fr.playerColor.color).lighten(.5).hex():"",border:`1px solid ${fr?Color$1(fr.playerColor.color).hex():""}`},className:"rounded-lg px-3 py-1 font-medium text-ss-default h-8 flex flex-col justify-center w-[240px]",children:hr?jsxRuntimeExports.jsx(DisplayNameUnformatted,{entity:hr.value}):null})},GameOutcome=({matchEntity:cr})=>{const{networkLayer:{components:{MatchFinished:ar,MatchRanking:dr}},localLayer:{api:{getPlayerInfo:fr}}}=useMUD(),[hr,pr]=reactExports.useState(!1),mr=useMatchRewards(cr).totalRewards,gr=H$4(ar,cr),yr=H$4(dr,cr);if(!yr)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const xr=yr.value[0],wr=new URLSearchParams(window.location.search);wr.delete("match");const br=lodashExports.uniq(yr.value),Sr=fr(encodeMatchEntity(cr,xr));return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!hr&&gr&&gr.value&&jsxRuntimeExports.jsx(ClickWrapper,{className:"fixed w-screen h-screen top-0 left-0 flex flex-col items-center justify-center bg-[#181710]/60",children:jsxRuntimeExports.jsxs("div",{className:"-mt-[240px]",children:[jsxRuntimeExports.jsxs("div",{className:"relative h-[310px] overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute top-[215px] w-full text-center text-white text-5xl",children:[Sr?Sr.name:""," wins!"]}),jsxRuntimeExports.jsx("img",{className:"",src:"/assets/victory-banner.png"})]}),jsxRuntimeExports.jsxs(Card,{style:{zIndex:120},className:"w-[640px] p-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-[56px]",children:[jsxRuntimeExports.jsx(OverlineSmall,{className:"mb-3 text-ss-text-x-light",children:"Rank"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:br.map((vr,Er)=>jsxRuntimeExports.jsxs(Body,{className:"h-8 text-ss-text-default",children:[Er+1,suffix(Er+1)]},`rank-${Er}`))})]}),jsxRuntimeExports.jsxs("div",{className:"grow",children:[jsxRuntimeExports.jsx(OverlineSmall,{className:"mb-3 text-ss-text-x-light",children:"Player"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:br.map((vr,Er)=>jsxRuntimeExports.jsx(PlayerName$1,{entity:encodeMatchEntity(cr,vr)},`name-${Er}`))})]}),jsxRuntimeExports.jsxs("div",{className:"w-[80px]",children:[jsxRuntimeExports.jsx(OverlineSmall,{className:"mb-3 text-ss-text-x-light",children:"Reward"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:br.map((vr,Er)=>jsxRuntimeExports.jsx(Mana,{className:"h-8",amount:mr[Er]?.value??0},`reward-${Er}`))})]})]}),jsxRuntimeExports.jsx("div",{className:"h-8"}),jsxRuntimeExports.jsx("a",{href:FEEDBACK_URL,className:"w-full",rel:"noreferrer",target:"_blank",children:jsxRuntimeExports.jsx(Button$1,{className:"w-full",buttonType:"secondary",children:"Submit Feedback"})}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("a",{className:"grow",href:`/?${wr.toString()}`,children:jsxRuntimeExports.jsx(Button$1,{className:"w-full",buttonType:"tertiary",children:"Back to Menu"})}),jsxRuntimeExports.jsx("div",{className:"w-3"}),jsxRuntimeExports.jsx(Button$1,{className:"grow",onClick:()=>pr(!0),buttonType:"tertiary",children:"View Island"})]})]})]})}),hr&&gr&&gr.value&&jsxRuntimeExports.jsxs("div",{className:"fixed w-screen h-screen flex flex-col -ml-8 -mt-8",children:[jsxRuntimeExports.jsx("div",{className:"h-3/4"}),jsxRuntimeExports.jsxs(ClickWrapper,{className:"mx-auto flex flex-row",children:[jsxRuntimeExports.jsx("a",{href:`/?${wr.toString()}`,children:jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",className:"text-3xl px-8 py-6",children:"Back to Menu"})}),jsxRuntimeExports.jsx("div",{className:"w-16"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",className:"text-3xl px-8 py-6",onClick:()=>pr(!1),children:"View Results"})]})]})]})},useMatchInfo=cr=>{const{components:{MatchConfig:ar,MatchFinished:dr,MatchName:fr}}=useAmalgema(),hr=H$4(ar,cr),pr=H$4(dr,cr),mr=H$4(fr,cr)?.value??hexToString(hr?.levelId??"0x00");return{matchEntity:cr,matchConfig:hr,matchFinished:pr?.value,matchName:mr}};function PlayerCard(cr){const{networkLayer:{components:{UnitType:ar,Position:dr,OwnedBy:fr}},headlessLayer:{components:{InCurrentMatch:hr}}}=useMUD(),{playerColor:pr,name:mr}=cr.playerData,gr=usePlayerGold(cr.playerData),yr=te$5([Ye$3(hr),Ye$3(ar),Ye$3(dr),Je$2(fr,{value:decodeMatchEntity(cr.playerData.player).entity})]);return jsxRuntimeExports.jsxs("li",{className:"flex w-full flex-row gap-2.5",children:[jsxRuntimeExports.jsxs("div",{className:"flex w-[120px] grow-0 flex-row items-center",children:[jsxRuntimeExports.jsx("div",{style:{backgroundColor:Color$1(pr.color).toString(),width:"16px",minWidth:"16px",height:"16px",borderRadius:"2px"}}),jsxRuntimeExports.jsx("div",{className:"ml-[8px] overflow-hidden text-ellipsis whitespace-nowrap",children:mr})]}),jsxRuntimeExports.jsx("div",{style:{color:"#D4AF37"},className:"grow basis-1",children:yr.length}),jsxRuntimeExports.jsxs("div",{style:{color:"#D4AF37"},className:"grow basis-1",children:[gr.regen,"g"]})]})}function useMatchStarted(cr){const{localLayer:{components:{MatchStarted:ar}}}=useMUD();return H$4(ar,cr)?.value}const Leaderboard=({matchEntity:cr})=>{const ar=useAllPlayerDetails(cr),dr=useMatchStarted(cr),{matchFinished:fr}=useMatchInfo(cr);return!dr||fr?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx("div",{className:"absolute flex h-fit w-[340px] flex-col items-center",children:jsxRuntimeExports.jsx(Card,{primary:!0,className:"p-2 border-[#181710]",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("ul",{style:{width:"100%",padding:"8px"},children:[jsxRuntimeExports.jsxs("li",{className:"flex flex-row gap-2.5 text-xs uppercase tracking-wider text-ss-text-x-light mb-2",children:[jsxRuntimeExports.jsx("div",{className:"w-[120px] grow-0",children:"player"}),jsxRuntimeExports.jsx("div",{className:"grow basis-1",children:"army size"}),jsxRuntimeExports.jsx("div",{className:"grow basis-1",children:"gold/turn"})]}),ar.length===0&&jsxRuntimeExports.jsxs("li",{className:"flex flex-row gap-2.5 text-xs",children:[jsxRuntimeExports.jsx("div",{className:"w-[120px] grow-0",children:"n/a"}),jsxRuntimeExports.jsx("div",{className:"grow basis-1",children:"-"}),jsxRuntimeExports.jsx("div",{className:"grow basis-1",children:"-"})]}),ar.map(hr=>hr?jsxRuntimeExports.jsx(PlayerCard,{playerData:hr},`${hr.player}`):jsxRuntimeExports.jsx("li",{}))]})})})})},EnergySurge=()=>{const{networkLayer:{network:{clock:{time$:cr}},api:{getCurrentMatchConfig:ar}}}=useMUD(),dr=se$5(cr,0),fr=ar();if(!fr)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const hr=BigInt(fr.startTime),pr=BigInt(fr.turnLength),gr=BigInt(dr)/1000n-hr,yr=pr-gr%pr,xr=pr-yr,wr=Number(xr)/Number(pr-1n);return jsxRuntimeExports.jsx("div",{style:{backgroundColor:"#F4F3F1"},className:"rounded h-[48px] w-[320px] mt-2 bg-ss-bg-0 rounded border border-[#181710] overflow-hidden shadow-ss-default",children:jsxRuntimeExports.jsx("div",{className:"inset-0  bg-[#E0C56C] h-full",style:{transition:"width 1s linear",width:`calc(100% * ${wr})`}})})},GoldAmount=({matchEntity:cr})=>{useMUD();const ar=useCurrentPlayer(cr),{amount:dr,regen:fr}=usePlayerGold(ar);return jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-center text-[#CEA82C]",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row text-3xl w-full items-center",children:[jsxRuntimeExports.jsx(SpriteImage,{spriteKey:Sprites.Gold}),jsxRuntimeExports.jsx("div",{className:"w-2"}),jsxRuntimeExports.jsxs("div",{className:"text-ss-text-gold text-2xl",children:[dr,"g"]})]}),jsxRuntimeExports.jsxs("div",{className:"w-full text-right text-ss-text-light",children:["+",fr,"g/turn"]})]})};function useExternalAccount(){const{externalWalletClient:cr}=useAmalgema();if(cr&&cr.account){const{address:ar}=cr.account;return{address:ar}}return{address:void 0}}const useExternalInMatch=cr=>{const{networkLayer:{components:{Match:ar,OwnedBy:dr,Player:fr}}}=useMUD(),{address:hr}=useExternalAccount();return te$5([Ye$3(fr),Je$2(ar,{matchEntity:cr}),Je$2(dr,{value:hr?addressToEntityID(hr):""})]).length>0};function TurnInfo({matchEntity:cr}){const ar=useExternalInMatch(cr),dr=useMatchStarted(cr),{matchFinished:fr}=useMatchInfo(cr);return!dr||fr?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2",children:[ar?jsxRuntimeExports.jsx(Card,{className:"w-full border-[#181710]",children:jsxRuntimeExports.jsx(GoldAmount,{matchEntity:cr})}):null,jsxRuntimeExports.jsx("div",{className:"h-1"}),jsxRuntimeExports.jsx("div",{className:"h-fit w-full flex flex-col items-baseline",children:jsxRuntimeExports.jsx(EnergySurge,{})})]})}function SendTxButton({size:cr,buttonType:ar,sendTx:dr,disabled:fr,className:hr,children:pr,network:mr}){const{waitForTransaction:gr}=mr,[yr,xr]=React.useState(!1),wr=async()=>{if(!yr){xr(!0);try{const br=await dr();await gr(br)}catch(br){console.error(br)}finally{xr(!1)}}};return jsxRuntimeExports.jsx(Button$1,{disabled:fr||yr,buttonType:ar,size:cr,className:hr,onClick:wr,children:yr?"Pending...":pr})}function getMatchUrl(cr){const ar=new URLSearchParams(window.location.search);return ar.append("match",cr),`/match?${ar.toString()}`}const ETHER_TO_WEI=1000000000000000000n;function RequiredAsterisk(){return jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})}function ChevronDown(){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"})})}function PercentageInput({amount:cr,className:ar,setAmount:dr}){return jsxRuntimeExports.jsxs("div",{className:"relative w-full",children:[jsxRuntimeExports.jsx("input",{className:twMerge("w-full bg-ss-bg-2 px-4 py-2 border border-[#DDDAD0]",ar),type:"text",value:Number(cr),readOnly:!dr,disabled:!dr,onChange:fr=>{if(!dr)return;const hr=parseInt(fr.target.value);hr>=0?dr(BigInt(hr)):dr(0n)}}),jsxRuntimeExports.jsx("span",{className:"absolute right-3 top-[8px]",children:"%"})]})}function OrbInput({amount:cr,setAmount:ar,className:dr,containerClassName:fr}){return jsxRuntimeExports.jsxs("div",{className:twMerge("relative w-full",fr),children:[jsxRuntimeExports.jsx("input",{className:twMerge("w-full bg-ss-bg-2 px-4 py-2 border border-[#DDDAD0]",dr),type:"text",value:formatEther(BigInt(cr)),readOnly:!ar,disabled:!ar,onChange:hr=>{if(!ar)return;const pr=parseInt(hr.target.value);pr>=0?ar(BigInt(pr)*ETHER_TO_WEI):ar(0n)}}),jsxRuntimeExports.jsx("span",{className:"absolute right-3 top-[8px]",children:""})]})}function ReadOnlyTextInput({value:cr,className:ar,label:dr,symbol:fr}){return jsxRuntimeExports.jsxs("div",{className:"relative w-full",children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"14px"},className:"absolute left-3 top-[11px] text-ss-text-x-light uppercase",children:dr}),jsxRuntimeExports.jsx("input",{className:twMerge("w-full bg-ss-bg-2 px-4 py-2 border border-[#DDDAD0]",ar),type:"text",readOnly:!0,value:cr}),jsxRuntimeExports.jsx("span",{className:"absolute right-3 top-[8px]",children:fr})]})}function LabeledOrbInput({amount:cr,className:ar,label:dr}){return jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-baseline w-full h-[36px] bg-ss-bg-2 px-4 py-1 border border-[#DDDAD0] align-middle",children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"14px"},className:" w-full left-3 text-ss-text-x-light uppercase",children:dr}),jsxRuntimeExports.jsx("input",{className:twMerge(" w-[100px] align-middle	shrink text-right pr-3 bg-ss-bg-2",ar),type:"text",readOnly:!0,value:formatEther(BigInt(cr))}),jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default right-3",children:""})]})}function EthInput({amount:cr,className:ar,label:dr}){return jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-baseline w-full h-[36px] bg-ss-bg-2 px-4 py-1 border border-[#DDDAD0] align-middle",children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"12px"},className:" w-full left-3 text-ss-text-x-light uppercase",children:dr}),jsxRuntimeExports.jsx("input",{className:twMerge(" w-[100px] align-middle	shrink text-right pr-3 bg-ss-bg-2",ar),type:"text",readOnly:!0,value:parseFloat(formatEther(cr)).toFixed(3)}),jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default right-3",children:"ETH"})]})}const LOW_BALANCE_THRESHOLD=parseEther("0.0005"),DANGER_BALANCE_THRESHOLD=parseEther("0.000002");function useBurnerBalance(){const{network:{walletClient:cr}}=useAmalgema(),{data:ar}=useBalance({address:cr.account.address,watch:!0,staleTime:1e3}),dr=ar?.value??0n;return{...ar,belowMinimum:dr<LOW_BALANCE_THRESHOLD,belowDanger:dr<DANGER_BALANCE_THRESHOLD}}const CrossIcon=()=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:jsxRuntimeExports.jsx("path",{d:"M6 18L18 6M6 6L18 18",stroke:"#25241D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(cr){for(var ar=1;ar<arguments.length;ar++){var dr=arguments[ar];for(var fr in dr)Object.prototype.hasOwnProperty.call(dr,fr)&&(cr[fr]=dr[fr])}return cr},_extends$1.apply(this,arguments)}function $e42e1063c40fb3ef$export$b9ecd428b558ff10(cr,ar,{checkForDefaultPrevented:dr=!0}={}){return function(hr){if(cr?.(hr),dr===!1||!hr.defaultPrevented)return ar?.(hr)}}function $6ed0406888f73fc4$var$setRef(cr,ar){typeof cr=="function"?cr(ar):cr!=null&&(cr.current=ar)}function $6ed0406888f73fc4$export$43e446d32b3d21af(...cr){return ar=>cr.forEach(dr=>$6ed0406888f73fc4$var$setRef(dr,ar))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(...cr){return reactExports.useCallback($6ed0406888f73fc4$export$43e446d32b3d21af(...cr),cr)}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(cr,ar=[]){let dr=[];function fr(pr,mr){const gr=reactExports.createContext(mr),yr=dr.length;dr=[...dr,mr];function xr(br){const{scope:Sr,children:vr,...Er}=br,Ar=Sr?.[cr][yr]||gr,_r=reactExports.useMemo(()=>Er,Object.values(Er));return reactExports.createElement(Ar.Provider,{value:_r},vr)}function wr(br,Sr){const vr=Sr?.[cr][yr]||gr,Er=reactExports.useContext(vr);if(Er)return Er;if(mr!==void 0)return mr;throw new Error(`\`${br}\` must be used within \`${pr}\``)}return xr.displayName=pr+"Provider",[xr,wr]}const hr=()=>{const pr=dr.map(mr=>reactExports.createContext(mr));return function(gr){const yr=gr?.[cr]||pr;return reactExports.useMemo(()=>({[`__scope${cr}`]:{...gr,[cr]:yr}}),[gr,yr])}};return hr.scopeName=cr,[fr,$c512c27ab02ef895$var$composeContextScopes(hr,...ar)]}function $c512c27ab02ef895$var$composeContextScopes(...cr){const ar=cr[0];if(cr.length===1)return ar;const dr=()=>{const fr=cr.map(hr=>({useScope:hr(),scopeName:hr.scopeName}));return function(pr){const mr=fr.reduce((gr,{useScope:yr,scopeName:xr})=>{const br=yr(pr)[`__scope${xr}`];return{...gr,...br}},{});return reactExports.useMemo(()=>({[`__scope${ar.scopeName}`]:mr}),[mr])}};return dr.scopeName=ar.scopeName,dr}const $9f79659886946c16$export$e5c5a5f917a5871c=globalThis?.document?reactExports.useLayoutEffect:()=>{},$1746a345f3d73bb7$var$useReactId=$2AODx$react["useId".toString()]||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(cr){const[ar,dr]=reactExports.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{cr||dr(fr=>fr??String($1746a345f3d73bb7$var$count++))},[cr]),cr||(ar?`radix-${ar}`:"")}function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(cr){const ar=reactExports.useRef(cr);return reactExports.useEffect(()=>{ar.current=cr}),reactExports.useMemo(()=>(...dr)=>{var fr;return(fr=ar.current)===null||fr===void 0?void 0:fr.call(ar,...dr)},[])}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop:cr,defaultProp:ar,onChange:dr=()=>{}}){const[fr,hr]=$71cd76cc60e0454e$var$useUncontrolledState({defaultProp:ar,onChange:dr}),pr=cr!==void 0,mr=pr?cr:fr,gr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(dr),yr=reactExports.useCallback(xr=>{if(pr){const br=typeof xr=="function"?xr(cr):xr;br!==cr&&gr(br)}else hr(xr)},[pr,cr,hr,gr]);return[mr,yr]}function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp:cr,onChange:ar}){const dr=reactExports.useState(cr),[fr]=dr,hr=reactExports.useRef(fr),pr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(ar);return reactExports.useEffect(()=>{hr.current!==fr&&(pr(fr),hr.current=fr)},[fr,hr,pr]),dr}const $5e63c961fc1ce211$export$8c6ed5c666ac1360=reactExports.forwardRef((cr,ar)=>{const{children:dr,...fr}=cr,hr=reactExports.Children.toArray(dr),pr=hr.find($5e63c961fc1ce211$var$isSlottable);if(pr){const mr=pr.props.children,gr=hr.map(yr=>yr===pr?reactExports.Children.count(mr)>1?reactExports.Children.only(null):reactExports.isValidElement(mr)?mr.props.children:null:yr);return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},fr,{ref:ar}),reactExports.isValidElement(mr)?reactExports.cloneElement(mr,void 0,gr):null)}return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},fr,{ref:ar}),dr)});$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=reactExports.forwardRef((cr,ar)=>{const{children:dr,...fr}=cr;return reactExports.isValidElement(dr)?reactExports.cloneElement(dr,{...$5e63c961fc1ce211$var$mergeProps(fr,dr.props),ref:ar?$6ed0406888f73fc4$export$43e446d32b3d21af(ar,dr.ref):dr.ref}):reactExports.Children.count(dr)>1?reactExports.Children.only(null):null});$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:cr})=>reactExports.createElement(reactExports.Fragment,null,cr);function $5e63c961fc1ce211$var$isSlottable(cr){return reactExports.isValidElement(cr)&&cr.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(cr,ar){const dr={...ar};for(const fr in ar){const hr=cr[fr],pr=ar[fr];/^on[A-Z]/.test(fr)?hr&&pr?dr[fr]=(...gr)=>{pr(...gr),hr(...gr)}:hr&&(dr[fr]=hr):fr==="style"?dr[fr]={...hr,...pr}:fr==="className"&&(dr[fr]=[hr,pr].filter(Boolean).join(" "))}return{...cr,...dr}}const $8927f6f2acc4f386$var$NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$8927f6f2acc4f386$export$250ffa63cdc0d034=$8927f6f2acc4f386$var$NODES.reduce((cr,ar)=>{const dr=reactExports.forwardRef((fr,hr)=>{const{asChild:pr,...mr}=fr,gr=pr?$5e63c961fc1ce211$export$8c6ed5c666ac1360:ar;return reactExports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),reactExports.createElement(gr,_extends$1({},mr,{ref:hr}))});return dr.displayName=`Primitive.${ar}`,{...cr,[ar]:dr}},{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(cr,ar){cr&&reactDomExports.flushSync(()=>cr.dispatchEvent(ar))}function $addc16e1bbe58fd0$export$3a72a57244d6e765(cr,ar=globalThis?.document){const dr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(cr);reactExports.useEffect(()=>{const fr=hr=>{hr.key==="Escape"&&dr(hr)};return ar.addEventListener("keydown",fr),()=>ar.removeEventListener("keydown",fr)},[dr,ar])}const $5cb92bef7577960e$var$CONTEXT_UPDATE="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=reactExports.forwardRef((cr,ar)=>{var dr;const{disableOutsidePointerEvents:fr=!1,onEscapeKeyDown:hr,onPointerDownOutside:pr,onFocusOutside:mr,onInteractOutside:gr,onDismiss:yr,...xr}=cr,wr=reactExports.useContext($5cb92bef7577960e$var$DismissableLayerContext),[br,Sr]=reactExports.useState(null),vr=(dr=br?.ownerDocument)!==null&&dr!==void 0?dr:globalThis?.document,[,Er]=reactExports.useState({}),Ar=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ar,Br=>Sr(Br)),_r=Array.from(wr.layers),[Cr]=[...wr.layersWithOutsidePointerEventsDisabled].slice(-1),kr=_r.indexOf(Cr),Rr=br?_r.indexOf(br):-1,Ir=wr.layersWithOutsidePointerEventsDisabled.size>0,Nr=Rr>=kr,Pr=$5cb92bef7577960e$var$usePointerDownOutside(Br=>{const Fr=Br.target,jr=[...wr.branches].some(Ur=>Ur.contains(Fr));!Nr||jr||(pr?.(Br),gr?.(Br),Br.defaultPrevented||yr?.())},vr),Tr=$5cb92bef7577960e$var$useFocusOutside(Br=>{const Fr=Br.target;[...wr.branches].some(Ur=>Ur.contains(Fr))||(mr?.(Br),gr?.(Br),Br.defaultPrevented||yr?.())},vr);return $addc16e1bbe58fd0$export$3a72a57244d6e765(Br=>{Rr===wr.layers.size-1&&(hr?.(Br),!Br.defaultPrevented&&yr&&(Br.preventDefault(),yr()))},vr),reactExports.useEffect(()=>{if(br)return fr&&(wr.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents=vr.body.style.pointerEvents,vr.body.style.pointerEvents="none"),wr.layersWithOutsidePointerEventsDisabled.add(br)),wr.layers.add(br),$5cb92bef7577960e$var$dispatchUpdate(),()=>{fr&&wr.layersWithOutsidePointerEventsDisabled.size===1&&(vr.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}},[br,vr,fr,wr]),reactExports.useEffect(()=>()=>{br&&(wr.layers.delete(br),wr.layersWithOutsidePointerEventsDisabled.delete(br),$5cb92bef7577960e$var$dispatchUpdate())},[br,wr]),reactExports.useEffect(()=>{const Br=()=>Er({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,Br),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,Br)},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},xr,{ref:Ar,style:{pointerEvents:Ir?Nr?"auto":"none":void 0,...cr.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onFocusCapture,Tr.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onBlurCapture,Tr.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onPointerDownCapture,Pr.onPointerDownCapture)}))});function $5cb92bef7577960e$var$usePointerDownOutside(cr,ar=globalThis?.document){const dr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(cr),fr=reactExports.useRef(!1),hr=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const pr=gr=>{if(gr.target&&!fr.current){let xr=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE,dr,yr,{discrete:!0})};const yr={originalEvent:gr};gr.pointerType==="touch"?(ar.removeEventListener("click",hr.current),hr.current=xr,ar.addEventListener("click",hr.current,{once:!0})):xr()}else ar.removeEventListener("click",hr.current);fr.current=!1},mr=window.setTimeout(()=>{ar.addEventListener("pointerdown",pr)},0);return()=>{window.clearTimeout(mr),ar.removeEventListener("pointerdown",pr),ar.removeEventListener("click",hr.current)}},[ar,dr]),{onPointerDownCapture:()=>fr.current=!0}}function $5cb92bef7577960e$var$useFocusOutside(cr,ar=globalThis?.document){const dr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(cr),fr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const hr=pr=>{pr.target&&!fr.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$FOCUS_OUTSIDE,dr,{originalEvent:pr},{discrete:!1})};return ar.addEventListener("focusin",hr),()=>ar.removeEventListener("focusin",hr)},[ar,dr]),{onFocusCapture:()=>fr.current=!0,onBlurCapture:()=>fr.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate(){const cr=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE);document.dispatchEvent(cr)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(cr,ar,dr,{discrete:fr}){const hr=dr.originalEvent.target,pr=new CustomEvent(cr,{bubbles:!1,cancelable:!0,detail:dr});ar&&hr.addEventListener(cr,ar,{once:!0}),fr?$8927f6f2acc4f386$export$6d1a0317bde7de7f(hr,pr):hr.dispatchEvent(pr)}const $d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",$d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",$d3863c46a17e8a28$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d3863c46a17e8a28$export$20e40289641fbbb6=reactExports.forwardRef((cr,ar)=>{const{loop:dr=!1,trapped:fr=!1,onMountAutoFocus:hr,onUnmountAutoFocus:pr,...mr}=cr,[gr,yr]=reactExports.useState(null),xr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(hr),wr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(pr),br=reactExports.useRef(null),Sr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ar,Ar=>yr(Ar)),vr=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(fr){let Ar=function(Rr){if(vr.paused||!gr)return;const Ir=Rr.target;gr.contains(Ir)?br.current=Ir:$d3863c46a17e8a28$var$focus(br.current,{select:!0})},_r=function(Rr){if(vr.paused||!gr)return;const Ir=Rr.relatedTarget;Ir!==null&&(gr.contains(Ir)||$d3863c46a17e8a28$var$focus(br.current,{select:!0}))},Cr=function(Rr){if(document.activeElement===document.body)for(const Nr of Rr)Nr.removedNodes.length>0&&$d3863c46a17e8a28$var$focus(gr)};document.addEventListener("focusin",Ar),document.addEventListener("focusout",_r);const kr=new MutationObserver(Cr);return gr&&kr.observe(gr,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",Ar),document.removeEventListener("focusout",_r),kr.disconnect()}}},[fr,gr,vr.paused]),reactExports.useEffect(()=>{if(gr){$d3863c46a17e8a28$var$focusScopesStack.add(vr);const Ar=document.activeElement;if(!gr.contains(Ar)){const Cr=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);gr.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,xr),gr.dispatchEvent(Cr),Cr.defaultPrevented||($d3863c46a17e8a28$var$focusFirst($d3863c46a17e8a28$var$removeLinks($d3863c46a17e8a28$var$getTabbableCandidates(gr)),{select:!0}),document.activeElement===Ar&&$d3863c46a17e8a28$var$focus(gr))}return()=>{gr.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT,xr),setTimeout(()=>{const Cr=new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,$d3863c46a17e8a28$var$EVENT_OPTIONS);gr.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,wr),gr.dispatchEvent(Cr),Cr.defaultPrevented||$d3863c46a17e8a28$var$focus(Ar??document.body,{select:!0}),gr.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT,wr),$d3863c46a17e8a28$var$focusScopesStack.remove(vr)},0)}}},[gr,xr,wr,vr]);const Er=reactExports.useCallback(Ar=>{if(!dr&&!fr||vr.paused)return;const _r=Ar.key==="Tab"&&!Ar.altKey&&!Ar.ctrlKey&&!Ar.metaKey,Cr=document.activeElement;if(_r&&Cr){const kr=Ar.currentTarget,[Rr,Ir]=$d3863c46a17e8a28$var$getTabbableEdges(kr);Rr&&Ir?!Ar.shiftKey&&Cr===Ir?(Ar.preventDefault(),dr&&$d3863c46a17e8a28$var$focus(Rr,{select:!0})):Ar.shiftKey&&Cr===Rr&&(Ar.preventDefault(),dr&&$d3863c46a17e8a28$var$focus(Ir,{select:!0})):Cr===kr&&Ar.preventDefault()}},[dr,fr,vr.paused]);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({tabIndex:-1},mr,{ref:Sr,onKeyDown:Er}))});function $d3863c46a17e8a28$var$focusFirst(cr,{select:ar=!1}={}){const dr=document.activeElement;for(const fr of cr)if($d3863c46a17e8a28$var$focus(fr,{select:ar}),document.activeElement!==dr)return}function $d3863c46a17e8a28$var$getTabbableEdges(cr){const ar=$d3863c46a17e8a28$var$getTabbableCandidates(cr),dr=$d3863c46a17e8a28$var$findVisible(ar,cr),fr=$d3863c46a17e8a28$var$findVisible(ar.reverse(),cr);return[dr,fr]}function $d3863c46a17e8a28$var$getTabbableCandidates(cr){const ar=[],dr=document.createTreeWalker(cr,NodeFilter.SHOW_ELEMENT,{acceptNode:fr=>{const hr=fr.tagName==="INPUT"&&fr.type==="hidden";return fr.disabled||fr.hidden||hr?NodeFilter.FILTER_SKIP:fr.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;dr.nextNode();)ar.push(dr.currentNode);return ar}function $d3863c46a17e8a28$var$findVisible(cr,ar){for(const dr of cr)if(!$d3863c46a17e8a28$var$isHidden(dr,{upTo:ar}))return dr}function $d3863c46a17e8a28$var$isHidden(cr,{upTo:ar}){if(getComputedStyle(cr).visibility==="hidden")return!0;for(;cr;){if(ar!==void 0&&cr===ar)return!1;if(getComputedStyle(cr).display==="none")return!0;cr=cr.parentElement}return!1}function $d3863c46a17e8a28$var$isSelectableInput(cr){return cr instanceof HTMLInputElement&&"select"in cr}function $d3863c46a17e8a28$var$focus(cr,{select:ar=!1}={}){if(cr&&cr.focus){const dr=document.activeElement;cr.focus({preventScroll:!0}),cr!==dr&&$d3863c46a17e8a28$var$isSelectableInput(cr)&&ar&&cr.select()}}const $d3863c46a17e8a28$var$focusScopesStack=$d3863c46a17e8a28$var$createFocusScopesStack();function $d3863c46a17e8a28$var$createFocusScopesStack(){let cr=[];return{add(ar){const dr=cr[0];ar!==dr&&dr?.pause(),cr=$d3863c46a17e8a28$var$arrayRemove(cr,ar),cr.unshift(ar)},remove(ar){var dr;cr=$d3863c46a17e8a28$var$arrayRemove(cr,ar),(dr=cr[0])===null||dr===void 0||dr.resume()}}}function $d3863c46a17e8a28$var$arrayRemove(cr,ar){const dr=[...cr],fr=dr.indexOf(ar);return fr!==-1&&dr.splice(fr,1),dr}function $d3863c46a17e8a28$var$removeLinks(cr){return cr.filter(ar=>ar.tagName!=="A")}const $f1701beae083dbae$export$602eac185826482c=reactExports.forwardRef((cr,ar)=>{var dr;const{container:fr=globalThis==null||(dr=globalThis.document)===null||dr===void 0?void 0:dr.body,...hr}=cr;return fr?$7SXl2$reactdom.createPortal(reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},hr,{ref:ar})),fr):null});function $fe963b355347cc68$export$3e6543de14f8614f(cr,ar){return reactExports.useReducer((dr,fr)=>{const hr=ar[dr][fr];return hr??dr},cr)}const $921a889cee6df7e8$export$99c2b779aa4e8b8b=cr=>{const{present:ar,children:dr}=cr,fr=$921a889cee6df7e8$var$usePresence(ar),hr=typeof dr=="function"?dr({present:fr.isPresent}):reactExports.Children.only(dr),pr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(fr.ref,hr.ref);return typeof dr=="function"||fr.isPresent?reactExports.cloneElement(hr,{ref:pr}):null};$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";function $921a889cee6df7e8$var$usePresence(cr){const[ar,dr]=reactExports.useState(),fr=reactExports.useRef({}),hr=reactExports.useRef(cr),pr=reactExports.useRef("none"),mr=cr?"mounted":"unmounted",[gr,yr]=$fe963b355347cc68$export$3e6543de14f8614f(mr,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const xr=$921a889cee6df7e8$var$getAnimationName(fr.current);pr.current=gr==="mounted"?xr:"none"},[gr]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const xr=fr.current,wr=hr.current;if(wr!==cr){const Sr=pr.current,vr=$921a889cee6df7e8$var$getAnimationName(xr);cr?yr("MOUNT"):vr==="none"||xr?.display==="none"?yr("UNMOUNT"):yr(wr&&Sr!==vr?"ANIMATION_OUT":"UNMOUNT"),hr.current=cr}},[cr,yr]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(ar){const xr=br=>{const vr=$921a889cee6df7e8$var$getAnimationName(fr.current).includes(br.animationName);br.target===ar&&vr&&reactDomExports.flushSync(()=>yr("ANIMATION_END"))},wr=br=>{br.target===ar&&(pr.current=$921a889cee6df7e8$var$getAnimationName(fr.current))};return ar.addEventListener("animationstart",wr),ar.addEventListener("animationcancel",xr),ar.addEventListener("animationend",xr),()=>{ar.removeEventListener("animationstart",wr),ar.removeEventListener("animationcancel",xr),ar.removeEventListener("animationend",xr)}}else yr("ANIMATION_END")},[ar,yr]),{isPresent:["mounted","unmountSuspended"].includes(gr),ref:reactExports.useCallback(xr=>{xr&&(fr.current=getComputedStyle(xr)),dr(xr)},[])}}function $921a889cee6df7e8$var$getAnimationName(cr){return cr?.animationName||"none"}let $3db38b7d1fb3fe6a$var$count=0;function $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(){reactExports.useEffect(()=>{var cr,ar;const dr=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(cr=dr[0])!==null&&cr!==void 0?cr:$3db38b7d1fb3fe6a$var$createFocusGuard()),document.body.insertAdjacentElement("beforeend",(ar=dr[1])!==null&&ar!==void 0?ar:$3db38b7d1fb3fe6a$var$createFocusGuard()),$3db38b7d1fb3fe6a$var$count++,()=>{$3db38b7d1fb3fe6a$var$count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(fr=>fr.remove()),$3db38b7d1fb3fe6a$var$count--}},[])}function $3db38b7d1fb3fe6a$var$createFocusGuard(){const cr=document.createElement("span");return cr.setAttribute("data-radix-focus-guard",""),cr.tabIndex=0,cr.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",cr}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(cr,ar){var dr=reactExports.useRef(null),fr=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),hr=fr[0],pr=fr[1],mr=cr.forwardProps,gr=cr.children,yr=cr.className,xr=cr.removeScrollBar,wr=cr.enabled,br=cr.shards,Sr=cr.sideCar,vr=cr.noIsolation,Er=cr.inert,Ar=cr.allowPinchZoom,_r=cr.as,Cr=_r===void 0?"div":_r,kr=__rest$3(cr,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),Rr=Sr,Ir=useMergeRefs([dr,ar]),Nr=__assign$2(__assign$2({},kr),hr);return reactExports.createElement(reactExports.Fragment,null,wr&&reactExports.createElement(Rr,{sideCar:effectCar,removeScrollBar:xr,shards:br,noIsolation:vr,inert:Er,setCallbacks:pr,allowPinchZoom:!!Ar,lockRef:dr}),mr?reactExports.cloneElement(reactExports.Children.only(gr),__assign$2(__assign$2({},Nr),{ref:Ir})):reactExports.createElement(Cr,__assign$2({},Nr,{className:yr,ref:Ir}),gr))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(cr){return cr.tagName==="TEXTAREA"},elementCanBeScrolled=function(cr,ar){var dr=window.getComputedStyle(cr);return dr[ar]!=="hidden"&&!(dr.overflowY===dr.overflowX&&!alwaysContainsScroll(cr)&&dr[ar]==="visible")},elementCouldBeVScrolled=function(cr){return elementCanBeScrolled(cr,"overflowY")},elementCouldBeHScrolled=function(cr){return elementCanBeScrolled(cr,"overflowX")},locationCouldBeScrolled=function(cr,ar){var dr=ar;do{typeof ShadowRoot<"u"&&dr instanceof ShadowRoot&&(dr=dr.host);var fr=elementCouldBeScrolled(cr,dr);if(fr){var hr=getScrollVariables(cr,dr),pr=hr[1],mr=hr[2];if(pr>mr)return!0}dr=dr.parentNode}while(dr&&dr!==document.body);return!1},getVScrollVariables=function(cr){var ar=cr.scrollTop,dr=cr.scrollHeight,fr=cr.clientHeight;return[ar,dr,fr]},getHScrollVariables=function(cr){var ar=cr.scrollLeft,dr=cr.scrollWidth,fr=cr.clientWidth;return[ar,dr,fr]},elementCouldBeScrolled=function(cr,ar){return cr==="v"?elementCouldBeVScrolled(ar):elementCouldBeHScrolled(ar)},getScrollVariables=function(cr,ar){return cr==="v"?getVScrollVariables(ar):getHScrollVariables(ar)},getDirectionFactor=function(cr,ar){return cr==="h"&&ar==="rtl"?-1:1},handleScroll=function(cr,ar,dr,fr,hr){var pr=getDirectionFactor(cr,window.getComputedStyle(ar).direction),mr=pr*fr,gr=dr.target,yr=ar.contains(gr),xr=!1,wr=mr>0,br=0,Sr=0;do{var vr=getScrollVariables(cr,gr),Er=vr[0],Ar=vr[1],_r=vr[2],Cr=Ar-_r-pr*Er;(Er||Cr)&&elementCouldBeScrolled(cr,gr)&&(br+=Cr,Sr+=Er),gr=gr.parentNode}while(!yr&&gr!==document.body||yr&&(ar.contains(gr)||ar===gr));return(wr&&(hr&&br===0||!hr&&mr>br)||!wr&&(hr&&Sr===0||!hr&&-mr>Sr))&&(xr=!0),xr},getTouchXY=function(cr){return"changedTouches"in cr?[cr.changedTouches[0].clientX,cr.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(cr){return[cr.deltaX,cr.deltaY]},extractRef=function(cr){return cr&&"current"in cr?cr.current:cr},deltaCompare=function(cr,ar){return cr[0]===ar[0]&&cr[1]===ar[1]},generateStyle=function(cr){return`
  .block-interactivity-`.concat(cr,` {pointer-events: none;}
  .allow-interactivity-`).concat(cr,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(cr){var ar=reactExports.useRef([]),dr=reactExports.useRef([0,0]),fr=reactExports.useRef(),hr=reactExports.useState(idCounter++)[0],pr=reactExports.useState(function(){return styleSingleton()})[0],mr=reactExports.useRef(cr);reactExports.useEffect(function(){mr.current=cr},[cr]),reactExports.useEffect(function(){if(cr.inert){document.body.classList.add("block-interactivity-".concat(hr));var Ar=__spreadArray$4([cr.lockRef.current],(cr.shards||[]).map(extractRef),!0).filter(Boolean);return Ar.forEach(function(_r){return _r.classList.add("allow-interactivity-".concat(hr))}),function(){document.body.classList.remove("block-interactivity-".concat(hr)),Ar.forEach(function(_r){return _r.classList.remove("allow-interactivity-".concat(hr))})}}},[cr.inert,cr.lockRef.current,cr.shards]);var gr=reactExports.useCallback(function(Ar,_r){if("touches"in Ar&&Ar.touches.length===2)return!mr.current.allowPinchZoom;var Cr=getTouchXY(Ar),kr=dr.current,Rr="deltaX"in Ar?Ar.deltaX:kr[0]-Cr[0],Ir="deltaY"in Ar?Ar.deltaY:kr[1]-Cr[1],Nr,Pr=Ar.target,Tr=Math.abs(Rr)>Math.abs(Ir)?"h":"v";if("touches"in Ar&&Tr==="h"&&Pr.type==="range")return!1;var Br=locationCouldBeScrolled(Tr,Pr);if(!Br)return!0;if(Br?Nr=Tr:(Nr=Tr==="v"?"h":"v",Br=locationCouldBeScrolled(Tr,Pr)),!Br)return!1;if(!fr.current&&"changedTouches"in Ar&&(Rr||Ir)&&(fr.current=Nr),!Nr)return!0;var Fr=fr.current||Nr;return handleScroll(Fr,_r,Ar,Fr==="h"?Rr:Ir,!0)},[]),yr=reactExports.useCallback(function(Ar){var _r=Ar;if(!(!lockStack.length||lockStack[lockStack.length-1]!==pr)){var Cr="deltaY"in _r?getDeltaXY(_r):getTouchXY(_r),kr=ar.current.filter(function(Nr){return Nr.name===_r.type&&Nr.target===_r.target&&deltaCompare(Nr.delta,Cr)})[0];if(kr&&kr.should){_r.cancelable&&_r.preventDefault();return}if(!kr){var Rr=(mr.current.shards||[]).map(extractRef).filter(Boolean).filter(function(Nr){return Nr.contains(_r.target)}),Ir=Rr.length>0?gr(_r,Rr[0]):!mr.current.noIsolation;Ir&&_r.cancelable&&_r.preventDefault()}}},[]),xr=reactExports.useCallback(function(Ar,_r,Cr,kr){var Rr={name:Ar,delta:_r,target:Cr,should:kr};ar.current.push(Rr),setTimeout(function(){ar.current=ar.current.filter(function(Ir){return Ir!==Rr})},1)},[]),wr=reactExports.useCallback(function(Ar){dr.current=getTouchXY(Ar),fr.current=void 0},[]),br=reactExports.useCallback(function(Ar){xr(Ar.type,getDeltaXY(Ar),Ar.target,gr(Ar,cr.lockRef.current))},[]),Sr=reactExports.useCallback(function(Ar){xr(Ar.type,getTouchXY(Ar),Ar.target,gr(Ar,cr.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(pr),cr.setCallbacks({onScrollCapture:br,onWheelCapture:br,onTouchMoveCapture:Sr}),document.addEventListener("wheel",yr,nonPassive),document.addEventListener("touchmove",yr,nonPassive),document.addEventListener("touchstart",wr,nonPassive),function(){lockStack=lockStack.filter(function(Ar){return Ar!==pr}),document.removeEventListener("wheel",yr,nonPassive),document.removeEventListener("touchmove",yr,nonPassive),document.removeEventListener("touchstart",wr,nonPassive)}},[]);var vr=cr.removeScrollBar,Er=cr.inert;return reactExports.createElement(reactExports.Fragment,null,Er?reactExports.createElement(pr,{styles:generateStyle(hr)}):null,vr?reactExports.createElement(RemoveScrollBar,{gapMode:"margin"}):null)}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(cr,ar){return reactExports.createElement(RemoveScroll,__assign$2({},cr,{ref:ar,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;const $epM9y$RemoveScroll=ReactRemoveScroll;var getDefaultParent=function(cr){if(typeof document>"u")return null;var ar=Array.isArray(cr)?cr[0]:cr;return ar.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(cr){return cr&&(cr.host||unwrapHost(cr.parentNode))},correctTargets=function(cr,ar){return ar.map(function(dr){if(cr.contains(dr))return dr;var fr=unwrapHost(dr);return fr&&cr.contains(fr)?fr:(console.error("aria-hidden",dr,"in not contained inside",cr,". Doing nothing"),null)}).filter(function(dr){return!!dr})},applyAttributeToOthers=function(cr,ar,dr,fr){var hr=correctTargets(ar,Array.isArray(cr)?cr:[cr]);markerMap[dr]||(markerMap[dr]=new WeakMap);var pr=markerMap[dr],mr=[],gr=new Set,yr=new Set(hr),xr=function(br){!br||gr.has(br)||(gr.add(br),xr(br.parentNode))};hr.forEach(xr);var wr=function(br){!br||yr.has(br)||Array.prototype.forEach.call(br.children,function(Sr){if(gr.has(Sr))wr(Sr);else{var vr=Sr.getAttribute(fr),Er=vr!==null&&vr!=="false",Ar=(counterMap.get(Sr)||0)+1,_r=(pr.get(Sr)||0)+1;counterMap.set(Sr,Ar),pr.set(Sr,_r),mr.push(Sr),Ar===1&&Er&&uncontrolledNodes.set(Sr,!0),_r===1&&Sr.setAttribute(dr,"true"),Er||Sr.setAttribute(fr,"true")}})};return wr(ar),gr.clear(),lockCount++,function(){mr.forEach(function(br){var Sr=counterMap.get(br)-1,vr=pr.get(br)-1;counterMap.set(br,Sr),pr.set(br,vr),Sr||(uncontrolledNodes.has(br)||br.removeAttribute(fr),uncontrolledNodes.delete(br)),vr||br.removeAttribute(dr)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(cr,ar,dr){dr===void 0&&(dr="data-aria-hidden");var fr=Array.from(Array.isArray(cr)?cr:[cr]),hr=ar||getDefaultParent(cr);return hr?(fr.push.apply(fr,Array.from(hr.querySelectorAll("[aria-live]"))),applyAttributeToOthers(fr,hr,dr,"aria-hidden")):function(){return null}};const $5d3850c4d0b4e6c7$var$DIALOG_NAME="Dialog",[$5d3850c4d0b4e6c7$var$createDialogContext,$5d3850c4d0b4e6c7$export$cc702773b8ea3e41]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($5d3850c4d0b4e6c7$var$DIALOG_NAME),[$5d3850c4d0b4e6c7$var$DialogProvider,$5d3850c4d0b4e6c7$var$useDialogContext]=$5d3850c4d0b4e6c7$var$createDialogContext($5d3850c4d0b4e6c7$var$DIALOG_NAME),$5d3850c4d0b4e6c7$export$3ddf2d174ce01153=cr=>{const{__scopeDialog:ar,children:dr,open:fr,defaultOpen:hr,onOpenChange:pr,modal:mr=!0}=cr,gr=reactExports.useRef(null),yr=reactExports.useRef(null),[xr=!1,wr]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:fr,defaultProp:hr,onChange:pr});return reactExports.createElement($5d3850c4d0b4e6c7$var$DialogProvider,{scope:ar,triggerRef:gr,contentRef:yr,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),titleId:$1746a345f3d73bb7$export$f680877a34711e37(),descriptionId:$1746a345f3d73bb7$export$f680877a34711e37(),open:xr,onOpenChange:wr,onOpenToggle:reactExports.useCallback(()=>wr(br=>!br),[wr]),modal:mr},dr)},$5d3850c4d0b4e6c7$var$TRIGGER_NAME="DialogTrigger",$5d3850c4d0b4e6c7$export$2e1e1122cf0cba88=reactExports.forwardRef((cr,ar)=>{const{__scopeDialog:dr,...fr}=cr,hr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$TRIGGER_NAME,dr),pr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ar,hr.triggerRef);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button","aria-haspopup":"dialog","aria-expanded":hr.open,"aria-controls":hr.contentId,"data-state":$5d3850c4d0b4e6c7$var$getState(hr.open)},fr,{ref:pr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onClick,hr.onOpenToggle)}))}),$5d3850c4d0b4e6c7$var$PORTAL_NAME="DialogPortal",[$5d3850c4d0b4e6c7$var$PortalProvider,$5d3850c4d0b4e6c7$var$usePortalContext]=$5d3850c4d0b4e6c7$var$createDialogContext($5d3850c4d0b4e6c7$var$PORTAL_NAME,{forceMount:void 0}),$5d3850c4d0b4e6c7$export$dad7c95542bacce0=cr=>{const{__scopeDialog:ar,forceMount:dr,children:fr,container:hr}=cr,pr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$PORTAL_NAME,ar);return reactExports.createElement($5d3850c4d0b4e6c7$var$PortalProvider,{scope:ar,forceMount:dr},reactExports.Children.map(fr,mr=>reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:dr||pr.open},reactExports.createElement($f1701beae083dbae$export$602eac185826482c,{asChild:!0,container:hr},mr))))},$5d3850c4d0b4e6c7$var$OVERLAY_NAME="DialogOverlay",$5d3850c4d0b4e6c7$export$bd1d06c79be19e17=reactExports.forwardRef((cr,ar)=>{const dr=$5d3850c4d0b4e6c7$var$usePortalContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,cr.__scopeDialog),{forceMount:fr=dr.forceMount,...hr}=cr,pr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,cr.__scopeDialog);return pr.modal?reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:fr||pr.open},reactExports.createElement($5d3850c4d0b4e6c7$var$DialogOverlayImpl,_extends$1({},hr,{ref:ar}))):null}),$5d3850c4d0b4e6c7$var$DialogOverlayImpl=reactExports.forwardRef((cr,ar)=>{const{__scopeDialog:dr,...fr}=cr,hr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$OVERLAY_NAME,dr);return reactExports.createElement($epM9y$RemoveScroll,{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0,shards:[hr.contentRef]},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-state":$5d3850c4d0b4e6c7$var$getState(hr.open)},fr,{ref:ar,style:{pointerEvents:"auto",...fr.style}})))}),$5d3850c4d0b4e6c7$var$CONTENT_NAME="DialogContent",$5d3850c4d0b4e6c7$export$b6d9565de1e068cf=reactExports.forwardRef((cr,ar)=>{const dr=$5d3850c4d0b4e6c7$var$usePortalContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,cr.__scopeDialog),{forceMount:fr=dr.forceMount,...hr}=cr,pr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,cr.__scopeDialog);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:fr||pr.open},pr.modal?reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentModal,_extends$1({},hr,{ref:ar})):reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentNonModal,_extends$1({},hr,{ref:ar})))}),$5d3850c4d0b4e6c7$var$DialogContentModal=reactExports.forwardRef((cr,ar)=>{const dr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,cr.__scopeDialog),fr=reactExports.useRef(null),hr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ar,dr.contentRef,fr);return reactExports.useEffect(()=>{const pr=fr.current;if(pr)return hideOthers(pr)},[]),reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentImpl,_extends$1({},cr,{ref:hr,trapFocus:dr.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onCloseAutoFocus,pr=>{var mr;pr.preventDefault(),(mr=dr.triggerRef.current)===null||mr===void 0||mr.focus()}),onPointerDownOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onPointerDownOutside,pr=>{const mr=pr.detail.originalEvent,gr=mr.button===0&&mr.ctrlKey===!0;(mr.button===2||gr)&&pr.preventDefault()}),onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onFocusOutside,pr=>pr.preventDefault())}))}),$5d3850c4d0b4e6c7$var$DialogContentNonModal=reactExports.forwardRef((cr,ar)=>{const dr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,cr.__scopeDialog),fr=reactExports.useRef(!1),hr=reactExports.useRef(!1);return reactExports.createElement($5d3850c4d0b4e6c7$var$DialogContentImpl,_extends$1({},cr,{ref:ar,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:pr=>{var mr;if((mr=cr.onCloseAutoFocus)===null||mr===void 0||mr.call(cr,pr),!pr.defaultPrevented){var gr;fr.current||(gr=dr.triggerRef.current)===null||gr===void 0||gr.focus(),pr.preventDefault()}fr.current=!1,hr.current=!1},onInteractOutside:pr=>{var mr,gr;(mr=cr.onInteractOutside)===null||mr===void 0||mr.call(cr,pr),pr.defaultPrevented||(fr.current=!0,pr.detail.originalEvent.type==="pointerdown"&&(hr.current=!0));const yr=pr.target;((gr=dr.triggerRef.current)===null||gr===void 0?void 0:gr.contains(yr))&&pr.preventDefault(),pr.detail.originalEvent.type==="focusin"&&hr.current&&pr.preventDefault()}}))}),$5d3850c4d0b4e6c7$var$DialogContentImpl=reactExports.forwardRef((cr,ar)=>{const{__scopeDialog:dr,trapFocus:fr,onOpenAutoFocus:hr,onCloseAutoFocus:pr,...mr}=cr,gr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CONTENT_NAME,dr),yr=reactExports.useRef(null),xr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ar,yr);return $3db38b7d1fb3fe6a$export$b7ece24a22aeda8c(),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,loop:!0,trapped:fr,onMountAutoFocus:hr,onUnmountAutoFocus:pr},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,_extends$1({role:"dialog",id:gr.contentId,"aria-describedby":gr.descriptionId,"aria-labelledby":gr.titleId,"data-state":$5d3850c4d0b4e6c7$var$getState(gr.open)},mr,{ref:xr,onDismiss:()=>gr.onOpenChange(!1)}))),!1)}),$5d3850c4d0b4e6c7$var$TITLE_NAME="DialogTitle",$5d3850c4d0b4e6c7$export$16f7638e4a34b909=reactExports.forwardRef((cr,ar)=>{const{__scopeDialog:dr,...fr}=cr,hr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$TITLE_NAME,dr);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.h2,_extends$1({id:hr.titleId},fr,{ref:ar}))}),$5d3850c4d0b4e6c7$var$CLOSE_NAME="DialogClose",$5d3850c4d0b4e6c7$export$fba2fb7cd781b7ac=reactExports.forwardRef((cr,ar)=>{const{__scopeDialog:dr,...fr}=cr,hr=$5d3850c4d0b4e6c7$var$useDialogContext($5d3850c4d0b4e6c7$var$CLOSE_NAME,dr);return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button"},fr,{ref:ar,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onClick,()=>hr.onOpenChange(!1))}))});function $5d3850c4d0b4e6c7$var$getState(cr){return cr?"open":"closed"}const $5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9=$5d3850c4d0b4e6c7$export$3ddf2d174ce01153,$5d3850c4d0b4e6c7$export$41fb9f06171c75f4=$5d3850c4d0b4e6c7$export$2e1e1122cf0cba88,$5d3850c4d0b4e6c7$export$602eac185826482c=$5d3850c4d0b4e6c7$export$dad7c95542bacce0,$5d3850c4d0b4e6c7$export$c6fdb837b070b4ff=$5d3850c4d0b4e6c7$export$bd1d06c79be19e17,$5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2=$5d3850c4d0b4e6c7$export$b6d9565de1e068cf,$5d3850c4d0b4e6c7$export$f99233281efd08a0=$5d3850c4d0b4e6c7$export$16f7638e4a34b909,$5d3850c4d0b4e6c7$export$f39c2d165cd861fe=$5d3850c4d0b4e6c7$export$fba2fb7cd781b7ac;function Footer$1({children:cr}){return jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 py-4 px-6 bg-white border border-ss-stroke flex flex-row w-full z-50",children:cr})}const Modal=({trigger:cr,title:ar,children:dr,footer:fr,isOpen:hr,setOpen:pr})=>jsxRuntimeExports.jsxs($5d3850c4d0b4e6c7$export$be92b6f5f03c0fe9,{open:hr,children:[cr&&jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$41fb9f06171c75f4,{onClick:()=>{pr&&pr(!0)},asChild:!0,children:cr}),jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$602eac185826482c,{children:jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$c6fdb837b070b4ff,{style:{background:"rgba(24, 23, 16, 0.65)",zIndex:100},className:"fixed top-0 left-0 w-screen h-screen flex flex-col justify-around",children:jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$7c6e2c02157bb7d2,{className:"mx-auto w-[640px] min-h-min max-h-3/4 overflow-y-scroll",children:jsxRuntimeExports.jsxs(Card,{className:"relative w-full h-full p-0",children:[jsxRuntimeExports.jsxs("div",{className:"absolute top-0 left-0 flex flex-row justify-between items-center bg-white w-full pt-8 p-6 pb-4 border-b border-ss-stroke z-50",children:[jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$f99233281efd08a0,{asChild:!0,children:jsxRuntimeExports.jsx(OverlineLarge,{children:ar})}),jsxRuntimeExports.jsx("div",{className:"w-10"}),hr&&!pr?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$f39c2d165cd861fe,{onClick:()=>{pr&&pr(!1)},children:jsxRuntimeExports.jsx(CrossIcon,{})})]}),jsxRuntimeExports.jsxs("div",{className:"h-full overflow-y-scroll px-6",children:[jsxRuntimeExports.jsx("div",{className:"h-24"}),dr,jsxRuntimeExports.jsx("div",{className:"h-24"})]}),fr&&jsxRuntimeExports.jsx(Footer$1,{children:fr})]})})})})]});function useMainWalletBalance(){const{externalWalletClient:cr}=useAmalgema(),{data:ar}=useBalance({address:cr?.account?.address,watch:!0,staleTime:1e3});return{...ar}}function WarningSvg(){return jsxRuntimeExports.jsx("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M12.0001 8.99999V12.75M2.69707 16.126C1.83107 17.626 2.91407 19.5 4.64507 19.5H19.3551C21.0851 19.5 22.1681 17.626 21.3031 16.126L13.9491 3.37799C13.0831 1.87799 10.9171 1.87799 10.0511 3.37799L2.69707 16.126ZM12.0001 15.75H12.0071V15.758H12.0001V15.75Z",stroke:"#BF1818",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function LowBalanceWarning(){return jsxRuntimeExports.jsxs("div",{style:{borderRadius:"2px",border:"1px solid #BF1818",background:"#FFECEB",boxShadow:"2px 2px 0px 0px rgba(24, 23, 16, 0.90)"},className:"flex flex-row space-x-2 p-3",children:[jsxRuntimeExports.jsx(WarningSvg,{}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{className:"text-[#BF1818] font-medium",children:"Session wallet running low"})}),jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default",children:"Your session wallet balance is below the recommended minimum of 0.001 ETH. Top up now or you will not be able to play matches!"})]})]})}function SessionWalletManager(){const{externalWalletClient:cr,externalWorldContract:ar,network:{walletClient:dr,waitForTransaction:fr}}=useAmalgema(),hr=cr?.account?.address??"0x00",pr=dr.account.address,mr=useBurnerBalance(),gr=useMainWalletBalance(),[yr,xr]=reactExports.useState(0);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(EthInput,{amount:mr.value?mr.value:0n,className:"pr-2",label:"Session Wallet Balance"}),mr?.belowMinimum&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"h-2"}),jsxRuntimeExports.jsx(LowBalanceWarning,{})]}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsxs(Modal,{title:"Manage Session Wallet",trigger:jsxRuntimeExports.jsx(Button$1,{buttonType:mr?.belowMinimum?"secondary":"tertiary",className:"w-full",children:mr?.belowMinimum?"transfer to session wallet":"Manage session wallet"}),children:[jsxRuntimeExports.jsx(ReadOnlyTextInput,{value:pr,className:"pr-2 text-right",label:"Session Wallet"}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsx(ReadOnlyTextInput,{value:hr,className:"pr-2 text-right",label:"Main Wallet"}),jsxRuntimeExports.jsx("div",{className:"h-8"}),jsxRuntimeExports.jsxs(Body,{className:"text-ss-text-default",children:["For your security, matches of Sky Strife use a ",jsxRuntimeExports.jsx("strong",{children:"temporary session wallet"}),"  stored in local storage  with a small amount of funds instead of your primary wallet. It will be used for every action you make during the match.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"We recommend storing ",jsxRuntimeExports.jsx("strong",{children:"about 0.001 ETH in your match wallet at all times"}),"  the amount required to safely be able to complete five average matches of Sky Strife."]}),jsxRuntimeExports.jsx("div",{className:"h-8"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row space-x-6",children:[jsxRuntimeExports.jsx(EthInput,{amount:mr.value?mr.value:0n,className:"pr-2",label:"Session Wallet"}),jsxRuntimeExports.jsx(EthInput,{amount:gr.value?gr.value:0n,className:"pr-2",label:"Main Wallet"})]}),mr?.belowMinimum&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsx(LowBalanceWarning,{})]}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx(PromiseButton,{promise:async()=>{if(!cr||!cr.account)throw new Error("No external wallet connected");await cr.sendTransaction({chain:dr.chain,account:cr.account,to:dr.account.address,value:parseEther("0.001")})},disabled:!mr?.belowMinimum||(gr?.value??0n)<LOW_BALANCE_THRESHOLD,className:"w-full",buttonType:"primary",children:"top up session wallet"}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsx("div",{className:"mx-auto w-fit text-ss-text-x-light",children:"or"}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsxs("div",{className:"grow flex items-center space-x-2",children:[jsxRuntimeExports.jsx("input",{className:twMerge("w-full bg-white px-4 py-2 border border-[#DDDAD0] grow"),type:"number",placeholder:"Transfer custom amount",value:yr??"",min:0,onChange:wr=>{const br=parseFloat(wr.target.value);if(isNaN(br)){xr(null);return}xr(br)}}),jsxRuntimeExports.jsx("div",{className:"",children:"ETH"})]}),jsxRuntimeExports.jsx(PromiseButton,{promise:async()=>{if(!cr||!cr.account)throw new Error("No external wallet connected");await cr.sendTransaction({chain:dr.chain,account:cr.account,to:dr.account.address,value:parseEther((yr??0).toString())})},buttonType:"secondary",disabled:(yr??0)<=0||(gr?.value??0n)<parseEther((yr??0).toString()),children:"transfer"})]}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsx("div",{className:"mx-auto w-fit text-ss-text-x-light",children:"or"}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsx("div",{className:"flex space-x-3 w-full mb-[-64px]",children:jsxRuntimeExports.jsx("div",{className:"w-full","data-tooltip-id":"new-session-wallet-tooltip","data-tooltip-content":"This will transfer your funds to your main wallet and generate a new session wallet. YOU WILL BE UNABLE TO FINISH ANY MATCHES IN PROGRESS.",children:jsxRuntimeExports.jsx(PromiseButton,{promise:async()=>{if(!ar||!cr||!cr.account)throw new Error("No external wallet connected");let wr=mr.value??0n;if(wr>parseEther("0.0001")){wr-=parseEther("0.0001");const Sr=await dr.sendTransaction({chain:dr.chain,account:dr.account,to:hr,value:wr});fr(Sr)}const br=await ar.write.unregisterDelegation([dr.account.address]);fr(br),localStorage.removeItem("mud:burnerWallet"),window.location.reload()},buttonType:"danger",className:"w-full",children:"generate new session wallet"})})}),jsxRuntimeExports.jsx(B$1,{variant:"light",place:"top",style:{width:"300px"},opacity:1,id:"new-session-wallet-tooltip"})]})]})}const DelegationAbi=[{inputs:[{internalType:"address",name:"delegatee",type:"address"},{internalType:"ResourceId",name:"systemId",type:"bytes32"},{internalType:"uint256",name:"numCalls",type:"uint256"}],name:"initDelegation",outputs:[],stateMutability:"nonpayable",type:"function"}],GAMEPLAY_SYSTEMS=[LOBBY_SYSTEM_ID,MOVE_SYSTEM_ID,BUILD_SYSTEM_ID];function getDelegationSystemCalls(cr){return GAMEPLAY_SYSTEMS.map(ar=>({systemId:CORE_SYSTEM_ID,functionName:"registerDelegation",args:[cr,SYSTEMBOUND_DELEGATION,encodeFunctionData({abi:DelegationAbi,functionName:"initDelegation",args:[cr,ar,maxUint256]})]}))}function useOrbBalance(){const{externalWalletClient:cr,components:{Orb_Balances:ar}}=useAmalgema();return H$4(ar,cr&&cr.account?addressToEntityID(cr.account.address):"0")?.value||0n}function SeasonPassIcon(){return jsxRuntimeExports.jsx("img",{src:"public/assets/season-pass-small.png",className:"inline-block w-6 h-6"})}const useSeasonPass=cr=>{const{components:{SeasonPass_Balances:ar}}=useAmalgema(),dr=H$4(ar,addressToEntityID(cr));return dr?dr&&dr.value>0:!1},useSeasonPassExternalWallet=()=>{const{externalWalletClient:cr,components:{SeasonPass_Balances:ar}}=useAmalgema(),dr=H$4(ar,cr&&cr.account?addressToEntityID(cr.account.address):"0");return dr?dr&&dr.value>0:!1},UnitTypeStatBars={[UnitTypes.Golem]:{health:{percent:100,color:"#00ff00"},armor:{percent:100,color:"#00ff00"},strength:{percent:50,color:"#ff8000"},movement:{percent:25,color:"#ff0000"}},[UnitTypes.Dragon]:{health:{percent:75,color:"#ffff00"},armor:{percent:50,color:"#ff8000"},strength:{percent:75,color:"#ffff00"},movement:{percent:100,color:"#00ff00"}},[UnitTypes.Wizard]:{health:{percent:50,color:"#ff8000"},armor:{percent:25,color:"#ff0000"},strength:{percent:75,color:"#ffff00"},movement:{percent:75,color:"#ffff00"}}};function StatBar({percent:cr,color:ar}){return jsxRuntimeExports.jsx("div",{className:"w-[54px] h-2 bg-white border border-ss-stroke rounded-md",children:jsxRuntimeExports.jsx("div",{style:{backgroundColor:ar,width:`${cr}%`},className:"h-full rounded-md"})})}function HeroPreview({heroEntity:cr,setHero:ar,selected:dr}){const{components:{UnitType:fr,HeroInSeasonPassRotation:hr},utils:{getTemplateValueStrict:pr}}=useAmalgema(),mr=H$4(hr,cr)?.value,gr=useSeasonPassExternalWallet(),yr=pr(fr.id,cr).value,xr=UnitTypeNames[yr],wr=UnitTypeDescriptions[yr],br=UnitTypeSprites[yr],Sr=UnitTypeStatBars[yr];return jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 ",children:[mr&&jsxRuntimeExports.jsx(SeasonPassIcon,{})," ",jsxRuntimeExports.jsx("span",{children:xr})]}),jsxRuntimeExports.jsx("div",{className:"text-ss-text-x-light text-[14px]",children:wr})]}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsxs("div",{className:twMerge("flex flex-col rounded-md shadow-ss-small border border-black w-full",dr?"bg-ss-bg-0":"bg-ss-bg-1"),children:[jsxRuntimeExports.jsxs("div",{className:"bg-ss-bg-2 w-full flex flex-col items-center rounded-t-md",children:[jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx(SpriteImage,{spriteKey:br,colorName:"blue",scale:2}),jsxRuntimeExports.jsx("div",{className:"h-4"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-ss-text-light underline flex items-center",children:["health ",jsxRuntimeExports.jsx("div",{className:"grow"})," ",jsxRuntimeExports.jsx(StatBar,{percent:Sr.health.percent,color:Sr.health.color})]}),jsxRuntimeExports.jsxs("div",{className:"text-ss-text-light underline flex items-center",children:["armor ",jsxRuntimeExports.jsx("div",{className:"grow"})," ",jsxRuntimeExports.jsx(StatBar,{percent:Sr.armor.percent,color:Sr.armor.color})]}),jsxRuntimeExports.jsxs("div",{className:"text-ss-text-light underline flex items-center",children:["strength ",jsxRuntimeExports.jsx("div",{className:"grow"})," ",jsxRuntimeExports.jsx(StatBar,{percent:Sr.strength.percent,color:Sr.strength.color})]}),jsxRuntimeExports.jsxs("div",{className:"text-ss-text-light underline flex items-center",children:["movement ",jsxRuntimeExports.jsx("div",{className:"w-2 grow"})," ",jsxRuntimeExports.jsx(StatBar,{percent:Sr.movement.percent,color:Sr.movement.color})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"h-4 w-full border-t-2"}),jsxRuntimeExports.jsx(Button$1,{"data-tooltip-id":`season-pass-hero-${cr}`,disabled:dr||mr&&!gr,buttonType:"primary",onClick:()=>ar(cr),children:dr?"Selected":"Select"}),mr&&!gr&&jsxRuntimeExports.jsx(B$1,{id:`season-pass-hero-${cr}`,variant:"light",place:"top",opacity:1,render:()=>jsxRuntimeExports.jsx("div",{className:"w-[120px]",children:"This hero requires a Season Pass to access this week."})}),jsxRuntimeExports.jsx("div",{className:"h-4"})]})]})]})}function HeroModal({hero:cr,setHero:ar,footer:dr,trigger:fr}){const{components:{HeroInRotation:hr,HeroInSeasonPassRotation:pr,UnitType:mr},utils:{getTemplateValueStrict:gr}}=useAmalgema(),yr=te$5([Je$2(hr,{value:!0})]),xr=te$5([Je$2(pr,{value:!0})]),wr=lodashExports.uniq([...yr,...xr]);return jsxRuntimeExports.jsx(Modal,{title:"select a hero",footer:dr,trigger:fr||jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",children:"switch hero"}),children:jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-around space-x-6",children:wr.map((br,Sr)=>jsxRuntimeExports.jsx(HeroPreview,{heroEntity:br,setHero:ar,selected:br===cr},`${br}-${Sr}`))}),jsxRuntimeExports.jsx("div",{className:"h-3"})]})})}function HeroSelect({hero:cr,setHero:ar}){const{components:{UnitType:dr},utils:{getTemplateValueStrict:fr}}=useAmalgema(),hr=fr(dr.id,cr).value,pr=UnitTypeDescriptions[hr],mr=UnitTypeNames[hr],gr=UnitTypeSprites[hr];return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(OverlineSmall,{children:"select a hero"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center rounded grow bg-white p-3 space-x-1",children:[jsxRuntimeExports.jsx(SpriteImage,{spriteKey:gr,colorName:"blue",scale:2}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-lg",children:mr}),jsxRuntimeExports.jsx("div",{className:"text-ss-text-x-light",children:pr})]})]}),jsxRuntimeExports.jsx(HeroModal,{hero:cr,setHero:ar,footer:jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$f39c2d165cd861fe,{asChild:!0,children:jsxRuntimeExports.jsx(Button$1,{className:"w-full",buttonType:"primary",children:"Confirm"})})})]})]})}function useIsAllowed(cr){const{network:{components:{MatchAccessControl:ar,MatchAllowed:dr}},externalWalletClient:fr}=useAmalgema(),hr=g$7(ar,cr),pr=useSeasonPassExternalWallet(),mr=hr&&hr.systemId===ALLOW_LIST_SYSTEM_ID,gr=hr&&hr.systemId===SEASON_PASS_ONLY_SYSTEM_ID;let yr=!0;return mr&&(yr=[...A$6([Ye$3(dr)])].map(xr=>ft$3(dr.metadata.keySchema,xr)).some(({matchEntity:xr,account:wr})=>fr&&fr.account&&xr===cr&&wr===fr.account.address)),gr&&(yr=pr),{isAllowed:yr,hasAllowList:mr,isSeasonPassOnly:gr}}function useCanAffordEntrance(cr){const{network:{components:{MatchSweepstake:ar}}}=useAmalgema(),dr=g$7(ar,cr),fr=useOrbBalance();return{canAffordEntrance:!dr||fr>=dr.entranceFee,orbBalance:fr}}function useJoinMatch(cr,ar){const{network:{components:{MatchConfig:dr},walletClient:fr,publicClient:hr},utils:{getAvailableLevelSpawns:pr,hasSystemDelegation:mr},externalWalletClient:gr,executeSystemWithExternalWallet:yr,externalWorldContract:xr}=useAmalgema(),{openConnectModal:wr}=useConnectModal(),br=g$7(dr,cr);return reactExports.useCallback(async()=>{if(!gr){wr&&wr();return}if(!br||!xr||gr.account?.address===void 0)return;gr.account&&gr.transport.type==="custom"&&(await gr.addChain({chain:hr.chain}),await gr.switchChain({id:hr.chain.id}));const Sr=pr(br.levelId,cr),vr=Sr[Math.floor(Math.random()*Sr.length)];mr(gr.account.address,fr.account.address,LOBBY_SYSTEM_ID)?await yr({systemCall:"register",args:[[cr,vr,ar]]}):await yr({systemCall:"batchCall",systemId:"JoinMatch",args:[[P$2(IWorldAbi,[{systemId:PLAYER_REGISTER_SYSTEM_ID,functionName:"register",args:[cr,vr,ar]},...getDelegationSystemCalls(fr.account.address)]).map(([Ar,_r])=>({systemId:Ar,callData:_r}))]]}),window.location.assign(getMatchUrl(cr))},[yr,gr,xr,pr,mr,ar,br,cr,wr,hr.chain,fr.account.address])}function LevelDisplay({levelId:cr}){const{utils:{getVirtualLevelData:ar,getLevelSpawns:dr,getLevelPositionStrict:fr,getLevelIndices:hr}}=useAmalgema(),pr=cr.length>0?ar(cr):[],mr=pr.length>0?pr.map((br,Sr)=>{const vr=br.Position;return vr?jsxRuntimeExports.jsx("div",{style:{top:`calc(50% + ${vr.y*8}px)`,left:`calc(50% + ${vr.x*8}px)`,zIndex:1},className:"absolute h-2 w-2 bg-green-700"},`${cr}-${Sr}}`):null}):[];return(cr.length>0?dr(cr):[]).map(br=>fr(cr,br)).forEach(br=>{const Sr=br;mr.push(jsxRuntimeExports.jsx("div",{style:{top:`calc(50% + ${Sr.y*8}px)`,left:`calc(50% + ${Sr.x*8}px)`,zIndex:3},"data-tooltip-id":"map-legend-tooltip","data-tooltip-content":"Player Spawn",className:"absolute h-2 w-2 bg-blue-300 border-blue-500 border"},`${cr}-${Sr.x}-${Sr.y}`))}),(cr.length>0?hr(cr,stringToHex("GoldMine",{size:32})):[]).map(br=>fr(cr,br)).forEach(br=>{const Sr=br;mr.push(jsxRuntimeExports.jsx("div",{style:{top:`calc(50% + ${Sr.y*8}px)`,left:`calc(50% + ${Sr.x*8}px)`,zIndex:2},"data-tooltip-id":"map-legend-tooltip","data-tooltip-content":"Gold Mine",className:"absolute h-2 w-2 bg-yellow-300 border-yellow-500 border"},`${cr}-${Sr.x}-${Sr.y}`))}),jsxRuntimeExports.jsxs("div",{className:"relative w-full flex justify-cente border border-ss-stroke rounded-md bg-blue-100 h-64",children:[mr,jsxRuntimeExports.jsx(B$1,{opacity:1,style:{zIndex:50},id:"map-legend-tooltip",variant:"light",render:({content:br})=>jsxRuntimeExports.jsx("div",{children:br})})]})}function useAccessList(cr){const{components:{MatchAllowed:ar}}=useAmalgema();return te$5([Ye$3(ar)]).map(fr=>ft$3(ar.metadata.keySchema,fr)).filter(({matchEntity:fr})=>fr===cr)}function ordinalSuffix(cr){const ar=cr%10,dr=cr%100;return ar==1&&dr!=11?cr+"st":ar==2&&dr!=12?cr+"nd":ar==3&&dr!=13?cr+"rd":cr+"th"}function ConfirmedCheck(){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:jsxRuntimeExports.jsx("path",{d:"M6 8.5L7.5 10L10 6.5M14 8C14 8.84533 13.58 9.59333 12.938 10.0453C13.0072 10.4405 12.9801 10.8465 12.8591 11.229C12.738 11.6115 12.5266 11.9592 12.2427 12.2427C11.9592 12.5266 11.6115 12.738 11.229 12.8591C10.8465 12.9801 10.4405 13.0072 10.0453 12.938C9.81481 13.2663 9.50857 13.5343 9.15253 13.7191C8.7965 13.904 8.40117 14.0003 8 14C7.15467 14 6.40667 13.58 5.95467 12.938C5.55949 13.0071 5.15348 12.98 4.77099 12.859C4.38851 12.7379 4.04081 12.5265 3.75733 12.2427C3.47342 11.9592 3.26199 11.6115 3.14095 11.229C3.01991 10.8465 2.99283 10.4405 3.062 10.0453C2.73368 9.81481 2.46575 9.50857 2.28088 9.15253C2.09602 8.7965 1.99967 8.40117 2 8C2 7.15467 2.42 6.40667 3.062 5.95467C2.99283 5.55949 3.01991 5.15346 3.14095 4.77097C3.26199 4.38847 3.47342 4.04078 3.75733 3.75733C4.04081 3.47346 4.38851 3.26206 4.77099 3.14103C5.15348 3.01999 5.55949 2.99289 5.95467 3.062C6.18523 2.73372 6.49148 2.46582 6.8475 2.28096C7.20353 2.0961 7.59885 1.99973 8 2C8.84533 2 9.59333 2.42 10.0453 3.062C10.4405 2.99289 10.8465 3.01999 11.229 3.14103C11.6115 3.26206 11.9592 3.47346 12.2427 3.75733C12.5265 4.04081 12.7379 4.38851 12.859 4.77099C12.98 5.15347 13.0071 5.55949 12.938 5.95467C13.2663 6.18519 13.5343 6.49143 13.7191 6.84747C13.904 7.2035 14.0003 7.59884 14 8Z",stroke:"#1A6CBC",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function JoinModal({matchEntity:cr,children:ar,viewOnly:dr}){const{network:{components:{MatchSweepstake:fr,Player:hr,Match:pr,OwnedBy:mr,OfficialLevel:gr,HeroInRotation:yr}},components:{MatchJoinable:xr}}=useAmalgema(),wr=[...A$6([Je$2(yr,{value:!0})])][0],[br,Sr]=reactExports.useState(wr),[vr,Er]=reactExports.useState(!1),[Ar,_r]=reactExports.useState(!1),{totalRewards:Cr,sweepstakeRewards:kr}=useMatchRewards(cr),Rr=useAccessList(cr),Ir=useMatchInfo(cr),Nr=Ir.matchConfig,Pr=g$7(fr,cr),Tr=H$4(xr,cr)?.value,Br=Nr?.levelId??"0x",Fr=hexToString(Br,{size:32}),jr=g$7(gr,Br)?.value,{isAllowed:Ur,hasAllowList:qr,isSeasonPassOnly:Hr}=useIsAllowed(cr),{canAffordEntrance:Or}=useCanAffordEntrance(cr);let Mr="Join";Or||(Mr="Not enough "),Ur||(Hr?Mr="Season pass only":qr&&(Mr="Not on access list"));let Lr="Public";qr?Lr="Private":Hr&&(Lr="Season Pass Only");const Vr=useJoinMatch(cr,br),{address:Jr}=useExternalAccount$1(),ns=!!te$5([Ye$3(hr),Je$2(pr,{matchEntity:cr})]).find(zr=>Jr?g$7(mr,zr)?.value===addressToEntityID(Jr):!1),Qr=useBurnerBalance();return jsxRuntimeExports.jsx(Modal,{trigger:ar,title:`${Ir.matchName}`,footer:dr?null:jsxRuntimeExports.jsxs("div",{className:"w-full flex gap-x-4",children:[!ns&&jsxRuntimeExports.jsx("a",{href:getMatchUrl(cr),target:"_blank",rel:"noopener noreferrer",className:"grow",children:jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",className:"w-full",children:"Spectate"})}),ns&&jsxRuntimeExports.jsx("a",{href:getMatchUrl(cr),target:"_blank",rel:"noopener noreferrer",className:"grow",children:jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",className:"w-full",children:"Play"})}),!ns&&Tr&&jsxRuntimeExports.jsxs(PromiseButton,{disabled:!Ur||!Or,buttonType:"secondary",className:"grow",promise:()=>Vr(),children:[Mr," ",Pr?.entranceFee?`- pay ${formatEther(Pr.entranceFee)} `:null]})]}),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-around",children:[!dr&&Qr.belowMinimum&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SessionWalletManager,{})," ",jsxRuntimeExports.jsx("div",{className:"h-4"})]}),!dr&&Tr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HeroSelect,{hero:br,setHero:Sr}),jsxRuntimeExports.jsx("div",{className:"h-4"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-around",children:[jsxRuntimeExports.jsxs("div",{className:"grow",children:[jsxRuntimeExports.jsx(OverlineSmall,{className:"text-ss-text-x-light font-light",children:"Map"}),jsxRuntimeExports.jsxs("div",{className:"relative w-full",children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"14px"},className:"absolute left-[6px] top-[13px] text-ss-text-x-light uppercase",children:jr&&jsxRuntimeExports.jsx(ConfirmedCheck,{})}),jsxRuntimeExports.jsx("input",{className:twMerge("w-full bg-ss-bg-2 px-6 py-2 border border-[#DDDAD0]"),type:"text",readOnly:!0,value:Fr}),jsxRuntimeExports.jsx("span",{className:"absolute right-3 top-[8px]",children:jsxRuntimeExports.jsx("div",{onClick:()=>Er(!vr),children:jsxRuntimeExports.jsx(Link,{children:"Map Preview"})})})]})]}),jsxRuntimeExports.jsx("div",{className:"w-4"}),jsxRuntimeExports.jsxs("div",{className:"grow",children:[jsxRuntimeExports.jsx(OverlineSmall,{className:"text-ss-text-x-light font-light",children:"match type"}),jsxRuntimeExports.jsx(ReadOnlyTextInput,{value:Lr,symbol:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:qr&&jsxRuntimeExports.jsx("div",{onClick:()=>_r(!Ar),children:jsxRuntimeExports.jsx(Link,{children:"Access List"})})})})]})]}),vr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx(LevelDisplay,{levelId:Nr?.levelId??"0x"})]}),Ar&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Rr.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx(OverlineSmall,{className:"text-ss-text-x-light font-light",children:"Access List"}),jsxRuntimeExports.jsx("div",{className:"flex space-x-2",children:Rr.map(({account:zr})=>jsxRuntimeExports.jsx("div",{className:"bg-ss-bg-2 p-2",children:jsxRuntimeExports.jsx(DisplayNameWithLink,{entity:addressToEntityID(zr)})},zr))})]})}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-4",children:[Cr.map((zr,Wr)=>zr.value===0n?null:jsxRuntimeExports.jsxs("div",{className:"flex-grow",children:[jsxRuntimeExports.jsx(OverlineSmall,{className:"text-ss-text-x-light font-light",children:ordinalSuffix(Wr+1)}),jsxRuntimeExports.jsx(OrbInput,{amount:zr.value})]},Wr)),kr[Cr.length]?.value>0n&&jsxRuntimeExports.jsxs("div",{className:"flex-grow",children:[jsxRuntimeExports.jsx(OverlineSmall,{className:"text-ss-text-x-light font-light",children:"Creator"}),jsxRuntimeExports.jsx(OrbInput,{amount:kr[Cr.length].value})]})]}),dr&&Pr?.entranceFee?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx("div",{className:"flex justify-around",children:jsxRuntimeExports.jsxs("div",{className:"grow",children:[jsxRuntimeExports.jsx(OverlineSmall,{className:"text-ss-text-x-light font-light",children:"Entrance Fee"}),jsxRuntimeExports.jsx(ReadOnlyTextInput,{value:`${formatEther(Pr.entranceFee)} `})]})})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]})})}function ChainSVG({onClick:cr}){const[ar,dr]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("svg",{onMouseEnter:()=>dr(!0),onMouseLeave:()=>dr(!1),onMouseDown:()=>dr(!1),onClick:cr,style:{transform:ar?"scale(1.1)":"",transition:"transform 0.1s ease-in-out"},width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("g",{clipPath:"url(#clip0_1294_6801)",children:jsxRuntimeExports.jsx("path",{d:"M8.79335 5.79202C9.22657 5.99886 9.60382 6.30664 9.89342 6.68951C10.183 7.07238 10.3765 7.51916 10.4576 7.99232C10.5388 8.46548 10.5052 8.9512 10.3596 9.40867C10.2141 9.86614 9.96093 10.282 9.62135 10.6214L6.62135 13.6213C6.05874 14.184 5.29567 14.5 4.50002 14.5C3.70436 14.5 2.9413 14.184 2.37869 13.6213C1.81607 13.0587 1.5 12.2957 1.5 11.5C1.5 10.7044 1.81607 9.9413 2.37869 9.37868L3.55002 8.20735M12.45 7.79268L13.6213 6.62135C14.184 6.05874 14.5 5.29567 14.5 4.50002C14.5 3.70436 14.184 2.9413 13.6213 2.37869C13.0587 1.81607 12.2957 1.5 11.5 1.5C10.7044 1.5 9.9413 1.81607 9.37868 2.37869L6.37868 5.37868C6.03911 5.71802 5.78593 6.13389 5.64041 6.59137C5.49488 7.04884 5.46127 7.53456 5.5424 8.00772C5.62352 8.48087 5.81701 8.92765 6.10661 9.31053C6.39621 9.6934 6.77347 10.0012 7.20669 10.208",stroke:"#5D5D4C",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"clip0_1294_6801",children:jsxRuntimeExports.jsx("rect",{width:"16",height:"16",fill:"white"})})})]})}const RegistrationForm=({matchEntity:cr,address:ar})=>{const{externalWalletClient:dr,externalWorldContract:fr,networkLayer:{network:hr,components:{PlayerReady:pr},utils:{getAvailableLevelSpawns:mr,hasSystemDelegation:gr},executeSystemWithExternalWallet:yr}}=useMUD(),{components:{Name:xr,Match:wr,MatchConfig:br,HeroInRotation:Sr},walletClient:vr,worldContract:Er}=hr,Ar=H$4(xr,addressToEntityID(ar||"0x00")),[_r,Cr]=reactExports.useState(Ar?Ar.value:""),kr=[...A$6([Je$2(Sr,{value:!0})])][0]??stringToHex("Golem",{size:32}),[Rr,Ir]=reactExports.useState(kr),[Nr,Pr]=reactExports.useState(!1),Tr=useCurrentPlayer(cr),Fr=!!te$5([Ye$3(pr),Je$2(wr,{matchEntity:cr})]).find(fs=>fs===Tr?.player),Ur=te$5([Ye$3(xr)]).map(fs=>g$7(xr,fs)?.value).includes(_r),Hr=H$4(br,cr)?.levelId,Or=useBurnerBalance(),Mr=useMatchRewards(cr),Lr=formatEther(Mr.entranceFee),Vr=useOrbBalance(),{isAllowed:Jr,isSeasonPassOnly:es,hasAllowList:ns}=useIsAllowed(cr),Qr=Hr?mr(Hr,cr):[],zr=async()=>{if(fr){Notification.requestPermission(),Pr(!0);try{const fs=dr&&dr.account&&gr(dr.account.address,vr.account.address),rs=[{systemId:PLAYER_REGISTER_SYSTEM_ID,functionName:"register",args:[cr,Qr[0],Rr]},{systemId:NAME_SYSTEM_ID,functionName:"setName",args:[_r]}];await yr({systemCall:"batchCall",systemId:"JoinMatch",args:[[P$2(IWorldAbi,fs?rs:[...rs,...getDelegationSystemCalls(vr.account.address)]).map(([as,ps])=>({systemId:as,callData:ps}))]]})}catch(fs){console.error(fs)}finally{Pr(!1)}}},Wr=()=>dr&&dr.account?Er.write.callFrom(a$3({abi:IWorldAbi,from:dr.account.address,systemId:LOBBY_SYSTEM_ID,functionName:"toggleReady",args:[cr]})):Er.write.callFrom(a$3({abi:IWorldAbi,from:vr.account.address,systemId:LOBBY_SYSTEM_ID,functionName:"toggleReady",args:[cr]}));let ss="";_r.length===0&&(ss="Pick a name"),_r.length>32&&(ss="Name too long"),Ur&&(ss="Name taken"),Vr<Mr.entranceFee&&(ss=`Cannot pay ${Lr}`),!Jr&&es&&(ss="Season Pass hodlers only"),!Jr&&ns&&(ss="You are not on the access list");let Xr=!1;(_r.length===0||_r.length>32||Ur&&Ar?.value!==_r)&&(Xr=!0),Vr<Mr.entranceFee&&(Xr=!0),Jr||(Xr=!0);let ts="Join - Free";return Mr.entranceFee>0n&&(ts=`Join - ${Lr}`),Xr&&(ts=ss),Nr&&(ts="Joining..."),cr?jsxRuntimeExports.jsxs("div",{children:[!Tr.player&&jsxRuntimeExports.jsx("form",{onSubmit:fs=>{fs.preventDefault(),zr()},className:"w-full",children:jsxRuntimeExports.jsxs("div",{className:"relative h-fit",children:[jsxRuntimeExports.jsx("input",{type:"text",className:"w-full py-2 px-3 rounded border border-1 border-white bg-[#F4F3F1] flex flex-row",placeholder:"Enter a name",disabled:!!(Nr||Tr?.player),value:_r,onChange:fs=>{let rs=fs.target.value;return rs.length>32&&(rs=rs.slice(0,32)),Cr(rs),!1}}),jsxRuntimeExports.jsxs("div",{style:{pointerEvents:"none",top:"calc(50% - 11px)"},className:"absolute right-3 text-ss-text-x-light uppercase",children:[ar?.slice(0,6),"...",ar?.slice(-4)]})]})}),!Tr.player&&!Xr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HeroSelect,{hero:Rr,setHero:Ir}),jsxRuntimeExports.jsx("div",{className:"h-4"})]}),jsxRuntimeExports.jsx("div",{className:"flex",children:jsxRuntimeExports.jsx(LabeledOrbInput,{label:"Your Balance",amount:Vr})}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsxs("div",{className:"flex row",children:[!Tr?.player&&jsxRuntimeExports.jsx("div",{className:"grow",children:Nr?jsxRuntimeExports.jsx(Button$1,{disabled:!0,buttonType:"secondary",className:"text-2xl w-full",children:"Joining..."}):jsxRuntimeExports.jsx(Button$1,{disabled:Xr||Nr,buttonType:"secondary",className:"w-full",onClick:()=>zr(),children:Xr?ss:ts})}),Tr.player&&!Fr&&jsxRuntimeExports.jsx("div",{className:"grow",children:jsxRuntimeExports.jsx(SendTxButton,{buttonType:"secondary",className:"w-full",network:hr,sendTx:Wr,children:"ready"})}),Fr&&jsxRuntimeExports.jsx("div",{className:"grow",children:jsxRuntimeExports.jsx(SendTxButton,{buttonType:"secondary",className:"w-full",network:hr,sendTx:Wr,children:"unready"})})]}),Or?.belowDanger&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx(SessionWalletManager,{})]})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})},JoinGame=({matchEntity:cr})=>{const{externalWorldContract:ar}=useMUD(),dr=reactExports.useRef(null),[fr,hr]=reactExports.useState(!1);reactExports.useEffect(()=>{fr&&setTimeout(()=>{hr(!1)},2e3)},[fr]);const pr=useMatchInfo(cr),mr=useIsAllowed(cr),{address:gr}=useExternalAccount();return jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsxs(Heading,{className:"flex flex-row items-center gap-x-1",children:[mr.isSeasonPassOnly&&jsxRuntimeExports.jsx(SeasonPassIcon,{}),pr.matchName]}),jsxRuntimeExports.jsx("div",{className:"w-3"}),jsxRuntimeExports.jsx("div",{className:"flex flex-row items-center bg-[#F4F3F1] hover:bg-gray border border-1 border-[#DDDAD0] rounded py-1 px-1",children:jsxRuntimeExports.jsx(ChainSVG,{onClick:()=>{dr.current&&(dr.current.select(),document.execCommand("copy"),hr(!0))}})}),jsxRuntimeExports.jsx("div",{className:"w-3"}),jsxRuntimeExports.jsx("input",{ref:dr,className:"bg-[#F4F3F1] w-24 text-ss-text-x-light",readOnly:!0,value:`${window.location.origin}${getMatchUrl(cr)}`}),jsxRuntimeExports.jsx("div",{className:"w-3"}),fr&&jsxRuntimeExports.jsx("div",{className:"text-ss-text-x-light animate-bounce",children:"Copied!"}),jsxRuntimeExports.jsx("div",{className:"flex-grow"}),jsxRuntimeExports.jsx(JoinModal,{viewOnly:!0,matchEntity:cr,children:jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",children:"Match Info"})})]}),pr?.matchConfig?.createdBy&&jsxRuntimeExports.jsx(CreatedBy,{createdBy:pr.matchConfig.createdBy}),jsxRuntimeExports.jsx("div",{className:"h-4"}),gr&&ar?jsxRuntimeExports.jsx(RegistrationForm,{matchEntity:cr,address:gr}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(OverlineSmall,{children:"register"}),jsxRuntimeExports.jsx(ConnectButton,{})]}),jsxRuntimeExports.jsx("div",{className:"h-8"})]})},CheckboxContainer=styled.div`
  display: inline-block;
  vertical-align: middle;
`,Icon=styled.svg`
  fill: none;
  stroke: white;
  strokewidth: 2px;
`,HiddenCheckbox=styled.input.attrs({type:"checkbox"})`
  border: 0;
  clip: rect(0 0 0 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
`,StyledCheckbox=styled.div`
  display: inline-block;
  width: 24px;
  height: 24px;
  transition: all 150ms;
  border: ${cr=>cr.checked?"2px solid white":"none"};

  ${Icon} {
    visibility: ${cr=>cr.checked?"visible":"hidden"};
  }
`,Checkbox$1=({onChange:cr,className:ar,checked:dr,style:fr,...hr})=>jsxRuntimeExports.jsxs(CheckboxContainer,{className:twMerge("rounded-lg",ar),children:[jsxRuntimeExports.jsx(HiddenCheckbox,{checked:dr,readOnly:!cr,...hr}),jsxRuntimeExports.jsx(StyledCheckbox,{checked:dr,className:twMerge(ar,"rounded-lg",dr?"bg-lime-600":"bg-white"),style:{transition:"all 150ms",...fr},children:jsxRuntimeExports.jsx(Icon,{viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("polyline",{points:"20 6 9 17 4 12"})})})]}),PendingIcon=({className:cr})=>jsxRuntimeExports.jsxs("svg",{className:twMerge("animate-spin w-[1em] h-[1em]",cr),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});var ButtonType=(cr=>(cr[cr.Primary=0]="Primary",cr[cr.Secondary=1]="Secondary",cr[cr.Confirm=2]="Confirm",cr[cr.Cancel=3]="Cancel",cr))(ButtonType||{});const Button=React.forwardRef(({type:cr,className:ar,pending:dr,buttonType:fr,disabled:hr,children:pr,...mr},gr)=>jsxRuntimeExports.jsx("button",{ref:gr,type:cr||"button",disabled:dr||hr,"aria-busy":dr,className:twMerge("group transition border border-solid border-black/10 disabled:grayscale-[60%] disabled:cursor-not-allowed disabled:aria-busy:cursor-wait enabled:active:translate-y-0.5 shadow px-4 py-1 rounded",fr===0&&"bg-[#E6D089] text-black/60 hover:bg-[#EDC645]",fr===1&&"bg-black-10 text-black/60 hover:bg-black/20",fr===2&&"bg-[#61B258] text-black/60 hover:bg-[#4FAA4C]",fr===3&&"bg-[#D9A3A3] text-black/60 hover:bg-[#C47B7B]",ar),...mr,children:jsxRuntimeExports.jsxs("span",{className:"inline-grid pointer-events-none overflow-hidden",children:[jsxRuntimeExports.jsx("span",{className:"row-start-1 col-start-1 transition opacity-100 translate-y-0 group-[[aria-busy=true]]:-translate-y-3 group-[[aria-busy=true]]:opacity-0",children:pr}),jsxRuntimeExports.jsx("span",{className:"row-start-1 col-start-1 transition opacity-0 translate-y-3 group-[[aria-busy=true]]:translate-y-0 group-[[aria-busy=true]]:opacity-100 flex items-center justify-center","aria-hidden":!0,children:jsxRuntimeExports.jsx(PendingIcon,{})})]})}));Button.displayName="Button";function StarSVG(){return jsxRuntimeExports.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M9.47991 1.49921C9.5222 1.39605 9.59423 1.30779 9.68683 1.24567C9.77942 1.18356 9.8884 1.15039 9.99991 1.15039C10.1114 1.15039 10.2204 1.18356 10.313 1.24567C10.4056 1.30779 10.4776 1.39605 10.5199 1.49921L12.6449 6.61021C12.6847 6.70585 12.7501 6.78866 12.8339 6.84953C12.9177 6.9104 13.0167 6.94697 13.1199 6.95521L18.6379 7.39721C19.1369 7.43721 19.3389 8.06021 18.9589 8.38521L14.7549 11.9872C14.6764 12.0544 14.6178 12.1419 14.5857 12.2402C14.5536 12.3384 14.5492 12.4436 14.5729 12.5442L15.8579 17.9292C15.8837 18.0373 15.877 18.1505 15.8385 18.2547C15.7999 18.3589 15.7314 18.4494 15.6415 18.5146C15.5517 18.5799 15.4444 18.6171 15.3335 18.6214C15.2225 18.6258 15.1126 18.5972 15.0179 18.5392L10.2929 15.6542C10.2046 15.6004 10.1033 15.572 9.99991 15.572C9.89654 15.572 9.79517 15.6004 9.70691 15.6542L4.98191 18.5402C4.88716 18.5982 4.77736 18.6268 4.66636 18.6224C4.55537 18.6181 4.44816 18.5809 4.35827 18.5156C4.26839 18.4504 4.19987 18.3599 4.16136 18.2557C4.12285 18.1515 4.11608 18.0383 4.14191 17.9302L5.42691 12.5442C5.45074 12.4436 5.44636 12.3384 5.41425 12.2401C5.38214 12.1418 5.32354 12.0543 5.24491 11.9872L1.04091 8.38521C0.95672 8.31283 0.895817 8.21716 0.865856 8.11025C0.835895 8.00334 0.838215 7.88996 0.872523 7.78436C0.906831 7.67876 0.971595 7.58567 1.05867 7.51678C1.14575 7.4479 1.25125 7.4063 1.36191 7.39721L6.87991 6.95521C6.98316 6.94697 7.08213 6.9104 7.16593 6.84953C7.24974 6.78866 7.31513 6.70585 7.35491 6.61021L9.47991 1.49921Z",fill:"#25241D",stroke:"#25241D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}const MatchLobby=({matchEntity:cr})=>{const{networkLayer:{components:{Player:ar,PlayerReady:dr,Match:fr,MatchConfig:hr,OwnedBy:pr,UnitType:mr},utils:{getLevelSpawns:gr}},localLayer:{api:{getOwnerColor:yr}}}=useMUD(),xr=useCurrentPlayer(cr),wr=useMatchInfo(cr),[br,Sr]=React.useState(5),[vr,Er]=React.useState(0),[Ar,_r]=React.useState(!1),[Cr,kr]=React.useState(),[Rr,Ir]=React.useState(0);reactExports.useEffect(()=>{const Ur=wr.matchConfig?.startTime??BigInt(0);if(Ur===BigInt(0))return;const qr=BigInt(Math.floor(Date.now()/1e3)),Hr=Number(Ur-qr);Er(Hr),!(Hr<=0||Hr>10)&&(_r(!0),Sr(Hr))},[wr,Rr]),reactExports.useEffect(()=>{const Ur=setInterval(()=>{Ir(qr=>qr+1)},1e3);return()=>{clearInterval(Ur)}},[]);const Nr=te$5([Ye$3(dr),Je$2(fr,{matchEntity:cr})]),Pr=!!Nr.find(Ur=>Ur===xr?.player),Tr=te$5([Ye$3(ar),Je$2(fr,{matchEntity:cr})]).sort((Ur,qr)=>{if(Ur===xr?.player)return-1e4;if(qr===xr?.player)return 1e4;const Hr=!!Nr.find(Mr=>Mr===Ur),Or=!!Nr.find(Mr=>Mr===qr);return Hr&&!Or?-1:!Hr&&Or?1:0}),Br=g$7(hr,cr);if(!Br)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const Fr=gr(Br.levelId),jr=Tr.length>=Fr.length;return jsxRuntimeExports.jsx("div",{className:"flex-col items-center justify-center w-full",children:Ar?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!Cr&&(br>0?jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"h-8"}),jsxRuntimeExports.jsx("span",{className:"text-black/60 uppercase",children:"Game starting in..."}),jsxRuntimeExports.jsx("div",{className:"text-9xl text-black",children:br})]}):jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"h-8"}),jsxRuntimeExports.jsx("div",{className:"text-6xl text-black",children:"Starting..."})]})),jsxRuntimeExports.jsx("div",{className:"h-4"})]}):jsxRuntimeExports.jsx("div",{className:"h-fit py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row justify-between w-full text-lg text-black/60 uppercase",children:[jsxRuntimeExports.jsx(OverlineSmall,{children:"lobby"}),jsxRuntimeExports.jsxs(OverlineSmall,{children:[Nr.length,"/",Fr.length," players ready"]})]}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsx("div",{className:"w-full space-y-2",children:Fr.map((Ur,qr)=>{const Hr=Tr[qr],Or=!!Nr.find(zr=>Hr===zr),Mr=yr(Hr),Lr=Hr===xr?.player,Vr=g$7(pr,Hr),es=[...A$6([Ye$3(mr),Je$2(pr,{value:decodeMatchEntity(Hr).entity})])][0],ns=g$7(mr,es)?.value,Qr=UnitTypeSprites[ns??0];return jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-center rounded p-2 px-3 w-full border border-1 border-white",style:{backgroundColor:Hr?Color$1(Mr.color).toString():"#F4F3F1"},children:[Hr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Checkbox$1,{checked:Or,style:Hr?{}:{backgroundColor:"grey"}}),jsxRuntimeExports.jsxs("div",{className:"w-full ml-2 overflow-hidden text-ellipsis text-xl text-black/80 flex row justify-between items-center",children:[Vr&&jsxRuntimeExports.jsx(DisplayNameUnformatted,{entity:Vr.value}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(SpriteImage,{spriteKey:Qr,colorName:Mr.name,scale:1}),Lr&&jsxRuntimeExports.jsx(StarSVG,{})]})]})]}),!Hr&&jsxRuntimeExports.jsx("div",{className:"ml-2 text-xl text-ss-text-x-light",children:"Empty Slot"})]},`player-${qr}`)})}),Cr&&Pr&&jsxRuntimeExports.jsxs("div",{className:"flex w-full flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4 rounded bg-red-800 p-3 text-center text-2xl text-red-200 w-full",children:["Error: ",Cr.toString()]}),jsxRuntimeExports.jsx(Button,{buttonType:ButtonType.Confirm,className:"mx-auto w-full p-3 text-2xl uppercase",onClick:()=>{kr(void 0),_r(!1)},children:"Try Again"})]}),!Ar&&!Cr&&jsxRuntimeExports.jsx("div",{className:"w-full",children:jr&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsxs(Caption,{children:["Game starts in ",vr," seconds if players are not ready."]})]})}),jsxRuntimeExports.jsx("div",{className:"h-4"})]})})})};function PreGame({matchEntity:cr}){const{networkLayer:{network:{initialiseWallet:ar}},localLayer:{components:{MatchStarted:dr}}}=useMUD(),fr=useMatchInfo(cr),hr=H$4(dr,cr)?.value,mr=useAccount().address;return reactExports.useEffect(()=>{mr&&ar(mr)},[mr,ar]),fr.matchConfig?hr?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsxs(ClickWrapper,{className:"fixed h-screen w-screen",children:[jsxRuntimeExports.jsx("div",{style:{zIndex:-1},className:"absolute top-0 left-0 w-screen h-screen bg-[#181710]/60 -ml-6 -mt-6"}),jsxRuntimeExports.jsxs(Card,{primary:!0,className:"relative w-[500px] max-h-screen overflow-y-scroll overflow-x-hidden mx-auto top-1/2 -translate-y-1/2 flex flex-col items-center",children:[jsxRuntimeExports.jsx(JoinGame,{matchEntity:cr}),jsxRuntimeExports.jsx("div",{style:{width:"calc(100% + 48px)"},className:"h-[2px] w-full bg-ss-stroke"}),jsxRuntimeExports.jsx(MatchLobby,{matchEntity:cr})]})]}):jsxRuntimeExports.jsx(ClickWrapper,{className:"fixed h-screen w-screen",children:jsxRuntimeExports.jsx(Card,{primary:!0,className:"relative w-[500px] mx-auto top-1/2 -translate-y-1/2 flex flex-col items-center",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(OverlineLarge,{children:"Invalid match"}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx("div",{children:"This match has either not been created yet or it has been cancelled by the host."}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx("div",{children:"Please return home to continue playing Sky Strife."}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx("a",{href:"/",children:jsxRuntimeExports.jsx(Button$1,{className:"w-full",buttonType:"secondary",children:"Return home"})})]})})})}function useSyncStatus(){const{networkLayer:{network:{clock:cr,storedBlockLogs$:ar}}}=useMUD(),[dr,fr]=reactExports.useState(0),[hr,pr]=reactExports.useState(0);return reactExports.useEffect(()=>{const mr=ar.subscribe(gr=>{fr(Number(gr.blockNumber)),pr(cr.currentTime)});return()=>{mr.unsubscribe()}},[]),{lastBlockSyncedAt:hr,latestSyncedBlockNumber:dr}}function SyncStatus(){const{networkLayer:{network:{clock:cr}}}=useMUD(),{lastBlockSyncedAt:ar,latestSyncedBlockNumber:dr}=useSyncStatus(),[fr,hr]=reactExports.useState(),[pr,mr]=reactExports.useState(0);reactExports.useEffect(()=>{const yr=setInterval(()=>{mr(xr=>xr+1)},1e3);return()=>clearInterval(yr)},[]),reactExports.useEffect(()=>{if(!ar)return;const yr=cr.currentTime-ar;yr<=5e3?hr("ok"):yr<1e4?hr("concerning"):hr("bad")},[dr,ar,pr]);const gr=fr==="ok"?"green":fr==="concerning"?"yellow":"red";return jsxRuntimeExports.jsxs(Body,{className:"fixed text-black bg-ss-bg-0 bottom-4 right-4 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-pulse rounded-full w-4 h-4 mr-2",style:{backgroundColor:gr}}),jsxRuntimeExports.jsx(Caption,{className:"text-black",children:fr==="ok"?"Synced":fr==="concerning"?"Syncing":"Desynced (Consider Reloading)"})]}),jsxRuntimeExports.jsxs("span",{className:"tabular-nums",children:["latest block: ",dr]})]})}function PlayerNameHover(){const{networkLayer:{components:{SpawnPoint:cr},utils:{getOwningPlayer:ar}},phaserLayer:{components:{HoverHighlight:dr},scenes:{Main:{camera:{phaserCamera:fr}}}},localLayer:{components:{LocalPosition:hr},api:{getPlayerInfo:pr}}}=useMUD(),mr=H$4(dr,f$8),yr=te$5([Je$2(hr,{x:mr?.x,y:mr?.y})]).find(vr=>le$3(cr,vr)),xr=yr?ar(yr):null,wr=xr?pr(xr):null,br=wr?wr.name:"",Sr=useTileCoordToScreenCoord({x:mr?.x??0,y:mr?.y??0});return!yr||!br?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx(Card,{style:{position:"absolute",left:`${Sr.x}px`,transform:"translate(-45%, 0)",top:`${Sr.y+TILE_HEIGHT*1.2}px`,maxWidth:`${TILE_WIDTH*fr.zoom*2}px`,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},className:"px-2 py-1",children:br})}var FileSaver_min={exports:{}};(function(cr,ar){(function(dr,fr){fr()})(commonjsGlobal,function(){function dr(xr,wr){return typeof wr>"u"?wr={autoBom:!1}:typeof wr!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),wr={autoBom:!wr}),wr.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(xr.type)?new Blob(["\uFEFF",xr],{type:xr.type}):xr}function fr(xr,wr,br){var Sr=new XMLHttpRequest;Sr.open("GET",xr),Sr.responseType="blob",Sr.onload=function(){yr(Sr.response,wr,br)},Sr.onerror=function(){console.error("could not download file")},Sr.send()}function hr(xr){var wr=new XMLHttpRequest;wr.open("HEAD",xr,!1);try{wr.send()}catch{}return 200<=wr.status&&299>=wr.status}function pr(xr){try{xr.dispatchEvent(new MouseEvent("click"))}catch{var wr=document.createEvent("MouseEvents");wr.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),xr.dispatchEvent(wr)}}var mr=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof globalThis=="object"&&globalThis.global===globalThis?globalThis:void 0,gr=mr.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),yr=mr.saveAs||(typeof window!="object"||window!==mr?function(){}:"download"in HTMLAnchorElement.prototype&&!gr?function(xr,wr,br){var Sr=mr.URL||mr.webkitURL,vr=document.createElement("a");wr=wr||xr.name||"download",vr.download=wr,vr.rel="noopener",typeof xr=="string"?(vr.href=xr,vr.origin===location.origin?pr(vr):hr(vr.href)?fr(xr,wr,br):pr(vr,vr.target="_blank")):(vr.href=Sr.createObjectURL(xr),setTimeout(function(){Sr.revokeObjectURL(vr.href)},4e4),setTimeout(function(){pr(vr)},0))}:"msSaveOrOpenBlob"in navigator?function(xr,wr,br){if(wr=wr||xr.name||"download",typeof xr!="string")navigator.msSaveOrOpenBlob(dr(xr,br),wr);else if(hr(xr))fr(xr,wr,br);else{var Sr=document.createElement("a");Sr.href=xr,Sr.target="_blank",setTimeout(function(){pr(Sr)})}}:function(xr,wr,br,Sr){if(Sr=Sr||open("","_blank"),Sr&&(Sr.document.title=Sr.document.body.innerText="downloading..."),typeof xr=="string")return fr(xr,wr,br);var vr=xr.type==="application/octet-stream",Er=/constructor/i.test(mr.HTMLElement)||mr.safari,Ar=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ar||vr&&Er||gr)&&typeof FileReader<"u"){var _r=new FileReader;_r.onloadend=function(){var Rr=_r.result;Rr=Ar?Rr:Rr.replace(/^data:[^;]*;/,"data:attachment/file;"),Sr?Sr.location.href=Rr:location=Rr,Sr=null},_r.readAsDataURL(xr)}else{var Cr=mr.URL||mr.webkitURL,kr=Cr.createObjectURL(xr);Sr?Sr.location=kr:location.href=kr,Sr=null,setTimeout(function(){Cr.revokeObjectURL(kr)},4e4)}});mr.saveAs=yr.saveAs=yr,cr.exports=yr})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports,__awaiter$4=globalThis&&globalThis.__awaiter||function(cr,ar,dr,fr){function hr(pr){return pr instanceof dr?pr:new dr(function(mr){mr(pr)})}return new(dr||(dr=Promise))(function(pr,mr){function gr(wr){try{xr(fr.next(wr))}catch(br){mr(br)}}function yr(wr){try{xr(fr.throw(wr))}catch(br){mr(br)}}function xr(wr){wr.done?pr(wr.value):hr(wr.value).then(gr,yr)}xr((fr=fr.apply(cr,ar||[])).next())})};const newLine=`\r
`,raf=typeof requestAnimationFrame=="function"?requestAnimationFrame:process.nextTick,makeWrapper=cr=>ar=>`${cr}${ar}${cr}`,makeResolver=(cr,ar)=>dr=>{ar&&dr.push(""),cr(dr.join(newLine))},identityMapping=(cr,ar)=>cr.reduce((dr,fr)=>(dr[fr]=fr,dr),ar),extractHeaderFromData=cr=>cr.reduce((ar,dr)=>Array.isArray(dr)?ar:identityMapping(Object.keys(dr),ar),{}),extractHeaderFromColumns=cr=>cr.reduce((ar,dr)=>{var fr;return typeof dr=="string"?ar[dr]=dr:ar[dr.id]=(fr=dr.displayName)!==null&&fr!==void 0?fr:dr.id,ar},{});function toChunks(cr,ar){return[...Array(Math.ceil(cr.length/ar))].reduce((dr,fr,hr)=>{const pr=hr*ar;return dr.concat([cr.slice(pr,pr+ar)])},[])}const createChunkProcessor=(cr,ar,dr,fr,hr,pr,mr)=>{const gr=toChunks(fr,mr);let yr=0;return function xr(){if(yr>=gr.length){cr(dr);return}const wr=gr[yr];yr+=1,wr.map(br=>Array.isArray(br)?br:hr.map(Sr=>{var vr;return(vr=br[Sr])!==null&&vr!==void 0?vr:""})).forEach(br=>{dr.push(br.map(ar).join(pr))}),raf(xr)}};function csv({columns:cr,datas:ar,separator:dr=",",noHeader:fr=!1,wrapColumnChar:hr="",newLineAtEnd:pr=!1,chunkSize:mr=1e3}){return __awaiter$4(this,void 0,void 0,function*(){return new Promise((gr,yr)=>__awaiter$4(this,void 0,void 0,function*(){const xr=makeResolver(gr,pr),wr=makeWrapper(hr);try{if(ar=typeof ar=="function"?yield ar():yield ar,!Array.isArray(ar))return gr();const br=cr?extractHeaderFromColumns(cr):extractHeaderFromData(ar),Sr=[];if(!fr){const Ar=Object.values(br);Ar.length>0&&Sr.push(Ar.map(wr).join(dr))}const vr=Object.keys(br),Er=createChunkProcessor(xr,wr,Sr,ar,vr,dr,mr);raf(Er)}catch(br){return yr(br)}}))})}var __awaiter$3=globalThis&&globalThis.__awaiter||function(cr,ar,dr,fr){function hr(pr){return pr instanceof dr?pr:new dr(function(mr){mr(pr)})}return new(dr||(dr=Promise))(function(pr,mr){function gr(wr){try{xr(fr.next(wr))}catch(br){mr(br)}}function yr(wr){try{xr(fr.throw(wr))}catch(br){mr(br)}}function xr(wr){wr.done?pr(wr.value):hr(wr.value).then(gr,yr)}xr((fr=fr.apply(cr,ar||[])).next())})},__rest$1=globalThis&&globalThis.__rest||function(cr,ar){var dr={};for(var fr in cr)Object.prototype.hasOwnProperty.call(cr,fr)&&ar.indexOf(fr)<0&&(dr[fr]=cr[fr]);if(cr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var hr=0,fr=Object.getOwnPropertySymbols(cr);hr<fr.length;hr++)ar.indexOf(fr[hr])<0&&Object.prototype.propertyIsEnumerable.call(cr,fr[hr])&&(dr[fr[hr]]=cr[fr[hr]]);return dr};class CsvDownload extends reactExports.Component{constructor(){super(...arguments),this.handleClick=()=>__awaiter$3(this,void 0,void 0,function*(){const{suffix:ar,prefix:dr,bom:fr,extension:hr,disabled:pr,meta:mr,separator:gr,handleError:yr,handleEmpty:xr}=this.props;if(pr)return;let{filename:wr}=this.props,br;try{br=yield csv(this.props)}catch(_r){return yr?.(_r)}if(!br){if(xr)return xr();br=""}const Sr=fr!==!1?"\uFEFF":"",vr=mr?`sep=${gr}\r
`:"",Er=hr||".csv";wr.indexOf(Er)===-1&&(wr+=Er),ar&&(wr=typeof ar=="string"||typeof ar=="number"?wr.replace(Er,`_${ar}${Er}`):wr.replace(Er,`_${new Date().getTime()}${Er}`)),dr&&(wr=typeof dr=="string"||typeof dr=="number"?`${dr}_${wr}`:`${new Date().getTime()}_${wr}`);const Ar=new Blob([`${Sr}${vr}${br}`],{type:"text/csv;charset=utf-8"});FileSaver_minExports.saveAs(Ar,wr)})}render(){const ar=this.props,{children:dr,text:fr,disabled:hr,bom:pr,filename:mr,extension:gr,prefix:yr,suffix:xr,meta:wr,handleError:br,handleEmpty:Sr,columns:vr,datas:Er,separator:Ar,noHeader:_r,wrapColumnChar:Cr,newLineAtEnd:kr,chunkSize:Rr}=ar,Ir=__rest$1(ar,["children","text","disabled","bom","filename","extension","prefix","suffix","meta","handleError","handleEmpty","columns","datas","separator","noHeader","wrapColumnChar","newLineAtEnd","chunkSize"]);return typeof dr>"u"?reactExports.createElement("button",Object.assign({type:"button"},Ir,{onClick:this.handleClick,disabled:hr}),fr||"Download"):reactExports.createElement("div",Object.assign({role:"button",tabIndex:0},Ir,{onClick:this.handleClick,onKeyPress:this.handleClick}),dr)}}function TransactionDebug(){const{networkLayer:{components:{Transaction:cr},network:{matchEntity:ar,playerEntity:dr}}}=useMUD(),[fr,hr]=reactExports.useState(!1);reactExports.useEffect(()=>{const xr=wr=>{wr.key==="T"&&hr(br=>!br)};return window.addEventListener("keydown",xr),()=>{window.removeEventListener("keydown",xr)}},[]);const pr=te$5([Ye$3(cr)]),mr=reactExports.useMemo(()=>pr.reduce((xr,wr)=>{const br=g$7(cr,wr);if(!br)return xr;const Sr=br.systemId;return xr[Sr]||(xr[Sr]=[]),xr[Sr].push(br),xr},{}),[cr,pr]),gr=Object.entries(mr).map(([xr,wr])=>{const br=i$5(...wr.map(Er=>Er.gasEstimate??0n)),Sr=wr.filter(Er=>Er.status==="completed").length,vr=wr.filter(Er=>Er.status==="reverted").length;return jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsxs("div",{children:["System ID: ",xr]}),jsxRuntimeExports.jsxs("div",{children:["Max Gas Estimate: ",br.toLocaleString()]}),jsxRuntimeExports.jsxs("div",{children:["Success Rate: ",(Sr/(Sr+vr)).toFixed(2)]})]},xr)}),yr=pr.reduce((xr,wr)=>{const br=g$7(cr,wr);if(!br||br.status!=="completed")return xr;const Sr=(br.completedTimestamp??0n)-(br.submittedTimestamp??0n);return xr+Sr},0n)/(BigInt(pr.filter(xr=>g$7(cr,xr)?.status==="completed").length)||1n);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:fr&&jsxRuntimeExports.jsx(ClickWrapper,{className:"fixed right-0 top-0 z-100 h-screen w-1/3 text-white bg-[#1b1c20]",children:jsxRuntimeExports.jsxs("div",{className:"h-2/3",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 overflow-y-scroll",children:[jsxRuntimeExports.jsx(Heading,{className:"text-white",children:"Transaction Debug"}),gr,pr.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsxs("div",{children:["Mean Response Time: ",yr.toLocaleString()]})})]}),jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx(CsvDownload,{datas:()=>pr.map(wr=>de$2(cr,wr)).map(wr=>({systemCall:wr.systemCall,gasEstimate:wr.gasEstimate?.toString(),manualGasEstimate:wr.manualGasEstimate.toString(),status:wr.status,error:wr.error,hash:wr.hash,responseTime:((wr.completedTimestamp??0n)-(wr.submittedTimestamp??0n)).toString(),submittedBlock:wr.submittedBlock?.toString(),completedBlock:wr.completedBlock?.toString(),completedTimestamp:wr.completedTimestamp?.toString()})),filename:`${dr.slice(dr.length-9,dr.length-1)}-match-${ar}-transaction-debug`,children:jsxRuntimeExports.jsx("button",{className:"text-white border border-white rounded p-2",children:"Download Transactions"})})})]})})})}const FullscreenButton=()=>{const{phaserLayer:{api:{mapInteraction:{mapInteractionEnabled:cr}}}}=useMUD(),[ar,dr]=reactExports.useState(!1),[fr,hr]=reactExports.useState(!0),[pr,mr]=reactExports.useState(!1),gr=reactExports.useCallback(wr=>{!wr&&!cr()||(ar?document.exitFullscreen():document.documentElement.requestFullscreen({navigationUI:"hide"}))},[ar,cr]);reactExports.useEffect(()=>{const wr=()=>{dr(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",wr),()=>{document.removeEventListener("fullscreenchange",wr)}},[]),reactExports.useEffect(()=>{const wr=br=>{br.key===" "&&gr()};return document.addEventListener("keydown",wr),()=>{document.removeEventListener("keydown",wr)}},[gr]),reactExports.useEffect(()=>{if(ar){hr(!1),mr(!0);const wr=setTimeout(()=>{mr(!1)},1e4);return()=>{clearTimeout(wr),mr(!1)}}else return()=>{mr(!1)}},[ar]);const yr=({strokeColor:wr})=>jsxRuntimeExports.jsx("svg",{className:"mx-auto",width:"24",height:"24",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M6 6V1.5M6 6H1.5M6 6L0.75 0.75M6 12V16.5M6 12H1.5M6 12L0.75 17.25M12 6H16.5M12 6V1.5M12 6L17.25 0.75M12 12H16.5M12 12V16.5M12 12L17.25 17.25",stroke:wr,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),xr=({strokeColor:wr})=>jsxRuntimeExports.jsx("svg",{className:"mx-auto",width:"24",height:"24",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M0.75 0.75V5.25M0.75 0.75H5.25M0.75 0.75L6 6M0.75 17.25V12.75M0.75 17.25H5.25M0.75 17.25L6 12M17.25 0.75H12.75M17.25 0.75V5.25M17.25 0.75L12 6M17.25 17.25H12.75M17.25 17.25V12.75M17.25 17.25L12 12",stroke:wr,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[fr&&jsxRuntimeExports.jsx(ClickWrapper,{className:"fixed z-100 w-screen h-screen top-0 left-0 bg-black/50 flex flex-col items-center justify-around",children:jsxRuntimeExports.jsxs(Card,{className:"mx-auto w-[480px] flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsx(Heading,{className:"uppercase text-left w-full",children:"fullscreen mode"}),jsxRuntimeExports.jsx(Body,{children:"Sky Strife is best played in fullscreen. Press Spacebar to toggle fullscreen mode."}),jsxRuntimeExports.jsx("div",{className:"h-6"}),jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-around",children:[jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",onClick:()=>hr(!1),children:"skip"}),jsxRuntimeExports.jsx("div",{className:"w-4"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",onClick:()=>{document.documentElement.requestFullscreen({navigationUI:"hide"})},className:"uppercase grow",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[xr({strokeColor:"black"})," ",jsxRuntimeExports.jsx("div",{className:"w-4"})," ",jsxRuntimeExports.jsx("span",{children:" Enter Fullscreen (spacebar)"})]})})]})]})}),pr&&jsxRuntimeExports.jsxs("div",{className:"fixed w-screen h-screen top-0 left-0 flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"grow"}),jsxRuntimeExports.jsxs("div",{className:"rounded-lg bg-black/60 text-white/70 p-3",children:["Use ",jsxRuntimeExports.jsx("span",{className:"font-bold text-white",children:"CTRL + ENTER"})," or"," ",jsxRuntimeExports.jsx("span",{className:"font-bold text-white",children:"SPACEBAR"})," to toggle fullscreen."]}),jsxRuntimeExports.jsx("div",{className:"h-4"})]}),jsxRuntimeExports.jsx(ClickWrapper,{onClick:()=>gr(!0),children:jsxRuntimeExports.jsx(Card,{primary:!0,className:"w-[40px] h-[40px] p-0 flex flex-row items-center",children:ar?yr({strokeColor:"#5D5D4C"}):xr({strokeColor:"#5D5D4C"})})})]})},SettingsButton=()=>{const{localLayer:{components:{Preferences},api:{persistPreferences}}}=useMUD(),[menuVisible,setMenuVisible]=reactExports.useState(!1),ref=reactExports.useRef(null),[pluginCode,setPluginCode]=useLocalStorageState("pluginCode",{defaultValue:""}),currentPrefs=H$4(Preferences,f$8);return useOnClickOutside(ref,()=>setMenuVisible(!1)),reactExports.useEffect(()=>{if(currentPrefs)return;const cr=localStorage.getItem("preferences");cr?E$5(Preferences,f$8,JSON.parse(cr)):E$5(Preferences,f$8,{hideTutorial:!1,muteMusic:!1,showPreferences:!1,musicVolume:50,disableClouds:!1,disableBackground:!1})},[Preferences,currentPrefs]),currentPrefs?jsxRuntimeExports.jsxs("div",{children:[menuVisible&&jsxRuntimeExports.jsx(ClickWrapper,{className:"fixed top-0 left-0 flex h-screen w-screen flex-col items-center justify-around bg-black bg-opacity-50",children:jsxRuntimeExports.jsx("div",{ref,children:jsxRuntimeExports.jsxs(Card,{primary:!0,className:"flex flex-col justify-center items-left w-[400px]",children:[jsxRuntimeExports.jsx("div",{className:"my-3 text-4xl",children:"Sound"}),jsxRuntimeExports.jsxs("label",{className:"flex flex-row items-center",children:[jsxRuntimeExports.jsx("h2",{children:"Mute Music"}),jsxRuntimeExports.jsx("input",{className:"ml-2",type:"checkbox",checked:currentPrefs.muteMusic,onChange:cr=>{persistPreferences({...currentPrefs,muteMusic:cr.target.checked})}})]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("h2",{children:"Music Volume"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",value:currentPrefs.musicVolume,onChange:cr=>persistPreferences({...currentPrefs,musicVolume:parseInt(cr.target.value)})})]}),jsxRuntimeExports.jsx("div",{className:"my-3 text-4xl",children:"Graphics"}),jsxRuntimeExports.jsxs("label",{className:"flex flex-row items-center",children:[jsxRuntimeExports.jsx("h2",{children:"Disable Clouds"}),jsxRuntimeExports.jsx("input",{className:"ml-2",type:"checkbox",checked:currentPrefs.disableClouds,onChange:cr=>persistPreferences({...currentPrefs,disableClouds:cr.target.checked})})]}),jsxRuntimeExports.jsxs("label",{className:"flex flex-row items-center",children:[jsxRuntimeExports.jsx("h2",{children:"Disable Background"}),jsxRuntimeExports.jsx("input",{className:"ml-2",type:"checkbox",checked:currentPrefs.disableBackground,onChange:cr=>persistPreferences({...currentPrefs,disableBackground:cr.target.checked})})]}),jsxRuntimeExports.jsx("div",{className:"my-3 text-4xl",children:"Plugin"}),jsxRuntimeExports.jsx("textarea",{rows:10,value:pluginCode,onChange:cr=>setPluginCode(cr.target.value)}),jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",className:"mt-6 w-full h-fit",onClick:()=>{const vars={...recs,...window.components,...window.layers},assignVars=Object.keys(vars).map(cr=>`const ${cr} = vars["${cr}"]; `).join(""),evalString=`
                  (() => {
                    ${assignVars}
                    ${pluginCode}
                  })()
                  `;eval(evalString)},children:"Run Plugin"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",className:"mt-6 w-full h-fit",onClick:()=>{setMenuVisible(!1)},children:"Back"})]})})}),jsxRuntimeExports.jsx(ClickWrapper,{onClick:()=>setMenuVisible(cr=>!cr),children:jsxRuntimeExports.jsx(Card,{primary:!0,className:"w-[40px] h-[40px] p-2",children:jsxRuntimeExports.jsx("div",{className:"flex flex-row items-center",children:jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M2.5 10C2.5 11.9891 3.29018 13.8968 4.6967 15.3033C6.10322 16.7098 8.01088 17.5 10 17.5C11.9891 17.5 13.8968 16.7098 15.3033 15.3033C16.7098 13.8968 17.5 11.9891 17.5 10M2.5 10C2.5 8.0109 3.29018 6.10325 4.6967 4.69672C6.10322 3.2902 8.01088 2.50002 10 2.50002C11.9891 2.50002 13.8968 3.2902 15.3033 4.69672C16.7098 6.10325 17.5 8.0109 17.5 10M2.5 10H1M17.5 10H19M17.5 10H10L5.5 2.20502M1.543 13.077L2.953 12.564M17.048 7.43402L18.458 6.92102M3.106 15.785L4.256 14.821M15.746 5.17902L16.895 4.21502M5.501 17.795L6.251 16.495L10.002 10M13.751 3.50502L14.501 2.20502M8.438 18.863L8.698 17.386M11.303 2.61402L11.563 1.13702M11.563 18.863L11.303 17.386M8.698 2.61402L8.438 1.13702M14.5 17.794L13.75 16.495M16.894 15.785L15.745 14.821M4.256 5.17802L3.106 4.21402M18.458 13.078L17.048 12.565M2.954 7.43502L1.544 6.92102",stroke:"#5D5D4C",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})})})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})};function TutorialButton(){return jsxRuntimeExports.jsx(ClickWrapper,{children:jsxRuntimeExports.jsx(Card,{primary:!0,className:"w-[40px] h-[40px] p-2",children:jsxRuntimeExports.jsx("a",{href:HOW_TO_PLAY_URL,target:"_blank",rel:"noreferrer",children:jsxRuntimeExports.jsx("div",{className:"flex flex-row items-center",children:jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M10 3.04201C8.35161 1.56337 6.2144 0.746952 4 0.750009C2.948 0.750009 1.938 0.930009 1 1.26201V15.512C1.96362 15.172 2.97816 14.9989 4 15C6.305 15 8.408 15.867 10 17.292M10 3.04201C11.6483 1.56328 13.7856 0.746857 16 0.750009C17.052 0.750009 18.062 0.930009 19 1.26201V15.512C18.0364 15.172 17.0218 14.9989 16 15C13.7856 14.997 11.6484 15.8134 10 17.292M10 3.04201V17.292",stroke:"#5D5D4C",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})})})})}function OptionsBar(){return jsxRuntimeExports.jsxs("div",{className:"float-right flex",children:[jsxRuntimeExports.jsx(SettingsButton,{}),jsxRuntimeExports.jsx("div",{className:"w-4"}),jsxRuntimeExports.jsx(FullscreenButton,{}),jsxRuntimeExports.jsx("div",{className:"w-4"}),jsxRuntimeExports.jsx(TutorialButton,{})]})}function TopUpButton(){const{externalWalletClient:cr,network:{walletClient:ar}}=useAmalgema();return jsxRuntimeExports.jsx(PromiseButton,{promise:async()=>{if(!cr||!cr.account)throw new Error("No external wallet connected");await cr.sendTransaction({chain:ar.chain,account:cr.account,to:ar.account.address,value:parseEther("0.001")})},buttonType:"primary",className:"grow w-full",children:"top up session wallet"})}function SessionWallet(){const{network:{matchEntity:cr}}=useAmalgema(),ar=useBurnerBalance(),dr=useMainWalletBalance(),fr=useExternalInMatch(cr||"0");return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:fr&&ar?.belowMinimum&&jsxRuntimeExports.jsxs(Card,{className:"w-fit py-2 px-3 pointer-events-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"rounded-full bg-red-600 h-3 w-3 animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"w-2"}),jsxRuntimeExports.jsx(OverlineLarge,{style:{fontWeight:400,fontSize:"14px"},className:"text-ss-text-light",children:"session wallet balance"}),jsxRuntimeExports.jsx("div",{className:"w-2"}),jsxRuntimeExports.jsxs(OverlineLarge,{style:{fontWeight:500,fontSize:"14px"},className:"text-ss-text-default",children:[parseFloat(ar.formatted??"0").toFixed(6)," ETH"]})]}),jsxRuntimeExports.jsx("div",{className:"h-2"}),jsxRuntimeExports.jsx(TopUpButton,{}),jsxRuntimeExports.jsxs(Modal,{open:ar.belowDanger,title:"no more session wallet funds",trigger:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),footer:jsxRuntimeExports.jsxs("div",{className:"flex w-full space-x-2",children:[jsxRuntimeExports.jsx("a",{href:"/",className:"grow",children:jsxRuntimeExports.jsx(Button$1,{buttonType:"danger",className:"w-full",children:"quit match"})}),jsxRuntimeExports.jsx(TopUpButton,{})]}),children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row space-x-6",children:[jsxRuntimeExports.jsx(EthInput,{amount:dr.value?dr.value:0n,className:"pr-2",label:"Main Wallet"}),jsxRuntimeExports.jsx(EthInput,{amount:ar.value?ar.value:0n,className:"pr-2",label:"Session Wallet"})]}),jsxRuntimeExports.jsx("div",{className:"h-4"}),ar.belowDanger&&jsxRuntimeExports.jsx(Body,{children:"You do not have enough ETH in your session wallet to play this match of Sky Strife. If you would like to continue playing, you must top up your session wallet or transfer a custom amount."})]})]})})}function TopRight(){return jsxRuntimeExports.jsxs("div",{className:"absolute right-0 top-0",children:[jsxRuntimeExports.jsx(SessionWallet,{}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx(OptionsBar,{})]})}const version$1="6.9.0";function checkType(cr,ar,dr){const fr=ar.split("|").map(pr=>pr.trim());for(let pr=0;pr<fr.length;pr++)switch(ar){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof cr===ar)return}const hr=new Error(`invalid value for type ${ar}`);throw hr.code="INVALID_ARGUMENT",hr.argument=`value.${dr}`,hr.value=cr,hr}async function resolveProperties(cr){const ar=Object.keys(cr);return(await Promise.all(ar.map(fr=>Promise.resolve(cr[fr])))).reduce((fr,hr,pr)=>(fr[ar[pr]]=hr,fr),{})}function defineProperties(cr,ar,dr){for(let fr in ar){let hr=ar[fr];const pr=dr?dr[fr]:null;pr&&checkType(hr,pr,fr),Object.defineProperty(cr,fr,{enumerable:!0,value:hr,writable:!1})}}function stringify(cr){if(cr==null)return"null";if(Array.isArray(cr))return"[ "+cr.map(stringify).join(", ")+" ]";if(cr instanceof Uint8Array){const ar="0123456789abcdef";let dr="0x";for(let fr=0;fr<cr.length;fr++)dr+=ar[cr[fr]>>4],dr+=ar[cr[fr]&15];return dr}if(typeof cr=="object"&&typeof cr.toJSON=="function")return stringify(cr.toJSON());switch(typeof cr){case"boolean":case"symbol":return cr.toString();case"bigint":return BigInt(cr).toString();case"number":return cr.toString();case"string":return JSON.stringify(cr);case"object":{const ar=Object.keys(cr);return ar.sort(),"{ "+ar.map(dr=>`${stringify(dr)}: ${stringify(cr[dr])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function makeError(cr,ar,dr){let fr=cr;{const pr=[];if(dr){if("message"in dr||"code"in dr||"name"in dr)throw new Error(`value will overwrite populated values: ${stringify(dr)}`);for(const mr in dr){if(mr==="shortMessage")continue;const gr=dr[mr];pr.push(mr+"="+stringify(gr))}}pr.push(`code=${ar}`),pr.push(`version=${version$1}`),pr.length&&(cr+=" ("+pr.join(", ")+")")}let hr;switch(ar){case"INVALID_ARGUMENT":hr=new TypeError(cr);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":hr=new RangeError(cr);break;default:hr=new Error(cr)}return defineProperties(hr,{code:ar}),dr&&Object.assign(hr,dr),hr.shortMessage==null&&defineProperties(hr,{shortMessage:fr}),hr}function assert$9(cr,ar,dr,fr){if(!cr)throw makeError(ar,dr,fr)}function assertArgument(cr,ar,dr,fr){assert$9(cr,ar,"INVALID_ARGUMENT",{argument:dr,value:fr})}const _normalizeForms=["NFD","NFC","NFKD","NFKC"].reduce((cr,ar)=>{try{if("test".normalize(ar)!=="test")throw new Error("bad");if(ar==="NFD"){const dr=String.fromCharCode(233).normalize("NFD"),fr=String.fromCharCode(101,769);if(dr!==fr)throw new Error("broken")}cr.push(ar)}catch{}return cr},[]);function assertNormalize(cr){assert$9(_normalizeForms.indexOf(cr)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:cr}})}function assertPrivate(cr,ar,dr){if(dr==null&&(dr=""),cr!==ar){let fr=dr,hr="new";dr&&(fr+=".",hr+=" "+dr),assert$9(!1,`private constructor; use ${fr}from* methods`,"UNSUPPORTED_OPERATION",{operation:hr})}}function _getBytes(cr,ar,dr){if(cr instanceof Uint8Array)return dr?new Uint8Array(cr):cr;if(typeof cr=="string"&&cr.match(/^0x([0-9a-f][0-9a-f])*$/i)){const fr=new Uint8Array((cr.length-2)/2);let hr=2;for(let pr=0;pr<fr.length;pr++)fr[pr]=parseInt(cr.substring(hr,hr+2),16),hr+=2;return fr}assertArgument(!1,"invalid BytesLike value",ar||"value",cr)}function getBytes(cr,ar){return _getBytes(cr,ar,!1)}function getBytesCopy(cr,ar){return _getBytes(cr,ar,!0)}function isHexString(cr,ar){return!(typeof cr!="string"||!cr.match(/^0x[0-9A-Fa-f]*$/)||typeof ar=="number"&&cr.length!==2+2*ar||ar===!0&&cr.length%2!==0)}function isBytesLike(cr){return isHexString(cr,!0)||cr instanceof Uint8Array}const HexCharacters="0123456789abcdef";function hexlify(cr){const ar=getBytes(cr);let dr="0x";for(let fr=0;fr<ar.length;fr++){const hr=ar[fr];dr+=HexCharacters[(hr&240)>>4]+HexCharacters[hr&15]}return dr}function concat$4(cr){return"0x"+cr.map(ar=>hexlify(ar).substring(2)).join("")}function dataLength(cr){return isHexString(cr,!0)?(cr.length-2)/2:getBytes(cr).length}function dataSlice(cr,ar,dr){const fr=getBytes(cr);return dr!=null&&dr>fr.length&&assert$9(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:fr,length:fr.length,offset:dr}),hexlify(fr.slice(ar??0,dr??fr.length))}function zeroPad(cr,ar,dr){const fr=getBytes(cr);assert$9(ar>=fr.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(fr),length:ar,offset:ar+1});const hr=new Uint8Array(ar);return hr.fill(0),dr?hr.set(fr,ar-fr.length):hr.set(fr,0),hexlify(hr)}function zeroPadValue(cr,ar){return zeroPad(cr,ar,!0)}const BN_0$5=BigInt(0),BN_1$2=BigInt(1),maxValue=9007199254740991;function toTwos(cr,ar){let dr=getBigInt(cr,"value");const fr=BigInt(getNumber(ar,"width")),hr=BN_1$2<<fr-BN_1$2;if(dr<BN_0$5){dr=-dr,assert$9(dr<=hr,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:cr});const pr=(BN_1$2<<fr)-BN_1$2;return(~dr&pr)+BN_1$2}else assert$9(dr<hr,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:cr});return dr}function mask(cr,ar){const dr=getUint(cr,"value"),fr=BigInt(getNumber(ar,"bits"));return dr&(BN_1$2<<fr)-BN_1$2}function getBigInt(cr,ar){switch(typeof cr){case"bigint":return cr;case"number":return assertArgument(Number.isInteger(cr),"underflow",ar||"value",cr),assertArgument(cr>=-maxValue&&cr<=maxValue,"overflow",ar||"value",cr),BigInt(cr);case"string":try{if(cr==="")throw new Error("empty string");return cr[0]==="-"&&cr[1]!=="-"?-BigInt(cr.substring(1)):BigInt(cr)}catch(dr){assertArgument(!1,`invalid BigNumberish string: ${dr.message}`,ar||"value",cr)}}assertArgument(!1,"invalid BigNumberish value",ar||"value",cr)}function getUint(cr,ar){const dr=getBigInt(cr,ar);return assert$9(dr>=BN_0$5,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:cr}),dr}const Nibbles$1="0123456789abcdef";function toBigInt(cr){if(cr instanceof Uint8Array){let ar="0x0";for(const dr of cr)ar+=Nibbles$1[dr>>4],ar+=Nibbles$1[dr&15];return BigInt(ar)}return getBigInt(cr)}function getNumber(cr,ar){switch(typeof cr){case"bigint":return assertArgument(cr>=-maxValue&&cr<=maxValue,"overflow",ar||"value",cr),Number(cr);case"number":return assertArgument(Number.isInteger(cr),"underflow",ar||"value",cr),assertArgument(cr>=-maxValue&&cr<=maxValue,"overflow",ar||"value",cr),cr;case"string":try{if(cr==="")throw new Error("empty string");return getNumber(BigInt(cr),ar)}catch(dr){assertArgument(!1,`invalid numeric string: ${dr.message}`,ar||"value",cr)}}assertArgument(!1,"invalid numeric value",ar||"value",cr)}function toBeHex(cr,ar){let fr=getUint(cr,"value").toString(16);if(ar==null)fr.length%2&&(fr="0"+fr);else{const hr=getNumber(ar,"width");for(assert$9(hr*2>=fr.length,`value exceeds width (${hr} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:cr});fr.length<hr*2;)fr="0"+fr}return"0x"+fr}function toBeArray(cr){const ar=getUint(cr,"value");if(ar===BN_0$5)return new Uint8Array([]);let dr=ar.toString(16);dr.length%2&&(dr="0"+dr);const fr=new Uint8Array(dr.length/2);for(let hr=0;hr<fr.length;hr++){const pr=hr*2;fr[hr]=parseInt(dr.substring(pr,pr+2),16)}return fr}function toQuantity(cr){let ar=hexlify(isBytesLike(cr)?cr:toBeArray(cr)).substring(2);for(;ar.startsWith("0");)ar=ar.substring(1);return ar===""&&(ar="0"),"0x"+ar}const Alphabet="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let Lookup=null;function getAlpha(cr){if(Lookup==null){Lookup={};for(let dr=0;dr<Alphabet.length;dr++)Lookup[Alphabet[dr]]=BigInt(dr)}const ar=Lookup[cr];return assertArgument(ar!=null,"invalid base58 value","letter",cr),ar}const BN_0$4=BigInt(0),BN_58=BigInt(58);function encodeBase58(cr){let ar=toBigInt(getBytes(cr)),dr="";for(;ar;)dr=Alphabet[Number(ar%BN_58)]+dr,ar/=BN_58;return dr}function decodeBase58(cr){let ar=BN_0$4;for(let dr=0;dr<cr.length;dr++)ar*=BN_58,ar+=getAlpha(cr[dr]);return ar}function toUtf8Bytes(cr,ar){ar!=null&&(assertNormalize(ar),cr=cr.normalize(ar));let dr=[];for(let fr=0;fr<cr.length;fr++){const hr=cr.charCodeAt(fr);if(hr<128)dr.push(hr);else if(hr<2048)dr.push(hr>>6|192),dr.push(hr&63|128);else if((hr&64512)==55296){fr++;const pr=cr.charCodeAt(fr);assertArgument(fr<cr.length&&(pr&64512)===56320,"invalid surrogate pair","str",cr);const mr=65536+((hr&1023)<<10)+(pr&1023);dr.push(mr>>18|240),dr.push(mr>>12&63|128),dr.push(mr>>6&63|128),dr.push(mr&63|128)}else dr.push(hr>>12|224),dr.push(hr>>6&63|128),dr.push(hr&63|128)}return new Uint8Array(dr)}function hexlifyByte(cr){let ar=cr.toString(16);for(;ar.length<2;)ar="0"+ar;return"0x"+ar}function unarrayifyInteger(cr,ar,dr){let fr=0;for(let hr=0;hr<dr;hr++)fr=fr*256+cr[ar+hr];return fr}function _decodeChildren(cr,ar,dr,fr){const hr=[];for(;dr<ar+1+fr;){const pr=_decode(cr,dr);hr.push(pr.result),dr+=pr.consumed,assert$9(dr<=ar+1+fr,"child data too short","BUFFER_OVERRUN",{buffer:cr,length:fr,offset:ar})}return{consumed:1+fr,result:hr}}function _decode(cr,ar){assert$9(cr.length!==0,"data too short","BUFFER_OVERRUN",{buffer:cr,length:0,offset:1});const dr=fr=>{assert$9(fr<=cr.length,"data short segment too short","BUFFER_OVERRUN",{buffer:cr,length:cr.length,offset:fr})};if(cr[ar]>=248){const fr=cr[ar]-247;dr(ar+1+fr);const hr=unarrayifyInteger(cr,ar+1,fr);return dr(ar+1+fr+hr),_decodeChildren(cr,ar,ar+1+fr,fr+hr)}else if(cr[ar]>=192){const fr=cr[ar]-192;return dr(ar+1+fr),_decodeChildren(cr,ar,ar+1,fr)}else if(cr[ar]>=184){const fr=cr[ar]-183;dr(ar+1+fr);const hr=unarrayifyInteger(cr,ar+1,fr);dr(ar+1+fr+hr);const pr=hexlify(cr.slice(ar+1+fr,ar+1+fr+hr));return{consumed:1+fr+hr,result:pr}}else if(cr[ar]>=128){const fr=cr[ar]-128;dr(ar+1+fr);const hr=hexlify(cr.slice(ar+1,ar+1+fr));return{consumed:1+fr,result:hr}}return{consumed:1,result:hexlifyByte(cr[ar])}}function decodeRlp(cr){const ar=getBytes(cr,"data"),dr=_decode(ar,0);return assertArgument(dr.consumed===ar.length,"unexpected junk after rlp payload","data",cr),dr.result}function arrayifyInteger(cr){const ar=[];for(;cr;)ar.unshift(cr&255),cr>>=8;return ar}function _encode(cr){if(Array.isArray(cr)){let fr=[];if(cr.forEach(function(pr){fr=fr.concat(_encode(pr))}),fr.length<=55)return fr.unshift(192+fr.length),fr;const hr=arrayifyInteger(fr.length);return hr.unshift(247+hr.length),hr.concat(fr)}const ar=Array.prototype.slice.call(getBytes(cr,"object"));if(ar.length===1&&ar[0]<=127)return ar;if(ar.length<=55)return ar.unshift(128+ar.length),ar;const dr=arrayifyInteger(ar.length);return dr.unshift(183+dr.length),dr.concat(ar)}const nibbles="0123456789abcdef";function encodeRlp(cr){let ar="0x";for(const dr of _encode(cr))ar+=nibbles[dr>>4],ar+=nibbles[dr&15];return ar}function uuidV4(cr){const ar=getBytes(cr,"randomBytes");ar[6]=ar[6]&15|64,ar[8]=ar[8]&63|128;const dr=hexlify(ar);return[dr.substring(2,10),dr.substring(10,14),dr.substring(14,18),dr.substring(18,22),dr.substring(22,34)].join("-")}function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate globalThis object")}const anyGlobal=getGlobal(),crypto$5=anyGlobal.crypto||anyGlobal.msCrypto;function createHash(cr){switch(cr){case"sha256":return sha256$7.create();case"sha512":return sha512$2.create()}assertArgument(!1,"invalid hashing algorithm name","algorithm",cr)}function createHmac(cr,ar){const dr={sha256:sha256$7,sha512:sha512$2}[cr];return assertArgument(dr!=null,"invalid hmac algorithm","algorithm",cr),hmac$6.create(dr,ar)}function pbkdf2Sync(cr,ar,dr,fr,hr){const pr={sha256:sha256$7,sha512:sha512$2}[hr];return assertArgument(pr!=null,"invalid pbkdf2 algorithm","algorithm",hr),pbkdf2$4(pr,cr,ar,{c:dr,dkLen:fr})}function randomBytes$4(cr){assert$9(crypto$5!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),assertArgument(Number.isInteger(cr)&&cr>0&&cr<=1024,"invalid length","length",cr);const ar=new Uint8Array(cr);return crypto$5.getRandomValues(ar),ar}let locked$4=!1;const _computeHmac=function(cr,ar,dr){return createHmac(cr,ar).update(dr).digest()};let __computeHmac=_computeHmac;function computeHmac(cr,ar,dr){const fr=getBytes(ar,"key"),hr=getBytes(dr,"data");return hexlify(__computeHmac(cr,fr,hr))}computeHmac._=_computeHmac;computeHmac.lock=function(){locked$4=!0};computeHmac.register=function(cr){if(locked$4)throw new Error("computeHmac is locked");__computeHmac=cr};Object.freeze(computeHmac);let locked$3=!1;const _keccak256=function(cr){return keccak_256(cr)};let __keccak256=_keccak256;function keccak256(cr){const ar=getBytes(cr,"data");return hexlify(__keccak256(ar))}keccak256._=_keccak256;keccak256.lock=function(){locked$3=!0};keccak256.register=function(cr){if(locked$3)throw new TypeError("keccak256 is locked");__keccak256=cr};Object.freeze(keccak256);let locked$2=!1;const _ripemd160=function(cr){return ripemd160$3(cr)};let __ripemd160=_ripemd160;function ripemd160$1(cr){const ar=getBytes(cr,"data");return hexlify(__ripemd160(ar))}ripemd160$1._=_ripemd160;ripemd160$1.lock=function(){locked$2=!0};ripemd160$1.register=function(cr){if(locked$2)throw new TypeError("ripemd160 is locked");__ripemd160=cr};Object.freeze(ripemd160$1);let locked$1=!1;const _pbkdf2=function(cr,ar,dr,fr,hr){return pbkdf2Sync(cr,ar,dr,fr,hr)};let __pbkdf2=_pbkdf2;function pbkdf2$1(cr,ar,dr,fr,hr){const pr=getBytes(cr,"password"),mr=getBytes(ar,"salt");return hexlify(__pbkdf2(pr,mr,dr,fr,hr))}pbkdf2$1._=_pbkdf2;pbkdf2$1.lock=function(){locked$1=!0};pbkdf2$1.register=function(cr){if(locked$1)throw new Error("pbkdf2 is locked");__pbkdf2=cr};Object.freeze(pbkdf2$1);let locked=!1;const _randomBytes=function(cr){return new Uint8Array(randomBytes$4(cr))};let __randomBytes=_randomBytes;function randomBytes$3(cr){return __randomBytes(cr)}randomBytes$3._=_randomBytes;randomBytes$3.lock=function(){locked=!0};randomBytes$3.register=function(cr){if(locked)throw new Error("randomBytes is locked");__randomBytes=cr};Object.freeze(randomBytes$3);const rotl$1=(cr,ar)=>cr<<ar|cr>>>32-ar;function XorAndSalsa(cr,ar,dr,fr,hr,pr){let mr=cr[ar++]^dr[fr++],gr=cr[ar++]^dr[fr++],yr=cr[ar++]^dr[fr++],xr=cr[ar++]^dr[fr++],wr=cr[ar++]^dr[fr++],br=cr[ar++]^dr[fr++],Sr=cr[ar++]^dr[fr++],vr=cr[ar++]^dr[fr++],Er=cr[ar++]^dr[fr++],Ar=cr[ar++]^dr[fr++],_r=cr[ar++]^dr[fr++],Cr=cr[ar++]^dr[fr++],kr=cr[ar++]^dr[fr++],Rr=cr[ar++]^dr[fr++],Ir=cr[ar++]^dr[fr++],Nr=cr[ar++]^dr[fr++],Pr=mr,Tr=gr,Br=yr,Fr=xr,jr=wr,Ur=br,qr=Sr,Hr=vr,Or=Er,Mr=Ar,Lr=_r,Vr=Cr,Jr=kr,es=Rr,ns=Ir,Qr=Nr;for(let zr=0;zr<8;zr+=2)jr^=rotl$1(Pr+Jr|0,7),Or^=rotl$1(jr+Pr|0,9),Jr^=rotl$1(Or+jr|0,13),Pr^=rotl$1(Jr+Or|0,18),Mr^=rotl$1(Ur+Tr|0,7),es^=rotl$1(Mr+Ur|0,9),Tr^=rotl$1(es+Mr|0,13),Ur^=rotl$1(Tr+es|0,18),ns^=rotl$1(Lr+qr|0,7),Br^=rotl$1(ns+Lr|0,9),qr^=rotl$1(Br+ns|0,13),Lr^=rotl$1(qr+Br|0,18),Fr^=rotl$1(Qr+Vr|0,7),Hr^=rotl$1(Fr+Qr|0,9),Vr^=rotl$1(Hr+Fr|0,13),Qr^=rotl$1(Vr+Hr|0,18),Tr^=rotl$1(Pr+Fr|0,7),Br^=rotl$1(Tr+Pr|0,9),Fr^=rotl$1(Br+Tr|0,13),Pr^=rotl$1(Fr+Br|0,18),qr^=rotl$1(Ur+jr|0,7),Hr^=rotl$1(qr+Ur|0,9),jr^=rotl$1(Hr+qr|0,13),Ur^=rotl$1(jr+Hr|0,18),Vr^=rotl$1(Lr+Mr|0,7),Or^=rotl$1(Vr+Lr|0,9),Mr^=rotl$1(Or+Vr|0,13),Lr^=rotl$1(Mr+Or|0,18),Jr^=rotl$1(Qr+ns|0,7),es^=rotl$1(Jr+Qr|0,9),ns^=rotl$1(es+Jr|0,13),Qr^=rotl$1(ns+es|0,18);hr[pr++]=mr+Pr|0,hr[pr++]=gr+Tr|0,hr[pr++]=yr+Br|0,hr[pr++]=xr+Fr|0,hr[pr++]=wr+jr|0,hr[pr++]=br+Ur|0,hr[pr++]=Sr+qr|0,hr[pr++]=vr+Hr|0,hr[pr++]=Er+Or|0,hr[pr++]=Ar+Mr|0,hr[pr++]=_r+Lr|0,hr[pr++]=Cr+Vr|0,hr[pr++]=kr+Jr|0,hr[pr++]=Rr+es|0,hr[pr++]=Ir+ns|0,hr[pr++]=Nr+Qr|0}function BlockMix(cr,ar,dr,fr,hr){let pr=fr+0,mr=fr+16*hr;for(let gr=0;gr<16;gr++)dr[mr+gr]=cr[ar+(2*hr-1)*16+gr];for(let gr=0;gr<hr;gr++,pr+=16,ar+=16)XorAndSalsa(dr,mr,cr,ar,dr,pr),gr>0&&(mr+=16),XorAndSalsa(dr,pr,cr,ar+=16,dr,mr)}function scryptInit(cr,ar,dr){const fr=checkOpts$2({dkLen:32,asyncTick:10,maxmem:1073742848},dr),{N:hr,r:pr,p:mr,dkLen:gr,asyncTick:yr,maxmem:xr,onProgress:wr}=fr;if(number$5(hr),number$5(pr),number$5(mr),number$5(gr),number$5(yr),number$5(xr),wr!==void 0&&typeof wr!="function")throw new Error("progressCb should be function");const br=128*pr,Sr=br/4;if(hr<=1||hr&hr-1||hr>=2**(br/8)||hr>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(mr<0||mr>(2**32-1)*32/br)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(gr<0||gr>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const vr=br*(hr+mr);if(vr>xr)throw new Error(`Scrypt: parameters too large, ${vr} (128 * r * (N + p)) > ${xr} (maxmem)`);const Er=pbkdf2$4(sha256$7,cr,ar,{c:1,dkLen:br*mr}),Ar=u32$2(Er),_r=u32$2(new Uint8Array(br*hr)),Cr=u32$2(new Uint8Array(br));let kr=()=>{};if(wr){const Rr=2*hr*mr,Ir=Math.max(Math.floor(Rr/1e4),1);let Nr=0;kr=()=>{Nr++,wr&&(!(Nr%Ir)||Nr===Rr)&&wr(Nr/Rr)}}return{N:hr,r:pr,p:mr,dkLen:gr,blockSize32:Sr,V:_r,B32:Ar,B:Er,tmp:Cr,blockMixCb:kr,asyncTick:yr}}function scryptOutput(cr,ar,dr,fr,hr){const pr=pbkdf2$4(sha256$7,cr,dr,{c:1,dkLen:ar});return dr.fill(0),fr.fill(0),hr.fill(0),pr}function scrypt$2(cr,ar,dr){const{N:fr,r:hr,p:pr,dkLen:mr,blockSize32:gr,V:yr,B32:xr,B:wr,tmp:br,blockMixCb:Sr}=scryptInit(cr,ar,dr);for(let vr=0;vr<pr;vr++){const Er=gr*vr;for(let Ar=0;Ar<gr;Ar++)yr[Ar]=xr[Er+Ar];for(let Ar=0,_r=0;Ar<fr-1;Ar++)BlockMix(yr,_r,yr,_r+=gr,hr),Sr();BlockMix(yr,(fr-1)*gr,xr,Er,hr),Sr();for(let Ar=0;Ar<fr;Ar++){const _r=xr[Er+gr-16]%fr;for(let Cr=0;Cr<gr;Cr++)br[Cr]=xr[Er+Cr]^yr[_r*gr+Cr];BlockMix(br,0,xr,Er,hr),Sr()}}return scryptOutput(cr,mr,wr,yr,br)}async function scryptAsync(cr,ar,dr){const{N:fr,r:hr,p:pr,dkLen:mr,blockSize32:gr,V:yr,B32:xr,B:wr,tmp:br,blockMixCb:Sr,asyncTick:vr}=scryptInit(cr,ar,dr);for(let Er=0;Er<pr;Er++){const Ar=gr*Er;for(let Cr=0;Cr<gr;Cr++)yr[Cr]=xr[Ar+Cr];let _r=0;await asyncLoop$1(fr-1,vr,()=>{BlockMix(yr,_r,yr,_r+=gr,hr),Sr()}),BlockMix(yr,(fr-1)*gr,xr,Ar,hr),Sr(),await asyncLoop$1(fr,vr,()=>{const Cr=xr[Ar+gr-16]%fr;for(let kr=0;kr<gr;kr++)br[kr]=xr[Ar+kr]^yr[Cr*gr+kr];BlockMix(br,0,xr,Ar,hr),Sr()})}return scryptOutput(cr,mr,wr,yr,br)}const scrypt$3=Object.freeze(Object.defineProperty({__proto__:null,scrypt:scrypt$2,scryptAsync},Symbol.toStringTag,{value:"Module"}));let lockedSync=!1,lockedAsync=!1;const _scryptAsync=async function(cr,ar,dr,fr,hr,pr,mr){return await scryptAsync(cr,ar,{N:dr,r:fr,p:hr,dkLen:pr,onProgress:mr})},_scryptSync=function(cr,ar,dr,fr,hr,pr){return scrypt$2(cr,ar,{N:dr,r:fr,p:hr,dkLen:pr})};let __scryptAsync=_scryptAsync,__scryptSync=_scryptSync;async function scrypt$1(cr,ar,dr,fr,hr,pr,mr){const gr=getBytes(cr,"passwd"),yr=getBytes(ar,"salt");return hexlify(await __scryptAsync(gr,yr,dr,fr,hr,pr,mr))}scrypt$1._=_scryptAsync;scrypt$1.lock=function(){lockedAsync=!0};scrypt$1.register=function(cr){if(lockedAsync)throw new Error("scrypt is locked");__scryptAsync=cr};Object.freeze(scrypt$1);function scryptSync(cr,ar,dr,fr,hr,pr){const mr=getBytes(cr,"passwd"),gr=getBytes(ar,"salt");return hexlify(__scryptSync(mr,gr,dr,fr,hr,pr))}scryptSync._=_scryptSync;scryptSync.lock=function(){lockedSync=!0};scryptSync.register=function(cr){if(lockedSync)throw new Error("scryptSync is locked");__scryptSync=cr};Object.freeze(scryptSync);const _sha256=function(cr){return createHash("sha256").update(cr).digest()};let __sha256=_sha256,locked256=!1;function sha256$4(cr){const ar=getBytes(cr,"data");return hexlify(__sha256(ar))}sha256$4._=_sha256;sha256$4.lock=function(){locked256=!0};sha256$4.register=function(cr){if(locked256)throw new Error("sha256 is locked");__sha256=cr};Object.freeze(sha256$4);Object.freeze(sha256$4);const ZeroHash="0x0000000000000000000000000000000000000000000000000000000000000000",MessagePrefix=`Ethereum Signed Message:
`,BN_0$3=BigInt(0),BN_1$1=BigInt(1),BN_2$1=BigInt(2),BN_27$1=BigInt(27),BN_28$1=BigInt(28),BN_35$1=BigInt(35),_guard$2={};function toUint256(cr){return zeroPadValue(toBeArray(cr),32)}class Signature{#e;#t;#r;#n;get r(){return this.#e}set r(ar){assertArgument(dataLength(ar)===32,"invalid r","value",ar),this.#e=hexlify(ar)}get s(){return this.#t}set s(ar){assertArgument(dataLength(ar)===32,"invalid s","value",ar);const dr=hexlify(ar);assertArgument(parseInt(dr.substring(0,3))<8,"non-canonical s","value",dr),this.#t=dr}get v(){return this.#r}set v(ar){const dr=getNumber(ar,"value");assertArgument(dr===27||dr===28,"invalid v","v",ar),this.#r=dr}get networkV(){return this.#n}get legacyChainId(){const ar=this.networkV;return ar==null?null:Signature.getChainId(ar)}get yParity(){return this.v===27?0:1}get yParityAndS(){const ar=getBytes(this.s);return this.yParity&&(ar[0]|=128),hexlify(ar)}get compactSerialized(){return concat$4([this.r,this.yParityAndS])}get serialized(){return concat$4([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(ar,dr,fr,hr){assertPrivate(ar,_guard$2,"Signature"),this.#e=dr,this.#t=fr,this.#r=hr,this.#n=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const ar=new Signature(_guard$2,this.r,this.s,this.v);return this.networkV&&(ar.#n=this.networkV),ar}toJSON(){const ar=this.networkV;return{_type:"signature",networkV:ar!=null?ar.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(ar){const dr=getBigInt(ar,"v");return dr==BN_27$1||dr==BN_28$1?BN_0$3:(assertArgument(dr>=BN_35$1,"invalid EIP-155 v","v",ar),(dr-BN_35$1)/BN_2$1)}static getChainIdV(ar,dr){return getBigInt(ar)*BN_2$1+BigInt(35+dr-27)}static getNormalizedV(ar){const dr=getBigInt(ar);return dr===BN_0$3||dr===BN_27$1?27:dr===BN_1$1||dr===BN_28$1?28:(assertArgument(dr>=BN_35$1,"invalid v","v",ar),dr&BN_1$1?27:28)}static from(ar){function dr(xr,wr){assertArgument(xr,wr,"signature",ar)}if(ar==null)return new Signature(_guard$2,ZeroHash,ZeroHash,27);if(typeof ar=="string"){const xr=getBytes(ar,"signature");if(xr.length===64){const wr=hexlify(xr.slice(0,32)),br=xr.slice(32,64),Sr=br[0]&128?28:27;return br[0]&=127,new Signature(_guard$2,wr,hexlify(br),Sr)}if(xr.length===65){const wr=hexlify(xr.slice(0,32)),br=xr.slice(32,64);dr((br[0]&128)===0,"non-canonical s");const Sr=Signature.getNormalizedV(xr[64]);return new Signature(_guard$2,wr,hexlify(br),Sr)}dr(!1,"invalid raw signature length")}if(ar instanceof Signature)return ar.clone();const fr=ar.r;dr(fr!=null,"missing r");const hr=toUint256(fr),pr=function(xr,wr){if(xr!=null)return toUint256(xr);if(wr!=null){dr(isHexString(wr,32),"invalid yParityAndS");const br=getBytes(wr);return br[0]&=127,hexlify(br)}dr(!1,"missing s")}(ar.s,ar.yParityAndS);dr((getBytes(pr)[0]&128)==0,"non-canonical s");const{networkV:mr,v:gr}=function(xr,wr,br){if(xr!=null){const Sr=getBigInt(xr);return{networkV:Sr>=BN_35$1?Sr:void 0,v:Signature.getNormalizedV(Sr)}}if(wr!=null)return dr(isHexString(wr,32),"invalid yParityAndS"),{v:getBytes(wr)[0]&128?28:27};if(br!=null){switch(getNumber(br,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}dr(!1,"invalid yParity")}dr(!1,"missing v")}(ar.v,ar.yParityAndS,ar.yParity),yr=new Signature(_guard$2,hr,pr,gr);return mr&&(yr.#n=mr),dr(ar.yParity==null||getNumber(ar.yParity,"sig.yParity")===yr.yParity,"yParity mismatch"),dr(ar.yParityAndS==null||ar.yParityAndS===yr.yParityAndS,"yParityAndS mismatch"),yr}}class SigningKey{#e;constructor(ar){assertArgument(dataLength(ar)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=hexlify(ar)}get privateKey(){return this.#e}get publicKey(){return SigningKey.computePublicKey(this.#e)}get compressedPublicKey(){return SigningKey.computePublicKey(this.#e,!0)}sign(ar){assertArgument(dataLength(ar)===32,"invalid digest length","digest",ar);const dr=secp256k1$1.sign(getBytesCopy(ar),getBytesCopy(this.#e),{lowS:!0});return Signature.from({r:toBeHex(dr.r,32),s:toBeHex(dr.s,32),v:dr.recovery?28:27})}computeSharedSecret(ar){const dr=SigningKey.computePublicKey(ar);return hexlify(secp256k1$1.getSharedSecret(getBytesCopy(this.#e),getBytes(dr),!1))}static computePublicKey(ar,dr){let fr=getBytes(ar,"key");if(fr.length===32){const pr=secp256k1$1.getPublicKey(fr,!!dr);return hexlify(pr)}if(fr.length===64){const pr=new Uint8Array(65);pr[0]=4,pr.set(fr,1),fr=pr}const hr=secp256k1$1.ProjectivePoint.fromHex(fr);return hexlify(hr.toRawBytes(dr))}static recoverPublicKey(ar,dr){assertArgument(dataLength(ar)===32,"invalid digest length","digest",ar);const fr=Signature.from(dr);let hr=secp256k1$1.Signature.fromCompact(getBytesCopy(concat$4([fr.r,fr.s])));hr=hr.addRecoveryBit(fr.yParity);const pr=hr.recoverPublicKey(getBytesCopy(ar));return assertArgument(pr!=null,"invalid signautre for digest","signature",dr),"0x"+pr.toHex(!1)}static addPoints(ar,dr,fr){const hr=secp256k1$1.ProjectivePoint.fromHex(SigningKey.computePublicKey(ar).substring(2)),pr=secp256k1$1.ProjectivePoint.fromHex(SigningKey.computePublicKey(dr).substring(2));return"0x"+hr.add(pr).toHex(!!fr)}}const BN_0$2=BigInt(0),BN_36=BigInt(36);function getChecksumAddress(cr){cr=cr.toLowerCase();const ar=cr.substring(2).split(""),dr=new Uint8Array(40);for(let hr=0;hr<40;hr++)dr[hr]=ar[hr].charCodeAt(0);const fr=getBytes(keccak256(dr));for(let hr=0;hr<40;hr+=2)fr[hr>>1]>>4>=8&&(ar[hr]=ar[hr].toUpperCase()),(fr[hr>>1]&15)>=8&&(ar[hr+1]=ar[hr+1].toUpperCase());return"0x"+ar.join("")}const ibanLookup={};for(let cr=0;cr<10;cr++)ibanLookup[String(cr)]=String(cr);for(let cr=0;cr<26;cr++)ibanLookup[String.fromCharCode(65+cr)]=String(10+cr);const safeDigits=15;function ibanChecksum(cr){cr=cr.toUpperCase(),cr=cr.substring(4)+cr.substring(0,2)+"00";let ar=cr.split("").map(fr=>ibanLookup[fr]).join("");for(;ar.length>=safeDigits;){let fr=ar.substring(0,safeDigits);ar=parseInt(fr,10)%97+ar.substring(fr.length)}let dr=String(98-parseInt(ar,10)%97);for(;dr.length<2;)dr="0"+dr;return dr}const Base36=function(){const cr={};for(let ar=0;ar<36;ar++){const dr="0123456789abcdefghijklmnopqrstuvwxyz"[ar];cr[dr]=BigInt(ar)}return cr}();function fromBase36(cr){cr=cr.toLowerCase();let ar=BN_0$2;for(let dr=0;dr<cr.length;dr++)ar=ar*BN_36+Base36[cr[dr]];return ar}function getAddress(cr){if(assertArgument(typeof cr=="string","invalid address","address",cr),cr.match(/^(0x)?[0-9a-fA-F]{40}$/)){cr.startsWith("0x")||(cr="0x"+cr);const ar=getChecksumAddress(cr);return assertArgument(!cr.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||ar===cr,"bad address checksum","address",cr),ar}if(cr.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){assertArgument(cr.substring(2,4)===ibanChecksum(cr),"bad icap checksum","address",cr);let ar=fromBase36(cr.substring(4)).toString(16);for(;ar.length<40;)ar="0"+ar;return getChecksumAddress("0x"+ar)}assertArgument(!1,"invalid address","address",cr)}function isAddressable(cr){return cr&&typeof cr.getAddress=="function"}async function checkAddress(cr,ar){const dr=await ar;return(dr==null||dr==="0x0000000000000000000000000000000000000000")&&(assert$9(typeof cr!="string","unconfigured name","UNCONFIGURED_NAME",{value:cr}),assertArgument(!1,"invalid AddressLike value; did not resolve to a value address","target",cr)),getAddress(dr)}function resolveAddress(cr,ar){if(typeof cr=="string")return cr.match(/^0x[0-9a-f]{40}$/i)?getAddress(cr):(assert$9(ar!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),checkAddress(cr,ar.resolveName(cr)));if(isAddressable(cr))return checkAddress(cr,cr.getAddress());if(cr&&typeof cr.then=="function")return checkAddress(cr,cr);assertArgument(!1,"unsupported addressable value","target",cr)}function id$1(cr){return keccak256(toUtf8Bytes(cr))}var COMPRESSED$1="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const FENCED=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),NSM_MAX=4;function decode_arithmetic(cr){let ar=0;function dr(){return cr[ar++]<<8|cr[ar++]}let fr=dr(),hr=1,pr=[0,1];for(let Nr=1;Nr<fr;Nr++)pr.push(hr+=dr());let mr=dr(),gr=ar;ar+=mr;let yr=0,xr=0;function wr(){return yr==0&&(xr=xr<<8|cr[ar++],yr=8),xr>>--yr&1}const br=31,Sr=2**br,vr=Sr>>>1,Er=vr>>1,Ar=Sr-1;let _r=0;for(let Nr=0;Nr<br;Nr++)_r=_r<<1|wr();let Cr=[],kr=0,Rr=Sr;for(;;){let Nr=Math.floor(((_r-kr+1)*hr-1)/Rr),Pr=0,Tr=fr;for(;Tr-Pr>1;){let jr=Pr+Tr>>>1;Nr<pr[jr]?Tr=jr:Pr=jr}if(Pr==0)break;Cr.push(Pr);let Br=kr+Math.floor(Rr*pr[Pr]/hr),Fr=kr+Math.floor(Rr*pr[Pr+1]/hr)-1;for(;!((Br^Fr)&vr);)_r=_r<<1&Ar|wr(),Br=Br<<1&Ar,Fr=Fr<<1&Ar|1;for(;Br&~Fr&Er;)_r=_r&vr|_r<<1&Ar>>>1|wr(),Br=Br<<1^vr,Fr=(Fr^vr)<<1|vr|1;kr=Br,Rr=1+Fr-Br}let Ir=fr-4;return Cr.map(Nr=>{switch(Nr-Ir){case 3:return Ir+65792+(cr[gr++]<<16|cr[gr++]<<8|cr[gr++]);case 2:return Ir+256+(cr[gr++]<<8|cr[gr++]);case 1:return Ir+cr[gr++];default:return Nr-1}})}function read_payload(cr){let ar=0;return()=>cr[ar++]}function read_compressed_payload(cr){return read_payload(decode_arithmetic(unsafe_atob(cr)))}function unsafe_atob(cr){let ar=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((hr,pr)=>ar[hr.charCodeAt(0)]=pr);let dr=cr.length,fr=new Uint8Array(6*dr>>3);for(let hr=0,pr=0,mr=0,gr=0;hr<dr;hr++)gr=gr<<6|ar[cr.charCodeAt(hr)],mr+=6,mr>=8&&(fr[pr++]=gr>>(mr-=8));return fr}function signed(cr){return cr&1?~cr>>1:cr>>1}function read_deltas(cr,ar){let dr=Array(cr);for(let fr=0,hr=0;fr<cr;fr++)dr[fr]=hr+=signed(ar());return dr}function read_sorted(cr,ar=0){let dr=[];for(;;){let fr=cr(),hr=cr();if(!hr)break;ar+=fr;for(let pr=0;pr<hr;pr++)dr.push(ar+pr);ar+=hr+1}return dr}function read_sorted_arrays(cr){return read_array_while(()=>{let ar=read_sorted(cr);if(ar.length)return ar})}function read_mapped(cr){let ar=[];for(;;){let dr=cr();if(dr==0)break;ar.push(read_linear_table(dr,cr))}for(;;){let dr=cr()-1;if(dr<0)break;ar.push(read_replacement_table(dr,cr))}return ar.flat()}function read_array_while(cr){let ar=[];for(;;){let dr=cr(ar.length);if(!dr)break;ar.push(dr)}return ar}function read_transposed(cr,ar,dr){let fr=Array(cr).fill().map(()=>[]);for(let hr=0;hr<ar;hr++)read_deltas(cr,dr).forEach((pr,mr)=>fr[mr].push(pr));return fr}function read_linear_table(cr,ar){let dr=1+ar(),fr=ar(),hr=read_array_while(ar);return read_transposed(hr.length,1+cr,ar).flatMap((mr,gr)=>{let[yr,...xr]=mr;return Array(hr[gr]).fill().map((wr,br)=>{let Sr=br*fr;return[yr+br*dr,xr.map(vr=>vr+Sr)]})})}function read_replacement_table(cr,ar){let dr=1+ar();return read_transposed(dr,1+cr,ar).map(hr=>[hr[0],hr.slice(1)])}function read_trie(cr){let ar=[],dr=read_sorted(cr);return hr(fr([]),[]),ar;function fr(pr){let mr=cr(),gr=read_array_while(()=>{let yr=read_sorted(cr).map(xr=>dr[xr]);if(yr.length)return fr(yr)});return{S:mr,B:gr,Q:pr}}function hr({S:pr,B:mr},gr,yr){if(!(pr&4&&yr===gr[gr.length-1])){pr&2&&(yr=gr[gr.length-1]),pr&1&&ar.push(gr);for(let xr of mr)for(let wr of xr.Q)hr(xr,[...gr,wr],yr)}}}function hex_cp(cr){return cr.toString(16).toUpperCase().padStart(2,"0")}function quote_cp(cr){return`{${hex_cp(cr)}}`}function explode_cp(cr){let ar=[];for(let dr=0,fr=cr.length;dr<fr;){let hr=cr.codePointAt(dr);dr+=hr<65536?1:2,ar.push(hr)}return ar}function str_from_cps(cr){let dr=cr.length;if(dr<4096)return String.fromCodePoint(...cr);let fr=[];for(let hr=0;hr<dr;)fr.push(String.fromCodePoint(...cr.slice(hr,hr+=4096)));return fr.join("")}function compare_arrays(cr,ar){let dr=cr.length,fr=dr-ar.length;for(let hr=0;fr==0&&hr<dr;hr++)fr=cr[hr]-ar[hr];return fr}var COMPRESSED="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const S0=44032,L0=4352,V0=4449,T0=4519,L_COUNT=19,V_COUNT=21,T_COUNT=28,N_COUNT=V_COUNT*T_COUNT,S_COUNT=L_COUNT*N_COUNT,S1=S0+S_COUNT,L1=L0+L_COUNT,V1=V0+V_COUNT,T1$1=T0+T_COUNT;function unpack_cc(cr){return cr>>24&255}function unpack_cp(cr){return cr&16777215}let SHIFTED_RANK,EXCLUSIONS,DECOMP,RECOMP;function init$1(){let cr=read_compressed_payload(COMPRESSED);SHIFTED_RANK=new Map(read_sorted_arrays(cr).flatMap((ar,dr)=>ar.map(fr=>[fr,dr+1<<24]))),EXCLUSIONS=new Set(read_sorted(cr)),DECOMP=new Map,RECOMP=new Map;for(let[ar,dr]of read_mapped(cr)){if(!EXCLUSIONS.has(ar)&&dr.length==2){let[fr,hr]=dr,pr=RECOMP.get(fr);pr||(pr=new Map,RECOMP.set(fr,pr)),pr.set(hr,ar)}DECOMP.set(ar,dr.reverse())}}function is_hangul(cr){return cr>=S0&&cr<S1}function compose_pair(cr,ar){if(cr>=L0&&cr<L1&&ar>=V0&&ar<V1)return S0+(cr-L0)*N_COUNT+(ar-V0)*T_COUNT;if(is_hangul(cr)&&ar>T0&&ar<T1$1&&(cr-S0)%T_COUNT==0)return cr+(ar-T0);{let dr=RECOMP.get(cr);return dr&&(dr=dr.get(ar),dr)?dr:-1}}function decomposed(cr){SHIFTED_RANK||init$1();let ar=[],dr=[],fr=!1;function hr(pr){let mr=SHIFTED_RANK.get(pr);mr&&(fr=!0,pr|=mr),ar.push(pr)}for(let pr of cr)for(;;){if(pr<128)ar.push(pr);else if(is_hangul(pr)){let mr=pr-S0,gr=mr/N_COUNT|0,yr=mr%N_COUNT/T_COUNT|0,xr=mr%T_COUNT;hr(L0+gr),hr(V0+yr),xr>0&&hr(T0+xr)}else{let mr=DECOMP.get(pr);mr?dr.push(...mr):hr(pr)}if(!dr.length)break;pr=dr.pop()}if(fr&&ar.length>1){let pr=unpack_cc(ar[0]);for(let mr=1;mr<ar.length;mr++){let gr=unpack_cc(ar[mr]);if(gr==0||pr<=gr){pr=gr;continue}let yr=mr-1;for(;;){let xr=ar[yr+1];if(ar[yr+1]=ar[yr],ar[yr]=xr,!yr||(pr=unpack_cc(ar[--yr]),pr<=gr))break}pr=unpack_cc(ar[mr])}}return ar}function composed_from_decomposed(cr){let ar=[],dr=[],fr=-1,hr=0;for(let pr of cr){let mr=unpack_cc(pr),gr=unpack_cp(pr);if(fr==-1)mr==0?fr=gr:ar.push(gr);else if(hr>0&&hr>=mr)mr==0?(ar.push(fr,...dr),dr.length=0,fr=gr):dr.push(gr),hr=mr;else{let yr=compose_pair(fr,gr);yr>=0?fr=yr:hr==0&&mr==0?(ar.push(fr),fr=gr):(dr.push(gr),hr=mr)}}return fr>=0&&ar.push(fr,...dr),ar}function nfd(cr){return decomposed(cr).map(unpack_cp)}function nfc(cr){return composed_from_decomposed(decomposed(cr))}const HYPHEN=45,STOP=46,STOP_CH=".",FE0F=65039,UNIQUE_PH=1,Array_from=cr=>Array.from(cr);function group_has_cp(cr,ar){return cr.P.has(ar)||cr.Q.has(ar)}class Emoji extends Array{get is_emoji(){return!0}}let MAPPED,IGNORED,CM,NSM,ESCAPE,NFC_CHECK,GROUPS,WHOLE_VALID,WHOLE_MAP,VALID,EMOJI_LIST,EMOJI_ROOT;function init$2(){if(MAPPED)return;let cr=read_compressed_payload(COMPRESSED$1);const ar=()=>read_sorted(cr),dr=()=>new Set(ar());MAPPED=new Map(read_mapped(cr)),IGNORED=dr(),CM=ar(),NSM=new Set(ar().map(wr=>CM[wr])),CM=new Set(CM),ESCAPE=dr(),NFC_CHECK=dr();let fr=read_sorted_arrays(cr),hr=cr();const pr=()=>new Set(ar().flatMap(wr=>fr[wr]).concat(ar()));GROUPS=read_array_while(wr=>{let br=read_array_while(cr).map(Sr=>Sr+96);if(br.length){let Sr=wr>=hr;br[0]-=32,br=str_from_cps(br),Sr&&(br=`Restricted[${br}]`);let vr=pr(),Er=pr(),Ar=!cr();return{N:br,P:vr,Q:Er,M:Ar,R:Sr}}}),WHOLE_VALID=dr(),WHOLE_MAP=new Map;let mr=ar().concat(Array_from(WHOLE_VALID)).sort((wr,br)=>wr-br);mr.forEach((wr,br)=>{let Sr=cr(),vr=mr[br]=Sr?mr[br-Sr]:{V:[],M:new Map};vr.V.push(wr),WHOLE_VALID.has(wr)||WHOLE_MAP.set(wr,vr)});for(let{V:wr,M:br}of new Set(WHOLE_MAP.values())){let Sr=[];for(let Er of wr){let Ar=GROUPS.filter(Cr=>group_has_cp(Cr,Er)),_r=Sr.find(({G:Cr})=>Ar.some(kr=>Cr.has(kr)));_r||(_r={G:new Set,V:[]},Sr.push(_r)),_r.V.push(Er),Ar.forEach(Cr=>_r.G.add(Cr))}let vr=Sr.flatMap(Er=>Array_from(Er.G));for(let{G:Er,V:Ar}of Sr){let _r=new Set(vr.filter(Cr=>!Er.has(Cr)));for(let Cr of Ar)br.set(Cr,_r)}}let gr=new Set,yr=new Set;const xr=wr=>gr.has(wr)?yr.add(wr):gr.add(wr);for(let wr of GROUPS){for(let br of wr.P)xr(br);for(let br of wr.Q)xr(br)}for(let wr of gr)!WHOLE_MAP.has(wr)&&!yr.has(wr)&&WHOLE_MAP.set(wr,UNIQUE_PH);VALID=new Set(Array_from(gr).concat(Array_from(nfd(gr)))),EMOJI_LIST=read_trie(cr).map(wr=>Emoji.from(wr)).sort(compare_arrays),EMOJI_ROOT=new Map;for(let wr of EMOJI_LIST){let br=[EMOJI_ROOT];for(let Sr of wr){let vr=br.map(Er=>{let Ar=Er.get(Sr);return Ar||(Ar=new Map,Er.set(Sr,Ar)),Ar});Sr===FE0F?br.push(...vr):br=vr}for(let Sr of br)Sr.V=wr}}function quoted_cp(cr){return(should_escape(cr)?"":`${bidi_qq(safe_str_from_cps([cr]))} `)+quote_cp(cr)}function bidi_qq(cr){return`"${cr}"`}function check_label_extension(cr){if(cr.length>=4&&cr[2]==HYPHEN&&cr[3]==HYPHEN)throw new Error(`invalid label extension: "${str_from_cps(cr.slice(0,4))}"`)}function check_leading_underscore(cr){for(let dr=cr.lastIndexOf(95);dr>0;)if(cr[--dr]!==95)throw new Error("underscore allowed only at start")}function check_fenced(cr){let ar=cr[0],dr=FENCED.get(ar);if(dr)throw error_placement(`leading ${dr}`);let fr=cr.length,hr=-1;for(let pr=1;pr<fr;pr++){ar=cr[pr];let mr=FENCED.get(ar);if(mr){if(hr==pr)throw error_placement(`${dr} + ${mr}`);hr=pr+1,dr=mr}}if(hr==fr)throw error_placement(`trailing ${dr}`)}function safe_str_from_cps(cr,ar=quote_cp){let dr=[];is_combining_mark(cr[0])&&dr.push("");let fr=0,hr=cr.length;for(let pr=0;pr<hr;pr++){let mr=cr[pr];should_escape(mr)&&(dr.push(str_from_cps(cr.slice(fr,pr))),dr.push(ar(mr)),fr=pr+1)}return dr.push(str_from_cps(cr.slice(fr,hr))),dr.join("")}function is_combining_mark(cr){return init$2(),CM.has(cr)}function should_escape(cr){return init$2(),ESCAPE.has(cr)}function ens_emoji(){return init$2(),EMOJI_LIST.map(cr=>cr.slice())}function ens_normalize_fragment(cr,ar){init$2();let dr=ar?nfd:nfc;return cr.split(STOP_CH).map(fr=>str_from_cps(tokens_from_str(explode_cp(fr),dr,filter_fe0f).flat())).join(STOP_CH)}function ens_normalize(cr){return flatten$2(split$2(cr,nfc,filter_fe0f))}function ens_beautify(cr){let ar=split$2(cr,nfc,dr=>dr);for(let{type:dr,output:fr,error:hr}of ar){if(hr)break;if(dr!=="Greek"){let pr=0;for(;;){let mr=fr.indexOf(958,pr);if(mr<0)break;fr[mr]=926,pr=mr+1}}}return flatten$2(ar)}function ens_split(cr,ar){return split$2(cr,nfc,ar?dr=>dr.slice():filter_fe0f)}function split$2(cr,ar,dr){if(!cr)return[];init$2();let fr=0;return cr.split(STOP_CH).map(hr=>{let pr=explode_cp(hr),mr={input:pr,offset:fr};fr+=pr.length+1;try{let gr=mr.tokens=tokens_from_str(pr,ar,dr),yr=gr.length,xr;if(!yr)throw new Error("empty label");let wr=mr.output=gr.flat();if(check_leading_underscore(wr),!(mr.emoji=yr>1||gr[0].is_emoji)&&wr.every(Sr=>Sr<128))check_label_extension(wr),xr="ASCII";else{let Sr=gr.flatMap(vr=>vr.is_emoji?[]:vr);if(!Sr.length)xr="Emoji";else{if(CM.has(wr[0]))throw error_placement("leading combining mark");for(let Ar=1;Ar<yr;Ar++){let _r=gr[Ar];if(!_r.is_emoji&&CM.has(_r[0]))throw error_placement(`emoji + combining mark: "${str_from_cps(gr[Ar-1])} + ${safe_str_from_cps([_r[0]])}"`)}check_fenced(wr);let vr=Array_from(new Set(Sr)),[Er]=determine_group(vr);check_group(Er,Sr),check_whole(Er,vr),xr=Er.N}}mr.type=xr}catch(gr){mr.error=gr}return mr})}function check_whole(cr,ar){let dr,fr=[];for(let hr of ar){let pr=WHOLE_MAP.get(hr);if(pr===UNIQUE_PH)return;if(pr){let mr=pr.M.get(hr);if(dr=dr?dr.filter(gr=>mr.has(gr)):Array_from(mr),!dr.length)return}else fr.push(hr)}if(dr){for(let hr of dr)if(fr.every(pr=>group_has_cp(hr,pr)))throw new Error(`whole-script confusable: ${cr.N}/${hr.N}`)}}function determine_group(cr){let ar=GROUPS;for(let dr of cr){let fr=ar.filter(hr=>group_has_cp(hr,dr));if(!fr.length)throw GROUPS.some(hr=>group_has_cp(hr,dr))?error_group_member(ar[0],dr):error_disallowed(dr);if(ar=fr,fr.length==1)break}return ar}function flatten$2(cr){return cr.map(({input:ar,error:dr,output:fr})=>{if(dr){let hr=dr.message;throw new Error(cr.length==1?hr:`Invalid label ${bidi_qq(safe_str_from_cps(ar))}: ${hr}`)}return str_from_cps(fr)}).join(STOP_CH)}function error_disallowed(cr){return new Error(`disallowed character: ${quoted_cp(cr)}`)}function error_group_member(cr,ar){let dr=quoted_cp(ar),fr=GROUPS.find(hr=>hr.P.has(ar));return fr&&(dr=`${fr.N} ${dr}`),new Error(`illegal mixture: ${cr.N} + ${dr}`)}function error_placement(cr){return new Error(`illegal placement: ${cr}`)}function check_group(cr,ar){for(let dr of ar)if(!group_has_cp(cr,dr))throw error_group_member(cr,dr);if(cr.M){let dr=nfd(ar);for(let fr=1,hr=dr.length;fr<hr;fr++)if(NSM.has(dr[fr])){let pr=fr+1;for(let mr;pr<hr&&NSM.has(mr=dr[pr]);pr++)for(let gr=fr;gr<pr;gr++)if(dr[gr]==mr)throw new Error(`duplicate non-spacing marks: ${quoted_cp(mr)}`);if(pr-fr>NSM_MAX)throw new Error(`excessive non-spacing marks: ${bidi_qq(safe_str_from_cps(dr.slice(fr-1,pr)))} (${pr-fr}/${NSM_MAX})`);fr=pr}}}function tokens_from_str(cr,ar,dr){let fr=[],hr=[];for(cr=cr.slice().reverse();cr.length;){let pr=consume_emoji_reversed(cr);if(pr)hr.length&&(fr.push(ar(hr)),hr=[]),fr.push(dr(pr));else{let mr=cr.pop();if(VALID.has(mr))hr.push(mr);else{let gr=MAPPED.get(mr);if(gr)hr.push(...gr);else if(!IGNORED.has(mr))throw error_disallowed(mr)}}}return hr.length&&fr.push(ar(hr)),fr}function filter_fe0f(cr){return cr.filter(ar=>ar!=FE0F)}function consume_emoji_reversed(cr,ar){let dr=EMOJI_ROOT,fr,hr=cr.length;for(;hr&&(dr=dr.get(cr[--hr]),!!dr);){let{V:pr}=dr;pr&&(fr=pr,ar&&ar.push(...cr.slice(hr).reverse()),cr.length=hr)}return fr}const TY_VALID="valid",TY_MAPPED="mapped",TY_IGNORED="ignored",TY_DISALLOWED="disallowed",TY_EMOJI="emoji",TY_NFC="nfc",TY_STOP="stop";function ens_tokenize(cr,{nf:ar=!0}={}){init$2();let dr=explode_cp(cr).reverse(),fr=[],hr=[];for(;dr.length;){let pr=consume_emoji_reversed(dr,fr);if(pr)hr.push({type:TY_EMOJI,emoji:pr.slice(),input:fr,cps:filter_fe0f(pr)}),fr=[];else{let mr=dr.pop();if(mr==STOP)hr.push({type:TY_STOP,cp:mr});else if(VALID.has(mr))hr.push({type:TY_VALID,cps:[mr]});else if(IGNORED.has(mr))hr.push({type:TY_IGNORED,cp:mr});else{let gr=MAPPED.get(mr);gr?hr.push({type:TY_MAPPED,cp:mr,cps:gr.slice()}):hr.push({type:TY_DISALLOWED,cp:mr})}}}if(ar)for(let pr=0,mr=-1;pr<hr.length;pr++){let gr=hr[pr];if(is_valid_or_mapped(gr.type))if(requires_check(gr.cps)){let yr=pr+1;for(let Sr=yr;Sr<hr.length;Sr++){let{type:vr,cps:Er}=hr[Sr];if(is_valid_or_mapped(vr)){if(!requires_check(Er))break;yr=Sr+1}else if(vr!==TY_IGNORED)break}mr<0&&(mr=pr);let xr=hr.slice(mr,yr),wr=xr.flatMap(Sr=>is_valid_or_mapped(Sr.type)?Sr.cps:[]),br=nfc(wr);compare_arrays(br,wr)?(hr.splice(mr,yr-mr,{type:TY_NFC,input:wr,cps:br,tokens0:collapse_valid_tokens(xr),tokens:ens_tokenize(str_from_cps(br),{nf:!1})}),pr=mr):pr=yr-1,mr=-1}else mr=pr;else gr.type!==TY_IGNORED&&(mr=-1)}return collapse_valid_tokens(hr)}function is_valid_or_mapped(cr){return cr==TY_VALID||cr==TY_MAPPED}function requires_check(cr){return cr.some(ar=>NFC_CHECK.has(ar))}function collapse_valid_tokens(cr){for(let ar=0;ar<cr.length;ar++)if(cr[ar].type==TY_VALID){let dr=ar+1;for(;dr<cr.length&&cr[dr].type==TY_VALID;)dr++;cr.splice(ar,dr-ar,{type:TY_VALID,cps:cr.slice(ar,dr).flatMap(fr=>fr.cps)})}return cr}const dist=Object.freeze(Object.defineProperty({__proto__:null,ens_beautify,ens_emoji,ens_normalize,ens_normalize_fragment,ens_split,ens_tokenize,is_combining_mark,nfc,nfd,safe_str_from_cps,should_escape},Symbol.toStringTag,{value:"Module"}));function accessSetify(cr,ar){return{address:getAddress(cr),storageKeys:ar.map((dr,fr)=>(assertArgument(isHexString(dr,32),"invalid slot",`storageKeys[${fr}]`,dr),dr.toLowerCase()))}}function accessListify(cr){if(Array.isArray(cr))return cr.map((dr,fr)=>Array.isArray(dr)?(assertArgument(dr.length===2,"invalid slot set",`value[${fr}]`,dr),accessSetify(dr[0],dr[1])):(assertArgument(dr!=null&&typeof dr=="object","invalid address-slot set","value",cr),accessSetify(dr.address,dr.storageKeys)));assertArgument(cr!=null&&typeof cr=="object","invalid access list","value",cr);const ar=Object.keys(cr).map(dr=>{const fr=cr[dr].reduce((hr,pr)=>(hr[pr]=!0,hr),{});return accessSetify(dr,Object.keys(fr).sort())});return ar.sort((dr,fr)=>dr.address.localeCompare(fr.address)),ar}function computeAddress(cr){let ar;return typeof cr=="string"?ar=SigningKey.computePublicKey(cr,!1):ar=cr.publicKey,getAddress(keccak256("0x"+ar.substring(4)).substring(26))}function recoverAddress(cr,ar){return computeAddress(SigningKey.recoverPublicKey(cr,ar))}const BN_0$1=BigInt(0),BN_2=BigInt(2),BN_27=BigInt(27),BN_28=BigInt(28),BN_35=BigInt(35),BN_MAX_UINT=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function handleAddress(cr){return cr==="0x"?null:getAddress(cr)}function handleAccessList(cr,ar){try{return accessListify(cr)}catch(dr){assertArgument(!1,dr.message,ar,cr)}}function handleNumber(cr,ar){return cr==="0x"?0:getNumber(cr,ar)}function handleUint(cr,ar){if(cr==="0x")return BN_0$1;const dr=getBigInt(cr,ar);return assertArgument(dr<=BN_MAX_UINT,"value exceeds uint size",ar,dr),dr}function formatNumber(cr,ar){const dr=getBigInt(cr,"value"),fr=toBeArray(dr);return assertArgument(fr.length<=32,"value too large",`tx.${ar}`,dr),fr}function formatAccessList(cr){return accessListify(cr).map(ar=>[ar.address,ar.storageKeys])}function _parseLegacy(cr){const ar=decodeRlp(cr);assertArgument(Array.isArray(ar)&&(ar.length===9||ar.length===6),"invalid field count for legacy transaction","data",cr);const dr={type:0,nonce:handleNumber(ar[0],"nonce"),gasPrice:handleUint(ar[1],"gasPrice"),gasLimit:handleUint(ar[2],"gasLimit"),to:handleAddress(ar[3]),value:handleUint(ar[4],"value"),data:hexlify(ar[5]),chainId:BN_0$1};if(ar.length===6)return dr;const fr=handleUint(ar[6],"v"),hr=handleUint(ar[7],"r"),pr=handleUint(ar[8],"s");if(hr===BN_0$1&&pr===BN_0$1)dr.chainId=fr;else{let mr=(fr-BN_35)/BN_2;mr<BN_0$1&&(mr=BN_0$1),dr.chainId=mr,assertArgument(mr!==BN_0$1||fr===BN_27||fr===BN_28,"non-canonical legacy v","v",ar[6]),dr.signature=Signature.from({r:zeroPadValue(ar[7],32),s:zeroPadValue(ar[8],32),v:fr}),dr.hash=keccak256(cr)}return dr}function _serializeLegacy(cr,ar){const dr=[formatNumber(cr.nonce||0,"nonce"),formatNumber(cr.gasPrice||0,"gasPrice"),formatNumber(cr.gasLimit||0,"gasLimit"),cr.to!=null?getAddress(cr.to):"0x",formatNumber(cr.value||0,"value"),cr.data||"0x"];let fr=BN_0$1;if(cr.chainId!=BN_0$1)fr=getBigInt(cr.chainId,"tx.chainId"),assertArgument(!ar||ar.networkV==null||ar.legacyChainId===fr,"tx.chainId/sig.v mismatch","sig",ar);else if(cr.signature){const pr=cr.signature.legacyChainId;pr!=null&&(fr=pr)}if(!ar)return fr!==BN_0$1&&(dr.push(toBeArray(fr)),dr.push("0x"),dr.push("0x")),encodeRlp(dr);let hr=BigInt(27+ar.yParity);return fr!==BN_0$1?hr=Signature.getChainIdV(fr,ar.v):BigInt(ar.v)!==hr&&assertArgument(!1,"tx.chainId/sig.v mismatch","sig",ar),dr.push(toBeArray(hr)),dr.push(toBeArray(ar.r)),dr.push(toBeArray(ar.s)),encodeRlp(dr)}function _parseEipSignature(cr,ar){let dr;try{if(dr=handleNumber(ar[0],"yParity"),dr!==0&&dr!==1)throw new Error("bad yParity")}catch{assertArgument(!1,"invalid yParity","yParity",ar[0])}const fr=zeroPadValue(ar[1],32),hr=zeroPadValue(ar[2],32),pr=Signature.from({r:fr,s:hr,yParity:dr});cr.signature=pr}function _parseEip1559(cr){const ar=decodeRlp(getBytes(cr).slice(1));assertArgument(Array.isArray(ar)&&(ar.length===9||ar.length===12),"invalid field count for transaction type: 2","data",hexlify(cr));const dr=handleUint(ar[2],"maxPriorityFeePerGas"),fr=handleUint(ar[3],"maxFeePerGas"),hr={type:2,chainId:handleUint(ar[0],"chainId"),nonce:handleNumber(ar[1],"nonce"),maxPriorityFeePerGas:dr,maxFeePerGas:fr,gasPrice:null,gasLimit:handleUint(ar[4],"gasLimit"),to:handleAddress(ar[5]),value:handleUint(ar[6],"value"),data:hexlify(ar[7]),accessList:handleAccessList(ar[8],"accessList")};return ar.length===9||(hr.hash=keccak256(cr),_parseEipSignature(hr,ar.slice(9))),hr}function _serializeEip1559(cr,ar){const dr=[formatNumber(cr.chainId||0,"chainId"),formatNumber(cr.nonce||0,"nonce"),formatNumber(cr.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(cr.maxFeePerGas||0,"maxFeePerGas"),formatNumber(cr.gasLimit||0,"gasLimit"),cr.to!=null?getAddress(cr.to):"0x",formatNumber(cr.value||0,"value"),cr.data||"0x",formatAccessList(cr.accessList||[])];return ar&&(dr.push(formatNumber(ar.yParity,"yParity")),dr.push(toBeArray(ar.r)),dr.push(toBeArray(ar.s))),concat$4(["0x02",encodeRlp(dr)])}function _parseEip2930(cr){const ar=decodeRlp(getBytes(cr).slice(1));assertArgument(Array.isArray(ar)&&(ar.length===8||ar.length===11),"invalid field count for transaction type: 1","data",hexlify(cr));const dr={type:1,chainId:handleUint(ar[0],"chainId"),nonce:handleNumber(ar[1],"nonce"),gasPrice:handleUint(ar[2],"gasPrice"),gasLimit:handleUint(ar[3],"gasLimit"),to:handleAddress(ar[4]),value:handleUint(ar[5],"value"),data:hexlify(ar[6]),accessList:handleAccessList(ar[7],"accessList")};return ar.length===8||(dr.hash=keccak256(cr),_parseEipSignature(dr,ar.slice(8))),dr}function _serializeEip2930(cr,ar){const dr=[formatNumber(cr.chainId||0,"chainId"),formatNumber(cr.nonce||0,"nonce"),formatNumber(cr.gasPrice||0,"gasPrice"),formatNumber(cr.gasLimit||0,"gasLimit"),cr.to!=null?getAddress(cr.to):"0x",formatNumber(cr.value||0,"value"),cr.data||"0x",formatAccessList(cr.accessList||[])];return ar&&(dr.push(formatNumber(ar.yParity,"recoveryParam")),dr.push(toBeArray(ar.r)),dr.push(toBeArray(ar.s))),concat$4(["0x01",encodeRlp(dr)])}class Transaction{#e;#t;#r;#n;#s;#a;#i;#o;#c;#d;#u;#f;get type(){return this.#e}set type(ar){switch(ar){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;default:assertArgument(!1,"unsupported transaction type","type",ar)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return this.#t}set to(ar){this.#t=ar==null?null:getAddress(ar)}get nonce(){return this.#n}set nonce(ar){this.#n=getNumber(ar,"value")}get gasLimit(){return this.#s}set gasLimit(ar){this.#s=getBigInt(ar)}get gasPrice(){const ar=this.#a;return ar==null&&(this.type===0||this.type===1)?BN_0$1:ar}set gasPrice(ar){this.#a=ar==null?null:getBigInt(ar,"gasPrice")}get maxPriorityFeePerGas(){const ar=this.#i;return ar??(this.type===2?BN_0$1:null)}set maxPriorityFeePerGas(ar){this.#i=ar==null?null:getBigInt(ar,"maxPriorityFeePerGas")}get maxFeePerGas(){const ar=this.#o;return ar??(this.type===2?BN_0$1:null)}set maxFeePerGas(ar){this.#o=ar==null?null:getBigInt(ar,"maxFeePerGas")}get data(){return this.#r}set data(ar){this.#r=hexlify(ar)}get value(){return this.#c}set value(ar){this.#c=getBigInt(ar,"value")}get chainId(){return this.#d}set chainId(ar){this.#d=getBigInt(ar)}get signature(){return this.#u||null}set signature(ar){this.#u=ar==null?null:Signature.from(ar)}get accessList(){const ar=this.#f||null;return ar??(this.type===1||this.type===2?[]:null)}set accessList(ar){this.#f=ar==null?null:accessListify(ar)}constructor(){this.#e=null,this.#t=null,this.#n=0,this.#s=BigInt(0),this.#a=null,this.#i=null,this.#o=null,this.#r="0x",this.#c=BigInt(0),this.#d=BigInt(0),this.#u=null,this.#f=null}get hash(){return this.signature==null?null:keccak256(this.serialized)}get unsignedHash(){return keccak256(this.unsignedSerialized)}get from(){return this.signature==null?null:recoverAddress(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:SigningKey.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){switch(assert$9(this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return _serializeLegacy(this,this.signature);case 1:return _serializeEip2930(this,this.signature);case 2:return _serializeEip1559(this,this.signature)}assert$9(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return _serializeLegacy(this);case 1:return _serializeEip2930(this);case 2:return _serializeEip1559(this)}assert$9(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const ar=this.gasPrice!=null,dr=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,fr=this.accessList!=null;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&assert$9(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),assert$9(!dr||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),assert$9(this.type!==0||!fr,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const hr=[];return this.type!=null?hr.push(this.type):dr?hr.push(2):ar?(hr.push(1),fr||hr.push(0)):fr?(hr.push(1),hr.push(2)):(hr.push(0),hr.push(1),hr.push(2)),hr.sort(),hr}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}clone(){return Transaction.from(this)}toJSON(){const ar=dr=>dr==null?null:dr.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:ar(this.gasLimit),gasPrice:ar(this.gasPrice),maxPriorityFeePerGas:ar(this.maxPriorityFeePerGas),maxFeePerGas:ar(this.maxFeePerGas),value:ar(this.value),chainId:ar(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(ar){if(ar==null)return new Transaction;if(typeof ar=="string"){const fr=getBytes(ar);if(fr[0]>=127)return Transaction.from(_parseLegacy(fr));switch(fr[0]){case 1:return Transaction.from(_parseEip2930(fr));case 2:return Transaction.from(_parseEip1559(fr))}assert$9(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const dr=new Transaction;return ar.type!=null&&(dr.type=ar.type),ar.to!=null&&(dr.to=ar.to),ar.nonce!=null&&(dr.nonce=ar.nonce),ar.gasLimit!=null&&(dr.gasLimit=ar.gasLimit),ar.gasPrice!=null&&(dr.gasPrice=ar.gasPrice),ar.maxPriorityFeePerGas!=null&&(dr.maxPriorityFeePerGas=ar.maxPriorityFeePerGas),ar.maxFeePerGas!=null&&(dr.maxFeePerGas=ar.maxFeePerGas),ar.data!=null&&(dr.data=ar.data),ar.value!=null&&(dr.value=ar.value),ar.chainId!=null&&(dr.chainId=ar.chainId),ar.signature!=null&&(dr.signature=Signature.from(ar.signature)),ar.accessList!=null&&(dr.accessList=ar.accessList),ar.hash!=null&&(assertArgument(dr.isSigned(),"unsigned transaction cannot define hash","tx",ar),assertArgument(dr.hash===ar.hash,"hash mismatch","tx",ar)),ar.from!=null&&(assertArgument(dr.isSigned(),"unsigned transaction cannot define from","tx",ar),assertArgument(dr.from.toLowerCase()===(ar.from||"").toLowerCase(),"from mismatch","tx",ar)),dr}}function hashMessage(cr){return typeof cr=="string"&&(cr=toUtf8Bytes(cr)),keccak256(concat$4([toUtf8Bytes(MessagePrefix),toUtf8Bytes(String(cr.length)),cr]))}function verifyMessage(cr,ar){const dr=hashMessage(cr);return recoverAddress(dr,ar)}const padding=new Uint8Array(32);padding.fill(0);const BN__1=BigInt(-1),BN_0=BigInt(0),BN_1=BigInt(1),BN_MAX_UINT256=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(cr){const ar=getBytes(cr),dr=ar.length%32;return dr?concat$4([ar,padding.slice(dr)]):hexlify(ar)}const hexTrue=toBeHex(BN_1,32),hexFalse=toBeHex(BN_0,32),domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(cr){return function(ar){return assertArgument(typeof ar=="string",`invalid domain value for ${JSON.stringify(cr)}`,`domain.${cr}`,ar),ar}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(cr){const ar=getBigInt(cr,"domain.chainId");return assertArgument(ar>=0,"invalid chain ID","domain.chainId",cr),Number.isSafeInteger(ar)?Number(ar):toQuantity(ar)},verifyingContract:function(cr){try{return getAddress(cr).toLowerCase()}catch{}assertArgument(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",cr)},salt:function(cr){const ar=getBytes(cr,"domain.salt");return assertArgument(ar.length===32,'invalid domain value "salt"',"domain.salt",cr),hexlify(ar)}};function getBaseEncoder(cr){{const ar=cr.match(/^(u?)int(\d*)$/);if(ar){const dr=ar[1]==="",fr=parseInt(ar[2]||"256");assertArgument(fr%8===0&&fr!==0&&fr<=256&&(ar[2]==null||ar[2]===String(fr)),"invalid numeric width","type",cr);const hr=mask(BN_MAX_UINT256,dr?fr-1:fr),pr=dr?(hr+BN_1)*BN__1:BN_0;return function(mr){const gr=getBigInt(mr,"value");return assertArgument(gr>=pr&&gr<=hr,`value out-of-bounds for ${cr}`,"value",gr),toBeHex(dr?toTwos(gr,256):gr,32)}}}{const ar=cr.match(/^bytes(\d+)$/);if(ar){const dr=parseInt(ar[1]);return assertArgument(dr!==0&&dr<=32&&ar[1]===String(dr),"invalid bytes width","type",cr),function(fr){const hr=getBytes(fr);return assertArgument(hr.length===dr,`invalid length for ${cr}`,"value",fr),hexPadRight(fr)}}}switch(cr){case"address":return function(ar){return zeroPadValue(getAddress(ar),32)};case"bool":return function(ar){return ar?hexTrue:hexFalse};case"bytes":return function(ar){return keccak256(ar)};case"string":return function(ar){return id$1(ar)}}return null}function encodeType(cr,ar){return`${cr}(${ar.map(({name:dr,type:fr})=>fr+" "+dr).join(",")})`}class TypedDataEncoder{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#r;constructor(ar){this.#e=JSON.stringify(ar),this.#t=new Map,this.#r=new Map;const dr=new Map,fr=new Map,hr=new Map;Object.keys(ar).forEach(gr=>{dr.set(gr,new Set),fr.set(gr,[]),hr.set(gr,new Set)});for(const gr in ar){const yr=new Set;for(const xr of ar[gr]){assertArgument(!yr.has(xr.name),`duplicate variable name ${JSON.stringify(xr.name)} in ${JSON.stringify(gr)}`,"types",ar),yr.add(xr.name);const wr=xr.type.match(/^([^\x5b]*)(\x5b|$)/)[1]||null;assertArgument(wr!==gr,`circular type reference to ${JSON.stringify(wr)}`,"types",ar),!getBaseEncoder(wr)&&(assertArgument(fr.has(wr),`unknown type ${JSON.stringify(wr)}`,"types",ar),fr.get(wr).push(gr),dr.get(gr).add(wr))}}const pr=Array.from(fr.keys()).filter(gr=>fr.get(gr).length===0);assertArgument(pr.length!==0,"missing primary type","types",ar),assertArgument(pr.length===1,`ambiguous primary types or unused types: ${pr.map(gr=>JSON.stringify(gr)).join(", ")}`,"types",ar),defineProperties(this,{primaryType:pr[0]});function mr(gr,yr){assertArgument(!yr.has(gr),`circular type reference to ${JSON.stringify(gr)}`,"types",ar),yr.add(gr);for(const xr of dr.get(gr))if(fr.has(xr)){mr(xr,yr);for(const wr of yr)hr.get(wr).add(xr)}yr.delete(gr)}mr(this.primaryType,new Set);for(const[gr,yr]of hr){const xr=Array.from(yr);xr.sort(),this.#t.set(gr,encodeType(gr,ar[gr])+xr.map(wr=>encodeType(wr,ar[wr])).join(""))}}getEncoder(ar){let dr=this.#r.get(ar);return dr||(dr=this.#n(ar),this.#r.set(ar,dr)),dr}#n(ar){{const hr=getBaseEncoder(ar);if(hr)return hr}const dr=ar.match(/^(.*)(\x5b(\d*)\x5d)$/);if(dr){const hr=dr[1],pr=this.getEncoder(hr);return mr=>{assertArgument(!dr[3]||parseInt(dr[3])===mr.length,`array length mismatch; expected length ${parseInt(dr[3])}`,"value",mr);let gr=mr.map(pr);return this.#t.has(hr)&&(gr=gr.map(keccak256)),keccak256(concat$4(gr))}}const fr=this.types[ar];if(fr){const hr=id$1(this.#t.get(ar));return pr=>{const mr=fr.map(({name:gr,type:yr})=>{const xr=this.getEncoder(yr)(pr[gr]);return this.#t.has(yr)?keccak256(xr):xr});return mr.unshift(hr),concat$4(mr)}}assertArgument(!1,`unknown type: ${ar}`,"type",ar)}encodeType(ar){const dr=this.#t.get(ar);return assertArgument(dr,`unknown type: ${JSON.stringify(ar)}`,"name",ar),dr}encodeData(ar,dr){return this.getEncoder(ar)(dr)}hashStruct(ar,dr){return keccak256(this.encodeData(ar,dr))}encode(ar){return this.encodeData(this.primaryType,ar)}hash(ar){return this.hashStruct(this.primaryType,ar)}_visit(ar,dr,fr){if(getBaseEncoder(ar))return fr(ar,dr);const hr=ar.match(/^(.*)(\x5b(\d*)\x5d)$/);if(hr)return assertArgument(!hr[3]||parseInt(hr[3])===dr.length,`array length mismatch; expected length ${parseInt(hr[3])}`,"value",dr),dr.map(mr=>this._visit(hr[1],mr,fr));const pr=this.types[ar];if(pr)return pr.reduce((mr,{name:gr,type:yr})=>(mr[gr]=this._visit(yr,dr[gr],fr),mr),{});assertArgument(!1,`unknown type: ${ar}`,"type",ar)}visit(ar,dr){return this._visit(this.primaryType,ar,dr)}static from(ar){return new TypedDataEncoder(ar)}static getPrimaryType(ar){return TypedDataEncoder.from(ar).primaryType}static hashStruct(ar,dr,fr){return TypedDataEncoder.from(dr).hashStruct(ar,fr)}static hashDomain(ar){const dr=[];for(const fr in ar){if(ar[fr]==null)continue;const hr=domainFieldTypes[fr];assertArgument(hr,`invalid typed-data domain key: ${JSON.stringify(fr)}`,"domain",ar),dr.push({name:fr,type:hr})}return dr.sort((fr,hr)=>domainFieldNames.indexOf(fr.name)-domainFieldNames.indexOf(hr.name)),TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:dr},ar)}static encode(ar,dr,fr){return concat$4(["0x1901",TypedDataEncoder.hashDomain(ar),TypedDataEncoder.from(dr).hash(fr)])}static hash(ar,dr,fr){return keccak256(TypedDataEncoder.encode(ar,dr,fr))}static async resolveNames(ar,dr,fr,hr){ar=Object.assign({},ar);for(const gr in ar)ar[gr]==null&&delete ar[gr];const pr={};ar.verifyingContract&&!isHexString(ar.verifyingContract,20)&&(pr[ar.verifyingContract]="0x");const mr=TypedDataEncoder.from(dr);mr.visit(fr,(gr,yr)=>(gr==="address"&&!isHexString(yr,20)&&(pr[yr]="0x"),yr));for(const gr in pr)pr[gr]=await hr(gr);return ar.verifyingContract&&pr[ar.verifyingContract]&&(ar.verifyingContract=pr[ar.verifyingContract]),fr=mr.visit(fr,(gr,yr)=>gr==="address"&&pr[yr]?pr[yr]:yr),{domain:ar,value:fr}}static getPayload(ar,dr,fr){TypedDataEncoder.hashDomain(ar);const hr={},pr=[];domainFieldNames.forEach(yr=>{const xr=ar[yr];xr!=null&&(hr[yr]=domainChecks[yr](xr),pr.push({name:yr,type:domainFieldTypes[yr]}))});const mr=TypedDataEncoder.from(dr),gr=Object.assign({},dr);return assertArgument(gr.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",dr),gr.EIP712Domain=pr,mr.encode(fr),{types:gr,domain:hr,primaryType:mr.primaryType,message:mr.visit(fr,(yr,xr)=>{if(yr.match(/^bytes(\d*)/))return hexlify(getBytes(xr));if(yr.match(/^u?int/))return getBigInt(xr).toString();switch(yr){case"address":return xr.toLowerCase();case"bool":return!!xr;case"string":return assertArgument(typeof xr=="string","invalid string","value",xr),xr}assertArgument(!1,"unsupported type","type",yr)})}}}BigInt(0);function copyRequest(cr){const ar={};cr.to&&(ar.to=cr.to),cr.from&&(ar.from=cr.from),cr.data&&(ar.data=hexlify(cr.data));const dr="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const hr of dr)!(hr in cr)||cr[hr]==null||(ar[hr]=getBigInt(cr[hr],`request.${hr}`));const fr="type,nonce".split(/,/);for(const hr of fr)!(hr in cr)||cr[hr]==null||(ar[hr]=getNumber(cr[hr],`request.${hr}`));return cr.accessList&&(ar.accessList=accessListify(cr.accessList)),"blockTag"in cr&&(ar.blockTag=cr.blockTag),"enableCcipRead"in cr&&(ar.enableCcipRead=!!cr.enableCcipRead),"customData"in cr&&(ar.customData=cr.customData),ar}function checkProvider(cr,ar){if(cr.provider)return cr.provider;assert$9(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:ar})}async function populate(cr,ar){let dr=copyRequest(ar);if(dr.to!=null&&(dr.to=resolveAddress(dr.to,cr)),dr.from!=null){const fr=dr.from;dr.from=Promise.all([cr.getAddress(),resolveAddress(fr,cr)]).then(([hr,pr])=>(assertArgument(hr.toLowerCase()===pr.toLowerCase(),"transaction from mismatch","tx.from",pr),hr))}else dr.from=cr.getAddress();return await resolveProperties(dr)}class AbstractSigner{provider;constructor(ar){defineProperties(this,{provider:ar||null})}async getNonce(ar){return checkProvider(this,"getTransactionCount").getTransactionCount(await this.getAddress(),ar)}async populateCall(ar){return await populate(this,ar)}async populateTransaction(ar){const dr=checkProvider(this,"populateTransaction"),fr=await populate(this,ar);fr.nonce==null&&(fr.nonce=await this.getNonce("pending")),fr.gasLimit==null&&(fr.gasLimit=await this.estimateGas(fr));const hr=await this.provider.getNetwork();if(fr.chainId!=null){const mr=getBigInt(fr.chainId);assertArgument(mr===hr.chainId,"transaction chainId mismatch","tx.chainId",ar.chainId)}else fr.chainId=hr.chainId;const pr=fr.maxFeePerGas!=null||fr.maxPriorityFeePerGas!=null;if(fr.gasPrice!=null&&(fr.type===2||pr)?assertArgument(!1,"eip-1559 transaction do not support gasPrice","tx",ar):(fr.type===0||fr.type===1)&&pr&&assertArgument(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",ar),(fr.type===2||fr.type==null)&&fr.maxFeePerGas!=null&&fr.maxPriorityFeePerGas!=null)fr.type=2;else if(fr.type===0||fr.type===1){const mr=await dr.getFeeData();assert$9(mr.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),fr.gasPrice==null&&(fr.gasPrice=mr.gasPrice)}else{const mr=await dr.getFeeData();if(fr.type==null)if(mr.maxFeePerGas!=null&&mr.maxPriorityFeePerGas!=null)if(fr.type=2,fr.gasPrice!=null){const gr=fr.gasPrice;delete fr.gasPrice,fr.maxFeePerGas=gr,fr.maxPriorityFeePerGas=gr}else fr.maxFeePerGas==null&&(fr.maxFeePerGas=mr.maxFeePerGas),fr.maxPriorityFeePerGas==null&&(fr.maxPriorityFeePerGas=mr.maxPriorityFeePerGas);else mr.gasPrice!=null?(assert$9(!pr,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),fr.gasPrice==null&&(fr.gasPrice=mr.gasPrice),fr.type=0):assert$9(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else fr.type===2&&(fr.maxFeePerGas==null&&(fr.maxFeePerGas=mr.maxFeePerGas),fr.maxPriorityFeePerGas==null&&(fr.maxPriorityFeePerGas=mr.maxPriorityFeePerGas))}return await resolveProperties(fr)}async estimateGas(ar){return checkProvider(this,"estimateGas").estimateGas(await this.populateCall(ar))}async call(ar){return checkProvider(this,"call").call(await this.populateCall(ar))}async resolveName(ar){return await checkProvider(this,"resolveName").resolveName(ar)}async sendTransaction(ar){const dr=checkProvider(this,"sendTransaction"),fr=await this.populateTransaction(ar);delete fr.from;const hr=Transaction.from(fr);return await dr.broadcastTransaction(await this.signTransaction(hr))}}class VoidSigner extends AbstractSigner{address;constructor(ar,dr){super(dr),defineProperties(this,{address:ar})}async getAddress(){return this.address}connect(ar){return new VoidSigner(this.address,ar)}#e(ar,dr){assert$9(!1,`VoidSigner cannot sign ${ar}`,"UNSUPPORTED_OPERATION",{operation:dr})}async signTransaction(ar){this.#e("transactions","signTransaction")}async signMessage(ar){this.#e("messages","signMessage")}async signTypedData(ar,dr,fr){this.#e("typed-data","signTypedData")}}class BaseWallet extends AbstractSigner{address;#e;constructor(ar,dr){super(dr),assertArgument(ar&&typeof ar.sign=="function","invalid private key","privateKey","[ REDACTED ]"),this.#e=ar;const fr=computeAddress(this.signingKey.publicKey);defineProperties(this,{address:fr})}get signingKey(){return this.#e}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(ar){return new BaseWallet(this.#e,ar)}async signTransaction(ar){const{to:dr,from:fr}=await resolveProperties({to:ar.to?resolveAddress(ar.to,this.provider):void 0,from:ar.from?resolveAddress(ar.from,this.provider):void 0});dr!=null&&(ar.to=dr),fr!=null&&(ar.from=fr),ar.from!=null&&(assertArgument(getAddress(ar.from)===this.address,"transaction from address mismatch","tx.from",ar.from),delete ar.from);const hr=Transaction.from(ar);return hr.signature=this.signingKey.sign(hr.unsignedHash),hr.serialized}async signMessage(ar){return this.signMessageSync(ar)}signMessageSync(ar){return this.signingKey.sign(hashMessage(ar)).serialized}async signTypedData(ar,dr,fr){const hr=await TypedDataEncoder.resolveNames(ar,dr,fr,async pr=>{assert$9(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:pr}});const mr=await this.provider.resolveName(pr);return assert$9(mr!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:pr}),mr});return this.signingKey.sign(TypedDataEncoder.hash(hr.domain,dr,hr.value)).serialized}}const subsChrs=" !#$%&'()*+,-./<=>?@[]^_`{|}~",Word=/^[a-z]*$/i;function unfold(cr,ar){let dr=97;return cr.reduce((fr,hr)=>(hr===ar?dr++:hr.match(Word)?fr.push(String.fromCharCode(dr)+hr):(dr=97,fr.push(hr)),fr),[])}function decode$g(cr,ar){for(let hr=subsChrs.length-1;hr>=0;hr--)cr=cr.split(subsChrs[hr]).join(ar.substring(2*hr,2*hr+2));const dr=[],fr=cr.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(hr,pr,mr,gr)=>{if(mr)for(let yr=parseInt(mr);yr>=0;yr--)dr.push(";");else dr.push(pr.toLowerCase());return""});if(fr)throw new Error(`leftovers: ${JSON.stringify(fr)}`);return unfold(unfold(dr,";"),":")}function decodeOwl$1(cr){return assertArgument(cr[0]==="0","unsupported auwl data","data",cr),decode$g(cr.substring(1+2*subsChrs.length),cr.substring(1,1+2*subsChrs.length))}class Wordlist{locale;constructor(ar){defineProperties(this,{locale:ar})}split(ar){return ar.toLowerCase().split(/\s+/g)}join(ar){return ar.join(" ")}}class WordlistOwl extends Wordlist{#e;#t;constructor(ar,dr,fr){super(ar),this.#e=dr,this.#t=fr,this.#r=null}get _data(){return this.#e}_decodeWords(){return decodeOwl$1(this.#e)}#r;#n(){if(this.#r==null){const ar=this._decodeWords();if(id$1(ar.join(`
`)+`
`)!==this.#t)throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#r=ar}return this.#r}getWord(ar){const dr=this.#n();return assertArgument(ar>=0&&ar<dr.length,`invalid word index: ${ar}`,"index",ar),dr[ar]}getWordIndex(ar){return this.#n().indexOf(ar)}}const words="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",checksum="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let wordlist$1=null;class LangEn extends WordlistOwl{constructor(){super("en",words,checksum)}static wordlist(){return wordlist$1==null&&(wordlist$1=new LangEn),wordlist$1}}function getUpperMask(cr){return(1<<cr)-1<<8-cr&255}function getLowerMask(cr){return(1<<cr)-1&255}function mnemonicToEntropy(cr,ar){assertNormalize("NFKD"),ar==null&&(ar=LangEn.wordlist());const dr=ar.split(cr);assertArgument(dr.length%3===0&&dr.length>=12&&dr.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const fr=new Uint8Array(Math.ceil(11*dr.length/8));let hr=0;for(let xr=0;xr<dr.length;xr++){let wr=ar.getWordIndex(dr[xr].normalize("NFKD"));assertArgument(wr>=0,`invalid mnemonic word at index ${xr}`,"mnemonic","[ REDACTED ]");for(let br=0;br<11;br++)wr&1<<10-br&&(fr[hr>>3]|=1<<7-hr%8),hr++}const pr=32*dr.length/3,mr=dr.length/3,gr=getUpperMask(mr),yr=getBytes(sha256$4(fr.slice(0,pr/8)))[0]&gr;return assertArgument(yr===(fr[fr.length-1]&gr),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),hexlify(fr.slice(0,pr/8))}function entropyToMnemonic(cr,ar){assertArgument(cr.length%4===0&&cr.length>=16&&cr.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),ar==null&&(ar=LangEn.wordlist());const dr=[0];let fr=11;for(let mr=0;mr<cr.length;mr++)fr>8?(dr[dr.length-1]<<=8,dr[dr.length-1]|=cr[mr],fr-=8):(dr[dr.length-1]<<=fr,dr[dr.length-1]|=cr[mr]>>8-fr,dr.push(cr[mr]&getLowerMask(8-fr)),fr+=3);const hr=cr.length/4,pr=parseInt(sha256$4(cr).substring(2,4),16)&getUpperMask(hr);return dr[dr.length-1]<<=hr,dr[dr.length-1]|=pr>>8-hr,ar.join(dr.map(mr=>ar.getWord(mr)))}const _guard$1={};class Mnemonic{phrase;password;wordlist;entropy;constructor(ar,dr,fr,hr,pr){hr==null&&(hr=""),pr==null&&(pr=LangEn.wordlist()),assertPrivate(ar,_guard$1,"Mnemonic"),defineProperties(this,{phrase:fr,password:hr,wordlist:pr,entropy:dr})}computeSeed(){const ar=toUtf8Bytes("mnemonic"+this.password,"NFKD");return pbkdf2$1(toUtf8Bytes(this.phrase,"NFKD"),ar,2048,64,"sha512")}static fromPhrase(ar,dr,fr){const hr=mnemonicToEntropy(ar,fr);return ar=entropyToMnemonic(getBytes(hr),fr),new Mnemonic(_guard$1,hr,ar,dr,fr)}static fromEntropy(ar,dr,fr){const hr=getBytes(ar,"entropy"),pr=entropyToMnemonic(hr,fr);return new Mnemonic(_guard$1,hexlify(hr),pr,dr,fr)}static entropyToPhrase(ar,dr){const fr=getBytes(ar,"entropy");return entropyToMnemonic(fr,dr)}static phraseToEntropy(ar,dr){return mnemonicToEntropy(ar,dr)}static isValidMnemonic(ar,dr){try{return mnemonicToEntropy(ar,dr),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var __classPrivateFieldGet$l=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},__classPrivateFieldSet$i=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},_AES_key,_AES_Kd,_AES_Ke;const numberOfRounds={16:10,24:12,32:14},rcon$1=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],S=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Si=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],T1=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],T2=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],T3=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],T4=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],T5=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],T6=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],T7=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],T8=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],U1=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],U2=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],U3=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],U4=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function convertToInt32(cr){const ar=[];for(let dr=0;dr<cr.length;dr+=4)ar.push(cr[dr]<<24|cr[dr+1]<<16|cr[dr+2]<<8|cr[dr+3]);return ar}class AES{get key(){return __classPrivateFieldGet$l(this,_AES_key,"f").slice()}constructor(ar){if(_AES_key.set(this,void 0),_AES_Kd.set(this,void 0),_AES_Ke.set(this,void 0),!(this instanceof AES))throw Error("AES must be instanitated with `new`");__classPrivateFieldSet$i(this,_AES_key,new Uint8Array(ar),"f");const dr=numberOfRounds[this.key.length];if(dr==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");__classPrivateFieldSet$i(this,_AES_Ke,[],"f"),__classPrivateFieldSet$i(this,_AES_Kd,[],"f");for(let wr=0;wr<=dr;wr++)__classPrivateFieldGet$l(this,_AES_Ke,"f").push([0,0,0,0]),__classPrivateFieldGet$l(this,_AES_Kd,"f").push([0,0,0,0]);const fr=(dr+1)*4,hr=this.key.length/4,pr=convertToInt32(this.key);let mr;for(let wr=0;wr<hr;wr++)mr=wr>>2,__classPrivateFieldGet$l(this,_AES_Ke,"f")[mr][wr%4]=pr[wr],__classPrivateFieldGet$l(this,_AES_Kd,"f")[dr-mr][wr%4]=pr[wr];let gr=0,yr=hr,xr;for(;yr<fr;){if(xr=pr[hr-1],pr[0]^=S[xr>>16&255]<<24^S[xr>>8&255]<<16^S[xr&255]<<8^S[xr>>24&255]^rcon$1[gr]<<24,gr+=1,hr!=8)for(let vr=1;vr<hr;vr++)pr[vr]^=pr[vr-1];else{for(let vr=1;vr<hr/2;vr++)pr[vr]^=pr[vr-1];xr=pr[hr/2-1],pr[hr/2]^=S[xr&255]^S[xr>>8&255]<<8^S[xr>>16&255]<<16^S[xr>>24&255]<<24;for(let vr=hr/2+1;vr<hr;vr++)pr[vr]^=pr[vr-1]}let wr=0,br,Sr;for(;wr<hr&&yr<fr;)br=yr>>2,Sr=yr%4,__classPrivateFieldGet$l(this,_AES_Ke,"f")[br][Sr]=pr[wr],__classPrivateFieldGet$l(this,_AES_Kd,"f")[dr-br][Sr]=pr[wr++],yr++}for(let wr=1;wr<dr;wr++)for(let br=0;br<4;br++)xr=__classPrivateFieldGet$l(this,_AES_Kd,"f")[wr][br],__classPrivateFieldGet$l(this,_AES_Kd,"f")[wr][br]=U1[xr>>24&255]^U2[xr>>16&255]^U3[xr>>8&255]^U4[xr&255]}encrypt(ar){if(ar.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const dr=__classPrivateFieldGet$l(this,_AES_Ke,"f").length-1,fr=[0,0,0,0];let hr=convertToInt32(ar);for(let gr=0;gr<4;gr++)hr[gr]^=__classPrivateFieldGet$l(this,_AES_Ke,"f")[0][gr];for(let gr=1;gr<dr;gr++){for(let yr=0;yr<4;yr++)fr[yr]=T1[hr[yr]>>24&255]^T2[hr[(yr+1)%4]>>16&255]^T3[hr[(yr+2)%4]>>8&255]^T4[hr[(yr+3)%4]&255]^__classPrivateFieldGet$l(this,_AES_Ke,"f")[gr][yr];hr=fr.slice()}const pr=new Uint8Array(16);let mr=0;for(let gr=0;gr<4;gr++)mr=__classPrivateFieldGet$l(this,_AES_Ke,"f")[dr][gr],pr[4*gr]=(S[hr[gr]>>24&255]^mr>>24)&255,pr[4*gr+1]=(S[hr[(gr+1)%4]>>16&255]^mr>>16)&255,pr[4*gr+2]=(S[hr[(gr+2)%4]>>8&255]^mr>>8)&255,pr[4*gr+3]=(S[hr[(gr+3)%4]&255]^mr)&255;return pr}decrypt(ar){if(ar.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const dr=__classPrivateFieldGet$l(this,_AES_Kd,"f").length-1,fr=[0,0,0,0];let hr=convertToInt32(ar);for(let gr=0;gr<4;gr++)hr[gr]^=__classPrivateFieldGet$l(this,_AES_Kd,"f")[0][gr];for(let gr=1;gr<dr;gr++){for(let yr=0;yr<4;yr++)fr[yr]=T5[hr[yr]>>24&255]^T6[hr[(yr+3)%4]>>16&255]^T7[hr[(yr+2)%4]>>8&255]^T8[hr[(yr+1)%4]&255]^__classPrivateFieldGet$l(this,_AES_Kd,"f")[gr][yr];hr=fr.slice()}const pr=new Uint8Array(16);let mr=0;for(let gr=0;gr<4;gr++)mr=__classPrivateFieldGet$l(this,_AES_Kd,"f")[dr][gr],pr[4*gr]=(Si[hr[gr]>>24&255]^mr>>24)&255,pr[4*gr+1]=(Si[hr[(gr+3)%4]>>16&255]^mr>>16)&255,pr[4*gr+2]=(Si[hr[(gr+2)%4]>>8&255]^mr>>8)&255,pr[4*gr+3]=(Si[hr[(gr+1)%4]&255]^mr)&255;return pr}}_AES_key=new WeakMap,_AES_Kd=new WeakMap,_AES_Ke=new WeakMap;class ModeOfOperation{constructor(ar,dr,fr){if(fr&&!(this instanceof fr))throw new Error(`${ar} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new AES(dr)},name:{enumerable:!0,value:ar}})}}var __classPrivateFieldSet$h=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},__classPrivateFieldGet$k=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_CBC_iv,_CBC_lastBlock;class CBC extends ModeOfOperation{constructor(ar,dr){if(super("ECC",ar,CBC),_CBC_iv.set(this,void 0),_CBC_lastBlock.set(this,void 0),dr){if(dr.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");__classPrivateFieldSet$h(this,_CBC_iv,new Uint8Array(dr),"f")}else __classPrivateFieldSet$h(this,_CBC_iv,new Uint8Array(16),"f");__classPrivateFieldSet$h(this,_CBC_lastBlock,this.iv,"f")}get iv(){return new Uint8Array(__classPrivateFieldGet$k(this,_CBC_iv,"f"))}encrypt(ar){if(ar.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const dr=new Uint8Array(ar.length);for(let fr=0;fr<ar.length;fr+=16){for(let hr=0;hr<16;hr++)__classPrivateFieldGet$k(this,_CBC_lastBlock,"f")[hr]^=ar[fr+hr];__classPrivateFieldSet$h(this,_CBC_lastBlock,this.aes.encrypt(__classPrivateFieldGet$k(this,_CBC_lastBlock,"f")),"f"),dr.set(__classPrivateFieldGet$k(this,_CBC_lastBlock,"f"),fr)}return dr}decrypt(ar){if(ar.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const dr=new Uint8Array(ar.length);for(let fr=0;fr<ar.length;fr+=16){const hr=this.aes.decrypt(ar.subarray(fr,fr+16));for(let pr=0;pr<16;pr++)dr[fr+pr]=hr[pr]^__classPrivateFieldGet$k(this,_CBC_lastBlock,"f")[pr],__classPrivateFieldGet$k(this,_CBC_lastBlock,"f")[pr]=ar[fr+pr]}return dr}}_CBC_iv=new WeakMap,_CBC_lastBlock=new WeakMap;var __classPrivateFieldSet$g=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},__classPrivateFieldGet$j=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_CFB_instances,_CFB_iv,_CFB_shiftRegister,_CFB_shift;class CFB extends ModeOfOperation{constructor(ar,dr,fr=8){if(super("CFB",ar,CFB),_CFB_instances.add(this),_CFB_iv.set(this,void 0),_CFB_shiftRegister.set(this,void 0),!Number.isInteger(fr)||fr%8)throw new TypeError("invalid segmentSize");if(Object.defineProperties(this,{segmentSize:{enumerable:!0,value:fr}}),dr){if(dr.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");__classPrivateFieldSet$g(this,_CFB_iv,new Uint8Array(dr),"f")}else __classPrivateFieldSet$g(this,_CFB_iv,new Uint8Array(16),"f");__classPrivateFieldSet$g(this,_CFB_shiftRegister,this.iv,"f")}get iv(){return new Uint8Array(__classPrivateFieldGet$j(this,_CFB_iv,"f"))}encrypt(ar){if(8*ar.length%this.segmentSize)throw new TypeError("invalid plaintext size (must be multiple of segmentSize bytes)");const dr=this.segmentSize/8,fr=new Uint8Array(ar);for(let hr=0;hr<fr.length;hr+=dr){const pr=this.aes.encrypt(__classPrivateFieldGet$j(this,_CFB_shiftRegister,"f"));for(let mr=0;mr<dr;mr++)fr[hr+mr]^=pr[mr];__classPrivateFieldGet$j(this,_CFB_instances,"m",_CFB_shift).call(this,fr.subarray(hr))}return fr}decrypt(ar){if(8*ar.length%this.segmentSize)throw new TypeError("invalid ciphertext size (must be multiple of segmentSize bytes)");const dr=this.segmentSize/8,fr=new Uint8Array(ar);for(let hr=0;hr<fr.length;hr+=dr){const pr=this.aes.encrypt(__classPrivateFieldGet$j(this,_CFB_shiftRegister,"f"));for(let mr=0;mr<dr;mr++)fr[hr+mr]^=pr[mr];__classPrivateFieldGet$j(this,_CFB_instances,"m",_CFB_shift).call(this,ar.subarray(hr))}return fr}}_CFB_iv=new WeakMap,_CFB_shiftRegister=new WeakMap,_CFB_instances=new WeakSet,_CFB_shift=function cr(ar){const dr=this.segmentSize/8;__classPrivateFieldGet$j(this,_CFB_shiftRegister,"f").set(__classPrivateFieldGet$j(this,_CFB_shiftRegister,"f").subarray(dr)),__classPrivateFieldGet$j(this,_CFB_shiftRegister,"f").set(ar.subarray(0,dr),16-dr)};var __classPrivateFieldSet$f=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},__classPrivateFieldGet$i=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_CTR_remaining,_CTR_remainingIndex,_CTR_counter;class CTR extends ModeOfOperation{constructor(ar,dr){super("CTR",ar,CTR),_CTR_remaining.set(this,void 0),_CTR_remainingIndex.set(this,void 0),_CTR_counter.set(this,void 0),__classPrivateFieldSet$f(this,_CTR_counter,new Uint8Array(16),"f"),__classPrivateFieldGet$i(this,_CTR_counter,"f").fill(0),__classPrivateFieldSet$f(this,_CTR_remaining,__classPrivateFieldGet$i(this,_CTR_counter,"f"),"f"),__classPrivateFieldSet$f(this,_CTR_remainingIndex,16,"f"),dr==null&&(dr=1),typeof dr=="number"?this.setCounterValue(dr):this.setCounterBytes(dr)}get counter(){return new Uint8Array(__classPrivateFieldGet$i(this,_CTR_counter,"f"))}setCounterValue(ar){if(!Number.isInteger(ar)||ar<0||ar>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let dr=15;dr>=0;--dr)__classPrivateFieldGet$i(this,_CTR_counter,"f")[dr]=ar%256,ar=Math.floor(ar/256)}setCounterBytes(ar){if(ar.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");__classPrivateFieldGet$i(this,_CTR_counter,"f").set(ar)}increment(){for(let ar=15;ar>=0;ar--)if(__classPrivateFieldGet$i(this,_CTR_counter,"f")[ar]===255)__classPrivateFieldGet$i(this,_CTR_counter,"f")[ar]=0;else{__classPrivateFieldGet$i(this,_CTR_counter,"f")[ar]++;break}}encrypt(ar){var dr,fr;const hr=new Uint8Array(ar);for(let pr=0;pr<hr.length;pr++)__classPrivateFieldGet$i(this,_CTR_remainingIndex,"f")===16&&(__classPrivateFieldSet$f(this,_CTR_remaining,this.aes.encrypt(__classPrivateFieldGet$i(this,_CTR_counter,"f")),"f"),__classPrivateFieldSet$f(this,_CTR_remainingIndex,0,"f"),this.increment()),hr[pr]^=__classPrivateFieldGet$i(this,_CTR_remaining,"f")[__classPrivateFieldSet$f(this,_CTR_remainingIndex,(fr=__classPrivateFieldGet$i(this,_CTR_remainingIndex,"f"),dr=fr++,fr),"f"),dr];return hr}decrypt(ar){return this.encrypt(ar)}}_CTR_remaining=new WeakMap,_CTR_remainingIndex=new WeakMap,_CTR_counter=new WeakMap;class ECB extends ModeOfOperation{constructor(ar){super("ECB",ar,ECB)}encrypt(ar){if(ar.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const dr=new Uint8Array(ar.length);for(let fr=0;fr<ar.length;fr+=16)dr.set(this.aes.encrypt(ar.subarray(fr,fr+16)),fr);return dr}decrypt(ar){if(ar.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const dr=new Uint8Array(ar.length);for(let fr=0;fr<ar.length;fr+=16)dr.set(this.aes.decrypt(ar.subarray(fr,fr+16)),fr);return dr}}var __classPrivateFieldSet$e=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},__classPrivateFieldGet$h=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_OFB_iv,_OFB_lastPrecipher,_OFB_lastPrecipherIndex;class OFB extends ModeOfOperation{constructor(ar,dr){if(super("OFB",ar,OFB),_OFB_iv.set(this,void 0),_OFB_lastPrecipher.set(this,void 0),_OFB_lastPrecipherIndex.set(this,void 0),dr){if(dr.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");__classPrivateFieldSet$e(this,_OFB_iv,new Uint8Array(dr),"f")}else __classPrivateFieldSet$e(this,_OFB_iv,new Uint8Array(16),"f");__classPrivateFieldSet$e(this,_OFB_lastPrecipher,this.iv,"f"),__classPrivateFieldSet$e(this,_OFB_lastPrecipherIndex,16,"f")}get iv(){return new Uint8Array(__classPrivateFieldGet$h(this,_OFB_iv,"f"))}encrypt(ar){var dr,fr;if(ar.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const hr=new Uint8Array(ar);for(let pr=0;pr<hr.length;pr++)__classPrivateFieldGet$h(this,_OFB_lastPrecipherIndex,"f")===16&&(__classPrivateFieldSet$e(this,_OFB_lastPrecipher,this.aes.encrypt(__classPrivateFieldGet$h(this,_OFB_lastPrecipher,"f")),"f"),__classPrivateFieldSet$e(this,_OFB_lastPrecipherIndex,0,"f")),hr[pr]^=__classPrivateFieldGet$h(this,_OFB_lastPrecipher,"f")[__classPrivateFieldSet$e(this,_OFB_lastPrecipherIndex,(fr=__classPrivateFieldGet$h(this,_OFB_lastPrecipherIndex,"f"),dr=fr++,fr),"f"),dr];return hr}decrypt(ar){if(ar.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");return this.encrypt(ar)}}_OFB_iv=new WeakMap,_OFB_lastPrecipher=new WeakMap,_OFB_lastPrecipherIndex=new WeakMap;function pkcs7Pad(cr){const ar=16-cr.length%16,dr=new Uint8Array(cr.length+ar);dr.set(cr);for(let fr=cr.length;fr<dr.length;fr++)dr[fr]=ar;return dr}function pkcs7Strip(cr){if(cr.length<16)throw new TypeError("PKCS#7 invalid length");const ar=cr[cr.length-1];if(ar>16)throw new TypeError("PKCS#7 padding byte out of range");const dr=cr.length-ar;for(let fr=0;fr<ar;fr++)if(cr[dr+fr]!==ar)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(cr.subarray(0,dr))}const lib_esm=Object.freeze(Object.defineProperty({__proto__:null,AES,CBC,CFB,CTR,ECB,ModeOfOperation,OFB,pkcs7Pad,pkcs7Strip},Symbol.toStringTag,{value:"Module"}));function looseArrayify(cr){return typeof cr=="string"&&!cr.startsWith("0x")&&(cr="0x"+cr),getBytesCopy(cr)}function zpad$1(cr,ar){for(cr=String(cr);cr.length<ar;)cr="0"+cr;return cr}function getPassword(cr){return typeof cr=="string"?toUtf8Bytes(cr,"NFKC"):getBytesCopy(cr)}function spelunk(cr,ar){const dr=ar.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);assertArgument(dr!=null,"invalid path","path",ar);const fr=dr[1],hr=dr[3],pr=dr[4]==="!";let mr=cr;for(const gr of fr.toLowerCase().split(".")){if(Array.isArray(mr)){if(!gr.match(/^[0-9]+$/))break;mr=mr[parseInt(gr)]}else if(typeof mr=="object"){let yr=null;for(const xr in mr)if(xr.toLowerCase()===gr){yr=mr[xr];break}mr=yr}else mr=null;if(mr==null)break}if(assertArgument(!pr||mr!=null,"missing required value","path",fr),hr&&mr!=null){if(hr==="int"){if(typeof mr=="string"&&mr.match(/^-?[0-9]+$/))return parseInt(mr);if(Number.isSafeInteger(mr))return mr}if(hr==="number"&&typeof mr=="string"&&mr.match(/^-?[0-9.]*$/))return parseFloat(mr);if(hr==="data"&&typeof mr=="string")return looseArrayify(mr);if(hr==="array"&&Array.isArray(mr)||hr===typeof mr)return mr;assertArgument(!1,`wrong type found for ${hr} `,"path",fr)}return mr}const defaultPath$1="m/44'/60'/0'/0/0";function isKeystoreJson(cr){try{const ar=JSON.parse(cr);if((ar.version!=null?parseInt(ar.version):0)===3)return!0}catch{}return!1}function decrypt$1(cr,ar,dr){if(spelunk(cr,"crypto.cipher:string")==="aes-128-ctr"){const hr=spelunk(cr,"crypto.cipherparams.iv:data!"),pr=new CTR(ar,hr);return hexlify(pr.decrypt(dr))}assert$9(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function getAccount(cr,ar){const dr=getBytes(ar),fr=spelunk(cr,"crypto.ciphertext:data!"),hr=hexlify(keccak256(concat$4([dr.slice(16,32),fr]))).substring(2);assertArgument(hr===spelunk(cr,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const pr=decrypt$1(cr,dr.slice(0,16),fr),mr=computeAddress(pr);if(cr.address){let xr=cr.address.toLowerCase();xr.startsWith("0x")||(xr="0x"+xr),assertArgument(getAddress(xr)===mr,"keystore address/privateKey mismatch","address",cr.address)}const gr={address:mr,privateKey:pr};if(spelunk(cr,"x-ethers.version:string")==="0.1"){const xr=dr.slice(32,64),wr=spelunk(cr,"x-ethers.mnemonicCiphertext:data!"),br=spelunk(cr,"x-ethers.mnemonicCounter:data!"),Sr=new CTR(xr,br);gr.mnemonic={path:spelunk(cr,"x-ethers.path:string")||defaultPath$1,locale:spelunk(cr,"x-ethers.locale:string")||"en",entropy:hexlify(getBytes(Sr.decrypt(wr)))}}return gr}function getDecryptKdfParams(cr){const ar=spelunk(cr,"crypto.kdf:string");if(ar&&typeof ar=="string"){if(ar.toLowerCase()==="scrypt"){const dr=spelunk(cr,"crypto.kdfparams.salt:data!"),fr=spelunk(cr,"crypto.kdfparams.n:int!"),hr=spelunk(cr,"crypto.kdfparams.r:int!"),pr=spelunk(cr,"crypto.kdfparams.p:int!");assertArgument(fr>0&&(fr&fr-1)===0,"invalid kdf.N","kdf.N",fr),assertArgument(hr>0&&pr>0,"invalid kdf","kdf",ar);const mr=spelunk(cr,"crypto.kdfparams.dklen:int!");return assertArgument(mr===32,"invalid kdf.dklen","kdf.dflen",mr),{name:"scrypt",salt:dr,N:fr,r:hr,p:pr,dkLen:64}}else if(ar.toLowerCase()==="pbkdf2"){const dr=spelunk(cr,"crypto.kdfparams.salt:data!"),fr=spelunk(cr,"crypto.kdfparams.prf:string!"),hr=fr.split("-").pop();assertArgument(hr==="sha256"||hr==="sha512","invalid kdf.pdf","kdf.pdf",fr);const pr=spelunk(cr,"crypto.kdfparams.c:int!"),mr=spelunk(cr,"crypto.kdfparams.dklen:int!");return assertArgument(mr===32,"invalid kdf.dklen","kdf.dklen",mr),{name:"pbkdf2",salt:dr,count:pr,dkLen:mr,algorithm:hr}}}assertArgument(!1,"unsupported key-derivation function","kdf",ar)}function decryptKeystoreJsonSync(cr,ar){const dr=JSON.parse(cr),fr=getPassword(ar),hr=getDecryptKdfParams(dr);if(hr.name==="pbkdf2"){const{salt:br,count:Sr,dkLen:vr,algorithm:Er}=hr,Ar=pbkdf2$1(fr,br,Sr,vr,Er);return getAccount(dr,Ar)}assert$9(hr.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:hr});const{salt:pr,N:mr,r:gr,p:yr,dkLen:xr}=hr,wr=scryptSync(fr,pr,mr,gr,yr,xr);return getAccount(dr,wr)}function stall$1(cr){return new Promise(ar=>{setTimeout(()=>{ar()},cr)})}async function decryptKeystoreJson(cr,ar,dr){const fr=JSON.parse(cr),hr=getPassword(ar),pr=getDecryptKdfParams(fr);if(pr.name==="pbkdf2"){dr&&(dr(0),await stall$1(0));const{salt:Sr,count:vr,dkLen:Er,algorithm:Ar}=pr,_r=pbkdf2$1(hr,Sr,vr,Er,Ar);return dr&&(dr(1),await stall$1(0)),getAccount(fr,_r)}assert$9(pr.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:pr});const{salt:mr,N:gr,r:yr,p:xr,dkLen:wr}=pr,br=await scrypt$1(hr,mr,gr,yr,xr,wr,dr);return getAccount(fr,br)}function getEncryptKdfParams(cr){const ar=cr.salt!=null?getBytes(cr.salt,"options.salt"):randomBytes$3(32);let dr=1<<17,fr=8,hr=1;return cr.scrypt&&(cr.scrypt.N&&(dr=cr.scrypt.N),cr.scrypt.r&&(fr=cr.scrypt.r),cr.scrypt.p&&(hr=cr.scrypt.p)),assertArgument(typeof dr=="number"&&dr>0&&Number.isSafeInteger(dr)&&(BigInt(dr)&BigInt(dr-1))===BigInt(0),"invalid scrypt N parameter","options.N",dr),assertArgument(typeof fr=="number"&&fr>0&&Number.isSafeInteger(fr),"invalid scrypt r parameter","options.r",fr),assertArgument(typeof hr=="number"&&hr>0&&Number.isSafeInteger(hr),"invalid scrypt p parameter","options.p",hr),{name:"scrypt",dkLen:32,salt:ar,N:dr,r:fr,p:hr}}function _encryptKeystore(cr,ar,dr,fr){const hr=getBytes(dr.privateKey,"privateKey"),pr=fr.iv!=null?getBytes(fr.iv,"options.iv"):randomBytes$3(16);assertArgument(pr.length===16,"invalid options.iv length","options.iv",fr.iv);const mr=fr.uuid!=null?getBytes(fr.uuid,"options.uuid"):randomBytes$3(16);assertArgument(mr.length===16,"invalid options.uuid length","options.uuid",fr.iv);const gr=cr.slice(0,16),yr=cr.slice(16,32),xr=new CTR(gr,pr),wr=getBytes(xr.encrypt(hr)),br=keccak256(concat$4([yr,wr])),Sr={address:dr.address.substring(2).toLowerCase(),id:uuidV4(mr),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify(pr).substring(2)},ciphertext:hexlify(wr).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify(ar.salt).substring(2),n:ar.N,dklen:32,p:ar.p,r:ar.r},mac:br.substring(2)}};if(dr.mnemonic){const vr=fr.client!=null?fr.client:`ethers/${version$1}`,Er=dr.mnemonic.path||defaultPath$1,Ar=dr.mnemonic.locale||"en",_r=cr.slice(32,64),Cr=getBytes(dr.mnemonic.entropy,"account.mnemonic.entropy"),kr=randomBytes$3(16),Rr=new CTR(_r,kr),Ir=getBytes(Rr.encrypt(Cr)),Nr=new Date,Tr="UTC--"+(Nr.getUTCFullYear()+"-"+zpad$1(Nr.getUTCMonth()+1,2)+"-"+zpad$1(Nr.getUTCDate(),2)+"T"+zpad$1(Nr.getUTCHours(),2)+"-"+zpad$1(Nr.getUTCMinutes(),2)+"-"+zpad$1(Nr.getUTCSeconds(),2)+".0Z")+"--"+Sr.address;Sr["x-ethers"]={client:vr,gethFilename:Tr,path:Er,locale:Ar,mnemonicCounter:hexlify(kr).substring(2),mnemonicCiphertext:hexlify(Ir).substring(2),version:"0.1"}}return JSON.stringify(Sr)}function encryptKeystoreJsonSync(cr,ar,dr){dr==null&&(dr={});const fr=getPassword(ar),hr=getEncryptKdfParams(dr),pr=scryptSync(fr,hr.salt,hr.N,hr.r,hr.p,64);return _encryptKeystore(getBytes(pr),hr,cr,dr)}async function encryptKeystoreJson(cr,ar,dr){dr==null&&(dr={});const fr=getPassword(ar),hr=getEncryptKdfParams(dr),pr=await scrypt$1(fr,hr.salt,hr.N,hr.r,hr.p,64,dr.progressCallback);return _encryptKeystore(getBytes(pr),hr,cr,dr)}const defaultPath="m/44'/60'/0'/0/0",MasterSecret=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),HardenedBit=2147483648,N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Nibbles="0123456789abcdef";function zpad(cr,ar){let dr="";for(;cr;)dr=Nibbles[cr%16]+dr,cr=Math.trunc(cr/16);for(;dr.length<ar*2;)dr="0"+dr;return"0x"+dr}function encodeBase58Check(cr){const ar=getBytes(cr),dr=dataSlice(sha256$4(sha256$4(ar)),0,4),fr=concat$4([ar,dr]);return encodeBase58(fr)}const _guard={};function ser_I(cr,ar,dr,fr){const hr=new Uint8Array(37);cr&HardenedBit?(assert$9(fr!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),hr.set(getBytes(fr),1)):hr.set(getBytes(dr));for(let mr=24;mr>=0;mr-=8)hr[33+(mr>>3)]=cr>>24-mr&255;const pr=getBytes(computeHmac("sha512",ar,hr));return{IL:pr.slice(0,32),IR:pr.slice(32)}}function derivePath(cr,ar){const dr=ar.split("/");assertArgument(dr.length>0&&(dr[0]==="m"||cr.depth>0),"invalid path","path",ar),dr[0]==="m"&&dr.shift();let fr=cr;for(let hr=0;hr<dr.length;hr++){const pr=dr[hr];if(pr.match(/^[0-9]+'$/)){const mr=parseInt(pr.substring(0,pr.length-1));assertArgument(mr<HardenedBit,"invalid path index",`path[${hr}]`,pr),fr=fr.deriveChild(HardenedBit+mr)}else if(pr.match(/^[0-9]+$/)){const mr=parseInt(pr);assertArgument(mr<HardenedBit,"invalid path index",`path[${hr}]`,pr),fr=fr.deriveChild(mr)}else assertArgument(!1,"invalid path component",`path[${hr}]`,pr)}return fr}class HDNodeWallet extends BaseWallet{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(ar,dr,fr,hr,pr,mr,gr,yr,xr){super(dr,xr),assertPrivate(ar,_guard,"HDNodeWallet"),defineProperties(this,{publicKey:dr.compressedPublicKey});const wr=dataSlice(ripemd160$1(sha256$4(this.publicKey)),0,4);defineProperties(this,{parentFingerprint:fr,fingerprint:wr,chainCode:hr,path:pr,index:mr,depth:gr}),defineProperties(this,{mnemonic:yr})}connect(ar){return new HDNodeWallet(_guard,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,ar)}#e(){const ar={address:this.address,privateKey:this.privateKey},dr=this.mnemonic;return this.path&&dr&&dr.wordlist.locale==="en"&&dr.password===""&&(ar.mnemonic={path:this.path,locale:"en",entropy:dr.entropy}),ar}async encrypt(ar,dr){return await encryptKeystoreJson(this.#e(),ar,{progressCallback:dr})}encryptSync(ar){return encryptKeystoreJsonSync(this.#e(),ar)}get extendedKey(){return assert$9(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),encodeBase58Check(concat$4(["0x0488ADE4",zpad(this.depth,1),this.parentFingerprint,zpad(this.index,4),this.chainCode,concat$4(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new HDNodeVoidWallet(_guard,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(ar){const dr=getNumber(ar,"index");assertArgument(dr<=4294967295,"invalid index","index",dr);let fr=this.path;fr&&(fr+="/"+(dr&~HardenedBit),dr&HardenedBit&&(fr+="'"));const{IR:hr,IL:pr}=ser_I(dr,this.chainCode,this.publicKey,this.privateKey),mr=new SigningKey(toBeHex((toBigInt(pr)+BigInt(this.privateKey))%N,32));return new HDNodeWallet(_guard,mr,this.fingerprint,hexlify(hr),fr,dr,this.depth+1,this.mnemonic,this.provider)}derivePath(ar){return derivePath(this,ar)}static#t(ar,dr){assertArgument(isBytesLike(ar),"invalid seed","seed","[REDACTED]");const fr=getBytes(ar,"seed");assertArgument(fr.length>=16&&fr.length<=64,"invalid seed","seed","[REDACTED]");const hr=getBytes(computeHmac("sha512",MasterSecret,fr)),pr=new SigningKey(hexlify(hr.slice(0,32)));return new HDNodeWallet(_guard,pr,"0x00000000",hexlify(hr.slice(32)),"m",0,0,dr,null)}static fromExtendedKey(ar){const dr=toBeArray(decodeBase58(ar));assertArgument(dr.length===82||encodeBase58Check(dr.slice(0,78))===ar,"invalid extended key","extendedKey","[ REDACTED ]");const fr=dr[4],hr=hexlify(dr.slice(5,9)),pr=parseInt(hexlify(dr.slice(9,13)).substring(2),16),mr=hexlify(dr.slice(13,45)),gr=dr.slice(45,78);switch(hexlify(dr.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const yr=hexlify(gr);return new HDNodeVoidWallet(_guard,computeAddress(yr),yr,hr,mr,null,pr,fr,null)}case"0x0488ade4":case"0x04358394 ":if(gr[0]!==0)break;return new HDNodeWallet(_guard,new SigningKey(gr.slice(1)),hr,mr,null,pr,fr,null,null)}assertArgument(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(ar,dr,fr){ar==null&&(ar=""),dr==null&&(dr=defaultPath),fr==null&&(fr=LangEn.wordlist());const hr=Mnemonic.fromEntropy(randomBytes$3(16),ar,fr);return HDNodeWallet.#t(hr.computeSeed(),hr).derivePath(dr)}static fromMnemonic(ar,dr){return dr||(dr=defaultPath),HDNodeWallet.#t(ar.computeSeed(),ar).derivePath(dr)}static fromPhrase(ar,dr,fr,hr){dr==null&&(dr=""),fr==null&&(fr=defaultPath),hr==null&&(hr=LangEn.wordlist());const pr=Mnemonic.fromPhrase(ar,dr,hr);return HDNodeWallet.#t(pr.computeSeed(),pr).derivePath(fr)}static fromSeed(ar){return HDNodeWallet.#t(ar,null)}}class HDNodeVoidWallet extends VoidSigner{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(ar,dr,fr,hr,pr,mr,gr,yr,xr){super(dr,xr),assertPrivate(ar,_guard,"HDNodeVoidWallet"),defineProperties(this,{publicKey:fr});const wr=dataSlice(ripemd160$1(sha256$4(fr)),0,4);defineProperties(this,{publicKey:fr,fingerprint:wr,parentFingerprint:hr,chainCode:pr,path:mr,index:gr,depth:yr})}connect(ar){return new HDNodeVoidWallet(_guard,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,ar)}get extendedKey(){return assert$9(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),encodeBase58Check(concat$4(["0x0488B21E",zpad(this.depth,1),this.parentFingerprint,zpad(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(ar){const dr=getNumber(ar,"index");assertArgument(dr<=4294967295,"invalid index","index",dr);let fr=this.path;fr&&(fr+="/"+(dr&~HardenedBit),dr&HardenedBit&&(fr+="'"));const{IR:hr,IL:pr}=ser_I(dr,this.chainCode,this.publicKey,null),mr=SigningKey.addPoints(pr,this.publicKey,!0),gr=computeAddress(mr);return new HDNodeVoidWallet(_guard,gr,mr,this.fingerprint,hexlify(hr),fr,dr,this.depth+1,this.provider)}derivePath(ar){return derivePath(this,ar)}}function isCrowdsaleJson(cr){try{if(JSON.parse(cr).encseed)return!0}catch{}return!1}function decryptCrowdsaleJson(cr,ar){const dr=JSON.parse(cr),fr=getPassword(ar),hr=getAddress(spelunk(dr,"ethaddr:string!")),pr=looseArrayify(spelunk(dr,"encseed:string!"));assertArgument(pr&&pr.length%16===0,"invalid encseed","json",cr);const mr=getBytes(pbkdf2$1(fr,fr,2e3,32,"sha256")).slice(0,16),gr=pr.slice(0,16),yr=pr.slice(16),xr=new CBC(mr,gr),wr=pkcs7Strip(getBytes(xr.decrypt(yr)));let br="";for(let Sr=0;Sr<wr.length;Sr++)br+=String.fromCharCode(wr[Sr]);return{address:hr,privateKey:id$1(br)}}function stall(cr){return new Promise(ar=>{setTimeout(()=>{ar()},cr)})}class Wallet extends BaseWallet{constructor(ar,dr){typeof ar=="string"&&!ar.startsWith("0x")&&(ar="0x"+ar);let fr=typeof ar=="string"?new SigningKey(ar):ar;super(fr,dr)}connect(ar){return new Wallet(this.signingKey,ar)}async encrypt(ar,dr){const fr={address:this.address,privateKey:this.privateKey};return await encryptKeystoreJson(fr,ar,{progressCallback:dr})}encryptSync(ar){const dr={address:this.address,privateKey:this.privateKey};return encryptKeystoreJsonSync(dr,ar)}static#e(ar){if(assertArgument(ar,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in ar&&ar.mnemonic&&ar.mnemonic.locale==="en"){const fr=Mnemonic.fromEntropy(ar.mnemonic.entropy),hr=HDNodeWallet.fromMnemonic(fr,ar.mnemonic.path);if(hr.address===ar.address&&hr.privateKey===ar.privateKey)return hr;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const dr=new Wallet(ar.privateKey);return assertArgument(dr.address===ar.address,"address/privateKey mismatch","json","[ REDACTED ]"),dr}static async fromEncryptedJson(ar,dr,fr){let hr=null;return isKeystoreJson(ar)?hr=await decryptKeystoreJson(ar,dr,fr):isCrowdsaleJson(ar)&&(fr&&(fr(0),await stall(0)),hr=decryptCrowdsaleJson(ar,dr),fr&&(fr(1),await stall(0))),Wallet.#e(hr)}static fromEncryptedJsonSync(ar,dr){let fr=null;return isKeystoreJson(ar)?fr=decryptKeystoreJsonSync(ar,dr):isCrowdsaleJson(ar)?fr=decryptCrowdsaleJson(ar,dr):assertArgument(!1,"invalid JSON wallet","json","[ REDACTED ]"),Wallet.#e(fr)}static createRandom(ar){const dr=HDNodeWallet.createRandom();return ar?dr.connect(ar):dr}static fromPhrase(ar,dr){const fr=HDNodeWallet.fromPhrase(ar);return dr?fr.connect(dr):fr}}var siwe={},client={},parsers={},abnf={},buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code$5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$2=0,len=code$5.length;i$2<len;++i$2)lookup[i$2]=code$5[i$2],revLookup[code$5.charCodeAt(i$2)]=i$2;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(cr){var ar=cr.length;if(ar%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var dr=cr.indexOf("=");dr===-1&&(dr=ar);var fr=dr===ar?0:4-dr%4;return[dr,fr]}function byteLength(cr){var ar=getLens(cr),dr=ar[0],fr=ar[1];return(dr+fr)*3/4-fr}function _byteLength(cr,ar,dr){return(ar+dr)*3/4-dr}function toByteArray(cr){var ar,dr=getLens(cr),fr=dr[0],hr=dr[1],pr=new Arr(_byteLength(cr,fr,hr)),mr=0,gr=hr>0?fr-4:fr,yr;for(yr=0;yr<gr;yr+=4)ar=revLookup[cr.charCodeAt(yr)]<<18|revLookup[cr.charCodeAt(yr+1)]<<12|revLookup[cr.charCodeAt(yr+2)]<<6|revLookup[cr.charCodeAt(yr+3)],pr[mr++]=ar>>16&255,pr[mr++]=ar>>8&255,pr[mr++]=ar&255;return hr===2&&(ar=revLookup[cr.charCodeAt(yr)]<<2|revLookup[cr.charCodeAt(yr+1)]>>4,pr[mr++]=ar&255),hr===1&&(ar=revLookup[cr.charCodeAt(yr)]<<10|revLookup[cr.charCodeAt(yr+1)]<<4|revLookup[cr.charCodeAt(yr+2)]>>2,pr[mr++]=ar>>8&255,pr[mr++]=ar&255),pr}function tripletToBase64(cr){return lookup[cr>>18&63]+lookup[cr>>12&63]+lookup[cr>>6&63]+lookup[cr&63]}function encodeChunk(cr,ar,dr){for(var fr,hr=[],pr=ar;pr<dr;pr+=3)fr=(cr[pr]<<16&16711680)+(cr[pr+1]<<8&65280)+(cr[pr+2]&255),hr.push(tripletToBase64(fr));return hr.join("")}function fromByteArray(cr){for(var ar,dr=cr.length,fr=dr%3,hr=[],pr=16383,mr=0,gr=dr-fr;mr<gr;mr+=pr)hr.push(encodeChunk(cr,mr,mr+pr>gr?gr:mr+pr));return fr===1?(ar=cr[dr-1],hr.push(lookup[ar>>2]+lookup[ar<<4&63]+"==")):fr===2&&(ar=(cr[dr-2]<<8)+cr[dr-1],hr.push(lookup[ar>>10]+lookup[ar>>4&63]+lookup[ar<<2&63]+"=")),hr.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(cr,ar,dr,fr,hr){var pr,mr,gr=hr*8-fr-1,yr=(1<<gr)-1,xr=yr>>1,wr=-7,br=dr?hr-1:0,Sr=dr?-1:1,vr=cr[ar+br];for(br+=Sr,pr=vr&(1<<-wr)-1,vr>>=-wr,wr+=gr;wr>0;pr=pr*256+cr[ar+br],br+=Sr,wr-=8);for(mr=pr&(1<<-wr)-1,pr>>=-wr,wr+=fr;wr>0;mr=mr*256+cr[ar+br],br+=Sr,wr-=8);if(pr===0)pr=1-xr;else{if(pr===yr)return mr?NaN:(vr?-1:1)*(1/0);mr=mr+Math.pow(2,fr),pr=pr-xr}return(vr?-1:1)*mr*Math.pow(2,pr-fr)};ieee754.write=function(cr,ar,dr,fr,hr,pr){var mr,gr,yr,xr=pr*8-hr-1,wr=(1<<xr)-1,br=wr>>1,Sr=hr===23?Math.pow(2,-24)-Math.pow(2,-77):0,vr=fr?0:pr-1,Er=fr?1:-1,Ar=ar<0||ar===0&&1/ar<0?1:0;for(ar=Math.abs(ar),isNaN(ar)||ar===1/0?(gr=isNaN(ar)?1:0,mr=wr):(mr=Math.floor(Math.log(ar)/Math.LN2),ar*(yr=Math.pow(2,-mr))<1&&(mr--,yr*=2),mr+br>=1?ar+=Sr/yr:ar+=Sr*Math.pow(2,1-br),ar*yr>=2&&(mr++,yr/=2),mr+br>=wr?(gr=0,mr=wr):mr+br>=1?(gr=(ar*yr-1)*Math.pow(2,hr),mr=mr+br):(gr=ar*Math.pow(2,br-1)*Math.pow(2,hr),mr=0));hr>=8;cr[dr+vr]=gr&255,vr+=Er,gr/=256,hr-=8);for(mr=mr<<hr|gr,xr+=hr;xr>0;cr[dr+vr]=mr&255,vr+=Er,mr/=256,xr-=8);cr[dr+vr-Er]|=Ar*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(cr){const ar=base64Js,dr=ieee754,fr=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;cr.Buffer=gr,cr.SlowBuffer=kr,cr.INSPECT_MAX_BYTES=50;const hr=2147483647;cr.kMaxLength=hr,gr.TYPED_ARRAY_SUPPORT=pr(),!gr.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function pr(){try{const ls=new Uint8Array(1),Kr={foo:function(){return 42}};return Object.setPrototypeOf(Kr,Uint8Array.prototype),Object.setPrototypeOf(ls,Kr),ls.foo()===42}catch{return!1}}Object.defineProperty(gr.prototype,"parent",{enumerable:!0,get:function(){if(gr.isBuffer(this))return this.buffer}}),Object.defineProperty(gr.prototype,"offset",{enumerable:!0,get:function(){if(gr.isBuffer(this))return this.byteOffset}});function mr(ls){if(ls>hr)throw new RangeError('The value "'+ls+'" is invalid for option "size"');const Kr=new Uint8Array(ls);return Object.setPrototypeOf(Kr,gr.prototype),Kr}function gr(ls,Kr,Zr){if(typeof ls=="number"){if(typeof Kr=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return br(ls)}return yr(ls,Kr,Zr)}gr.poolSize=8192;function yr(ls,Kr,Zr){if(typeof ls=="string")return Sr(ls,Kr);if(ArrayBuffer.isView(ls))return Er(ls);if(ls==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ls);if(Os(ls,ArrayBuffer)||ls&&Os(ls.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Os(ls,SharedArrayBuffer)||ls&&Os(ls.buffer,SharedArrayBuffer)))return Ar(ls,Kr,Zr);if(typeof ls=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const hs=ls.valueOf&&ls.valueOf();if(hs!=null&&hs!==ls)return gr.from(hs,Kr,Zr);const ys=_r(ls);if(ys)return ys;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ls[Symbol.toPrimitive]=="function")return gr.from(ls[Symbol.toPrimitive]("string"),Kr,Zr);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ls)}gr.from=function(ls,Kr,Zr){return yr(ls,Kr,Zr)},Object.setPrototypeOf(gr.prototype,Uint8Array.prototype),Object.setPrototypeOf(gr,Uint8Array);function xr(ls){if(typeof ls!="number")throw new TypeError('"size" argument must be of type number');if(ls<0)throw new RangeError('The value "'+ls+'" is invalid for option "size"')}function wr(ls,Kr,Zr){return xr(ls),ls<=0?mr(ls):Kr!==void 0?typeof Zr=="string"?mr(ls).fill(Kr,Zr):mr(ls).fill(Kr):mr(ls)}gr.alloc=function(ls,Kr,Zr){return wr(ls,Kr,Zr)};function br(ls){return xr(ls),mr(ls<0?0:Cr(ls)|0)}gr.allocUnsafe=function(ls){return br(ls)},gr.allocUnsafeSlow=function(ls){return br(ls)};function Sr(ls,Kr){if((typeof Kr!="string"||Kr==="")&&(Kr="utf8"),!gr.isEncoding(Kr))throw new TypeError("Unknown encoding: "+Kr);const Zr=Rr(ls,Kr)|0;let hs=mr(Zr);const ys=hs.write(ls,Kr);return ys!==Zr&&(hs=hs.slice(0,ys)),hs}function vr(ls){const Kr=ls.length<0?0:Cr(ls.length)|0,Zr=mr(Kr);for(let hs=0;hs<Kr;hs+=1)Zr[hs]=ls[hs]&255;return Zr}function Er(ls){if(Os(ls,Uint8Array)){const Kr=new Uint8Array(ls);return Ar(Kr.buffer,Kr.byteOffset,Kr.byteLength)}return vr(ls)}function Ar(ls,Kr,Zr){if(Kr<0||ls.byteLength<Kr)throw new RangeError('"offset" is outside of buffer bounds');if(ls.byteLength<Kr+(Zr||0))throw new RangeError('"length" is outside of buffer bounds');let hs;return Kr===void 0&&Zr===void 0?hs=new Uint8Array(ls):Zr===void 0?hs=new Uint8Array(ls,Kr):hs=new Uint8Array(ls,Kr,Zr),Object.setPrototypeOf(hs,gr.prototype),hs}function _r(ls){if(gr.isBuffer(ls)){const Kr=Cr(ls.length)|0,Zr=mr(Kr);return Zr.length===0||ls.copy(Zr,0,0,Kr),Zr}if(ls.length!==void 0)return typeof ls.length!="number"||Ms(ls.length)?mr(0):vr(ls);if(ls.type==="Buffer"&&Array.isArray(ls.data))return vr(ls.data)}function Cr(ls){if(ls>=hr)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+hr.toString(16)+" bytes");return ls|0}function kr(ls){return+ls!=ls&&(ls=0),gr.alloc(+ls)}gr.isBuffer=function(Kr){return Kr!=null&&Kr._isBuffer===!0&&Kr!==gr.prototype},gr.compare=function(Kr,Zr){if(Os(Kr,Uint8Array)&&(Kr=gr.from(Kr,Kr.offset,Kr.byteLength)),Os(Zr,Uint8Array)&&(Zr=gr.from(Zr,Zr.offset,Zr.byteLength)),!gr.isBuffer(Kr)||!gr.isBuffer(Zr))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Kr===Zr)return 0;let hs=Kr.length,ys=Zr.length;for(let Es=0,Is=Math.min(hs,ys);Es<Is;++Es)if(Kr[Es]!==Zr[Es]){hs=Kr[Es],ys=Zr[Es];break}return hs<ys?-1:ys<hs?1:0},gr.isEncoding=function(Kr){switch(String(Kr).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},gr.concat=function(Kr,Zr){if(!Array.isArray(Kr))throw new TypeError('"list" argument must be an Array of Buffers');if(Kr.length===0)return gr.alloc(0);let hs;if(Zr===void 0)for(Zr=0,hs=0;hs<Kr.length;++hs)Zr+=Kr[hs].length;const ys=gr.allocUnsafe(Zr);let Es=0;for(hs=0;hs<Kr.length;++hs){let Is=Kr[hs];if(Os(Is,Uint8Array))Es+Is.length>ys.length?(gr.isBuffer(Is)||(Is=gr.from(Is)),Is.copy(ys,Es)):Uint8Array.prototype.set.call(ys,Is,Es);else if(gr.isBuffer(Is))Is.copy(ys,Es);else throw new TypeError('"list" argument must be an Array of Buffers');Es+=Is.length}return ys};function Rr(ls,Kr){if(gr.isBuffer(ls))return ls.length;if(ArrayBuffer.isView(ls)||Os(ls,ArrayBuffer))return ls.byteLength;if(typeof ls!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ls);const Zr=ls.length,hs=arguments.length>2&&arguments[2]===!0;if(!hs&&Zr===0)return 0;let ys=!1;for(;;)switch(Kr){case"ascii":case"latin1":case"binary":return Zr;case"utf8":case"utf-8":return ws(ls).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zr*2;case"hex":return Zr>>>1;case"base64":return vs(ls).length;default:if(ys)return hs?-1:ws(ls).length;Kr=(""+Kr).toLowerCase(),ys=!0}}gr.byteLength=Rr;function Ir(ls,Kr,Zr){let hs=!1;if((Kr===void 0||Kr<0)&&(Kr=0),Kr>this.length||((Zr===void 0||Zr>this.length)&&(Zr=this.length),Zr<=0)||(Zr>>>=0,Kr>>>=0,Zr<=Kr))return"";for(ls||(ls="utf8");;)switch(ls){case"hex":return es(this,Kr,Zr);case"utf8":case"utf-8":return Or(this,Kr,Zr);case"ascii":return Vr(this,Kr,Zr);case"latin1":case"binary":return Jr(this,Kr,Zr);case"base64":return Hr(this,Kr,Zr);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ns(this,Kr,Zr);default:if(hs)throw new TypeError("Unknown encoding: "+ls);ls=(ls+"").toLowerCase(),hs=!0}}gr.prototype._isBuffer=!0;function Nr(ls,Kr,Zr){const hs=ls[Kr];ls[Kr]=ls[Zr],ls[Zr]=hs}gr.prototype.swap16=function(){const Kr=this.length;if(Kr%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Zr=0;Zr<Kr;Zr+=2)Nr(this,Zr,Zr+1);return this},gr.prototype.swap32=function(){const Kr=this.length;if(Kr%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Zr=0;Zr<Kr;Zr+=4)Nr(this,Zr,Zr+3),Nr(this,Zr+1,Zr+2);return this},gr.prototype.swap64=function(){const Kr=this.length;if(Kr%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Zr=0;Zr<Kr;Zr+=8)Nr(this,Zr,Zr+7),Nr(this,Zr+1,Zr+6),Nr(this,Zr+2,Zr+5),Nr(this,Zr+3,Zr+4);return this},gr.prototype.toString=function(){const Kr=this.length;return Kr===0?"":arguments.length===0?Or(this,0,Kr):Ir.apply(this,arguments)},gr.prototype.toLocaleString=gr.prototype.toString,gr.prototype.equals=function(Kr){if(!gr.isBuffer(Kr))throw new TypeError("Argument must be a Buffer");return this===Kr?!0:gr.compare(this,Kr)===0},gr.prototype.inspect=function(){let Kr="";const Zr=cr.INSPECT_MAX_BYTES;return Kr=this.toString("hex",0,Zr).replace(/(.{2})/g,"$1 ").trim(),this.length>Zr&&(Kr+=" ... "),"<Buffer "+Kr+">"},fr&&(gr.prototype[fr]=gr.prototype.inspect),gr.prototype.compare=function(Kr,Zr,hs,ys,Es){if(Os(Kr,Uint8Array)&&(Kr=gr.from(Kr,Kr.offset,Kr.byteLength)),!gr.isBuffer(Kr))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Kr);if(Zr===void 0&&(Zr=0),hs===void 0&&(hs=Kr?Kr.length:0),ys===void 0&&(ys=0),Es===void 0&&(Es=this.length),Zr<0||hs>Kr.length||ys<0||Es>this.length)throw new RangeError("out of range index");if(ys>=Es&&Zr>=hs)return 0;if(ys>=Es)return-1;if(Zr>=hs)return 1;if(Zr>>>=0,hs>>>=0,ys>>>=0,Es>>>=0,this===Kr)return 0;let Is=Es-ys,$s=hs-Zr;const Rs=Math.min(Is,$s),Bs=this.slice(ys,Es),Ds=Kr.slice(Zr,hs);for(let Ls=0;Ls<Rs;++Ls)if(Bs[Ls]!==Ds[Ls]){Is=Bs[Ls],$s=Ds[Ls];break}return Is<$s?-1:$s<Is?1:0};function Pr(ls,Kr,Zr,hs,ys){if(ls.length===0)return-1;if(typeof Zr=="string"?(hs=Zr,Zr=0):Zr>2147483647?Zr=2147483647:Zr<-2147483648&&(Zr=-2147483648),Zr=+Zr,Ms(Zr)&&(Zr=ys?0:ls.length-1),Zr<0&&(Zr=ls.length+Zr),Zr>=ls.length){if(ys)return-1;Zr=ls.length-1}else if(Zr<0)if(ys)Zr=0;else return-1;if(typeof Kr=="string"&&(Kr=gr.from(Kr,hs)),gr.isBuffer(Kr))return Kr.length===0?-1:Tr(ls,Kr,Zr,hs,ys);if(typeof Kr=="number")return Kr=Kr&255,typeof Uint8Array.prototype.indexOf=="function"?ys?Uint8Array.prototype.indexOf.call(ls,Kr,Zr):Uint8Array.prototype.lastIndexOf.call(ls,Kr,Zr):Tr(ls,[Kr],Zr,hs,ys);throw new TypeError("val must be string, number or Buffer")}function Tr(ls,Kr,Zr,hs,ys){let Es=1,Is=ls.length,$s=Kr.length;if(hs!==void 0&&(hs=String(hs).toLowerCase(),hs==="ucs2"||hs==="ucs-2"||hs==="utf16le"||hs==="utf-16le")){if(ls.length<2||Kr.length<2)return-1;Es=2,Is/=2,$s/=2,Zr/=2}function Rs(Ds,Ls){return Es===1?Ds[Ls]:Ds.readUInt16BE(Ls*Es)}let Bs;if(ys){let Ds=-1;for(Bs=Zr;Bs<Is;Bs++)if(Rs(ls,Bs)===Rs(Kr,Ds===-1?0:Bs-Ds)){if(Ds===-1&&(Ds=Bs),Bs-Ds+1===$s)return Ds*Es}else Ds!==-1&&(Bs-=Bs-Ds),Ds=-1}else for(Zr+$s>Is&&(Zr=Is-$s),Bs=Zr;Bs>=0;Bs--){let Ds=!0;for(let Ls=0;Ls<$s;Ls++)if(Rs(ls,Bs+Ls)!==Rs(Kr,Ls)){Ds=!1;break}if(Ds)return Bs}return-1}gr.prototype.includes=function(Kr,Zr,hs){return this.indexOf(Kr,Zr,hs)!==-1},gr.prototype.indexOf=function(Kr,Zr,hs){return Pr(this,Kr,Zr,hs,!0)},gr.prototype.lastIndexOf=function(Kr,Zr,hs){return Pr(this,Kr,Zr,hs,!1)};function Br(ls,Kr,Zr,hs){Zr=Number(Zr)||0;const ys=ls.length-Zr;hs?(hs=Number(hs),hs>ys&&(hs=ys)):hs=ys;const Es=Kr.length;hs>Es/2&&(hs=Es/2);let Is;for(Is=0;Is<hs;++Is){const $s=parseInt(Kr.substr(Is*2,2),16);if(Ms($s))return Is;ls[Zr+Is]=$s}return Is}function Fr(ls,Kr,Zr,hs){return Ps(ws(Kr,ls.length-Zr),ls,Zr,hs)}function jr(ls,Kr,Zr,hs){return Ps(As(Kr),ls,Zr,hs)}function Ur(ls,Kr,Zr,hs){return Ps(vs(Kr),ls,Zr,hs)}function qr(ls,Kr,Zr,hs){return Ps(gs(Kr,ls.length-Zr),ls,Zr,hs)}gr.prototype.write=function(Kr,Zr,hs,ys){if(Zr===void 0)ys="utf8",hs=this.length,Zr=0;else if(hs===void 0&&typeof Zr=="string")ys=Zr,hs=this.length,Zr=0;else if(isFinite(Zr))Zr=Zr>>>0,isFinite(hs)?(hs=hs>>>0,ys===void 0&&(ys="utf8")):(ys=hs,hs=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Es=this.length-Zr;if((hs===void 0||hs>Es)&&(hs=Es),Kr.length>0&&(hs<0||Zr<0)||Zr>this.length)throw new RangeError("Attempt to write outside buffer bounds");ys||(ys="utf8");let Is=!1;for(;;)switch(ys){case"hex":return Br(this,Kr,Zr,hs);case"utf8":case"utf-8":return Fr(this,Kr,Zr,hs);case"ascii":case"latin1":case"binary":return jr(this,Kr,Zr,hs);case"base64":return Ur(this,Kr,Zr,hs);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qr(this,Kr,Zr,hs);default:if(Is)throw new TypeError("Unknown encoding: "+ys);ys=(""+ys).toLowerCase(),Is=!0}},gr.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Hr(ls,Kr,Zr){return Kr===0&&Zr===ls.length?ar.fromByteArray(ls):ar.fromByteArray(ls.slice(Kr,Zr))}function Or(ls,Kr,Zr){Zr=Math.min(ls.length,Zr);const hs=[];let ys=Kr;for(;ys<Zr;){const Es=ls[ys];let Is=null,$s=Es>239?4:Es>223?3:Es>191?2:1;if(ys+$s<=Zr){let Rs,Bs,Ds,Ls;switch($s){case 1:Es<128&&(Is=Es);break;case 2:Rs=ls[ys+1],(Rs&192)===128&&(Ls=(Es&31)<<6|Rs&63,Ls>127&&(Is=Ls));break;case 3:Rs=ls[ys+1],Bs=ls[ys+2],(Rs&192)===128&&(Bs&192)===128&&(Ls=(Es&15)<<12|(Rs&63)<<6|Bs&63,Ls>2047&&(Ls<55296||Ls>57343)&&(Is=Ls));break;case 4:Rs=ls[ys+1],Bs=ls[ys+2],Ds=ls[ys+3],(Rs&192)===128&&(Bs&192)===128&&(Ds&192)===128&&(Ls=(Es&15)<<18|(Rs&63)<<12|(Bs&63)<<6|Ds&63,Ls>65535&&Ls<1114112&&(Is=Ls))}}Is===null?(Is=65533,$s=1):Is>65535&&(Is-=65536,hs.push(Is>>>10&1023|55296),Is=56320|Is&1023),hs.push(Is),ys+=$s}return Lr(hs)}const Mr=4096;function Lr(ls){const Kr=ls.length;if(Kr<=Mr)return String.fromCharCode.apply(String,ls);let Zr="",hs=0;for(;hs<Kr;)Zr+=String.fromCharCode.apply(String,ls.slice(hs,hs+=Mr));return Zr}function Vr(ls,Kr,Zr){let hs="";Zr=Math.min(ls.length,Zr);for(let ys=Kr;ys<Zr;++ys)hs+=String.fromCharCode(ls[ys]&127);return hs}function Jr(ls,Kr,Zr){let hs="";Zr=Math.min(ls.length,Zr);for(let ys=Kr;ys<Zr;++ys)hs+=String.fromCharCode(ls[ys]);return hs}function es(ls,Kr,Zr){const hs=ls.length;(!Kr||Kr<0)&&(Kr=0),(!Zr||Zr<0||Zr>hs)&&(Zr=hs);let ys="";for(let Es=Kr;Es<Zr;++Es)ys+=zs[ls[Es]];return ys}function ns(ls,Kr,Zr){const hs=ls.slice(Kr,Zr);let ys="";for(let Es=0;Es<hs.length-1;Es+=2)ys+=String.fromCharCode(hs[Es]+hs[Es+1]*256);return ys}gr.prototype.slice=function(Kr,Zr){const hs=this.length;Kr=~~Kr,Zr=Zr===void 0?hs:~~Zr,Kr<0?(Kr+=hs,Kr<0&&(Kr=0)):Kr>hs&&(Kr=hs),Zr<0?(Zr+=hs,Zr<0&&(Zr=0)):Zr>hs&&(Zr=hs),Zr<Kr&&(Zr=Kr);const ys=this.subarray(Kr,Zr);return Object.setPrototypeOf(ys,gr.prototype),ys};function Qr(ls,Kr,Zr){if(ls%1!==0||ls<0)throw new RangeError("offset is not uint");if(ls+Kr>Zr)throw new RangeError("Trying to access beyond buffer length")}gr.prototype.readUintLE=gr.prototype.readUIntLE=function(Kr,Zr,hs){Kr=Kr>>>0,Zr=Zr>>>0,hs||Qr(Kr,Zr,this.length);let ys=this[Kr],Es=1,Is=0;for(;++Is<Zr&&(Es*=256);)ys+=this[Kr+Is]*Es;return ys},gr.prototype.readUintBE=gr.prototype.readUIntBE=function(Kr,Zr,hs){Kr=Kr>>>0,Zr=Zr>>>0,hs||Qr(Kr,Zr,this.length);let ys=this[Kr+--Zr],Es=1;for(;Zr>0&&(Es*=256);)ys+=this[Kr+--Zr]*Es;return ys},gr.prototype.readUint8=gr.prototype.readUInt8=function(Kr,Zr){return Kr=Kr>>>0,Zr||Qr(Kr,1,this.length),this[Kr]},gr.prototype.readUint16LE=gr.prototype.readUInt16LE=function(Kr,Zr){return Kr=Kr>>>0,Zr||Qr(Kr,2,this.length),this[Kr]|this[Kr+1]<<8},gr.prototype.readUint16BE=gr.prototype.readUInt16BE=function(Kr,Zr){return Kr=Kr>>>0,Zr||Qr(Kr,2,this.length),this[Kr]<<8|this[Kr+1]},gr.prototype.readUint32LE=gr.prototype.readUInt32LE=function(Kr,Zr){return Kr=Kr>>>0,Zr||Qr(Kr,4,this.length),(this[Kr]|this[Kr+1]<<8|this[Kr+2]<<16)+this[Kr+3]*16777216},gr.prototype.readUint32BE=gr.prototype.readUInt32BE=function(Kr,Zr){return Kr=Kr>>>0,Zr||Qr(Kr,4,this.length),this[Kr]*16777216+(this[Kr+1]<<16|this[Kr+2]<<8|this[Kr+3])},gr.prototype.readBigUInt64LE=Hs(function(Kr){Kr=Kr>>>0,Ns(Kr,"offset");const Zr=this[Kr],hs=this[Kr+7];(Zr===void 0||hs===void 0)&&Ts(Kr,this.length-8);const ys=Zr+this[++Kr]*2**8+this[++Kr]*2**16+this[++Kr]*2**24,Es=this[++Kr]+this[++Kr]*2**8+this[++Kr]*2**16+hs*2**24;return BigInt(ys)+(BigInt(Es)<<BigInt(32))}),gr.prototype.readBigUInt64BE=Hs(function(Kr){Kr=Kr>>>0,Ns(Kr,"offset");const Zr=this[Kr],hs=this[Kr+7];(Zr===void 0||hs===void 0)&&Ts(Kr,this.length-8);const ys=Zr*2**24+this[++Kr]*2**16+this[++Kr]*2**8+this[++Kr],Es=this[++Kr]*2**24+this[++Kr]*2**16+this[++Kr]*2**8+hs;return(BigInt(ys)<<BigInt(32))+BigInt(Es)}),gr.prototype.readIntLE=function(Kr,Zr,hs){Kr=Kr>>>0,Zr=Zr>>>0,hs||Qr(Kr,Zr,this.length);let ys=this[Kr],Es=1,Is=0;for(;++Is<Zr&&(Es*=256);)ys+=this[Kr+Is]*Es;return Es*=128,ys>=Es&&(ys-=Math.pow(2,8*Zr)),ys},gr.prototype.readIntBE=function(Kr,Zr,hs){Kr=Kr>>>0,Zr=Zr>>>0,hs||Qr(Kr,Zr,this.length);let ys=Zr,Es=1,Is=this[Kr+--ys];for(;ys>0&&(Es*=256);)Is+=this[Kr+--ys]*Es;return Es*=128,Is>=Es&&(Is-=Math.pow(2,8*Zr)),Is},gr.prototype.readInt8=function(Kr,Zr){return Kr=Kr>>>0,Zr||Qr(Kr,1,this.length),this[Kr]&128?(255-this[Kr]+1)*-1:this[Kr]},gr.prototype.readInt16LE=function(Kr,Zr){Kr=Kr>>>0,Zr||Qr(Kr,2,this.length);const hs=this[Kr]|this[Kr+1]<<8;return hs&32768?hs|4294901760:hs},gr.prototype.readInt16BE=function(Kr,Zr){Kr=Kr>>>0,Zr||Qr(Kr,2,this.length);const hs=this[Kr+1]|this[Kr]<<8;return hs&32768?hs|4294901760:hs},gr.prototype.readInt32LE=function(Kr,Zr){return Kr=Kr>>>0,Zr||Qr(Kr,4,this.length),this[Kr]|this[Kr+1]<<8|this[Kr+2]<<16|this[Kr+3]<<24},gr.prototype.readInt32BE=function(Kr,Zr){return Kr=Kr>>>0,Zr||Qr(Kr,4,this.length),this[Kr]<<24|this[Kr+1]<<16|this[Kr+2]<<8|this[Kr+3]},gr.prototype.readBigInt64LE=Hs(function(Kr){Kr=Kr>>>0,Ns(Kr,"offset");const Zr=this[Kr],hs=this[Kr+7];(Zr===void 0||hs===void 0)&&Ts(Kr,this.length-8);const ys=this[Kr+4]+this[Kr+5]*2**8+this[Kr+6]*2**16+(hs<<24);return(BigInt(ys)<<BigInt(32))+BigInt(Zr+this[++Kr]*2**8+this[++Kr]*2**16+this[++Kr]*2**24)}),gr.prototype.readBigInt64BE=Hs(function(Kr){Kr=Kr>>>0,Ns(Kr,"offset");const Zr=this[Kr],hs=this[Kr+7];(Zr===void 0||hs===void 0)&&Ts(Kr,this.length-8);const ys=(Zr<<24)+this[++Kr]*2**16+this[++Kr]*2**8+this[++Kr];return(BigInt(ys)<<BigInt(32))+BigInt(this[++Kr]*2**24+this[++Kr]*2**16+this[++Kr]*2**8+hs)}),gr.prototype.readFloatLE=function(Kr,Zr){return Kr=Kr>>>0,Zr||Qr(Kr,4,this.length),dr.read(this,Kr,!0,23,4)},gr.prototype.readFloatBE=function(Kr,Zr){return Kr=Kr>>>0,Zr||Qr(Kr,4,this.length),dr.read(this,Kr,!1,23,4)},gr.prototype.readDoubleLE=function(Kr,Zr){return Kr=Kr>>>0,Zr||Qr(Kr,8,this.length),dr.read(this,Kr,!0,52,8)},gr.prototype.readDoubleBE=function(Kr,Zr){return Kr=Kr>>>0,Zr||Qr(Kr,8,this.length),dr.read(this,Kr,!1,52,8)};function zr(ls,Kr,Zr,hs,ys,Es){if(!gr.isBuffer(ls))throw new TypeError('"buffer" argument must be a Buffer instance');if(Kr>ys||Kr<Es)throw new RangeError('"value" argument is out of bounds');if(Zr+hs>ls.length)throw new RangeError("Index out of range")}gr.prototype.writeUintLE=gr.prototype.writeUIntLE=function(Kr,Zr,hs,ys){if(Kr=+Kr,Zr=Zr>>>0,hs=hs>>>0,!ys){const $s=Math.pow(2,8*hs)-1;zr(this,Kr,Zr,hs,$s,0)}let Es=1,Is=0;for(this[Zr]=Kr&255;++Is<hs&&(Es*=256);)this[Zr+Is]=Kr/Es&255;return Zr+hs},gr.prototype.writeUintBE=gr.prototype.writeUIntBE=function(Kr,Zr,hs,ys){if(Kr=+Kr,Zr=Zr>>>0,hs=hs>>>0,!ys){const $s=Math.pow(2,8*hs)-1;zr(this,Kr,Zr,hs,$s,0)}let Es=hs-1,Is=1;for(this[Zr+Es]=Kr&255;--Es>=0&&(Is*=256);)this[Zr+Es]=Kr/Is&255;return Zr+hs},gr.prototype.writeUint8=gr.prototype.writeUInt8=function(Kr,Zr,hs){return Kr=+Kr,Zr=Zr>>>0,hs||zr(this,Kr,Zr,1,255,0),this[Zr]=Kr&255,Zr+1},gr.prototype.writeUint16LE=gr.prototype.writeUInt16LE=function(Kr,Zr,hs){return Kr=+Kr,Zr=Zr>>>0,hs||zr(this,Kr,Zr,2,65535,0),this[Zr]=Kr&255,this[Zr+1]=Kr>>>8,Zr+2},gr.prototype.writeUint16BE=gr.prototype.writeUInt16BE=function(Kr,Zr,hs){return Kr=+Kr,Zr=Zr>>>0,hs||zr(this,Kr,Zr,2,65535,0),this[Zr]=Kr>>>8,this[Zr+1]=Kr&255,Zr+2},gr.prototype.writeUint32LE=gr.prototype.writeUInt32LE=function(Kr,Zr,hs){return Kr=+Kr,Zr=Zr>>>0,hs||zr(this,Kr,Zr,4,4294967295,0),this[Zr+3]=Kr>>>24,this[Zr+2]=Kr>>>16,this[Zr+1]=Kr>>>8,this[Zr]=Kr&255,Zr+4},gr.prototype.writeUint32BE=gr.prototype.writeUInt32BE=function(Kr,Zr,hs){return Kr=+Kr,Zr=Zr>>>0,hs||zr(this,Kr,Zr,4,4294967295,0),this[Zr]=Kr>>>24,this[Zr+1]=Kr>>>16,this[Zr+2]=Kr>>>8,this[Zr+3]=Kr&255,Zr+4};function Wr(ls,Kr,Zr,hs,ys){Ss(Kr,hs,ys,ls,Zr,7);let Es=Number(Kr&BigInt(4294967295));ls[Zr++]=Es,Es=Es>>8,ls[Zr++]=Es,Es=Es>>8,ls[Zr++]=Es,Es=Es>>8,ls[Zr++]=Es;let Is=Number(Kr>>BigInt(32)&BigInt(4294967295));return ls[Zr++]=Is,Is=Is>>8,ls[Zr++]=Is,Is=Is>>8,ls[Zr++]=Is,Is=Is>>8,ls[Zr++]=Is,Zr}function ss(ls,Kr,Zr,hs,ys){Ss(Kr,hs,ys,ls,Zr,7);let Es=Number(Kr&BigInt(4294967295));ls[Zr+7]=Es,Es=Es>>8,ls[Zr+6]=Es,Es=Es>>8,ls[Zr+5]=Es,Es=Es>>8,ls[Zr+4]=Es;let Is=Number(Kr>>BigInt(32)&BigInt(4294967295));return ls[Zr+3]=Is,Is=Is>>8,ls[Zr+2]=Is,Is=Is>>8,ls[Zr+1]=Is,Is=Is>>8,ls[Zr]=Is,Zr+8}gr.prototype.writeBigUInt64LE=Hs(function(Kr,Zr=0){return Wr(this,Kr,Zr,BigInt(0),BigInt("0xffffffffffffffff"))}),gr.prototype.writeBigUInt64BE=Hs(function(Kr,Zr=0){return ss(this,Kr,Zr,BigInt(0),BigInt("0xffffffffffffffff"))}),gr.prototype.writeIntLE=function(Kr,Zr,hs,ys){if(Kr=+Kr,Zr=Zr>>>0,!ys){const Rs=Math.pow(2,8*hs-1);zr(this,Kr,Zr,hs,Rs-1,-Rs)}let Es=0,Is=1,$s=0;for(this[Zr]=Kr&255;++Es<hs&&(Is*=256);)Kr<0&&$s===0&&this[Zr+Es-1]!==0&&($s=1),this[Zr+Es]=(Kr/Is>>0)-$s&255;return Zr+hs},gr.prototype.writeIntBE=function(Kr,Zr,hs,ys){if(Kr=+Kr,Zr=Zr>>>0,!ys){const Rs=Math.pow(2,8*hs-1);zr(this,Kr,Zr,hs,Rs-1,-Rs)}let Es=hs-1,Is=1,$s=0;for(this[Zr+Es]=Kr&255;--Es>=0&&(Is*=256);)Kr<0&&$s===0&&this[Zr+Es+1]!==0&&($s=1),this[Zr+Es]=(Kr/Is>>0)-$s&255;return Zr+hs},gr.prototype.writeInt8=function(Kr,Zr,hs){return Kr=+Kr,Zr=Zr>>>0,hs||zr(this,Kr,Zr,1,127,-128),Kr<0&&(Kr=255+Kr+1),this[Zr]=Kr&255,Zr+1},gr.prototype.writeInt16LE=function(Kr,Zr,hs){return Kr=+Kr,Zr=Zr>>>0,hs||zr(this,Kr,Zr,2,32767,-32768),this[Zr]=Kr&255,this[Zr+1]=Kr>>>8,Zr+2},gr.prototype.writeInt16BE=function(Kr,Zr,hs){return Kr=+Kr,Zr=Zr>>>0,hs||zr(this,Kr,Zr,2,32767,-32768),this[Zr]=Kr>>>8,this[Zr+1]=Kr&255,Zr+2},gr.prototype.writeInt32LE=function(Kr,Zr,hs){return Kr=+Kr,Zr=Zr>>>0,hs||zr(this,Kr,Zr,4,2147483647,-2147483648),this[Zr]=Kr&255,this[Zr+1]=Kr>>>8,this[Zr+2]=Kr>>>16,this[Zr+3]=Kr>>>24,Zr+4},gr.prototype.writeInt32BE=function(Kr,Zr,hs){return Kr=+Kr,Zr=Zr>>>0,hs||zr(this,Kr,Zr,4,2147483647,-2147483648),Kr<0&&(Kr=4294967295+Kr+1),this[Zr]=Kr>>>24,this[Zr+1]=Kr>>>16,this[Zr+2]=Kr>>>8,this[Zr+3]=Kr&255,Zr+4},gr.prototype.writeBigInt64LE=Hs(function(Kr,Zr=0){return Wr(this,Kr,Zr,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),gr.prototype.writeBigInt64BE=Hs(function(Kr,Zr=0){return ss(this,Kr,Zr,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Xr(ls,Kr,Zr,hs,ys,Es){if(Zr+hs>ls.length)throw new RangeError("Index out of range");if(Zr<0)throw new RangeError("Index out of range")}function ts(ls,Kr,Zr,hs,ys){return Kr=+Kr,Zr=Zr>>>0,ys||Xr(ls,Kr,Zr,4),dr.write(ls,Kr,Zr,hs,23,4),Zr+4}gr.prototype.writeFloatLE=function(Kr,Zr,hs){return ts(this,Kr,Zr,!0,hs)},gr.prototype.writeFloatBE=function(Kr,Zr,hs){return ts(this,Kr,Zr,!1,hs)};function fs(ls,Kr,Zr,hs,ys){return Kr=+Kr,Zr=Zr>>>0,ys||Xr(ls,Kr,Zr,8),dr.write(ls,Kr,Zr,hs,52,8),Zr+8}gr.prototype.writeDoubleLE=function(Kr,Zr,hs){return fs(this,Kr,Zr,!0,hs)},gr.prototype.writeDoubleBE=function(Kr,Zr,hs){return fs(this,Kr,Zr,!1,hs)},gr.prototype.copy=function(Kr,Zr,hs,ys){if(!gr.isBuffer(Kr))throw new TypeError("argument should be a Buffer");if(hs||(hs=0),!ys&&ys!==0&&(ys=this.length),Zr>=Kr.length&&(Zr=Kr.length),Zr||(Zr=0),ys>0&&ys<hs&&(ys=hs),ys===hs||Kr.length===0||this.length===0)return 0;if(Zr<0)throw new RangeError("targetStart out of bounds");if(hs<0||hs>=this.length)throw new RangeError("Index out of range");if(ys<0)throw new RangeError("sourceEnd out of bounds");ys>this.length&&(ys=this.length),Kr.length-Zr<ys-hs&&(ys=Kr.length-Zr+hs);const Es=ys-hs;return this===Kr&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Zr,hs,ys):Uint8Array.prototype.set.call(Kr,this.subarray(hs,ys),Zr),Es},gr.prototype.fill=function(Kr,Zr,hs,ys){if(typeof Kr=="string"){if(typeof Zr=="string"?(ys=Zr,Zr=0,hs=this.length):typeof hs=="string"&&(ys=hs,hs=this.length),ys!==void 0&&typeof ys!="string")throw new TypeError("encoding must be a string");if(typeof ys=="string"&&!gr.isEncoding(ys))throw new TypeError("Unknown encoding: "+ys);if(Kr.length===1){const Is=Kr.charCodeAt(0);(ys==="utf8"&&Is<128||ys==="latin1")&&(Kr=Is)}}else typeof Kr=="number"?Kr=Kr&255:typeof Kr=="boolean"&&(Kr=Number(Kr));if(Zr<0||this.length<Zr||this.length<hs)throw new RangeError("Out of range index");if(hs<=Zr)return this;Zr=Zr>>>0,hs=hs===void 0?this.length:hs>>>0,Kr||(Kr=0);let Es;if(typeof Kr=="number")for(Es=Zr;Es<hs;++Es)this[Es]=Kr;else{const Is=gr.isBuffer(Kr)?Kr:gr.from(Kr,ys),$s=Is.length;if($s===0)throw new TypeError('The value "'+Kr+'" is invalid for argument "value"');for(Es=0;Es<hs-Zr;++Es)this[Es+Zr]=Is[Es%$s]}return this};const rs={};function as(ls,Kr,Zr){rs[ls]=class extends Zr{constructor(){super(),Object.defineProperty(this,"message",{value:Kr.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ls}]`,this.stack,delete this.name}get code(){return ls}set code(ys){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ys,writable:!0})}toString(){return`${this.name} [${ls}]: ${this.message}`}}}as("ERR_BUFFER_OUT_OF_BOUNDS",function(ls){return ls?`${ls} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),as("ERR_INVALID_ARG_TYPE",function(ls,Kr){return`The "${ls}" argument must be of type number. Received type ${typeof Kr}`},TypeError),as("ERR_OUT_OF_RANGE",function(ls,Kr,Zr){let hs=`The value of "${ls}" is out of range.`,ys=Zr;return Number.isInteger(Zr)&&Math.abs(Zr)>2**32?ys=ps(String(Zr)):typeof Zr=="bigint"&&(ys=String(Zr),(Zr>BigInt(2)**BigInt(32)||Zr<-(BigInt(2)**BigInt(32)))&&(ys=ps(ys)),ys+="n"),hs+=` It must be ${Kr}. Received ${ys}`,hs},RangeError);function ps(ls){let Kr="",Zr=ls.length;const hs=ls[0]==="-"?1:0;for(;Zr>=hs+4;Zr-=3)Kr=`_${ls.slice(Zr-3,Zr)}${Kr}`;return`${ls.slice(0,Zr)}${Kr}`}function xs(ls,Kr,Zr){Ns(Kr,"offset"),(ls[Kr]===void 0||ls[Kr+Zr]===void 0)&&Ts(Kr,ls.length-(Zr+1))}function Ss(ls,Kr,Zr,hs,ys,Es){if(ls>Zr||ls<Kr){const Is=typeof Kr=="bigint"?"n":"";let $s;throw Es>3?Kr===0||Kr===BigInt(0)?$s=`>= 0${Is} and < 2${Is} ** ${(Es+1)*8}${Is}`:$s=`>= -(2${Is} ** ${(Es+1)*8-1}${Is}) and < 2 ** ${(Es+1)*8-1}${Is}`:$s=`>= ${Kr}${Is} and <= ${Zr}${Is}`,new rs.ERR_OUT_OF_RANGE("value",$s,ls)}xs(hs,ys,Es)}function Ns(ls,Kr){if(typeof ls!="number")throw new rs.ERR_INVALID_ARG_TYPE(Kr,"number",ls)}function Ts(ls,Kr,Zr){throw Math.floor(ls)!==ls?(Ns(ls,Zr),new rs.ERR_OUT_OF_RANGE(Zr||"offset","an integer",ls)):Kr<0?new rs.ERR_BUFFER_OUT_OF_BOUNDS:new rs.ERR_OUT_OF_RANGE(Zr||"offset",`>= ${Zr?1:0} and <= ${Kr}`,ls)}const os=/[^+/0-9A-Za-z-_]/g;function bs(ls){if(ls=ls.split("=")[0],ls=ls.trim().replace(os,""),ls.length<2)return"";for(;ls.length%4!==0;)ls=ls+"=";return ls}function ws(ls,Kr){Kr=Kr||1/0;let Zr;const hs=ls.length;let ys=null;const Es=[];for(let Is=0;Is<hs;++Is){if(Zr=ls.charCodeAt(Is),Zr>55295&&Zr<57344){if(!ys){if(Zr>56319){(Kr-=3)>-1&&Es.push(239,191,189);continue}else if(Is+1===hs){(Kr-=3)>-1&&Es.push(239,191,189);continue}ys=Zr;continue}if(Zr<56320){(Kr-=3)>-1&&Es.push(239,191,189),ys=Zr;continue}Zr=(ys-55296<<10|Zr-56320)+65536}else ys&&(Kr-=3)>-1&&Es.push(239,191,189);if(ys=null,Zr<128){if((Kr-=1)<0)break;Es.push(Zr)}else if(Zr<2048){if((Kr-=2)<0)break;Es.push(Zr>>6|192,Zr&63|128)}else if(Zr<65536){if((Kr-=3)<0)break;Es.push(Zr>>12|224,Zr>>6&63|128,Zr&63|128)}else if(Zr<1114112){if((Kr-=4)<0)break;Es.push(Zr>>18|240,Zr>>12&63|128,Zr>>6&63|128,Zr&63|128)}else throw new Error("Invalid code point")}return Es}function As(ls){const Kr=[];for(let Zr=0;Zr<ls.length;++Zr)Kr.push(ls.charCodeAt(Zr)&255);return Kr}function gs(ls,Kr){let Zr,hs,ys;const Es=[];for(let Is=0;Is<ls.length&&!((Kr-=2)<0);++Is)Zr=ls.charCodeAt(Is),hs=Zr>>8,ys=Zr%256,Es.push(ys),Es.push(hs);return Es}function vs(ls){return ar.toByteArray(bs(ls))}function Ps(ls,Kr,Zr,hs){let ys;for(ys=0;ys<hs&&!(ys+Zr>=Kr.length||ys>=ls.length);++ys)Kr[ys+Zr]=ls[ys];return ys}function Os(ls,Kr){return ls instanceof Kr||ls!=null&&ls.constructor!=null&&ls.constructor.name!=null&&ls.constructor.name===Kr.name}function Ms(ls){return ls!==ls}const zs=function(){const ls="0123456789abcdef",Kr=new Array(256);for(let Zr=0;Zr<16;++Zr){const hs=Zr*16;for(let ys=0;ys<16;++ys)Kr[hs+ys]=ls[Zr]+ls[ys]}return Kr}();function Hs(ls){return typeof BigInt>"u"?Cs:ls}function Cs(){throw new Error("BigInt not supported")}})(buffer$1);var identifiers={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604},utilities={},style={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"},converter={},transformers={},hasRequiredTransformers;function requireTransformers(){return hasRequiredTransformers||(hasRequiredTransformers=1,function(cr){"use strict;";const{Buffer:ar}=buffer$1,dr=4294967292,fr=4294967293,hr=4294967294,pr=4294967295,mr=[0,1,3,7,15,31,63,127,255,511,1023],gr=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),xr=[];yr.forEach(Sr=>{xr.push(Sr.charCodeAt(0))}),cr.utf8={encode(Sr){const vr=[];return Sr.forEach(Er=>{if(Er>=0&&Er<=127)vr.push(Er);else if(Er<=2047)vr.push(192+(Er>>6&mr[5])),vr.push(128+(Er&mr[6]));else if(Er<55296||Er>57343&&Er<=65535)vr.push(224+(Er>>12&mr[4])),vr.push(128+(Er>>6&mr[6])),vr.push(128+(Er&mr[6]));else if(Er>=65536&&Er<=1114111){const Ar=Er>>16&mr[5];vr.push(240+(Ar>>2)),vr.push(128+((Ar&mr[2])<<4)+(Er>>12&mr[4])),vr.push(128+(Er>>6&mr[6])),vr.push(128+(Er&mr[6]))}else throw new RangeError(`utf8.encode: character out of range: char: ${Er}`)}),ar.from(vr)},decode(Sr,vr){function Er(jr,Ur){if((Ur&192)!==128)return fr;const qr=((jr&mr[5])<<6)+(Ur&mr[6]);return qr<128?dr:qr}function Ar(jr,Ur,qr){if((qr&192)!==128||(Ur&192)!==128)return fr;const Hr=((jr&mr[4])<<12)+((Ur&mr[6])<<6)+(qr&mr[6]);return Hr<2048?dr:Hr>=55296&&Hr<=57343?hr:Hr}function _r(jr,Ur,qr,Hr){if((Hr&192)!==128||(qr&192)!==128||(Ur&192)!==128)return fr;const Or=(((jr&mr[3])<<2)+(Ur>>4&mr[2])<<16)+((Ur&mr[4])<<12)+((qr&mr[6])<<6)+(Hr&mr[6]);return Or<65536?dr:Or>1114111?hr:Or}let Cr,kr,Rr,Ir,Nr,Pr;const Tr=Sr.length;let Br=vr?3:0;const Fr=[];for(;Br<Tr;){kr=Sr[Br],Cr=pr;const jr=!0;for(;jr;){if(kr>=0&&kr<=127){Cr=kr,Pr=1;break}if(Rr=Br+1,Rr<Tr&&kr>=194&&kr<=223){Cr=Er(kr,Sr[Rr]),Pr=2;break}if(Ir=Br+2,Ir<Tr&&kr>=224&&kr<=239){Cr=Ar(kr,Sr[Rr],Sr[Ir]),Pr=3;break}if(Nr=Br+3,Nr<Tr&&kr>=240&&kr<=244){Cr=_r(kr,Sr[Rr],Sr[Ir],Sr[Nr]),Pr=4;break}break}if(Cr>1114111){const Ur=`byte[${Br}]`;throw Cr===pr?new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${Ur}`):Cr===fr?new RangeError(`utf8.decode: illegal trailing byte found at: ${Ur}`):Cr===hr?new RangeError(`utf8.decode: code point out of range found at: ${Ur}`):Cr===dr?new RangeError(`utf8.decode: non-shortest form found at: ${Ur}`):new RangeError(`utf8.decode: unrecognized error found at: ${Ur}`)}Fr.push(Cr),Br+=Pr}return Fr}},cr.utf16be={encode(Sr){const vr=[];let Er,Ar,_r;for(let Cr=0;Cr<Sr.length;Cr+=1)if(Er=Sr[Cr],Er>=0&&Er<=55295||Er>=57344&&Er<=65535)vr.push(Er>>8&mr[8]),vr.push(Er&mr[8]);else if(Er>=65536&&Er<=1114111)_r=Er-65536,Ar=55296+(_r>>10),_r=56320+(_r&mr[10]),vr.push(Ar>>8&mr[8]),vr.push(Ar&mr[8]),vr.push(_r>>8&mr[8]),vr.push(_r&mr[8]);else throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${Cr}]: ${Er}`);return ar.from(vr)},decode(Sr,vr){if(Sr.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${Sr.length}`);const Er=[],Ar=Sr.length;let _r=vr?2:0,Cr=0,kr,Rr,Ir,Nr,Pr,Tr;for(;_r<Ar;){for(;;){if(Ir=_r+1,Ir<Ar){if(Pr=(Sr[_r]<<8)+Sr[Ir],Pr<55296||Pr>57343){kr=Pr,Rr=2;break}if(Nr=_r+3,Nr<Ar&&(Tr=(Sr[_r+2]<<8)+Sr[Nr],Pr<=56319&&Tr>=56320&&Tr<=57343)){kr=65536+(Pr-55296<<10)+(Tr-56320),Rr=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${_r}]`)}Er[Cr++]=kr,_r+=Rr}return Er}},cr.utf16le={encode(Sr){const vr=[];let Er,Ar,_r;for(let Cr=0;Cr<Sr.length;Cr+=1)if(Er=Sr[Cr],Er>=0&&Er<=55295||Er>=57344&&Er<=65535)vr.push(Er&mr[8]),vr.push(Er>>8&mr[8]);else if(Er>=65536&&Er<=1114111)_r=Er-65536,Ar=55296+(_r>>10),_r=56320+(_r&mr[10]),vr.push(Ar&mr[8]),vr.push(Ar>>8&mr[8]),vr.push(_r&mr[8]),vr.push(_r>>8&mr[8]);else throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${Cr}]: ${Er}`);return ar.from(vr)},decode(Sr,vr){if(Sr.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${Sr.length}`);const Er=[],Ar=Sr.length;let _r=vr?2:0,Cr=0,kr,Rr,Ir,Nr,Pr,Tr;for(;_r<Ar;){for(;;){if(Ir=_r+1,Ir<Ar){if(Pr=(Sr[Ir]<<8)+Sr[_r],Pr<55296||Pr>57343){kr=Pr,Rr=2;break}if(Nr=_r+3,Nr<Ar&&(Tr=(Sr[Nr]<<8)+Sr[_r+2],Pr<=56319&&Tr>=56320&&Tr<=57343)){kr=65536+(Pr-55296<<10)+(Tr-56320),Rr=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${_r}]`)}Er[Cr++]=kr,_r+=Rr}return Er}},cr.utf32be={encode(Sr){const vr=ar.alloc(Sr.length*4);let Er=0;return Sr.forEach(Ar=>{if(Ar>=55296&&Ar<=57343||Ar>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${Er/4}]: ${Ar}`);vr[Er++]=Ar>>24&mr[8],vr[Er++]=Ar>>16&mr[8],vr[Er++]=Ar>>8&mr[8],vr[Er++]=Ar&mr[8]}),vr},decode(Sr,vr){if(Sr.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${Sr.length}`);const Er=[];let Ar=vr?4:0;for(;Ar<Sr.length;Ar+=4){const _r=(Sr[Ar]<<24)+(Sr[Ar+1]<<16)+(Sr[Ar+2]<<8)+Sr[Ar+3];if(_r>=55296&&_r<=57343||_r>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${Ar/4}]: ${_r}`);Er.push(_r)}return Er}},cr.utf32le={encode(Sr){const vr=ar.alloc(Sr.length*4);let Er=0;return Sr.forEach(Ar=>{if(Ar>=55296&&Ar<=57343||Ar>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${Er/4}]: ${Ar}`);vr[Er++]=Ar&mr[8],vr[Er++]=Ar>>8&mr[8],vr[Er++]=Ar>>16&mr[8],vr[Er++]=Ar>>24&mr[8]}),vr},decode(Sr,vr){if(Sr.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${Sr.length}`);const Er=[];let Ar=vr?4:0;for(;Ar<Sr.length;Ar+=4){const _r=(Sr[Ar+3]<<24)+(Sr[Ar+2]<<16)+(Sr[Ar+1]<<8)+Sr[Ar];if(_r>=55296&&_r<=57343||_r>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${Ar/4}]: ${_r}`);Er.push(_r)}return Er}},cr.uint7={encode(Sr){const vr=ar.alloc(Sr.length);for(let Er=0;Er<Sr.length;Er+=1){if(Sr[Er]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${Er}]: ${Sr[Er]}`);vr[Er]=Sr[Er]}return vr},decode(Sr){const vr=[];for(let Er=0;Er<Sr.length;Er+=1){if(Sr[Er]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${Er}]: ${Sr[Er]}`);vr[Er]=Sr[Er]}return vr}},cr.uint8={encode(Sr){const vr=ar.alloc(Sr.length);for(let Er=0;Er<Sr.length;Er+=1){if(Sr[Er]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${Er}]: ${Sr[Er]}`);vr[Er]=Sr[Er]}return vr},decode(Sr){const vr=[];for(let Er=0;Er<Sr.length;Er+=1)vr[Er]=Sr[Er];return vr}},cr.uint16be={encode(Sr){const vr=ar.alloc(Sr.length*2);let Er=0;return Sr.forEach(Ar=>{if(Ar>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${Er/2}]: ${Ar}`);vr[Er++]=Ar>>8&mr[8],vr[Er++]=Ar&mr[8]}),vr},decode(Sr){if(Sr.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${Sr.length}`);const vr=[];for(let Er=0;Er<Sr.length;Er+=2)vr.push((Sr[Er]<<8)+Sr[Er+1]);return vr}},cr.uint16le={encode(Sr){const vr=ar.alloc(Sr.length*2);let Er=0;return Sr.forEach(Ar=>{if(Ar>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${Er/2}]: ${Ar}`);vr[Er++]=Ar&mr[8],vr[Er++]=Ar>>8&mr[8]}),vr},decode(Sr){if(Sr.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${Sr.length}`);const vr=[];for(let Er=0;Er<Sr.length;Er+=2)vr.push((Sr[Er+1]<<8)+Sr[Er]);return vr}},cr.uint32be={encode(Sr){const vr=ar.alloc(Sr.length*4);let Er=0;return Sr.forEach(Ar=>{vr[Er++]=Ar>>24&mr[8],vr[Er++]=Ar>>16&mr[8],vr[Er++]=Ar>>8&mr[8],vr[Er++]=Ar&mr[8]}),vr},decode(Sr){if(Sr.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${Sr.length}`);const vr=[];for(let Er=0;Er<Sr.length;Er+=4)vr.push((Sr[Er]<<24)+(Sr[Er+1]<<16)+(Sr[Er+2]<<8)+Sr[Er+3]);return vr}},cr.uint32le={encode(Sr){const vr=ar.alloc(Sr.length*4);let Er=0;return Sr.forEach(Ar=>{vr[Er++]=Ar&mr[8],vr[Er++]=Ar>>8&mr[8],vr[Er++]=Ar>>16&mr[8],vr[Er++]=Ar>>24&mr[8]}),vr},decode(Sr){if(Sr.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${Sr.length}`);const vr=[];for(let Er=0;Er<Sr.length;Er+=4)vr.push((Sr[Er+3]<<24)+(Sr[Er+2]<<16)+(Sr[Er+1]<<8)+Sr[Er]);return vr}},cr.string={encode(Sr){return cr.utf16le.encode(Sr).toString("utf16le")},decode(Sr){return cr.utf16le.decode(ar.from(Sr,"utf16le"),0)}},cr.escaped={encode(Sr){const vr=[];for(let Er=0;Er<Sr.length;Er+=1){const Ar=Sr[Er];if(Ar===96)vr.push(Ar),vr.push(Ar);else if(Ar===10)vr.push(Ar);else if(Ar>=32&&Ar<=126)vr.push(Ar);else{let _r="";if(Ar>=0&&Ar<=31)_r+=`\`x${gr[Ar]}`;else if(Ar>=127&&Ar<=255)_r+=`\`x${gr[Ar]}`;else if(Ar>=256&&Ar<=65535)_r+=`\`u${gr[Ar>>8&mr[8]]}${gr[Ar&mr[8]]}`;else if(Ar>=65536&&Ar<=4294967295){_r+="`u{";const kr=Ar>>24&mr[8];kr>0&&(_r+=gr[kr]),_r+=`${gr[Ar>>16&mr[8]]+gr[Ar>>8&mr[8]]+gr[Ar&mr[8]]}}`}else throw new Error("escape.encode(char): char > 0xffffffff not allowed");ar.from(_r).forEach(kr=>{vr.push(kr)})}}return ar.from(vr)},decode(Sr){function vr(Tr){return Tr>=48&&Tr<=57||Tr>=65&&Tr<=70||Tr>=97&&Tr<=102}function Er(Tr,Br,Fr){const jr={char:null,nexti:Tr+2,error:!0};if(Tr+1<Br&&vr(Fr[Tr])&&vr(Fr[Tr+1])){const Ur=String.fromCodePoint(Fr[Tr],Fr[Tr+1]);jr.char=parseInt(Ur,16),Number.isNaN(jr.char)||(jr.error=!1)}return jr}function Ar(Tr,Br,Fr){const jr={char:null,nexti:Tr+4,error:!0};if(Tr+3<Br&&vr(Fr[Tr])&&vr(Fr[Tr+1])&&vr(Fr[Tr+2])&&vr(Fr[Tr+3])){const Ur=String.fromCodePoint(Fr[Tr],Fr[Tr+1],Fr[Tr+2],Fr[Tr+3]);jr.char=parseInt(Ur,16),Number.isNaN(jr.char)||(jr.error=!1)}return jr}function _r(Tr,Br,Fr){const jr={char:null,nexti:Tr+4,error:!0};let Ur="";for(;Tr<Br&&vr(Fr[Tr]);)Ur+=String.fromCodePoint(Fr[Tr]),Tr+=1;return jr.char=parseInt(Ur,16),Fr[Tr]===125&&!Number.isNaN(jr.char)&&(jr.error=!1),jr.nexti=Tr+1,jr}const Cr=[],kr=Sr.length;let Rr,Ir,Nr,Pr=0;for(;Pr<kr;){for(;;){if(Nr=!0,Sr[Pr]!==96){Cr.push(Sr[Pr]),Pr+=1,Nr=!1;break}if(Rr=Pr+1,Rr>=kr)break;if(Sr[Rr]===96){Cr.push(96),Pr+=2,Nr=!1;break}if(Sr[Rr]===120){if(Ir=Er(Rr+1,kr,Sr),Ir.error)break;Cr.push(Ir.char),Pr=Ir.nexti,Nr=!1;break}if(Sr[Rr]===117){if(Sr[Rr+1]===123){if(Ir=_r(Rr+2,kr,Sr),Ir.error)break;Cr.push(Ir.char),Pr=Ir.nexti,Nr=!1;break}if(Ir=Ar(Rr+1,kr,Sr),Ir.error)break;Cr.push(Ir.char),Pr=Ir.nexti,Nr=!1;break}break}if(Nr)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${Pr}]`)}return Cr}};const wr=13,br=10;cr.lineEnds={crlf(Sr){const vr=[];let Er=0;for(;Er<Sr.length;)switch(Sr[Er]){case wr:Er+1<Sr.length&&Sr[Er+1]===br?Er+=2:Er+=1,vr.push(wr),vr.push(br);break;case br:vr.push(wr),vr.push(br),Er+=1;break;default:vr.push(Sr[Er]),Er+=1;break}return vr.length>0&&vr[vr.length-1]!==br&&(vr.push(wr),vr.push(br)),vr},lf(Sr){const vr=[];let Er=0;for(;Er<Sr.length;)switch(Sr[Er]){case wr:Er+1<Sr.length&&Sr[Er+1]===br?Er+=2:Er+=1,vr.push(br);break;case br:vr.push(br),Er+=1;break;default:vr.push(Sr[Er]),Er+=1;break}return vr.length>0&&vr[vr.length-1]!==br&&vr.push(br),vr}},cr.base64={encode(Sr){if(Sr.length===0)return ar.alloc(0);let vr,Er,Ar,_r=Sr.length%3;_r=_r>0?3-_r:0;let Cr=(Sr.length+_r)/3;const kr=ar.alloc(Cr*4);_r>0&&(Cr-=1),vr=0,Er=0;for(let Rr=0;Rr<Cr;Rr+=1)Ar=Sr[vr++]<<16,Ar+=Sr[vr++]<<8,Ar+=Sr[vr++],kr[Er++]=xr[Ar>>18&mr[6]],kr[Er++]=xr[Ar>>12&mr[6]],kr[Er++]=xr[Ar>>6&mr[6]],kr[Er++]=xr[Ar&mr[6]];if(_r===0)return kr;if(_r===1)return Ar=Sr[vr++]<<16,Ar+=Sr[vr]<<8,kr[Er++]=xr[Ar>>18&mr[6]],kr[Er++]=xr[Ar>>12&mr[6]],kr[Er++]=xr[Ar>>6&mr[6]],kr[Er]=xr[64],kr;if(_r===2)return Ar=Sr[vr]<<16,kr[Er++]=xr[Ar>>18&mr[6]],kr[Er++]=xr[Ar>>12&mr[6]],kr[Er++]=xr[64],kr[Er]=xr[64],kr},decode(Sr){function vr(Pr){const Tr=[];let Br=0;for(let Fr=0;Fr<Pr.length;Fr+=1){const jr=Pr[Fr],Ur=!0;for(;Ur&&!(jr===32||jr===9||jr===10||jr===13);){if(jr>=65&&jr<=90){Tr.push(jr-65);break}if(jr>=97&&jr<=122){Tr.push(jr-71);break}if(jr>=48&&jr<=57){Tr.push(jr+4);break}if(jr===43){Tr.push(62);break}if(jr===47){Tr.push(63);break}if(jr===61){Tr.push(64),Br+=1;break}throw new RangeError(`base64.decode: invalid character buf[${Fr}]: ${jr}`)}}if(Tr.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${Tr.length}`);switch(Br){case 0:break;case 1:if(Tr[Tr.length-1]!==64)throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if(Tr[Tr.length-1]!==64||Tr[Tr.length-2]!==64)throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${Br}`)}return{tail:Br,buf:ar.from(Tr)}}if(Sr.length===0)return ar.alloc(0);const Er=vr(Sr),{tail:Ar}=Er,_r=Er.buf;let Cr,kr,Rr,Ir=_r.length/4;const Nr=ar.alloc(Ir*3-Ar);Ar>0&&(Ir-=1),kr=0,Cr=0;for(let Pr=0;Pr<Ir;Pr+=1)Rr=_r[Cr++]<<18,Rr+=_r[Cr++]<<12,Rr+=_r[Cr++]<<6,Rr+=_r[Cr++],Nr[kr++]=Rr>>16&mr[8],Nr[kr++]=Rr>>8&mr[8],Nr[kr++]=Rr&mr[8];return Ar===1&&(Rr=_r[Cr++]<<18,Rr+=_r[Cr++]<<12,Rr+=_r[Cr]<<6,Nr[kr++]=Rr>>16&mr[8],Nr[kr]=Rr>>8&mr[8]),Ar===2&&(Rr=_r[Cr++]<<18,Rr+=_r[Cr++]<<12,Nr[kr]=Rr>>16&mr[8]),Nr},toString(Sr){if(Sr.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${Sr.length}`);let vr="",Er=0;function Ar(Cr,kr,Rr,Ir){switch(Er){case 76:vr+=`\r
${Cr}${kr}${Rr}${Ir}`,Er=4;break;case 75:vr+=`${Cr}\r
${kr}${Rr}${Ir}`,Er=3;break;case 74:vr+=`${Cr+kr}\r
${Rr}${Ir}`,Er=2;break;case 73:vr+=`${Cr+kr+Rr}\r
${Ir}`,Er=1;break;default:vr+=Cr+kr+Rr+Ir,Er+=4;break}}function _r(Cr){return Cr>=65&&Cr<=90||Cr>=97&&Cr<=122||Cr>=48&&Cr<=57||Cr===43||Cr===47||Cr===61}for(let Cr=0;Cr<Sr.length;Cr+=4){for(let kr=Cr;kr<Cr+4;kr+=1)if(!_r(Sr[kr]))throw new RangeError(`base64.toString: buf[${kr}]: ${Sr[kr]} : not valid base64 character code`);Ar(String.fromCharCode(Sr[Cr]),String.fromCharCode(Sr[Cr+1]),String.fromCharCode(Sr[Cr+2]),String.fromCharCode(Sr[Cr+3]))}return vr}}}(transformers)),transformers}var hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,function(cr){"use strict;";const{Buffer:ar}=buffer$1,dr=requireTransformers(),fr="UTF8",hr="UTF16",pr="UTF16BE",mr="UTF16LE",gr="UTF32",yr="UTF32BE",xr="UTF32LE",wr="UINT7",br="ASCII",Sr="BINARY",vr="UINT8",Er="UINT16",Ar="UINT16LE",_r="UINT16BE",Cr="UINT32",kr="UINT32LE",Rr="UINT32BE",Ir="ESCAPED",Nr="STRING",Pr=function(Mr){Mr.type=fr;const Lr=Mr.data;Mr.bom=0,Lr.length>=3&&Lr[0]===239&&Lr[1]===187&&Lr[2]===191&&(Mr.bom=3)},Tr=function(Mr){const Lr=Mr.data;switch(Mr.bom=0,Mr.type){case hr:Mr.type=pr,Lr.length>=2&&(Lr[0]===254&&Lr[1]===255?Mr.bom=2:Lr[0]===255&&Lr[1]===254&&(Mr.type=mr,Mr.bom=2));break;case pr:if(Mr.type=pr,Lr.length>=2){if(Lr[0]===254&&Lr[1]===255)Mr.bom=2;else if(Lr[0]===255&&Lr[1]===254)throw new TypeError(`src type: "${pr}" specified but BOM is for "${mr}"`)}break;case mr:if(Mr.type=mr,Lr.length>=0){if(Lr[0]===254&&Lr[1]===255)throw new TypeError(`src type: "${mr}" specified but BOM is for "${pr}"`);Lr[0]===255&&Lr[1]===254&&(Mr.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${Mr.type}" unrecognized`)}},Br=function(Mr){const Lr=Mr.data;switch(Mr.bom=0,Mr.type){case gr:Mr.type=yr,Lr.length>=4&&(Lr[0]===0&&Lr[1]===0&&Lr[2]===254&&Lr[3]===255&&(Mr.bom=4),Lr[0]===255&&Lr[1]===254&&Lr[2]===0&&Lr[3]===0&&(Mr.type=xr,Mr.bom=4));break;case yr:if(Mr.type=yr,Lr.length>=4&&(Lr[0]===0&&Lr[1]===0&&Lr[2]===254&&Lr[3]===255&&(Mr.bom=4),Lr[0]===255&&Lr[1]===254&&Lr[2]===0&&Lr[3]===0))throw new TypeError(`src type: ${yr} specified but BOM is for ${xr}"`);break;case xr:if(Mr.type=xr,Lr.length>=4){if(Lr[0]===0&&Lr[1]===0&&Lr[2]===254&&Lr[3]===255)throw new TypeError(`src type: "${xr}" specified but BOM is for "${yr}"`);Lr[0]===255&&Lr[1]===254&&Lr[2]===0&&Lr[3]===0&&(Mr.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${Mr.type}" unrecognized`)}},Fr=function(Mr,Lr){function Vr(es){const ns={type:"",base64:!1},zr=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(es);return zr&&(zr[2]&&(ns.type=zr[2].toUpperCase()),zr[1]&&(ns.base64=!0)),ns}const Jr=Vr(Mr.toUpperCase());if(Jr.base64){if(Jr.type===Nr)throw new TypeError(`type: "${Mr} "BASE64:" prefix not allowed with type ${Nr}`);if(ar.isBuffer(Lr))Jr.data=dr.base64.decode(Lr);else if(typeof Lr=="string"){const es=ar.from(Lr,"ascii");Jr.data=dr.base64.decode(es)}else throw new TypeError(`type: "${Mr} unrecognized data type: typeof(data): ${typeof Lr}`)}else Jr.data=Lr;switch(Jr.type){case fr:Pr(Jr);break;case hr:case pr:case mr:Tr(Jr);break;case gr:case yr:case xr:Br(Jr);break;case Er:Jr.type=_r;break;case Cr:Jr.type=Rr;break;case br:Jr.type=wr;break;case Sr:Jr.type=vr;break;case wr:case vr:case Ar:case _r:case kr:case Rr:case Nr:case Ir:break;default:throw new TypeError(`type: "${Mr}" not recognized`)}if(Jr.type===Nr){if(typeof Jr.data!="string")throw new TypeError(`type: "${Mr}" but data is not a string`)}else if(!ar.isBuffer(Jr.data))throw new TypeError(`type: "${Mr}" but data is not a Buffer`);return Jr},jr=function(Mr,Lr){function Vr(es){let ns,Qr;const zr={crlf:!1,lf:!1,base64:!1,type:""},Wr=!0;for(;Wr;){if(Qr=es,ns=es.slice(0,5),ns==="CRLF:"){zr.crlf=!0,Qr=es.slice(5);break}if(ns=es.slice(0,3),ns==="LF:"){zr.lf=!0,Qr=es.slice(3);break}break}return ns=Qr.split(":"),ns.length===1?zr.type=ns[0]:ns.length===2&&ns[1]==="BASE64"&&(zr.base64=!0,zr.type=ns[0]),zr}if(!Array.isArray(Lr))throw new TypeError(`dst chars: not array: "${typeof Lr}`);if(typeof Mr!="string")throw new TypeError(`dst type: not string: "${typeof Mr}`);const Jr=Vr(Mr.toUpperCase());switch(Jr.type){case fr:case pr:case mr:case yr:case xr:case wr:case vr:case Ar:case _r:case kr:case Rr:case Ir:break;case Nr:if(Jr.base64)throw new TypeError(`":BASE64" suffix not allowed with type ${Nr}`);break;case br:Jr.type=wr;break;case Sr:Jr.type=vr;break;case hr:Jr.type=pr;break;case gr:Jr.type=yr;break;case Er:Jr.type=_r;break;case Cr:Jr.type=Rr;break;default:throw new TypeError(`dst type unrecognized: "${Mr}" : must have form [crlf:|lf:]type[:base64]`)}return Jr},Ur=function(Mr,Lr){switch(Mr){case fr:return dr.utf8.encode(Lr);case pr:return dr.utf16be.encode(Lr);case mr:return dr.utf16le.encode(Lr);case yr:return dr.utf32be.encode(Lr);case xr:return dr.utf32le.encode(Lr);case wr:return dr.uint7.encode(Lr);case vr:return dr.uint8.encode(Lr);case _r:return dr.uint16be.encode(Lr);case Ar:return dr.uint16le.encode(Lr);case Rr:return dr.uint32be.encode(Lr);case kr:return dr.uint32le.encode(Lr);case Nr:return dr.string.encode(Lr);case Ir:return dr.escaped.encode(Lr);default:throw new TypeError(`encode type "${Mr}" not recognized`)}},qr=function(Mr){switch(Mr.type){case fr:return dr.utf8.decode(Mr.data,Mr.bom);case mr:return dr.utf16le.decode(Mr.data,Mr.bom);case pr:return dr.utf16be.decode(Mr.data,Mr.bom);case yr:return dr.utf32be.decode(Mr.data,Mr.bom);case xr:return dr.utf32le.decode(Mr.data,Mr.bom);case wr:return dr.uint7.decode(Mr.data);case vr:return dr.uint8.decode(Mr.data);case _r:return dr.uint16be.decode(Mr.data);case Ar:return dr.uint16le.decode(Mr.data);case Rr:return dr.uint32be.decode(Mr.data);case kr:return dr.uint32le.decode(Mr.data);case Nr:return dr.string.decode(Mr.data);case Ir:return dr.escaped.decode(Mr.data);default:throw new TypeError(`decode type "${Mr.type}" not recognized`)}};cr.decode=function(Mr,Lr){const Vr=Fr(Mr,Lr);return qr(Vr)},cr.encode=function(Mr,Lr){let Vr,Jr;const es=jr(Mr,Lr);return es.crlf?(Vr=dr.lineEnds.crlf(Lr),Jr=Ur(es.type,Vr)):es.lf?(Vr=dr.lineEnds.lf(Lr),Jr=Ur(es.type,Vr)):Jr=Ur(es.type,Lr),es.base64&&(Jr=dr.base64.encode(Jr)),Jr};const Hr=function(Mr,Lr,Vr){return cr.encode(Vr,cr.decode(Mr,Lr))};cr.convert=Hr}(converter)),converter}var emitcss=function cr(){return`/* This file automatically generated by jsonToless() and LESS. */
.apg-mono {
  font-family: monospace;
}
.apg-active {
  font-weight: bold;
  color: #000000;
}
.apg-match {
  font-weight: bold;
  color: #264BFF;
}
.apg-empty {
  font-weight: bold;
  color: #0fbd0f;
}
.apg-nomatch {
  font-weight: bold;
  color: #FF4000;
}
.apg-lh-match {
  font-weight: bold;
  color: #1A97BA;
}
.apg-lb-match {
  font-weight: bold;
  color: #5F1687;
}
.apg-remainder {
  font-weight: bold;
  color: #999999;
}
.apg-ctrl-char {
  font-weight: bolder;
  font-style: italic;
  font-size: 0.6em;
}
.apg-line-end {
  font-weight: bold;
  color: #000000;
}
.apg-error {
  font-weight: bold;
  color: #FF4000;
}
.apg-phrase {
  color: #000000;
  background-color: #8caae6;
}
.apg-empty-phrase {
  color: #0fbd0f;
}
table.apg-state {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th,
table.apg-state td {
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th:nth-last-child(2),
table.apg-state td:nth-last-child(2) {
  text-align: right;
}
table.apg-state caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-stats {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats th,
table.apg-stats td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace th,
table.apg-trace td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace th:last-child,
table.apg-trace th:nth-last-child(2),
table.apg-trace td:last-child,
table.apg-trace td:nth-last-child(2) {
  text-align: left;
}
table.apg-grammar {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-grammar th,
table.apg-grammar td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar th:last-child,
table.apg-grammar td:last-child {
  text-align: left;
}
table.apg-rules {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-rules th,
table.apg-rules td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules a {
  color: #003399 !important;
}
table.apg-rules a:hover {
  color: #8caae6 !important;
}
table.apg-attrs {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-attrs th,
table.apg-attrs td {
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs th:nth-child(1),
table.apg-attrs th:nth-child(2),
table.apg-attrs th:nth-child(3) {
  text-align: right;
}
table.apg-attrs td:nth-child(1),
table.apg-attrs td:nth-child(2),
table.apg-attrs td:nth-child(3) {
  text-align: right;
}
table.apg-attrs a {
  color: #003399 !important;
}
table.apg-attrs a:hover {
  color: #8caae6 !important;
}
`};(function(cr){const ar=style,dr=requireConverter(),fr=emitcss,hr=identifiers,pr="utilities.js: ",mr=function(yr,xr,wr){let br,Sr=xr;const vr=!0;for(;vr;){if(yr<=0){Sr=0,br=0;break}if(typeof Sr!="number"){Sr=0,br=yr;break}if(Sr>=yr){Sr=yr,br=yr;break}if(typeof wr!="number"){br=yr;break}if(br=Sr+wr,br>yr){br=yr;break}break}return{beg:Sr,end:br}};cr.htmlToPage=function(yr,xr){let wr;if(typeof yr!="string")throw new Error(`${pr}htmlToPage: input HTML is not a string`);typeof xr!="string"?wr="htmlToPage":wr=xr;let br="";return br+=`<!DOCTYPE html>
`,br+=`<html lang="en">
`,br+=`<head>
`,br+=`<meta charset="utf-8">
`,br+=`<title>${wr}</title>
`,br+=`<style>
`,br+=fr(),br+=`</style>
`,br+=`</head>
<body>
`,br+=`<p>${new Date}</p>
`,br+=yr,br+=`</body>
</html>
`,br},cr.parserResultToHtml=function(yr,xr){let wr=null;typeof xr=="string"&&xr!==""&&(wr=xr);let br,Sr;yr.success===!0?br=`<span class="${ar.CLASS_MATCH}">true</span>`:br=`<span class="${ar.CLASS_NOMATCH}">false</span>`,yr.state===hr.EMPTY?Sr=`<span class="${ar.CLASS_EMPTY}">EMPTY</span>`:yr.state===hr.MATCH?Sr=`<span class="${ar.CLASS_MATCH}">MATCH</span>`:yr.state===hr.NOMATCH?Sr=`<span class="${ar.CLASS_NOMATCH}">NOMATCH</span>`:Sr=`<span class="${ar.CLASS_NOMATCH}">unrecognized</span>`;let vr="";return vr+=`<table class="${ar.CLASS_STATE}">
`,wr&&(vr+=`<caption>${wr}</caption>
`),vr+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
`,vr+=`<tr><td>parser success</td><td>${br}</td>
`,vr+=`<td><span class="${ar.CLASS_MATCH}">true</span> if the parse succeeded,
`,vr+=` <span class="${ar.CLASS_NOMATCH}">false</span> otherwise`,vr+=`<br><i>NOTE: for success, entire string must be matched</i></td></tr>
`,vr+=`<tr><td>parser state</td><td>${Sr}</td>
`,vr+=`<td><span class="${ar.CLASS_EMPTY}">EMPTY</span>, `,vr+=`<span class="${ar.CLASS_MATCH}">MATCH</span> or 
`,vr+=`<span class="${ar.CLASS_NOMATCH}">NOMATCH</span></td></tr>
`,vr+=`<tr><td>string length</td><td>${yr.length}</td><td>length of the input (sub)string</td></tr>
`,vr+=`<tr><td>matched length</td><td>${yr.matched}</td><td>number of input string characters matched</td></tr>
`,vr+=`<tr><td>max matched</td><td>${yr.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
`,vr+=`<tr><td>max tree depth</td><td>${yr.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
`,vr+=`<tr><td>node hits</td><td>${yr.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
`,vr+=`<tr><td>input length</td><td>${yr.inputLength}</td><td>length of full input string</td></tr>
`,vr+=`<tr><td>sub-string begin</td><td>${yr.subBegin}</td><td>sub-string first character index</td></tr>
`,vr+=`<tr><td>sub-string end</td><td>${yr.subEnd}</td><td>sub-string end-of-string index</td></tr>
`,vr+=`<tr><td>sub-string length</td><td>${yr.subLength}</td><td>sub-string length</td></tr>
`,vr+=`</table>
`,vr},cr.charsToString=function(yr,xr,wr){let br,Sr;if(typeof xr=="number"){if(xr>=yr.length)return"";br=xr<0?0:xr}else br=0;if(typeof wr=="number"){if(wr<=0)return"";Sr=wr>yr.length-br?yr.length:br+wr}else Sr=yr.length;return br<Sr?dr.encode("UTF16LE",yr.slice(br,Sr)).toString("utf16le"):""},cr.stringToChars=function(yr){return dr.decode("STRING",yr)},cr.opcodeToString=function(yr){let xr="unknown";switch(yr){case hr.ALT:xr="ALT";break;case hr.CAT:xr="CAT";break;case hr.RNM:xr="RNM";break;case hr.UDT:xr="UDT";break;case hr.AND:xr="AND";break;case hr.NOT:xr="NOT";break;case hr.REP:xr="REP";break;case hr.TRG:xr="TRG";break;case hr.TBS:xr="TBS";break;case hr.TLS:xr="TLS";break;case hr.BKR:xr="BKR";break;case hr.BKA:xr="BKA";break;case hr.BKN:xr="BKN";break;case hr.ABG:xr="ABG";break;case hr.AEN:xr="AEN";break;default:throw new Error("unrecognized opcode")}return xr},cr.stateToString=function(yr){let xr="unknown";switch(yr){case hr.ACTIVE:xr="ACTIVE";break;case hr.MATCH:xr="MATCH";break;case hr.EMPTY:xr="EMPTY";break;case hr.NOMATCH:xr="NOMATCH";break;default:throw new Error("unrecognized state")}return xr},cr.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"],cr.charToHex=function(yr){let xr=yr.toString(16).toUpperCase();switch(xr.length){case 1:case 3:case 7:xr=`0${xr}`;break;case 2:case 6:xr=`00${xr}`;break;case 4:break;case 5:xr=`000${xr}`;break;default:throw new Error("unrecognized option")}return xr},cr.charsToDec=function(yr,xr,wr){let br="";if(!Array.isArray(yr))throw new Error(`${pr}charsToDec: input must be an array of integers`);const Sr=mr(yr.length,xr,wr);if(Sr.end>Sr.beg){br+=yr[Sr.beg];for(let vr=Sr.beg+1;vr<Sr.end;vr+=1)br+=`,${yr[vr]}`}return br},cr.charsToHex=function(yr,xr,wr){let br="";if(!Array.isArray(yr))throw new Error(`${pr}charsToHex: input must be an array of integers`);const Sr=mr(yr.length,xr,wr);if(Sr.end>Sr.beg){br+=`\\x${cr.charToHex(yr[Sr.beg])}`;for(let vr=Sr.beg+1;vr<Sr.end;vr+=1)br+=`,\\x${cr.charToHex(yr[vr])}`}return br},cr.charsToHtmlEntities=function(yr,xr,wr){let br="";if(!Array.isArray(yr))throw new Error(`${pr}charsToHex: input must be an array of integers`);const Sr=mr(yr.length,xr,wr);if(Sr.end>Sr.beg)for(let vr=Sr.beg;vr<Sr.end;vr+=1)br+=`&#x${yr[vr].toString(16)};`;return br};function gr(yr){return!(yr>=55296&&yr<=57343||yr>1114111)}cr.charsToUnicode=function(yr,xr,wr){let br="";if(!Array.isArray(yr))throw new Error(`${pr}charsToUnicode: input must be an array of integers`);const Sr=mr(yr.length,xr,wr);if(Sr.end>Sr.beg)for(let vr=Sr.beg;vr<Sr.end;vr+=1)gr(yr[vr])?br+=`&#${yr[vr]};`:br+=` U+${cr.charToHex(yr[vr])}`;return br},cr.charsToJsUnicode=function(yr,xr,wr){let br="";if(!Array.isArray(yr))throw new Error(`${pr}charsToJsUnicode: input must be an array of integers`);const Sr=mr(yr.length,xr,wr);if(Sr.end>Sr.beg){br+=`\\u${cr.charToHex(yr[Sr.beg])}`;for(let vr=Sr.beg+1;vr<Sr.end;vr+=1)br+=`,\\u${cr.charToHex(yr[vr])}`}return br},cr.charsToAscii=function(yr,xr,wr){let br="";if(!Array.isArray(yr))throw new Error(`${pr}charsToAscii: input must be an array of integers`);const Sr=mr(yr.length,xr,wr);for(let vr=Sr.beg;vr<Sr.end;vr+=1){const Er=yr[vr];Er>=32&&Er<=126?br+=String.fromCharCode(Er):br+=`\\x${cr.charToHex(Er)}`}return br},cr.charsToAsciiHtml=function(yr,xr,wr){if(!Array.isArray(yr))throw new Error(`${pr}charsToAsciiHtml: input must be an array of integers`);let br="",Sr;const vr=mr(yr.length,xr,wr);for(let Er=vr.beg;Er<vr.end;Er+=1)Sr=yr[Er],Sr<32||Sr===127?br+=`<span class="${ar.CLASS_CTRLCHAR}">${cr.asciiChars[Sr]}</span>`:Sr>127?br+=`<span class="${ar.CLASS_CTRLCHAR}">U+${cr.charToHex(Sr)}</span>`:br+=cr.asciiChars[Sr];return br},cr.stringToAsciiHtml=function(yr){const xr=dr.decode("STRING",yr);return this.charsToAsciiHtml(xr)}})(utilities);var ast=function cr(){const ar=identifiers,dr=utilities,fr="ast.js: ",hr=this;let pr=null,mr=null,gr=null,yr=0;const xr=[],wr=[],br=[],Sr=[];this.callbacks=[],this.astObject="astObject",this.init=function(Ar,_r,Cr){br.length=0,Sr.length=0,xr.length=0,yr=0,pr=Ar,mr=_r,gr=Cr;let kr;const Rr=[];for(kr=0;kr<pr.length;kr+=1)Rr.push(pr[kr].lower);for(kr=0;kr<mr.length;kr+=1)Rr.push(mr[kr].lower);for(yr=pr.length+mr.length,kr=0;kr<yr;kr+=1)xr[kr]=!1,wr[kr]=null;for(const Ir in hr.callbacks){const Nr=Ir.toLowerCase();if(kr=Rr.indexOf(Nr),kr<0)throw new Error(`${fr}init: node '${Ir}' not a rule or udt name`);typeof hr.callbacks[Ir]=="function"&&(xr[kr]=!0,wr[kr]=hr.callbacks[Ir]),hr.callbacks[Ir]===!0&&(xr[kr]=!0)}},this.ruleDefined=function(Ar){return xr[Ar]!==!1},this.udtDefined=function(Ar){return xr[pr.length+Ar]!==!1},this.down=function(Ar,_r){const Cr=Sr.length;return br.push(Cr),Sr.push({name:_r,thisIndex:Cr,thatIndex:null,state:ar.SEM_PRE,callbackIndex:Ar,phraseIndex:null,phraseLength:null,stack:br.length}),Cr},this.up=function(Ar,_r,Cr,kr){const Rr=Sr.length,Ir=br.pop();return Sr.push({name:_r,thisIndex:Rr,thatIndex:Ir,state:ar.SEM_POST,callbackIndex:Ar,phraseIndex:Cr,phraseLength:kr,stack:br.length}),Sr[Ir].thatIndex=Rr,Sr[Ir].phraseIndex=Cr,Sr[Ir].phraseLength=kr,Rr},this.translate=function(Ar){let _r,Cr,kr;for(let Rr=0;Rr<Sr.length;Rr+=1)kr=Sr[Rr],Cr=wr[kr.callbackIndex],kr.state===ar.SEM_PRE?Cr!==null&&(_r=Cr(ar.SEM_PRE,gr,kr.phraseIndex,kr.phraseLength,Ar),_r===ar.SEM_SKIP&&(Rr=kr.thatIndex)):Cr!==null&&Cr(ar.SEM_POST,gr,kr.phraseIndex,kr.phraseLength,Ar)},this.setLength=function(Ar){Sr.length=Ar,Ar>0?br.length=Sr[Ar-1].stack:br.length=0},this.getLength=function(){return Sr.length};function vr(Er){let Ar="";for(let _r=0;_r<Er;_r+=1)Ar+=" ";return Ar}this.toXml=function(Ar){let _r=dr.charsToDec,Cr="decimal integer character codes";if(typeof Ar=="string"&&Ar.length>=3){const Ir=Ar.slice(0,3).toLowerCase();Ir==="asc"?(_r=dr.charsToAscii,Cr="ASCII for printing characters, hex for non-printing"):Ir==="hex"?(_r=dr.charsToHex,Cr="hexadecimal integer character codes"):Ir==="uni"&&(_r=dr.charsToUnicode,Cr="Unicode UTF-32 integer character codes")}let kr="",Rr=0;return kr+=`<?xml version="1.0" encoding="utf-8"?>
`,kr+=`<root nodes="${Sr.length/2}" characters="${gr.length}">
`,kr+=`<!-- input string, ${Cr} -->
`,kr+=vr(Rr+2),kr+=_r(gr),kr+=`
`,Sr.forEach(Ir=>{Ir.state===ar.SEM_PRE?(Rr+=1,kr+=vr(Rr),kr+=`<node name="${Ir.name}" index="${Ir.phraseIndex}" length="${Ir.phraseLength}">
`,kr+=vr(Rr+2),kr+=_r(gr,Ir.phraseIndex,Ir.phraseLength),kr+=`
`):(kr+=vr(Rr),kr+=`</node><!-- name="${Ir.name}" -->
`,Rr-=1)}),kr+=`</root>
`,kr},this.phrases=function(){const Ar={};let _r,Cr;for(_r=0;_r<Sr.length;_r+=1)Cr=Sr[_r],Cr.state===ar.SEM_PRE&&(Array.isArray(Ar[Cr.name])||(Ar[Cr.name]=[]),Ar[Cr.name].push({index:Cr.phraseIndex,length:Cr.phraseLength}));return Ar}},circularBuffer=function cr(){"use strict;";const ar="circular-buffer.js: ";let dr=-1,fr=0;this.init=function(pr){if(typeof pr!="number"||pr<=0)throw new Error(`${ar}init: circular buffer size must an integer > 0`);fr=Math.ceil(pr),dr=-1},this.increment=function(){return dr+=1,(dr+fr)%fr},this.maxSize=function(){return fr},this.items=function(){return dr+1},this.getListIndex=function(pr){return dr===-1||pr<0||pr>dr||dr-pr>=fr?-1:(pr+fr)%fr},this.forEach=function(pr){if(dr!==-1){if(dr<fr){for(let mr=0;mr<=dr;mr+=1)pr(mr,mr);return}for(let mr=dr-fr+1;mr<=dr;mr+=1){const gr=(mr+fr)%fr;pr(gr,mr)}}}},parser$3=function cr(){const ar=identifiers,dr=utilities,fr="parser.js: ",hr=this;let pr;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let mr=null,gr=null,yr,xr,wr,br,Sr=0,vr=0,Er=0,Ar=null,_r=null,Cr=null,kr=null,Rr=null,Ir=0,Nr=1/0,Pr=1/0;const Tr=function(ls,Kr,Zr){const hs=`${fr}evaluateRule(): `;if(ls>=Cr.length)throw new Error(`${hs}rule index: ${ls} out of range`);if(Kr>=wr)throw new Error(`${hs}phrase index: ${Kr} out of range`);const{length:ys}=mr;mr.push({type:ar.RNM,index:ls}),pr(ys,Kr,Zr),mr.pop()},Br=function(Cs,ls,Kr){const Zr=`${fr}evaluateUdt(): `;if(Cs>=kr.length)throw new Error(`${Zr}udt index: ${Cs} out of range`);if(ls>=wr)throw new Error(`${Zr}phrase index: ${ls} out of range`);const{length:hs}=mr;mr.push({type:ar.UDT,empty:kr[Cs].empty,index:Cs}),pr(hs,ls,Kr),mr.pop()},Fr=function(){Sr=0,vr=0,Er=0,Ir=0,br=[{lookAround:ar.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],Cr=null,kr=null,gr=null,yr=0,xr=0,wr=0,Ar=null,_r=null,Rr=null,mr=null},jr=function(){const Cs=[],ls=function(){const Zr={};Cr.forEach(hs=>{hs.isBkr&&(Zr[hs.lower]=null)}),kr.length>0&&kr.forEach(hs=>{hs.isBkr&&(Zr[hs.lower]=null)}),Cs.push(Zr)},Kr=function(){const Zr=Cs[Cs.length-1],hs={};for(const ys in Zr)hs[ys]=Zr[ys];return hs};this.push=function(){Cs.push(Kr())},this.pop=function(hs){let ys=hs;if(ys||(ys=Cs.length-1),ys<1||ys>Cs.length)throw new Error(`${fr}backRef.pop(): bad length: ${ys}`);return Cs.length=ys,Cs[Cs.length-1]},this.length=function(){return Cs.length},this.savePhrase=function(hs,ys,Es){Cs[Cs.length-1][hs]={phraseIndex:ys,phraseLength:Es}},this.getPhrase=function(Zr){return Cs[Cs.length-1][Zr]},ls()},Ur=function(){const ls=this;this.state=ar.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=br[br.length-1],this.uFrame=new jr,this.pFrame=new jr,this.evaluateRule=Tr,this.evaluateUdt=Br,this.refresh=function(){ls.state=ar.ACTIVE,ls.phraseLength=0,ls.lookAround=br[br.length-1]}},qr=function(){return br[br.length-1]},Hr=function(){return br.length>1},Or=function(){return br[br.length-1].lookAround===ar.LOOKAROUND_BEHIND},Mr=function(){const Cs=`${fr}initializeAst(): `,ls=!0;for(;ls;){if(hr.ast===void 0){hr.ast=null;break}if(hr.ast===null)break;if(hr.ast.astObject!=="astObject")throw new Error(`${Cs}ast object not recognized`);break}hr.ast!==null&&hr.ast.init(Cr,kr,gr)},Lr=function(){const Cs=`${fr}initializeTrace(): `,ls=!0;for(;ls;){if(hr.trace===void 0){hr.trace=null;break}if(hr.trace===null)break;if(hr.trace.traceObject!=="traceObject")throw new Error(`${Cs}trace object not recognized`);break}hr.trace!==null&&hr.trace.init(Cr,kr,gr)},Vr=function(){const Cs=`${fr}initializeStats(): `,ls=!0;for(;ls;){if(hr.stats===void 0){hr.stats=null;break}if(hr.stats===null)break;if(hr.stats.statsObject!=="statsObject")throw new Error(`${Cs}stats object not recognized`);break}hr.stats!==null&&hr.stats.init(Cr,kr)},Jr=function(Cs){const ls=`${fr}initializeGrammar(): `;if(!Cs)throw new Error(`${ls}grammar object undefined`);if(Cs.grammarObject!=="grammarObject")throw new Error(`${ls}bad grammar object`);Cr=Cs.rules,kr=Cs.udts},es=function(Cs){const ls=`${fr}initializeStartRule(): `;let Kr=null;if(typeof Cs=="number"){if(Cs>=Cr.length)throw new Error(`${ls}start rule index too large: max: ${Cr.length}: index: ${Cs}`);Kr=Cs}else if(typeof Cs=="string"){const Zr=Cs.toLowerCase();for(let hs=0;hs<Cr.length;hs+=1)if(Zr===Cr[hs].lower){Kr=Cr[hs].index;break}if(Kr===null)throw new Error(`${ls}start rule name '${Cs}' not recognized`)}else throw new Error(`${ls}type of start rule '${typeof Cs}' not recognized`);return Kr},ns=function(ls,Kr,Zr){const hs=`${fr}initializeInputChars(): `;let ys=ls,Es=Kr,Is=Zr;if(ys===void 0)throw new Error(`${hs}input string is undefined`);if(ys===null)throw new Error(`${hs}input string is null`);if(typeof ys=="string")ys=dr.stringToChars(ys);else if(!Array.isArray(ys))throw new Error(`${hs}input string is not a string or array`);if(ys.length>0&&typeof ys[0]!="number")throw new Error(`${hs}input string not an array of integers`);if(typeof Es!="number")Es=0;else if(Es=Math.floor(Es),Es<0||Es>ys.length)throw new Error(`${hs}input beginning index out of range: ${Es}`);if(typeof Is!="number")Is=ys.length-Es;else if(Is=Math.floor(Is),Is<0||Is>ys.length-Es)throw new Error(`${hs}input length out of range: ${Is}`);gr=ys,yr=Es,xr=Is,wr=yr+xr},Qr=function(){const Cs=`${fr}initializeCallbacks(): `;let ls;for(Ar=[],_r=[],ls=0;ls<Cr.length;ls+=1)Ar[ls]=null;for(ls=0;ls<kr.length;ls+=1)_r[ls]=null;let Kr;const Zr=[];for(ls=0;ls<Cr.length;ls+=1)Zr.push(Cr[ls].lower);for(ls=0;ls<kr.length;ls+=1)Zr.push(kr[ls].lower);for(const hs in hr.callbacks){if(ls=Zr.indexOf(hs.toLowerCase()),ls<0)throw new Error(`${Cs}syntax callback '${hs}' not a rule or udt name`);if(Kr=hr.callbacks[hs],Kr||(Kr=null),typeof Kr=="function"||Kr===null)ls<Cr.length?Ar[ls]=Kr:_r[ls-Cr.length]=Kr;else throw new Error(`${Cs}syntax callback[${hs}] must be function reference or 'false' (false/null/undefined/etc.)`)}for(ls=0;ls<kr.length;ls+=1)if(_r[ls]===null)throw new Error(`${Cs}all UDT callbacks must be defined. UDT callback[${kr[ls].lower}] not a function reference`)};this.setMaxTreeDepth=function(Cs){if(typeof Cs!="number")throw new Error(`parser: max tree depth must be integer > 0: ${Cs}`);if(Nr=Math.floor(Cs),Nr<=0)throw new Error(`parser: max tree depth must be integer > 0: ${Cs}`)},this.setMaxNodeHits=function(Cs){if(typeof Cs!="number")throw new Error(`parser: max node hits must be integer > 0: ${Cs}`);if(Pr=Math.floor(Cs),Pr<=0)throw new Error(`parser: max node hits must be integer > 0: ${Cs}`)};const zr=function(Cs,ls,Kr){let Zr;const hs=`${fr}parse(): `;Jr(Cs);const ys=es(ls);Qr(),Lr(),Vr(),Mr();const Es=new Ur;switch(Kr!=null&&(Rr=Kr),mr=[{type:ar.RNM,index:ys}],pr(0,yr,Es),mr=null,Es.state){case ar.ACTIVE:throw new Error(`${hs}final state should never be 'ACTIVE'`);case ar.NOMATCH:Zr=!1;break;case ar.EMPTY:case ar.MATCH:Es.phraseLength===xr?Zr=!0:Zr=!1;break;default:throw new Error("unrecognized state")}return{success:Zr,state:Es.state,length:xr,matched:Es.phraseLength,maxMatched:Ir,maxTreeDepth:vr,nodeHits:Er,inputLength:gr.length,subBegin:yr,subEnd:wr,subLength:xr}};this.parseSubstring=function(ls,Kr,Zr,hs,ys,Es){return Fr(),ns(Zr,hs,ys),zr(ls,Kr,Es)},this.parse=function(ls,Kr,Zr,hs){return Fr(),ns(Zr,0,Zr.length),zr(ls,Kr,hs)};const Wr=function(Cs,ls,Kr){const Zr=mr[Cs];for(let hs=0;hs<Zr.children.length&&(pr(Zr.children[hs],ls,Kr),Kr.state===ar.NOMATCH);hs+=1);},ss=function(Cs,ls,Kr){let Zr,hs,ys,Es;const Is=mr[Cs],$s=Kr.uFrame.length(),Rs=Kr.pFrame.length();hr.ast&&(hs=hr.ast.getLength()),Zr=!0,ys=ls,Es=0;for(let Bs=0;Bs<Is.children.length;Bs+=1)if(pr(Is.children[Bs],ys,Kr),Kr.state===ar.NOMATCH){Zr=!1;break}else ys+=Kr.phraseLength,Es+=Kr.phraseLength;Zr?(Kr.state=Es===0?ar.EMPTY:ar.MATCH,Kr.phraseLength=Es):(Kr.state=ar.NOMATCH,Kr.phraseLength=0,Kr.uFrame.pop($s),Kr.pFrame.pop(Rs),hr.ast&&hr.ast.setLength(hs))},Xr=function(Cs,ls,Kr){let Zr,hs,ys,Es;const Is=mr[Cs];if(Is.max===0){Kr.state=ar.EMPTY,Kr.phraseLength=0;return}hs=ls,ys=0,Es=0;const $s=Kr.uFrame.length(),Rs=Kr.pFrame.length();hr.ast&&(Zr=hr.ast.getLength());const Bs=!0;for(;Bs&&!(hs>=wr||(pr(Cs+1,hs,Kr),Kr.state===ar.NOMATCH)||Kr.state===ar.EMPTY||(Es+=1,ys+=Kr.phraseLength,hs+=Kr.phraseLength,Es===Is.max)););Kr.state===ar.EMPTY||Es>=Is.min?(Kr.state=ys===0?ar.EMPTY:ar.MATCH,Kr.phraseLength=ys):(Kr.state=ar.NOMATCH,Kr.phraseLength=0,Kr.uFrame.pop($s),Kr.pFrame.pop(Rs),hr.ast&&hr.ast.setLength(Zr))},ts=function(Cs,ls,Kr,Zr){if(ls.phraseLength>Kr){let hs=`${fr}opRNM(${Cs.name}): callback function error: `;throw hs+=`sysData.phraseLength: ${ls.phraseLength}`,hs+=` must be <= remaining chars: ${Kr}`,new Error(hs)}switch(ls.state){case ar.ACTIVE:if(Zr!==!0)throw new Error(`${fr}opRNM(${Cs.name}): callback function return error. ACTIVE state not allowed.`);break;case ar.EMPTY:ls.phraseLength=0;break;case ar.MATCH:ls.phraseLength===0&&(ls.state=ar.EMPTY);break;case ar.NOMATCH:ls.phraseLength=0;break;default:throw new Error(`${fr}opRNM(${Cs.name}): callback function return error. Unrecognized return state: ${ls.state}`)}},fs=function(Cs,ls,Kr){let Zr,hs,ys,Es,Is,$s;const Rs=mr[Cs],Bs=Cr[Rs.index],Ds=Ar[Bs.index],Ls=!Hr();if(Ls&&(hs=hr.ast&&hr.ast.ruleDefined(Rs.index),hs&&(Zr=hr.ast.getLength(),hr.ast.down(Rs.index,Cr[Rs.index].name)),Es=Kr.uFrame.length(),Is=Kr.pFrame.length(),Kr.uFrame.push(),Kr.pFrame.push(),$s=Kr.pFrame,Kr.pFrame=new jr),Ds===null)ys=mr,mr=Bs.opcodes,pr(0,ls,Kr),mr=ys;else{const Fs=wr-ls;Kr.ruleIndex=Bs.index,Ds(Kr,gr,ls,Rr),ts(Bs,Kr,Fs,!0),Kr.state===ar.ACTIVE&&(ys=mr,mr=Bs.opcodes,pr(0,ls,Kr),mr=ys,Kr.ruleIndex=Bs.index,Ds(Kr,gr,ls,Rr),ts(Bs,Kr,Fs,!1))}Ls&&(hs&&(Kr.state===ar.NOMATCH?hr.ast.setLength(Zr):hr.ast.up(Rs.index,Bs.name,ls,Kr.phraseLength)),Kr.pFrame=$s,Kr.state===ar.NOMATCH?(Kr.uFrame.pop(Es),Kr.pFrame.pop(Is)):Bs.isBkr&&(Kr.pFrame.savePhrase(Bs.lower,ls,Kr.phraseLength),Kr.uFrame.savePhrase(Bs.lower,ls,Kr.phraseLength)))},rs=function(Cs,ls,Kr){if(ls.phraseLength>Kr){let Zr=`${fr}opUDT(${Cs.name}): callback function error: `;throw Zr+=`sysData.phraseLength: ${ls.phraseLength}`,Zr+=` must be <= remaining chars: ${Kr}`,new Error(Zr)}switch(ls.state){case ar.ACTIVE:throw new Error(`${fr}opUDT(${Cs.name}): callback function return error. ACTIVE state not allowed.`);case ar.EMPTY:if(Cs.empty===!1)throw new Error(`${fr}opUDT(${Cs.name}): callback function return error. May not return EMPTY.`);ls.phraseLength=0;break;case ar.MATCH:if(ls.phraseLength===0){if(Cs.empty===!1)throw new Error(`${fr}opUDT(${Cs.name}): callback function return error. May not return EMPTY.`);ls.state=ar.EMPTY}break;case ar.NOMATCH:ls.phraseLength=0;break;default:throw new Error(`${fr}opUDT(${Cs.name}): callback function return error. Unrecognized return state: ${ls.state}`)}},as=function(Cs,ls,Kr){let Zr,hs,ys,Es,Is,$s;const Rs=mr[Cs],Bs=kr[Rs.index];Kr.UdtIndex=Bs.index;const Ds=!Hr();Ds&&(ys=hr.ast&&hr.ast.udtDefined(Rs.index),ys&&(hs=Cr.length+Rs.index,Zr=hr.ast.getLength(),hr.ast.down(hs,Bs.name)),Es=Kr.uFrame.length(),Is=Kr.pFrame.length(),Kr.uFrame.push(),Kr.pFrame.push(),$s=Kr.pFrame,Kr.pFrame=new jr);const Ls=wr-ls;_r[Rs.index](Kr,gr,ls,Rr),rs(Bs,Kr,Ls),Ds&&(ys&&(Kr.state===ar.NOMATCH?hr.ast.setLength(Zr):hr.ast.up(hs,Bs.name,ls,Kr.phraseLength)),Kr.pFrame=$s,Kr.state===ar.NOMATCH?(Kr.uFrame.pop(Es),Kr.pFrame.pop(Is)):Bs.isBkr&&(Kr.pFrame.savePhrase(Bs.lower,ls,Kr.phraseLength),Kr.uFrame.savePhrase(Bs.lower,ls,Kr.phraseLength)))},ps=function(Cs,ls,Kr){br.push({lookAround:ar.LOOKAROUND_AHEAD,anchor:ls,charsEnd:wr,charsLength:xr}),wr=gr.length,xr=gr.length-yr,pr(Cs+1,ls,Kr);const Zr=br.pop();switch(wr=Zr.charsEnd,xr=Zr.charsLength,Kr.phraseLength=0,Kr.state){case ar.EMPTY:Kr.state=ar.EMPTY;break;case ar.MATCH:Kr.state=ar.EMPTY;break;case ar.NOMATCH:Kr.state=ar.NOMATCH;break;default:throw new Error(`opAND: invalid state ${Kr.state}`)}},xs=function(Cs,ls,Kr){br.push({lookAround:ar.LOOKAROUND_AHEAD,anchor:ls,charsEnd:wr,charsLength:xr}),wr=gr.length,xr=gr.length-yr,pr(Cs+1,ls,Kr);const Zr=br.pop();switch(wr=Zr.charsEnd,xr=Zr.charsLength,Kr.phraseLength=0,Kr.state){case ar.EMPTY:case ar.MATCH:Kr.state=ar.NOMATCH;break;case ar.NOMATCH:Kr.state=ar.EMPTY;break;default:throw new Error(`opNOT: invalid state ${Kr.state}`)}},Ss=function(Cs,ls,Kr){const Zr=mr[Cs];Kr.state=ar.NOMATCH,ls<wr&&Zr.min<=gr[ls]&&gr[ls]<=Zr.max&&(Kr.state=ar.MATCH,Kr.phraseLength=1)},Ns=function(Cs,ls,Kr){let Zr;const hs=mr[Cs],ys=hs.string.length;if(Kr.state=ar.NOMATCH,ls+ys<=wr){for(Zr=0;Zr<ys;Zr+=1)if(gr[ls+Zr]!==hs.string[Zr])return;Kr.state=ar.MATCH,Kr.phraseLength=ys}},Ts=function(Cs,ls,Kr){let Zr,hs;const ys=mr[Cs];Kr.state=ar.NOMATCH;const Es=ys.string.length;if(Es===0){Kr.state=ar.EMPTY;return}if(ls+Es<=wr){for(Zr=0;Zr<Es;Zr+=1)if(hs=gr[ls+Zr],hs>=65&&hs<=90&&(hs+=32),hs!==ys.string[Zr])return;Kr.state=ar.MATCH,Kr.phraseLength=Es}},os=function(Cs,ls,Kr){Kr.state=ar.NOMATCH,Kr.phraseLength=0,Kr.state=ls===0?ar.EMPTY:ar.NOMATCH},bs=function(Cs,ls,Kr){Kr.state=ar.NOMATCH,Kr.phraseLength=0,Kr.state=ls===gr.length?ar.EMPTY:ar.NOMATCH},ws=function(Cs,ls,Kr){let Zr,hs,ys,Es;const Is=mr[Cs];Kr.state=ar.NOMATCH,Is.index<Cr.length?Es=Cr[Is.index].lower:Es=kr[Is.index-Cr.length].lower;const $s=Is.bkrMode===ar.BKR_MODE_PM?Kr.pFrame.getPhrase(Es):Kr.uFrame.getPhrase(Es),Rs=Is.bkrCase===ar.BKR_MODE_CI;if($s===null)return;const Bs=$s.phraseIndex,Ds=$s.phraseLength;if(Ds===0){Kr.state=ar.EMPTY;return}if(ls+Ds<=wr){if(Rs){for(Zr=0;Zr<Ds;Zr+=1)if(hs=gr[ls+Zr],ys=gr[Bs+Zr],hs>=65&&hs<=90&&(hs+=32),ys>=65&&ys<=90&&(ys+=32),hs!==ys)return;Kr.state=ar.MATCH,Kr.phraseLength=Ds}else for(Zr=0;Zr<Ds;Zr+=1)if(hs=gr[ls+Zr],ys=gr[Bs+Zr],hs!==ys)return;Kr.state=ar.MATCH,Kr.phraseLength=Ds}},As=function(Cs,ls,Kr){switch(br.push({lookAround:ar.LOOKAROUND_BEHIND,anchor:ls}),pr(Cs+1,ls,Kr),br.pop(),Kr.phraseLength=0,Kr.state){case ar.EMPTY:Kr.state=ar.EMPTY;break;case ar.MATCH:Kr.state=ar.EMPTY;break;case ar.NOMATCH:Kr.state=ar.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${Kr.state}`)}},gs=function(Cs,ls,Kr){switch(br.push({lookAround:ar.LOOKAROUND_BEHIND,anchor:ls}),pr(Cs+1,ls,Kr),br.pop(),Kr.phraseLength=0,Kr.state){case ar.EMPTY:case ar.MATCH:Kr.state=ar.NOMATCH;break;case ar.NOMATCH:Kr.state=ar.EMPTY;break;default:throw new Error(`opBKN: invalid state ${Kr.state}`)}},vs=function(Cs,ls,Kr){let Zr,hs,ys,Es;const Is=mr[Cs],$s=Kr.uFrame.length(),Rs=Kr.pFrame.length();hr.ast&&(hs=hr.ast.getLength()),Zr=!0,ys=ls,Es=0;for(let Bs=Is.children.length-1;Bs>=0;Bs-=1)if(pr(Is.children[Bs],ys,Kr),ys-=Kr.phraseLength,Es+=Kr.phraseLength,Kr.state===ar.NOMATCH){Zr=!1;break}Zr?(Kr.state=Es===0?ar.EMPTY:ar.MATCH,Kr.phraseLength=Es):(Kr.state=ar.NOMATCH,Kr.phraseLength=0,Kr.uFrame.pop($s),Kr.pFrame.pop(Rs),hr.ast&&hr.ast.setLength(hs))},Ps=function(Cs,ls,Kr){let Zr,hs,ys,Es;const Is=mr[Cs];hs=ls,ys=0,Es=0;const $s=Kr.uFrame.length(),Rs=Kr.pFrame.length();hr.ast&&(Zr=hr.ast.getLength());const Bs=!0;for(;Bs&&!(hs<=0||(pr(Cs+1,hs,Kr),Kr.state===ar.NOMATCH)||Kr.state===ar.EMPTY||(Es+=1,ys+=Kr.phraseLength,hs-=Kr.phraseLength,Es===Is.max)););Kr.state===ar.EMPTY||Es>=Is.min?(Kr.state=ys===0?ar.EMPTY:ar.MATCH,Kr.phraseLength=ys):(Kr.state=ar.NOMATCH,Kr.phraseLength=0,Kr.uFrame.pop($s),Kr.pFrame.pop(Rs),hr.ast&&hr.ast.setLength(Zr))},Os=function(Cs,ls,Kr){const Zr=mr[Cs];if(Kr.state=ar.NOMATCH,Kr.phraseLength=0,ls>0){const hs=gr[ls-1];Zr.min<=hs&&hs<=Zr.max&&(Kr.state=ar.MATCH,Kr.phraseLength=1)}},Ms=function(Cs,ls,Kr){let Zr;const hs=mr[Cs];Kr.state=ar.NOMATCH;const ys=hs.string.length,Es=ls-ys;if(Es>=0){for(Zr=0;Zr<ys;Zr+=1)if(gr[Es+Zr]!==hs.string[Zr])return;Kr.state=ar.MATCH,Kr.phraseLength=ys}},zs=function(Cs,ls,Kr){let Zr;const hs=mr[Cs];Kr.state=ar.NOMATCH;const ys=hs.string.length;if(ys===0){Kr.state=ar.EMPTY;return}const Es=ls-ys;if(Es>=0){for(let Is=0;Is<ys;Is+=1)if(Zr=gr[Es+Is],Zr>=65&&Zr<=90&&(Zr+=32),Zr!==hs.string[Is])return;Kr.state=ar.MATCH,Kr.phraseLength=ys}},Hs=function(Cs,ls,Kr){let Zr,hs,ys,Es;const Is=mr[Cs];Kr.state=ar.NOMATCH,Kr.phraseLength=0,Is.index<Cr.length?Es=Cr[Is.index].lower:Es=kr[Is.index-Cr.length].lower;const $s=Is.bkrMode===ar.BKR_MODE_PM?Kr.pFrame.getPhrase(Es):Kr.uFrame.getPhrase(Es),Rs=Is.bkrCase===ar.BKR_MODE_CI;if($s===null)return;const Bs=$s.phraseIndex,Ds=$s.phraseLength;if(Ds===0){Kr.state=ar.EMPTY,Kr.phraseLength=0;return}const Ls=ls-Ds;if(Ls>=0){if(Rs){for(Zr=0;Zr<Ds;Zr+=1)if(hs=gr[Ls+Zr],ys=gr[Bs+Zr],hs>=65&&hs<=90&&(hs+=32),ys>=65&&ys<=90&&(ys+=32),hs!==ys)return;Kr.state=ar.MATCH,Kr.phraseLength=Ds}else for(Zr=0;Zr<Ds;Zr+=1)if(hs=gr[Ls+Zr],ys=gr[Bs+Zr],hs!==ys)return;Kr.state=ar.MATCH,Kr.phraseLength=Ds}};pr=function(ls,Kr,Zr){let hs=!0;const ys=mr[ls];if(Er+=1,Er>Pr)throw new Error(`parser: maximum number of node hits exceeded: ${Pr}`);if(Sr+=1,Sr>vr&&(vr=Sr,vr>Nr))throw new Error(`parser: maximum parse tree depth exceeded: ${Nr}`);if(Zr.refresh(),hr.trace!==null){const Es=qr();hr.trace.down(ys,Zr.state,Kr,Zr.phraseLength,Es.anchor,Es.lookAround)}if(Or())switch(ys.type){case ar.ALT:Wr(ls,Kr,Zr);break;case ar.CAT:vs(ls,Kr,Zr);break;case ar.REP:Ps(ls,Kr,Zr);break;case ar.RNM:fs(ls,Kr,Zr);break;case ar.UDT:as(ls,Kr,Zr);break;case ar.AND:ps(ls,Kr,Zr);break;case ar.NOT:xs(ls,Kr,Zr);break;case ar.TRG:Os(ls,Kr,Zr);break;case ar.TBS:Ms(ls,Kr,Zr);break;case ar.TLS:zs(ls,Kr,Zr);break;case ar.BKR:Hs(ls,Kr,Zr);break;case ar.BKA:As(ls,Kr,Zr);break;case ar.BKN:gs(ls,Kr,Zr);break;case ar.ABG:os(ls,Kr,Zr);break;case ar.AEN:bs(ls,Kr,Zr);break;default:hs=!1;break}else switch(ys.type){case ar.ALT:Wr(ls,Kr,Zr);break;case ar.CAT:ss(ls,Kr,Zr);break;case ar.REP:Xr(ls,Kr,Zr);break;case ar.RNM:fs(ls,Kr,Zr);break;case ar.UDT:as(ls,Kr,Zr);break;case ar.AND:ps(ls,Kr,Zr);break;case ar.NOT:xs(ls,Kr,Zr);break;case ar.TRG:Ss(ls,Kr,Zr);break;case ar.TBS:Ns(ls,Kr,Zr);break;case ar.TLS:Ts(ls,Kr,Zr);break;case ar.BKR:ws(ls,Kr,Zr);break;case ar.BKA:As(ls,Kr,Zr);break;case ar.BKN:gs(ls,Kr,Zr);break;case ar.ABG:os(ls,Kr,Zr);break;case ar.AEN:bs(ls,Kr,Zr);break;default:hs=!1;break}if(!Hr()&&Kr+Zr.phraseLength>Ir&&(Ir=Kr+Zr.phraseLength),hr.stats!==null&&hr.stats.collect(ys,Zr),hr.trace!==null){const Es=qr();hr.trace.up(ys,Zr.state,Kr,Zr.phraseLength,Es.anchor,Es.lookAround)}return Sr-=1,hs}},stats=function cr(){const ar=identifiers,dr=utilities,fr=style,hr="stats.js: ";let pr=[],mr=[];const gr=[];let yr;const xr=[],wr=[];this.statsObject="statsObject";const br="stats",Sr=function(Pr,Tr){return Pr.lower<Tr.lower?-1:Pr.lower>Tr.lower?1:0},vr=function(Pr,Tr){return Pr.total<Tr.total?1:Pr.total>Tr.total?-1:Sr(Pr,Tr)},Er=function(Pr,Tr){return Pr.index<Tr.index?-1:Pr.index>Tr.index?1:0},Ar=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},_r=function(){gr.length=0,yr=new Ar,gr[ar.ALT]=new Ar,gr[ar.CAT]=new Ar,gr[ar.REP]=new Ar,gr[ar.RNM]=new Ar,gr[ar.TRG]=new Ar,gr[ar.TBS]=new Ar,gr[ar.TLS]=new Ar,gr[ar.UDT]=new Ar,gr[ar.AND]=new Ar,gr[ar.NOT]=new Ar,gr[ar.BKR]=new Ar,gr[ar.BKA]=new Ar,gr[ar.BKN]=new Ar,gr[ar.ABG]=new Ar,gr[ar.AEN]=new Ar,xr.length=0;for(let Pr=0;Pr<pr.length;Pr+=1)xr.push({empty:0,match:0,nomatch:0,total:0,name:pr[Pr].name,lower:pr[Pr].lower,index:pr[Pr].index});if(mr.length>0){wr.length=0;for(let Pr=0;Pr<mr.length;Pr+=1)wr.push({empty:0,match:0,nomatch:0,total:0,name:mr[Pr].name,lower:mr[Pr].lower,index:mr[Pr].index})}},Cr=function(Pr,Tr){switch(Pr.total+=1,Tr){case ar.EMPTY:Pr.empty+=1;break;case ar.MATCH:Pr.match+=1;break;case ar.NOMATCH:Pr.nomatch+=1;break;default:throw new Error(`${hr}collect(): incStat(): unrecognized state: ${Tr}`)}},kr=function(Pr,Tr){let Br="";return Br+="<tr>",Br+=`<td class="${fr.CLASS_ACTIVE}">${Pr}</td>`,Br+=`<td class="${fr.CLASS_EMPTY}">${Tr.empty}</td>`,Br+=`<td class="${fr.CLASS_MATCH}">${Tr.match}</td>`,Br+=`<td class="${fr.CLASS_NOMATCH}">${Tr.nomatch}</td>`,Br+=`<td class="${fr.CLASS_ACTIVE}">${Tr.total}</td>`,Br+=`</tr>
`,Br},Rr=function(){let Pr="";return Pr+=kr("ALT",gr[ar.ALT]),Pr+=kr("CAT",gr[ar.CAT]),Pr+=kr("REP",gr[ar.REP]),Pr+=kr("RNM",gr[ar.RNM]),Pr+=kr("TRG",gr[ar.TRG]),Pr+=kr("TBS",gr[ar.TBS]),Pr+=kr("TLS",gr[ar.TLS]),Pr+=kr("UDT",gr[ar.UDT]),Pr+=kr("AND",gr[ar.AND]),Pr+=kr("NOT",gr[ar.NOT]),Pr+=kr("BKR",gr[ar.BKR]),Pr+=kr("BKA",gr[ar.BKA]),Pr+=kr("BKN",gr[ar.BKN]),Pr+=kr("ABG",gr[ar.ABG]),Pr+=kr("AEN",gr[ar.AEN]),Pr+=kr("totals",yr),Pr},Ir=function(){let Pr="";Pr+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,Pr+=`<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>
`;for(let Tr=0;Tr<pr.length;Tr+=1)xr[Tr].total>0&&(Pr+="<tr>",Pr+=`<td class="${fr.CLASS_ACTIVE}">${xr[Tr].name}</td>`,Pr+=`<td class="${fr.CLASS_EMPTY}">${xr[Tr].empty}</td>`,Pr+=`<td class="${fr.CLASS_MATCH}">${xr[Tr].match}</td>`,Pr+=`<td class="${fr.CLASS_NOMATCH}">${xr[Tr].nomatch}</td>`,Pr+=`<td class="${fr.CLASS_ACTIVE}">${xr[Tr].total}</td>`,Pr+=`</tr>
`);if(mr.length>0){Pr+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,Pr+=`<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>
`;for(let Tr=0;Tr<mr.length;Tr+=1)wr[Tr].total>0&&(Pr+="<tr>",Pr+=`<td class="${fr.CLASS_ACTIVE}">${wr[Tr].name}</td>`,Pr+=`<td class="${fr.CLASS_EMPTY}">${wr[Tr].empty}</td>`,Pr+=`<td class="${fr.CLASS_MATCH}">${wr[Tr].match}</td>`,Pr+=`<td class="${fr.CLASS_NOMATCH}">${wr[Tr].nomatch}</td>`,Pr+=`<td class="${fr.CLASS_ACTIVE}">${wr[Tr].total}</td>`,Pr+=`</tr>
`)}return Pr};this.validate=function(Pr){let Tr=!1;return typeof Pr=="string"&&br===Pr&&(Tr=!0),Tr},this.init=function(Pr,Tr){pr=Pr,mr=Tr,_r()},this.collect=function(Pr,Tr){Cr(yr,Tr.state,Tr.phraseLength),Cr(gr[Pr.type],Tr.state,Tr.phraseLength),Pr.type===ar.RNM&&Cr(xr[Pr.index],Tr.state,Tr.phraseLength),Pr.type===ar.UDT&&Cr(wr[Pr.index],Tr.state,Tr.phraseLength)},this.toHtml=function(Pr,Tr){let Br="";Br+=`<table class="${fr.CLASS_STATS}">
`,typeof Tr=="string"&&(Br+=`<caption>${Tr}</caption>
`),Br+=`<tr><th class="${fr.CLASS_ACTIVE}">ops</th>
`,Br+=`<th class="${fr.CLASS_EMPTY}">EMPTY</th>
`,Br+=`<th class="${fr.CLASS_MATCH}">MATCH</th>
`,Br+=`<th class="${fr.CLASS_NOMATCH}">NOMATCH</th>
`,Br+=`<th class="${fr.CLASS_ACTIVE}">totals</th></tr>
`;const Fr=!0;for(;Fr;){if(Pr===void 0){Br+=Rr();break}if(Pr===null){Br+=Rr();break}if(Pr==="ops"){Br+=Rr();break}if(Pr==="index"){xr.sort(Er),wr.length>0&&wr.sort(Er),Br+=Rr(),Br+=Ir();break}if(Pr==="hits"){xr.sort(vr),wr.length>0&&wr.sort(Er),Br+=Rr(),Br+=Ir();break}if(Pr==="alpha"){xr.sort(Sr),wr.length>0&&wr.sort(Sr),Br+=Rr(),Br+=Ir();break}break}return Br+=`</table>
`,Br},this.toHtmlPage=function(Pr,Tr,Br){return dr.htmlToPage(this.toHtml(Pr,Tr),Br)}},trace=function cr(){const ar=utilities,dr=style,fr=new circularBuffer,hr=identifiers,pr="trace.js: ",mr=this,gr=16,yr=10,xr=8,wr=32,br=80,Sr=5,vr=[];let Er=5e3,Ar=-1,_r=0,Cr=0;const kr=[];let Rr=null,Ir=null,Nr=null;const Pr=[],Tr=[],Br=`<span class="${dr.CLASS_LINEEND}">&bull;</span>`,Fr=`<span class="${dr.CLASS_LINEEND}">&hellip;</span>`,jr=`<span class="${dr.CLASS_EMPTY}">&#120634;</span>`,Ur=function(){const rs=function(ps){Pr[hr.ALT]=ps,Pr[hr.CAT]=ps,Pr[hr.REP]=ps,Pr[hr.TLS]=ps,Pr[hr.TBS]=ps,Pr[hr.TRG]=ps,Pr[hr.AND]=ps,Pr[hr.NOT]=ps,Pr[hr.BKR]=ps,Pr[hr.BKA]=ps,Pr[hr.BKN]=ps,Pr[hr.ABG]=ps,Pr[hr.AEN]=ps};let as=0;for(const ps in mr.filter.operators)as+=1;if(as===0){rs(!1);return}for(const ps in mr.filter.operators){const xs=ps.toUpperCase();if(xs==="<ALL>"){rs(!0);return}if(xs==="<NONE>"){rs(!1);return}}rs(!1);for(const ps in mr.filter.operators){const xs=ps.toUpperCase();if(xs==="ALT")Pr[hr.ALT]=mr.filter.operators[ps]===!0;else if(xs==="CAT")Pr[hr.CAT]=mr.filter.operators[ps]===!0;else if(xs==="REP")Pr[hr.REP]=mr.filter.operators[ps]===!0;else if(xs==="AND")Pr[hr.AND]=mr.filter.operators[ps]===!0;else if(xs==="NOT")Pr[hr.NOT]=mr.filter.operators[ps]===!0;else if(xs==="TLS")Pr[hr.TLS]=mr.filter.operators[ps]===!0;else if(xs==="TBS")Pr[hr.TBS]=mr.filter.operators[ps]===!0;else if(xs==="TRG")Pr[hr.TRG]=mr.filter.operators[ps]===!0;else if(xs==="BKR")Pr[hr.BKR]=mr.filter.operators[ps]===!0;else if(xs==="BKA")Pr[hr.BKA]=mr.filter.operators[ps]===!0;else if(xs==="BKN")Pr[hr.BKN]=mr.filter.operators[ps]===!0;else if(xs==="ABG")Pr[hr.ABG]=mr.filter.operators[ps]===!0;else if(xs==="AEN")Pr[hr.AEN]=mr.filter.operators[ps]===!0;else throw new Error(`${pr}initOpratorFilter: '${ps}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`)}},qr=function(){const rs=function(Ss){Pr[hr.RNM]=Ss,Pr[hr.UDT]=Ss;const Ns=Ir.length+Nr.length;Tr.length=0;for(let Ts=0;Ts<Ns;Ts+=1)Tr.push(Ss)};let as,ps;const xs=[];for(ps=0;ps<Ir.length;ps+=1)xs.push(Ir[ps].lower);for(ps=0;ps<Nr.length;ps+=1)xs.push(Nr[ps].lower);Tr.length=0,as=0;for(const Ss in mr.filter.rules)as+=1;if(as===0){rs(!0);return}for(const Ss in mr.filter.rules){const Ns=Ss.toLowerCase();if(Ns==="<all>"){rs(!0);return}if(Ns==="<none>"){rs(!1);return}}rs(!1),Pr[hr.RNM]=!0,Pr[hr.UDT]=!0;for(const Ss in mr.filter.rules){const Ns=Ss.toLowerCase();if(ps=xs.indexOf(Ns),ps<0)throw new Error(`${pr}initRuleFilter: '${Ss}' not a valid rule or udt name`);Tr[ps]=mr.filter.rules[Ss]===!0}};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(rs,as){if(Ar=-1,typeof rs=="number"&&rs>0)Er=Math.ceil(rs);else{Er=0;return}typeof as=="number"&&(Ar=Math.floor(as),Ar<0&&(Ar=-1))},this.getMaxRecords=function(){return Er},this.getLastRecord=function(){return Ar},this.init=function(rs,as,ps){vr.length=0,kr.length=0,_r=0,Cr=0,Rr=ps,Ir=rs,Nr=as,Ur(),qr(),fr.init(Er)};const Hr=function(rs){let as=!1;return rs.type===hr.RNM?Pr[rs.type]&&Tr[rs.index]?as=!0:as=!1:rs.type===hr.UDT?Pr[rs.type]&&Tr[Ir.length+rs.index]?as=!0:as=!1:as=Pr[rs.type],as},Or=function(rs){return Ar===-1||rs<=Ar};this.down=function(rs,as,ps,xs,Ss,Ns){Or(_r)&&Hr(rs)&&(kr.push(_r),vr[fr.increment()]={dirUp:!1,depth:Cr,thisLine:_r,thatLine:void 0,opcode:rs,state:as,phraseIndex:ps,phraseLength:xs,lookAnchor:Ss,lookAround:Ns},_r+=1,Cr+=1)},this.up=function(rs,as,ps,xs,Ss,Ns){if(Or(_r)&&Hr(rs)){const Ts=_r,os=kr.pop(),bs=fr.getListIndex(os);bs!==-1&&(vr[bs].thatLine=Ts),Cr-=1,vr[fr.increment()]={dirUp:!0,depth:Cr,thisLine:Ts,thatLine:os,opcode:rs,state:as,phraseIndex:ps,phraseLength:xs,lookAnchor:Ss,lookAround:Ns},_r+=1}};const Mr=function(){function rs(Kr,Zr){let hs,ys,Es;if(Zr)switch(Kr.op={id:Zr.type,name:ar.opcodeToString(Zr.type)},Kr.opData=void 0,Zr.type){case hr.RNM:Kr.opData=Ir[Zr.index].name;break;case hr.UDT:Kr.opData=Nr[Zr.index].name;break;case hr.BKR:Zr.index<Ir.length?hs=Ir[Zr.index].name:hs=Nr[Zr.index-Ir.length].name,ys=Zr.bkrCase===hr.BKR_MODE_CI?"%i":"%s",Es=Zr.bkrMode===hr.BKR_MODE_UM?"%u":"%p",Kr.opData=`\\\\${ys}${Es}${hs}`;break;case hr.TLS:Kr.opData=[];for(let Is=0;Is<Zr.string.length;Is+=1)Kr.opData.push(Zr.string[Is]);break;case hr.TBS:Kr.opData=[];for(let Is=0;Is<Zr.string.length;Is+=1)Kr.opData.push(Zr.string[Is]);break;case hr.TRG:Kr.opData=[Zr.min,Zr.max];break;case hr.REP:Kr.opData=[Zr.min,Zr.max];break;default:throw new Error("unrecognized opcode")}else Kr.op={id:void 0,name:void 0},Kr.opData=void 0}function as(Kr,Zr,hs){return Kr===hr.MATCH?{index:Zr,length:hs}:Kr===hr.NOMATCH?{index:Zr,length:0}:Kr===hr.EMPTY?{index:Zr,length:0}:null}let ps=-1;function xs(Kr,Zr,hs){const ys={id:ps++,branch:-1,parent:Kr,up:!1,down:!1,depth:hs,children:[]};return Zr?(ys.down=!0,ys.state={id:Zr.state,name:ar.stateToString(Zr.state)},ys.phrase=null,rs(ys,Zr.opcode)):(ys.state={id:void 0,name:void 0},ys.phrase=as(),rs(ys,void 0)),ys}function Ss(Kr,Zr){Zr&&(Kr.up=!0,Kr.state={id:Zr.state,name:ar.stateToString(Zr.state)},Kr.phrase=as(Zr.state,Zr.phraseIndex,Zr.phraseLength),Kr.down||rs(Kr,Zr.opcode))}let Ns=0,Ts=-1,os=1;function bs(Kr){if(Ts+=1,Kr.branch=os,Ts>Cr&&(Cr=Ts),Kr.children.length===0)Ns+=1;else for(let Zr=0;Zr<Kr.children.length;Zr+=1)Zr>0&&(os+=1),Kr.children[Zr].leftMost=!1,Kr.children[Zr].rightMost=!1,Kr.leftMost&&(Kr.children[Zr].leftMost=Zr===0),Kr.rightMost&&(Kr.children[Zr].rightMost=Zr===Kr.children.length-1),bs(Kr.children[Zr]);Ts-=1}function ws(Kr,Zr){let hs;const ys={};if(ys.id=Kr.id,ys.branch=Kr.branch,ys.leftMost=Kr.leftMost,ys.rightMost=Kr.rightMost,hs=Kr.state.name?Kr.state.name:"ACTIVE",ys.state={id:Kr.state.id,name:hs},hs=Kr.op.name?Kr.op.name:"?",ys.op={id:Kr.op.id,name:hs},typeof Kr.opData=="string")ys.opData=Kr.opData;else if(Array.isArray(Kr.opData)){ys.opData=[];for(let Es=0;Es<Kr.opData.length;Es+=1)ys.opData[Es]=Kr.opData[Es]}else ys.opData=void 0;Kr.phrase?ys.phrase={index:Kr.phrase.index,length:Kr.phrase.length}:ys.phrase=null,ys.depth=Kr.depth,ys.children=[];for(let Es=0;Es<Kr.children.length;Es+=1)Kr.children.length-1,ys.children[Es]=ws(Kr.children[Es]);return ys}const As=[];let gs,vs,Ps,Os,Ms=!0;const zs=xs(null,null,-1);for(As.push(zs),vs=zs,fr.forEach(Kr=>{if(Os=vr[Kr],Ms&&(Ms=!1,Os.depth>0)){const Zr=Os.dirUp?Os.depth+1:Os.depth;for(let hs=0;hs<Zr;hs+=1)Ps=vs,vs=xs(vs,null,hs),As.push(vs),Ps.children.push(vs)}Os.dirUp?(vs=As.pop(),Ss(vs,Os),vs=As[As.length-1]):(Ps=vs,vs=xs(vs,Os,Os.depth),As.push(vs),Ps.children.push(vs))});As.length>1;)vs=As.pop(),Ss(vs,null);if(zs.children.length===0)throw new Error("trace.toTree(): parse tree has no nodes");if(As.length===0)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");gs=zs.children[0];let Hs=gs;for(;gs&&!gs.down&&!gs.up;)Hs=gs,gs=gs.children[0];gs=Hs,gs.leftMost=!0,gs.rightMost=!0,bs(gs),gs.branch=0;const Cs={};Cs.string=[];for(let Kr=0;Kr<Rr.length;Kr+=1)Cs.string[Kr]=Rr[Kr];Cs.rules=[];for(let Kr=0;Kr<Ir.length;Kr+=1)Cs.rules[Kr]=Ir[Kr].name;Cs.udts=[];for(let Kr=0;Kr<Nr.length;Kr+=1)Cs.udts[Kr]=Nr[Kr].name;Cs.id={},Cs.id.ALT={id:hr.ALT,name:"ALT"},Cs.id.CAT={id:hr.CAT,name:"CAT"},Cs.id.REP={id:hr.REP,name:"REP"},Cs.id.RNM={id:hr.RNM,name:"RNM"},Cs.id.TLS={id:hr.TLS,name:"TLS"},Cs.id.TBS={id:hr.TBS,name:"TBS"},Cs.id.TRG={id:hr.TRG,name:"TRG"},Cs.id.UDT={id:hr.UDT,name:"UDT"},Cs.id.AND={id:hr.AND,name:"AND"},Cs.id.NOT={id:hr.NOT,name:"NOT"},Cs.id.BKR={id:hr.BKR,name:"BKR"},Cs.id.BKA={id:hr.BKA,name:"BKA"},Cs.id.BKN={id:hr.BKN,name:"BKN"},Cs.id.ABG={id:hr.ABG,name:"ABG"},Cs.id.AEN={id:hr.AEN,name:"AEN"},Cs.id.ACTIVE={id:hr.ACTIVE,name:"ACTIVE"},Cs.id.MATCH={id:hr.MATCH,name:"MATCH"},Cs.id.EMPTY={id:hr.EMPTY,name:"EMPTY"},Cs.id.NOMATCH={id:hr.NOMATCH,name:"NOMATCH"},Cs.treeDepth=Cr,Cs.leafNodes=Ns;let ls;return gs.down?gs.up?ls="none":ls="right":gs.up?ls="left":ls="both",Cs.branchesIncomplete=ls,Cs.tree=ws(gs,gs.depth),Cs};this.toTree=function(rs){const as=Mr();return rs?JSON.stringify(as):as},this.toHtmlPage=function(rs,as,ps){return ar.htmlToPage(this.toHtml(rs,as),ps)};const Lr=function(rs,as){let ps;switch(rs){case gr:ps="hexadecimal";break;case yr:ps="decimal";break;case xr:ps="ASCII";break;case wr:ps="UNICODE";break;default:throw new Error(`${pr}htmlHeader: unrecognized mode: ${rs}`)}let xs="";return xs+=`<p>display mode: ${ps}</p>
`,xs+=`<table class="${dr.CLASS_TRACE}">
`,typeof as=="string"&&(xs+=`<caption>${as}</caption>`),xs},Vr=function(){let rs="";return rs+=`</table>
`,rs+=`<p class="${dr.CLASS_MONOSPACE}">legend:<br>
`,rs+=`(a)&nbsp;-&nbsp;line number<br>
`,rs+=`(b)&nbsp;-&nbsp;matching line number<br>
`,rs+=`(c)&nbsp;-&nbsp;phrase offset<br>
`,rs+=`(d)&nbsp;-&nbsp;phrase length<br>
`,rs+=`(e)&nbsp;-&nbsp;tree depth<br>
`,rs+=`(f)&nbsp;-&nbsp;operator state<br>
`,rs+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${dr.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
`,rs+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${dr.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
`,rs+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${dr.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
`,rs+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${dr.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
`,rs+=`operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
`,rs+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to ${br} characters of the phrase being matched<br>
`,rs+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${dr.CLASS_MATCH}">matched characters</span><br>
`,rs+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${dr.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
`,rs+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${dr.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
`,rs+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${dr.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
`,rs+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${dr.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
`,rs+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${jr} empty string<br>
`,rs+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${Br} end of input string<br>
`,rs+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${Fr} input string display truncated<br>
`,rs+=`</p>
`,rs+=`<p class="${dr.CLASS_MONOSPACE}">
`,rs+=`<sup>&dagger;</sup>original ABNF operators:<br>
`,rs+=`ALT - alternation<br>
`,rs+=`CAT - concatenation<br>
`,rs+=`REP - repetition<br>
`,rs+=`RNM - rule name<br>
`,rs+=`TRG - terminal range<br>
`,rs+=`TLS - terminal literal string (case insensitive)<br>
`,rs+=`TBS - terminal binary string (case sensitive)<br>
`,rs+=`<br>
`,rs+=`<sup>&Dagger;</sup>super set SABNF operators:<br>
`,rs+=`UDT - user-defined terminal<br>
`,rs+=`AND - positive look ahead<br>
`,rs+=`NOT - negative look ahead<br>
`,rs+=`BKA - positive look behind<br>
`,rs+=`BKN - negative look behind<br>
`,rs+=`BKR - back reference<br>
`,rs+=`ABG - anchor - begin of input string<br>
`,rs+=`AEN - anchor - end of input string<br>
`,rs+=`</p>
`,rs};this.indent=function(rs){let as="";for(let ps=0;ps<rs;ps+=1)as+=".";return as};const Jr=function(rs,as){let ps="";if(as.type===hr.TRG)if(rs===gr||rs===wr){let xs=as.min.toString(16).toUpperCase();xs.length%2!==0&&(xs=`0${xs}`),ps+=rs===gr?"%x":"U+",ps+=xs,xs=as.max.toString(16).toUpperCase(),xs.length%2!==0&&(xs=`0${xs}`),ps+=`&ndash;${xs}`}else ps=`%d${as.min.toString(10)}&ndash;${as.max.toString(10)}`;return ps},es=function(rs,as){let ps="";if(as.type===hr.REP)if(rs===gr){let xs=as.min.toString(16).toUpperCase();xs.length%2!==0&&(xs=`0${xs}`),ps=`x${xs}`,as.max<1/0?(xs=as.max.toString(16).toUpperCase(),xs.length%2!==0&&(xs=`0${xs}`)):xs="inf",ps+=`&ndash;${xs}`}else as.max<1/0?ps=`${as.min.toString(10)}&ndash;${as.max.toString(10)}`:ps=`${as.min.toString(10)}&ndash;inf`;return ps},ns=function(rs,as){let ps="";if(as.type===hr.TBS){const xs=Math.min(as.string.length,Sr*2);if(rs===gr||rs===wr){ps+=rs===gr?"%x":"U+";for(let Ss=0;Ss<xs;Ss+=1){let Ns;Ss>0&&(ps+="."),Ns=as.string[Ss].toString(16).toUpperCase(),Ns.length%2!==0&&(Ns=`0${Ns}`),ps+=Ns}}else{ps="%d";for(let Ss=0;Ss<xs;Ss+=1)Ss>0&&(ps+="."),ps+=as.string[Ss].toString(10)}xs<as.string.length&&(ps+=Fr)}return ps},Qr=function(rs,as){let ps="";if(as.type===hr.TLS){const xs=Math.min(as.string.length,Sr);if(rs===gr||rs===yr){let Ss,Ns,Ts;rs===gr?(ps="%x",Ts=16):(ps="%d",Ts=10);for(let os=0;os<xs;os+=1)os>0&&(ps+="."),Ns=as.string[os],Ns>=97&&Ns<=122?(Ss=Ns-32,ps+=`${Ss.toString(Ts)}/${Ns.toString(Ts)}`.toUpperCase()):Ns>=65&&Ns<=90?(Ss=Ns,Ns+=32,ps+=`${Ss.toString(Ts)}/${Ns.toString(Ts)}`.toUpperCase()):ps+=Ns.toString(Ts).toUpperCase();xs<as.string.length&&(ps+=Fr)}else{ps='"';for(let Ss=0;Ss<xs;Ss+=1)ps+=ar.asciiChars[as.string[Ss]];xs<as.string.length&&(ps+=Fr),ps+='"'}}return ps},zr=function(rs,as,ps,xs,Ss){if(xs===0)return"";let Ns="";const Ts=Ss?",":"";switch(rs){case gr:Ns=Ts+ar.charsToHex(as,ps,xs);break;case yr:if(Ss)return`,${ar.charsToDec(as,ps,xs)}`;Ns=Ts+ar.charsToDec(as,ps,xs);break;case wr:Ns=ar.charsToUnicode(as,ps,xs);break;case xr:default:Ns=ar.charsToAsciiHtml(as,ps,xs);break}return Ns},Wr=function(rs,as,ps,xs,Ss,Ns){let Ts="",os,bs,ws,As,gs=Br;const vs=`<span class="${dr.CLASS_LOOKBEHIND}">`,Ps=`<span class="${dr.CLASS_REMAINDER}">`,Os="</span>";let Ms=!1;switch(ps){case hr.EMPTY:Ts+=jr;case hr.NOMATCH:case hr.MATCH:case hr.ACTIVE:os=xs-Ss,bs=Ns-os,ws=Ns,As=as.length-ws;break;default:throw new Error("unrecognized state")}return gs=Br,bs>br?(bs=br,gs=Fr,As=0):bs+As>br&&(gs=Fr,As=br-bs),bs>0&&(Ts+=vs,Ts+=zr(rs,as,os,bs,Ms),Ts+=Os,Ms=!0),As>0&&(Ts+=Ps,Ts+=zr(rs,as,ws,As,Ms),Ts+=Os),Ts+gs},ss=function(rs,as,ps,xs,Ss,Ns){let Ts="",os,bs,ws,As,gs=Br;const vs=`<span class="${dr.CLASS_REMAINDER}">`,Ps="</span>";let Os=!1;switch(ps){case hr.EMPTY:Ts+=jr;case hr.NOMATCH:case hr.ACTIVE:os=xs,bs=0,ws=xs,As=as.length-ws;break;case hr.MATCH:os=xs,bs=Ss,ws=xs+bs,As=as.length-ws;break;default:throw new Error("unrecognized state")}return gs=Br,bs>br?(bs=br,gs=Fr,As=0):bs+As>br&&(gs=Fr,As=br-bs),bs>0&&(Ts+=Ns,Ts+=zr(rs,as,os,bs,Os),Ts+=Ps,Os=!0),As>0&&(Ts+=vs,Ts+=zr(rs,as,ws,As,Os),Ts+=Ps),Ts+gs},Xr=function(rs,as,ps,xs,Ss){const Ns=`<span class="${dr.CLASS_LOOKAHEAD}">`;return ss(rs,as,ps,xs,Ss,Ns)},ts=function(rs,as,ps,xs,Ss){const Ns=`<span class="${dr.CLASS_MATCH}">`;return ss(rs,as,ps,xs,Ss,Ns)},fs=function(rs){if(Ir===null)return"";let as="",ps,xs,Ss,Ns,Ts,os;return as+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",as+=`<th>operator</th><th>phrase</th></tr>
`,fr.forEach(bs=>{const ws=vr[bs];switch(ps=ws.thisLine,xs=ws.thatLine!==void 0?ws.thatLine:"--",Ss=!1,Ns=!1,Ts=!1,ws.lookAround===hr.LOOKAROUND_AHEAD&&(Ss=!0,Ts=!0,os=ws.lookAnchor),(ws.opcode.type===hr.AND||ws.opcode.type===hr.NOT)&&(Ss=!0,Ts=!0,os=ws.phraseIndex),ws.lookAround===hr.LOOKAROUND_BEHIND&&(Ns=!0,Ts=!0,os=ws.lookAnchor),(ws.opcode.type===hr.BKA||ws.opcode.type===hr.BKN)&&(Ns=!0,Ts=!0,os=ws.phraseIndex),as+="<tr>",as+=`<td>${ps}</td><td>${xs}</td>`,as+=`<td>${ws.phraseIndex}</td>`,as+=`<td>${ws.phraseLength}</td>`,as+=`<td>${ws.depth}</td>`,as+="<td>",ws.state){case hr.ACTIVE:as+=`<span class="${dr.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case hr.MATCH:as+=`<span class="${dr.CLASS_MATCH}">&uarr;M</span>`;break;case hr.NOMATCH:as+=`<span class="${dr.CLASS_NOMATCH}">&uarr;N</span>`;break;case hr.EMPTY:as+=`<span class="${dr.CLASS_EMPTY}">&uarr;E</span>`;break;default:as+=`<span class="${dr.CLASS_ACTIVE}">--</span>`;break}if(as+="</td>",as+="<td>",as+=mr.indent(ws.depth),Ss?as+=`<span class="${dr.CLASS_LOOKAHEAD}">`:Ns&&(as+=`<span class="${dr.CLASS_LOOKBEHIND}">`),as+=ar.opcodeToString(ws.opcode.type),ws.opcode.type===hr.RNM&&(as+=`(${Ir[ws.opcode.index].name}) `),ws.opcode.type===hr.BKR){const As=ws.opcode.bkrCase===hr.BKR_MODE_CI?"%i":"%s",gs=ws.opcode.bkrMode===hr.BKR_MODE_UM?"%u":"%p";as+=`(\\${As}${gs}${Ir[ws.opcode.index].name}) `}ws.opcode.type===hr.UDT&&(as+=`(${Nr[ws.opcode.index].name}) `),ws.opcode.type===hr.TRG&&(as+=`(${Jr(rs,ws.opcode)}) `),ws.opcode.type===hr.TBS&&(as+=`(${ns(rs,ws.opcode)}) `),ws.opcode.type===hr.TLS&&(as+=`(${Qr(rs,ws.opcode)}) `),ws.opcode.type===hr.REP&&(as+=`(${es(rs,ws.opcode)}) `),Ts&&(as+="</span>"),as+="</td>",as+="<td>",Ns?as+=Wr(rs,Rr,ws.state,ws.phraseIndex,ws.phraseLength,os):Ss?as+=Xr(rs,Rr,ws.state,ws.phraseIndex,ws.phraseLength):as+=ts(rs,Rr,ws.state,ws.phraseIndex,ws.phraseLength),as+=`</td></tr>
`}),as+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",as+=`<th>operator</th><th>phrase</th></tr>
`,as+=`</table>
`,as};this.toHtml=function(rs,as){let ps=xr;if(typeof rs=="string"&&rs.length>=3){const Ss=rs.toLowerCase().slice(0,3);Ss==="hex"?ps=gr:Ss==="dec"?ps=yr:Ss==="uni"&&(ps=wr)}let xs="";return xs+=Lr(ps,as),xs+=fs(ps),xs+=Vr(),xs}},nodeExports={ast,circular:circularBuffer,ids:identifiers,parser:parser$3,stats,trace,utils:utilities,emitcss,style},scannerGrammar,hasRequiredScannerGrammar;function requireScannerGrammar(){return hasRequiredScannerGrammar||(hasRequiredScannerGrammar=1,scannerGrammar=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"file",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"line",lower:"line",index:1,isBkr:!1},this.rules[2]={name:"line-text",lower:"line-text",index:2,isBkr:!1},this.rules[3]={name:"last-line",lower:"last-line",index:3,isBkr:!1},this.rules[4]={name:"valid",lower:"valid",index:4,isBkr:!1},this.rules[5]={name:"invalid",lower:"invalid",index:5,isBkr:!1},this.rules[6]={name:"end",lower:"end",index:6,isBkr:!1},this.rules[7]={name:"CRLF",lower:"crlf",index:7,isBkr:!1},this.rules[8]={name:"LF",lower:"lf",index:8,isBkr:!1},this.rules[9]={name:"CR",lower:"cr",index:9,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,3]},this.rules[0].opcodes[1]={type:3,min:0,max:1/0},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:3,min:0,max:1},this.rules[0].opcodes[4]={type:4,index:3},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,2]},this.rules[1].opcodes[1]={type:4,index:2},this.rules[1].opcodes[2]={type:4,index:6},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:3,min:0,max:1/0},this.rules[2].opcodes[1]={type:1,children:[2,3]},this.rules[2].opcodes[2]={type:4,index:4},this.rules[2].opcodes[3]={type:4,index:5},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:3,min:1,max:1/0},this.rules[3].opcodes[1]={type:1,children:[2,3]},this.rules[3].opcodes[2]={type:4,index:4},this.rules[3].opcodes[3]={type:4,index:5},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:5,min:32,max:126},this.rules[4].opcodes[2]={type:6,string:[9]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[5].opcodes[1]={type:5,min:0,max:8},this.rules[5].opcodes[2]={type:5,min:11,max:12},this.rules[5].opcodes[3]={type:5,min:14,max:31},this.rules[5].opcodes[4]={type:5,min:127,max:4294967295},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:1,children:[1,2,3]},this.rules[6].opcodes[1]={type:4,index:7},this.rules[6].opcodes[2]={type:4,index:8},this.rules[6].opcodes[3]={type:4,index:9},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:6,string:[13,10]},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:6,string:[10]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:6,string:[13]},this.toString=function(){let dr="";return dr+=`file = *line [last-line]
`,dr+=`line = line-text end
`,dr+=`line-text = *(valid/invalid)
`,dr+=`last-line = 1*(valid/invalid)
`,dr+=`valid = %d32-126 / %d9
`,dr+=`invalid = %d0-8 / %d11-12 /%d14-31 / %x7f-ffffffff
`,dr+=`end = CRLF / LF / CR
`,dr+=`CRLF = %d13.10
`,dr+=`LF = %d10
`,dr+=`CR = %d13
`,dr}}),scannerGrammar}var scannerCallbacks={},hasRequiredScannerCallbacks;function requireScannerCallbacks(){if(hasRequiredScannerCallbacks)return scannerCallbacks;hasRequiredScannerCallbacks=1;const cr=identifiers,ar=utilities;function dr(br,Sr,vr,Er,Ar){return br===cr.SEM_PRE?(Ar.endLength=0,Ar.textLength=0,Ar.invalidCount=0):Ar.lines.push({lineNo:Ar.lines.length,beginChar:vr,length:Er,textLength:Ar.textLength,endType:Ar.endType,invalidChars:Ar.invalidCount}),cr.SEM_OK}function fr(br,Sr,vr,Er,Ar){return br===cr.SEM_PRE&&(Ar.textLength=Er),cr.SEM_OK}function hr(br,Sr,vr,Er,Ar){return br===cr.SEM_PRE?(Ar.endLength=0,Ar.textLength=0,Ar.invalidCount=0):Ar.strict?(Ar.lines.push({lineNo:Ar.lines.length,beginChar:vr,length:Er,textLength:Er,endType:"none",invalidChars:Ar.invalidCount}),Ar.errors.push({line:Ar.lineNo,char:vr+Er,msg:"no line end on last line - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})):(Sr.push(10),Ar.lines.push({lineNo:Ar.lines.length,beginChar:vr,length:Er+1,textLength:Er,endType:"LF",invalidChars:Ar.invalidCount})),cr.SEM_OK}function pr(br,Sr,vr,Er,Ar){return br===cr.SEM_PRE&&Ar.errors.push({line:Ar.lineNo,char:vr,msg:`invalid character found '\\x${ar.charToHex(Sr[vr])}'`}),cr.SEM_OK}function mr(br,Sr,vr,Er,Ar){return br===cr.SEM_POST&&(Ar.lineNo+=1),cr.SEM_OK}function gr(br,Sr,vr,Er,Ar){return br===cr.SEM_PRE&&(Ar.endType="LF",Ar.strict&&Ar.errors.push({line:Ar.lineNo,char:vr,msg:"line end character LF(\\n, \\x0A) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),cr.SEM_OK}function yr(br,Sr,vr,Er,Ar){return br===cr.SEM_PRE&&(Ar.endType="CR",Ar.strict&&Ar.errors.push({line:Ar.lineNo,char:vr,msg:"line end character CR(\\r, \\x0D) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),cr.SEM_OK}function xr(br,Sr,vr,Er,Ar){return br===cr.SEM_PRE&&(Ar.endType="CRLF"),cr.SEM_OK}const wr=[];return wr.line=dr,wr["line-text"]=fr,wr["last-line"]=hr,wr.invalid=pr,wr.end=mr,wr.lf=gr,wr.cr=yr,wr.crlf=xr,scannerCallbacks.callbacks=wr,scannerCallbacks}var scanner,hasRequiredScanner;function requireScanner(){return hasRequiredScanner||(hasRequiredScanner=1,scanner=function(ar,dr,fr,hr){const pr="scanner.js: ",mr=nodeExports,gr=new(requireScannerGrammar()),{callbacks:yr}=requireScannerCallbacks(),xr=[],wr=new mr.parser;if(wr.ast=new mr.ast,wr.ast.callbacks=yr,hr){if(hr.traceObject!=="traceObject")throw new TypeError(`${pr}trace argument is not a trace object`);wr.trace=hr}if(wr.parse(gr,"file",ar).success!==!0){dr.push({line:0,char:0,msg:"syntax analysis error analyzing input SABNF grammar"});return}const Sr={lines:xr,lineNo:0,errors:dr,strict:!!fr};return wr.ast.translate(Sr),xr}),scanner}var syntaxCallbacks,hasRequiredSyntaxCallbacks;function requireSyntaxCallbacks(){return hasRequiredSyntaxCallbacks||(hasRequiredSyntaxCallbacks=1,syntaxCallbacks=function(){const ar="syntax-callbacks.js: ",dr=nodeExports,fr=dr.ids;let hr;const pr=function(Qr,zr,Wr,ss){switch(Qr.state){case fr.ACTIVE:ss.altStack=[],ss.repCount=0;break;case fr.EMPTY:ss.errors.push({line:0,char:0,msg:"grammar file is empty"});break;case fr.MATCH:ss.ruleCount===0&&ss.errors.push({line:0,char:0,msg:"no rules defined"});break;case fr.NOMATCH:throw new Error(`${ar}synFile: grammar file NOMATCH: design error: should never happen.`);default:throw new Error(`${ar}synFile: unrecognized case.`)}},mr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:Wr.altStack.length=0,hr={groupOpen:null,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},Wr.altStack.push(hr);break;case fr.EMPTY:throw new Error(`${ar}synRule: EMPTY: rule cannot be empty`);case fr.NOMATCH:break;case fr.MATCH:Wr.ruleCount+=1;break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},gr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"Unrecognized SABNF line. Invalid rule, comment or blank line."});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},yr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"Rule names must be alphanum and begin with alphabetic character."});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},xr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"Expected '=' or '=/'. Not found."});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},wr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.strict&&Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"AND operator(&) found - strict ABNF specified."});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},br=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.strict&&Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"NOT operator(!) found - strict ABNF specified."});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Sr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.strict?Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"Positive look-behind operator(&&) found - strict ABNF specified."}):Wr.lite&&Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"Positive look-behind operator(&&) found - apg-lite specified."});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},vr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.strict?Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"Negative look-behind operator(!!) found - strict ABNF specified."}):Wr.lite&&Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"Negative look-behind operator(!!) found - apg-lite specified."});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Er=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.strict?Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"Beginning of string anchor(%^) found - strict ABNF specified."}):Wr.lite&&Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"Beginning of string anchor(%^) found - apg-lite specified."});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Ar=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.strict?Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"End of string anchor(%$) found - strict ABNF specified."}):Wr.lite&&Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"End of string anchor(%$) found - apg-lite specified."});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},_r=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:if(Wr.strict){const ss=dr.utils.charsToString(Qr,zr,ns.phraseLength);Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:`Back reference operator(${ss}) found - strict ABNF specified.`})}else if(Wr.lite){const ss=dr.utils.charsToString(Qr,zr,ns.phraseLength);Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:`Back reference operator(${ss}) found - apg-lite specified.`})}break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Cr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:if(Wr.strict){const ss=dr.utils.charsToString(Qr,zr,ns.phraseLength);Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:`UDT operator found(${ss}) - strict ABNF specified.`})}break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},kr=function(ns,Qr,zr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:hr.tlsOpen=zr;break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Rr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:Wr.stringTabChar=!1;break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.stringTabChar!==!1&&Wr.errors.push({line:Wr.findLine(Wr.lines,Wr.stringTabChar),char:Wr.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string (see 'quoted-string' definition, RFC 7405.)"});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Ir=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.stringTabChar=zr;break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Nr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:Wr.errors.push({line:Wr.findLine(Wr.lines,hr.tlsOpen),char:hr.tlsOpen,msg:'Case-insensitive literal string("...") opened but not closed.'}),hr.basicError=!0,hr.tlsOpen=null;break;case fr.MATCH:hr.tlsOpen=null;break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Pr=function(ns,Qr,zr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:hr.clsOpen=zr;break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Tr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:Wr.stringTabChar=!1;break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.stringTabChar!==!1&&Wr.errors.push({line:Wr.findLine(Wr.lines,Wr.stringTabChar),char:Wr.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string."});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Br=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:Wr.errors.push({line:Wr.findLine(Wr.lines,hr.clsOpen),char:hr.clsOpen,msg:"Case-sensitive literal string('...') opened but not closed."}),hr.clsOpen=null,hr.basicError=!0;break;case fr.MATCH:Wr.strict&&Wr.errors.push({line:Wr.findLine(Wr.lines,hr.clsOpen),char:hr.clsOpen,msg:"Case-sensitive string operator('...') found - strict ABNF specified."}),hr.clsOpen=null;break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Fr=function(ns,Qr,zr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:hr.prosValOpen=zr;break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},jr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:Wr.stringTabChar=!1;break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.stringTabChar!==!1&&Wr.errors.push({line:Wr.findLine(Wr.lines,Wr.stringTabChar),char:Wr.stringTabChar,msg:"Tab character (\\t, x09) not allowed in prose value string."});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Ur=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:Wr.errors.push({line:Wr.findLine(Wr.lines,hr.prosValOpen),char:hr.prosValOpen,msg:"Prose value operator(<...>) opened but not closed."}),hr.basicError=!0,hr.prosValOpen=null;break;case fr.MATCH:Wr.errors.push({line:Wr.findLine(Wr.lines,hr.prosValOpen),char:hr.prosValOpen,msg:"Prose value operator(<...>) found. The ABNF syntax is valid, but a parser cannot be generated from this grammar."}),hr.prosValOpen=null;break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},qr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:hr={groupOpen:zr,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},Wr.altStack.push(hr);break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Hr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:Wr.errors.push({line:Wr.findLine(Wr.lines,hr.groupOpen),char:hr.groupOpen,msg:'Group "(...)" opened but not closed.'}),hr=Wr.altStack.pop(),hr.groupError=!0;break;case fr.MATCH:hr=Wr.altStack.pop();break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Or=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:hr={groupOpen:null,groupError:!1,optionOpen:zr,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},Wr.altStack.push(hr);break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Mr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:Wr.errors.push({line:Wr.findLine(Wr.lines,hr.optionOpen),char:hr.optionOpen,msg:'Option "[...]" opened but not closed.'}),hr=Wr.altStack.pop(),hr.optionError=!0;break;case fr.MATCH:hr=Wr.altStack.pop();break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Lr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:hr.basicError===!1&&Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"Unrecognized SABNF element."});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Vr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:if(ns.phraseLength===1&&Wr.strict){const ss=Qr[zr]===13?"CR":"LF";Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:`Line end '${ss}' found - strict ABNF specified, only CRLF allowed.`})}break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},Jr=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:break;case fr.MATCH:Wr.errors.push({line:Wr.findLine(Wr.lines,zr,Wr.charsLength),char:zr,msg:"Unrecognized grammar element or characters."});break;default:throw new Error(`${ar}synFile: unrecognized case.`)}},es=function(ns,Qr,zr,Wr){switch(ns.state){case fr.ACTIVE:break;case fr.EMPTY:break;case fr.NOMATCH:Wr.repCount+=1;break;case fr.MATCH:Wr.repCount+=1;break;default:throw new Error(`${ar}synFile: unrecognized case.`)}};this.callbacks=[],this.callbacks.andop=wr,this.callbacks.basicelementerr=Lr,this.callbacks.clsclose=Br,this.callbacks.clsopen=Pr,this.callbacks.clsstring=Tr,this.callbacks.definedaserror=xr,this.callbacks.file=pr,this.callbacks.groupclose=Hr,this.callbacks.groupopen=qr,this.callbacks.lineenderror=Jr,this.callbacks.lineend=Vr,this.callbacks.notop=br,this.callbacks.optionclose=Mr,this.callbacks.optionopen=Or,this.callbacks.prosvalclose=Ur,this.callbacks.prosvalopen=Fr,this.callbacks.prosvalstring=jr,this.callbacks.repetition=es,this.callbacks.rule=mr,this.callbacks.ruleerror=gr,this.callbacks.rulenameerror=yr,this.callbacks.stringtab=Ir,this.callbacks.tlsclose=Nr,this.callbacks.tlsopen=kr,this.callbacks.tlsstring=Rr,this.callbacks.udtop=Cr,this.callbacks.bkaop=Sr,this.callbacks.bknop=vr,this.callbacks.bkrop=_r,this.callbacks.abgop=Er,this.callbacks.aenop=Ar}),syntaxCallbacks}var semanticCallbacks,hasRequiredSemanticCallbacks;function requireSemanticCallbacks(){return hasRequiredSemanticCallbacks||(hasRequiredSemanticCallbacks=1,semanticCallbacks=function(){const ar=nodeExports,dr=ar.ids,fr=function(){this.names=[],this.add=function(ws){let As=-1;return this.get(ws)===-1&&(As={name:ws,lower:ws.toLowerCase(),index:this.names.length},this.names.push(As)),As},this.get=function(ws){let As=-1;const gs=ws.toLowerCase();for(let vs=0;vs<this.names.length;vs+=1)if(this.names[vs].lower===gs){As=this.names[vs];break}return As}},hr=function(bs,ws,As){let gs=0;for(let vs=ws;vs<ws+As;vs+=1)gs=10*gs+bs[vs]-48;return gs},pr=function(bs,ws,As){let gs=0;for(let vs=ws;vs<ws+As;vs+=1)gs=2*gs+bs[vs]-48;return gs},mr=function(bs,ws,As){let gs=0;for(let vs=ws;vs<ws+As;vs+=1){let Ps=bs[vs];if(Ps>=48&&Ps<=57)Ps-=48;else if(Ps>=65&&Ps<=70)Ps-=55;else if(Ps>=97&&Ps<=102)Ps-=87;else throw new Error("hexnum out of range");gs=16*gs+Ps}return gs};function gr(os,bs,ws,As,gs){const vs=dr.SEM_OK;if(os===dr.SEM_PRE)gs.ruleNames=new fr,gs.udtNames=new fr,gs.rules=[],gs.udts=[],gs.rulesLineMap=[],gs.opcodes=[],gs.altStack=[],gs.topStack=null,gs.topRule=null;else if(os===dr.SEM_POST){let Ps;gs.rules.forEach(Os=>{Os.isBkr=!1,Os.opcodes.forEach(Ms=>{Ms.type===dr.RNM&&(Ps=gs.ruleNames.get(Ms.index.name),Ps===-1?(gs.errors.push({line:gs.findLine(gs.lines,Ms.index.phraseIndex,gs.charsLength),char:Ms.index.phraseIndex,msg:`Rule name '${Ms.index.name}' used but not defined.`}),Ms.index=-1):Ms.index=Ps.index)})}),gs.udts.forEach(Os=>{Os.isBkr=!1}),gs.rules.forEach(Os=>{Os.opcodes.forEach(Ms=>{Ms.type===dr.BKR&&(Os.hasBkr=!0,Ps=gs.ruleNames.get(Ms.index.name),Ps!==-1?(gs.rules[Ps.index].isBkr=!0,Ms.index=Ps.index):(Ps=gs.udtNames.get(Ms.index.name),Ps!==-1?(gs.udts[Ps.index].isBkr=!0,Ms.index=gs.rules.length+Ps.index):(gs.errors.push({line:gs.findLine(gs.lines,Ms.index.phraseIndex,gs.charsLength),char:Ms.index.phraseIndex,msg:`Back reference name '${Ms.index.name}' refers to undefined rule or unamed UDT.`}),Ms.index=-1)))})})}return vs}function yr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_PRE&&(gs.altStack.length=0,gs.topStack=null,gs.rulesLineMap.push({line:gs.findLine(gs.lines,ws,gs.charsLength),char:ws})),vs}function xr(os,bs,ws,As,gs){const vs=dr.SEM_OK;if(os===dr.SEM_PRE)gs.ruleName="",gs.definedas="";else if(os===dr.SEM_POST){let Ps;gs.definedas==="="?(Ps=gs.ruleNames.add(gs.ruleName),Ps===-1?(gs.definedas=null,gs.errors.push({line:gs.findLine(gs.lines,ws,gs.charsLength),char:ws,msg:`Rule name '${gs.ruleName}' previously defined.`})):(gs.topRule={name:Ps.name,lower:Ps.lower,opcodes:[],index:Ps.index},gs.rules.push(gs.topRule),gs.opcodes=gs.topRule.opcodes)):(Ps=gs.ruleNames.get(gs.ruleName),Ps===-1?(gs.definedas=null,gs.errors.push({line:gs.findLine(gs.lines,ws,gs.charsLength),char:ws,msg:`Rule name '${gs.ruleName}' for incremental alternate not previously defined.`})):(gs.topRule=gs.rules[Ps.index],gs.opcodes=gs.topRule.opcodes))}return vs}function wr(os,bs,ws,As,gs){let vs=dr.SEM_OK;if(os===dr.SEM_PRE)for(;;){if(gs.definedas===null){vs=dr.SEM_SKIP;break}if(gs.topStack===null){if(gs.definedas==="="){gs.topStack={alt:{type:dr.ALT,children:[]},cat:null},gs.altStack.push(gs.topStack),gs.opcodes.push(gs.topStack.alt);break}gs.topStack={alt:gs.opcodes[0],cat:null},gs.altStack.push(gs.topStack);break}gs.topStack={alt:{type:dr.ALT,children:[]},cat:null},gs.altStack.push(gs.topStack),gs.opcodes.push(gs.topStack.alt);break}else os===dr.SEM_POST&&(gs.altStack.pop(),gs.altStack.length>0?gs.topStack=gs.altStack[gs.altStack.length-1]:gs.topStack=null);return vs}function br(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_PRE?(gs.topStack.alt.children.push(gs.opcodes.length),gs.topStack.cat={type:dr.CAT,children:[]},gs.opcodes.push(gs.topStack.cat)):os===dr.SEM_POST&&(gs.topStack.cat=null),vs}function Sr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_PRE&&gs.topStack.cat.children.push(gs.opcodes.length),vs}function vr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&gs.opcodes.push({type:dr.REP,min:0,max:1,char:ws}),vs}function Er(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_PRE&&(gs.ruleName=ar.utils.charsToString(bs,ws,As)),vs}function Ar(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.definedas="="),vs}function _r(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.definedas="=/"),vs}function Cr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_PRE?(gs.min=0,gs.max=1/0,gs.topRep={type:dr.REP,min:0,max:1/0},gs.opcodes.push(gs.topRep)):os===dr.SEM_POST&&(gs.min>gs.max&&gs.errors.push({line:gs.findLine(gs.lines,ws,gs.charsLength),char:ws,msg:`repetition min cannot be greater than max: min: ${gs.min}: max: ${gs.max}`}),gs.topRep.min=gs.min,gs.topRep.max=gs.max),vs}function kr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.min=hr(bs,ws,As)),vs}function Rr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.max=hr(bs,ws,As)),vs}function Ir(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.max=hr(bs,ws,As),gs.min=gs.max),vs}function Nr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&gs.opcodes.push({type:dr.AND}),vs}function Pr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&gs.opcodes.push({type:dr.NOT}),vs}function Tr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&gs.opcodes.push({type:dr.RNM,index:{phraseIndex:ws,name:ar.utils.charsToString(bs,ws,As)}}),vs}function Br(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&gs.opcodes.push({type:dr.ABG}),vs}function Fr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&gs.opcodes.push({type:dr.AEN}),vs}function jr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&gs.opcodes.push({type:dr.BKA}),vs}function Ur(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&gs.opcodes.push({type:dr.BKN}),vs}function qr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_PRE?(gs.ci=!0,gs.cs=!1,gs.um=!0,gs.pm=!1):os===dr.SEM_POST&&gs.opcodes.push({type:dr.BKR,bkrCase:gs.cs===!0?dr.BKR_MODE_CS:dr.BKR_MODE_CI,bkrMode:gs.pm===!0?dr.BKR_MODE_PM:dr.BKR_MODE_UM,index:{phraseIndex:gs.bkrname.phraseIndex,name:ar.utils.charsToString(bs,gs.bkrname.phraseIndex,gs.bkrname.phraseLength)}}),vs}function Hr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.ci=!0),vs}function Or(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.cs=!0),vs}function Mr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.um=!0),vs}function Lr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.pm=!0),vs}function Vr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.bkrname={phraseIndex:ws,phraseLength:As}),vs}function Jr(os,bs,ws,As,gs){const vs=dr.SEM_OK;if(os===dr.SEM_POST){const Ps=ar.utils.charsToString(bs,ws,As);let Os=gs.udtNames.add(Ps);if(Os===-1){if(Os=gs.udtNames.get(Ps),Os===-1)throw new Error("semUdtEmpty: name look up error")}else gs.udts.push({name:Os.name,lower:Os.lower,index:Os.index,empty:!0});gs.opcodes.push({type:dr.UDT,empty:!0,index:Os.index})}return vs}function es(os,bs,ws,As,gs){const vs=dr.SEM_OK;if(os===dr.SEM_POST){const Ps=ar.utils.charsToString(bs,ws,As);let Os=gs.udtNames.add(Ps);if(Os===-1){if(Os=gs.udtNames.get(Ps),Os===-1)throw new Error("semUdtNonEmpty: name look up error")}else gs.udts.push({name:Os.name,lower:Os.lower,index:Os.index,empty:!1});gs.opcodes.push({type:dr.UDT,empty:!1,index:Os.index,syntax:null,semantic:null})}return vs}function ns(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_PRE&&(gs.tlscase=!0),vs}function Qr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&As>0&&(bs[ws+1]===83||bs[ws+1]===115)&&(gs.tlscase=!1),vs}function zr(os,bs,ws,As,gs){const vs=dr.SEM_OK;if(os===dr.SEM_POST)if(gs.tlscase){const Ps=bs.slice(ws,ws+As);for(let Os=0;Os<Ps.length;Os+=1)Ps[Os]>=65&&Ps[Os]<=90&&(Ps[Os]+=32);gs.opcodes.push({type:dr.TLS,string:Ps})}else gs.opcodes.push({type:dr.TBS,string:bs.slice(ws,ws+As)});return vs}function Wr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(As<=2?gs.opcodes.push({type:dr.TLS,string:[]}):gs.opcodes.push({type:dr.TBS,string:bs.slice(ws+1,ws+As-1)})),vs}function ss(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_PRE?gs.tbsstr=[]:os===dr.SEM_POST&&gs.opcodes.push({type:dr.TBS,string:gs.tbsstr}),vs}function Xr(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_PRE?(gs.min=0,gs.max=0):os===dr.SEM_POST&&(gs.min>gs.max&&gs.errors.push({line:gs.findLine(gs.lines,ws,gs.charsLength),char:ws,msg:`TRG, (%dmin-max), min cannot be greater than max: min: ${gs.min}: max: ${gs.max}`}),gs.opcodes.push({type:dr.TRG,min:gs.min,max:gs.max})),vs}function ts(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.min=hr(bs,ws,As)),vs}function fs(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.max=hr(bs,ws,As)),vs}function rs(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.min=pr(bs,ws,As)),vs}function as(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.max=pr(bs,ws,As)),vs}function ps(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.min=mr(bs,ws,As)),vs}function xs(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&(gs.max=mr(bs,ws,As)),vs}function Ss(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&gs.tbsstr.push(hr(bs,ws,As)),vs}function Ns(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&gs.tbsstr.push(pr(bs,ws,As)),vs}function Ts(os,bs,ws,As,gs){const vs=dr.SEM_OK;return os===dr.SEM_POST&&gs.tbsstr.push(mr(bs,ws,As)),vs}this.callbacks=[],this.callbacks.abgop=Br,this.callbacks.aenop=Fr,this.callbacks.alternation=wr,this.callbacks.andop=Nr,this.callbacks.bmax=as,this.callbacks.bmin=rs,this.callbacks.bkaop=jr,this.callbacks.bknop=Ur,this.callbacks.bkrop=qr,this.callbacks["bkr-name"]=Vr,this.callbacks.bstring=Ns,this.callbacks.clsop=Wr,this.callbacks.ci=Hr,this.callbacks.cs=Or,this.callbacks.um=Mr,this.callbacks.pm=Lr,this.callbacks.concatenation=br,this.callbacks.defined=Ar,this.callbacks.dmax=fs,this.callbacks.dmin=ts,this.callbacks.dstring=Ss,this.callbacks.file=gr,this.callbacks.incalt=_r,this.callbacks.notop=Pr,this.callbacks.optionopen=vr,this.callbacks["rep-max"]=Rr,this.callbacks["rep-min"]=kr,this.callbacks["rep-min-max"]=Ir,this.callbacks.repetition=Sr,this.callbacks.repop=Cr,this.callbacks.rnmop=Tr,this.callbacks.rule=yr,this.callbacks.rulelookup=xr,this.callbacks.rulename=Er,this.callbacks.tbsop=ss,this.callbacks.tlscase=Qr,this.callbacks.tlsstring=zr,this.callbacks.tlsop=ns,this.callbacks.trgop=Xr,this.callbacks["udt-empty"]=Jr,this.callbacks["udt-non-empty"]=es,this.callbacks.xmax=xs,this.callbacks.xmin=ps,this.callbacks.xstring=Ts}),semanticCallbacks}var sabnfGrammar,hasRequiredSabnfGrammar;function requireSabnfGrammar(){return hasRequiredSabnfGrammar||(hasRequiredSabnfGrammar=1,sabnfGrammar=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={name:"Dec",lower:"dec",index:76,isBkr:!1},this.rules[77]={name:"Hex",lower:"hex",index:77,isBkr:!1},this.rules[78]={name:"Bin",lower:"bin",index:78,isBkr:!1},this.rules[79]={name:"dmin",lower:"dmin",index:79,isBkr:!1},this.rules[80]={name:"dmax",lower:"dmax",index:80,isBkr:!1},this.rules[81]={name:"bmin",lower:"bmin",index:81,isBkr:!1},this.rules[82]={name:"bmax",lower:"bmax",index:82,isBkr:!1},this.rules[83]={name:"xmin",lower:"xmin",index:83,isBkr:!1},this.rules[84]={name:"xmax",lower:"xmax",index:84,isBkr:!1},this.rules[85]={name:"dnum",lower:"dnum",index:85,isBkr:!1},this.rules[86]={name:"bnum",lower:"bnum",index:86,isBkr:!1},this.rules[87]={name:"xnum",lower:"xnum",index:87,isBkr:!1},this.rules[88]={name:"alphanum",lower:"alphanum",index:88,isBkr:!1},this.rules[89]={name:"owsp",lower:"owsp",index:89,isBkr:!1},this.rules[90]={name:"wsp",lower:"wsp",index:90,isBkr:!1},this.rules[91]={name:"space",lower:"space",index:91,isBkr:!1},this.rules[92]={name:"comment",lower:"comment",index:92,isBkr:!1},this.rules[93]={name:"LineEnd",lower:"lineend",index:93,isBkr:!1},this.rules[94]={name:"LineContinue",lower:"linecontinue",index:94,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:3,min:0,max:1/0},this.rules[0].opcodes[1]={type:1,children:[2,3,4]},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:4,index:2},this.rules[0].opcodes[4]={type:4,index:12},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,5,7]},this.rules[1].opcodes[1]={type:3,min:0,max:1/0},this.rules[1].opcodes[2]={type:1,children:[3,4]},this.rules[1].opcodes[3]={type:6,string:[32]},this.rules[1].opcodes[4]={type:6,string:[9]},this.rules[1].opcodes[5]={type:3,min:0,max:1},this.rules[1].opcodes[6]={type:4,index:92},this.rules[1].opcodes[7]={type:4,index:93},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[2].opcodes[1]={type:4,index:3},this.rules[2].opcodes[2]={type:4,index:89},this.rules[2].opcodes[3]={type:4,index:14},this.rules[2].opcodes[4]={type:1,children:[5,8]},this.rules[2].opcodes[5]={type:2,children:[6,7]},this.rules[2].opcodes[6]={type:4,index:89},this.rules[2].opcodes[7]={type:4,index:93},this.rules[2].opcodes[8]={type:2,children:[9,10]},this.rules[2].opcodes[9]={type:4,index:13},this.rules[2].opcodes[10]={type:4,index:93},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:2,children:[1,2,3]},this.rules[3].opcodes[1]={type:4,index:4},this.rules[3].opcodes[2]={type:4,index:89},this.rules[3].opcodes[3]={type:4,index:7},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:4,index:5},this.rules[4].opcodes[2]={type:4,index:6},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:4,index:88},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:3,min:1,max:1/0},this.rules[6].opcodes[1]={type:1,children:[2,3]},this.rules[6].opcodes[2]={type:5,min:33,max:60},this.rules[6].opcodes[3]={type:5,min:62,max:126},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:1,children:[1,2]},this.rules[7].opcodes[1]={type:4,index:9},this.rules[7].opcodes[2]={type:4,index:8},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:2},this.rules[8].opcodes[1]={type:5,min:33,max:126},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:1,children:[1,2]},this.rules[9].opcodes[1]={type:4,index:11},this.rules[9].opcodes[2]={type:4,index:10},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:6,string:[61]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:6,string:[61,47]},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:2,children:[1,6]},this.rules[12].opcodes[1]={type:3,min:1,max:1/0},this.rules[12].opcodes[2]={type:1,children:[3,4,5]},this.rules[12].opcodes[3]={type:5,min:32,max:126},this.rules[12].opcodes[4]={type:6,string:[9]},this.rules[12].opcodes[5]={type:4,index:94},this.rules[12].opcodes[6]={type:4,index:93},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:3,min:1,max:1/0},this.rules[13].opcodes[1]={type:1,children:[2,3,4]},this.rules[13].opcodes[2]={type:5,min:32,max:126},this.rules[13].opcodes[3]={type:6,string:[9]},this.rules[13].opcodes[4]={type:4,index:94},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:2,children:[1,2]},this.rules[14].opcodes[1]={type:4,index:15},this.rules[14].opcodes[2]={type:3,min:0,max:1/0},this.rules[14].opcodes[3]={type:2,children:[4,5,6]},this.rules[14].opcodes[4]={type:4,index:89},this.rules[14].opcodes[5]={type:4,index:44},this.rules[14].opcodes[6]={type:4,index:15},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:2,children:[1,2]},this.rules[15].opcodes[1]={type:4,index:16},this.rules[15].opcodes[2]={type:3,min:0,max:1/0},this.rules[15].opcodes[3]={type:2,children:[4,5]},this.rules[15].opcodes[4]={type:4,index:45},this.rules[15].opcodes[5]={type:4,index:16},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:2,children:[1,3]},this.rules[16].opcodes[1]={type:3,min:0,max:1},this.rules[16].opcodes[2]={type:4,index:17},this.rules[16].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[16].opcodes[4]={type:4,index:21},this.rules[16].opcodes[5]={type:4,index:25},this.rules[16].opcodes[6]={type:4,index:19},this.rules[16].opcodes[7]={type:4,index:20},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:1,children:[1,5]},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:18},this.rules[17].opcodes[3]={type:3,min:0,max:1},this.rules[17].opcodes[4]={type:4,index:43},this.rules[17].opcodes[5]={type:4,index:43},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[18].opcodes[1]={type:4,index:49},this.rules[18].opcodes[2]={type:4,index:50},this.rules[18].opcodes[3]={type:4,index:47},this.rules[18].opcodes[4]={type:4,index:48},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10]},this.rules[19].opcodes[1]={type:4,index:40},this.rules[19].opcodes[2]={type:4,index:29},this.rules[19].opcodes[3]={type:4,index:53},this.rules[19].opcodes[4]={type:4,index:54},this.rules[19].opcodes[5]={type:4,index:55},this.rules[19].opcodes[6]={type:4,index:61},this.rules[19].opcodes[7]={type:4,index:30},this.rules[19].opcodes[8]={type:4,index:51},this.rules[19].opcodes[9]={type:4,index:52},this.rules[19].opcodes[10]={type:4,index:65},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:3,min:1,max:1/0},this.rules[20].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[20].opcodes[2]={type:5,min:33,max:40},this.rules[20].opcodes[3]={type:5,min:42,max:46},this.rules[20].opcodes[4]={type:5,min:48,max:92},this.rules[20].opcodes[5]={type:5,min:94,max:126},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2,3]},this.rules[21].opcodes[1]={type:4,index:23},this.rules[21].opcodes[2]={type:4,index:14},this.rules[21].opcodes[3]={type:1,children:[4,5]},this.rules[21].opcodes[4]={type:4,index:24},this.rules[21].opcodes[5]={type:4,index:22},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:3,min:1,max:1/0},this.rules[22].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[22].opcodes[2]={type:5,min:33,max:40},this.rules[22].opcodes[3]={type:5,min:42,max:46},this.rules[22].opcodes[4]={type:5,min:48,max:92},this.rules[22].opcodes[5]={type:5,min:94,max:126},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:2,children:[1,2]},this.rules[23].opcodes[1]={type:6,string:[40]},this.rules[23].opcodes[2]={type:4,index:89},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:4,index:89},this.rules[24].opcodes[2]={type:6,string:[41]},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2,3]},this.rules[25].opcodes[1]={type:4,index:27},this.rules[25].opcodes[2]={type:4,index:14},this.rules[25].opcodes[3]={type:1,children:[4,5]},this.rules[25].opcodes[4]={type:4,index:28},this.rules[25].opcodes[5]={type:4,index:26},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:3,min:1,max:1/0},this.rules[26].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[26].opcodes[2]={type:5,min:33,max:40},this.rules[26].opcodes[3]={type:5,min:42,max:46},this.rules[26].opcodes[4]={type:5,min:48,max:92},this.rules[26].opcodes[5]={type:5,min:94,max:126},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:6,string:[91]},this.rules[27].opcodes[2]={type:4,index:89},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:2,children:[1,2]},this.rules[28].opcodes[1]={type:4,index:89},this.rules[28].opcodes[2]={type:6,string:[93]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:4,index:88},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,4]},this.rules[30].opcodes[1]={type:6,string:[92]},this.rules[30].opcodes[2]={type:3,min:0,max:1},this.rules[30].opcodes[3]={type:4,index:31},this.rules[30].opcodes[4]={type:4,index:36},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:1,children:[1,7,13,19]},this.rules[31].opcodes[1]={type:2,children:[2,3]},this.rules[31].opcodes[2]={type:4,index:32},this.rules[31].opcodes[3]={type:3,min:0,max:1},this.rules[31].opcodes[4]={type:1,children:[5,6]},this.rules[31].opcodes[5]={type:4,index:34},this.rules[31].opcodes[6]={type:4,index:35},this.rules[31].opcodes[7]={type:2,children:[8,9]},this.rules[31].opcodes[8]={type:4,index:33},this.rules[31].opcodes[9]={type:3,min:0,max:1},this.rules[31].opcodes[10]={type:1,children:[11,12]},this.rules[31].opcodes[11]={type:4,index:34},this.rules[31].opcodes[12]={type:4,index:35},this.rules[31].opcodes[13]={type:2,children:[14,15]},this.rules[31].opcodes[14]={type:4,index:34},this.rules[31].opcodes[15]={type:3,min:0,max:1},this.rules[31].opcodes[16]={type:1,children:[17,18]},this.rules[31].opcodes[17]={type:4,index:32},this.rules[31].opcodes[18]={type:4,index:33},this.rules[31].opcodes[19]={type:2,children:[20,21]},this.rules[31].opcodes[20]={type:4,index:35},this.rules[31].opcodes[21]={type:3,min:0,max:1},this.rules[31].opcodes[22]={type:1,children:[23,24]},this.rules[31].opcodes[23]={type:4,index:32},this.rules[31].opcodes[24]={type:4,index:33},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:6,string:[37,115]},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:6,string:[37,105]},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:6,string:[37,117]},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:6,string:[37,112]},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:1,children:[1,2,3]},this.rules[36].opcodes[1]={type:4,index:38},this.rules[36].opcodes[2]={type:4,index:39},this.rules[36].opcodes[3]={type:4,index:37},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:4,index:88},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2]},this.rules[38].opcodes[1]={type:6,string:[117,95]},this.rules[38].opcodes[2]={type:4,index:88},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2]},this.rules[39].opcodes[1]={type:6,string:[101,95]},this.rules[39].opcodes[2]={type:4,index:88},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:1,children:[1,2]},this.rules[40].opcodes[1]={type:4,index:42},this.rules[40].opcodes[2]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:2,children:[1,2]},this.rules[41].opcodes[1]={type:6,string:[117,95]},this.rules[41].opcodes[2]={type:4,index:88},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:2,children:[1,2]},this.rules[42].opcodes[1]={type:6,string:[101,95]},this.rules[42].opcodes[2]={type:4,index:88},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,5,8,11,12]},this.rules[43].opcodes[1]={type:2,children:[2,3,4]},this.rules[43].opcodes[2]={type:4,index:69},this.rules[43].opcodes[3]={type:4,index:46},this.rules[43].opcodes[4]={type:4,index:71},this.rules[43].opcodes[5]={type:2,children:[6,7]},this.rules[43].opcodes[6]={type:4,index:69},this.rules[43].opcodes[7]={type:4,index:46},this.rules[43].opcodes[8]={type:2,children:[9,10]},this.rules[43].opcodes[9]={type:4,index:46},this.rules[43].opcodes[10]={type:4,index:71},this.rules[43].opcodes[11]={type:4,index:46},this.rules[43].opcodes[12]={type:4,index:70},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:2,children:[1,2]},this.rules[44].opcodes[1]={type:6,string:[47]},this.rules[44].opcodes[2]={type:4,index:89},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:4,index:90},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:6,string:[42]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:6,string:[38]},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:6,string:[33]},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:6,string:[38,38]},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:6,string:[33,33]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:6,string:[37,94]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:6,string:[37,36]},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:2,children:[1,2]},this.rules[53].opcodes[1]={type:6,string:[37]},this.rules[53].opcodes[2]={type:1,children:[3,8,13]},this.rules[53].opcodes[3]={type:2,children:[4,5,6,7]},this.rules[53].opcodes[4]={type:4,index:76},this.rules[53].opcodes[5]={type:4,index:79},this.rules[53].opcodes[6]={type:6,string:[45]},this.rules[53].opcodes[7]={type:4,index:80},this.rules[53].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[53].opcodes[9]={type:4,index:77},this.rules[53].opcodes[10]={type:4,index:83},this.rules[53].opcodes[11]={type:6,string:[45]},this.rules[53].opcodes[12]={type:4,index:84},this.rules[53].opcodes[13]={type:2,children:[14,15,16,17]},this.rules[53].opcodes[14]={type:4,index:78},this.rules[53].opcodes[15]={type:4,index:81},this.rules[53].opcodes[16]={type:6,string:[45]},this.rules[53].opcodes[17]={type:4,index:82},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:2,children:[1,2]},this.rules[54].opcodes[1]={type:6,string:[37]},this.rules[54].opcodes[2]={type:1,children:[3,10,17]},this.rules[54].opcodes[3]={type:2,children:[4,5,6]},this.rules[54].opcodes[4]={type:4,index:76},this.rules[54].opcodes[5]={type:4,index:73},this.rules[54].opcodes[6]={type:3,min:0,max:1/0},this.rules[54].opcodes[7]={type:2,children:[8,9]},this.rules[54].opcodes[8]={type:6,string:[46]},this.rules[54].opcodes[9]={type:4,index:73},this.rules[54].opcodes[10]={type:2,children:[11,12,13]},this.rules[54].opcodes[11]={type:4,index:77},this.rules[54].opcodes[12]={type:4,index:74},this.rules[54].opcodes[13]={type:3,min:0,max:1/0},this.rules[54].opcodes[14]={type:2,children:[15,16]},this.rules[54].opcodes[15]={type:6,string:[46]},this.rules[54].opcodes[16]={type:4,index:74},this.rules[54].opcodes[17]={type:2,children:[18,19,20]},this.rules[54].opcodes[18]={type:4,index:78},this.rules[54].opcodes[19]={type:4,index:75},this.rules[54].opcodes[20]={type:3,min:0,max:1/0},this.rules[54].opcodes[21]={type:2,children:[22,23]},this.rules[54].opcodes[22]={type:6,string:[46]},this.rules[54].opcodes[23]={type:4,index:75},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[55].opcodes[1]={type:4,index:56},this.rules[55].opcodes[2]={type:4,index:57},this.rules[55].opcodes[3]={type:4,index:59},this.rules[55].opcodes[4]={type:4,index:58},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1},this.rules[56].opcodes[1]={type:1,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[37,105]},this.rules[56].opcodes[3]={type:7,string:[37,115]},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:6,string:[34]},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:6,string:[34]},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:3,min:0,max:1/0},this.rules[59].opcodes[1]={type:1,children:[2,3,4]},this.rules[59].opcodes[2]={type:5,min:32,max:33},this.rules[59].opcodes[3]={type:5,min:35,max:126},this.rules[59].opcodes[4]={type:4,index:60},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:6,string:[9]},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:2,children:[1,2,3]},this.rules[61].opcodes[1]={type:4,index:62},this.rules[61].opcodes[2]={type:4,index:64},this.rules[61].opcodes[3]={type:4,index:63},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:6,string:[39]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:6,string:[39]},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:0,max:1/0},this.rules[64].opcodes[1]={type:1,children:[2,3,4]},this.rules[64].opcodes[2]={type:5,min:32,max:38},this.rules[64].opcodes[3]={type:5,min:40,max:126},this.rules[64].opcodes[4]={type:4,index:60},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:2,children:[1,2,3]},this.rules[65].opcodes[1]={type:4,index:66},this.rules[65].opcodes[2]={type:4,index:67},this.rules[65].opcodes[3]={type:4,index:68},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:6,string:[60]},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:0,max:1/0},this.rules[67].opcodes[1]={type:1,children:[2,3,4]},this.rules[67].opcodes[2]={type:5,min:32,max:61},this.rules[67].opcodes[3]={type:5,min:63,max:126},this.rules[67].opcodes[4]={type:4,index:60},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:6,string:[62]},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:4,index:72},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:4,index:72},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:4,index:72},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:3,min:1,max:1/0},this.rules[72].opcodes[1]={type:5,min:48,max:57},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:4,index:85},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:4,index:87},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:4,index:86},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:1,children:[1,2]},this.rules[76].opcodes[1]={type:6,string:[68]},this.rules[76].opcodes[2]={type:6,string:[100]},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:6,string:[88]},this.rules[77].opcodes[2]={type:6,string:[120]},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:1,children:[1,2]},this.rules[78].opcodes[1]={type:6,string:[66]},this.rules[78].opcodes[2]={type:6,string:[98]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:4,index:85},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:4,index:85},this.rules[81].opcodes=[],this.rules[81].opcodes[0]={type:4,index:86},this.rules[82].opcodes=[],this.rules[82].opcodes[0]={type:4,index:86},this.rules[83].opcodes=[],this.rules[83].opcodes[0]={type:4,index:87},this.rules[84].opcodes=[],this.rules[84].opcodes[0]={type:4,index:87},this.rules[85].opcodes=[],this.rules[85].opcodes[0]={type:3,min:1,max:1/0},this.rules[85].opcodes[1]={type:5,min:48,max:57},this.rules[86].opcodes=[],this.rules[86].opcodes[0]={type:3,min:1,max:1/0},this.rules[86].opcodes[1]={type:5,min:48,max:49},this.rules[87].opcodes=[],this.rules[87].opcodes[0]={type:3,min:1,max:1/0},this.rules[87].opcodes[1]={type:1,children:[2,3,4]},this.rules[87].opcodes[2]={type:5,min:48,max:57},this.rules[87].opcodes[3]={type:5,min:65,max:70},this.rules[87].opcodes[4]={type:5,min:97,max:102},this.rules[88].opcodes=[],this.rules[88].opcodes[0]={type:2,children:[1,4]},this.rules[88].opcodes[1]={type:1,children:[2,3]},this.rules[88].opcodes[2]={type:5,min:97,max:122},this.rules[88].opcodes[3]={type:5,min:65,max:90},this.rules[88].opcodes[4]={type:3,min:0,max:1/0},this.rules[88].opcodes[5]={type:1,children:[6,7,8,9]},this.rules[88].opcodes[6]={type:5,min:97,max:122},this.rules[88].opcodes[7]={type:5,min:65,max:90},this.rules[88].opcodes[8]={type:5,min:48,max:57},this.rules[88].opcodes[9]={type:6,string:[45]},this.rules[89].opcodes=[],this.rules[89].opcodes[0]={type:3,min:0,max:1/0},this.rules[89].opcodes[1]={type:4,index:91},this.rules[90].opcodes=[],this.rules[90].opcodes[0]={type:3,min:1,max:1/0},this.rules[90].opcodes[1]={type:4,index:91},this.rules[91].opcodes=[],this.rules[91].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[91].opcodes[1]={type:6,string:[32]},this.rules[91].opcodes[2]={type:6,string:[9]},this.rules[91].opcodes[3]={type:4,index:92},this.rules[91].opcodes[4]={type:4,index:94},this.rules[92].opcodes=[],this.rules[92].opcodes[0]={type:2,children:[1,2]},this.rules[92].opcodes[1]={type:6,string:[59]},this.rules[92].opcodes[2]={type:3,min:0,max:1/0},this.rules[92].opcodes[3]={type:1,children:[4,5]},this.rules[92].opcodes[4]={type:5,min:32,max:126},this.rules[92].opcodes[5]={type:6,string:[9]},this.rules[93].opcodes=[],this.rules[93].opcodes[0]={type:1,children:[1,2,3]},this.rules[93].opcodes[1]={type:6,string:[13,10]},this.rules[93].opcodes[2]={type:6,string:[10]},this.rules[93].opcodes[3]={type:6,string:[13]},this.rules[94].opcodes=[],this.rules[94].opcodes[0]={type:2,children:[1,5]},this.rules[94].opcodes[1]={type:1,children:[2,3,4]},this.rules[94].opcodes[2]={type:6,string:[13,10]},this.rules[94].opcodes[3]={type:6,string:[10]},this.rules[94].opcodes[4]={type:6,string:[13]},this.rules[94].opcodes[5]={type:1,children:[6,7]},this.rules[94].opcodes[6]={type:6,string:[32]},this.rules[94].opcodes[7]={type:6,string:[9]},this.toString=function(){let dr="";return dr+=`;
`,dr+=`; ABNF for JavaScript APG 2.0 SABNF
`,dr+=`; RFC 5234 with some restrictions and additions.
`,dr+=`; Updated 11/24/2015 for RFC 7405 case-sensitive literal string notation
`,dr+=`;  - accepts %s"string" as a case-sensitive string
`,dr+=`;  - accepts %i"string" as a case-insensitive string
`,dr+=`;  - accepts "string" as a case-insensitive string
`,dr+=`;
`,dr+=`; Some restrictions:
`,dr+=`;   1. Rules must begin at first character of each line.
`,dr+=`;      Indentations on first rule and rules thereafter are not allowed.
`,dr+=`;   2. Relaxed line endings. CRLF, LF or CR are accepted as valid line ending.
`,dr+=`;   3. Prose values, i.e. <prose value>, are accepted as valid grammar syntax.
`,dr+=`;      However, a working parser cannot be generated from them.
`,dr+=`;
`,dr+=`; Super set (SABNF) additions:
`,dr+=`;   1. Look-ahead (syntactic predicate) operators are accepted as element prefixes.
`,dr+=`;      & is the positive look-ahead operator, succeeds and backtracks if the look-ahead phrase is found
`,dr+=`;      ! is the negative look-ahead operator, succeeds and backtracks if the look-ahead phrase is NOT found
`,dr+=`;      e.g. &%d13 or &rule or !(A / B)
`,dr+=`;   2. User-Defined Terminals (UDT) of the form, u_name and e_name are accepted.
`,dr+=`;      'name' is alpha followed by alpha/num/hyphen just like a rule name.
`,dr+=`;      u_name may be used as an element but no rule definition is given.
`,dr+=`;      e.g. rule = A / u_myUdt
`,dr+=`;           A = "a"
`,dr+=`;      would be a valid grammar.
`,dr+=`;   3. Case-sensitive, single-quoted strings are accepted.
`,dr+=`;      e.g. 'abc' would be equivalent to %d97.98.99
`,dr+=`;      (kept for backward compatibility, but superseded by %s"abc")  
`,dr+=`; New 12/26/2015
`,dr+=`;   4. Look-behind operators are accepted as element prefixes.
`,dr+=`;      && is the positive look-behind operator, succeeds and backtracks if the look-behind phrase is found
`,dr+=`;      !! is the negative look-behind operator, succeeds and backtracks if the look-behind phrase is NOT found
`,dr+=`;      e.g. &&%d13 or &&rule or !!(A / B)
`,dr+=`;   5. Back reference operators, i.e. \\rulename, are accepted.
`,dr+=`;      A back reference operator acts like a TLS or TBS terminal except that the phrase it attempts
`,dr+=`;      to match is a phrase previously matched by the rule 'rulename'.
`,dr+=`;      There are two modes of previous phrase matching - the parent-frame mode and the universal mode.
`,dr+=`;      In universal mode, \\rulename matches the last match to 'rulename' regardless of where it was found.
`,dr+=`;      In parent-frame mode, \\rulename matches only the last match found on the parent's frame or parse tree level.
`,dr+=`;      Back reference modifiers can be used to specify case and mode.
`,dr+=`;      \\A defaults to case-insensitive and universal mode, e.g. \\A === \\%i%uA
`,dr+=`;      Modifiers %i and %s determine case-insensitive and case-sensitive mode, respectively.
`,dr+=`;      Modifiers %u and %p determine universal mode and parent frame mode, respectively.
`,dr+=`;      Case and mode modifiers can appear in any order, e.g. \\%s%pA === \\%p%sA. 
`,dr+=`;   7. String begin anchor, ABG(%^) matches the beginning of the input string location.
`,dr+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,dr+=`;   8. String end anchor, AEN(%$) matches the end of the input string location.
`,dr+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,dr+=`;
`,dr+=`File            = *(BlankLine / Rule / RuleError)
`,dr+=`BlankLine       = *(%d32/%d9) [comment] LineEnd
`,dr+=`Rule            = RuleLookup owsp Alternation ((owsp LineEnd)
`,dr+=`                / (LineEndError LineEnd))
`,dr+=`RuleLookup      = RuleNameTest owsp DefinedAsTest
`,dr+=`RuleNameTest    = RuleName/RuleNameError
`,dr+=`RuleName        = alphanum
`,dr+=`RuleNameError   = 1*(%d33-60/%d62-126)
`,dr+=`DefinedAsTest   = DefinedAs / DefinedAsError
`,dr+=`DefinedAsError  = 1*2%d33-126
`,dr+=`DefinedAs       = IncAlt / Defined
`,dr+=`Defined         = %d61
`,dr+=`IncAlt          = %d61.47
`,dr+=`RuleError       = 1*(%d32-126 / %d9  / LineContinue) LineEnd
`,dr+=`LineEndError    = 1*(%d32-126 / %d9  / LineContinue)
`,dr+=`Alternation     = Concatenation *(owsp AltOp Concatenation)
`,dr+=`Concatenation   = Repetition *(CatOp Repetition)
`,dr+=`Repetition      = [Modifier] (Group / Option / BasicElement / BasicElementErr)
`,dr+=`Modifier        = (Predicate [RepOp])
`,dr+=`                / RepOp
`,dr+=`Predicate       = BkaOp
`,dr+=`                / BknOp
`,dr+=`                / AndOp
`,dr+=`                / NotOp
`,dr+=`BasicElement    = UdtOp
`,dr+=`                / RnmOp
`,dr+=`                / TrgOp
`,dr+=`                / TbsOp
`,dr+=`                / TlsOp
`,dr+=`                / ClsOp
`,dr+=`                / BkrOp
`,dr+=`                / AbgOp
`,dr+=`                / AenOp
`,dr+=`                / ProsVal
`,dr+=`BasicElementErr = 1*(%d33-40/%d42-46/%d48-92/%d94-126)
`,dr+=`Group           = GroupOpen  Alternation (GroupClose / GroupError)
`,dr+=`GroupError      = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,dr+=`GroupOpen       = %d40 owsp
`,dr+=`GroupClose      = owsp %d41
`,dr+=`Option          = OptionOpen Alternation (OptionClose / OptionError)
`,dr+=`OptionError     = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,dr+=`OptionOpen      = %d91 owsp
`,dr+=`OptionClose     = owsp %d93
`,dr+=`RnmOp           = alphanum
`,dr+=`BkrOp           = %d92 [bkrModifier] bkr-name
`,dr+=`bkrModifier     = (cs [um / pm]) / (ci [um / pm]) / (um [cs /ci]) / (pm [cs / ci])
`,dr+=`cs              = '%s'
`,dr+=`ci              = '%i'
`,dr+=`um              = '%u'
`,dr+=`pm              = '%p'
`,dr+=`bkr-name        = uname / ename / rname
`,dr+=`rname           = alphanum
`,dr+=`uname           = %d117.95 alphanum
`,dr+=`ename           = %d101.95 alphanum
`,dr+=`UdtOp           = udt-empty
`,dr+=`                / udt-non-empty
`,dr+=`udt-non-empty   = %d117.95 alphanum
`,dr+=`udt-empty       = %d101.95 alphanum
`,dr+=`RepOp           = (rep-min StarOp rep-max)
`,dr+=`                / (rep-min StarOp)
`,dr+=`                / (StarOp rep-max)
`,dr+=`                / StarOp
`,dr+=`                / rep-min-max
`,dr+=`AltOp           = %d47 owsp
`,dr+=`CatOp           = wsp
`,dr+=`StarOp          = %d42
`,dr+=`AndOp           = %d38
`,dr+=`NotOp           = %d33
`,dr+=`BkaOp           = %d38.38
`,dr+=`BknOp           = %d33.33
`,dr+=`AbgOp           = %d37.94
`,dr+=`AenOp           = %d37.36
`,dr+=`TrgOp           = %d37 ((Dec dmin %d45 dmax) / (Hex xmin %d45 xmax) / (Bin bmin %d45 bmax))
`,dr+=`TbsOp           = %d37 ((Dec dString *(%d46 dString)) / (Hex xString *(%d46 xString)) / (Bin bString *(%d46 bString)))
`,dr+=`TlsOp           = TlsCase TlsOpen TlsString TlsClose
`,dr+=`TlsCase         = ["%i" / "%s"]
`,dr+=`TlsOpen         = %d34
`,dr+=`TlsClose        = %d34
`,dr+=`TlsString       = *(%d32-33/%d35-126/StringTab)
`,dr+=`StringTab       = %d9
`,dr+=`ClsOp           = ClsOpen ClsString ClsClose
`,dr+=`ClsOpen         = %d39
`,dr+=`ClsClose        = %d39
`,dr+=`ClsString       = *(%d32-38/%d40-126/StringTab)
`,dr+=`ProsVal         = ProsValOpen ProsValString ProsValClose
`,dr+=`ProsValOpen     = %d60
`,dr+=`ProsValString   = *(%d32-61/%d63-126/StringTab)
`,dr+=`ProsValClose    = %d62
`,dr+=`rep-min         = rep-num
`,dr+=`rep-min-max     = rep-num
`,dr+=`rep-max         = rep-num
`,dr+=`rep-num         = 1*(%d48-57)
`,dr+=`dString         = dnum
`,dr+=`xString         = xnum
`,dr+=`bString         = bnum
`,dr+=`Dec             = (%d68/%d100)
`,dr+=`Hex             = (%d88/%d120)
`,dr+=`Bin             = (%d66/%d98)
`,dr+=`dmin            = dnum
`,dr+=`dmax            = dnum
`,dr+=`bmin            = bnum
`,dr+=`bmax            = bnum
`,dr+=`xmin            = xnum
`,dr+=`xmax            = xnum
`,dr+=`dnum            = 1*(%d48-57)
`,dr+=`bnum            = 1*%d48-49
`,dr+=`xnum            = 1*(%d48-57 / %d65-70 / %d97-102)
`,dr+=`;
`,dr+=`; Basics
`,dr+=`alphanum        = (%d97-122/%d65-90) *(%d97-122/%d65-90/%d48-57/%d45)
`,dr+=`owsp            = *space
`,dr+=`wsp             = 1*space
`,dr+=`space           = %d32
`,dr+=`                / %d9
`,dr+=`                / comment
`,dr+=`                / LineContinue
`,dr+=`comment         = %d59 *(%d32-126 / %d9)
`,dr+=`LineEnd         = %d13.10
`,dr+=`                / %d10
`,dr+=`                / %d13
`,dr+=`LineContinue    = (%d13.10 / %d10 / %d13) (%d32 / %d9)
`,dr}}),sabnfGrammar}var parser$2,hasRequiredParser;function requireParser(){return hasRequiredParser||(hasRequiredParser=1,parser$2=function(){const ar="parser: ",dr=nodeExports,fr=dr.ids,hr=new(requireSyntaxCallbacks()),pr=new(requireSemanticCallbacks()),mr=new(requireSabnfGrammar()),gr=new dr.parser;gr.ast=new dr.ast,gr.callbacks=hr.callbacks,gr.ast.callbacks=pr.callbacks;const yr=function(Sr,vr,Er){if(vr<0||vr>=Er)return-1;for(let Ar=0;Ar<Sr.length;Ar+=1)if(vr>=Sr[Ar].beginChar&&vr<Sr[Ar].beginChar+Sr[Ar].length)return Ar;return-1},xr=function(Sr,vr){let Er=-1;if(vr<Sr.length){for(let Ar=vr;Ar<Sr.length;Ar+=1)if(Sr[Ar]!==null){Er=Sr[Ar];break}}return Er},wr=function(Sr){Sr.forEach(vr=>{const Er=[],Ar=[];let _r=0;vr.opcodes.forEach(Cr=>{Cr.type===fr.ALT&&Cr.children.length===1||Cr.type===fr.CAT&&Cr.children.length===1||Cr.type===fr.REP&&Cr.min===1&&Cr.max===1?Ar.push(null):(Ar.push(_r),Er.push(Cr),_r+=1)}),Ar.push(_r),Er.forEach(Cr=>{if(Cr.type===fr.ALT||Cr.type===fr.CAT)for(let kr=0;kr<Cr.children.length;kr+=1)Cr.children[kr]=xr(Ar,Cr.children[kr])}),vr.opcodes=Er})};this.syntax=function(Sr,vr,Er,Ar,_r,Cr){if(Cr){if(Cr.traceObject!=="traceObject")throw new TypeError(`${ar}trace argument is not a trace object`);gr.trace=Cr}const kr={};kr.errors=Er,kr.strict=!!Ar,kr.lite=!!_r,kr.lines=vr,kr.findLine=yr,kr.charsLength=Sr.length,kr.ruleCount=0,gr.parse(mr,"file",Sr,kr).success||Er.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(Sr,vr,Er){const Ar={};return Ar.errors=Er,Ar.lines=vr,Ar.findLine=yr,Ar.charsLength=Sr.length,gr.ast.translate(Ar),Er.length?null:(wr(Ar.rules),{rules:Ar.rules,udts:Ar.udts,lineMap:Ar.rulesLineMap})},this.generateSource=function(Sr,vr,Er,Ar,_r,Cr){let kr="",Rr,Ir,Nr,Pr=0,Tr=1/0,Br=0;const Fr=[],jr=[];let Ur=0,qr=0,Hr=0,Or=0,Mr=0,Lr=0,Vr=0,Jr=0,es=0,ns=0,Qr=0,zr=0,Wr=0,ss=0,Xr=0;Er.forEach(fs=>{Fr.push(fs.lower),Pr+=fs.opcodes.length,fs.opcodes.forEach(rs=>{switch(rs.type){case fr.ALT:Ur+=1;break;case fr.CAT:qr+=1;break;case fr.RNM:Hr+=1;break;case fr.UDT:Or+=1;break;case fr.REP:Mr+=1;break;case fr.AND:Lr+=1;break;case fr.NOT:Vr+=1;break;case fr.BKA:zr+=1;break;case fr.BKN:Wr+=1;break;case fr.BKR:Qr+=1;break;case fr.ABG:ss+=1;break;case fr.AEN:Xr+=1;break;case fr.TLS:for(Jr+=1,Rr=0;Rr<rs.string.length;Rr+=1)rs.string[Rr]<Tr&&(Tr=rs.string[Rr]),rs.string[Rr]>Br&&(Br=rs.string[Rr]);break;case fr.TBS:for(es+=1,Rr=0;Rr<rs.string.length;Rr+=1)rs.string[Rr]<Tr&&(Tr=rs.string[Rr]),rs.string[Rr]>Br&&(Br=rs.string[Rr]);break;case fr.TRG:ns+=1,rs.min<Tr&&(Tr=rs.min),rs.max>Br&&(Br=rs.max);break;default:throw new Error("generateSource: unrecognized opcode")}})}),Fr.sort(),Ar.length>0&&(Ar.forEach(fs=>{jr.push(fs.lower)}),jr.sort()),kr+=`// copyright: Copyright (c) 2023 Lowell D. Thomas, all rights reserved<br>
`,kr+=`//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>
`,kr+=`//
`,kr+=`// Generated by apg-js, Version 4.3.0 [apg-js](https://github.com/ldthomas/apg-js)
`,Cr&&typeof Cr=="string"?kr+=`const ${Cr} = function grammar(){
`:_r?kr+=`export default function grammar(){
`:kr+=`module.exports = function grammar(){
`,kr+="  // ```\n",kr+=`  // SUMMARY
`,kr+=`  //      rules = ${Er.length}
`,kr+=`  //       udts = ${Ar.length}
`,kr+=`  //    opcodes = ${Pr}
`,kr+=`  //        ---   ABNF original opcodes
`,kr+=`  //        ALT = ${Ur}
`,kr+=`  //        CAT = ${qr}
`,kr+=`  //        REP = ${Mr}
`,kr+=`  //        RNM = ${Hr}
`,kr+=`  //        TLS = ${Jr}
`,kr+=`  //        TBS = ${es}
`,kr+=`  //        TRG = ${ns}
`,kr+=`  //        ---   SABNF superset opcodes
`,kr+=`  //        UDT = ${Or}
`,kr+=`  //        AND = ${Lr}
`,kr+=`  //        NOT = ${Vr}
`,_r||(kr+=`  //        BKA = ${zr}
`,kr+=`  //        BKN = ${Wr}
`,kr+=`  //        BKR = ${Qr}
`,kr+=`  //        ABG = ${ss}
`,kr+=`  //        AEN = ${Xr}
`),kr+="  // characters = [",Jr+es+ns===0?kr+=" none defined ]":kr+=`${Tr} - ${Br}]`,Or>0&&(kr+=" + user defined"),kr+=`
`,kr+="  // ```\n",_r||(kr+=`  /* OBJECT IDENTIFIER (for internal parser use) */
`,kr+=`  this.grammarObject = 'grammarObject';
`),kr+=`
`,kr+=`  /* RULES */
`,kr+=`  this.rules = [];
`,Er.forEach((fs,rs)=>{let as="  this.rules[";as+=rs,as+="] = {name: '",as+=fs.name,as+="', lower: '",as+=fs.lower,as+="', index: ",as+=fs.index,as+=", isBkr: ",as+=fs.isBkr,as+=`};
`,kr+=as}),kr+=`
`,kr+=`  /* UDTS */
`,kr+=`  this.udts = [];
`,Ar.length>0&&Ar.forEach((fs,rs)=>{let as="  this.udts[";as+=rs,as+="] = {name: '",as+=fs.name,as+="', lower: '",as+=fs.lower,as+="', index: ",as+=fs.index,as+=", empty: ",as+=fs.empty,as+=", isBkr: ",as+=fs.isBkr,as+=`};
`,kr+=as}),kr+=`
`,kr+=`  /* OPCODES */
`,Er.forEach((fs,rs)=>{rs>0&&(kr+=`
`),kr+=`  /* ${fs.name} */
`,kr+=`  this.rules[${rs}].opcodes = [];
`,fs.opcodes.forEach((as,ps)=>{let xs;switch(as.type){case fr.ALT:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}, children: [${as.children.toString()}]};// ALT
`;break;case fr.CAT:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}, children: [${as.children.toString()}]};// CAT
`;break;case fr.RNM:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}, index: ${as.index}};// RNM(${Er[as.index].name})
`;break;case fr.BKR:as.index>=Er.length?(Ir=Ar[as.index-Er.length].name,Nr=Ar[as.index-Er.length].lower):(Ir=Er[as.index].name,Nr=Er[as.index].lower),xs="%i",as.bkrCase===fr.BKR_MODE_CS&&(xs="%s"),as.bkrMode===fr.BKR_MODE_UM?xs+="%u":xs+="%p",Ir=xs+Ir,kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}, index: ${as.index}, lower: '${Nr}', bkrCase: ${as.bkrCase}, bkrMode: ${as.bkrMode}};// BKR(\\${Ir})
`;break;case fr.UDT:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}, empty: ${as.empty}, index: ${as.index}};// UDT(${Ar[as.index].name})
`;break;case fr.REP:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}, min: ${as.min}, max: ${as.max}};// REP
`;break;case fr.AND:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}};// AND
`;break;case fr.NOT:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}};// NOT
`;break;case fr.ABG:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}};// ABG(%^)
`;break;case fr.AEN:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}};// AEN(%$)
`;break;case fr.BKA:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}};// BKA
`;break;case fr.BKN:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}};// BKN
`;break;case fr.TLS:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}, string: [${as.string.toString()}]};// TLS
`;break;case fr.TBS:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}, string: [${as.string.toString()}]};// TBS
`;break;case fr.TRG:kr+=`  this.rules[${rs}].opcodes[${ps}] = {type: ${as.type}, min: ${as.min}, max: ${as.max}};// TRG
`;break;default:throw new Error("parser.js: ~143: unrecognized opcode")}})}),kr+=`
`,kr+="  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n",kr+=`  this.toString = function toString(){
`,kr+=`    let str = "";
`;let ts;return vr.forEach(fs=>{const rs=fs.beginChar+fs.length;ts="",kr+='    str += "';for(let as=fs.beginChar;as<rs;as+=1){switch(Sr[as]){case 9:ts=" ";break;case 10:ts="\\n";break;case 13:ts="\\r";break;case 34:ts='\\"';break;case 92:ts="\\\\";break;default:ts=String.fromCharCode(Sr[as]);break}kr+=ts}kr+=`";
`}),kr+=`    return str;
`,kr+=`  }
`,kr+=`}
`,kr},this.generateObject=function(Sr,vr,Er){const Ar={},_r=[],Cr=[],kr=Sr.slice(0);return Ar.grammarObject="grammarObject",vr.forEach(Rr=>{_r.push(Rr.lower)}),_r.sort(),Er.length>0&&(Er.forEach(Rr=>{Cr.push(Rr.lower)}),Cr.sort()),Ar.callbacks=[],_r.forEach(Rr=>{Ar.callbacks[Rr]=!1}),Er.length>0&&Cr.forEach(Rr=>{Ar.callbacks[Rr]=!1}),Ar.rules=vr,Ar.udts=Er,Ar.toString=function(){return kr},Ar}}),parser$2}var ruleAttributes,hasRequiredRuleAttributes;function requireRuleAttributes(){return hasRequiredRuleAttributes||(hasRequiredRuleAttributes=1,ruleAttributes=function(){const ar=identifiers,dr="rule-attributes.js";let fr=null;function hr(jr){return jr.left||jr.nested||jr.right||jr.cyclic?!1:jr.empty}function pr(jr){return!!(jr.left||jr.nested||jr.right||jr.cyclic)}function mr(jr,Ur){let qr=0,Hr=0,Or=0;for(qr=0;qr<Ur;qr+=1)if(jr[qr].nested)return!0;for(qr=0;qr<Ur;qr+=1)if(jr[qr].right&&!jr[qr].leaf){for(Hr=qr+1;Hr<Ur;Hr+=1)if(!hr(jr[Hr]))return!0}for(qr=Ur-1;qr>=0;qr-=1)if(jr[qr].left&&!jr[qr].leaf){for(Hr=qr-1;Hr>=0;Hr-=1)if(!hr(jr[Hr]))return!0}for(qr=0;qr<Ur;qr+=1)if(!jr[qr].empty&&!pr(jr[qr])){for(Hr=qr+1;Hr<Ur;Hr+=1)if(pr(jr[Hr])){for(Or=Hr+1;Or<Ur;Or+=1)if(!jr[Or].empty&&!pr(jr[Or]))return!0}}return!1}function gr(jr,Ur){for(let qr=0;qr<Ur;qr+=1)if(!jr[qr].cyclic)return!1;return!0}function yr(jr,Ur){for(let qr=0;qr<Ur;qr+=1){if(jr[qr].left)return!0;if(!jr[qr].empty)return!1}return!1}function xr(jr,Ur){for(let qr=Ur-1;qr>=0;qr-=1){if(jr[qr].right)return!0;if(!jr[qr].empty)return!1}return!1}function wr(jr,Ur){for(let qr=0;qr<Ur;qr+=1)if(!jr[qr].empty)return!1;return!0}function br(jr,Ur){for(let qr=0;qr<Ur;qr+=1)if(!jr[qr].finite)return!1;return!0}function Sr(jr,Ur,qr,Hr){let Or=0;const Mr=Ur[qr],Lr=Mr.children.length,Vr=[];for(Or=0;Or<Lr;Or+=1)Vr.push(jr.attrGen());for(Or=0;Or<Lr;Or+=1)Ar(jr,Ur,Mr.children[Or],Vr[Or]);Hr.left=yr(Vr,Lr),Hr.right=xr(Vr,Lr),Hr.nested=mr(Vr,Lr),Hr.empty=wr(Vr,Lr),Hr.finite=br(Vr,Lr),Hr.cyclic=gr(Vr,Lr)}function vr(jr,Ur,qr,Hr){let Or=0;const Mr=Ur[qr],Lr=Mr.children.length,Vr=[];for(Or=0;Or<Lr;Or+=1)Vr.push(jr.attrGen());for(Or=0;Or<Lr;Or+=1)Ar(jr,Ur,Mr.children[Or],Vr[Or]);for(Hr.left=!1,Hr.right=!1,Hr.nested=!1,Hr.empty=!1,Hr.finite=!1,Hr.cyclic=!1,Or=0;Or<Lr;Or+=1)Vr[Or].left&&(Hr.left=!0),Vr[Or].nested&&(Hr.nested=!0),Vr[Or].right&&(Hr.right=!0),Vr[Or].empty&&(Hr.empty=!0),Vr[Or].finite&&(Hr.finite=!0),Vr[Or].cyclic&&(Hr.cyclic=!0)}function Er(jr,Ur,qr,Hr){const Or=Ur[qr];Or.index>=jr.ruleCount?(Hr.empty=jr.udts[Or.index-jr.ruleCount].empty,Hr.finite=!0):(_r(jr,Or.index,Hr),Hr.left=!1,Hr.nested=!1,Hr.right=!1,Hr.cyclic=!1)}function Ar(jr,Ur,qr,Hr){jr.attrInit(Hr);const Or=Ur[qr];switch(Or.type){case ar.ALT:vr(jr,Ur,qr,Hr);break;case ar.CAT:Sr(jr,Ur,qr,Hr);break;case ar.REP:Ar(jr,Ur,qr+1,Hr),Or.min===0&&(Hr.empty=!0,Hr.finite=!0);break;case ar.RNM:_r(jr,Ur[qr].index,Hr);break;case ar.BKR:Er(jr,Ur,qr,Hr);break;case ar.AND:case ar.NOT:case ar.BKA:case ar.BKN:Ar(jr,Ur,qr+1,Hr),Hr.empty=!0;break;case ar.TLS:Hr.empty=!Ur[qr].string.length,Hr.finite=!0,Hr.cyclic=!1;break;case ar.TBS:case ar.TRG:Hr.empty=!1,Hr.finite=!0,Hr.cyclic=!1;break;case ar.UDT:Hr.empty=Or.empty,Hr.finite=!0,Hr.cyclic=!1;break;case ar.ABG:case ar.AEN:Hr.empty=!0,Hr.finite=!0,Hr.cyclic=!1;break;default:throw new Error(`unknown opcode type: ${Or}`)}}function _r(jr,Ur,qr){const Hr=jr.attrsWorking[Ur];Hr.isComplete?jr.attrCopy(qr,Hr):Hr.isOpen?Ur===jr.startRule?Ur===jr.startRule&&(qr.left=!0,qr.right=!0,qr.cyclic=!0,qr.leaf=!0):qr.finite=!0:(Hr.isOpen=!0,Ar(jr,Hr.rule.opcodes,0,qr),Hr.left=qr.left,Hr.right=qr.right,Hr.nested=qr.nested,Hr.empty=qr.empty,Hr.finite=qr.finite,Hr.cyclic=qr.cyclic,Hr.leaf=!1,Hr.isOpen=!1,Hr.isComplete=!0)}const Cr=jr=>{fr=jr;let Ur=0,qr=0;const Hr=fr.attrGen();for(Ur=0;Ur<fr.ruleCount;Ur+=1){for(qr=0;qr<fr.ruleCount;qr+=1)fr.attrInit(fr.attrsWorking[qr]);fr.startRule=Ur,_r(fr,Ur,Hr),fr.attrCopy(fr.attrs[Ur],fr.attrsWorking[Ur])}fr.attributesComplete=!0;let Or=null;for(Ur=0;Ur<fr.ruleCount;Ur+=1)if(Or=fr.attrs[Ur],Or.left||!Or.finite||Or.cyclic){const Mr=fr.attrGen(Or.rule);fr.attrCopy(Mr,Or),fr.attrsErrors.push(Mr),fr.attrsErrorCount+=1}},kr=jr=>jr?"t":"f",Rr=jr=>jr?"e":"f",Ir=jr=>jr?"t":"e",Nr=(jr,Ur,qr,Hr)=>{let Or=`${jr}:${Ur}:`;return Or+=`${Rr(qr.left)} `,Or+=`${kr(qr.nested)} `,Or+=`${kr(qr.right)} `,Or+=`${Rr(qr.cyclic)} `,Or+=`${Ir(qr.finite)} `,Or+=`${kr(qr.empty)}:`,Or+=`${fr.typeToString(Hr.recursiveType)}:`,Or+=Hr.recursiveType===ar.ATTR_MR?Hr.groupNumber:"-",Or+=`:${qr.rule.name}
`,Or},Pr=()=>{let jr=`LEGEND - t=true, f=false, e=error
`;return jr+=`sequence:rule index:left nested right cyclic finite empty:type:group number:rule name
`,jr},Tr=()=>{let jr=null,Ur=null,qr="";if(qr+=`RULE ATTRIBUTES WITH ERRORS
`,qr+=Pr(),fr.attrsErrorCount)for(let Hr=0;Hr<fr.attrsErrorCount;Hr+=1)jr=fr.attrsErrors[Hr],Ur=fr.ruleDeps[jr.rule.index],qr+=Nr(Hr,jr.rule.index,jr,Ur);else qr+=`<none>
`;return qr},Br=jr=>{let Ur=0,qr=0,Hr=null,Or=null,Mr="",{ruleIndexes:Lr}=fr;for(jr===97?Lr=fr.ruleAlphaIndexes:jr===116&&(Lr=fr.ruleTypeIndexes),Ur=0;Ur<fr.ruleCount;Ur+=1)qr=Lr[Ur],Hr=fr.attrs[qr],Or=fr.ruleDeps[qr],Mr+=Nr(Ur,qr,Hr,Or);return Mr};return{ruleAttributes:Cr,showAttributes:(jr="index")=>{if(!fr.attributesComplete)throw new Error(`${dr}:showAttributes: attributes not available`);let Ur="";const qr=`RULE ATTRIBUTES
`;return jr.charCodeAt(0)===97?(Ur+=`alphabetical by rule name
`,Ur+=qr,Ur+=Pr(),Ur+=Br(97)):jr.charCodeAt(0)===116?(Ur+=`ordered by rule type
`,Ur+=qr,Ur+=Pr(),Ur+=Br(116)):(Ur+=`ordered by rule index
`,Ur+=qr,Ur+=Pr(),Ur+=Br()),Ur},showAttributeErrors:Tr}}()),ruleAttributes}var ruleDependencies,hasRequiredRuleDependencies;function requireRuleDependencies(){return hasRequiredRuleDependencies||(hasRequiredRuleDependencies=1,ruleDependencies=(()=>{const cr=identifiers;let ar=null;const dr=(mr,gr,yr,xr)=>{let wr=0,br=0;const Sr=gr[yr];xr[yr]=!0;const vr=Sr.rule.opcodes;for(wr=0;wr<vr.length;wr+=1){const Er=vr[wr];if(Er.type===cr.RNM)for(Sr.refersTo[Er.index]=!0,xr[Er.index]||dr(mr,gr,Er.index,xr),br=0;br<mr;br+=1)gr[Er.index].refersTo[br]&&(Sr.refersTo[br]=!0);else Er.type===cr.UDT?Sr.refersToUdt[Er.index]=!0:Er.type===cr.BKR&&(Er.index<mr?(Sr.refersTo[Er.index]=!0,xr[Er.index]||dr(mr,gr,Er.index,xr)):Sr.refersToUdt[mr-Er.index]=!0)}},fr=mr=>{ar=mr;let gr=0,yr=0,xr=0,wr=null,br=null,Sr=!1;ar.dependenciesComplete=!1;const vr=ar.falseArray(ar.ruleCount);for(gr=0;gr<ar.ruleCount;gr+=1)ar.falsifyArray(vr),dr(ar.ruleCount,ar.ruleDeps,gr,vr);for(gr=0;gr<ar.ruleCount;gr+=1)for(yr=0;yr<ar.ruleCount;yr+=1)gr!==yr&&ar.ruleDeps[yr].refersTo[gr]&&(ar.ruleDeps[gr].referencedBy[yr]=!0);for(gr=0;gr<ar.ruleCount;gr+=1)ar.ruleDeps[gr].recursiveType=cr.ATTR_N,ar.ruleDeps[gr].refersTo[gr]&&(ar.ruleDeps[gr].recursiveType=cr.ATTR_R);for(xr=-1,gr=0;gr<ar.ruleCount;gr+=1)if(wr=ar.ruleDeps[gr],wr.recursiveType===cr.ATTR_R)for(Sr=!0,yr=0;yr<ar.ruleCount;yr+=1)gr!==yr&&(br=ar.ruleDeps[yr],br.recursiveType===cr.ATTR_R&&wr.refersTo[yr]&&br.refersTo[gr]&&(Sr&&(xr+=1,wr.recursiveType=cr.ATTR_MR,wr.groupNumber=xr,Sr=!1),br.recursiveType=cr.ATTR_MR,br.groupNumber=xr));ar.isMutuallyRecursive=xr>-1,ar.ruleAlphaIndexes.sort(ar.compRulesAlpha),ar.ruleTypeIndexes.sort(ar.compRulesAlpha),ar.ruleTypeIndexes.sort(ar.compRulesType),ar.isMutuallyRecursive&&ar.ruleTypeIndexes.sort(ar.compRulesGroup),ar.udtCount&&ar.udtAlphaIndexes.sort(ar.compUdtsAlpha),ar.dependenciesComplete=!0},hr=(mr=null)=>{let gr=0,yr=0,xr=0,wr=0;const br=ar.ruleCount-1,Sr=ar.udtCount-1,vr=100;let Er="",Ar="";const _r="=> ",Cr="<= ";let kr=!1,Rr=null,{ruleIndexes:Ir}=ar,{udtIndexes:Nr}=ar;for(mr===97?(Ir=ar.ruleAlphaIndexes,Nr=ar.udtAlphaIndexes):mr===116&&(Ir=ar.ruleTypeIndexes,Nr=ar.udtAlphaIndexes),gr=0;gr<ar.ruleCount;gr+=1){for(Rr=ar.ruleDeps[Ir[gr]],Ar=`${Ir[gr]}:${ar.typeToString(Rr.recursiveType)}:`,ar.isMutuallyRecursive&&(Ar+=Rr.groupNumber>-1?Rr.groupNumber:"-",Ar+=":"),Ar+=" ",Er+=`${Ar+ar.rules[Ir[gr]].name}
`,kr=!0,xr=0,wr=Er.length,Er+=Ar,yr=0;yr<ar.ruleCount;yr+=1)Rr.refersTo[Ir[yr]]&&(kr?(Er+=_r,kr=!1,Er+=ar.ruleDeps[Ir[yr]].rule.name):Er+=`, ${ar.ruleDeps[Ir[yr]].rule.name}`,xr+=1),Er.length-wr>vr&&yr!==br&&(Er+=`
${Ar}${_r}`,wr=Er.length);if(ar.udtCount)for(yr=0;yr<ar.udtCount;yr+=1)Rr.refersToUdt[Nr[yr]]&&(kr?(Er+=_r,kr=!1,Er+=ar.udts[Nr[yr]].name):Er+=`, ${ar.udts[Nr[yr]].name}`,xr+=1),Er.length-wr>vr&&yr!==Sr&&(Er+=`
${Ar}${_r}`,wr=Er.length);for(xr===0&&(Er+=`=> <none>
`),kr===!1&&(Er+=`
`),kr=!0,xr=0,wr=Er.length,Er+=Ar,yr=0;yr<ar.ruleCount;yr+=1)Rr.referencedBy[Ir[yr]]&&(kr?(Er+=Cr,kr=!1,Er+=ar.ruleDeps[Ir[yr]].rule.name):Er+=`, ${ar.ruleDeps[Ir[yr]].rule.name}`,xr+=1),Er.length-wr>vr&&yr!==br&&(Er+=`
${Ar}${_r}`,wr=Er.length);xr===0&&(Er+=`<= <none>
`),kr===!1&&(Er+=`
`),Er+=`
`}return Er};return{ruleDependencies:fr,showRuleDependencies:(mr="index")=>{let gr=`RULE DEPENDENCIES(index:type:[group number:])
`;return gr+=`=> refers to rule names
`,gr+=`<= referenced by rule names
`,ar.dependenciesComplete&&(mr.charCodeAt(0)===97?(gr+=`alphabetical by rule name
`,gr+=hr(97)):mr.charCodeAt(0)===116?(gr+=`ordered by rule type
`,gr+=hr(116)):(gr+=`ordered by rule index
`,gr+=hr(null))),gr}}})()),ruleDependencies}var attributes,hasRequiredAttributes;function requireAttributes(){return hasRequiredAttributes||(hasRequiredAttributes=1,attributes=function(){const ar=identifiers,{ruleAttributes:dr,showAttributes:fr,showAttributeErrors:hr}=requireRuleAttributes(),{ruleDependencies:pr,showRuleDependencies:mr}=requireRuleDependencies();class gr{constructor(wr,br){this.rules=wr,this.udts=br,this.ruleCount=wr.length,this.udtCount=br.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let Sr=0;Sr<this.ruleCount;Sr+=1)this.attrs.push(this.attrGen(this.rules[Sr])),this.attrsWorking.push(this.attrGen(this.rules[Sr])),this.ruleDeps.push(this.rdGen(wr[Sr],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(wr){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:wr}}attrInit(wr){wr.left=!1,wr.nested=!1,wr.right=!1,wr.empty=!1,wr.finite=!1,wr.cyclic=!1,wr.leaf=!1,wr.isOpen=!1,wr.isComplete=!1}attrCopy(wr,br){wr.left=br.left,wr.nested=br.nested,wr.right=br.right,wr.empty=br.empty,wr.finite=br.finite,wr.cyclic=br.cyclic,wr.leaf=br.leaf,wr.isOpen=br.isOpen,wr.isComplete=br.isComplete,wr.rule=br.rule}rdGen(wr,br,Sr){return{rule:wr,recursiveType:ar.ATTR_N,groupNumber:-1,refersTo:this.falseArray(br),refersToUdt:this.falseArray(Sr),referencedBy:this.falseArray(br)}}typeToString(wr){switch(wr){case ar.ATTR_N:return" N";case ar.ATTR_R:return" R";case ar.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(wr){const br=[];if(wr>0)for(let Sr=0;Sr<wr;Sr+=1)br.push(!1);return br}falsifyArray(wr){for(let br=0;br<wr.length;br+=1)wr[br]=!1}indexArray(wr){const br=[];if(wr>0)for(let Sr=0;Sr<wr;Sr+=1)br.push(Sr);return br}compRulesAlpha(wr,br){return this.rules[wr].lower<this.rules[br].lower?-1:this.rules[wr].lower>this.rules[br].lower?1:0}compUdtsAlpha(wr,br){return this.udts[wr].lower<this.udts[br].lower?-1:this.udts[wr].lower>this.udts[br].lower?1:0}compRulesType(wr,br){return this.ruleDeps[wr].recursiveType<this.ruleDeps[br].recursiveType?-1:this.ruleDeps[wr].recursiveType>this.ruleDeps[br].recursiveType?1:0}compRulesGroup(wr,br){if(this.ruleDeps[wr].recursiveType===ar.ATTR_MR&&this.ruleDeps[br].recursiveType===ar.ATTR_MR){if(this.ruleDeps[wr].groupNumber<this.ruleDeps[br].groupNumber)return-1;if(this.ruleDeps[wr].groupNumber>this.ruleDeps[br].groupNumber)return 1}return 0}}return{attributes:function(wr=[],br=[],Sr=[],vr=[]){const Er=new gr(wr,br);return pr(Er),dr(Er),Er.attrsErrorCount&&vr.push({line:0,char:0,msg:`${Er.attrsErrorCount} attribute errors`}),Er.attrsErrorCount},showAttributes:fr,showAttributeErrors:hr,showRuleDependencies:mr}}()),attributes}var showRules,hasRequiredShowRules;function requireShowRules(){return hasRequiredShowRules||(hasRequiredShowRules=1,showRules=function(){const ar="show-rules.js";return function(hr=[],pr=[],mr="index"){const gr="showRules";let yr=[],xr=[];const wr=[],br=[],Sr=hr,vr=pr,Er=hr.length,Ar=pr.length;let _r="RULE/UDT NAMES",Cr;function kr(Ir,Nr){return Sr[Ir].lower<Sr[Nr].lower?-1:Sr[Ir].lower>Sr[Nr].lower?1:0}function Rr(Ir,Nr){return vr[Ir].lower<vr[Nr].lower?-1:vr[Ir].lower>vr[Nr].lower?1:0}if(!(Array.isArray(hr)&&hr.length))throw new Error(`${ar}:${gr}: rules arg must be array with length > 0`);if(!Array.isArray(pr))throw new Error(`${ar}:${gr}: udts arg must be array`);for(Cr=0;Cr<Er;Cr+=1)wr.push(Cr);if(yr=wr.slice(0),yr.sort(kr),Ar){for(Cr=0;Cr<Ar;Cr+=1)br.push(Cr);xr=br.slice(0),xr.sort(Rr)}if(mr.charCodeAt(0)===97){for(_r+=` - alphabetical by rule/UDT name
`,Cr=0;Cr<Er;Cr+=1)_r+=`${Cr}: ${yr[Cr]}: ${Sr[yr[Cr]].name}
`;if(Ar)for(Cr=0;Cr<Ar;Cr+=1)_r+=`${Cr}: ${xr[Cr]}: ${vr[xr[Cr]].name}
`}else{for(_r+=` - ordered by rule/UDT index
`,Cr=0;Cr<Er;Cr+=1)_r+=`${Cr}: ${Sr[Cr].name}
`;if(Ar)for(Cr=0;Cr<Ar;Cr+=1)_r+=`${Cr}: ${vr[Cr].name}
`}return _r}}()),showRules}var api$1=function cr(ar){const{Buffer:dr}=buffer$1,fr="api.js: ",hr=this,pr=nodeExports,mr=requireConverter(),gr=requireScanner(),yr=new(requireParser()),{attributes:xr,showAttributes:wr,showAttributeErrors:br,showRuleDependencies:Sr}=requireAttributes(),vr=requireShowRules(),Er=function(Ur,qr,Hr){const Vr=`<span class="${pr.style.CLASS_CTRLCHAR}">`,Jr="</span>",es=`<span class="${pr.style.CLASS_NOMATCH}">`,ns="</span>";let Qr,zr="";const Wr=!0;for(;Wr&&!(!Array.isArray(Ur)||Ur.length===0);){if(typeof qr!="number")throw new Error("abnfToHtml: beg must be type number");if(qr>=Ur.length)break;typeof Hr!="number"||qr+Hr>=Ur.length?Qr=Ur.length:Qr=qr+Hr;let ss=0;for(let Xr=qr;Xr<Qr;Xr+=1){const ts=Ur[Xr];if(ts>=32&&ts<=126)switch(ss===1?(zr+=Jr,ss=0):ss===2&&(zr+=ns,ss=0),ts){case 32:zr+="&nbsp;";break;case 60:zr+="&lt;";break;case 62:zr+="&gt;";break;case 38:zr+="&amp;";break;case 34:zr+="&quot;";break;case 39:zr+="&#039;";break;case 92:zr+="&#092;";break;default:zr+=String.fromCharCode(ts);break}else ts===9||ts===10||ts===13?(ss===0?(zr+=Vr,ss=1):ss===2&&(zr+=ns+Vr,ss=1),ts===9&&(zr+="TAB"),ts===10&&(zr+="LF"),ts===13&&(zr+="CR")):(ss===0?(zr+=es,ss=2):ss===1&&(zr+=Jr+es,ss=2),zr+=`\\x${pr.utils.charToHex(ts)}`)}ss===2&&(zr+=ns),ss===1&&(zr+=Jr);break}return zr},Ar=function(Ur,qr,Hr){let Or="";for(let Mr=qr;Mr<qr+Hr;Mr+=1){const Lr=Ur[Mr];if(Lr>=32&&Lr<=126)Or+=String.fromCharCode(Lr);else switch(Lr){case 9:Or+="\\t";break;case 10:Or+="\\n";break;case 13:Or+="\\r";break;default:Or+="\\unknown";break}}return Or},_r=function(Ur){let qr="Annotated Input Grammar";return Ur.forEach(Hr=>{qr+=`
`,qr+=`line no: ${Hr.lineNo}`,qr+=` : char index: ${Hr.beginChar}`,qr+=` : length: ${Hr.length}`,qr+=` : abnf: ${Ar(hr.chars,Hr.beginChar,Hr.length)}`}),qr+=`
`,qr},Cr=function(Ur){let qr="";return qr+=`<table class="${pr.style.CLASS_GRAMMAR}">
`,qr+=`<caption>Annotated Input Grammar</caption>
`,qr+="<tr>",qr+="<th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th>",qr+=`</tr>
`,Ur.forEach(Or=>{qr+="<tr>",qr+=`<td>${Or.lineNo}`,qr+=`</td><td>${Or.beginChar}`,qr+=`</td><td>${Or.length}`,qr+=`</td><td>${Er(hr.chars,Or.beginChar,Or.length)}`,qr+="</td>",qr+=`</tr>
`}),qr+=`</table>
`,qr},kr=function(Ur,qr,Hr,Or){const[Mr]=pr;let Lr="";const Vr=`<span class="${Mr.CLASS_NOMATCH}">&raquo;</span>`;return Lr+=`<p><table class="${Mr.CLASS_GRAMMAR}">
`,Or&&typeof Or=="string"&&(Lr+=`<caption>${Or}</caption>
`),Lr+=`<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>
`,Ur.forEach(Jr=>{let es,ns,Qr,zr,Wr,ss="",Xr="";qr.length===0?(Wr=Vr,ns=0):(es=qr[Jr.line],Qr=es.beginChar,Jr.char>Qr&&(ss=Er(Hr,Qr,Jr.char-Qr)),Qr=Jr.char,zr=es.beginChar+es.length,Qr<zr&&(Xr=Er(Hr,Qr,zr-Qr)),Wr=ss+Vr+Xr,ns=Jr.char-es.beginChar,Lr+="<tr>",Lr+=`<td>${Jr.line}</td><td>${es.beginChar}</td><td>${ns}</td><td>${Wr}</td>`,Lr+=`</tr>
`,Lr+="<tr>",Lr+=`<td colspan="3"></td><td>&uarr;:&nbsp;${pr.utils.stringToAsciiHtml(Jr.msg)}</td>`,Lr+=`</tr>
`)}),Lr+=`</table></p>
`,Lr},Rr=function(Ur,qr,Hr){let Or,Mr,Lr,Vr;return Or="",Ur.forEach(Jr=>{Mr=qr[Jr.line],Or+=`${Mr.lineNo}: `,Or+=`${Mr.beginChar}: `,Or+=`${Jr.char-Mr.beginChar}: `,Lr=Mr.beginChar,Vr=Jr.char-Mr.beginChar,Or+=Ar(Hr,Lr,Vr),Or+=" >> ",Lr=Jr.char,Vr=Mr.beginChar+Mr.length-Jr.char,Or+=Ar(Hr,Lr,Vr),Or+=`
`,Or+=`${Mr.lineNo}: `,Or+=`${Mr.beginChar}: `,Or+=`${Jr.char-Mr.beginChar}: `,Or+="error: ",Or+=Jr.msg,Or+=`
`}),Or};let Ir=!1,Nr=!1,Pr=!1,Tr=!1,Br=0,Fr;if(this.errors=[],dr.isBuffer(ar))this.chars=mr.decode("BINARY",ar);else if(Array.isArray(ar))this.chars=ar.slice();else if(typeof ar=="string")this.chars=mr.decode("STRING",ar);else throw new Error(`${fr}input source is not a string, byte Buffer or character array`);this.sabnf=mr.encode("STRING",this.chars),this.scan=function(Ur,qr){this.lines=gr(this.chars,this.errors,Ur,qr),Ir=!0},this.parse=function(Ur,qr,Hr){if(!Ir)throw new Error(`${fr}grammar not scanned`);yr.syntax(this.chars,this.lines,this.errors,Ur,qr,Hr),Nr=!0},this.translate=function(){if(!Nr)throw new Error(`${fr}grammar not scanned and parsed`);const Ur=yr.semantic(this.chars,this.lines,this.errors);this.errors.length===0&&(this.rules=Ur.rules,this.udts=Ur.udts,Fr=Ur.lineMap,Pr=!0)},this.attributes=function(){if(!Pr)throw new Error(`${fr}grammar not scanned, parsed and translated`);return Br=xr(this.rules,this.udts,Fr,this.errors),Tr=!0,Br},this.generate=function(Ur){if(this.lines=gr(this.chars,this.errors,Ur),this.errors.length||(yr.syntax(this.chars,this.lines,this.errors,Ur),this.errors.length))return;const qr=yr.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=qr.rules,this.udts=qr.udts,Fr=qr.lineMap,Br=xr(this.rules,this.udts,Fr,this.errors),Tr=!0)},this.displayRules=function(Ur="index"){if(!Pr)throw new Error(`${fr}grammar not scanned, parsed and translated`);return vr(this.rules,this.udts,Ur)},this.displayRuleDependencies=function(Ur="index"){if(!Tr)throw new Error(`${fr}no attributes - must be preceeded by call to attributes()`);return Sr(Ur)},this.displayAttributes=function(Ur="index"){if(!Tr)throw new Error(`${fr}no attributes - must be preceeded by call to attributes()`);return Br&&br(Ur),wr(Ur)},this.displayAttributeErrors=function(){if(!Tr)throw new Error(`${fr}no attributes - must be preceeded by call to attributes()`);return br()},this.toSource=function(Ur,qr){if(!Tr)throw new Error(`${fr}can't generate parser source - must be preceeded by call to attributes()`);if(Br)throw new Error(`${fr}can't generate parser source - attributes have ${Br} errors`);return yr.generateSource(this.chars,this.lines,this.rules,this.udts,Ur,qr)},this.toObject=function(){if(!Tr)throw new Error(`${fr}can't generate parser source - must be preceeded by call to attributes()`);if(Br)throw new Error(`${fr}can't generate parser source - attributes have ${Br} errors`);return yr.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return Rr(this.errors,this.lines,this.chars)},this.errorsToHtml=function(Ur){return kr(this.errors,this.lines,this.chars,Ur)},this.linesToAscii=function(){return _r(this.lines)},this.linesToHtml=function(){return Cr(this.lines)}},utils$4={},sha3={},_assert={};Object.defineProperty(_assert,"__esModule",{value:!0});_assert.output=_assert.exists=_assert.hash=_assert.bytes=_assert.bool=_assert.number=void 0;function number$4(cr){if(!Number.isSafeInteger(cr)||cr<0)throw new Error(`Wrong positive integer: ${cr}`)}_assert.number=number$4;function bool$1(cr){if(typeof cr!="boolean")throw new Error(`Expected boolean, not ${cr}`)}_assert.bool=bool$1;function isBytes$3(cr){return cr instanceof Uint8Array||cr!=null&&typeof cr=="object"&&cr.constructor.name==="Uint8Array"}function bytes$3(cr,...ar){if(!isBytes$3(cr))throw new Error("Expected Uint8Array");if(ar.length>0&&!ar.includes(cr.length))throw new Error(`Expected Uint8Array of length ${ar}, not of length=${cr.length}`)}_assert.bytes=bytes$3;function hash$3(cr){if(typeof cr!="function"||typeof cr.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$4(cr.outputLen),number$4(cr.blockLen)}_assert.hash=hash$3;function exists$2(cr,ar=!0){if(cr.destroyed)throw new Error("Hash instance has been destroyed");if(ar&&cr.finished)throw new Error("Hash#digest() has already been called")}_assert.exists=exists$2;function output$2(cr,ar){bytes$3(cr);const dr=ar.outputLen;if(cr.length<dr)throw new Error(`digestInto() expects output buffer of length at least ${dr}`)}_assert.output=output$2;const assert$8={number:number$4,bool:bool$1,bytes:bytes$3,hash:hash$3,exists:exists$2,output:output$2};_assert.default=assert$8;var _u64={};Object.defineProperty(_u64,"__esModule",{value:!0});_u64.add5L=_u64.add5H=_u64.add4H=_u64.add4L=_u64.add3H=_u64.add3L=_u64.add=_u64.rotlBL=_u64.rotlBH=_u64.rotlSL=_u64.rotlSH=_u64.rotr32L=_u64.rotr32H=_u64.rotrBL=_u64.rotrBH=_u64.rotrSL=_u64.rotrSH=_u64.shrSL=_u64.shrSH=_u64.toBig=_u64.split=_u64.fromBig=void 0;const U32_MASK64$1=BigInt(2**32-1),_32n$1=BigInt(32);function fromBig$1(cr,ar=!1){return ar?{h:Number(cr&U32_MASK64$1),l:Number(cr>>_32n$1&U32_MASK64$1)}:{h:Number(cr>>_32n$1&U32_MASK64$1)|0,l:Number(cr&U32_MASK64$1)|0}}_u64.fromBig=fromBig$1;function split$1(cr,ar=!1){let dr=new Uint32Array(cr.length),fr=new Uint32Array(cr.length);for(let hr=0;hr<cr.length;hr++){const{h:pr,l:mr}=fromBig$1(cr[hr],ar);[dr[hr],fr[hr]]=[pr,mr]}return[dr,fr]}_u64.split=split$1;const toBig$1=(cr,ar)=>BigInt(cr>>>0)<<_32n$1|BigInt(ar>>>0);_u64.toBig=toBig$1;const shrSH$1=(cr,ar,dr)=>cr>>>dr;_u64.shrSH=shrSH$1;const shrSL$1=(cr,ar,dr)=>cr<<32-dr|ar>>>dr;_u64.shrSL=shrSL$1;const rotrSH$1=(cr,ar,dr)=>cr>>>dr|ar<<32-dr;_u64.rotrSH=rotrSH$1;const rotrSL$1=(cr,ar,dr)=>cr<<32-dr|ar>>>dr;_u64.rotrSL=rotrSL$1;const rotrBH$1=(cr,ar,dr)=>cr<<64-dr|ar>>>dr-32;_u64.rotrBH=rotrBH$1;const rotrBL$1=(cr,ar,dr)=>cr>>>dr-32|ar<<64-dr;_u64.rotrBL=rotrBL$1;const rotr32H$1=(cr,ar)=>ar;_u64.rotr32H=rotr32H$1;const rotr32L$1=(cr,ar)=>cr;_u64.rotr32L=rotr32L$1;const rotlSH$1=(cr,ar,dr)=>cr<<dr|ar>>>32-dr;_u64.rotlSH=rotlSH$1;const rotlSL$1=(cr,ar,dr)=>ar<<dr|cr>>>32-dr;_u64.rotlSL=rotlSL$1;const rotlBH$1=(cr,ar,dr)=>ar<<dr-32|cr>>>64-dr;_u64.rotlBH=rotlBH$1;const rotlBL$1=(cr,ar,dr)=>cr<<dr-32|ar>>>64-dr;_u64.rotlBL=rotlBL$1;function add$1(cr,ar,dr,fr){const hr=(ar>>>0)+(fr>>>0);return{h:cr+dr+(hr/2**32|0)|0,l:hr|0}}_u64.add=add$1;const add3L$1=(cr,ar,dr)=>(cr>>>0)+(ar>>>0)+(dr>>>0);_u64.add3L=add3L$1;const add3H$1=(cr,ar,dr,fr)=>ar+dr+fr+(cr/2**32|0)|0;_u64.add3H=add3H$1;const add4L$1=(cr,ar,dr,fr)=>(cr>>>0)+(ar>>>0)+(dr>>>0)+(fr>>>0);_u64.add4L=add4L$1;const add4H$1=(cr,ar,dr,fr,hr)=>ar+dr+fr+hr+(cr/2**32|0)|0;_u64.add4H=add4H$1;const add5L$1=(cr,ar,dr,fr,hr)=>(cr>>>0)+(ar>>>0)+(dr>>>0)+(fr>>>0)+(hr>>>0);_u64.add5L=add5L$1;const add5H$1=(cr,ar,dr,fr,hr,pr)=>ar+dr+fr+hr+pr+(cr/2**32|0)|0;_u64.add5H=add5H$1;const u64$1={fromBig:fromBig$1,split:split$1,toBig:toBig$1,shrSH:shrSH$1,shrSL:shrSL$1,rotrSH:rotrSH$1,rotrSL:rotrSL$1,rotrBH:rotrBH$1,rotrBL:rotrBL$1,rotr32H:rotr32H$1,rotr32L:rotr32L$1,rotlSH:rotlSH$1,rotlSL:rotlSL$1,rotlBH:rotlBH$1,rotlBL:rotlBL$1,add:add$1,add3L:add3L$1,add3H:add3H$1,add4L:add4L$1,add4H:add4H$1,add5H:add5H$1,add5L:add5L$1};_u64.default=u64$1;var utils$3={};const crypto$3=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,crypto$4=Object.freeze(Object.defineProperty({__proto__:null,crypto:crypto$3},Symbol.toStringTag,{value:"Module"})),require$$0$7=getAugmentedNamespace(crypto$4);(function(cr){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(cr,"__esModule",{value:!0}),cr.randomBytes=cr.wrapXOFConstructorWithOpts=cr.wrapConstructorWithOpts=cr.wrapConstructor=cr.checkOpts=cr.Hash=cr.concatBytes=cr.toBytes=cr.utf8ToBytes=cr.asyncLoop=cr.nextTick=cr.hexToBytes=cr.bytesToHex=cr.isLE=cr.rotr=cr.createView=cr.u32=cr.u8=void 0;const ar=require$$0$7,dr=Br=>new Uint8Array(Br.buffer,Br.byteOffset,Br.byteLength);cr.u8=dr;const fr=Br=>new Uint32Array(Br.buffer,Br.byteOffset,Math.floor(Br.byteLength/4));cr.u32=fr;function hr(Br){return Br instanceof Uint8Array||Br!=null&&typeof Br=="object"&&Br.constructor.name==="Uint8Array"}const pr=Br=>new DataView(Br.buffer,Br.byteOffset,Br.byteLength);cr.createView=pr;const mr=(Br,Fr)=>Br<<32-Fr|Br>>>Fr;if(cr.rotr=mr,cr.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!cr.isLE)throw new Error("Non little-endian hardware is not supported");const gr=Array.from({length:256},(Br,Fr)=>Fr.toString(16).padStart(2,"0"));function yr(Br){if(!hr(Br))throw new Error("Uint8Array expected");let Fr="";for(let jr=0;jr<Br.length;jr++)Fr+=gr[Br[jr]];return Fr}cr.bytesToHex=yr;const xr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function wr(Br){if(Br>=xr._0&&Br<=xr._9)return Br-xr._0;if(Br>=xr._A&&Br<=xr._F)return Br-(xr._A-10);if(Br>=xr._a&&Br<=xr._f)return Br-(xr._a-10)}function br(Br){if(typeof Br!="string")throw new Error("hex string expected, got "+typeof Br);const Fr=Br.length,jr=Fr/2;if(Fr%2)throw new Error("padded hex string expected, got unpadded hex of length "+Fr);const Ur=new Uint8Array(jr);for(let qr=0,Hr=0;qr<jr;qr++,Hr+=2){const Or=wr(Br.charCodeAt(Hr)),Mr=wr(Br.charCodeAt(Hr+1));if(Or===void 0||Mr===void 0){const Lr=Br[Hr]+Br[Hr+1];throw new Error('hex string expected, got non-hex character "'+Lr+'" at index '+Hr)}Ur[qr]=Or*16+Mr}return Ur}cr.hexToBytes=br;const Sr=async()=>{};cr.nextTick=Sr;async function vr(Br,Fr,jr){let Ur=Date.now();for(let qr=0;qr<Br;qr++){jr(qr);const Hr=Date.now()-Ur;Hr>=0&&Hr<Fr||(await(0,cr.nextTick)(),Ur+=Hr)}}cr.asyncLoop=vr;function Er(Br){if(typeof Br!="string")throw new Error(`utf8ToBytes expected string, got ${typeof Br}`);return new Uint8Array(new TextEncoder().encode(Br))}cr.utf8ToBytes=Er;function Ar(Br){if(typeof Br=="string"&&(Br=Er(Br)),!hr(Br))throw new Error(`expected Uint8Array, got ${typeof Br}`);return Br}cr.toBytes=Ar;function _r(...Br){let Fr=0;for(let Ur=0;Ur<Br.length;Ur++){const qr=Br[Ur];if(!hr(qr))throw new Error("Uint8Array expected");Fr+=qr.length}const jr=new Uint8Array(Fr);for(let Ur=0,qr=0;Ur<Br.length;Ur++){const Hr=Br[Ur];jr.set(Hr,qr),qr+=Hr.length}return jr}cr.concatBytes=_r;class Cr{clone(){return this._cloneInto()}}cr.Hash=Cr;const kr={}.toString;function Rr(Br,Fr){if(Fr!==void 0&&kr.call(Fr)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(Br,Fr)}cr.checkOpts=Rr;function Ir(Br){const Fr=Ur=>Br().update(Ar(Ur)).digest(),jr=Br();return Fr.outputLen=jr.outputLen,Fr.blockLen=jr.blockLen,Fr.create=()=>Br(),Fr}cr.wrapConstructor=Ir;function Nr(Br){const Fr=(Ur,qr)=>Br(qr).update(Ar(Ur)).digest(),jr=Br({});return Fr.outputLen=jr.outputLen,Fr.blockLen=jr.blockLen,Fr.create=Ur=>Br(Ur),Fr}cr.wrapConstructorWithOpts=Nr;function Pr(Br){const Fr=(Ur,qr)=>Br(qr).update(Ar(Ur)).digest(),jr=Br({});return Fr.outputLen=jr.outputLen,Fr.blockLen=jr.blockLen,Fr.create=Ur=>Br(Ur),Fr}cr.wrapXOFConstructorWithOpts=Pr;function Tr(Br=32){if(ar.crypto&&typeof ar.crypto.getRandomValues=="function")return ar.crypto.getRandomValues(new Uint8Array(Br));throw new Error("crypto.getRandomValues must be defined")}cr.randomBytes=Tr})(utils$3);Object.defineProperty(sha3,"__esModule",{value:!0});sha3.shake256=sha3.shake128=sha3.keccak_512=sha3.keccak_384=sha3.keccak_256=sha3.keccak_224=sha3.sha3_512=sha3.sha3_384=sha3.sha3_256=sha3.sha3_224=sha3.Keccak=sha3.keccakP=void 0;const _assert_js_1=_assert,_u64_js_1=_u64,utils_js_1=utils$3,[SHA3_PI,SHA3_ROTL,_SHA3_IOTA]=[[],[],[]],_0n$6=BigInt(0),_1n$8=BigInt(1),_2n$5=BigInt(2),_7n=BigInt(7),_256n=BigInt(256),_0x71n=BigInt(113);for(let cr=0,ar=_1n$8,dr=1,fr=0;cr<24;cr++){[dr,fr]=[fr,(2*dr+3*fr)%5],SHA3_PI.push(2*(5*fr+dr)),SHA3_ROTL.push((cr+1)*(cr+2)/2%64);let hr=_0n$6;for(let pr=0;pr<7;pr++)ar=(ar<<_1n$8^(ar>>_7n)*_0x71n)%_256n,ar&_2n$5&&(hr^=_1n$8<<(_1n$8<<BigInt(pr))-_1n$8);_SHA3_IOTA.push(hr)}const[SHA3_IOTA_H,SHA3_IOTA_L]=(0,_u64_js_1.split)(_SHA3_IOTA,!0),rotlH=(cr,ar,dr)=>dr>32?(0,_u64_js_1.rotlBH)(cr,ar,dr):(0,_u64_js_1.rotlSH)(cr,ar,dr),rotlL=(cr,ar,dr)=>dr>32?(0,_u64_js_1.rotlBL)(cr,ar,dr):(0,_u64_js_1.rotlSL)(cr,ar,dr);function keccakP(cr,ar=24){const dr=new Uint32Array(10);for(let fr=24-ar;fr<24;fr++){for(let mr=0;mr<10;mr++)dr[mr]=cr[mr]^cr[mr+10]^cr[mr+20]^cr[mr+30]^cr[mr+40];for(let mr=0;mr<10;mr+=2){const gr=(mr+8)%10,yr=(mr+2)%10,xr=dr[yr],wr=dr[yr+1],br=rotlH(xr,wr,1)^dr[gr],Sr=rotlL(xr,wr,1)^dr[gr+1];for(let vr=0;vr<50;vr+=10)cr[mr+vr]^=br,cr[mr+vr+1]^=Sr}let hr=cr[2],pr=cr[3];for(let mr=0;mr<24;mr++){const gr=SHA3_ROTL[mr],yr=rotlH(hr,pr,gr),xr=rotlL(hr,pr,gr),wr=SHA3_PI[mr];hr=cr[wr],pr=cr[wr+1],cr[wr]=yr,cr[wr+1]=xr}for(let mr=0;mr<50;mr+=10){for(let gr=0;gr<10;gr++)dr[gr]=cr[mr+gr];for(let gr=0;gr<10;gr++)cr[mr+gr]^=~dr[(gr+2)%10]&dr[(gr+4)%10]}cr[0]^=SHA3_IOTA_H[fr],cr[1]^=SHA3_IOTA_L[fr]}dr.fill(0)}sha3.keccakP=keccakP;class Keccak extends utils_js_1.Hash{constructor(ar,dr,fr,hr=!1,pr=24){if(super(),this.blockLen=ar,this.suffix=dr,this.outputLen=fr,this.enableXOF=hr,this.rounds=pr,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,_assert_js_1.number)(fr),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,utils_js_1.u32)(this.state)}keccak(){keccakP(this.state32,this.rounds),this.posOut=0,this.pos=0}update(ar){(0,_assert_js_1.exists)(this);const{blockLen:dr,state:fr}=this;ar=(0,utils_js_1.toBytes)(ar);const hr=ar.length;for(let pr=0;pr<hr;){const mr=Math.min(dr-this.pos,hr-pr);for(let gr=0;gr<mr;gr++)fr[this.pos++]^=ar[pr++];this.pos===dr&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:ar,suffix:dr,pos:fr,blockLen:hr}=this;ar[fr]^=dr,dr&128&&fr===hr-1&&this.keccak(),ar[hr-1]^=128,this.keccak()}writeInto(ar){(0,_assert_js_1.exists)(this,!1),(0,_assert_js_1.bytes)(ar),this.finish();const dr=this.state,{blockLen:fr}=this;for(let hr=0,pr=ar.length;hr<pr;){this.posOut>=fr&&this.keccak();const mr=Math.min(fr-this.posOut,pr-hr);ar.set(dr.subarray(this.posOut,this.posOut+mr),hr),this.posOut+=mr,hr+=mr}return ar}xofInto(ar){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(ar)}xof(ar){return(0,_assert_js_1.number)(ar),this.xofInto(new Uint8Array(ar))}digestInto(ar){if((0,_assert_js_1.output)(ar,this),this.finished)throw new Error("digest() was already called");return this.writeInto(ar),this.destroy(),ar}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(ar){const{blockLen:dr,suffix:fr,outputLen:hr,rounds:pr,enableXOF:mr}=this;return ar||(ar=new Keccak(dr,fr,hr,mr,pr)),ar.state32.set(this.state32),ar.pos=this.pos,ar.posOut=this.posOut,ar.finished=this.finished,ar.rounds=pr,ar.suffix=fr,ar.outputLen=hr,ar.enableXOF=mr,ar.destroyed=this.destroyed,ar}}sha3.Keccak=Keccak;const gen=(cr,ar,dr)=>(0,utils_js_1.wrapConstructor)(()=>new Keccak(ar,cr,dr));sha3.sha3_224=gen(6,144,224/8);sha3.sha3_256=gen(6,136,256/8);sha3.sha3_384=gen(6,104,384/8);sha3.sha3_512=gen(6,72,512/8);sha3.keccak_224=gen(1,144,224/8);sha3.keccak_256=gen(1,136,256/8);sha3.keccak_384=gen(1,104,384/8);sha3.keccak_512=gen(1,72,512/8);const genShake=(cr,ar,dr)=>(0,utils_js_1.wrapXOFConstructorWithOpts)((fr={})=>new Keccak(ar,cr,fr.dkLen===void 0?dr:fr.dkLen,!0));sha3.shake128=genShake(31,168,128/8);sha3.shake256=genShake(31,136,256/8);Object.defineProperty(utils$4,"__esModule",{value:!0});utils$4.parseIntegerNumber=utils$4.isEIP55Address=void 0;const sha3_1=sha3,utils_1$2=utils$3,isEIP55Address=cr=>{if(cr.length!=42)return!1;const ar=`${cr}`.toLowerCase().replace("0x","");for(var dr=(0,utils_1$2.bytesToHex)((0,sha3_1.keccak_256)(ar)),fr="0x",hr=0;hr<ar.length;hr++)parseInt(dr[hr],16)>=8?fr+=ar[hr].toUpperCase():fr+=ar[hr];return cr===fr};utils$4.isEIP55Address=isEIP55Address;const parseIntegerNumber=cr=>{const ar=parseInt(cr);if(ar===NaN)throw new Error("Invalid number.");if(ar===1/0)throw new Error("Invalid number.");return ar};utils$4.parseIntegerNumber=parseIntegerNumber;var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(cr){return cr&&cr.__esModule?cr:{default:cr}},_a$y;Object.defineProperty(abnf,"__esModule",{value:!0});abnf.ParsedMessage=void 0;const api_1=__importDefault$1(api$1),node_exports_1=__importDefault$1(nodeExports),utils_1$1=utils$4,GRAMMAR=`
sign-in-with-ethereum =
    domain %s" wants you to sign in with your Ethereum account:" LF
    address LF
    LF
    [ statement LF ]
    LF
    %s"URI: " URI LF
    %s"Version: " version LF
    %s"Chain ID: " chain-id LF
    %s"Nonce: " nonce LF
    %s"Issued At: " issued-at
    [ LF %s"Expiration Time: " expiration-time ]
    [ LF %s"Not Before: " not-before ]
    [ LF %s"Request ID: " request-id ]
    [ LF %s"Resources:"
    resources ]

domain = authority

address = "0x" 40*40HEXDIG
    ; Must also conform to captilization
    ; checksum encoding specified in EIP-55
    ; where applicable (EOAs).

statement = 1*( reserved / unreserved / " " )
    ; The purpose is to exclude LF (line breaks).

version = "1"

nonce = 8*( ALPHA / DIGIT )

issued-at = date-time
expiration-time = date-time
not-before = date-time

request-id = *pchar

chain-id = 1*DIGIT
    ; See EIP-155 for valid CHAIN_IDs.

resources = *( LF resource )

resource = "- " URI

; ------------------------------------------------------------------------------
; RFC 3986

URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

hier-part     = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty

scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )

authority     = [ userinfo "@" ] host [ ":" port ]
userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
host          = IP-literal / IPv4address / reg-name
port          = *DIGIT

IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"

IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )

IPv6address   =                            6( h16 ":" ) ls32
              /                       "::" 5( h16 ":" ) ls32
              / [               h16 ] "::" 4( h16 ":" ) ls32
              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
              / [ *4( h16 ":" ) h16 ] "::"              ls32
              / [ *5( h16 ":" ) h16 ] "::"              h16
              / [ *6( h16 ":" ) h16 ] "::"

h16           = 1*4HEXDIG
ls32          = ( h16 ":" h16 ) / IPv4address
IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
dec-octet     = DIGIT                 ; 0-9
                 / %x31-39 DIGIT         ; 10-99
                 / "1" 2DIGIT            ; 100-199
                 / "2" %x30-34 DIGIT     ; 200-249
                 / "25" %x30-35          ; 250-255

reg-name      = *( unreserved / pct-encoded / sub-delims )

path-abempty  = *( "/" segment )
path-absolute = "/" [ segment-nz *( "/" segment ) ]
path-rootless = segment-nz *( "/" segment )
path-empty    = 0pchar

segment       = *pchar
segment-nz    = 1*pchar

pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"

query         = *( pchar / "/" / "?" )

fragment      = *( pchar / "/" / "?" )

pct-encoded   = "%" HEXDIG HEXDIG

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
reserved      = gen-delims / sub-delims
gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
              / "*" / "+" / "," / ";" / "="

; ------------------------------------------------------------------------------
; RFC 3339

date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                          ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
                          ; rules
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset

partial-time    = time-hour ":" time-minute ":" time-second
                  [time-secfrac]
full-date       = date-fullyear "-" date-month "-" date-mday
full-time       = partial-time time-offset

date-time       = full-date "T" full-time

; ------------------------------------------------------------------------------
; RFC 5234

ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
LF             =  %x0A
                  ; linefeed
DIGIT          =  %x30-39
                  ; 0-9
HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`;class GrammarApi{static generateApi(){const ar=new api_1.default(GRAMMAR);if(ar.generate(),ar.errors.length)throw console.error(ar.errorsToAscii()),console.error(ar.linesToAscii()),console.log(ar.displayAttributeErrors()),new Error("ABNF grammar has errors");return ar.toObject()}}_a$y=GrammarApi;GrammarApi.grammarObj=_a$y.generateApi();class ParsedMessage{constructor(ar){const dr=new node_exports_1.default.parser;dr.ast=new node_exports_1.default.ast;const fr=node_exports_1.default.ids,hr=function(kr,Rr,Ir,Nr,Pr){const Tr=fr.SEM_OK;return kr===fr.SEM_PRE&&(Pr.domain=node_exports_1.default.utils.charsToString(Rr,Ir,Nr)),Tr};dr.ast.callbacks.domain=hr;const pr=function(kr,Rr,Ir,Nr,Pr){const Tr=fr.SEM_OK;return kr===fr.SEM_PRE&&(Pr.address=node_exports_1.default.utils.charsToString(Rr,Ir,Nr)),Tr};dr.ast.callbacks.address=pr;const mr=function(kr,Rr,Ir,Nr,Pr){const Tr=fr.SEM_OK;return kr===fr.SEM_PRE&&(Pr.statement=node_exports_1.default.utils.charsToString(Rr,Ir,Nr)),Tr};dr.ast.callbacks.statement=mr;const gr=function(kr,Rr,Ir,Nr,Pr){const Tr=fr.SEM_OK;return kr===fr.SEM_PRE&&(Pr.uri||(Pr.uri=node_exports_1.default.utils.charsToString(Rr,Ir,Nr))),Tr};dr.ast.callbacks.uri=gr;const yr=function(kr,Rr,Ir,Nr,Pr){const Tr=fr.SEM_OK;return kr===fr.SEM_PRE&&(Pr.version=node_exports_1.default.utils.charsToString(Rr,Ir,Nr)),Tr};dr.ast.callbacks.version=yr;const xr=function(kr,Rr,Ir,Nr,Pr){const Tr=fr.SEM_OK;return kr===fr.SEM_PRE&&(Pr.chainId=(0,utils_1$1.parseIntegerNumber)(node_exports_1.default.utils.charsToString(Rr,Ir,Nr))),Tr};dr.ast.callbacks["chain-id"]=xr;const wr=function(kr,Rr,Ir,Nr,Pr){const Tr=fr.SEM_OK;return kr===fr.SEM_PRE&&(Pr.nonce=node_exports_1.default.utils.charsToString(Rr,Ir,Nr)),Tr};dr.ast.callbacks.nonce=wr;const br=function(kr,Rr,Ir,Nr,Pr){const Tr=fr.SEM_OK;return kr===fr.SEM_PRE&&(Pr.issuedAt=node_exports_1.default.utils.charsToString(Rr,Ir,Nr)),Tr};dr.ast.callbacks["issued-at"]=br;const Sr=function(kr,Rr,Ir,Nr,Pr){const Tr=fr.SEM_OK;return kr===fr.SEM_PRE&&(Pr.expirationTime=node_exports_1.default.utils.charsToString(Rr,Ir,Nr)),Tr};dr.ast.callbacks["expiration-time"]=Sr;const vr=function(kr,Rr,Ir,Nr,Pr){const Tr=fr.SEM_OK;return kr===fr.SEM_PRE&&(Pr.notBefore=node_exports_1.default.utils.charsToString(Rr,Ir,Nr)),Tr};dr.ast.callbacks["not-before"]=vr;const Er=function(kr,Rr,Ir,Nr,Pr){const Tr=fr.SEM_OK;return kr===fr.SEM_PRE&&(Pr.requestId=node_exports_1.default.utils.charsToString(Rr,Ir,Nr)),Tr};dr.ast.callbacks["request-id"]=Er;const Ar=function(kr,Rr,Ir,Nr,Pr){const Tr=fr.SEM_OK;return kr===fr.SEM_PRE&&(Pr.resources=node_exports_1.default.utils.charsToString(Rr,Ir,Nr).slice(3).split(`
- `)),Tr};dr.ast.callbacks.resources=Ar;const _r=dr.parse(GrammarApi.grammarObj,"sign-in-with-ethereum",ar);if(!_r.success)throw new Error(`Invalid message: ${JSON.stringify(_r)}`);const Cr={};dr.ast.translate(Cr);for(const[kr,Rr]of Object.entries(Cr))this[kr]=Rr;if(this.domain.length===0)throw new Error("Domain cannot be empty.");if(!(0,utils_1$1.isEIP55Address)(this.address))throw new Error("Address not conformant to EIP-55.")}}abnf.ParsedMessage=ParsedMessage;(function(cr){var ar=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(hr,pr,mr,gr){gr===void 0&&(gr=mr);var yr=Object.getOwnPropertyDescriptor(pr,mr);(!yr||("get"in yr?!pr.__esModule:yr.writable||yr.configurable))&&(yr={enumerable:!0,get:function(){return pr[mr]}}),Object.defineProperty(hr,gr,yr)}:function(hr,pr,mr,gr){gr===void 0&&(gr=mr),hr[gr]=pr[mr]}),dr=commonjsGlobal&&commonjsGlobal.__exportStar||function(hr,pr){for(var mr in hr)mr!=="default"&&!Object.prototype.hasOwnProperty.call(pr,mr)&&ar(pr,hr,mr)};Object.defineProperty(cr,"__esModule",{value:!0}),cr.ParsedMessage=void 0;const fr=abnf;Object.defineProperty(cr,"ParsedMessage",{enumerable:!0,get:function(){return fr.ParsedMessage}}),dr(utils$4,cr)})(parsers);var validUrl={exports:{}};(function(cr){(function(ar){ar.exports.is_uri=fr,ar.exports.is_http_uri=hr,ar.exports.is_https_uri=pr,ar.exports.is_web_uri=mr,ar.exports.isUri=fr,ar.exports.isHttpUri=hr,ar.exports.isHttpsUri=pr,ar.exports.isWebUri=mr;var dr=function(gr){var yr=gr.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return yr};function fr(gr){if(gr&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(gr)&&!/%[^0-9a-f]/i.test(gr)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(gr)){var yr=[],xr="",wr="",br="",Sr="",vr="",Er="";if(yr=dr(gr),xr=yr[1],wr=yr[2],br=yr[3],Sr=yr[4],vr=yr[5],!!(xr&&xr.length&&br.length>=0)){if(wr&&wr.length){if(!(br.length===0||/^\//.test(br)))return}else if(/^\/\//.test(br))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(xr.toLowerCase()))return Er+=xr+":",wr&&wr.length&&(Er+="//"+wr),Er+=br,Sr&&Sr.length&&(Er+="?"+Sr),vr&&vr.length&&(Er+="#"+vr),Er}}}function hr(gr,yr){if(fr(gr)){var xr=[],wr="",br="",Sr="",vr="",Er="",Ar="",_r="";if(xr=dr(gr),wr=xr[1],br=xr[2],Sr=xr[3],Er=xr[4],Ar=xr[5],!!wr){if(yr){if(wr.toLowerCase()!="https")return}else if(wr.toLowerCase()!="http")return;if(br)return/:(\d+)$/.test(br)&&(vr=br.match(/:(\d+)$/)[0],br=br.replace(/:\d+$/,"")),_r+=wr+":",_r+="//"+br,vr&&(_r+=vr),_r+=Sr,Er&&Er.length&&(_r+="?"+Er),Ar&&Ar.length&&(_r+="#"+Ar),_r}}}function pr(gr){return hr(gr,!0)}function mr(gr){return hr(gr)||pr(gr)}})(cr)})(validUrl);var validUrlExports=validUrl.exports,ethersCompat={},lib_commonjs={},extendStatics=function(cr,ar){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dr,fr){dr.__proto__=fr}||function(dr,fr){for(var hr in fr)Object.prototype.hasOwnProperty.call(fr,hr)&&(dr[hr]=fr[hr])},extendStatics(cr,ar)};function __extends(cr,ar){if(typeof ar!="function"&&ar!==null)throw new TypeError("Class extends value "+String(ar)+" is not a constructor or null");extendStatics(cr,ar);function dr(){this.constructor=cr}cr.prototype=ar===null?Object.create(ar):(dr.prototype=ar.prototype,new dr)}var __assign=function(){return __assign=Object.assign||function(ar){for(var dr,fr=1,hr=arguments.length;fr<hr;fr++){dr=arguments[fr];for(var pr in dr)Object.prototype.hasOwnProperty.call(dr,pr)&&(ar[pr]=dr[pr])}return ar},__assign.apply(this,arguments)};function __rest(cr,ar){var dr={};for(var fr in cr)Object.prototype.hasOwnProperty.call(cr,fr)&&ar.indexOf(fr)<0&&(dr[fr]=cr[fr]);if(cr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var hr=0,fr=Object.getOwnPropertySymbols(cr);hr<fr.length;hr++)ar.indexOf(fr[hr])<0&&Object.prototype.propertyIsEnumerable.call(cr,fr[hr])&&(dr[fr[hr]]=cr[fr[hr]]);return dr}function __decorate(cr,ar,dr,fr){var hr=arguments.length,pr=hr<3?ar:fr===null?fr=Object.getOwnPropertyDescriptor(ar,dr):fr,mr;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")pr=Reflect.decorate(cr,ar,dr,fr);else for(var gr=cr.length-1;gr>=0;gr--)(mr=cr[gr])&&(pr=(hr<3?mr(pr):hr>3?mr(ar,dr,pr):mr(ar,dr))||pr);return hr>3&&pr&&Object.defineProperty(ar,dr,pr),pr}function __param(cr,ar){return function(dr,fr){ar(dr,fr,cr)}}function __metadata(cr,ar){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(cr,ar)}function __awaiter$2(cr,ar,dr,fr){function hr(pr){return pr instanceof dr?pr:new dr(function(mr){mr(pr)})}return new(dr||(dr=Promise))(function(pr,mr){function gr(wr){try{xr(fr.next(wr))}catch(br){mr(br)}}function yr(wr){try{xr(fr.throw(wr))}catch(br){mr(br)}}function xr(wr){wr.done?pr(wr.value):hr(wr.value).then(gr,yr)}xr((fr=fr.apply(cr,ar||[])).next())})}function __generator(cr,ar){var dr={label:0,sent:function(){if(pr[0]&1)throw pr[1];return pr[1]},trys:[],ops:[]},fr,hr,pr,mr;return mr={next:gr(0),throw:gr(1),return:gr(2)},typeof Symbol=="function"&&(mr[Symbol.iterator]=function(){return this}),mr;function gr(xr){return function(wr){return yr([xr,wr])}}function yr(xr){if(fr)throw new TypeError("Generator is already executing.");for(;dr;)try{if(fr=1,hr&&(pr=xr[0]&2?hr.return:xr[0]?hr.throw||((pr=hr.return)&&pr.call(hr),0):hr.next)&&!(pr=pr.call(hr,xr[1])).done)return pr;switch(hr=0,pr&&(xr=[xr[0]&2,pr.value]),xr[0]){case 0:case 1:pr=xr;break;case 4:return dr.label++,{value:xr[1],done:!1};case 5:dr.label++,hr=xr[1],xr=[0];continue;case 7:xr=dr.ops.pop(),dr.trys.pop();continue;default:if(pr=dr.trys,!(pr=pr.length>0&&pr[pr.length-1])&&(xr[0]===6||xr[0]===2)){dr=0;continue}if(xr[0]===3&&(!pr||xr[1]>pr[0]&&xr[1]<pr[3])){dr.label=xr[1];break}if(xr[0]===6&&dr.label<pr[1]){dr.label=pr[1],pr=xr;break}if(pr&&dr.label<pr[2]){dr.label=pr[2],dr.ops.push(xr);break}pr[2]&&dr.ops.pop(),dr.trys.pop();continue}xr=ar.call(cr,dr)}catch(wr){xr=[6,wr],hr=0}finally{fr=pr=0}if(xr[0]&5)throw xr[1];return{value:xr[0]?xr[1]:void 0,done:!0}}}var __createBinding$1=Object.create?function(cr,ar,dr,fr){fr===void 0&&(fr=dr);var hr=Object.getOwnPropertyDescriptor(ar,dr);(!hr||("get"in hr?!ar.__esModule:hr.writable||hr.configurable))&&(hr={enumerable:!0,get:function(){return ar[dr]}}),Object.defineProperty(cr,fr,hr)}:function(cr,ar,dr,fr){fr===void 0&&(fr=dr),cr[fr]=ar[dr]};function __exportStar(cr,ar){for(var dr in cr)dr!=="default"&&!Object.prototype.hasOwnProperty.call(ar,dr)&&__createBinding$1(ar,cr,dr)}function __values(cr){var ar=typeof Symbol=="function"&&Symbol.iterator,dr=ar&&cr[ar],fr=0;if(dr)return dr.call(cr);if(cr&&typeof cr.length=="number")return{next:function(){return cr&&fr>=cr.length&&(cr=void 0),{value:cr&&cr[fr++],done:!cr}}};throw new TypeError(ar?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(cr,ar){var dr=typeof Symbol=="function"&&cr[Symbol.iterator];if(!dr)return cr;var fr=dr.call(cr),hr,pr=[],mr;try{for(;(ar===void 0||ar-- >0)&&!(hr=fr.next()).done;)pr.push(hr.value)}catch(gr){mr={error:gr}}finally{try{hr&&!hr.done&&(dr=fr.return)&&dr.call(fr)}finally{if(mr)throw mr.error}}return pr}function __spread(){for(var cr=[],ar=0;ar<arguments.length;ar++)cr=cr.concat(__read(arguments[ar]));return cr}function __spreadArrays(){for(var cr=0,ar=0,dr=arguments.length;ar<dr;ar++)cr+=arguments[ar].length;for(var fr=Array(cr),hr=0,ar=0;ar<dr;ar++)for(var pr=arguments[ar],mr=0,gr=pr.length;mr<gr;mr++,hr++)fr[hr]=pr[mr];return fr}function __spreadArray(cr,ar,dr){if(dr||arguments.length===2)for(var fr=0,hr=ar.length,pr;fr<hr;fr++)(pr||!(fr in ar))&&(pr||(pr=Array.prototype.slice.call(ar,0,fr)),pr[fr]=ar[fr]);return cr.concat(pr||Array.prototype.slice.call(ar))}function __await(cr){return this instanceof __await?(this.v=cr,this):new __await(cr)}function __asyncGenerator(cr,ar,dr){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fr=dr.apply(cr,ar||[]),hr,pr=[];return hr={},mr("next"),mr("throw"),mr("return"),hr[Symbol.asyncIterator]=function(){return this},hr;function mr(Sr){fr[Sr]&&(hr[Sr]=function(vr){return new Promise(function(Er,Ar){pr.push([Sr,vr,Er,Ar])>1||gr(Sr,vr)})})}function gr(Sr,vr){try{yr(fr[Sr](vr))}catch(Er){br(pr[0][3],Er)}}function yr(Sr){Sr.value instanceof __await?Promise.resolve(Sr.value.v).then(xr,wr):br(pr[0][2],Sr)}function xr(Sr){gr("next",Sr)}function wr(Sr){gr("throw",Sr)}function br(Sr,vr){Sr(vr),pr.shift(),pr.length&&gr(pr[0][0],pr[0][1])}}function __asyncDelegator(cr){var ar,dr;return ar={},fr("next"),fr("throw",function(hr){throw hr}),fr("return"),ar[Symbol.iterator]=function(){return this},ar;function fr(hr,pr){ar[hr]=cr[hr]?function(mr){return(dr=!dr)?{value:__await(cr[hr](mr)),done:hr==="return"}:pr?pr(mr):mr}:pr}}function __asyncValues(cr){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ar=cr[Symbol.asyncIterator],dr;return ar?ar.call(cr):(cr=typeof __values=="function"?__values(cr):cr[Symbol.iterator](),dr={},fr("next"),fr("throw"),fr("return"),dr[Symbol.asyncIterator]=function(){return this},dr);function fr(pr){dr[pr]=cr[pr]&&function(mr){return new Promise(function(gr,yr){mr=cr[pr](mr),hr(gr,yr,mr.done,mr.value)})}}function hr(pr,mr,gr,yr){Promise.resolve(yr).then(function(xr){pr({value:xr,done:gr})},mr)}}function __makeTemplateObject(cr,ar){return Object.defineProperty?Object.defineProperty(cr,"raw",{value:ar}):cr.raw=ar,cr}var __setModuleDefault$1=Object.create?function(cr,ar){Object.defineProperty(cr,"default",{enumerable:!0,value:ar})}:function(cr,ar){cr.default=ar};function __importStar$1(cr){if(cr&&cr.__esModule)return cr;var ar={};if(cr!=null)for(var dr in cr)dr!=="default"&&Object.prototype.hasOwnProperty.call(cr,dr)&&__createBinding$1(ar,cr,dr);return __setModuleDefault$1(ar,cr),ar}function __importDefault(cr){return cr&&cr.__esModule?cr:{default:cr}}function __classPrivateFieldGet$g(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)}function __classPrivateFieldSet$d(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr}function __classPrivateFieldIn(cr,ar){if(ar===null||typeof ar!="object"&&typeof ar!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof cr=="function"?ar===cr:cr.has(ar)}const tslib_es6=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign},__asyncDelegator,__asyncGenerator,__asyncValues,__await,__awaiter:__awaiter$2,__classPrivateFieldGet:__classPrivateFieldGet$g,__classPrivateFieldIn,__classPrivateFieldSet:__classPrivateFieldSet$d,__createBinding:__createBinding$1,__decorate,__exportStar,__extends,__generator,__importDefault,__importStar:__importStar$1,__makeTemplateObject,__metadata,__param,__read,__rest,__spread,__spreadArray,__spreadArrays,__values},Symbol.toStringTag,{value:"Module"})),require$$0$6=getAugmentedNamespace(tslib_es6);var ethers={},_version={},hasRequired_version;function require_version(){return hasRequired_version||(hasRequired_version=1,Object.defineProperty(_version,"__esModule",{value:!0}),_version.version=void 0,_version.version="6.9.0"),_version}var abi={},abiCoder={},utils$2={},base58$2={},data={},errors={},properties={},hasRequiredProperties;function requireProperties(){if(hasRequiredProperties)return properties;hasRequiredProperties=1,Object.defineProperty(properties,"__esModule",{value:!0}),properties.defineProperties=properties.resolveProperties=void 0;function cr(fr,hr,pr){const mr=hr.split("|").map(yr=>yr.trim());for(let yr=0;yr<mr.length;yr++)switch(hr){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof fr===hr)return}const gr=new Error(`invalid value for type ${hr}`);throw gr.code="INVALID_ARGUMENT",gr.argument=`value.${pr}`,gr.value=fr,gr}async function ar(fr){const hr=Object.keys(fr);return(await Promise.all(hr.map(mr=>Promise.resolve(fr[mr])))).reduce((mr,gr,yr)=>(mr[hr[yr]]=gr,mr),{})}properties.resolveProperties=ar;function dr(fr,hr,pr){for(let mr in hr){let gr=hr[mr];const yr=pr?pr[mr]:null;yr&&cr(gr,yr,mr),Object.defineProperty(fr,mr,{enumerable:!0,value:gr,writable:!1})}}return properties.defineProperties=dr,properties}var hasRequiredErrors;function requireErrors(){if(hasRequiredErrors)return errors;hasRequiredErrors=1,Object.defineProperty(errors,"__esModule",{value:!0}),errors.assertPrivate=errors.assertNormalize=errors.assertArgumentCount=errors.assertArgument=errors.assert=errors.makeError=errors.isCallException=errors.isError=void 0;const cr=require_version(),ar=requireProperties();function dr(Sr){if(Sr==null)return"null";if(Array.isArray(Sr))return"[ "+Sr.map(dr).join(", ")+" ]";if(Sr instanceof Uint8Array){const vr="0123456789abcdef";let Er="0x";for(let Ar=0;Ar<Sr.length;Ar++)Er+=vr[Sr[Ar]>>4],Er+=vr[Sr[Ar]&15];return Er}if(typeof Sr=="object"&&typeof Sr.toJSON=="function")return dr(Sr.toJSON());switch(typeof Sr){case"boolean":case"symbol":return Sr.toString();case"bigint":return BigInt(Sr).toString();case"number":return Sr.toString();case"string":return JSON.stringify(Sr);case"object":{const vr=Object.keys(Sr);return vr.sort(),"{ "+vr.map(Er=>`${dr(Er)}: ${dr(Sr[Er])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function fr(Sr,vr){return Sr&&Sr.code===vr}errors.isError=fr;function hr(Sr){return fr(Sr,"CALL_EXCEPTION")}errors.isCallException=hr;function pr(Sr,vr,Er){let Ar=Sr;{const Cr=[];if(Er){if("message"in Er||"code"in Er||"name"in Er)throw new Error(`value will overwrite populated values: ${dr(Er)}`);for(const kr in Er){if(kr==="shortMessage")continue;const Rr=Er[kr];Cr.push(kr+"="+dr(Rr))}}Cr.push(`code=${vr}`),Cr.push(`version=${cr.version}`),Cr.length&&(Sr+=" ("+Cr.join(", ")+")")}let _r;switch(vr){case"INVALID_ARGUMENT":_r=new TypeError(Sr);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":_r=new RangeError(Sr);break;default:_r=new Error(Sr)}return(0,ar.defineProperties)(_r,{code:vr}),Er&&Object.assign(_r,Er),_r.shortMessage==null&&(0,ar.defineProperties)(_r,{shortMessage:Ar}),_r}errors.makeError=pr;function mr(Sr,vr,Er,Ar){if(!Sr)throw pr(vr,Er,Ar)}errors.assert=mr;function gr(Sr,vr,Er,Ar){mr(Sr,vr,"INVALID_ARGUMENT",{argument:Er,value:Ar})}errors.assertArgument=gr;function yr(Sr,vr,Er){Er==null&&(Er=""),Er&&(Er=": "+Er),mr(Sr>=vr,"missing arguemnt"+Er,"MISSING_ARGUMENT",{count:Sr,expectedCount:vr}),mr(Sr<=vr,"too many arguemnts"+Er,"UNEXPECTED_ARGUMENT",{count:Sr,expectedCount:vr})}errors.assertArgumentCount=yr;const xr=["NFD","NFC","NFKD","NFKC"].reduce((Sr,vr)=>{try{if("test".normalize(vr)!=="test")throw new Error("bad");if(vr==="NFD"){const Er=String.fromCharCode(233).normalize("NFD"),Ar=String.fromCharCode(101,769);if(Er!==Ar)throw new Error("broken")}Sr.push(vr)}catch{}return Sr},[]);function wr(Sr){mr(xr.indexOf(Sr)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:Sr}})}errors.assertNormalize=wr;function br(Sr,vr,Er){if(Er==null&&(Er=""),Sr!==vr){let Ar=Er,_r="new";Er&&(Ar+=".",_r+=" "+Er),mr(!1,`private constructor; use ${Ar}from* methods`,"UNSUPPORTED_OPERATION",{operation:_r})}}return errors.assertPrivate=br,errors}var hasRequiredData;function requireData(){if(hasRequiredData)return data;hasRequiredData=1,Object.defineProperty(data,"__esModule",{value:!0}),data.zeroPadBytes=data.zeroPadValue=data.stripZerosLeft=data.dataSlice=data.dataLength=data.concat=data.hexlify=data.isBytesLike=data.isHexString=data.getBytesCopy=data.getBytes=void 0;const cr=requireErrors();function ar(Ar,_r,Cr){if(Ar instanceof Uint8Array)return Cr?new Uint8Array(Ar):Ar;if(typeof Ar=="string"&&Ar.match(/^0x([0-9a-f][0-9a-f])*$/i)){const kr=new Uint8Array((Ar.length-2)/2);let Rr=2;for(let Ir=0;Ir<kr.length;Ir++)kr[Ir]=parseInt(Ar.substring(Rr,Rr+2),16),Rr+=2;return kr}(0,cr.assertArgument)(!1,"invalid BytesLike value",_r||"value",Ar)}function dr(Ar,_r){return ar(Ar,_r,!1)}data.getBytes=dr;function fr(Ar,_r){return ar(Ar,_r,!0)}data.getBytesCopy=fr;function hr(Ar,_r){return!(typeof Ar!="string"||!Ar.match(/^0x[0-9A-Fa-f]*$/)||typeof _r=="number"&&Ar.length!==2+2*_r||_r===!0&&Ar.length%2!==0)}data.isHexString=hr;function pr(Ar){return hr(Ar,!0)||Ar instanceof Uint8Array}data.isBytesLike=pr;const mr="0123456789abcdef";function gr(Ar){const _r=dr(Ar);let Cr="0x";for(let kr=0;kr<_r.length;kr++){const Rr=_r[kr];Cr+=mr[(Rr&240)>>4]+mr[Rr&15]}return Cr}data.hexlify=gr;function yr(Ar){return"0x"+Ar.map(_r=>gr(_r).substring(2)).join("")}data.concat=yr;function xr(Ar){return hr(Ar,!0)?(Ar.length-2)/2:dr(Ar).length}data.dataLength=xr;function wr(Ar,_r,Cr){const kr=dr(Ar);return Cr!=null&&Cr>kr.length&&(0,cr.assert)(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:kr,length:kr.length,offset:Cr}),gr(kr.slice(_r??0,Cr??kr.length))}data.dataSlice=wr;function br(Ar){let _r=gr(Ar).substring(2);for(;_r.startsWith("00");)_r=_r.substring(2);return"0x"+_r}data.stripZerosLeft=br;function Sr(Ar,_r,Cr){const kr=dr(Ar);(0,cr.assert)(_r>=kr.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(kr),length:_r,offset:_r+1});const Rr=new Uint8Array(_r);return Rr.fill(0),Cr?Rr.set(kr,_r-kr.length):Rr.set(kr,0),gr(Rr)}function vr(Ar,_r){return Sr(Ar,_r,!0)}data.zeroPadValue=vr;function Er(Ar,_r){return Sr(Ar,_r,!1)}return data.zeroPadBytes=Er,data}var maths={},hasRequiredMaths;function requireMaths(){if(hasRequiredMaths)return maths;hasRequiredMaths=1,Object.defineProperty(maths,"__esModule",{value:!0}),maths.toQuantity=maths.toBeArray=maths.toBeHex=maths.toNumber=maths.getNumber=maths.toBigInt=maths.getUint=maths.getBigInt=maths.mask=maths.toTwos=maths.fromTwos=void 0;const cr=requireData(),ar=requireErrors(),dr=BigInt(0),fr=BigInt(1),hr=9007199254740991;function pr(Cr,kr){const Rr=xr(Cr,"value"),Ir=BigInt(Sr(kr,"width"));if((0,ar.assert)(Rr>>Ir===dr,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:Cr}),Rr>>Ir-fr){const Nr=(fr<<Ir)-fr;return-((~Rr&Nr)+fr)}return Rr}maths.fromTwos=pr;function mr(Cr,kr){let Rr=yr(Cr,"value");const Ir=BigInt(Sr(kr,"width")),Nr=fr<<Ir-fr;if(Rr<dr){Rr=-Rr,(0,ar.assert)(Rr<=Nr,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:Cr});const Pr=(fr<<Ir)-fr;return(~Rr&Pr)+fr}else(0,ar.assert)(Rr<Nr,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:Cr});return Rr}maths.toTwos=mr;function gr(Cr,kr){const Rr=xr(Cr,"value"),Ir=BigInt(Sr(kr,"bits"));return Rr&(fr<<Ir)-fr}maths.mask=gr;function yr(Cr,kr){switch(typeof Cr){case"bigint":return Cr;case"number":return(0,ar.assertArgument)(Number.isInteger(Cr),"underflow",kr||"value",Cr),(0,ar.assertArgument)(Cr>=-hr&&Cr<=hr,"overflow",kr||"value",Cr),BigInt(Cr);case"string":try{if(Cr==="")throw new Error("empty string");return Cr[0]==="-"&&Cr[1]!=="-"?-BigInt(Cr.substring(1)):BigInt(Cr)}catch(Rr){(0,ar.assertArgument)(!1,`invalid BigNumberish string: ${Rr.message}`,kr||"value",Cr)}}(0,ar.assertArgument)(!1,"invalid BigNumberish value",kr||"value",Cr)}maths.getBigInt=yr;function xr(Cr,kr){const Rr=yr(Cr,kr);return(0,ar.assert)(Rr>=dr,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:Cr}),Rr}maths.getUint=xr;const wr="0123456789abcdef";function br(Cr){if(Cr instanceof Uint8Array){let kr="0x0";for(const Rr of Cr)kr+=wr[Rr>>4],kr+=wr[Rr&15];return BigInt(kr)}return yr(Cr)}maths.toBigInt=br;function Sr(Cr,kr){switch(typeof Cr){case"bigint":return(0,ar.assertArgument)(Cr>=-hr&&Cr<=hr,"overflow",kr||"value",Cr),Number(Cr);case"number":return(0,ar.assertArgument)(Number.isInteger(Cr),"underflow",kr||"value",Cr),(0,ar.assertArgument)(Cr>=-hr&&Cr<=hr,"overflow",kr||"value",Cr),Cr;case"string":try{if(Cr==="")throw new Error("empty string");return Sr(BigInt(Cr),kr)}catch(Rr){(0,ar.assertArgument)(!1,`invalid numeric string: ${Rr.message}`,kr||"value",Cr)}}(0,ar.assertArgument)(!1,"invalid numeric value",kr||"value",Cr)}maths.getNumber=Sr;function vr(Cr){return Sr(br(Cr))}maths.toNumber=vr;function Er(Cr,kr){let Ir=xr(Cr,"value").toString(16);if(kr==null)Ir.length%2&&(Ir="0"+Ir);else{const Nr=Sr(kr,"width");for((0,ar.assert)(Nr*2>=Ir.length,`value exceeds width (${Nr} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:Cr});Ir.length<Nr*2;)Ir="0"+Ir}return"0x"+Ir}maths.toBeHex=Er;function Ar(Cr){const kr=xr(Cr,"value");if(kr===dr)return new Uint8Array([]);let Rr=kr.toString(16);Rr.length%2&&(Rr="0"+Rr);const Ir=new Uint8Array(Rr.length/2);for(let Nr=0;Nr<Ir.length;Nr++){const Pr=Nr*2;Ir[Nr]=parseInt(Rr.substring(Pr,Pr+2),16)}return Ir}maths.toBeArray=Ar;function _r(Cr){let kr=(0,cr.hexlify)((0,cr.isBytesLike)(Cr)?Cr:Ar(Cr)).substring(2);for(;kr.startsWith("0");)kr=kr.substring(1);return kr===""&&(kr="0"),"0x"+kr}return maths.toQuantity=_r,maths}var hasRequiredBase58;function requireBase58(){if(hasRequiredBase58)return base58$2;hasRequiredBase58=1,Object.defineProperty(base58$2,"__esModule",{value:!0}),base58$2.decodeBase58=base58$2.encodeBase58=void 0;const cr=requireData(),ar=requireErrors(),dr=requireMaths(),fr="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let hr=null;function pr(wr){if(hr==null){hr={};for(let Sr=0;Sr<fr.length;Sr++)hr[fr[Sr]]=BigInt(Sr)}const br=hr[wr];return(0,ar.assertArgument)(br!=null,"invalid base58 value","letter",wr),br}const mr=BigInt(0),gr=BigInt(58);function yr(wr){let br=(0,dr.toBigInt)((0,cr.getBytes)(wr)),Sr="";for(;br;)Sr=fr[Number(br%gr)]+Sr,br/=gr;return Sr}base58$2.encodeBase58=yr;function xr(wr){let br=mr;for(let Sr=0;Sr<wr.length;Sr++)br*=gr,br+=pr(wr[Sr]);return br}return base58$2.decodeBase58=xr,base58$2}var base64Browser={},hasRequiredBase64Browser;function requireBase64Browser(){if(hasRequiredBase64Browser)return base64Browser;hasRequiredBase64Browser=1,Object.defineProperty(base64Browser,"__esModule",{value:!0}),base64Browser.encodeBase64=base64Browser.decodeBase64=void 0;const cr=requireData();function ar(fr){fr=atob(fr);const hr=new Uint8Array(fr.length);for(let pr=0;pr<fr.length;pr++)hr[pr]=fr.charCodeAt(pr);return(0,cr.getBytes)(hr)}base64Browser.decodeBase64=ar;function dr(fr){const hr=(0,cr.getBytes)(fr);let pr="";for(let mr=0;mr<hr.length;mr++)pr+=String.fromCharCode(hr[mr]);return btoa(pr)}return base64Browser.encodeBase64=dr,base64Browser}var events$1={},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events$1;hasRequiredEvents=1,Object.defineProperty(events$1,"__esModule",{value:!0}),events$1.EventPayload=void 0;const cr=requireProperties();class ar{filter;emitter;#e;constructor(fr,hr,pr){this.#e=hr,(0,cr.defineProperties)(this,{emitter:fr,filter:pr})}async removeListener(){this.#e!=null&&await this.emitter.off(this.filter,this.#e)}}return events$1.EventPayload=ar,events$1}var fetch$2={},utf8$3={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.toUtf8CodePoints=cr.toUtf8String=cr.toUtf8Bytes=cr.Utf8ErrorFuncs=void 0;const ar=requireData(),dr=requireErrors();function fr(br,Sr,vr,Er,Ar){(0,dr.assertArgument)(!1,`invalid codepoint at offset ${Sr}; ${br}`,"bytes",vr)}function hr(br,Sr,vr,Er,Ar){if(br==="BAD_PREFIX"||br==="UNEXPECTED_CONTINUE"){let _r=0;for(let Cr=Sr+1;Cr<vr.length&&vr[Cr]>>6===2;Cr++)_r++;return _r}return br==="OVERRUN"?vr.length-Sr-1:0}function pr(br,Sr,vr,Er,Ar){return br==="OVERLONG"?((0,dr.assertArgument)(typeof Ar=="number","invalid bad code point for replacement","badCodepoint",Ar),Er.push(Ar),0):(Er.push(65533),hr(br,Sr,vr))}cr.Utf8ErrorFuncs=Object.freeze({error:fr,ignore:hr,replace:pr});function mr(br,Sr){Sr==null&&(Sr=cr.Utf8ErrorFuncs.error);const vr=(0,ar.getBytes)(br,"bytes"),Er=[];let Ar=0;for(;Ar<vr.length;){const _r=vr[Ar++];if(!(_r>>7)){Er.push(_r);continue}let Cr=null,kr=null;if((_r&224)===192)Cr=1,kr=127;else if((_r&240)===224)Cr=2,kr=2047;else if((_r&248)===240)Cr=3,kr=65535;else{(_r&192)===128?Ar+=Sr("UNEXPECTED_CONTINUE",Ar-1,vr,Er):Ar+=Sr("BAD_PREFIX",Ar-1,vr,Er);continue}if(Ar-1+Cr>=vr.length){Ar+=Sr("OVERRUN",Ar-1,vr,Er);continue}let Rr=_r&(1<<8-Cr-1)-1;for(let Ir=0;Ir<Cr;Ir++){let Nr=vr[Ar];if((Nr&192)!=128){Ar+=Sr("MISSING_CONTINUE",Ar,vr,Er),Rr=null;break}Rr=Rr<<6|Nr&63,Ar++}if(Rr!==null){if(Rr>1114111){Ar+=Sr("OUT_OF_RANGE",Ar-1-Cr,vr,Er,Rr);continue}if(Rr>=55296&&Rr<=57343){Ar+=Sr("UTF16_SURROGATE",Ar-1-Cr,vr,Er,Rr);continue}if(Rr<=kr){Ar+=Sr("OVERLONG",Ar-1-Cr,vr,Er,Rr);continue}Er.push(Rr)}}return Er}function gr(br,Sr){Sr!=null&&((0,dr.assertNormalize)(Sr),br=br.normalize(Sr));let vr=[];for(let Er=0;Er<br.length;Er++){const Ar=br.charCodeAt(Er);if(Ar<128)vr.push(Ar);else if(Ar<2048)vr.push(Ar>>6|192),vr.push(Ar&63|128);else if((Ar&64512)==55296){Er++;const _r=br.charCodeAt(Er);(0,dr.assertArgument)(Er<br.length&&(_r&64512)===56320,"invalid surrogate pair","str",br);const Cr=65536+((Ar&1023)<<10)+(_r&1023);vr.push(Cr>>18|240),vr.push(Cr>>12&63|128),vr.push(Cr>>6&63|128),vr.push(Cr&63|128)}else vr.push(Ar>>12|224),vr.push(Ar>>6&63|128),vr.push(Ar&63|128)}return new Uint8Array(vr)}cr.toUtf8Bytes=gr;function yr(br){return br.map(Sr=>Sr<=65535?String.fromCharCode(Sr):(Sr-=65536,String.fromCharCode((Sr>>10&1023)+55296,(Sr&1023)+56320))).join("")}function xr(br,Sr){return yr(mr(br,Sr))}cr.toUtf8String=xr;function wr(br,Sr){return mr(gr(br,Sr))}cr.toUtf8CodePoints=wr}(utf8$3)),utf8$3}var geturlBrowser={},hasRequiredGeturlBrowser;function requireGeturlBrowser(){if(hasRequiredGeturlBrowser)return geturlBrowser;hasRequiredGeturlBrowser=1,Object.defineProperty(geturlBrowser,"__esModule",{value:!0}),geturlBrowser.getUrl=geturlBrowser.createGetUrl=void 0;const cr=requireErrors();function ar(hr){async function pr(mr,gr){const yr=mr.url.split(":")[0].toLowerCase();(0,cr.assert)(yr==="http"||yr==="https",`unsupported protocol ${yr}`,"UNSUPPORTED_OPERATION",{info:{protocol:yr},operation:"request"}),(0,cr.assert)(yr==="https"||!mr.credentials||mr.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let xr;if(gr){const Ar=new AbortController;xr=Ar.signal,gr.addListener(()=>{Ar.abort()})}const wr={method:mr.method,headers:new Headers(Array.from(mr)),body:mr.body||void 0,signal:xr},br=await fetch(mr.url,wr),Sr={};br.headers.forEach((Ar,_r)=>{Sr[_r.toLowerCase()]=Ar});const vr=await br.arrayBuffer(),Er=vr==null?null:new Uint8Array(vr);return{statusCode:br.status,statusMessage:br.statusText,headers:Sr,body:Er}}return pr}geturlBrowser.createGetUrl=ar;const dr=ar();async function fr(hr,pr){return dr(hr,pr)}return geturlBrowser.getUrl=fr,geturlBrowser}var hasRequiredFetch;function requireFetch(){if(hasRequiredFetch)return fetch$2;hasRequiredFetch=1,Object.defineProperty(fetch$2,"__esModule",{value:!0}),fetch$2.FetchResponse=fetch$2.FetchRequest=fetch$2.FetchCancelSignal=void 0;const cr=requireBase64Browser(),ar=requireData(),dr=requireErrors(),fr=requireProperties(),hr=requireUtf8(),pr=requireGeturlBrowser(),mr=12,gr=250;let yr=(0,pr.createGetUrl)();const xr=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),wr=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let br=!1;async function Sr(Tr,Br){try{const Fr=Tr.match(xr);if(!Fr)throw new Error("invalid data");return new Rr(200,"OK",{"content-type":Fr[1]||"text/plain"},Fr[2]?(0,cr.decodeBase64)(Fr[3]):Nr(Fr[3]))}catch{return new Rr(599,"BAD REQUEST (invalid data: URI)",{},null,new kr(Tr))}}function vr(Tr){async function Br(Fr,jr){try{const Ur=Fr.match(wr);if(!Ur)throw new Error("invalid link");return new kr(`${Tr}${Ur[2]}`)}catch{return new Rr(599,"BAD REQUEST (invalid IPFS URI)",{},null,new kr(Fr))}}return Br}const Er={data:Sr,ipfs:vr("https://gateway.ipfs.io/ipfs/")},Ar=new WeakMap;class _r{#e;#t;constructor(Br){this.#e=[],this.#t=!1,Ar.set(Br,()=>{if(!this.#t){this.#t=!0;for(const Fr of this.#e)setTimeout(()=>{Fr()},0);this.#e=[]}})}addListener(Br){(0,dr.assert)(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(Br)}get cancelled(){return this.#t}checkSignal(){(0,dr.assert)(!this.cancelled,"cancelled","CANCELLED",{})}}fetch$2.FetchCancelSignal=_r;function Cr(Tr){if(Tr==null)throw new Error("missing signal; should not happen");return Tr.checkSignal(),Tr}class kr{#e;#t;#r;#n;#s;#a;#i;#o;#c;#d;#u;#f;#l;#h;#m;get url(){return this.#a}set url(Br){this.#a=String(Br)}get body(){return this.#i==null?null:new Uint8Array(this.#i)}set body(Br){if(Br==null)this.#i=void 0,this.#o=void 0;else if(typeof Br=="string")this.#i=(0,hr.toUtf8Bytes)(Br),this.#o="text/plain";else if(Br instanceof Uint8Array)this.#i=Br,this.#o="application/octet-stream";else if(typeof Br=="object")this.#i=(0,hr.toUtf8Bytes)(JSON.stringify(Br)),this.#o="application/json";else throw new Error("invalid body")}hasBody(){return this.#i!=null}get method(){return this.#n?this.#n:this.hasBody()?"POST":"GET"}set method(Br){Br==null&&(Br=""),this.#n=String(Br).toUpperCase()}get headers(){const Br=Object.assign({},this.#r);return this.#c&&(Br.authorization=`Basic ${(0,cr.encodeBase64)((0,hr.toUtf8Bytes)(this.#c))}`),this.allowGzip&&(Br["accept-encoding"]="gzip"),Br["content-type"]==null&&this.#o&&(Br["content-type"]=this.#o),this.body&&(Br["content-length"]=String(this.body.length)),Br}getHeader(Br){return this.headers[Br.toLowerCase()]}setHeader(Br,Fr){this.#r[String(Br).toLowerCase()]=String(Fr)}clearHeaders(){this.#r={}}[Symbol.iterator](){const Br=this.headers,Fr=Object.keys(Br);let jr=0;return{next:()=>{if(jr<Fr.length){const Ur=Fr[jr++];return{value:[Ur,Br[Ur]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#c||null}setCredentials(Br,Fr){(0,dr.assertArgument)(!Br.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#c=`${Br}:${Fr}`}get allowGzip(){return this.#t}set allowGzip(Br){this.#t=!!Br}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(Br){this.#e=!!Br}get timeout(){return this.#s}set timeout(Br){(0,dr.assertArgument)(Br>=0,"timeout must be non-zero","timeout",Br),this.#s=Br}get preflightFunc(){return this.#d||null}set preflightFunc(Br){this.#d=Br}get processFunc(){return this.#u||null}set processFunc(Br){this.#u=Br}get retryFunc(){return this.#f||null}set retryFunc(Br){this.#f=Br}get getUrlFunc(){return this.#m||yr}set getUrlFunc(Br){this.#m=Br}constructor(Br){this.#a=String(Br),this.#e=!1,this.#t=!0,this.#r={},this.#n="",this.#s=3e5,this.#h={slotInterval:gr,maxAttempts:mr},this.#m=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#i?(0,ar.hexlify)(this.#i):"null"}>`}setThrottleParams(Br){Br.slotInterval!=null&&(this.#h.slotInterval=Br.slotInterval),Br.maxAttempts!=null&&(this.#h.maxAttempts=Br.maxAttempts)}async#p(Br,Fr,jr,Ur,qr){if(Br>=this.#h.maxAttempts)return qr.makeServerError("exceeded maximum retry limit");(0,dr.assert)(Ir()<=Fr,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:Ur}),jr>0&&await Pr(jr);let Hr=this.clone();const Or=(Hr.url.split(":")[0]||"").toLowerCase();if(Or in Er){const Vr=await Er[Or](Hr.url,Cr(Ur.#l));if(Vr instanceof Rr){let Jr=Vr;if(this.processFunc){Cr(Ur.#l);try{Jr=await this.processFunc(Hr,Jr)}catch(es){(es.throttle==null||typeof es.stall!="number")&&Jr.makeServerError("error in post-processing function",es).assertOk()}}return Jr}Hr=Vr}this.preflightFunc&&(Hr=await this.preflightFunc(Hr));const Mr=await this.getUrlFunc(Hr,Cr(Ur.#l));let Lr=new Rr(Mr.statusCode,Mr.statusMessage,Mr.headers,Mr.body,Ur);if(Lr.statusCode===301||Lr.statusCode===302){try{const Vr=Lr.headers.location||"";return Hr.redirect(Vr).#p(Br+1,Fr,0,Ur,Lr)}catch{}return Lr}else if(Lr.statusCode===429&&(this.retryFunc==null||await this.retryFunc(Hr,Lr,Br))){const Vr=Lr.headers["retry-after"];let Jr=this.#h.slotInterval*Math.trunc(Math.random()*Math.pow(2,Br));return typeof Vr=="string"&&Vr.match(/^[1-9][0-9]*$/)&&(Jr=parseInt(Vr)),Hr.clone().#p(Br+1,Fr,Jr,Ur,Lr)}if(this.processFunc){Cr(Ur.#l);try{Lr=await this.processFunc(Hr,Lr)}catch(Vr){(Vr.throttle==null||typeof Vr.stall!="number")&&Lr.makeServerError("error in post-processing function",Vr).assertOk();let Jr=this.#h.slotInterval*Math.trunc(Math.random()*Math.pow(2,Br));return Vr.stall>=0&&(Jr=Vr.stall),Hr.clone().#p(Br+1,Fr,Jr,Ur,Lr)}}return Lr}send(){return(0,dr.assert)(this.#l==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#l=new _r(this),this.#p(0,Ir()+this.timeout,0,this,new Rr(0,"",{},null,this))}cancel(){(0,dr.assert)(this.#l!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const Br=Ar.get(this);if(!Br)throw new Error("missing signal; should not happen");Br()}redirect(Br){const Fr=this.url.split(":")[0].toLowerCase(),jr=Br.split(":")[0].toLowerCase();(0,dr.assert)(this.method==="GET"&&(Fr!=="https"||jr!=="http")&&Br.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(Br)})`});const Ur=new kr(Br);return Ur.method="GET",Ur.allowGzip=this.allowGzip,Ur.timeout=this.timeout,Ur.#r=Object.assign({},this.#r),this.#i&&(Ur.#i=new Uint8Array(this.#i)),Ur.#o=this.#o,Ur}clone(){const Br=new kr(this.url);return Br.#n=this.#n,this.#i&&(Br.#i=this.#i),Br.#o=this.#o,Br.#r=Object.assign({},this.#r),Br.#c=this.#c,this.allowGzip&&(Br.allowGzip=!0),Br.timeout=this.timeout,this.allowInsecureAuthentication&&(Br.allowInsecureAuthentication=!0),Br.#d=this.#d,Br.#u=this.#u,Br.#f=this.#f,Br.#m=this.#m,Br}static lockConfig(){br=!0}static getGateway(Br){return Er[Br.toLowerCase()]||null}static registerGateway(Br,Fr){if(Br=Br.toLowerCase(),Br==="http"||Br==="https")throw new Error(`cannot intercept ${Br}; use registerGetUrl`);if(br)throw new Error("gateways locked");Er[Br]=Fr}static registerGetUrl(Br){if(br)throw new Error("gateways locked");yr=Br}static createGetUrlFunc(Br){return(0,pr.createGetUrl)(Br)}static createDataGateway(){return Sr}static createIpfsGatewayFunc(Br){return vr(Br)}}fetch$2.FetchRequest=kr;class Rr{#e;#t;#r;#n;#s;#a;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#n?(0,ar.hexlify)(this.#n):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#r)}get body(){return this.#n==null?null:new Uint8Array(this.#n)}get bodyText(){try{return this.#n==null?"":(0,hr.toUtf8String)(this.#n)}catch{(0,dr.assert)(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{(0,dr.assert)(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const Br=this.headers,Fr=Object.keys(Br);let jr=0;return{next:()=>{if(jr<Fr.length){const Ur=Fr[jr++];return{value:[Ur,Br[Ur]],done:!1}}return{value:void 0,done:!0}}}}constructor(Br,Fr,jr,Ur,qr){this.#e=Br,this.#t=Fr,this.#r=Object.keys(jr).reduce((Hr,Or)=>(Hr[Or.toLowerCase()]=String(jr[Or]),Hr),{}),this.#n=Ur==null?null:new Uint8Array(Ur),this.#s=qr||null,this.#a={message:""}}makeServerError(Br,Fr){let jr;Br?jr=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${Br})`:(Br=`${this.statusCode} ${this.statusMessage}`,jr=`CLIENT ESCALATED SERVER ERROR (${Br})`);const Ur=new Rr(599,jr,this.headers,this.body,this.#s||void 0);return Ur.#a={message:Br,error:Fr},Ur}throwThrottleError(Br,Fr){Fr==null?Fr=-1:(0,dr.assertArgument)(Number.isInteger(Fr)&&Fr>=0,"invalid stall timeout","stall",Fr);const jr=new Error(Br||"throttling requests");throw(0,fr.defineProperties)(jr,{stall:Fr,throttle:!0}),jr}getHeader(Br){return this.headers[Br.toLowerCase()]}hasBody(){return this.#n!=null}get request(){return this.#s}ok(){return this.#a.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:Br,error:Fr}=this.#a;Br===""&&(Br=`server response ${this.statusCode} ${this.statusMessage}`),(0,dr.assert)(!1,Br,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:Fr})}}fetch$2.FetchResponse=Rr;function Ir(){return new Date().getTime()}function Nr(Tr){return(0,hr.toUtf8Bytes)(Tr.replace(/%([0-9a-f][0-9a-f])/gi,(Br,Fr)=>String.fromCharCode(parseInt(Fr,16))))}function Pr(Tr){return new Promise(Br=>setTimeout(Br,Tr))}return fetch$2}var fixednumber={},hasRequiredFixednumber;function requireFixednumber(){if(hasRequiredFixednumber)return fixednumber;hasRequiredFixednumber=1,Object.defineProperty(fixednumber,"__esModule",{value:!0}),fixednumber.FixedNumber=void 0;const cr=requireData(),ar=requireErrors(),dr=requireMaths(),fr=requireProperties(),hr=BigInt(-1),pr=BigInt(0),mr=BigInt(1),gr=BigInt(5),yr={};let xr="0000";for(;xr.length<80;)xr+=xr;function wr(Ar){let _r=xr;for(;_r.length<Ar;)_r+=_r;return BigInt("1"+_r.substring(0,Ar))}function br(Ar,_r,Cr){const kr=BigInt(_r.width);if(_r.signed){const Rr=mr<<kr-mr;(0,ar.assert)(Cr==null||Ar>=-Rr&&Ar<Rr,"overflow","NUMERIC_FAULT",{operation:Cr,fault:"overflow",value:Ar}),Ar>pr?Ar=(0,dr.fromTwos)((0,dr.mask)(Ar,kr),kr):Ar=-(0,dr.fromTwos)((0,dr.mask)(-Ar,kr),kr)}else{const Rr=mr<<kr;(0,ar.assert)(Cr==null||Ar>=0&&Ar<Rr,"overflow","NUMERIC_FAULT",{operation:Cr,fault:"overflow",value:Ar}),Ar=(Ar%Rr+Rr)%Rr&Rr-mr}return Ar}function Sr(Ar){typeof Ar=="number"&&(Ar=`fixed128x${Ar}`);let _r=!0,Cr=128,kr=18;if(typeof Ar=="string"){if(Ar!=="fixed")if(Ar==="ufixed")_r=!1;else{const Ir=Ar.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);(0,ar.assertArgument)(Ir,"invalid fixed format","format",Ar),_r=Ir[1]!=="u",Cr=parseInt(Ir[2]),kr=parseInt(Ir[3])}}else if(Ar){const Ir=Ar,Nr=(Pr,Tr,Br)=>Ir[Pr]==null?Br:((0,ar.assertArgument)(typeof Ir[Pr]===Tr,"invalid fixed format ("+Pr+" not "+Tr+")","format."+Pr,Ir[Pr]),Ir[Pr]);_r=Nr("signed","boolean",_r),Cr=Nr("width","number",Cr),kr=Nr("decimals","number",kr)}(0,ar.assertArgument)(Cr%8===0,"invalid FixedNumber width (not byte aligned)","format.width",Cr),(0,ar.assertArgument)(kr<=80,"invalid FixedNumber decimals (too large)","format.decimals",kr);const Rr=(_r?"":"u")+"fixed"+String(Cr)+"x"+String(kr);return{signed:_r,width:Cr,decimals:kr,name:Rr}}function vr(Ar,_r){let Cr="";Ar<pr&&(Cr="-",Ar*=hr);let kr=Ar.toString();if(_r===0)return Cr+kr;for(;kr.length<=_r;)kr=xr+kr;const Rr=kr.length-_r;for(kr=kr.substring(0,Rr)+"."+kr.substring(Rr);kr[0]==="0"&&kr[1]!==".";)kr=kr.substring(1);for(;kr[kr.length-1]==="0"&&kr[kr.length-2]!==".";)kr=kr.substring(0,kr.length-1);return Cr+kr}class Er{format;#e;#t;#r;_value;constructor(_r,Cr,kr){(0,ar.assertPrivate)(_r,yr,"FixedNumber"),this.#t=Cr,this.#e=kr;const Rr=vr(Cr,kr.decimals);(0,fr.defineProperties)(this,{format:kr.name,_value:Rr}),this.#r=wr(kr.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#n(_r){(0,ar.assertArgument)(this.format===_r.format,"incompatible format; use fixedNumber.toFormat","other",_r)}#s(_r,Cr){return _r=br(_r,this.#e,Cr),new Er(yr,_r,this.#e)}#a(_r,Cr){return this.#n(_r),this.#s(this.#t+_r.#t,Cr)}addUnsafe(_r){return this.#a(_r)}add(_r){return this.#a(_r,"add")}#i(_r,Cr){return this.#n(_r),this.#s(this.#t-_r.#t,Cr)}subUnsafe(_r){return this.#i(_r)}sub(_r){return this.#i(_r,"sub")}#o(_r,Cr){return this.#n(_r),this.#s(this.#t*_r.#t/this.#r,Cr)}mulUnsafe(_r){return this.#o(_r)}mul(_r){return this.#o(_r,"mul")}mulSignal(_r){this.#n(_r);const Cr=this.#t*_r.#t;return(0,ar.assert)(Cr%this.#r===pr,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#s(Cr/this.#r,"mulSignal")}#c(_r,Cr){return(0,ar.assert)(_r.#t!==pr,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#n(_r),this.#s(this.#t*this.#r/_r.#t,Cr)}divUnsafe(_r){return this.#c(_r)}div(_r){return this.#c(_r,"div")}divSignal(_r){(0,ar.assert)(_r.#t!==pr,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#n(_r);const Cr=this.#t*this.#r;return(0,ar.assert)(Cr%_r.#t===pr,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#s(Cr/_r.#t,"divSignal")}cmp(_r){let Cr=this.value,kr=_r.value;const Rr=this.decimals-_r.decimals;return Rr>0?kr*=wr(Rr):Rr<0&&(Cr*=wr(-Rr)),Cr<kr?-1:Cr>kr?1:0}eq(_r){return this.cmp(_r)===0}lt(_r){return this.cmp(_r)<0}lte(_r){return this.cmp(_r)<=0}gt(_r){return this.cmp(_r)>0}gte(_r){return this.cmp(_r)>=0}floor(){let _r=this.#t;return this.#t<pr&&(_r-=this.#r-mr),_r=this.#t/this.#r*this.#r,this.#s(_r,"floor")}ceiling(){let _r=this.#t;return this.#t>pr&&(_r+=this.#r-mr),_r=this.#t/this.#r*this.#r,this.#s(_r,"ceiling")}round(_r){if(_r==null&&(_r=0),_r>=this.decimals)return this;const Cr=this.decimals-_r,kr=gr*wr(Cr-1);let Rr=this.value+kr;const Ir=wr(Cr);return Rr=Rr/Ir*Ir,br(Rr,this.#e,"round"),new Er(yr,Rr,this.#e)}isZero(){return this.#t===pr}isNegative(){return this.#t<pr}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(_r){return Er.fromString(this.toString(),_r)}static fromValue(_r,Cr,kr){const Rr=Cr==null?0:(0,dr.getNumber)(Cr),Ir=Sr(kr);let Nr=(0,dr.getBigInt)(_r,"value");const Pr=Rr-Ir.decimals;if(Pr>0){const Tr=wr(Pr);(0,ar.assert)(Nr%Tr===pr,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:_r}),Nr/=Tr}else Pr<0&&(Nr*=wr(-Pr));return br(Nr,Ir,"fromValue"),new Er(yr,Nr,Ir)}static fromString(_r,Cr){const kr=_r.match(/^(-?)([0-9]*)\.?([0-9]*)$/);(0,ar.assertArgument)(kr&&kr[2].length+kr[3].length>0,"invalid FixedNumber string value","value",_r);const Rr=Sr(Cr);let Ir=kr[2]||"0",Nr=kr[3]||"";for(;Nr.length<Rr.decimals;)Nr+=xr;(0,ar.assert)(Nr.substring(Rr.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:_r}),Nr=Nr.substring(0,Rr.decimals);const Pr=BigInt(kr[1]+Ir+Nr);return br(Pr,Rr,"fromString"),new Er(yr,Pr,Rr)}static fromBytes(_r,Cr){let kr=(0,dr.toBigInt)((0,cr.getBytes)(_r,"value"));const Rr=Sr(Cr);return Rr.signed&&(kr=(0,dr.fromTwos)(kr,Rr.width)),br(kr,Rr,"fromBytes"),new Er(yr,kr,Rr)}}return fixednumber.FixedNumber=Er,fixednumber}var rlpDecode={},hasRequiredRlpDecode;function requireRlpDecode(){if(hasRequiredRlpDecode)return rlpDecode;hasRequiredRlpDecode=1,Object.defineProperty(rlpDecode,"__esModule",{value:!0}),rlpDecode.decodeRlp=void 0;const cr=requireData(),ar=requireErrors(),dr=requireData();function fr(yr){let xr=yr.toString(16);for(;xr.length<2;)xr="0"+xr;return"0x"+xr}function hr(yr,xr,wr){let br=0;for(let Sr=0;Sr<wr;Sr++)br=br*256+yr[xr+Sr];return br}function pr(yr,xr,wr,br){const Sr=[];for(;wr<xr+1+br;){const vr=mr(yr,wr);Sr.push(vr.result),wr+=vr.consumed,(0,ar.assert)(wr<=xr+1+br,"child data too short","BUFFER_OVERRUN",{buffer:yr,length:br,offset:xr})}return{consumed:1+br,result:Sr}}function mr(yr,xr){(0,ar.assert)(yr.length!==0,"data too short","BUFFER_OVERRUN",{buffer:yr,length:0,offset:1});const wr=br=>{(0,ar.assert)(br<=yr.length,"data short segment too short","BUFFER_OVERRUN",{buffer:yr,length:yr.length,offset:br})};if(yr[xr]>=248){const br=yr[xr]-247;wr(xr+1+br);const Sr=hr(yr,xr+1,br);return wr(xr+1+br+Sr),pr(yr,xr,xr+1+br,br+Sr)}else if(yr[xr]>=192){const br=yr[xr]-192;return wr(xr+1+br),pr(yr,xr,xr+1,br)}else if(yr[xr]>=184){const br=yr[xr]-183;wr(xr+1+br);const Sr=hr(yr,xr+1,br);wr(xr+1+br+Sr);const vr=(0,cr.hexlify)(yr.slice(xr+1+br,xr+1+br+Sr));return{consumed:1+br+Sr,result:vr}}else if(yr[xr]>=128){const br=yr[xr]-128;wr(xr+1+br);const Sr=(0,cr.hexlify)(yr.slice(xr+1,xr+1+br));return{consumed:1+br,result:Sr}}return{consumed:1,result:fr(yr[xr])}}function gr(yr){const xr=(0,dr.getBytes)(yr,"data"),wr=mr(xr,0);return(0,ar.assertArgument)(wr.consumed===xr.length,"unexpected junk after rlp payload","data",yr),wr.result}return rlpDecode.decodeRlp=gr,rlpDecode}var rlpEncode={},hasRequiredRlpEncode;function requireRlpEncode(){if(hasRequiredRlpEncode)return rlpEncode;hasRequiredRlpEncode=1,Object.defineProperty(rlpEncode,"__esModule",{value:!0}),rlpEncode.encodeRlp=void 0;const cr=requireData();function ar(pr){const mr=[];for(;pr;)mr.unshift(pr&255),pr>>=8;return mr}function dr(pr){if(Array.isArray(pr)){let yr=[];if(pr.forEach(function(wr){yr=yr.concat(dr(wr))}),yr.length<=55)return yr.unshift(192+yr.length),yr;const xr=ar(yr.length);return xr.unshift(247+xr.length),xr.concat(yr)}const mr=Array.prototype.slice.call((0,cr.getBytes)(pr,"object"));if(mr.length===1&&mr[0]<=127)return mr;if(mr.length<=55)return mr.unshift(128+mr.length),mr;const gr=ar(mr.length);return gr.unshift(183+gr.length),gr.concat(mr)}const fr="0123456789abcdef";function hr(pr){let mr="0x";for(const gr of dr(pr))mr+=fr[gr>>4],mr+=fr[gr&15];return mr}return rlpEncode.encodeRlp=hr,rlpEncode}var units={},hasRequiredUnits;function requireUnits(){if(hasRequiredUnits)return units;hasRequiredUnits=1,Object.defineProperty(units,"__esModule",{value:!0}),units.parseEther=units.formatEther=units.parseUnits=units.formatUnits=void 0;const cr=requireErrors(),ar=requireFixednumber(),dr=requireMaths(),fr=["wei","kwei","mwei","gwei","szabo","finney","ether"];function hr(yr,xr){let wr=18;if(typeof xr=="string"){const br=fr.indexOf(xr);(0,cr.assertArgument)(br>=0,"invalid unit","unit",xr),wr=3*br}else xr!=null&&(wr=(0,dr.getNumber)(xr,"unit"));return ar.FixedNumber.fromValue(yr,wr,{decimals:wr,width:512}).toString()}units.formatUnits=hr;function pr(yr,xr){(0,cr.assertArgument)(typeof yr=="string","value must be a string","value",yr);let wr=18;if(typeof xr=="string"){const br=fr.indexOf(xr);(0,cr.assertArgument)(br>=0,"invalid unit","unit",xr),wr=3*br}else xr!=null&&(wr=(0,dr.getNumber)(xr,"unit"));return ar.FixedNumber.fromString(yr,{decimals:wr,width:512}).value}units.parseUnits=pr;function mr(yr){return hr(yr,18)}units.formatEther=mr;function gr(yr){return pr(yr,18)}return units.parseEther=gr,units}var uuid={},hasRequiredUuid;function requireUuid(){if(hasRequiredUuid)return uuid;hasRequiredUuid=1,Object.defineProperty(uuid,"__esModule",{value:!0}),uuid.uuidV4=void 0;const cr=requireData();function ar(dr){const fr=(0,cr.getBytes)(dr,"randomBytes");fr[6]=fr[6]&15|64,fr[8]=fr[8]&63|128;const hr=(0,cr.hexlify)(fr);return[hr.substring(2,10),hr.substring(10,14),hr.substring(14,18),hr.substring(18,22),hr.substring(22,34)].join("-")}return uuid.uuidV4=ar,uuid}var hasRequiredUtils$1;function requireUtils$1(){return hasRequiredUtils$1||(hasRequiredUtils$1=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.toUtf8String=cr.toUtf8CodePoints=cr.toUtf8Bytes=cr.parseUnits=cr.formatUnits=cr.parseEther=cr.formatEther=cr.encodeRlp=cr.decodeRlp=cr.defineProperties=cr.resolveProperties=cr.toQuantity=cr.toBeArray=cr.toBeHex=cr.toNumber=cr.toBigInt=cr.getUint=cr.getNumber=cr.getBigInt=cr.mask=cr.toTwos=cr.fromTwos=cr.FixedNumber=cr.FetchCancelSignal=cr.FetchResponse=cr.FetchRequest=cr.EventPayload=cr.makeError=cr.assertNormalize=cr.assertPrivate=cr.assertArgumentCount=cr.assertArgument=cr.assert=cr.isError=cr.isCallException=cr.zeroPadBytes=cr.zeroPadValue=cr.stripZerosLeft=cr.dataSlice=cr.dataLength=cr.concat=cr.hexlify=cr.isBytesLike=cr.isHexString=cr.getBytesCopy=cr.getBytes=cr.encodeBase64=cr.decodeBase64=cr.encodeBase58=cr.decodeBase58=void 0,cr.uuidV4=cr.Utf8ErrorFuncs=void 0;var ar=requireBase58();Object.defineProperty(cr,"decodeBase58",{enumerable:!0,get:function(){return ar.decodeBase58}}),Object.defineProperty(cr,"encodeBase58",{enumerable:!0,get:function(){return ar.encodeBase58}});var dr=requireBase64Browser();Object.defineProperty(cr,"decodeBase64",{enumerable:!0,get:function(){return dr.decodeBase64}}),Object.defineProperty(cr,"encodeBase64",{enumerable:!0,get:function(){return dr.encodeBase64}});var fr=requireData();Object.defineProperty(cr,"getBytes",{enumerable:!0,get:function(){return fr.getBytes}}),Object.defineProperty(cr,"getBytesCopy",{enumerable:!0,get:function(){return fr.getBytesCopy}}),Object.defineProperty(cr,"isHexString",{enumerable:!0,get:function(){return fr.isHexString}}),Object.defineProperty(cr,"isBytesLike",{enumerable:!0,get:function(){return fr.isBytesLike}}),Object.defineProperty(cr,"hexlify",{enumerable:!0,get:function(){return fr.hexlify}}),Object.defineProperty(cr,"concat",{enumerable:!0,get:function(){return fr.concat}}),Object.defineProperty(cr,"dataLength",{enumerable:!0,get:function(){return fr.dataLength}}),Object.defineProperty(cr,"dataSlice",{enumerable:!0,get:function(){return fr.dataSlice}}),Object.defineProperty(cr,"stripZerosLeft",{enumerable:!0,get:function(){return fr.stripZerosLeft}}),Object.defineProperty(cr,"zeroPadValue",{enumerable:!0,get:function(){return fr.zeroPadValue}}),Object.defineProperty(cr,"zeroPadBytes",{enumerable:!0,get:function(){return fr.zeroPadBytes}});var hr=requireErrors();Object.defineProperty(cr,"isCallException",{enumerable:!0,get:function(){return hr.isCallException}}),Object.defineProperty(cr,"isError",{enumerable:!0,get:function(){return hr.isError}}),Object.defineProperty(cr,"assert",{enumerable:!0,get:function(){return hr.assert}}),Object.defineProperty(cr,"assertArgument",{enumerable:!0,get:function(){return hr.assertArgument}}),Object.defineProperty(cr,"assertArgumentCount",{enumerable:!0,get:function(){return hr.assertArgumentCount}}),Object.defineProperty(cr,"assertPrivate",{enumerable:!0,get:function(){return hr.assertPrivate}}),Object.defineProperty(cr,"assertNormalize",{enumerable:!0,get:function(){return hr.assertNormalize}}),Object.defineProperty(cr,"makeError",{enumerable:!0,get:function(){return hr.makeError}});var pr=requireEvents();Object.defineProperty(cr,"EventPayload",{enumerable:!0,get:function(){return pr.EventPayload}});var mr=requireFetch();Object.defineProperty(cr,"FetchRequest",{enumerable:!0,get:function(){return mr.FetchRequest}}),Object.defineProperty(cr,"FetchResponse",{enumerable:!0,get:function(){return mr.FetchResponse}}),Object.defineProperty(cr,"FetchCancelSignal",{enumerable:!0,get:function(){return mr.FetchCancelSignal}});var gr=requireFixednumber();Object.defineProperty(cr,"FixedNumber",{enumerable:!0,get:function(){return gr.FixedNumber}});var yr=requireMaths();Object.defineProperty(cr,"fromTwos",{enumerable:!0,get:function(){return yr.fromTwos}}),Object.defineProperty(cr,"toTwos",{enumerable:!0,get:function(){return yr.toTwos}}),Object.defineProperty(cr,"mask",{enumerable:!0,get:function(){return yr.mask}}),Object.defineProperty(cr,"getBigInt",{enumerable:!0,get:function(){return yr.getBigInt}}),Object.defineProperty(cr,"getNumber",{enumerable:!0,get:function(){return yr.getNumber}}),Object.defineProperty(cr,"getUint",{enumerable:!0,get:function(){return yr.getUint}}),Object.defineProperty(cr,"toBigInt",{enumerable:!0,get:function(){return yr.toBigInt}}),Object.defineProperty(cr,"toNumber",{enumerable:!0,get:function(){return yr.toNumber}}),Object.defineProperty(cr,"toBeHex",{enumerable:!0,get:function(){return yr.toBeHex}}),Object.defineProperty(cr,"toBeArray",{enumerable:!0,get:function(){return yr.toBeArray}}),Object.defineProperty(cr,"toQuantity",{enumerable:!0,get:function(){return yr.toQuantity}});var xr=requireProperties();Object.defineProperty(cr,"resolveProperties",{enumerable:!0,get:function(){return xr.resolveProperties}}),Object.defineProperty(cr,"defineProperties",{enumerable:!0,get:function(){return xr.defineProperties}});var wr=requireRlpDecode();Object.defineProperty(cr,"decodeRlp",{enumerable:!0,get:function(){return wr.decodeRlp}});var br=requireRlpEncode();Object.defineProperty(cr,"encodeRlp",{enumerable:!0,get:function(){return br.encodeRlp}});var Sr=requireUnits();Object.defineProperty(cr,"formatEther",{enumerable:!0,get:function(){return Sr.formatEther}}),Object.defineProperty(cr,"parseEther",{enumerable:!0,get:function(){return Sr.parseEther}}),Object.defineProperty(cr,"formatUnits",{enumerable:!0,get:function(){return Sr.formatUnits}}),Object.defineProperty(cr,"parseUnits",{enumerable:!0,get:function(){return Sr.parseUnits}});var vr=requireUtf8();Object.defineProperty(cr,"toUtf8Bytes",{enumerable:!0,get:function(){return vr.toUtf8Bytes}}),Object.defineProperty(cr,"toUtf8CodePoints",{enumerable:!0,get:function(){return vr.toUtf8CodePoints}}),Object.defineProperty(cr,"toUtf8String",{enumerable:!0,get:function(){return vr.toUtf8String}}),Object.defineProperty(cr,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return vr.Utf8ErrorFuncs}});var Er=requireUuid();Object.defineProperty(cr,"uuidV4",{enumerable:!0,get:function(){return Er.uuidV4}})}(utils$2)),utils$2}var abstractCoder={},hasRequiredAbstractCoder;function requireAbstractCoder(){return hasRequiredAbstractCoder||(hasRequiredAbstractCoder=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.Reader=cr.Writer=cr.Coder=cr.checkResultErrors=cr.Result=cr.WordSize=void 0;const ar=requireUtils$1();cr.WordSize=32;const dr=new Uint8Array(cr.WordSize),fr=["then"],hr={};function pr(Sr,vr){const Er=new Error(`deferred error during ABI decoding triggered accessing ${Sr}`);throw Er.error=vr,Er}class mr extends Array{#e;constructor(...vr){const Er=vr[0];let Ar=vr[1],_r=(vr[2]||[]).slice(),Cr=!0;Er!==hr&&(Ar=vr,_r=[],Cr=!1),super(Ar.length),Ar.forEach((Rr,Ir)=>{this[Ir]=Rr});const kr=_r.reduce((Rr,Ir)=>(typeof Ir=="string"&&Rr.set(Ir,(Rr.get(Ir)||0)+1),Rr),new Map);if(this.#e=Object.freeze(Ar.map((Rr,Ir)=>{const Nr=_r[Ir];return Nr!=null&&kr.get(Nr)===1?Nr:null})),!!Cr)return Object.freeze(this),new Proxy(this,{get:(Rr,Ir,Nr)=>{if(typeof Ir=="string"){if(Ir.match(/^[0-9]+$/)){const Tr=(0,ar.getNumber)(Ir,"%index");if(Tr<0||Tr>=this.length)throw new RangeError("out of result range");const Br=Rr[Tr];return Br instanceof Error&&pr(`index ${Tr}`,Br),Br}if(fr.indexOf(Ir)>=0)return Reflect.get(Rr,Ir,Nr);const Pr=Rr[Ir];if(Pr instanceof Function)return function(...Tr){return Pr.apply(this===Nr?Rr:this,Tr)};if(!(Ir in Rr))return Rr.getValue.apply(this===Nr?Rr:this,[Ir])}return Reflect.get(Rr,Ir,Nr)}})}toArray(){const vr=[];return this.forEach((Er,Ar)=>{Er instanceof Error&&pr(`index ${Ar}`,Er),vr.push(Er)}),vr}toObject(){return this.#e.reduce((vr,Er,Ar)=>((0,ar.assert)(Er!=null,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),Er in vr||(vr[Er]=this.getValue(Er)),vr),{})}slice(vr,Er){vr==null&&(vr=0),vr<0&&(vr+=this.length,vr<0&&(vr=0)),Er==null&&(Er=this.length),Er<0&&(Er+=this.length,Er<0&&(Er=0)),Er>this.length&&(Er=this.length);const Ar=[],_r=[];for(let Cr=vr;Cr<Er;Cr++)Ar.push(this[Cr]),_r.push(this.#e[Cr]);return new mr(hr,Ar,_r)}filter(vr,Er){const Ar=[],_r=[];for(let Cr=0;Cr<this.length;Cr++){const kr=this[Cr];kr instanceof Error&&pr(`index ${Cr}`,kr),vr.call(Er,kr,Cr,this)&&(Ar.push(kr),_r.push(this.#e[Cr]))}return new mr(hr,Ar,_r)}map(vr,Er){const Ar=[];for(let _r=0;_r<this.length;_r++){const Cr=this[_r];Cr instanceof Error&&pr(`index ${_r}`,Cr),Ar.push(vr.call(Er,Cr,_r,this))}return Ar}getValue(vr){const Er=this.#e.indexOf(vr);if(Er===-1)return;const Ar=this[Er];return Ar instanceof Error&&pr(`property ${JSON.stringify(vr)}`,Ar.error),Ar}static fromItems(vr,Er){return new mr(hr,vr,Er)}}cr.Result=mr;function gr(Sr){const vr=[],Er=function(Ar,_r){if(Array.isArray(_r))for(let Cr in _r){const kr=Ar.slice();kr.push(Cr);try{Er(kr,_r[Cr])}catch(Rr){vr.push({path:kr,error:Rr})}}};return Er([],Sr),vr}cr.checkResultErrors=gr;function yr(Sr){let vr=(0,ar.toBeArray)(Sr);return(0,ar.assert)(vr.length<=cr.WordSize,"value out-of-bounds","BUFFER_OVERRUN",{buffer:vr,length:cr.WordSize,offset:vr.length}),vr.length!==cr.WordSize&&(vr=(0,ar.getBytesCopy)((0,ar.concat)([dr.slice(vr.length%cr.WordSize),vr]))),vr}class xr{name;type;localName;dynamic;constructor(vr,Er,Ar,_r){(0,ar.defineProperties)(this,{name:vr,type:Er,localName:Ar,dynamic:_r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(vr,Er){(0,ar.assertArgument)(!1,vr,this.localName,Er)}}cr.Coder=xr;class wr{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return(0,ar.concat)(this.#e)}get length(){return this.#t}#r(vr){return this.#e.push(vr),this.#t+=vr.length,vr.length}appendWriter(vr){return this.#r((0,ar.getBytesCopy)(vr.data))}writeBytes(vr){let Er=(0,ar.getBytesCopy)(vr);const Ar=Er.length%cr.WordSize;return Ar&&(Er=(0,ar.getBytesCopy)((0,ar.concat)([Er,dr.slice(Ar)]))),this.#r(Er)}writeValue(vr){return this.#r(yr(vr))}writeUpdatableValue(){const vr=this.#e.length;return this.#e.push(dr),this.#t+=cr.WordSize,Er=>{this.#e[vr]=yr(Er)}}}cr.Writer=wr;class br{allowLoose;#e;#t;constructor(vr,Er){(0,ar.defineProperties)(this,{allowLoose:!!Er}),this.#e=(0,ar.getBytesCopy)(vr),this.#t=0}get data(){return(0,ar.hexlify)(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#r(vr,Er,Ar){let _r=Math.ceil(Er/cr.WordSize)*cr.WordSize;return this.#t+_r>this.#e.length&&(this.allowLoose&&Ar&&this.#t+Er<=this.#e.length?_r=Er:(0,ar.assert)(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:(0,ar.getBytesCopy)(this.#e),length:this.#e.length,offset:this.#t+_r})),this.#e.slice(this.#t,this.#t+_r)}subReader(vr){return new br(this.#e.slice(this.#t+vr),this.allowLoose)}readBytes(vr,Er){let Ar=this.#r(0,vr,!!Er);return this.#t+=Ar.length,Ar.slice(0,vr)}readValue(){return(0,ar.toBigInt)(this.readBytes(cr.WordSize))}readIndex(){return(0,ar.toNumber)(this.readBytes(cr.WordSize))}}cr.Reader=br}(abstractCoder)),abstractCoder}var address$3={},address$2={},address$1={},crypto$2={},hmac$2={},cryptoBrowser={};const require$$0$5=getAugmentedNamespace(hmac$7),require$$1=getAugmentedNamespace(pbkdf2$5),require$$2$1=getAugmentedNamespace(sha256$8),require$$3=getAugmentedNamespace(sha512$3);var hasRequiredCryptoBrowser;function requireCryptoBrowser(){if(hasRequiredCryptoBrowser)return cryptoBrowser;hasRequiredCryptoBrowser=1,Object.defineProperty(cryptoBrowser,"__esModule",{value:!0}),cryptoBrowser.randomBytes=cryptoBrowser.pbkdf2Sync=cryptoBrowser.createHmac=cryptoBrowser.createHash=void 0;const cr=require$$0$5,ar=require$$1,dr=require$$2$1,fr=require$$3,hr=requireUtils$1();function pr(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate globalThis object")}const mr=pr(),gr=mr.crypto||mr.msCrypto;function yr(Sr){switch(Sr){case"sha256":return dr.sha256.create();case"sha512":return fr.sha512.create()}(0,hr.assertArgument)(!1,"invalid hashing algorithm name","algorithm",Sr)}cryptoBrowser.createHash=yr;function xr(Sr,vr){const Er={sha256:dr.sha256,sha512:fr.sha512}[Sr];return(0,hr.assertArgument)(Er!=null,"invalid hmac algorithm","algorithm",Sr),cr.hmac.create(Er,vr)}cryptoBrowser.createHmac=xr;function wr(Sr,vr,Er,Ar,_r){const Cr={sha256:dr.sha256,sha512:fr.sha512}[_r];return(0,hr.assertArgument)(Cr!=null,"invalid pbkdf2 algorithm","algorithm",_r),(0,ar.pbkdf2)(Cr,Sr,vr,{c:Er,dkLen:Ar})}cryptoBrowser.pbkdf2Sync=wr;function br(Sr){(0,hr.assert)(gr!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),(0,hr.assertArgument)(Number.isInteger(Sr)&&Sr>0&&Sr<=1024,"invalid length","length",Sr);const vr=new Uint8Array(Sr);return gr.getRandomValues(vr),vr}return cryptoBrowser.randomBytes=br,cryptoBrowser}var hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac$2;hasRequiredHmac=1,Object.defineProperty(hmac$2,"__esModule",{value:!0}),hmac$2.computeHmac=void 0;const cr=requireCryptoBrowser(),ar=requireUtils$1();let dr=!1;const fr=function(mr,gr,yr){return(0,cr.createHmac)(mr,gr).update(yr).digest()};let hr=fr;function pr(mr,gr,yr){const xr=(0,ar.getBytes)(gr,"key"),wr=(0,ar.getBytes)(yr,"data");return(0,ar.hexlify)(hr(mr,xr,wr))}return hmac$2.computeHmac=pr,pr._=fr,pr.lock=function(){dr=!0},pr.register=function(mr){if(dr)throw new Error("computeHmac is locked");hr=mr},Object.freeze(pr),hmac$2}var keccak={};const require$$0$4=getAugmentedNamespace(sha3$3);var hasRequiredKeccak;function requireKeccak(){if(hasRequiredKeccak)return keccak;hasRequiredKeccak=1,Object.defineProperty(keccak,"__esModule",{value:!0}),keccak.keccak256=void 0;const cr=require$$0$4,ar=requireUtils$1();let dr=!1;const fr=function(mr){return(0,cr.keccak_256)(mr)};let hr=fr;function pr(mr){const gr=(0,ar.getBytes)(mr,"data");return(0,ar.hexlify)(hr(gr))}return keccak.keccak256=pr,pr._=fr,pr.lock=function(){dr=!0},pr.register=function(mr){if(dr)throw new TypeError("keccak256 is locked");hr=mr},Object.freeze(pr),keccak}var ripemd160={};const require$$0$3=getAugmentedNamespace(ripemd160$4);var hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1,Object.defineProperty(ripemd160,"__esModule",{value:!0}),ripemd160.ripemd160=void 0;const cr=require$$0$3,ar=requireUtils$1();let dr=!1;const fr=function(mr){return(0,cr.ripemd160)(mr)};let hr=fr;function pr(mr){const gr=(0,ar.getBytes)(mr,"data");return(0,ar.hexlify)(hr(gr))}return ripemd160.ripemd160=pr,pr._=fr,pr.lock=function(){dr=!0},pr.register=function(mr){if(dr)throw new TypeError("ripemd160 is locked");hr=mr},Object.freeze(pr),ripemd160}var pbkdf2={},hasRequiredPbkdf2;function requirePbkdf2(){if(hasRequiredPbkdf2)return pbkdf2;hasRequiredPbkdf2=1,Object.defineProperty(pbkdf2,"__esModule",{value:!0}),pbkdf2.pbkdf2=void 0;const cr=requireCryptoBrowser(),ar=requireUtils$1();let dr=!1;const fr=function(mr,gr,yr,xr,wr){return(0,cr.pbkdf2Sync)(mr,gr,yr,xr,wr)};let hr=fr;function pr(mr,gr,yr,xr,wr){const br=(0,ar.getBytes)(mr,"password"),Sr=(0,ar.getBytes)(gr,"salt");return(0,ar.hexlify)(hr(br,Sr,yr,xr,wr))}return pbkdf2.pbkdf2=pr,pr._=fr,pr.lock=function(){dr=!0},pr.register=function(mr){if(dr)throw new Error("pbkdf2 is locked");hr=mr},Object.freeze(pr),pbkdf2}var random={},hasRequiredRandom;function requireRandom(){if(hasRequiredRandom)return random;hasRequiredRandom=1,Object.defineProperty(random,"__esModule",{value:!0}),random.randomBytes=void 0;const cr=requireCryptoBrowser();let ar=!1;const dr=function(pr){return new Uint8Array((0,cr.randomBytes)(pr))};let fr=dr;function hr(pr){return fr(pr)}return random.randomBytes=hr,hr._=dr,hr.lock=function(){ar=!0},hr.register=function(pr){if(ar)throw new Error("randomBytes is locked");fr=pr},Object.freeze(hr),random}var scrypt={};const require$$0$2=getAugmentedNamespace(scrypt$3);var hasRequiredScrypt;function requireScrypt(){if(hasRequiredScrypt)return scrypt;hasRequiredScrypt=1,Object.defineProperty(scrypt,"__esModule",{value:!0}),scrypt.scryptSync=scrypt.scrypt=void 0;const cr=require$$0$2,ar=requireUtils$1();let dr=!1,fr=!1;const hr=async function(wr,br,Sr,vr,Er,Ar,_r){return await(0,cr.scryptAsync)(wr,br,{N:Sr,r:vr,p:Er,dkLen:Ar,onProgress:_r})},pr=function(wr,br,Sr,vr,Er,Ar){return(0,cr.scrypt)(wr,br,{N:Sr,r:vr,p:Er,dkLen:Ar})};let mr=hr,gr=pr;async function yr(wr,br,Sr,vr,Er,Ar,_r){const Cr=(0,ar.getBytes)(wr,"passwd"),kr=(0,ar.getBytes)(br,"salt");return(0,ar.hexlify)(await mr(Cr,kr,Sr,vr,Er,Ar,_r))}scrypt.scrypt=yr,yr._=hr,yr.lock=function(){fr=!0},yr.register=function(wr){if(fr)throw new Error("scrypt is locked");mr=wr},Object.freeze(yr);function xr(wr,br,Sr,vr,Er,Ar){const _r=(0,ar.getBytes)(wr,"passwd"),Cr=(0,ar.getBytes)(br,"salt");return(0,ar.hexlify)(gr(_r,Cr,Sr,vr,Er,Ar))}return scrypt.scryptSync=xr,xr._=pr,xr.lock=function(){dr=!0},xr.register=function(wr){if(dr)throw new Error("scryptSync is locked");gr=wr},Object.freeze(xr),scrypt}var sha2={},hasRequiredSha2;function requireSha2(){if(hasRequiredSha2)return sha2;hasRequiredSha2=1,Object.defineProperty(sha2,"__esModule",{value:!0}),sha2.sha512=sha2.sha256=void 0;const cr=requireCryptoBrowser(),ar=requireUtils$1(),dr=function(wr){return(0,cr.createHash)("sha256").update(wr).digest()},fr=function(wr){return(0,cr.createHash)("sha512").update(wr).digest()};let hr=dr,pr=fr,mr=!1,gr=!1;function yr(wr){const br=(0,ar.getBytes)(wr,"data");return(0,ar.hexlify)(hr(br))}sha2.sha256=yr,yr._=dr,yr.lock=function(){mr=!0},yr.register=function(wr){if(mr)throw new Error("sha256 is locked");hr=wr},Object.freeze(yr);function xr(wr){const br=(0,ar.getBytes)(wr,"data");return(0,ar.hexlify)(pr(br))}return sha2.sha512=xr,xr._=fr,xr.lock=function(){gr=!0},xr.register=function(wr){if(gr)throw new Error("sha512 is locked");pr=wr},Object.freeze(yr),sha2}var signingKey={};const require$$0$1=getAugmentedNamespace(secp256k1$2);var signature={},constants={},addresses={},hasRequiredAddresses;function requireAddresses(){return hasRequiredAddresses||(hasRequiredAddresses=1,Object.defineProperty(addresses,"__esModule",{value:!0}),addresses.ZeroAddress=void 0,addresses.ZeroAddress="0x0000000000000000000000000000000000000000"),addresses}var hashes={},hasRequiredHashes;function requireHashes(){return hasRequiredHashes||(hasRequiredHashes=1,Object.defineProperty(hashes,"__esModule",{value:!0}),hashes.ZeroHash=void 0,hashes.ZeroHash="0x0000000000000000000000000000000000000000000000000000000000000000"),hashes}var numbers={},hasRequiredNumbers;function requireNumbers(){return hasRequiredNumbers||(hasRequiredNumbers=1,Object.defineProperty(numbers,"__esModule",{value:!0}),numbers.MaxInt256=numbers.MinInt256=numbers.MaxUint256=numbers.WeiPerEther=numbers.N=void 0,numbers.N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),numbers.WeiPerEther=BigInt("1000000000000000000"),numbers.MaxUint256=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),numbers.MinInt256=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1),numbers.MaxInt256=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")),numbers}var strings={},hasRequiredStrings;function requireStrings(){return hasRequiredStrings||(hasRequiredStrings=1,Object.defineProperty(strings,"__esModule",{value:!0}),strings.MessagePrefix=strings.EtherSymbol=void 0,strings.EtherSymbol="",strings.MessagePrefix=`Ethereum Signed Message:
`),strings}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.MessagePrefix=cr.EtherSymbol=cr.MaxInt256=cr.MinInt256=cr.MaxUint256=cr.WeiPerEther=cr.N=cr.ZeroHash=cr.ZeroAddress=void 0;var ar=requireAddresses();Object.defineProperty(cr,"ZeroAddress",{enumerable:!0,get:function(){return ar.ZeroAddress}});var dr=requireHashes();Object.defineProperty(cr,"ZeroHash",{enumerable:!0,get:function(){return dr.ZeroHash}});var fr=requireNumbers();Object.defineProperty(cr,"N",{enumerable:!0,get:function(){return fr.N}}),Object.defineProperty(cr,"WeiPerEther",{enumerable:!0,get:function(){return fr.WeiPerEther}}),Object.defineProperty(cr,"MaxUint256",{enumerable:!0,get:function(){return fr.MaxUint256}}),Object.defineProperty(cr,"MinInt256",{enumerable:!0,get:function(){return fr.MinInt256}}),Object.defineProperty(cr,"MaxInt256",{enumerable:!0,get:function(){return fr.MaxInt256}});var hr=requireStrings();Object.defineProperty(cr,"EtherSymbol",{enumerable:!0,get:function(){return hr.EtherSymbol}}),Object.defineProperty(cr,"MessagePrefix",{enumerable:!0,get:function(){return hr.MessagePrefix}})}(constants)),constants}var hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1,Object.defineProperty(signature,"__esModule",{value:!0}),signature.Signature=void 0;const cr=requireConstants(),ar=requireUtils$1(),dr=BigInt(0),fr=BigInt(1),hr=BigInt(2),pr=BigInt(27),mr=BigInt(28),gr=BigInt(35),yr={};function xr(br){return(0,ar.zeroPadValue)((0,ar.toBeArray)(br),32)}class wr{#e;#t;#r;#n;get r(){return this.#e}set r(Sr){(0,ar.assertArgument)((0,ar.dataLength)(Sr)===32,"invalid r","value",Sr),this.#e=(0,ar.hexlify)(Sr)}get s(){return this.#t}set s(Sr){(0,ar.assertArgument)((0,ar.dataLength)(Sr)===32,"invalid s","value",Sr);const vr=(0,ar.hexlify)(Sr);(0,ar.assertArgument)(parseInt(vr.substring(0,3))<8,"non-canonical s","value",vr),this.#t=vr}get v(){return this.#r}set v(Sr){const vr=(0,ar.getNumber)(Sr,"value");(0,ar.assertArgument)(vr===27||vr===28,"invalid v","v",Sr),this.#r=vr}get networkV(){return this.#n}get legacyChainId(){const Sr=this.networkV;return Sr==null?null:wr.getChainId(Sr)}get yParity(){return this.v===27?0:1}get yParityAndS(){const Sr=(0,ar.getBytes)(this.s);return this.yParity&&(Sr[0]|=128),(0,ar.hexlify)(Sr)}get compactSerialized(){return(0,ar.concat)([this.r,this.yParityAndS])}get serialized(){return(0,ar.concat)([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(Sr,vr,Er,Ar){(0,ar.assertPrivate)(Sr,yr,"Signature"),this.#e=vr,this.#t=Er,this.#r=Ar,this.#n=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const Sr=new wr(yr,this.r,this.s,this.v);return this.networkV&&(Sr.#n=this.networkV),Sr}toJSON(){const Sr=this.networkV;return{_type:"signature",networkV:Sr!=null?Sr.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(Sr){const vr=(0,ar.getBigInt)(Sr,"v");return vr==pr||vr==mr?dr:((0,ar.assertArgument)(vr>=gr,"invalid EIP-155 v","v",Sr),(vr-gr)/hr)}static getChainIdV(Sr,vr){return(0,ar.getBigInt)(Sr)*hr+BigInt(35+vr-27)}static getNormalizedV(Sr){const vr=(0,ar.getBigInt)(Sr);return vr===dr||vr===pr?27:vr===fr||vr===mr?28:((0,ar.assertArgument)(vr>=gr,"invalid v","v",Sr),vr&fr?27:28)}static from(Sr){function vr(Ir,Nr){(0,ar.assertArgument)(Ir,Nr,"signature",Sr)}if(Sr==null)return new wr(yr,cr.ZeroHash,cr.ZeroHash,27);if(typeof Sr=="string"){const Ir=(0,ar.getBytes)(Sr,"signature");if(Ir.length===64){const Nr=(0,ar.hexlify)(Ir.slice(0,32)),Pr=Ir.slice(32,64),Tr=Pr[0]&128?28:27;return Pr[0]&=127,new wr(yr,Nr,(0,ar.hexlify)(Pr),Tr)}if(Ir.length===65){const Nr=(0,ar.hexlify)(Ir.slice(0,32)),Pr=Ir.slice(32,64);vr((Pr[0]&128)===0,"non-canonical s");const Tr=wr.getNormalizedV(Ir[64]);return new wr(yr,Nr,(0,ar.hexlify)(Pr),Tr)}vr(!1,"invalid raw signature length")}if(Sr instanceof wr)return Sr.clone();const Er=Sr.r;vr(Er!=null,"missing r");const Ar=xr(Er),_r=function(Ir,Nr){if(Ir!=null)return xr(Ir);if(Nr!=null){vr((0,ar.isHexString)(Nr,32),"invalid yParityAndS");const Pr=(0,ar.getBytes)(Nr);return Pr[0]&=127,(0,ar.hexlify)(Pr)}vr(!1,"missing s")}(Sr.s,Sr.yParityAndS);vr(((0,ar.getBytes)(_r)[0]&128)==0,"non-canonical s");const{networkV:Cr,v:kr}=function(Ir,Nr,Pr){if(Ir!=null){const Tr=(0,ar.getBigInt)(Ir);return{networkV:Tr>=gr?Tr:void 0,v:wr.getNormalizedV(Tr)}}if(Nr!=null)return vr((0,ar.isHexString)(Nr,32),"invalid yParityAndS"),{v:(0,ar.getBytes)(Nr)[0]&128?28:27};if(Pr!=null){switch((0,ar.getNumber)(Pr,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}vr(!1,"invalid yParity")}vr(!1,"missing v")}(Sr.v,Sr.yParityAndS,Sr.yParity),Rr=new wr(yr,Ar,_r,kr);return Cr&&(Rr.#n=Cr),vr(Sr.yParity==null||(0,ar.getNumber)(Sr.yParity,"sig.yParity")===Rr.yParity,"yParity mismatch"),vr(Sr.yParityAndS==null||Sr.yParityAndS===Rr.yParityAndS,"yParityAndS mismatch"),Rr}}return signature.Signature=wr,signature}var hasRequiredSigningKey;function requireSigningKey(){if(hasRequiredSigningKey)return signingKey;hasRequiredSigningKey=1,Object.defineProperty(signingKey,"__esModule",{value:!0}),signingKey.SigningKey=void 0;const cr=require$$0$1,ar=requireUtils$1(),dr=requireSignature();class fr{#e;constructor(pr){(0,ar.assertArgument)((0,ar.dataLength)(pr)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=(0,ar.hexlify)(pr)}get privateKey(){return this.#e}get publicKey(){return fr.computePublicKey(this.#e)}get compressedPublicKey(){return fr.computePublicKey(this.#e,!0)}sign(pr){(0,ar.assertArgument)((0,ar.dataLength)(pr)===32,"invalid digest length","digest",pr);const mr=cr.secp256k1.sign((0,ar.getBytesCopy)(pr),(0,ar.getBytesCopy)(this.#e),{lowS:!0});return dr.Signature.from({r:(0,ar.toBeHex)(mr.r,32),s:(0,ar.toBeHex)(mr.s,32),v:mr.recovery?28:27})}computeSharedSecret(pr){const mr=fr.computePublicKey(pr);return(0,ar.hexlify)(cr.secp256k1.getSharedSecret((0,ar.getBytesCopy)(this.#e),(0,ar.getBytes)(mr),!1))}static computePublicKey(pr,mr){let gr=(0,ar.getBytes)(pr,"key");if(gr.length===32){const xr=cr.secp256k1.getPublicKey(gr,!!mr);return(0,ar.hexlify)(xr)}if(gr.length===64){const xr=new Uint8Array(65);xr[0]=4,xr.set(gr,1),gr=xr}const yr=cr.secp256k1.ProjectivePoint.fromHex(gr);return(0,ar.hexlify)(yr.toRawBytes(mr))}static recoverPublicKey(pr,mr){(0,ar.assertArgument)((0,ar.dataLength)(pr)===32,"invalid digest length","digest",pr);const gr=dr.Signature.from(mr);let yr=cr.secp256k1.Signature.fromCompact((0,ar.getBytesCopy)((0,ar.concat)([gr.r,gr.s])));yr=yr.addRecoveryBit(gr.yParity);const xr=yr.recoverPublicKey((0,ar.getBytesCopy)(pr));return(0,ar.assertArgument)(xr!=null,"invalid signautre for digest","signature",mr),"0x"+xr.toHex(!1)}static addPoints(pr,mr,gr){const yr=cr.secp256k1.ProjectivePoint.fromHex(fr.computePublicKey(pr).substring(2)),xr=cr.secp256k1.ProjectivePoint.fromHex(fr.computePublicKey(mr).substring(2));return"0x"+yr.add(xr).toHex(!!gr)}}return signingKey.SigningKey=fr,signingKey}var hasRequiredCrypto;function requireCrypto(){return hasRequiredCrypto||(hasRequiredCrypto=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.lock=cr.Signature=cr.SigningKey=cr.scryptSync=cr.scrypt=cr.pbkdf2=cr.sha512=cr.sha256=cr.ripemd160=cr.keccak256=cr.randomBytes=cr.computeHmac=void 0;const ar=requireHmac();Object.defineProperty(cr,"computeHmac",{enumerable:!0,get:function(){return ar.computeHmac}});const dr=requireKeccak();Object.defineProperty(cr,"keccak256",{enumerable:!0,get:function(){return dr.keccak256}});const fr=requireRipemd160();Object.defineProperty(cr,"ripemd160",{enumerable:!0,get:function(){return fr.ripemd160}});const hr=requirePbkdf2();Object.defineProperty(cr,"pbkdf2",{enumerable:!0,get:function(){return hr.pbkdf2}});const pr=requireRandom();Object.defineProperty(cr,"randomBytes",{enumerable:!0,get:function(){return pr.randomBytes}});const mr=requireScrypt();Object.defineProperty(cr,"scrypt",{enumerable:!0,get:function(){return mr.scrypt}}),Object.defineProperty(cr,"scryptSync",{enumerable:!0,get:function(){return mr.scryptSync}});const gr=requireSha2();Object.defineProperty(cr,"sha256",{enumerable:!0,get:function(){return gr.sha256}}),Object.defineProperty(cr,"sha512",{enumerable:!0,get:function(){return gr.sha512}});var yr=requireSigningKey();Object.defineProperty(cr,"SigningKey",{enumerable:!0,get:function(){return yr.SigningKey}});var xr=requireSignature();Object.defineProperty(cr,"Signature",{enumerable:!0,get:function(){return xr.Signature}});function wr(){ar.computeHmac.lock(),dr.keccak256.lock(),hr.pbkdf2.lock(),pr.randomBytes.lock(),fr.ripemd160.lock(),mr.scrypt.lock(),mr.scryptSync.lock(),gr.sha256.lock(),gr.sha512.lock(),pr.randomBytes.lock()}cr.lock=wr}(crypto$2)),crypto$2}var hasRequiredAddress$3;function requireAddress$3(){if(hasRequiredAddress$3)return address$1;hasRequiredAddress$3=1,Object.defineProperty(address$1,"__esModule",{value:!0}),address$1.getIcapAddress=address$1.getAddress=void 0;const cr=requireCrypto(),ar=requireUtils$1(),dr=BigInt(0),fr=BigInt(36);function hr(Sr){Sr=Sr.toLowerCase();const vr=Sr.substring(2).split(""),Er=new Uint8Array(40);for(let _r=0;_r<40;_r++)Er[_r]=vr[_r].charCodeAt(0);const Ar=(0,ar.getBytes)((0,cr.keccak256)(Er));for(let _r=0;_r<40;_r+=2)Ar[_r>>1]>>4>=8&&(vr[_r]=vr[_r].toUpperCase()),(Ar[_r>>1]&15)>=8&&(vr[_r+1]=vr[_r+1].toUpperCase());return"0x"+vr.join("")}const pr={};for(let Sr=0;Sr<10;Sr++)pr[String(Sr)]=String(Sr);for(let Sr=0;Sr<26;Sr++)pr[String.fromCharCode(65+Sr)]=String(10+Sr);const mr=15;function gr(Sr){Sr=Sr.toUpperCase(),Sr=Sr.substring(4)+Sr.substring(0,2)+"00";let vr=Sr.split("").map(Ar=>pr[Ar]).join("");for(;vr.length>=mr;){let Ar=vr.substring(0,mr);vr=parseInt(Ar,10)%97+vr.substring(Ar.length)}let Er=String(98-parseInt(vr,10)%97);for(;Er.length<2;)Er="0"+Er;return Er}const yr=function(){const Sr={};for(let vr=0;vr<36;vr++){const Er="0123456789abcdefghijklmnopqrstuvwxyz"[vr];Sr[Er]=BigInt(vr)}return Sr}();function xr(Sr){Sr=Sr.toLowerCase();let vr=dr;for(let Er=0;Er<Sr.length;Er++)vr=vr*fr+yr[Sr[Er]];return vr}function wr(Sr){if((0,ar.assertArgument)(typeof Sr=="string","invalid address","address",Sr),Sr.match(/^(0x)?[0-9a-fA-F]{40}$/)){Sr.startsWith("0x")||(Sr="0x"+Sr);const vr=hr(Sr);return(0,ar.assertArgument)(!Sr.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||vr===Sr,"bad address checksum","address",Sr),vr}if(Sr.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){(0,ar.assertArgument)(Sr.substring(2,4)===gr(Sr),"bad icap checksum","address",Sr);let vr=xr(Sr.substring(4)).toString(16);for(;vr.length<40;)vr="0"+vr;return hr("0x"+vr)}(0,ar.assertArgument)(!1,"invalid address","address",Sr)}address$1.getAddress=wr;function br(Sr){let vr=BigInt(wr(Sr)).toString(36).toUpperCase();for(;vr.length<30;)vr="0"+vr;return"XE"+gr("XE00"+vr)+vr}return address$1.getIcapAddress=br,address$1}var contractAddress={},hasRequiredContractAddress;function requireContractAddress(){if(hasRequiredContractAddress)return contractAddress;hasRequiredContractAddress=1,Object.defineProperty(contractAddress,"__esModule",{value:!0}),contractAddress.getCreate2Address=contractAddress.getCreateAddress=void 0;const cr=requireCrypto(),ar=requireUtils$1(),dr=requireAddress$3();function fr(pr){const mr=(0,dr.getAddress)(pr.from);let yr=(0,ar.getBigInt)(pr.nonce,"tx.nonce").toString(16);return yr==="0"?yr="0x":yr.length%2?yr="0x0"+yr:yr="0x"+yr,(0,dr.getAddress)((0,ar.dataSlice)((0,cr.keccak256)((0,ar.encodeRlp)([mr,yr])),12))}contractAddress.getCreateAddress=fr;function hr(pr,mr,gr){const yr=(0,dr.getAddress)(pr),xr=(0,ar.getBytes)(mr,"salt"),wr=(0,ar.getBytes)(gr,"initCodeHash");return(0,ar.assertArgument)(xr.length===32,"salt must be 32 bytes","salt",mr),(0,ar.assertArgument)(wr.length===32,"initCodeHash must be 32 bytes","initCodeHash",gr),(0,dr.getAddress)((0,ar.dataSlice)((0,cr.keccak256)((0,ar.concat)(["0xff",yr,xr,wr])),12))}return contractAddress.getCreate2Address=hr,contractAddress}var checks={},hasRequiredChecks;function requireChecks(){if(hasRequiredChecks)return checks;hasRequiredChecks=1,Object.defineProperty(checks,"__esModule",{value:!0}),checks.resolveAddress=checks.isAddress=checks.isAddressable=void 0;const cr=requireUtils$1(),ar=requireAddress$3();function dr(mr){return mr&&typeof mr.getAddress=="function"}checks.isAddressable=dr;function fr(mr){try{return(0,ar.getAddress)(mr),!0}catch{}return!1}checks.isAddress=fr;async function hr(mr,gr){const yr=await gr;return(yr==null||yr==="0x0000000000000000000000000000000000000000")&&((0,cr.assert)(typeof mr!="string","unconfigured name","UNCONFIGURED_NAME",{value:mr}),(0,cr.assertArgument)(!1,"invalid AddressLike value; did not resolve to a value address","target",mr)),(0,ar.getAddress)(yr)}function pr(mr,gr){if(typeof mr=="string")return mr.match(/^0x[0-9a-f]{40}$/i)?(0,ar.getAddress)(mr):((0,cr.assert)(gr!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),hr(mr,gr.resolveName(mr)));if(dr(mr))return hr(mr,mr.getAddress());if(mr&&typeof mr.then=="function")return hr(mr,mr);(0,cr.assertArgument)(!1,"unsupported addressable value","target",mr)}return checks.resolveAddress=pr,checks}var hasRequiredAddress$2;function requireAddress$2(){return hasRequiredAddress$2||(hasRequiredAddress$2=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.resolveAddress=cr.isAddress=cr.isAddressable=cr.getCreate2Address=cr.getCreateAddress=cr.getIcapAddress=cr.getAddress=void 0;var ar=requireAddress$3();Object.defineProperty(cr,"getAddress",{enumerable:!0,get:function(){return ar.getAddress}}),Object.defineProperty(cr,"getIcapAddress",{enumerable:!0,get:function(){return ar.getIcapAddress}});var dr=requireContractAddress();Object.defineProperty(cr,"getCreateAddress",{enumerable:!0,get:function(){return dr.getCreateAddress}}),Object.defineProperty(cr,"getCreate2Address",{enumerable:!0,get:function(){return dr.getCreate2Address}});var fr=requireChecks();Object.defineProperty(cr,"isAddressable",{enumerable:!0,get:function(){return fr.isAddressable}}),Object.defineProperty(cr,"isAddress",{enumerable:!0,get:function(){return fr.isAddress}}),Object.defineProperty(cr,"resolveAddress",{enumerable:!0,get:function(){return fr.resolveAddress}})}(address$2)),address$2}var typed={},hasRequiredTyped;function requireTyped(){if(hasRequiredTyped)return typed;hasRequiredTyped=1,Object.defineProperty(typed,"__esModule",{value:!0}),typed.Typed=void 0;const cr=requireUtils$1(),ar={};function dr(mr,gr){let yr=!1;return gr<0&&(yr=!0,gr*=-1),new pr(ar,`${yr?"":"u"}int${gr}`,mr,{signed:yr,width:gr})}function fr(mr,gr){return new pr(ar,`bytes${gr||""}`,mr,{size:gr})}const hr=Symbol.for("_ethers_typed");class pr{type;value;#e;_typedSymbol;constructor(gr,yr,xr,wr){wr==null&&(wr=null),(0,cr.assertPrivate)(ar,gr,"Typed"),(0,cr.defineProperties)(this,{_typedSymbol:hr,type:yr,value:xr}),this.#e=wr,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(gr=>gr.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(gr,yr){return new pr(ar,gr,yr)}static uint8(gr){return dr(gr,8)}static uint16(gr){return dr(gr,16)}static uint24(gr){return dr(gr,24)}static uint32(gr){return dr(gr,32)}static uint40(gr){return dr(gr,40)}static uint48(gr){return dr(gr,48)}static uint56(gr){return dr(gr,56)}static uint64(gr){return dr(gr,64)}static uint72(gr){return dr(gr,72)}static uint80(gr){return dr(gr,80)}static uint88(gr){return dr(gr,88)}static uint96(gr){return dr(gr,96)}static uint104(gr){return dr(gr,104)}static uint112(gr){return dr(gr,112)}static uint120(gr){return dr(gr,120)}static uint128(gr){return dr(gr,128)}static uint136(gr){return dr(gr,136)}static uint144(gr){return dr(gr,144)}static uint152(gr){return dr(gr,152)}static uint160(gr){return dr(gr,160)}static uint168(gr){return dr(gr,168)}static uint176(gr){return dr(gr,176)}static uint184(gr){return dr(gr,184)}static uint192(gr){return dr(gr,192)}static uint200(gr){return dr(gr,200)}static uint208(gr){return dr(gr,208)}static uint216(gr){return dr(gr,216)}static uint224(gr){return dr(gr,224)}static uint232(gr){return dr(gr,232)}static uint240(gr){return dr(gr,240)}static uint248(gr){return dr(gr,248)}static uint256(gr){return dr(gr,256)}static uint(gr){return dr(gr,256)}static int8(gr){return dr(gr,-8)}static int16(gr){return dr(gr,-16)}static int24(gr){return dr(gr,-24)}static int32(gr){return dr(gr,-32)}static int40(gr){return dr(gr,-40)}static int48(gr){return dr(gr,-48)}static int56(gr){return dr(gr,-56)}static int64(gr){return dr(gr,-64)}static int72(gr){return dr(gr,-72)}static int80(gr){return dr(gr,-80)}static int88(gr){return dr(gr,-88)}static int96(gr){return dr(gr,-96)}static int104(gr){return dr(gr,-104)}static int112(gr){return dr(gr,-112)}static int120(gr){return dr(gr,-120)}static int128(gr){return dr(gr,-128)}static int136(gr){return dr(gr,-136)}static int144(gr){return dr(gr,-144)}static int152(gr){return dr(gr,-152)}static int160(gr){return dr(gr,-160)}static int168(gr){return dr(gr,-168)}static int176(gr){return dr(gr,-176)}static int184(gr){return dr(gr,-184)}static int192(gr){return dr(gr,-192)}static int200(gr){return dr(gr,-200)}static int208(gr){return dr(gr,-208)}static int216(gr){return dr(gr,-216)}static int224(gr){return dr(gr,-224)}static int232(gr){return dr(gr,-232)}static int240(gr){return dr(gr,-240)}static int248(gr){return dr(gr,-248)}static int256(gr){return dr(gr,-256)}static int(gr){return dr(gr,-256)}static bytes1(gr){return fr(gr,1)}static bytes2(gr){return fr(gr,2)}static bytes3(gr){return fr(gr,3)}static bytes4(gr){return fr(gr,4)}static bytes5(gr){return fr(gr,5)}static bytes6(gr){return fr(gr,6)}static bytes7(gr){return fr(gr,7)}static bytes8(gr){return fr(gr,8)}static bytes9(gr){return fr(gr,9)}static bytes10(gr){return fr(gr,10)}static bytes11(gr){return fr(gr,11)}static bytes12(gr){return fr(gr,12)}static bytes13(gr){return fr(gr,13)}static bytes14(gr){return fr(gr,14)}static bytes15(gr){return fr(gr,15)}static bytes16(gr){return fr(gr,16)}static bytes17(gr){return fr(gr,17)}static bytes18(gr){return fr(gr,18)}static bytes19(gr){return fr(gr,19)}static bytes20(gr){return fr(gr,20)}static bytes21(gr){return fr(gr,21)}static bytes22(gr){return fr(gr,22)}static bytes23(gr){return fr(gr,23)}static bytes24(gr){return fr(gr,24)}static bytes25(gr){return fr(gr,25)}static bytes26(gr){return fr(gr,26)}static bytes27(gr){return fr(gr,27)}static bytes28(gr){return fr(gr,28)}static bytes29(gr){return fr(gr,29)}static bytes30(gr){return fr(gr,30)}static bytes31(gr){return fr(gr,31)}static bytes32(gr){return fr(gr,32)}static address(gr){return new pr(ar,"address",gr)}static bool(gr){return new pr(ar,"bool",!!gr)}static bytes(gr){return new pr(ar,"bytes",gr)}static string(gr){return new pr(ar,"string",gr)}static array(gr,yr){throw new Error("not implemented yet")}static tuple(gr,yr){throw new Error("not implemented yet")}static overrides(gr){return new pr(ar,"overrides",Object.assign({},gr))}static isTyped(gr){return gr&&typeof gr=="object"&&"_typedSymbol"in gr&&gr._typedSymbol===hr}static dereference(gr,yr){if(pr.isTyped(gr)){if(gr.type!==yr)throw new Error(`invalid type: expecetd ${yr}, got ${gr.type}`);return gr.value}return gr}}return typed.Typed=pr,typed}var hasRequiredAddress$1;function requireAddress$1(){if(hasRequiredAddress$1)return address$3;hasRequiredAddress$1=1,Object.defineProperty(address$3,"__esModule",{value:!0}),address$3.AddressCoder=void 0;const cr=requireAddress$2(),ar=requireMaths(),dr=requireTyped(),fr=requireAbstractCoder();class hr extends fr.Coder{constructor(mr){super("address","address",mr,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(mr,gr){let yr=dr.Typed.dereference(gr,"string");try{yr=(0,cr.getAddress)(yr)}catch(xr){return this._throwError(xr.message,gr)}return mr.writeValue(yr)}decode(mr){return(0,cr.getAddress)((0,ar.toBeHex)(mr.readValue(),20))}}return address$3.AddressCoder=hr,address$3}var array={},anonymous={},hasRequiredAnonymous;function requireAnonymous(){if(hasRequiredAnonymous)return anonymous;hasRequiredAnonymous=1,Object.defineProperty(anonymous,"__esModule",{value:!0}),anonymous.AnonymousCoder=void 0;const cr=requireAbstractCoder();class ar extends cr.Coder{coder;constructor(fr){super(fr.name,fr.type,"_",fr.dynamic),this.coder=fr}defaultValue(){return this.coder.defaultValue()}encode(fr,hr){return this.coder.encode(fr,hr)}decode(fr){return this.coder.decode(fr)}}return anonymous.AnonymousCoder=ar,anonymous}var hasRequiredArray;function requireArray(){if(hasRequiredArray)return array;hasRequiredArray=1,Object.defineProperty(array,"__esModule",{value:!0}),array.ArrayCoder=array.unpack=array.pack=void 0;const cr=requireUtils$1(),ar=requireTyped(),dr=requireAbstractCoder(),fr=requireAnonymous();function hr(gr,yr,xr){let wr=[];if(Array.isArray(xr))wr=xr;else if(xr&&typeof xr=="object"){let Ar={};wr=yr.map(_r=>{const Cr=_r.localName;return(0,cr.assert)(Cr,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:_r},value:xr}),(0,cr.assert)(!Ar[Cr],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:_r},value:xr}),Ar[Cr]=!0,xr[Cr]})}else(0,cr.assertArgument)(!1,"invalid tuple value","tuple",xr);(0,cr.assertArgument)(yr.length===wr.length,"types/value length mismatch","tuple",xr);let br=new dr.Writer,Sr=new dr.Writer,vr=[];yr.forEach((Ar,_r)=>{let Cr=wr[_r];if(Ar.dynamic){let kr=Sr.length;Ar.encode(Sr,Cr);let Rr=br.writeUpdatableValue();vr.push(Ir=>{Rr(Ir+kr)})}else Ar.encode(br,Cr)}),vr.forEach(Ar=>{Ar(br.length)});let Er=gr.appendWriter(br);return Er+=gr.appendWriter(Sr),Er}array.pack=hr;function pr(gr,yr){let xr=[],wr=[],br=gr.subReader(0);return yr.forEach(Sr=>{let vr=null;if(Sr.dynamic){let Er=gr.readIndex(),Ar=br.subReader(Er);try{vr=Sr.decode(Ar)}catch(_r){if((0,cr.isError)(_r,"BUFFER_OVERRUN"))throw _r;vr=_r,vr.baseType=Sr.name,vr.name=Sr.localName,vr.type=Sr.type}}else try{vr=Sr.decode(gr)}catch(Er){if((0,cr.isError)(Er,"BUFFER_OVERRUN"))throw Er;vr=Er,vr.baseType=Sr.name,vr.name=Sr.localName,vr.type=Sr.type}if(vr==null)throw new Error("investigate");xr.push(vr),wr.push(Sr.localName||null)}),dr.Result.fromItems(xr,wr)}array.unpack=pr;class mr extends dr.Coder{coder;length;constructor(yr,xr,wr){const br=yr.type+"["+(xr>=0?xr:"")+"]",Sr=xr===-1||yr.dynamic;super("array",br,wr,Sr),(0,cr.defineProperties)(this,{coder:yr,length:xr})}defaultValue(){const yr=this.coder.defaultValue(),xr=[];for(let wr=0;wr<this.length;wr++)xr.push(yr);return xr}encode(yr,xr){const wr=ar.Typed.dereference(xr,"array");Array.isArray(wr)||this._throwError("expected array value",wr);let br=this.length;br===-1&&(br=wr.length,yr.writeValue(wr.length)),(0,cr.assertArgumentCount)(wr.length,br,"coder array"+(this.localName?" "+this.localName:""));let Sr=[];for(let vr=0;vr<wr.length;vr++)Sr.push(this.coder);return hr(yr,Sr,wr)}decode(yr){let xr=this.length;xr===-1&&(xr=yr.readIndex(),(0,cr.assert)(xr*dr.WordSize<=yr.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:yr.bytes,offset:xr*dr.WordSize,length:yr.dataLength}));let wr=[];for(let br=0;br<xr;br++)wr.push(new fr.AnonymousCoder(this.coder));return pr(yr,wr)}}return array.ArrayCoder=mr,array}var boolean={},hasRequiredBoolean;function requireBoolean(){if(hasRequiredBoolean)return boolean;hasRequiredBoolean=1,Object.defineProperty(boolean,"__esModule",{value:!0}),boolean.BooleanCoder=void 0;const cr=requireTyped(),ar=requireAbstractCoder();class dr extends ar.Coder{constructor(hr){super("bool","bool",hr,!1)}defaultValue(){return!1}encode(hr,pr){const mr=cr.Typed.dereference(pr,"bool");return hr.writeValue(mr?1:0)}decode(hr){return!!hr.readValue()}}return boolean.BooleanCoder=dr,boolean}var bytes$2={},hasRequiredBytes;function requireBytes(){if(hasRequiredBytes)return bytes$2;hasRequiredBytes=1,Object.defineProperty(bytes$2,"__esModule",{value:!0}),bytes$2.BytesCoder=bytes$2.DynamicBytesCoder=void 0;const cr=requireUtils$1(),ar=requireAbstractCoder();class dr extends ar.Coder{constructor(pr,mr){super(pr,pr,mr,!0)}defaultValue(){return"0x"}encode(pr,mr){mr=(0,cr.getBytesCopy)(mr);let gr=pr.writeValue(mr.length);return gr+=pr.writeBytes(mr),gr}decode(pr){return pr.readBytes(pr.readIndex(),!0)}}bytes$2.DynamicBytesCoder=dr;class fr extends dr{constructor(pr){super("bytes",pr)}decode(pr){return(0,cr.hexlify)(super.decode(pr))}}return bytes$2.BytesCoder=fr,bytes$2}var fixedBytes={},hasRequiredFixedBytes;function requireFixedBytes(){if(hasRequiredFixedBytes)return fixedBytes;hasRequiredFixedBytes=1,Object.defineProperty(fixedBytes,"__esModule",{value:!0}),fixedBytes.FixedBytesCoder=void 0;const cr=requireUtils$1(),ar=requireTyped(),dr=requireAbstractCoder();class fr extends dr.Coder{size;constructor(pr,mr){let gr="bytes"+String(pr);super(gr,gr,mr,!1),(0,cr.defineProperties)(this,{size:pr},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(pr,mr){let gr=(0,cr.getBytesCopy)(ar.Typed.dereference(mr,this.type));return gr.length!==this.size&&this._throwError("incorrect data length",mr),pr.writeBytes(gr)}decode(pr){return(0,cr.hexlify)(pr.readBytes(this.size))}}return fixedBytes.FixedBytesCoder=fr,fixedBytes}var _null={},hasRequired_null;function require_null(){if(hasRequired_null)return _null;hasRequired_null=1,Object.defineProperty(_null,"__esModule",{value:!0}),_null.NullCoder=void 0;const cr=requireAbstractCoder(),ar=new Uint8Array([]);class dr extends cr.Coder{constructor(hr){super("null","",hr,!1)}defaultValue(){return null}encode(hr,pr){return pr!=null&&this._throwError("not null",pr),hr.writeBytes(ar)}decode(hr){return hr.readBytes(0),null}}return _null.NullCoder=dr,_null}var number$3={},hasRequiredNumber;function requireNumber(){if(hasRequiredNumber)return number$3;hasRequiredNumber=1,Object.defineProperty(number$3,"__esModule",{value:!0}),number$3.NumberCoder=void 0;const cr=requireUtils$1(),ar=requireTyped(),dr=requireAbstractCoder(),fr=BigInt(0),hr=BigInt(1),pr=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class mr extends dr.Coder{size;signed;constructor(yr,xr,wr){const br=(xr?"int":"uint")+yr*8;super(br,br,wr,!1),(0,cr.defineProperties)(this,{size:yr,signed:xr},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(yr,xr){let wr=(0,cr.getBigInt)(ar.Typed.dereference(xr,this.type)),br=(0,cr.mask)(pr,dr.WordSize*8);if(this.signed){let Sr=(0,cr.mask)(br,this.size*8-1);(wr>Sr||wr<-(Sr+hr))&&this._throwError("value out-of-bounds",xr),wr=(0,cr.toTwos)(wr,8*dr.WordSize)}else(wr<fr||wr>(0,cr.mask)(br,this.size*8))&&this._throwError("value out-of-bounds",xr);return yr.writeValue(wr)}decode(yr){let xr=(0,cr.mask)(yr.readValue(),this.size*8);return this.signed&&(xr=(0,cr.fromTwos)(xr,this.size*8)),xr}}return number$3.NumberCoder=mr,number$3}var string$3={},hasRequiredString;function requireString(){if(hasRequiredString)return string$3;hasRequiredString=1,Object.defineProperty(string$3,"__esModule",{value:!0}),string$3.StringCoder=void 0;const cr=requireUtf8(),ar=requireTyped(),dr=requireBytes();class fr extends dr.DynamicBytesCoder{constructor(pr){super("string",pr)}defaultValue(){return""}encode(pr,mr){return super.encode(pr,(0,cr.toUtf8Bytes)(ar.Typed.dereference(mr,"string")))}decode(pr){return(0,cr.toUtf8String)(super.decode(pr))}}return string$3.StringCoder=fr,string$3}var tuple={},hasRequiredTuple;function requireTuple(){if(hasRequiredTuple)return tuple;hasRequiredTuple=1,Object.defineProperty(tuple,"__esModule",{value:!0}),tuple.TupleCoder=void 0;const cr=requireProperties(),ar=requireTyped(),dr=requireAbstractCoder(),fr=requireArray();class hr extends dr.Coder{coders;constructor(mr,gr){let yr=!1;const xr=[];mr.forEach(br=>{br.dynamic&&(yr=!0),xr.push(br.type)});const wr="tuple("+xr.join(",")+")";super("tuple",wr,gr,yr),(0,cr.defineProperties)(this,{coders:Object.freeze(mr.slice())})}defaultValue(){const mr=[];this.coders.forEach(yr=>{mr.push(yr.defaultValue())});const gr=this.coders.reduce((yr,xr)=>{const wr=xr.localName;return wr&&(yr[wr]||(yr[wr]=0),yr[wr]++),yr},{});return this.coders.forEach((yr,xr)=>{let wr=yr.localName;!wr||gr[wr]!==1||(wr==="length"&&(wr="_length"),mr[wr]==null&&(mr[wr]=mr[xr]))}),Object.freeze(mr)}encode(mr,gr){const yr=ar.Typed.dereference(gr,"tuple");return(0,fr.pack)(mr,this.coders,yr)}decode(mr){return(0,fr.unpack)(mr,this.coders)}}return tuple.TupleCoder=hr,tuple}var fragments={},hash$2={},id={},hasRequiredId;function requireId(){if(hasRequiredId)return id;hasRequiredId=1,Object.defineProperty(id,"__esModule",{value:!0}),id.id=void 0;const cr=requireCrypto(),ar=requireUtils$1();function dr(fr){return(0,cr.keccak256)((0,ar.toUtf8Bytes)(fr))}return id.id=dr,id}var namehash={};const require$$2=getAugmentedNamespace(dist);var hasRequiredNamehash;function requireNamehash(){if(hasRequiredNamehash)return namehash;hasRequiredNamehash=1,Object.defineProperty(namehash,"__esModule",{value:!0}),namehash.dnsEncode=namehash.namehash=namehash.isValidName=namehash.ensNormalize=void 0;const cr=requireCrypto(),ar=requireUtils$1(),dr=require$$2,fr=new Uint8Array(32);fr.fill(0);function hr(wr){return(0,ar.assertArgument)(wr.length!==0,"invalid ENS name; empty component","comp",wr),wr}function pr(wr){const br=(0,ar.toUtf8Bytes)(mr(wr)),Sr=[];if(wr.length===0)return Sr;let vr=0;for(let Er=0;Er<br.length;Er++)br[Er]===46&&(Sr.push(hr(br.slice(vr,Er))),vr=Er+1);return(0,ar.assertArgument)(vr<br.length,"invalid ENS name; empty component","name",wr),Sr.push(hr(br.slice(vr))),Sr}function mr(wr){try{if(wr.length===0)throw new Error("empty label");return(0,dr.ens_normalize)(wr)}catch(br){(0,ar.assertArgument)(!1,`invalid ENS name (${br.message})`,"name",wr)}}namehash.ensNormalize=mr;function gr(wr){try{return pr(wr).length!==0}catch{}return!1}namehash.isValidName=gr;function yr(wr){(0,ar.assertArgument)(typeof wr=="string","invalid ENS name; not a string","name",wr),(0,ar.assertArgument)(wr.length,"invalid ENS name (empty label)","name",wr);let br=fr;const Sr=pr(wr);for(;Sr.length;)br=(0,cr.keccak256)((0,ar.concat)([br,(0,cr.keccak256)(Sr.pop())]));return(0,ar.hexlify)(br)}namehash.namehash=yr;function xr(wr){return(0,ar.hexlify)((0,ar.concat)(pr(wr).map(br=>{if(br.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const Sr=new Uint8Array(br.length+1);return Sr.set(br,1),Sr[0]=Sr.length-1,Sr})))+"00"}return namehash.dnsEncode=xr,namehash}var message$1={},transaction$1={},accesslist={},hasRequiredAccesslist;function requireAccesslist(){if(hasRequiredAccesslist)return accesslist;hasRequiredAccesslist=1,Object.defineProperty(accesslist,"__esModule",{value:!0}),accesslist.accessListify=void 0;const cr=requireAddress$2(),ar=requireUtils$1();function dr(hr,pr){return{address:(0,cr.getAddress)(hr),storageKeys:pr.map((mr,gr)=>((0,ar.assertArgument)((0,ar.isHexString)(mr,32),"invalid slot",`storageKeys[${gr}]`,mr),mr.toLowerCase()))}}function fr(hr){if(Array.isArray(hr))return hr.map((mr,gr)=>Array.isArray(mr)?((0,ar.assertArgument)(mr.length===2,"invalid slot set",`value[${gr}]`,mr),dr(mr[0],mr[1])):((0,ar.assertArgument)(mr!=null&&typeof mr=="object","invalid address-slot set","value",hr),dr(mr.address,mr.storageKeys)));(0,ar.assertArgument)(hr!=null&&typeof hr=="object","invalid access list","value",hr);const pr=Object.keys(hr).map(mr=>{const gr=hr[mr].reduce((yr,xr)=>(yr[xr]=!0,yr),{});return dr(mr,Object.keys(gr).sort())});return pr.sort((mr,gr)=>mr.address.localeCompare(gr.address)),pr}return accesslist.accessListify=fr,accesslist}var address={},hasRequiredAddress;function requireAddress(){if(hasRequiredAddress)return address;hasRequiredAddress=1,Object.defineProperty(address,"__esModule",{value:!0}),address.recoverAddress=address.computeAddress=void 0;const cr=requireAddress$2(),ar=requireCrypto();function dr(hr){let pr;return typeof hr=="string"?pr=ar.SigningKey.computePublicKey(hr,!1):pr=hr.publicKey,(0,cr.getAddress)((0,ar.keccak256)("0x"+pr.substring(4)).substring(26))}address.computeAddress=dr;function fr(hr,pr){return dr(ar.SigningKey.recoverPublicKey(hr,pr))}return address.recoverAddress=fr,address}var transaction={},hasRequiredTransaction$1;function requireTransaction$1(){if(hasRequiredTransaction$1)return transaction;hasRequiredTransaction$1=1,Object.defineProperty(transaction,"__esModule",{value:!0}),transaction.Transaction=void 0;const cr=requireAddress$2(),ar=requireCrypto(),dr=requireUtils$1(),fr=requireAccesslist(),hr=requireAddress(),pr=BigInt(0),mr=BigInt(2),gr=BigInt(27),yr=BigInt(28),xr=BigInt(35),wr=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function br(Fr){return Fr==="0x"?null:(0,cr.getAddress)(Fr)}function Sr(Fr,jr){try{return(0,fr.accessListify)(Fr)}catch(Ur){(0,dr.assertArgument)(!1,Ur.message,jr,Fr)}}function vr(Fr,jr){return Fr==="0x"?0:(0,dr.getNumber)(Fr,jr)}function Er(Fr,jr){if(Fr==="0x")return pr;const Ur=(0,dr.getBigInt)(Fr,jr);return(0,dr.assertArgument)(Ur<=wr,"value exceeds uint size",jr,Ur),Ur}function Ar(Fr,jr){const Ur=(0,dr.getBigInt)(Fr,"value"),qr=(0,dr.toBeArray)(Ur);return(0,dr.assertArgument)(qr.length<=32,"value too large",`tx.${jr}`,Ur),qr}function _r(Fr){return(0,fr.accessListify)(Fr).map(jr=>[jr.address,jr.storageKeys])}function Cr(Fr){const jr=(0,dr.decodeRlp)(Fr);(0,dr.assertArgument)(Array.isArray(jr)&&(jr.length===9||jr.length===6),"invalid field count for legacy transaction","data",Fr);const Ur={type:0,nonce:vr(jr[0],"nonce"),gasPrice:Er(jr[1],"gasPrice"),gasLimit:Er(jr[2],"gasLimit"),to:br(jr[3]),value:Er(jr[4],"value"),data:(0,dr.hexlify)(jr[5]),chainId:pr};if(jr.length===6)return Ur;const qr=Er(jr[6],"v"),Hr=Er(jr[7],"r"),Or=Er(jr[8],"s");if(Hr===pr&&Or===pr)Ur.chainId=qr;else{let Mr=(qr-xr)/mr;Mr<pr&&(Mr=pr),Ur.chainId=Mr,(0,dr.assertArgument)(Mr!==pr||qr===gr||qr===yr,"non-canonical legacy v","v",jr[6]),Ur.signature=ar.Signature.from({r:(0,dr.zeroPadValue)(jr[7],32),s:(0,dr.zeroPadValue)(jr[8],32),v:qr}),Ur.hash=(0,ar.keccak256)(Fr)}return Ur}function kr(Fr,jr){const Ur=[Ar(Fr.nonce||0,"nonce"),Ar(Fr.gasPrice||0,"gasPrice"),Ar(Fr.gasLimit||0,"gasLimit"),Fr.to!=null?(0,cr.getAddress)(Fr.to):"0x",Ar(Fr.value||0,"value"),Fr.data||"0x"];let qr=pr;if(Fr.chainId!=pr)qr=(0,dr.getBigInt)(Fr.chainId,"tx.chainId"),(0,dr.assertArgument)(!jr||jr.networkV==null||jr.legacyChainId===qr,"tx.chainId/sig.v mismatch","sig",jr);else if(Fr.signature){const Or=Fr.signature.legacyChainId;Or!=null&&(qr=Or)}if(!jr)return qr!==pr&&(Ur.push((0,dr.toBeArray)(qr)),Ur.push("0x"),Ur.push("0x")),(0,dr.encodeRlp)(Ur);let Hr=BigInt(27+jr.yParity);return qr!==pr?Hr=ar.Signature.getChainIdV(qr,jr.v):BigInt(jr.v)!==Hr&&(0,dr.assertArgument)(!1,"tx.chainId/sig.v mismatch","sig",jr),Ur.push((0,dr.toBeArray)(Hr)),Ur.push((0,dr.toBeArray)(jr.r)),Ur.push((0,dr.toBeArray)(jr.s)),(0,dr.encodeRlp)(Ur)}function Rr(Fr,jr){let Ur;try{if(Ur=vr(jr[0],"yParity"),Ur!==0&&Ur!==1)throw new Error("bad yParity")}catch{(0,dr.assertArgument)(!1,"invalid yParity","yParity",jr[0])}const qr=(0,dr.zeroPadValue)(jr[1],32),Hr=(0,dr.zeroPadValue)(jr[2],32),Or=ar.Signature.from({r:qr,s:Hr,yParity:Ur});Fr.signature=Or}function Ir(Fr){const jr=(0,dr.decodeRlp)((0,dr.getBytes)(Fr).slice(1));(0,dr.assertArgument)(Array.isArray(jr)&&(jr.length===9||jr.length===12),"invalid field count for transaction type: 2","data",(0,dr.hexlify)(Fr));const Ur=Er(jr[2],"maxPriorityFeePerGas"),qr=Er(jr[3],"maxFeePerGas"),Hr={type:2,chainId:Er(jr[0],"chainId"),nonce:vr(jr[1],"nonce"),maxPriorityFeePerGas:Ur,maxFeePerGas:qr,gasPrice:null,gasLimit:Er(jr[4],"gasLimit"),to:br(jr[5]),value:Er(jr[6],"value"),data:(0,dr.hexlify)(jr[7]),accessList:Sr(jr[8],"accessList")};return jr.length===9||(Hr.hash=(0,ar.keccak256)(Fr),Rr(Hr,jr.slice(9))),Hr}function Nr(Fr,jr){const Ur=[Ar(Fr.chainId||0,"chainId"),Ar(Fr.nonce||0,"nonce"),Ar(Fr.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ar(Fr.maxFeePerGas||0,"maxFeePerGas"),Ar(Fr.gasLimit||0,"gasLimit"),Fr.to!=null?(0,cr.getAddress)(Fr.to):"0x",Ar(Fr.value||0,"value"),Fr.data||"0x",_r(Fr.accessList||[])];return jr&&(Ur.push(Ar(jr.yParity,"yParity")),Ur.push((0,dr.toBeArray)(jr.r)),Ur.push((0,dr.toBeArray)(jr.s))),(0,dr.concat)(["0x02",(0,dr.encodeRlp)(Ur)])}function Pr(Fr){const jr=(0,dr.decodeRlp)((0,dr.getBytes)(Fr).slice(1));(0,dr.assertArgument)(Array.isArray(jr)&&(jr.length===8||jr.length===11),"invalid field count for transaction type: 1","data",(0,dr.hexlify)(Fr));const Ur={type:1,chainId:Er(jr[0],"chainId"),nonce:vr(jr[1],"nonce"),gasPrice:Er(jr[2],"gasPrice"),gasLimit:Er(jr[3],"gasLimit"),to:br(jr[4]),value:Er(jr[5],"value"),data:(0,dr.hexlify)(jr[6]),accessList:Sr(jr[7],"accessList")};return jr.length===8||(Ur.hash=(0,ar.keccak256)(Fr),Rr(Ur,jr.slice(8))),Ur}function Tr(Fr,jr){const Ur=[Ar(Fr.chainId||0,"chainId"),Ar(Fr.nonce||0,"nonce"),Ar(Fr.gasPrice||0,"gasPrice"),Ar(Fr.gasLimit||0,"gasLimit"),Fr.to!=null?(0,cr.getAddress)(Fr.to):"0x",Ar(Fr.value||0,"value"),Fr.data||"0x",_r(Fr.accessList||[])];return jr&&(Ur.push(Ar(jr.yParity,"recoveryParam")),Ur.push((0,dr.toBeArray)(jr.r)),Ur.push((0,dr.toBeArray)(jr.s))),(0,dr.concat)(["0x01",(0,dr.encodeRlp)(Ur)])}class Br{#e;#t;#r;#n;#s;#a;#i;#o;#c;#d;#u;#f;get type(){return this.#e}set type(jr){switch(jr){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;default:(0,dr.assertArgument)(!1,"unsupported transaction type","type",jr)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return this.#t}set to(jr){this.#t=jr==null?null:(0,cr.getAddress)(jr)}get nonce(){return this.#n}set nonce(jr){this.#n=(0,dr.getNumber)(jr,"value")}get gasLimit(){return this.#s}set gasLimit(jr){this.#s=(0,dr.getBigInt)(jr)}get gasPrice(){const jr=this.#a;return jr==null&&(this.type===0||this.type===1)?pr:jr}set gasPrice(jr){this.#a=jr==null?null:(0,dr.getBigInt)(jr,"gasPrice")}get maxPriorityFeePerGas(){const jr=this.#i;return jr??(this.type===2?pr:null)}set maxPriorityFeePerGas(jr){this.#i=jr==null?null:(0,dr.getBigInt)(jr,"maxPriorityFeePerGas")}get maxFeePerGas(){const jr=this.#o;return jr??(this.type===2?pr:null)}set maxFeePerGas(jr){this.#o=jr==null?null:(0,dr.getBigInt)(jr,"maxFeePerGas")}get data(){return this.#r}set data(jr){this.#r=(0,dr.hexlify)(jr)}get value(){return this.#c}set value(jr){this.#c=(0,dr.getBigInt)(jr,"value")}get chainId(){return this.#d}set chainId(jr){this.#d=(0,dr.getBigInt)(jr)}get signature(){return this.#u||null}set signature(jr){this.#u=jr==null?null:ar.Signature.from(jr)}get accessList(){const jr=this.#f||null;return jr??(this.type===1||this.type===2?[]:null)}set accessList(jr){this.#f=jr==null?null:(0,fr.accessListify)(jr)}constructor(){this.#e=null,this.#t=null,this.#n=0,this.#s=BigInt(0),this.#a=null,this.#i=null,this.#o=null,this.#r="0x",this.#c=BigInt(0),this.#d=BigInt(0),this.#u=null,this.#f=null}get hash(){return this.signature==null?null:(0,ar.keccak256)(this.serialized)}get unsignedHash(){return(0,ar.keccak256)(this.unsignedSerialized)}get from(){return this.signature==null?null:(0,hr.recoverAddress)(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:ar.SigningKey.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){switch((0,dr.assert)(this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return kr(this,this.signature);case 1:return Tr(this,this.signature);case 2:return Nr(this,this.signature)}(0,dr.assert)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return kr(this);case 1:return Tr(this);case 2:return Nr(this)}(0,dr.assert)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const jr=this.gasPrice!=null,Ur=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,qr=this.accessList!=null;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&(0,dr.assert)(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),(0,dr.assert)(!Ur||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),(0,dr.assert)(this.type!==0||!qr,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const Hr=[];return this.type!=null?Hr.push(this.type):Ur?Hr.push(2):jr?(Hr.push(1),qr||Hr.push(0)):qr?(Hr.push(1),Hr.push(2)):(Hr.push(0),Hr.push(1),Hr.push(2)),Hr.sort(),Hr}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}clone(){return Br.from(this)}toJSON(){const jr=Ur=>Ur==null?null:Ur.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:jr(this.gasLimit),gasPrice:jr(this.gasPrice),maxPriorityFeePerGas:jr(this.maxPriorityFeePerGas),maxFeePerGas:jr(this.maxFeePerGas),value:jr(this.value),chainId:jr(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(jr){if(jr==null)return new Br;if(typeof jr=="string"){const qr=(0,dr.getBytes)(jr);if(qr[0]>=127)return Br.from(Cr(qr));switch(qr[0]){case 1:return Br.from(Pr(qr));case 2:return Br.from(Ir(qr))}(0,dr.assert)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const Ur=new Br;return jr.type!=null&&(Ur.type=jr.type),jr.to!=null&&(Ur.to=jr.to),jr.nonce!=null&&(Ur.nonce=jr.nonce),jr.gasLimit!=null&&(Ur.gasLimit=jr.gasLimit),jr.gasPrice!=null&&(Ur.gasPrice=jr.gasPrice),jr.maxPriorityFeePerGas!=null&&(Ur.maxPriorityFeePerGas=jr.maxPriorityFeePerGas),jr.maxFeePerGas!=null&&(Ur.maxFeePerGas=jr.maxFeePerGas),jr.data!=null&&(Ur.data=jr.data),jr.value!=null&&(Ur.value=jr.value),jr.chainId!=null&&(Ur.chainId=jr.chainId),jr.signature!=null&&(Ur.signature=ar.Signature.from(jr.signature)),jr.accessList!=null&&(Ur.accessList=jr.accessList),jr.hash!=null&&((0,dr.assertArgument)(Ur.isSigned(),"unsigned transaction cannot define hash","tx",jr),(0,dr.assertArgument)(Ur.hash===jr.hash,"hash mismatch","tx",jr)),jr.from!=null&&((0,dr.assertArgument)(Ur.isSigned(),"unsigned transaction cannot define from","tx",jr),(0,dr.assertArgument)(Ur.from.toLowerCase()===(jr.from||"").toLowerCase(),"from mismatch","tx",jr)),Ur}}return transaction.Transaction=Br,transaction}var hasRequiredTransaction;function requireTransaction(){return hasRequiredTransaction||(hasRequiredTransaction=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.Transaction=cr.recoverAddress=cr.computeAddress=cr.accessListify=void 0;var ar=requireAccesslist();Object.defineProperty(cr,"accessListify",{enumerable:!0,get:function(){return ar.accessListify}});var dr=requireAddress();Object.defineProperty(cr,"computeAddress",{enumerable:!0,get:function(){return dr.computeAddress}}),Object.defineProperty(cr,"recoverAddress",{enumerable:!0,get:function(){return dr.recoverAddress}});var fr=requireTransaction$1();Object.defineProperty(cr,"Transaction",{enumerable:!0,get:function(){return fr.Transaction}})}(transaction$1)),transaction$1}var hasRequiredMessage;function requireMessage(){if(hasRequiredMessage)return message$1;hasRequiredMessage=1,Object.defineProperty(message$1,"__esModule",{value:!0}),message$1.verifyMessage=message$1.hashMessage=void 0;const cr=requireCrypto(),ar=requireConstants(),dr=requireTransaction(),fr=requireUtils$1();function hr(mr){return typeof mr=="string"&&(mr=(0,fr.toUtf8Bytes)(mr)),(0,cr.keccak256)((0,fr.concat)([(0,fr.toUtf8Bytes)(ar.MessagePrefix),(0,fr.toUtf8Bytes)(String(mr.length)),mr]))}message$1.hashMessage=hr;function pr(mr,gr){const yr=hr(mr);return(0,dr.recoverAddress)(yr,gr)}return message$1.verifyMessage=pr,message$1}var solidity={},hasRequiredSolidity;function requireSolidity(){if(hasRequiredSolidity)return solidity;hasRequiredSolidity=1,Object.defineProperty(solidity,"__esModule",{value:!0}),solidity.solidityPackedSha256=solidity.solidityPackedKeccak256=solidity.solidityPacked=void 0;const cr=requireAddress$2(),ar=requireCrypto(),dr=requireUtils$1(),fr=new RegExp("^bytes([0-9]+)$"),hr=new RegExp("^(u?int)([0-9]*)$"),pr=new RegExp("^(.*)\\[([0-9]*)\\]$");function mr(wr,br,Sr){switch(wr){case"address":return Sr?(0,dr.getBytes)((0,dr.zeroPadValue)(br,32)):(0,dr.getBytes)((0,cr.getAddress)(br));case"string":return(0,dr.toUtf8Bytes)(br);case"bytes":return(0,dr.getBytes)(br);case"bool":return br=br?"0x01":"0x00",Sr?(0,dr.getBytes)((0,dr.zeroPadValue)(br,32)):(0,dr.getBytes)(br)}let vr=wr.match(hr);if(vr){let Er=vr[1]==="int",Ar=parseInt(vr[2]||"256");return(0,dr.assertArgument)((!vr[2]||vr[2]===String(Ar))&&Ar%8===0&&Ar!==0&&Ar<=256,"invalid number type","type",wr),Sr&&(Ar=256),Er&&(br=(0,dr.toTwos)(br,Ar)),(0,dr.getBytes)((0,dr.zeroPadValue)((0,dr.toBeArray)(br),Ar/8))}if(vr=wr.match(fr),vr){const Er=parseInt(vr[1]);return(0,dr.assertArgument)(String(Er)===vr[1]&&Er!==0&&Er<=32,"invalid bytes type","type",wr),(0,dr.assertArgument)((0,dr.dataLength)(br)===Er,`invalid value for ${wr}`,"value",br),Sr?(0,dr.getBytes)((0,dr.zeroPadBytes)(br,32)):br}if(vr=wr.match(pr),vr&&Array.isArray(br)){const Er=vr[1],Ar=parseInt(vr[2]||String(br.length));(0,dr.assertArgument)(Ar===br.length,`invalid array length for ${wr}`,"value",br);const _r=[];return br.forEach(function(Cr){_r.push(mr(Er,Cr,!0))}),(0,dr.getBytes)((0,dr.concat)(_r))}(0,dr.assertArgument)(!1,"invalid type","type",wr)}function gr(wr,br){(0,dr.assertArgument)(wr.length===br.length,"wrong number of values; expected ${ types.length }","values",br);const Sr=[];return wr.forEach(function(vr,Er){Sr.push(mr(vr,br[Er]))}),(0,dr.hexlify)((0,dr.concat)(Sr))}solidity.solidityPacked=gr;function yr(wr,br){return(0,ar.keccak256)(gr(wr,br))}solidity.solidityPackedKeccak256=yr;function xr(wr,br){return(0,ar.sha256)(gr(wr,br))}return solidity.solidityPackedSha256=xr,solidity}var typedData={},hasRequiredTypedData;function requireTypedData(){if(hasRequiredTypedData)return typedData;hasRequiredTypedData=1,Object.defineProperty(typedData,"__esModule",{value:!0}),typedData.verifyTypedData=typedData.TypedDataEncoder=void 0;const cr=requireAddress$2(),ar=requireCrypto(),dr=requireTransaction(),fr=requireUtils$1(),hr=requireId(),pr=new Uint8Array(32);pr.fill(0);const mr=BigInt(-1),gr=BigInt(0),yr=BigInt(1),xr=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function wr(Nr){const Pr=(0,fr.getBytes)(Nr),Tr=Pr.length%32;return Tr?(0,fr.concat)([Pr,pr.slice(Tr)]):(0,fr.hexlify)(Pr)}const br=(0,fr.toBeHex)(yr,32),Sr=(0,fr.toBeHex)(gr,32),vr={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Er=["name","version","chainId","verifyingContract","salt"];function Ar(Nr){return function(Pr){return(0,fr.assertArgument)(typeof Pr=="string",`invalid domain value for ${JSON.stringify(Nr)}`,`domain.${Nr}`,Pr),Pr}}const _r={name:Ar("name"),version:Ar("version"),chainId:function(Nr){const Pr=(0,fr.getBigInt)(Nr,"domain.chainId");return(0,fr.assertArgument)(Pr>=0,"invalid chain ID","domain.chainId",Nr),Number.isSafeInteger(Pr)?Number(Pr):(0,fr.toQuantity)(Pr)},verifyingContract:function(Nr){try{return(0,cr.getAddress)(Nr).toLowerCase()}catch{}(0,fr.assertArgument)(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",Nr)},salt:function(Nr){const Pr=(0,fr.getBytes)(Nr,"domain.salt");return(0,fr.assertArgument)(Pr.length===32,'invalid domain value "salt"',"domain.salt",Nr),(0,fr.hexlify)(Pr)}};function Cr(Nr){{const Pr=Nr.match(/^(u?)int(\d*)$/);if(Pr){const Tr=Pr[1]==="",Br=parseInt(Pr[2]||"256");(0,fr.assertArgument)(Br%8===0&&Br!==0&&Br<=256&&(Pr[2]==null||Pr[2]===String(Br)),"invalid numeric width","type",Nr);const Fr=(0,fr.mask)(xr,Tr?Br-1:Br),jr=Tr?(Fr+yr)*mr:gr;return function(Ur){const qr=(0,fr.getBigInt)(Ur,"value");return(0,fr.assertArgument)(qr>=jr&&qr<=Fr,`value out-of-bounds for ${Nr}`,"value",qr),(0,fr.toBeHex)(Tr?(0,fr.toTwos)(qr,256):qr,32)}}}{const Pr=Nr.match(/^bytes(\d+)$/);if(Pr){const Tr=parseInt(Pr[1]);return(0,fr.assertArgument)(Tr!==0&&Tr<=32&&Pr[1]===String(Tr),"invalid bytes width","type",Nr),function(Br){const Fr=(0,fr.getBytes)(Br);return(0,fr.assertArgument)(Fr.length===Tr,`invalid length for ${Nr}`,"value",Br),wr(Br)}}}switch(Nr){case"address":return function(Pr){return(0,fr.zeroPadValue)((0,cr.getAddress)(Pr),32)};case"bool":return function(Pr){return Pr?br:Sr};case"bytes":return function(Pr){return(0,ar.keccak256)(Pr)};case"string":return function(Pr){return(0,hr.id)(Pr)}}return null}function kr(Nr,Pr){return`${Nr}(${Pr.map(({name:Tr,type:Br})=>Br+" "+Tr).join(",")})`}class Rr{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#r;constructor(Pr){this.#e=JSON.stringify(Pr),this.#t=new Map,this.#r=new Map;const Tr=new Map,Br=new Map,Fr=new Map;Object.keys(Pr).forEach(qr=>{Tr.set(qr,new Set),Br.set(qr,[]),Fr.set(qr,new Set)});for(const qr in Pr){const Hr=new Set;for(const Or of Pr[qr]){(0,fr.assertArgument)(!Hr.has(Or.name),`duplicate variable name ${JSON.stringify(Or.name)} in ${JSON.stringify(qr)}`,"types",Pr),Hr.add(Or.name);const Mr=Or.type.match(/^([^\x5b]*)(\x5b|$)/)[1]||null;(0,fr.assertArgument)(Mr!==qr,`circular type reference to ${JSON.stringify(Mr)}`,"types",Pr),!Cr(Mr)&&((0,fr.assertArgument)(Br.has(Mr),`unknown type ${JSON.stringify(Mr)}`,"types",Pr),Br.get(Mr).push(qr),Tr.get(qr).add(Mr))}}const jr=Array.from(Br.keys()).filter(qr=>Br.get(qr).length===0);(0,fr.assertArgument)(jr.length!==0,"missing primary type","types",Pr),(0,fr.assertArgument)(jr.length===1,`ambiguous primary types or unused types: ${jr.map(qr=>JSON.stringify(qr)).join(", ")}`,"types",Pr),(0,fr.defineProperties)(this,{primaryType:jr[0]});function Ur(qr,Hr){(0,fr.assertArgument)(!Hr.has(qr),`circular type reference to ${JSON.stringify(qr)}`,"types",Pr),Hr.add(qr);for(const Or of Tr.get(qr))if(Br.has(Or)){Ur(Or,Hr);for(const Mr of Hr)Fr.get(Mr).add(Or)}Hr.delete(qr)}Ur(this.primaryType,new Set);for(const[qr,Hr]of Fr){const Or=Array.from(Hr);Or.sort(),this.#t.set(qr,kr(qr,Pr[qr])+Or.map(Mr=>kr(Mr,Pr[Mr])).join(""))}}getEncoder(Pr){let Tr=this.#r.get(Pr);return Tr||(Tr=this.#n(Pr),this.#r.set(Pr,Tr)),Tr}#n(Pr){{const Fr=Cr(Pr);if(Fr)return Fr}const Tr=Pr.match(/^(.*)(\x5b(\d*)\x5d)$/);if(Tr){const Fr=Tr[1],jr=this.getEncoder(Fr);return Ur=>{(0,fr.assertArgument)(!Tr[3]||parseInt(Tr[3])===Ur.length,`array length mismatch; expected length ${parseInt(Tr[3])}`,"value",Ur);let qr=Ur.map(jr);return this.#t.has(Fr)&&(qr=qr.map(ar.keccak256)),(0,ar.keccak256)((0,fr.concat)(qr))}}const Br=this.types[Pr];if(Br){const Fr=(0,hr.id)(this.#t.get(Pr));return jr=>{const Ur=Br.map(({name:qr,type:Hr})=>{const Or=this.getEncoder(Hr)(jr[qr]);return this.#t.has(Hr)?(0,ar.keccak256)(Or):Or});return Ur.unshift(Fr),(0,fr.concat)(Ur)}}(0,fr.assertArgument)(!1,`unknown type: ${Pr}`,"type",Pr)}encodeType(Pr){const Tr=this.#t.get(Pr);return(0,fr.assertArgument)(Tr,`unknown type: ${JSON.stringify(Pr)}`,"name",Pr),Tr}encodeData(Pr,Tr){return this.getEncoder(Pr)(Tr)}hashStruct(Pr,Tr){return(0,ar.keccak256)(this.encodeData(Pr,Tr))}encode(Pr){return this.encodeData(this.primaryType,Pr)}hash(Pr){return this.hashStruct(this.primaryType,Pr)}_visit(Pr,Tr,Br){if(Cr(Pr))return Br(Pr,Tr);const Fr=Pr.match(/^(.*)(\x5b(\d*)\x5d)$/);if(Fr)return(0,fr.assertArgument)(!Fr[3]||parseInt(Fr[3])===Tr.length,`array length mismatch; expected length ${parseInt(Fr[3])}`,"value",Tr),Tr.map(Ur=>this._visit(Fr[1],Ur,Br));const jr=this.types[Pr];if(jr)return jr.reduce((Ur,{name:qr,type:Hr})=>(Ur[qr]=this._visit(Hr,Tr[qr],Br),Ur),{});(0,fr.assertArgument)(!1,`unknown type: ${Pr}`,"type",Pr)}visit(Pr,Tr){return this._visit(this.primaryType,Pr,Tr)}static from(Pr){return new Rr(Pr)}static getPrimaryType(Pr){return Rr.from(Pr).primaryType}static hashStruct(Pr,Tr,Br){return Rr.from(Tr).hashStruct(Pr,Br)}static hashDomain(Pr){const Tr=[];for(const Br in Pr){if(Pr[Br]==null)continue;const Fr=vr[Br];(0,fr.assertArgument)(Fr,`invalid typed-data domain key: ${JSON.stringify(Br)}`,"domain",Pr),Tr.push({name:Br,type:Fr})}return Tr.sort((Br,Fr)=>Er.indexOf(Br.name)-Er.indexOf(Fr.name)),Rr.hashStruct("EIP712Domain",{EIP712Domain:Tr},Pr)}static encode(Pr,Tr,Br){return(0,fr.concat)(["0x1901",Rr.hashDomain(Pr),Rr.from(Tr).hash(Br)])}static hash(Pr,Tr,Br){return(0,ar.keccak256)(Rr.encode(Pr,Tr,Br))}static async resolveNames(Pr,Tr,Br,Fr){Pr=Object.assign({},Pr);for(const qr in Pr)Pr[qr]==null&&delete Pr[qr];const jr={};Pr.verifyingContract&&!(0,fr.isHexString)(Pr.verifyingContract,20)&&(jr[Pr.verifyingContract]="0x");const Ur=Rr.from(Tr);Ur.visit(Br,(qr,Hr)=>(qr==="address"&&!(0,fr.isHexString)(Hr,20)&&(jr[Hr]="0x"),Hr));for(const qr in jr)jr[qr]=await Fr(qr);return Pr.verifyingContract&&jr[Pr.verifyingContract]&&(Pr.verifyingContract=jr[Pr.verifyingContract]),Br=Ur.visit(Br,(qr,Hr)=>qr==="address"&&jr[Hr]?jr[Hr]:Hr),{domain:Pr,value:Br}}static getPayload(Pr,Tr,Br){Rr.hashDomain(Pr);const Fr={},jr=[];Er.forEach(Hr=>{const Or=Pr[Hr];Or!=null&&(Fr[Hr]=_r[Hr](Or),jr.push({name:Hr,type:vr[Hr]}))});const Ur=Rr.from(Tr),qr=Object.assign({},Tr);return(0,fr.assertArgument)(qr.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",Tr),qr.EIP712Domain=jr,Ur.encode(Br),{types:qr,domain:Fr,primaryType:Ur.primaryType,message:Ur.visit(Br,(Hr,Or)=>{if(Hr.match(/^bytes(\d*)/))return(0,fr.hexlify)((0,fr.getBytes)(Or));if(Hr.match(/^u?int/))return(0,fr.getBigInt)(Or).toString();switch(Hr){case"address":return Or.toLowerCase();case"bool":return!!Or;case"string":return(0,fr.assertArgument)(typeof Or=="string","invalid string","value",Or),Or}(0,fr.assertArgument)(!1,"unsupported type","type",Hr)})}}}typedData.TypedDataEncoder=Rr;function Ir(Nr,Pr,Tr,Br){return(0,dr.recoverAddress)(Rr.hash(Nr,Pr,Tr),Br)}return typedData.verifyTypedData=Ir,typedData}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.verifyTypedData=cr.TypedDataEncoder=cr.solidityPackedSha256=cr.solidityPackedKeccak256=cr.solidityPacked=cr.verifyMessage=cr.hashMessage=cr.dnsEncode=cr.namehash=cr.isValidName=cr.ensNormalize=cr.id=void 0;var ar=requireId();Object.defineProperty(cr,"id",{enumerable:!0,get:function(){return ar.id}});var dr=requireNamehash();Object.defineProperty(cr,"ensNormalize",{enumerable:!0,get:function(){return dr.ensNormalize}}),Object.defineProperty(cr,"isValidName",{enumerable:!0,get:function(){return dr.isValidName}}),Object.defineProperty(cr,"namehash",{enumerable:!0,get:function(){return dr.namehash}}),Object.defineProperty(cr,"dnsEncode",{enumerable:!0,get:function(){return dr.dnsEncode}});var fr=requireMessage();Object.defineProperty(cr,"hashMessage",{enumerable:!0,get:function(){return fr.hashMessage}}),Object.defineProperty(cr,"verifyMessage",{enumerable:!0,get:function(){return fr.verifyMessage}});var hr=requireSolidity();Object.defineProperty(cr,"solidityPacked",{enumerable:!0,get:function(){return hr.solidityPacked}}),Object.defineProperty(cr,"solidityPackedKeccak256",{enumerable:!0,get:function(){return hr.solidityPackedKeccak256}}),Object.defineProperty(cr,"solidityPackedSha256",{enumerable:!0,get:function(){return hr.solidityPackedSha256}});var pr=requireTypedData();Object.defineProperty(cr,"TypedDataEncoder",{enumerable:!0,get:function(){return pr.TypedDataEncoder}}),Object.defineProperty(cr,"verifyTypedData",{enumerable:!0,get:function(){return pr.verifyTypedData}})}(hash$2)),hash$2}var hasRequiredFragments;function requireFragments(){if(hasRequiredFragments)return fragments;hasRequiredFragments=1,Object.defineProperty(fragments,"__esModule",{value:!0}),fragments.StructFragment=fragments.FunctionFragment=fragments.FallbackFragment=fragments.ConstructorFragment=fragments.EventFragment=fragments.ErrorFragment=fragments.NamedFragment=fragments.Fragment=fragments.ParamType=void 0;const cr=requireUtils$1(),ar=requireHash();function dr(Ts){const os=new Set;return Ts.forEach(bs=>os.add(bs)),Object.freeze(os)}const hr=dr("external public payable".split(" ")),pr="constant external internal payable private public pure view",mr=dr(pr.split(" ")),gr="constructor error event fallback function receive struct",yr=dr(gr.split(" ")),xr="calldata memory storage payable indexed",wr=dr(xr.split(" ")),Sr=[gr,xr,"tuple returns",pr].join(" "),vr=dr(Sr.split(" ")),Er={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Ar=new RegExp("^(\\s*)"),_r=new RegExp("^([0-9]+)"),Cr=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),kr=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Rr=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Ir{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(os){this.#e=0,this.#t=os.slice()}clone(){return new Ir(this.#t)}reset(){this.#e=0}#r(os=0,bs=0){return new Ir(this.#t.slice(os,bs).map(ws=>Object.freeze(Object.assign({},ws,{match:ws.match-os,linkBack:ws.linkBack-os,linkNext:ws.linkNext-os}))))}popKeyword(os){const bs=this.peek();if(bs.type!=="KEYWORD"||!os.has(bs.text))throw new Error(`expected keyword ${bs.text}`);return this.pop().text}popType(os){if(this.peek().type!==os)throw new Error(`expected ${os}; got ${JSON.stringify(this.peek())}`);return this.pop().text}popParen(){const os=this.peek();if(os.type!=="OPEN_PAREN")throw new Error("bad start");const bs=this.#r(this.#e+1,os.match+1);return this.#e=os.match+1,bs}popParams(){const os=this.peek();if(os.type!=="OPEN_PAREN")throw new Error("bad start");const bs=[];for(;this.#e<os.match-1;){const ws=this.peek().linkNext;bs.push(this.#r(this.#e+1,ws)),this.#e=ws}return this.#e=os.match+1,bs}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(os){const bs=this.peekType("KEYWORD");return bs!=null&&os.has(bs)?bs:null}peekType(os){if(this.length===0)return null;const bs=this.peek();return bs.type===os?bs.text:null}pop(){const os=this.peek();return this.#e++,os}toString(){const os=[];for(let bs=this.#e;bs<this.#t.length;bs++){const ws=this.#t[bs];os.push(`${ws.type}:${ws.text}`)}return`<TokenString ${os.join(" ")}>`}}function Nr(Ts){const os=[],bs=vs=>{const Ps=gs<Ts.length?JSON.stringify(Ts[gs]):"$EOI";throw new Error(`invalid token ${Ps} at ${gs}: ${vs}`)};let ws=[],As=[],gs=0;for(;gs<Ts.length;){let vs=Ts.substring(gs),Ps=vs.match(Ar);Ps&&(gs+=Ps[1].length,vs=Ts.substring(gs));const Os={depth:ws.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:gs,value:-1};os.push(Os);let Ms=Er[vs[0]]||"";if(Ms){if(Os.type=Ms,Os.text=vs[0],gs++,Ms==="OPEN_PAREN")ws.push(os.length-1),As.push(os.length-1);else if(Ms=="CLOSE_PAREN")ws.length===0&&bs("no matching open bracket"),Os.match=ws.pop(),os[Os.match].match=os.length-1,Os.depth--,Os.linkBack=As.pop(),os[Os.linkBack].linkNext=os.length-1;else if(Ms==="COMMA")Os.linkBack=As.pop(),os[Os.linkBack].linkNext=os.length-1,As.push(os.length-1);else if(Ms==="OPEN_BRACKET")Os.type="BRACKET";else if(Ms==="CLOSE_BRACKET"){let zs=os.pop().text;if(os.length>0&&os[os.length-1].type==="NUMBER"){const Hs=os.pop().text;zs=Hs+zs,os[os.length-1].value=(0,cr.getNumber)(Hs)}if(os.length===0||os[os.length-1].type!=="BRACKET")throw new Error("missing opening bracket");os[os.length-1].text+=zs}continue}if(Ps=vs.match(Cr),Ps){if(Os.text=Ps[1],gs+=Os.text.length,vr.has(Os.text)){Os.type="KEYWORD";continue}if(Os.text.match(Rr)){Os.type="TYPE";continue}Os.type="ID";continue}if(Ps=vs.match(_r),Ps){Os.text=Ps[1],Os.type="NUMBER",gs+=Os.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(vs[0])} at position ${gs}`)}return new Ir(os.map(vs=>Object.freeze(vs)))}function Pr(Ts,os){let bs=[];for(const ws in os.keys())Ts.has(ws)&&bs.push(ws);if(bs.length>1)throw new Error(`conflicting types: ${bs.join(", ")}`)}function Tr(Ts,os){if(os.peekKeyword(yr)){const bs=os.pop().text;if(bs!==Ts)throw new Error(`expected ${Ts}, got ${bs}`)}return os.popType("ID")}function Br(Ts,os){const bs=new Set;for(;;){const ws=Ts.peekType("KEYWORD");if(ws==null||os&&!os.has(ws))break;if(Ts.pop(),bs.has(ws))throw new Error(`duplicate keywords: ${JSON.stringify(ws)}`);bs.add(ws)}return Object.freeze(bs)}function Fr(Ts){let os=Br(Ts,mr);return Pr(os,dr("constant payable nonpayable".split(" "))),Pr(os,dr("pure view payable nonpayable".split(" "))),os.has("view")?"view":os.has("pure")?"pure":os.has("payable")?"payable":os.has("nonpayable")?"nonpayable":os.has("constant")?"view":"nonpayable"}function jr(Ts,os){return Ts.popParams().map(bs=>ss.from(bs,os))}function Ur(Ts){if(Ts.peekType("AT")){if(Ts.pop(),Ts.peekType("NUMBER"))return(0,cr.getBigInt)(Ts.pop().text);throw new Error("invalid gas")}return null}function qr(Ts){if(Ts.length)throw new Error(`unexpected tokens: ${Ts.toString()}`)}const Hr=new RegExp(/^(.*)\[([0-9]*)\]$/);function Or(Ts){const os=Ts.match(Rr);if((0,cr.assertArgument)(os,"invalid type","type",Ts),Ts==="uint")return"uint256";if(Ts==="int")return"int256";if(os[2]){const bs=parseInt(os[2]);(0,cr.assertArgument)(bs!==0&&bs<=32,"invalid bytes length","type",Ts)}else if(os[3]){const bs=parseInt(os[3]);(0,cr.assertArgument)(bs!==0&&bs<=256&&bs%8===0,"invalid numeric width","type",Ts)}return Ts}const Mr={},Lr=Symbol.for("_ethers_internal"),Vr="_ParamTypeInternal",Jr="_ErrorInternal",es="_EventInternal",ns="_ConstructorInternal",Qr="_FallbackInternal",zr="_FunctionInternal",Wr="_StructInternal";class ss{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(os,bs,ws,As,gs,vs,Ps,Os){if((0,cr.assertPrivate)(os,Mr,"ParamType"),Object.defineProperty(this,Lr,{value:Vr}),vs&&(vs=Object.freeze(vs.slice())),As==="array"){if(Ps==null||Os==null)throw new Error("")}else if(Ps!=null||Os!=null)throw new Error("");if(As==="tuple"){if(vs==null)throw new Error("")}else if(vs!=null)throw new Error("");(0,cr.defineProperties)(this,{name:bs,type:ws,baseType:As,indexed:gs,components:vs,arrayLength:Ps,arrayChildren:Os})}format(os){if(os==null&&(os="sighash"),os==="json"){const ws=this.name||"";if(this.isArray()){const gs=JSON.parse(this.arrayChildren.format("json"));return gs.name=ws,gs.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(gs)}const As={type:this.baseType==="tuple"?"tuple":this.type,name:ws};return typeof this.indexed=="boolean"&&(As.indexed=this.indexed),this.isTuple()&&(As.components=this.components.map(gs=>JSON.parse(gs.format(os)))),JSON.stringify(As)}let bs="";return this.isArray()?(bs+=this.arrayChildren.format(os),bs+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?bs+="("+this.components.map(ws=>ws.format(os)).join(os==="full"?", ":",")+")":bs+=this.type,os!=="sighash"&&(this.indexed===!0&&(bs+=" indexed"),os==="full"&&this.name&&(bs+=" "+this.name)),bs}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(os,bs){if(this.isArray()){if(!Array.isArray(os))throw new Error("invalid array value");if(this.arrayLength!==-1&&os.length!==this.arrayLength)throw new Error("array is wrong length");const ws=this;return os.map(As=>ws.arrayChildren.walk(As,bs))}if(this.isTuple()){if(!Array.isArray(os))throw new Error("invalid tuple value");if(os.length!==this.components.length)throw new Error("array is wrong length");const ws=this;return os.map((As,gs)=>ws.components[gs].walk(As,bs))}return bs(this.type,os)}#e(os,bs,ws,As){if(this.isArray()){if(!Array.isArray(bs))throw new Error("invalid array value");if(this.arrayLength!==-1&&bs.length!==this.arrayLength)throw new Error("array is wrong length");const vs=this.arrayChildren,Ps=bs.slice();Ps.forEach((Os,Ms)=>{vs.#e(os,Os,ws,zs=>{Ps[Ms]=zs})}),As(Ps);return}if(this.isTuple()){const vs=this.components;let Ps;if(Array.isArray(bs))Ps=bs.slice();else{if(bs==null||typeof bs!="object")throw new Error("invalid tuple value");Ps=vs.map(Os=>{if(!Os.name)throw new Error("cannot use object value with unnamed components");if(!(Os.name in bs))throw new Error(`missing value for component ${Os.name}`);return bs[Os.name]})}if(Ps.length!==this.components.length)throw new Error("array is wrong length");Ps.forEach((Os,Ms)=>{vs[Ms].#e(os,Os,ws,zs=>{Ps[Ms]=zs})}),As(Ps);return}const gs=ws(this.type,bs);gs.then?os.push(async function(){As(await gs)}()):As(gs)}async walkAsync(os,bs){const ws=[],As=[os];return this.#e(ws,os,bs,gs=>{As[0]=gs}),ws.length&&await Promise.all(ws),As[0]}static from(os,bs){if(ss.isParamType(os))return os;if(typeof os=="string")try{return ss.from(Nr(os),bs)}catch{(0,cr.assertArgument)(!1,"invalid param type","obj",os)}else if(os instanceof Ir){let Ps="",Os="",Ms=null;Br(os,dr(["tuple"])).has("tuple")||os.peekType("OPEN_PAREN")?(Os="tuple",Ms=os.popParams().map(Zr=>ss.from(Zr)),Ps=`tuple(${Ms.map(Zr=>Zr.format()).join(",")})`):(Ps=Or(os.popType("TYPE")),Os=Ps);let zs=null,Hs=null;for(;os.length&&os.peekType("BRACKET");){const Zr=os.pop();zs=new ss(Mr,"",Ps,Os,null,Ms,Hs,zs),Hs=Zr.value,Ps+=Zr.text,Os="array",Ms=null}let Cs=null;if(Br(os,wr).has("indexed")){if(!bs)throw new Error("");Cs=!0}const Kr=os.peekType("ID")?os.pop().text:"";if(os.length)throw new Error("leftover tokens");return new ss(Mr,Kr,Ps,Os,Cs,Ms,Hs,zs)}const ws=os.name;(0,cr.assertArgument)(!ws||typeof ws=="string"&&ws.match(kr),"invalid name","obj.name",ws);let As=os.indexed;As!=null&&((0,cr.assertArgument)(bs,"parameter cannot be indexed","obj.indexed",os.indexed),As=!!As);let gs=os.type,vs=gs.match(Hr);if(vs){const Ps=parseInt(vs[2]||"-1"),Os=ss.from({type:vs[1],components:os.components});return new ss(Mr,ws||"",gs,"array",As,null,Ps,Os)}if(gs==="tuple"||gs.startsWith("tuple(")||gs.startsWith("(")){const Ps=os.components!=null?os.components.map(Ms=>ss.from(Ms)):null;return new ss(Mr,ws||"",gs,"tuple",As,Ps,null,null)}return gs=Or(os.type),new ss(Mr,ws||"",gs,gs,As,null,null,null)}static isParamType(os){return os&&os[Lr]===Vr}}fragments.ParamType=ss;class Xr{type;inputs;constructor(os,bs,ws){(0,cr.assertPrivate)(os,Mr,"Fragment"),ws=Object.freeze(ws.slice()),(0,cr.defineProperties)(this,{type:bs,inputs:ws})}static from(os){if(typeof os=="string"){try{Xr.from(JSON.parse(os))}catch{}return Xr.from(Nr(os))}if(os instanceof Ir)switch(os.peekKeyword(yr)){case"constructor":return ps.from(os);case"error":return rs.from(os);case"event":return as.from(os);case"fallback":case"receive":return xs.from(os);case"function":return Ss.from(os);case"struct":return Ns.from(os)}else if(typeof os=="object"){switch(os.type){case"constructor":return ps.from(os);case"error":return rs.from(os);case"event":return as.from(os);case"fallback":case"receive":return xs.from(os);case"function":return Ss.from(os);case"struct":return Ns.from(os)}(0,cr.assert)(!1,`unsupported type: ${os.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}(0,cr.assertArgument)(!1,"unsupported frgament object","obj",os)}static isConstructor(os){return ps.isFragment(os)}static isError(os){return rs.isFragment(os)}static isEvent(os){return as.isFragment(os)}static isFunction(os){return Ss.isFragment(os)}static isStruct(os){return Ns.isFragment(os)}}fragments.Fragment=Xr;class ts extends Xr{name;constructor(os,bs,ws,As){super(os,bs,As),(0,cr.assertArgument)(typeof ws=="string"&&ws.match(kr),"invalid identifier","name",ws),As=Object.freeze(As.slice()),(0,cr.defineProperties)(this,{name:ws})}}fragments.NamedFragment=ts;function fs(Ts,os){return"("+os.map(bs=>bs.format(Ts)).join(Ts==="full"?", ":",")+")"}class rs extends ts{constructor(os,bs,ws){super(os,"error",bs,ws),Object.defineProperty(this,Lr,{value:Jr})}get selector(){return(0,ar.id)(this.format("sighash")).substring(0,10)}format(os){if(os==null&&(os="sighash"),os==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(ws=>JSON.parse(ws.format(os)))});const bs=[];return os!=="sighash"&&bs.push("error"),bs.push(this.name+fs(os,this.inputs)),bs.join(" ")}static from(os){if(rs.isFragment(os))return os;if(typeof os=="string")return rs.from(Nr(os));if(os instanceof Ir){const bs=Tr("error",os),ws=jr(os);return qr(os),new rs(Mr,bs,ws)}return new rs(Mr,os.name,os.inputs?os.inputs.map(ss.from):[])}static isFragment(os){return os&&os[Lr]===Jr}}fragments.ErrorFragment=rs;class as extends ts{anonymous;constructor(os,bs,ws,As){super(os,"event",bs,ws),Object.defineProperty(this,Lr,{value:es}),(0,cr.defineProperties)(this,{anonymous:As})}get topicHash(){return(0,ar.id)(this.format("sighash"))}format(os){if(os==null&&(os="sighash"),os==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(ws=>JSON.parse(ws.format(os)))});const bs=[];return os!=="sighash"&&bs.push("event"),bs.push(this.name+fs(os,this.inputs)),os!=="sighash"&&this.anonymous&&bs.push("anonymous"),bs.join(" ")}static getTopicHash(os,bs){return bs=(bs||[]).map(As=>ss.from(As)),new as(Mr,os,bs,!1).topicHash}static from(os){if(as.isFragment(os))return os;if(typeof os=="string")try{return as.from(Nr(os))}catch{(0,cr.assertArgument)(!1,"invalid event fragment","obj",os)}else if(os instanceof Ir){const bs=Tr("event",os),ws=jr(os,!0),As=!!Br(os,dr(["anonymous"])).has("anonymous");return qr(os),new as(Mr,bs,ws,As)}return new as(Mr,os.name,os.inputs?os.inputs.map(bs=>ss.from(bs,!0)):[],!!os.anonymous)}static isFragment(os){return os&&os[Lr]===es}}fragments.EventFragment=as;class ps extends Xr{payable;gas;constructor(os,bs,ws,As,gs){super(os,bs,ws),Object.defineProperty(this,Lr,{value:ns}),(0,cr.defineProperties)(this,{payable:As,gas:gs})}format(os){if((0,cr.assert)(os!=null&&os!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),os==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(ws=>JSON.parse(ws.format(os)))});const bs=[`constructor${fs(os,this.inputs)}`];return this.payable&&bs.push("payable"),this.gas!=null&&bs.push(`@${this.gas.toString()}`),bs.join(" ")}static from(os){if(ps.isFragment(os))return os;if(typeof os=="string")try{return ps.from(Nr(os))}catch{(0,cr.assertArgument)(!1,"invalid constuctor fragment","obj",os)}else if(os instanceof Ir){Br(os,dr(["constructor"]));const bs=jr(os),ws=!!Br(os,hr).has("payable"),As=Ur(os);return qr(os),new ps(Mr,"constructor",bs,ws,As)}return new ps(Mr,"constructor",os.inputs?os.inputs.map(ss.from):[],!!os.payable,os.gas!=null?os.gas:null)}static isFragment(os){return os&&os[Lr]===ns}}fragments.ConstructorFragment=ps;class xs extends Xr{payable;constructor(os,bs,ws){super(os,"fallback",bs),Object.defineProperty(this,Lr,{value:Qr}),(0,cr.defineProperties)(this,{payable:ws})}format(os){const bs=this.inputs.length===0?"receive":"fallback";if(os==="json"){const ws=this.payable?"payable":"nonpayable";return JSON.stringify({type:bs,stateMutability:ws})}return`${bs}()${this.payable?" payable":""}`}static from(os){if(xs.isFragment(os))return os;if(typeof os=="string")try{return xs.from(Nr(os))}catch{(0,cr.assertArgument)(!1,"invalid fallback fragment","obj",os)}else if(os instanceof Ir){const bs=os.toString(),ws=os.peekKeyword(dr(["fallback","receive"]));if((0,cr.assertArgument)(ws,"type must be fallback or receive","obj",bs),os.popKeyword(dr(["fallback","receive"]))==="receive"){const Ps=jr(os);return(0,cr.assertArgument)(Ps.length===0,"receive cannot have arguments","obj.inputs",Ps),Br(os,dr(["payable"])),qr(os),new xs(Mr,[],!0)}let gs=jr(os);gs.length?(0,cr.assertArgument)(gs.length===1&&gs[0].type==="bytes","invalid fallback inputs","obj.inputs",gs.map(Ps=>Ps.format("minimal")).join(", ")):gs=[ss.from("bytes")];const vs=Fr(os);if((0,cr.assertArgument)(vs==="nonpayable"||vs==="payable","fallback cannot be constants","obj.stateMutability",vs),Br(os,dr(["returns"])).has("returns")){const Ps=jr(os);(0,cr.assertArgument)(Ps.length===1&&Ps[0].type==="bytes","invalid fallback outputs","obj.outputs",Ps.map(Os=>Os.format("minimal")).join(", "))}return qr(os),new xs(Mr,gs,vs==="payable")}if(os.type==="receive")return new xs(Mr,[],!0);if(os.type==="fallback"){const bs=[ss.from("bytes")],ws=os.stateMutability==="payable";return new xs(Mr,bs,ws)}(0,cr.assertArgument)(!1,"invalid fallback description","obj",os)}static isFragment(os){return os&&os[Lr]===Qr}}fragments.FallbackFragment=xs;class Ss extends ts{constant;outputs;stateMutability;payable;gas;constructor(os,bs,ws,As,gs,vs){super(os,"function",bs,As),Object.defineProperty(this,Lr,{value:zr}),gs=Object.freeze(gs.slice());const Ps=ws==="view"||ws==="pure",Os=ws==="payable";(0,cr.defineProperties)(this,{constant:Ps,gas:vs,outputs:gs,payable:Os,stateMutability:ws})}get selector(){return(0,ar.id)(this.format("sighash")).substring(0,10)}format(os){if(os==null&&(os="sighash"),os==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(ws=>JSON.parse(ws.format(os))),outputs:this.outputs.map(ws=>JSON.parse(ws.format(os)))});const bs=[];return os!=="sighash"&&bs.push("function"),bs.push(this.name+fs(os,this.inputs)),os!=="sighash"&&(this.stateMutability!=="nonpayable"&&bs.push(this.stateMutability),this.outputs&&this.outputs.length&&(bs.push("returns"),bs.push(fs(os,this.outputs))),this.gas!=null&&bs.push(`@${this.gas.toString()}`)),bs.join(" ")}static getSelector(os,bs){return bs=(bs||[]).map(As=>ss.from(As)),new Ss(Mr,os,"view",bs,[],null).selector}static from(os){if(Ss.isFragment(os))return os;if(typeof os=="string")try{return Ss.from(Nr(os))}catch{(0,cr.assertArgument)(!1,"invalid function fragment","obj",os)}else if(os instanceof Ir){const ws=Tr("function",os),As=jr(os),gs=Fr(os);let vs=[];Br(os,dr(["returns"])).has("returns")&&(vs=jr(os));const Ps=Ur(os);return qr(os),new Ss(Mr,ws,gs,As,vs,Ps)}let bs=os.stateMutability;return bs==null&&(bs="payable",typeof os.constant=="boolean"?(bs="view",os.constant||(bs="payable",typeof os.payable=="boolean"&&!os.payable&&(bs="nonpayable"))):typeof os.payable=="boolean"&&!os.payable&&(bs="nonpayable")),new Ss(Mr,os.name,bs,os.inputs?os.inputs.map(ss.from):[],os.outputs?os.outputs.map(ss.from):[],os.gas!=null?os.gas:null)}static isFragment(os){return os&&os[Lr]===zr}}fragments.FunctionFragment=Ss;class Ns extends ts{constructor(os,bs,ws){super(os,"struct",bs,ws),Object.defineProperty(this,Lr,{value:Wr})}format(){throw new Error("@TODO")}static from(os){if(typeof os=="string")try{return Ns.from(Nr(os))}catch{(0,cr.assertArgument)(!1,"invalid struct fragment","obj",os)}else if(os instanceof Ir){const bs=Tr("struct",os),ws=jr(os);return qr(os),new Ns(Mr,bs,ws)}return new Ns(Mr,os.name,os.inputs?os.inputs.map(ss.from):[])}static isFragment(os){return os&&os[Lr]===Wr}}return fragments.StructFragment=Ns,fragments}var hasRequiredAbiCoder;function requireAbiCoder(){if(hasRequiredAbiCoder)return abiCoder;hasRequiredAbiCoder=1,Object.defineProperty(abiCoder,"__esModule",{value:!0}),abiCoder.AbiCoder=void 0;const cr=requireUtils$1(),ar=requireAbstractCoder(),dr=requireAddress$1(),fr=requireArray(),hr=requireBoolean(),pr=requireBytes(),mr=requireFixedBytes(),gr=require_null(),yr=requireNumber(),xr=requireString(),wr=requireTuple(),br=requireFragments(),Sr=requireAddress$2(),vr=requireUtils$1(),Er=new Map;Er.set(0,"GENERIC_PANIC"),Er.set(1,"ASSERT_FALSE"),Er.set(17,"OVERFLOW"),Er.set(18,"DIVIDE_BY_ZERO"),Er.set(33,"ENUM_RANGE_ERROR"),Er.set(34,"BAD_STORAGE_DATA"),Er.set(49,"STACK_UNDERFLOW"),Er.set(50,"ARRAY_RANGE_ERROR"),Er.set(65,"OUT_OF_MEMORY"),Er.set(81,"UNINITIALIZED_FUNCTION_CALL");const Ar=new RegExp(/^bytes([0-9]*)$/),_r=new RegExp(/^(u?int)([0-9]*)$/);let Cr=null;function kr(Ir,Nr,Pr,Tr){let Br="missing revert data",Fr=null;const jr=null;let Ur=null;if(Pr){Br="execution reverted";const Hr=(0,vr.getBytes)(Pr);if(Pr=(0,vr.hexlify)(Pr),Hr.length===0)Br+=" (no data present; likely require(false) occurred",Fr="require(false)";else if(Hr.length%32!==4)Br+=" (could not decode reason; invalid data length)";else if((0,vr.hexlify)(Hr.slice(0,4))==="0x08c379a0")try{Fr=Tr.decode(["string"],Hr.slice(4))[0],Ur={signature:"Error(string)",name:"Error",args:[Fr]},Br+=`: ${JSON.stringify(Fr)}`}catch{Br+=" (could not decode reason; invalid string data)"}else if((0,vr.hexlify)(Hr.slice(0,4))==="0x4e487b71")try{const Or=Number(Tr.decode(["uint256"],Hr.slice(4))[0]);Ur={signature:"Panic(uint256)",name:"Panic",args:[Or]},Fr=`Panic due to ${Er.get(Or)||"UNKNOWN"}(${Or})`,Br+=`: ${Fr}`}catch{Br+=" (could not decode panic code)"}else Br+=" (unknown custom error)"}const qr={to:Nr.to?(0,Sr.getAddress)(Nr.to):null,data:Nr.data||"0x"};return Nr.from&&(qr.from=(0,Sr.getAddress)(Nr.from)),(0,vr.makeError)(Br,"CALL_EXCEPTION",{action:Ir,data:Pr,reason:Fr,transaction:qr,invocation:jr,revert:Ur})}class Rr{#e(Nr){if(Nr.isArray())return new fr.ArrayCoder(this.#e(Nr.arrayChildren),Nr.arrayLength,Nr.name);if(Nr.isTuple())return new wr.TupleCoder(Nr.components.map(Tr=>this.#e(Tr)),Nr.name);switch(Nr.baseType){case"address":return new dr.AddressCoder(Nr.name);case"bool":return new hr.BooleanCoder(Nr.name);case"string":return new xr.StringCoder(Nr.name);case"bytes":return new pr.BytesCoder(Nr.name);case"":return new gr.NullCoder(Nr.name)}let Pr=Nr.type.match(_r);if(Pr){let Tr=parseInt(Pr[2]||"256");return(0,cr.assertArgument)(Tr!==0&&Tr<=256&&Tr%8===0,"invalid "+Pr[1]+" bit length","param",Nr),new yr.NumberCoder(Tr/8,Pr[1]==="int",Nr.name)}if(Pr=Nr.type.match(Ar),Pr){let Tr=parseInt(Pr[1]);return(0,cr.assertArgument)(Tr!==0&&Tr<=32,"invalid bytes length","param",Nr),new mr.FixedBytesCoder(Tr,Nr.name)}(0,cr.assertArgument)(!1,"invalid type","type",Nr.type)}getDefaultValue(Nr){const Pr=Nr.map(Br=>this.#e(br.ParamType.from(Br)));return new wr.TupleCoder(Pr,"_").defaultValue()}encode(Nr,Pr){(0,cr.assertArgumentCount)(Pr.length,Nr.length,"types/values length mismatch");const Tr=Nr.map(jr=>this.#e(br.ParamType.from(jr))),Br=new wr.TupleCoder(Tr,"_"),Fr=new ar.Writer;return Br.encode(Fr,Pr),Fr.data}decode(Nr,Pr,Tr){const Br=Nr.map(jr=>this.#e(br.ParamType.from(jr)));return new wr.TupleCoder(Br,"_").decode(new ar.Reader(Pr,Tr))}static defaultAbiCoder(){return Cr==null&&(Cr=new Rr),Cr}static getBuiltinCallException(Nr,Pr,Tr){return kr(Nr,Pr,Tr,Rr.defaultAbiCoder())}}return abiCoder.AbiCoder=Rr,abiCoder}var bytes32={},hasRequiredBytes32;function requireBytes32(){if(hasRequiredBytes32)return bytes32;hasRequiredBytes32=1,Object.defineProperty(bytes32,"__esModule",{value:!0}),bytes32.decodeBytes32String=bytes32.encodeBytes32String=void 0;const cr=requireUtils$1();function ar(fr){const hr=(0,cr.toUtf8Bytes)(fr);if(hr.length>31)throw new Error("bytes32 string must be less than 32 bytes");return(0,cr.zeroPadBytes)(hr,32)}bytes32.encodeBytes32String=ar;function dr(fr){const hr=(0,cr.getBytes)(fr,"bytes");if(hr.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(hr[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let pr=31;for(;hr[pr-1]===0;)pr--;return(0,cr.toUtf8String)(hr.slice(0,pr))}return bytes32.decodeBytes32String=dr,bytes32}var _interface={},hasRequired_interface;function require_interface(){return hasRequired_interface||(hasRequired_interface=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.Interface=cr.Indexed=cr.ErrorDescription=cr.TransactionDescription=cr.LogDescription=cr.Result=cr.checkResultErrors=void 0;const ar=requireCrypto(),dr=requireHash(),fr=requireUtils$1(),hr=requireAbiCoder(),pr=requireAbstractCoder();Object.defineProperty(cr,"checkResultErrors",{enumerable:!0,get:function(){return pr.checkResultErrors}}),Object.defineProperty(cr,"Result",{enumerable:!0,get:function(){return pr.Result}});const mr=requireFragments(),gr=requireTyped();class yr{fragment;name;signature;topic;args;constructor(_r,Cr,kr){const Rr=_r.name,Ir=_r.format();(0,fr.defineProperties)(this,{fragment:_r,name:Rr,signature:Ir,topic:Cr,args:kr})}}cr.LogDescription=yr;class xr{fragment;name;args;signature;selector;value;constructor(_r,Cr,kr,Rr){const Ir=_r.name,Nr=_r.format();(0,fr.defineProperties)(this,{fragment:_r,name:Ir,args:kr,signature:Nr,selector:Cr,value:Rr})}}cr.TransactionDescription=xr;class wr{fragment;name;args;signature;selector;constructor(_r,Cr,kr){const Rr=_r.name,Ir=_r.format();(0,fr.defineProperties)(this,{fragment:_r,name:Rr,args:kr,signature:Ir,selector:Cr})}}cr.ErrorDescription=wr;class br{hash;_isIndexed;static isIndexed(_r){return!!(_r&&_r._isIndexed)}constructor(_r){(0,fr.defineProperties)(this,{hash:_r,_isIndexed:!0})}}cr.Indexed=br;const Sr={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},vr={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:Ar=>`reverted with reason string ${JSON.stringify(Ar)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:Ar=>{let _r="unknown panic code";return Ar>=0&&Ar<=255&&Sr[Ar.toString()]&&(_r=Sr[Ar.toString()]),`reverted with panic code 0x${Ar.toString(16)} (${_r})`}}};class Er{fragments;deploy;fallback;receive;#e;#t;#r;#n;constructor(_r){let Cr=[];typeof _r=="string"?Cr=JSON.parse(_r):Cr=_r,this.#r=new Map,this.#e=new Map,this.#t=new Map;const kr=[];for(const Nr of Cr)try{kr.push(mr.Fragment.from(Nr))}catch(Pr){console.log("EE",Pr)}(0,fr.defineProperties)(this,{fragments:Object.freeze(kr)});let Rr=null,Ir=!1;this.#n=this.getAbiCoder(),this.fragments.forEach((Nr,Pr)=>{let Tr;switch(Nr.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}(0,fr.defineProperties)(this,{deploy:Nr});return;case"fallback":Nr.inputs.length===0?Ir=!0:((0,fr.assertArgument)(!Rr||Nr.payable!==Rr.payable,"conflicting fallback fragments",`fragments[${Pr}]`,Nr),Rr=Nr,Ir=Rr.payable);return;case"function":Tr=this.#r;break;case"event":Tr=this.#t;break;case"error":Tr=this.#e;break;default:return}const Br=Nr.format();Tr.has(Br)||Tr.set(Br,Nr)}),this.deploy||(0,fr.defineProperties)(this,{deploy:mr.ConstructorFragment.from("constructor()")}),(0,fr.defineProperties)(this,{fallback:Rr,receive:Ir})}format(_r){const Cr=_r?"minimal":"full";return this.fragments.map(Rr=>Rr.format(Cr))}formatJson(){const _r=this.fragments.map(Cr=>Cr.format("json"));return JSON.stringify(_r.map(Cr=>JSON.parse(Cr)))}getAbiCoder(){return hr.AbiCoder.defaultAbiCoder()}#s(_r,Cr,kr){if((0,fr.isHexString)(_r)){const Ir=_r.toLowerCase();for(const Nr of this.#r.values())if(Ir===Nr.selector)return Nr;return null}if(_r.indexOf("(")===-1){const Ir=[];for(const[Nr,Pr]of this.#r)Nr.split("(")[0]===_r&&Ir.push(Pr);if(Cr){const Nr=Cr.length>0?Cr[Cr.length-1]:null;let Pr=Cr.length,Tr=!0;gr.Typed.isTyped(Nr)&&Nr.type==="overrides"&&(Tr=!1,Pr--);for(let Br=Ir.length-1;Br>=0;Br--){const Fr=Ir[Br].inputs.length;Fr!==Pr&&(!Tr||Fr!==Pr-1)&&Ir.splice(Br,1)}for(let Br=Ir.length-1;Br>=0;Br--){const Fr=Ir[Br].inputs;for(let jr=0;jr<Cr.length;jr++)if(gr.Typed.isTyped(Cr[jr])){if(jr>=Fr.length){if(Cr[jr].type==="overrides")continue;Ir.splice(Br,1);break}if(Cr[jr].type!==Fr[jr].baseType){Ir.splice(Br,1);break}}}}if(Ir.length===1&&Cr&&Cr.length!==Ir[0].inputs.length){const Nr=Cr[Cr.length-1];(Nr==null||Array.isArray(Nr)||typeof Nr!="object")&&Ir.splice(0,1)}if(Ir.length===0)return null;if(Ir.length>1&&kr){const Nr=Ir.map(Pr=>JSON.stringify(Pr.format())).join(", ");(0,fr.assertArgument)(!1,`ambiguous function description (i.e. matches ${Nr})`,"key",_r)}return Ir[0]}const Rr=this.#r.get(mr.FunctionFragment.from(_r).format());return Rr||null}getFunctionName(_r){const Cr=this.#s(_r,null,!1);return(0,fr.assertArgument)(Cr,"no matching function","key",_r),Cr.name}hasFunction(_r){return!!this.#s(_r,null,!1)}getFunction(_r,Cr){return this.#s(_r,Cr||null,!0)}forEachFunction(_r){const Cr=Array.from(this.#r.keys());Cr.sort((kr,Rr)=>kr.localeCompare(Rr));for(let kr=0;kr<Cr.length;kr++){const Rr=Cr[kr];_r(this.#r.get(Rr),kr)}}#a(_r,Cr,kr){if((0,fr.isHexString)(_r)){const Ir=_r.toLowerCase();for(const Nr of this.#t.values())if(Ir===Nr.topicHash)return Nr;return null}if(_r.indexOf("(")===-1){const Ir=[];for(const[Nr,Pr]of this.#t)Nr.split("(")[0]===_r&&Ir.push(Pr);if(Cr){for(let Nr=Ir.length-1;Nr>=0;Nr--)Ir[Nr].inputs.length<Cr.length&&Ir.splice(Nr,1);for(let Nr=Ir.length-1;Nr>=0;Nr--){const Pr=Ir[Nr].inputs;for(let Tr=0;Tr<Cr.length;Tr++)if(gr.Typed.isTyped(Cr[Tr])&&Cr[Tr].type!==Pr[Tr].baseType){Ir.splice(Nr,1);break}}}if(Ir.length===0)return null;if(Ir.length>1&&kr){const Nr=Ir.map(Pr=>JSON.stringify(Pr.format())).join(", ");(0,fr.assertArgument)(!1,`ambiguous event description (i.e. matches ${Nr})`,"key",_r)}return Ir[0]}const Rr=this.#t.get(mr.EventFragment.from(_r).format());return Rr||null}getEventName(_r){const Cr=this.#a(_r,null,!1);return(0,fr.assertArgument)(Cr,"no matching event","key",_r),Cr.name}hasEvent(_r){return!!this.#a(_r,null,!1)}getEvent(_r,Cr){return this.#a(_r,Cr||null,!0)}forEachEvent(_r){const Cr=Array.from(this.#t.keys());Cr.sort((kr,Rr)=>kr.localeCompare(Rr));for(let kr=0;kr<Cr.length;kr++){const Rr=Cr[kr];_r(this.#t.get(Rr),kr)}}getError(_r,Cr){if((0,fr.isHexString)(_r)){const Rr=_r.toLowerCase();if(vr[Rr])return mr.ErrorFragment.from(vr[Rr].signature);for(const Ir of this.#e.values())if(Rr===Ir.selector)return Ir;return null}if(_r.indexOf("(")===-1){const Rr=[];for(const[Ir,Nr]of this.#e)Ir.split("(")[0]===_r&&Rr.push(Nr);if(Rr.length===0)return _r==="Error"?mr.ErrorFragment.from("error Error(string)"):_r==="Panic"?mr.ErrorFragment.from("error Panic(uint256)"):null;if(Rr.length>1){const Ir=Rr.map(Nr=>JSON.stringify(Nr.format())).join(", ");(0,fr.assertArgument)(!1,`ambiguous error description (i.e. ${Ir})`,"name",_r)}return Rr[0]}if(_r=mr.ErrorFragment.from(_r).format(),_r==="Error(string)")return mr.ErrorFragment.from("error Error(string)");if(_r==="Panic(uint256)")return mr.ErrorFragment.from("error Panic(uint256)");const kr=this.#e.get(_r);return kr||null}forEachError(_r){const Cr=Array.from(this.#e.keys());Cr.sort((kr,Rr)=>kr.localeCompare(Rr));for(let kr=0;kr<Cr.length;kr++){const Rr=Cr[kr];_r(this.#e.get(Rr),kr)}}_decodeParams(_r,Cr){return this.#n.decode(_r,Cr)}_encodeParams(_r,Cr){return this.#n.encode(_r,Cr)}encodeDeploy(_r){return this._encodeParams(this.deploy.inputs,_r||[])}decodeErrorResult(_r,Cr){if(typeof _r=="string"){const kr=this.getError(_r);(0,fr.assertArgument)(kr,"unknown error","fragment",_r),_r=kr}return(0,fr.assertArgument)((0,fr.dataSlice)(Cr,0,4)===_r.selector,`data signature does not match error ${_r.name}.`,"data",Cr),this._decodeParams(_r.inputs,(0,fr.dataSlice)(Cr,4))}encodeErrorResult(_r,Cr){if(typeof _r=="string"){const kr=this.getError(_r);(0,fr.assertArgument)(kr,"unknown error","fragment",_r),_r=kr}return(0,fr.concat)([_r.selector,this._encodeParams(_r.inputs,Cr||[])])}decodeFunctionData(_r,Cr){if(typeof _r=="string"){const kr=this.getFunction(_r);(0,fr.assertArgument)(kr,"unknown function","fragment",_r),_r=kr}return(0,fr.assertArgument)((0,fr.dataSlice)(Cr,0,4)===_r.selector,`data signature does not match function ${_r.name}.`,"data",Cr),this._decodeParams(_r.inputs,(0,fr.dataSlice)(Cr,4))}encodeFunctionData(_r,Cr){if(typeof _r=="string"){const kr=this.getFunction(_r);(0,fr.assertArgument)(kr,"unknown function","fragment",_r),_r=kr}return(0,fr.concat)([_r.selector,this._encodeParams(_r.inputs,Cr||[])])}decodeFunctionResult(_r,Cr){if(typeof _r=="string"){const Ir=this.getFunction(_r);(0,fr.assertArgument)(Ir,"unknown function","fragment",_r),_r=Ir}let kr="invalid length for result data";const Rr=(0,fr.getBytesCopy)(Cr);if(Rr.length%32===0)try{return this.#n.decode(_r.outputs,Rr)}catch{kr="could not decode result data"}(0,fr.assert)(!1,kr,"BAD_DATA",{value:(0,fr.hexlify)(Rr),info:{method:_r.name,signature:_r.format()}})}makeError(_r,Cr){const kr=(0,fr.getBytes)(_r,"data"),Rr=hr.AbiCoder.getBuiltinCallException("call",Cr,kr),Ir="execution reverted (unknown custom error)";if(Rr.message.startsWith(Ir)){const Pr=(0,fr.hexlify)(kr.slice(0,4)),Tr=this.getError(Pr);if(Tr)try{const Br=this.#n.decode(Tr.inputs,kr.slice(4));Rr.revert={name:Tr.name,signature:Tr.format(),args:Br},Rr.reason=Rr.revert.signature,Rr.message=`execution reverted: ${Rr.reason}`}catch{Rr.message="execution reverted (coult not decode custom error)"}}const Nr=this.parseTransaction(Cr);return Nr&&(Rr.invocation={method:Nr.name,signature:Nr.signature,args:Nr.args}),Rr}encodeFunctionResult(_r,Cr){if(typeof _r=="string"){const kr=this.getFunction(_r);(0,fr.assertArgument)(kr,"unknown function","fragment",_r),_r=kr}return(0,fr.hexlify)(this.#n.encode(_r.outputs,Cr||[]))}encodeFilterTopics(_r,Cr){if(typeof _r=="string"){const Ir=this.getEvent(_r);(0,fr.assertArgument)(Ir,"unknown event","eventFragment",_r),_r=Ir}(0,fr.assert)(Cr.length<=_r.inputs.length,`too many arguments for ${_r.format()}`,"UNEXPECTED_ARGUMENT",{count:Cr.length,expectedCount:_r.inputs.length});const kr=[];_r.anonymous||kr.push(_r.topicHash);const Rr=(Ir,Nr)=>Ir.type==="string"?(0,dr.id)(Nr):Ir.type==="bytes"?(0,ar.keccak256)((0,fr.hexlify)(Nr)):(Ir.type==="bool"&&typeof Nr=="boolean"?Nr=Nr?"0x01":"0x00":Ir.type.match(/^u?int/)?Nr=(0,fr.toBeHex)(Nr):Ir.type.match(/^bytes/)?Nr=(0,fr.zeroPadBytes)(Nr,32):Ir.type==="address"&&this.#n.encode(["address"],[Nr]),(0,fr.zeroPadValue)((0,fr.hexlify)(Nr),32));for(Cr.forEach((Ir,Nr)=>{const Pr=_r.inputs[Nr];if(!Pr.indexed){(0,fr.assertArgument)(Ir==null,"cannot filter non-indexed parameters; must be null","contract."+Pr.name,Ir);return}Ir==null?kr.push(null):Pr.baseType==="array"||Pr.baseType==="tuple"?(0,fr.assertArgument)(!1,"filtering with tuples or arrays not supported","contract."+Pr.name,Ir):Array.isArray(Ir)?kr.push(Ir.map(Tr=>Rr(Pr,Tr))):kr.push(Rr(Pr,Ir))});kr.length&&kr[kr.length-1]===null;)kr.pop();return kr}encodeEventLog(_r,Cr){if(typeof _r=="string"){const Nr=this.getEvent(_r);(0,fr.assertArgument)(Nr,"unknown event","eventFragment",_r),_r=Nr}const kr=[],Rr=[],Ir=[];return _r.anonymous||kr.push(_r.topicHash),(0,fr.assertArgument)(Cr.length===_r.inputs.length,"event arguments/values mismatch","values",Cr),_r.inputs.forEach((Nr,Pr)=>{const Tr=Cr[Pr];if(Nr.indexed)if(Nr.type==="string")kr.push((0,dr.id)(Tr));else if(Nr.type==="bytes")kr.push((0,ar.keccak256)(Tr));else{if(Nr.baseType==="tuple"||Nr.baseType==="array")throw new Error("not implemented");kr.push(this.#n.encode([Nr.type],[Tr]))}else Rr.push(Nr),Ir.push(Tr)}),{data:this.#n.encode(Rr,Ir),topics:kr}}decodeEventLog(_r,Cr,kr){if(typeof _r=="string"){const qr=this.getEvent(_r);(0,fr.assertArgument)(qr,"unknown event","eventFragment",_r),_r=qr}if(kr!=null&&!_r.anonymous){const qr=_r.topicHash;(0,fr.assertArgument)((0,fr.isHexString)(kr[0],32)&&kr[0].toLowerCase()===qr,"fragment/topic mismatch","topics[0]",kr[0]),kr=kr.slice(1)}const Rr=[],Ir=[],Nr=[];_r.inputs.forEach((qr,Hr)=>{qr.indexed?qr.type==="string"||qr.type==="bytes"||qr.baseType==="tuple"||qr.baseType==="array"?(Rr.push(mr.ParamType.from({type:"bytes32",name:qr.name})),Nr.push(!0)):(Rr.push(qr),Nr.push(!1)):(Ir.push(qr),Nr.push(!1))});const Pr=kr!=null?this.#n.decode(Rr,(0,fr.concat)(kr)):null,Tr=this.#n.decode(Ir,Cr,!0),Br=[],Fr=[];let jr=0,Ur=0;return _r.inputs.forEach((qr,Hr)=>{let Or=null;if(qr.indexed)if(Pr==null)Or=new br(null);else if(Nr[Hr])Or=new br(Pr[Ur++]);else try{Or=Pr[Ur++]}catch(Mr){Or=Mr}else try{Or=Tr[jr++]}catch(Mr){Or=Mr}Br.push(Or),Fr.push(qr.name||null)}),pr.Result.fromItems(Br,Fr)}parseTransaction(_r){const Cr=(0,fr.getBytes)(_r.data,"tx.data"),kr=(0,fr.getBigInt)(_r.value!=null?_r.value:0,"tx.value"),Rr=this.getFunction((0,fr.hexlify)(Cr.slice(0,4)));if(!Rr)return null;const Ir=this.#n.decode(Rr.inputs,Cr.slice(4));return new xr(Rr,Rr.selector,Ir,kr)}parseCallResult(_r){throw new Error("@TODO")}parseLog(_r){const Cr=this.getEvent(_r.topics[0]);return!Cr||Cr.anonymous?null:new yr(Cr,Cr.topicHash,this.decodeEventLog(Cr,_r.data,_r.topics))}parseError(_r){const Cr=(0,fr.hexlify)(_r),kr=this.getError((0,fr.dataSlice)(Cr,0,4));if(!kr)return null;const Rr=this.#n.decode(kr.inputs,(0,fr.dataSlice)(Cr,4));return new wr(kr,kr.selector,Rr)}static from(_r){return _r instanceof Er?_r:typeof _r=="string"?new Er(JSON.parse(_r)):typeof _r.format=="function"?new Er(_r.format("json")):new Er(_r)}}cr.Interface=Er}(_interface)),_interface}var hasRequiredAbi;function requireAbi(){return hasRequiredAbi||(hasRequiredAbi=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.Typed=cr.Result=cr.TransactionDescription=cr.LogDescription=cr.ErrorDescription=cr.Interface=cr.Indexed=cr.checkResultErrors=cr.StructFragment=cr.ParamType=cr.NamedFragment=cr.FunctionFragment=cr.Fragment=cr.FallbackFragment=cr.EventFragment=cr.ErrorFragment=cr.ConstructorFragment=cr.encodeBytes32String=cr.decodeBytes32String=cr.AbiCoder=void 0;var ar=requireAbiCoder();Object.defineProperty(cr,"AbiCoder",{enumerable:!0,get:function(){return ar.AbiCoder}});var dr=requireBytes32();Object.defineProperty(cr,"decodeBytes32String",{enumerable:!0,get:function(){return dr.decodeBytes32String}}),Object.defineProperty(cr,"encodeBytes32String",{enumerable:!0,get:function(){return dr.encodeBytes32String}});var fr=requireFragments();Object.defineProperty(cr,"ConstructorFragment",{enumerable:!0,get:function(){return fr.ConstructorFragment}}),Object.defineProperty(cr,"ErrorFragment",{enumerable:!0,get:function(){return fr.ErrorFragment}}),Object.defineProperty(cr,"EventFragment",{enumerable:!0,get:function(){return fr.EventFragment}}),Object.defineProperty(cr,"FallbackFragment",{enumerable:!0,get:function(){return fr.FallbackFragment}}),Object.defineProperty(cr,"Fragment",{enumerable:!0,get:function(){return fr.Fragment}}),Object.defineProperty(cr,"FunctionFragment",{enumerable:!0,get:function(){return fr.FunctionFragment}}),Object.defineProperty(cr,"NamedFragment",{enumerable:!0,get:function(){return fr.NamedFragment}}),Object.defineProperty(cr,"ParamType",{enumerable:!0,get:function(){return fr.ParamType}}),Object.defineProperty(cr,"StructFragment",{enumerable:!0,get:function(){return fr.StructFragment}});var hr=require_interface();Object.defineProperty(cr,"checkResultErrors",{enumerable:!0,get:function(){return hr.checkResultErrors}}),Object.defineProperty(cr,"Indexed",{enumerable:!0,get:function(){return hr.Indexed}}),Object.defineProperty(cr,"Interface",{enumerable:!0,get:function(){return hr.Interface}}),Object.defineProperty(cr,"ErrorDescription",{enumerable:!0,get:function(){return hr.ErrorDescription}}),Object.defineProperty(cr,"LogDescription",{enumerable:!0,get:function(){return hr.LogDescription}}),Object.defineProperty(cr,"TransactionDescription",{enumerable:!0,get:function(){return hr.TransactionDescription}}),Object.defineProperty(cr,"Result",{enumerable:!0,get:function(){return hr.Result}});var pr=requireTyped();Object.defineProperty(cr,"Typed",{enumerable:!0,get:function(){return pr.Typed}})}(abi)),abi}var contract$1={},contract={},provider={},hasRequiredProvider;function requireProvider(){if(hasRequiredProvider)return provider;hasRequiredProvider=1,Object.defineProperty(provider,"__esModule",{value:!0}),provider.TransactionResponse=provider.TransactionReceipt=provider.Log=provider.Block=provider.copyRequest=provider.FeeData=void 0;const cr=requireUtils$1(),ar=requireTransaction(),dr=BigInt(0);function fr(Ar){return Ar??null}function hr(Ar){return Ar==null?null:Ar.toString()}class pr{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(_r,Cr,kr){(0,cr.defineProperties)(this,{gasPrice:fr(_r),maxFeePerGas:fr(Cr),maxPriorityFeePerGas:fr(kr)})}toJSON(){const{gasPrice:_r,maxFeePerGas:Cr,maxPriorityFeePerGas:kr}=this;return{_type:"FeeData",gasPrice:hr(_r),maxFeePerGas:hr(Cr),maxPriorityFeePerGas:hr(kr)}}}provider.FeeData=pr;function mr(Ar){const _r={};Ar.to&&(_r.to=Ar.to),Ar.from&&(_r.from=Ar.from),Ar.data&&(_r.data=(0,cr.hexlify)(Ar.data));const Cr="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const Rr of Cr)!(Rr in Ar)||Ar[Rr]==null||(_r[Rr]=(0,cr.getBigInt)(Ar[Rr],`request.${Rr}`));const kr="type,nonce".split(/,/);for(const Rr of kr)!(Rr in Ar)||Ar[Rr]==null||(_r[Rr]=(0,cr.getNumber)(Ar[Rr],`request.${Rr}`));return Ar.accessList&&(_r.accessList=(0,ar.accessListify)(Ar.accessList)),"blockTag"in Ar&&(_r.blockTag=Ar.blockTag),"enableCcipRead"in Ar&&(_r.enableCcipRead=!!Ar.enableCcipRead),"customData"in Ar&&(_r.customData=Ar.customData),_r}provider.copyRequest=mr;class gr{provider;number;hash;timestamp;parentHash;nonce;difficulty;gasLimit;gasUsed;miner;extraData;baseFeePerGas;#e;constructor(_r,Cr){this.#e=_r.transactions.map(kr=>typeof kr!="string"?new wr(kr,Cr):kr),(0,cr.defineProperties)(this,{provider:Cr,hash:fr(_r.hash),number:_r.number,timestamp:_r.timestamp,parentHash:_r.parentHash,nonce:_r.nonce,difficulty:_r.difficulty,gasLimit:_r.gasLimit,gasUsed:_r.gasUsed,miner:_r.miner,extraData:_r.extraData,baseFeePerGas:fr(_r.baseFeePerGas)})}get transactions(){return this.#e.map(_r=>typeof _r=="string"?_r:_r.hash)}get prefetchedTransactions(){const _r=this.#e.slice();return _r.length===0?[]:((0,cr.assert)(typeof _r[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),_r)}toJSON(){const{baseFeePerGas:_r,difficulty:Cr,extraData:kr,gasLimit:Rr,gasUsed:Ir,hash:Nr,miner:Pr,nonce:Tr,number:Br,parentHash:Fr,timestamp:jr,transactions:Ur}=this;return{_type:"Block",baseFeePerGas:hr(_r),difficulty:hr(Cr),extraData:kr,gasLimit:hr(Rr),gasUsed:hr(Ir),hash:Nr,miner:Pr,nonce:Tr,number:Br,parentHash:Fr,timestamp:jr,transactions:Ur}}[Symbol.iterator](){let _r=0;const Cr=this.transactions;return{next:()=>_r<this.length?{value:Cr[_r++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(_r){let Cr;if(typeof _r=="number")Cr=this.#e[_r];else{const kr=_r.toLowerCase();for(const Rr of this.#e)if(typeof Rr=="string"){if(Rr!==kr)continue;Cr=Rr;break}else{if(Rr.hash===kr)continue;Cr=Rr;break}}if(Cr==null)throw new Error("no such tx");return typeof Cr=="string"?await this.provider.getTransaction(Cr):Cr}getPrefetchedTransaction(_r){const Cr=this.prefetchedTransactions;if(typeof _r=="number")return Cr[_r];_r=_r.toLowerCase();for(const kr of Cr)if(kr.hash===_r)return kr;(0,cr.assertArgument)(!1,"no matching transaction","indexOrHash",_r)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return br(this)}}provider.Block=gr;class yr{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(_r,Cr){this.provider=Cr;const kr=Object.freeze(_r.topics.slice());(0,cr.defineProperties)(this,{transactionHash:_r.transactionHash,blockHash:_r.blockHash,blockNumber:_r.blockNumber,removed:_r.removed,address:_r.address,data:_r.data,topics:kr,index:_r.index,transactionIndex:_r.transactionIndex})}toJSON(){const{address:_r,blockHash:Cr,blockNumber:kr,data:Rr,index:Ir,removed:Nr,topics:Pr,transactionHash:Tr,transactionIndex:Br}=this;return{_type:"log",address:_r,blockHash:Cr,blockNumber:kr,data:Rr,index:Ir,removed:Nr,topics:Pr,transactionHash:Tr,transactionIndex:Br}}async getBlock(){const _r=await this.provider.getBlock(this.blockHash);return(0,cr.assert)(!!_r,"failed to find transaction","UNKNOWN_ERROR",{}),_r}async getTransaction(){const _r=await this.provider.getTransaction(this.transactionHash);return(0,cr.assert)(!!_r,"failed to find transaction","UNKNOWN_ERROR",{}),_r}async getTransactionReceipt(){const _r=await this.provider.getTransactionReceipt(this.transactionHash);return(0,cr.assert)(!!_r,"failed to find transaction receipt","UNKNOWN_ERROR",{}),_r}removedEvent(){return Er(this)}}provider.Log=yr;class xr{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;cumulativeGasUsed;gasPrice;type;status;root;#e;constructor(_r,Cr){this.#e=Object.freeze(_r.logs.map(Rr=>new yr(Rr,Cr)));let kr=dr;_r.effectiveGasPrice!=null?kr=_r.effectiveGasPrice:_r.gasPrice!=null&&(kr=_r.gasPrice),(0,cr.defineProperties)(this,{provider:Cr,to:_r.to,from:_r.from,contractAddress:_r.contractAddress,hash:_r.hash,index:_r.index,blockHash:_r.blockHash,blockNumber:_r.blockNumber,logsBloom:_r.logsBloom,gasUsed:_r.gasUsed,cumulativeGasUsed:_r.cumulativeGasUsed,gasPrice:kr,type:_r.type,status:_r.status,root:_r.root})}get logs(){return this.#e}toJSON(){const{to:_r,from:Cr,contractAddress:kr,hash:Rr,index:Ir,blockHash:Nr,blockNumber:Pr,logsBloom:Tr,logs:Br,status:Fr,root:jr}=this;return{_type:"TransactionReceipt",blockHash:Nr,blockNumber:Pr,contractAddress:kr,cumulativeGasUsed:hr(this.cumulativeGasUsed),from:Cr,gasPrice:hr(this.gasPrice),gasUsed:hr(this.gasUsed),hash:Rr,index:Ir,logs:Br,logsBloom:Tr,root:jr,status:Fr,to:_r}}get length(){return this.logs.length}[Symbol.iterator](){let _r=0;return{next:()=>_r<this.length?{value:this.logs[_r++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const _r=await this.provider.getBlock(this.blockHash);if(_r==null)throw new Error("TODO");return _r}async getTransaction(){const _r=await this.provider.getTransaction(this.hash);if(_r==null)throw new Error("TODO");return _r}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return vr(this)}reorderedEvent(_r){return(0,cr.assert)(!_r||_r.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Sr(this,_r)}}provider.TransactionReceipt=xr;class wr{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;data;value;chainId;signature;accessList;#e;constructor(_r,Cr){this.provider=Cr,this.blockNumber=_r.blockNumber!=null?_r.blockNumber:null,this.blockHash=_r.blockHash!=null?_r.blockHash:null,this.hash=_r.hash,this.index=_r.index,this.type=_r.type,this.from=_r.from,this.to=_r.to||null,this.gasLimit=_r.gasLimit,this.nonce=_r.nonce,this.data=_r.data,this.value=_r.value,this.gasPrice=_r.gasPrice,this.maxPriorityFeePerGas=_r.maxPriorityFeePerGas!=null?_r.maxPriorityFeePerGas:null,this.maxFeePerGas=_r.maxFeePerGas!=null?_r.maxFeePerGas:null,this.chainId=_r.chainId,this.signature=_r.signature,this.accessList=_r.accessList!=null?_r.accessList:null,this.#e=-1}toJSON(){const{blockNumber:_r,blockHash:Cr,index:kr,hash:Rr,type:Ir,to:Nr,from:Pr,nonce:Tr,data:Br,signature:Fr,accessList:jr}=this;return{_type:"TransactionReceipt",accessList:jr,blockNumber:_r,blockHash:Cr,chainId:hr(this.chainId),data:Br,from:Pr,gasLimit:hr(this.gasLimit),gasPrice:hr(this.gasPrice),hash:Rr,maxFeePerGas:hr(this.maxFeePerGas),maxPriorityFeePerGas:hr(this.maxPriorityFeePerGas),nonce:Tr,signature:Fr,to:Nr,index:kr,type:Ir,value:hr(this.value)}}async getBlock(){let _r=this.blockNumber;if(_r==null){const kr=await this.getTransaction();kr&&(_r=kr.blockNumber)}if(_r==null)return null;const Cr=this.provider.getBlock(_r);if(Cr==null)throw new Error("TODO");return Cr}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:Cr,blockNumber:kr}=await(0,cr.resolveProperties)({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return Cr==null||Cr.blockNumber==null?0:kr-Cr.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(_r,Cr){const kr=_r??1,Rr=Cr??0;let Ir=this.#e,Nr=-1,Pr=Ir===-1;const Tr=async()=>{if(Pr)return null;const{blockNumber:Ur,nonce:qr}=await(0,cr.resolveProperties)({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(qr<this.nonce){Ir=Ur;return}if(Pr)return null;const Hr=await this.getTransaction();if(!(Hr&&Hr.blockNumber!=null))for(Nr===-1&&(Nr=Ir-3,Nr<this.#e&&(Nr=this.#e));Nr<=Ur;){if(Pr)return null;const Or=await this.provider.getBlock(Nr,!0);if(Or==null)return;for(const Mr of Or)if(Mr===this.hash)return;for(let Mr=0;Mr<Or.length;Mr++){const Lr=await Or.getTransaction(Mr);if(Lr.from===this.from&&Lr.nonce===this.nonce){if(Pr)return null;const Vr=await this.provider.getTransactionReceipt(Lr.hash);if(Vr==null||Ur-Vr.blockNumber+1<kr)return;let Jr="replaced";Lr.data===this.data&&Lr.to===this.to&&Lr.value===this.value?Jr="repriced":Lr.data==="0x"&&Lr.from===Lr.to&&Lr.value===dr&&(Jr="cancelled"),(0,cr.assert)(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:Jr==="replaced"||Jr==="cancelled",reason:Jr,replacement:Lr.replaceableTransaction(Ir),hash:Lr.hash,receipt:Vr})}}Nr++}},Br=Ur=>{if(Ur==null||Ur.status!==0)return Ur;(0,cr.assert)(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:Ur.to,from:Ur.from,data:""},receipt:Ur})},Fr=await this.provider.getTransactionReceipt(this.hash);if(kr===0)return Br(Fr);if(Fr){if(await Fr.confirmations()>=kr)return Br(Fr)}else if(await Tr(),kr===0)return null;return await new Promise((Ur,qr)=>{const Hr=[],Or=()=>{Hr.forEach(Lr=>Lr())};if(Hr.push(()=>{Pr=!0}),Rr>0){const Lr=setTimeout(()=>{Or(),qr((0,cr.makeError)("wait for transaction timeout","TIMEOUT"))},Rr);Hr.push(()=>{clearTimeout(Lr)})}const Mr=async Lr=>{if(await Lr.confirmations()>=kr){Or();try{Ur(Br(Lr))}catch(Vr){qr(Vr)}}};if(Hr.push(()=>{this.provider.off(this.hash,Mr)}),this.provider.on(this.hash,Mr),Ir>=0){const Lr=async()=>{try{await Tr()}catch(Vr){if((0,cr.isError)(Vr,"TRANSACTION_REPLACED")){Or(),qr(Vr);return}}Pr||this.provider.once("block",Lr)};Hr.push(()=>{this.provider.off("block",Lr)}),this.provider.once("block",Lr)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}removedEvent(){return(0,cr.assert)(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),vr(this)}reorderedEvent(_r){return(0,cr.assert)(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),(0,cr.assert)(!_r||_r.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Sr(this,_r)}replaceableTransaction(_r){(0,cr.assertArgument)(Number.isInteger(_r)&&_r>=0,"invalid startBlock","startBlock",_r);const Cr=new wr(this,this.provider);return Cr.#e=_r,Cr}}provider.TransactionResponse=wr;function br(Ar){return{orphan:"drop-block",hash:Ar.hash,number:Ar.number}}function Sr(Ar,_r){return{orphan:"reorder-transaction",tx:Ar,other:_r}}function vr(Ar){return{orphan:"drop-transaction",tx:Ar}}function Er(Ar){return{orphan:"drop-log",log:{transactionHash:Ar.transactionHash,blockHash:Ar.blockHash,blockNumber:Ar.blockNumber,address:Ar.address,data:Ar.data,topics:Object.freeze(Ar.topics.slice()),index:Ar.index}}}return provider}var wrappers={},hasRequiredWrappers;function requireWrappers(){if(hasRequiredWrappers)return wrappers;hasRequiredWrappers=1,Object.defineProperty(wrappers,"__esModule",{value:!0}),wrappers.ContractEventPayload=wrappers.ContractUnknownEventPayload=wrappers.ContractTransactionResponse=wrappers.ContractTransactionReceipt=wrappers.UndecodedEventLog=wrappers.EventLog=void 0;const cr=requireProvider(),ar=requireUtils$1();class dr extends cr.Log{interface;fragment;args;constructor(xr,wr,br){super(xr,xr.provider);const Sr=wr.decodeEventLog(br,xr.data,xr.topics);(0,ar.defineProperties)(this,{args:Sr,fragment:br,interface:wr})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}wrappers.EventLog=dr;class fr extends cr.Log{error;constructor(xr,wr){super(xr,xr.provider),(0,ar.defineProperties)(this,{error:wr})}}wrappers.UndecodedEventLog=fr;class hr extends cr.TransactionReceipt{#e;constructor(xr,wr,br){super(br,wr),this.#e=xr}get logs(){return super.logs.map(xr=>{const wr=xr.topics.length?this.#e.getEvent(xr.topics[0]):null;if(wr)try{return new dr(xr,this.#e,wr)}catch(br){return new fr(xr,br)}return xr})}}wrappers.ContractTransactionReceipt=hr;class pr extends cr.TransactionResponse{#e;constructor(xr,wr,br){super(br,wr),this.#e=xr}async wait(xr){const wr=await super.wait(xr);return wr==null?null:new hr(this.#e,this.provider,wr)}}wrappers.ContractTransactionResponse=pr;class mr extends ar.EventPayload{log;constructor(xr,wr,br,Sr){super(xr,wr,br),(0,ar.defineProperties)(this,{log:Sr})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}wrappers.ContractUnknownEventPayload=mr;class gr extends mr{constructor(xr,wr,br,Sr,vr){super(xr,wr,br,new dr(vr,xr.interface,Sr));const Er=xr.interface.decodeEventLog(Sr,this.log.data,this.log.topics);(0,ar.defineProperties)(this,{args:Er,fragment:Sr})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}return wrappers.ContractEventPayload=gr,wrappers}var hasRequiredContract$1;function requireContract$1(){if(hasRequiredContract$1)return contract;hasRequiredContract$1=1,Object.defineProperty(contract,"__esModule",{value:!0}),contract.Contract=contract.BaseContract=contract.resolveArgs=contract.copyOverrides=void 0;const cr=requireAbi(),ar=requireAddress$2(),dr=requireProvider(),fr=requireUtils$1(),hr=requireWrappers(),pr=BigInt(0);function mr(Jr){return Jr&&typeof Jr.call=="function"}function gr(Jr){return Jr&&typeof Jr.estimateGas=="function"}function yr(Jr){return Jr&&typeof Jr.resolveName=="function"}function xr(Jr){return Jr&&typeof Jr.sendTransaction=="function"}function wr(Jr){if(Jr!=null){if(yr(Jr))return Jr;if(Jr.provider)return Jr.provider}}class br{#e;fragment;constructor(es,ns,Qr){if((0,fr.defineProperties)(this,{fragment:ns}),ns.inputs.length<Qr.length)throw new Error("too many arguments");const zr=Sr(es.runner,"resolveName"),Wr=yr(zr)?zr:null;this.#e=async function(){const ss=await Promise.all(ns.inputs.map((Xr,ts)=>Qr[ts]==null?null:Xr.walkAsync(Qr[ts],(rs,as)=>rs==="address"?Array.isArray(as)?Promise.all(as.map(ps=>(0,ar.resolveAddress)(ps,Wr))):(0,ar.resolveAddress)(as,Wr):as)));return es.interface.encodeFilterTopics(ns,ss)}()}getTopicFilter(){return this.#e}}function Sr(Jr,es){return Jr==null?null:typeof Jr[es]=="function"?Jr:Jr.provider&&typeof Jr.provider[es]=="function"?Jr.provider:null}function vr(Jr){return Jr==null?null:Jr.provider||null}async function Er(Jr,es){const ns=cr.Typed.dereference(Jr,"overrides");(0,fr.assertArgument)(typeof ns=="object","invalid overrides parameter","overrides",Jr);const Qr=(0,dr.copyRequest)(ns);return(0,fr.assertArgument)(Qr.to==null||(es||[]).indexOf("to")>=0,"cannot override to","overrides.to",Qr.to),(0,fr.assertArgument)(Qr.data==null||(es||[]).indexOf("data")>=0,"cannot override data","overrides.data",Qr.data),Qr.from&&(Qr.from=Qr.from),Qr}contract.copyOverrides=Er;async function Ar(Jr,es,ns){const Qr=Sr(Jr,"resolveName"),zr=yr(Qr)?Qr:null;return await Promise.all(es.map((Wr,ss)=>Wr.walkAsync(ns[ss],(Xr,ts)=>(ts=cr.Typed.dereference(ts,Xr),Xr==="address"?(0,ar.resolveAddress)(ts,zr):ts))))}contract.resolveArgs=Ar;function _r(Jr){const es=async function(ss){const Xr=await Er(ss,["data"]);Xr.to=await Jr.getAddress(),Xr.from&&(Xr.from=await(0,ar.resolveAddress)(Xr.from,wr(Jr.runner)));const ts=Jr.interface,fs=(0,fr.getBigInt)(Xr.value||pr,"overrides.value")===pr,rs=(Xr.data||"0x")==="0x";ts.fallback&&!ts.fallback.payable&&ts.receive&&!rs&&!fs&&(0,fr.assertArgument)(!1,"cannot send data to receive or send value to non-payable fallback","overrides",ss),(0,fr.assertArgument)(ts.fallback||rs,"cannot send data to receive-only contract","overrides.data",Xr.data);const as=ts.receive||ts.fallback&&ts.fallback.payable;return(0,fr.assertArgument)(as||fs,"cannot send value to non-payable fallback","overrides.value",Xr.value),(0,fr.assertArgument)(ts.fallback||rs,"cannot send data to receive-only contract","overrides.data",Xr.data),Xr},ns=async function(ss){const Xr=Sr(Jr.runner,"call");(0,fr.assert)(mr(Xr),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const ts=await es(ss);try{return await Xr.call(ts)}catch(fs){throw(0,fr.isCallException)(fs)&&fs.data?Jr.interface.makeError(fs.data,ts):fs}},Qr=async function(ss){const Xr=Jr.runner;(0,fr.assert)(xr(Xr),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const ts=await Xr.sendTransaction(await es(ss)),fs=vr(Jr.runner);return new hr.ContractTransactionResponse(Jr.interface,fs,ts)},zr=async function(ss){const Xr=Sr(Jr.runner,"estimateGas");return(0,fr.assert)(gr(Xr),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await Xr.estimateGas(await es(ss))},Wr=async ss=>await Qr(ss);return(0,fr.defineProperties)(Wr,{_contract:Jr,estimateGas:zr,populateTransaction:es,send:Qr,staticCall:ns}),Wr}function Cr(Jr,es){const ns=function(...fs){const rs=Jr.interface.getFunction(es,fs);return(0,fr.assert)(rs,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:es,args:fs}}),rs},Qr=async function(...fs){const rs=ns(...fs);let as={};if(rs.inputs.length+1===fs.length&&(as=await Er(fs.pop()),as.from&&(as.from=await(0,ar.resolveAddress)(as.from,wr(Jr.runner)))),rs.inputs.length!==fs.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const ps=await Ar(Jr.runner,rs.inputs,fs);return Object.assign({},as,await(0,fr.resolveProperties)({to:Jr.getAddress(),data:Jr.interface.encodeFunctionData(rs,ps)}))},zr=async function(...fs){const rs=await Xr(...fs);return rs.length===1?rs[0]:rs},Wr=async function(...fs){const rs=Jr.runner;(0,fr.assert)(xr(rs),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const as=await rs.sendTransaction(await Qr(...fs)),ps=vr(Jr.runner);return new hr.ContractTransactionResponse(Jr.interface,ps,as)},ss=async function(...fs){const rs=Sr(Jr.runner,"estimateGas");return(0,fr.assert)(gr(rs),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await rs.estimateGas(await Qr(...fs))},Xr=async function(...fs){const rs=Sr(Jr.runner,"call");(0,fr.assert)(mr(rs),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const as=await Qr(...fs);let ps="0x";try{ps=await rs.call(as)}catch(Ss){throw(0,fr.isCallException)(Ss)&&Ss.data?Jr.interface.makeError(Ss.data,as):Ss}const xs=ns(...fs);return Jr.interface.decodeFunctionResult(xs,ps)},ts=async(...fs)=>ns(...fs).constant?await zr(...fs):await Wr(...fs);return(0,fr.defineProperties)(ts,{name:Jr.interface.getFunctionName(es),_contract:Jr,_key:es,getFragment:ns,estimateGas:ss,populateTransaction:Qr,send:Wr,staticCall:zr,staticCallResult:Xr}),Object.defineProperty(ts,"fragment",{configurable:!1,enumerable:!0,get:()=>{const fs=Jr.interface.getFunction(es);return(0,fr.assert)(fs,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:es}}),fs}}),ts}function kr(Jr,es){const ns=function(...zr){const Wr=Jr.interface.getEvent(es,zr);return(0,fr.assert)(Wr,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:es,args:zr}}),Wr},Qr=function(...zr){return new br(Jr,ns(...zr),zr)};return(0,fr.defineProperties)(Qr,{name:Jr.interface.getEventName(es),_contract:Jr,_key:es,getFragment:ns}),Object.defineProperty(Qr,"fragment",{configurable:!1,enumerable:!0,get:()=>{const zr=Jr.interface.getEvent(es);return(0,fr.assert)(zr,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:es}}),zr}}),Qr}const Rr=Symbol.for("_ethersInternal_contract"),Ir=new WeakMap;function Nr(Jr,es){Ir.set(Jr[Rr],es)}function Pr(Jr){return Ir.get(Jr[Rr])}function Tr(Jr){return Jr&&typeof Jr=="object"&&"getTopicFilter"in Jr&&typeof Jr.getTopicFilter=="function"&&Jr.fragment}async function Br(Jr,es){let ns,Qr=null;if(Array.isArray(es)){const Wr=function(ss){if((0,fr.isHexString)(ss,32))return ss;const Xr=Jr.interface.getEvent(ss);return(0,fr.assertArgument)(Xr,"unknown fragment","name",ss),Xr.topicHash};ns=es.map(ss=>ss==null?null:Array.isArray(ss)?ss.map(Wr):Wr(ss))}else es==="*"?ns=[null]:typeof es=="string"?(0,fr.isHexString)(es,32)?ns=[es]:(Qr=Jr.interface.getEvent(es),(0,fr.assertArgument)(Qr,"unknown fragment","event",es),ns=[Qr.topicHash]):Tr(es)?ns=await es.getTopicFilter():"fragment"in es?(Qr=es.fragment,ns=[Qr.topicHash]):(0,fr.assertArgument)(!1,"unknown event name","event",es);ns=ns.map(Wr=>{if(Wr==null)return null;if(Array.isArray(Wr)){const ss=Array.from(new Set(Wr.map(Xr=>Xr.toLowerCase())).values());return ss.length===1?ss[0]:(ss.sort(),ss)}return Wr.toLowerCase()});const zr=ns.map(Wr=>Wr==null?"null":Array.isArray(Wr)?Wr.join("|"):Wr).join("&");return{fragment:Qr,tag:zr,topics:ns}}async function Fr(Jr,es){const{subs:ns}=Pr(Jr);return ns.get((await Br(Jr,es)).tag)||null}async function jr(Jr,es,ns){const Qr=vr(Jr.runner);(0,fr.assert)(Qr,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:es});const{fragment:zr,tag:Wr,topics:ss}=await Br(Jr,ns),{addr:Xr,subs:ts}=Pr(Jr);let fs=ts.get(Wr);if(!fs){const as={address:Xr||Jr,topics:ss},ps=Ts=>{let os=zr;if(os==null)try{os=Jr.interface.getEvent(Ts.topics[0])}catch{}if(os){const bs=os,ws=zr?Jr.interface.decodeEventLog(zr,Ts.data,Ts.topics):[];Hr(Jr,ns,ws,As=>new hr.ContractEventPayload(Jr,As,ns,bs,Ts))}else Hr(Jr,ns,[],bs=>new hr.ContractUnknownEventPayload(Jr,bs,ns,Ts))};let xs=[];fs={tag:Wr,listeners:[],start:()=>{xs.length||xs.push(Qr.on(as,ps))},stop:async()=>{if(xs.length==0)return;let Ts=xs;xs=[],await Promise.all(Ts),Qr.off(as,ps)}},ts.set(Wr,fs)}return fs}let Ur=Promise.resolve();async function qr(Jr,es,ns,Qr){await Ur;const zr=await Fr(Jr,es);if(!zr)return!1;const Wr=zr.listeners.length;return zr.listeners=zr.listeners.filter(({listener:ss,once:Xr})=>{const ts=Array.from(ns);Qr&&ts.push(Qr(Xr?null:ss));try{ss.call(Jr,...ts)}catch{}return!Xr}),zr.listeners.length===0&&(zr.stop(),Pr(Jr).subs.delete(zr.tag)),Wr>0}async function Hr(Jr,es,ns,Qr){try{await Ur}catch{}const zr=qr(Jr,es,ns,Qr);return Ur=zr,await zr}const Or=["then"];class Mr{target;interface;runner;filters;[Rr];fallback;constructor(es,ns,Qr,zr){(0,fr.assertArgument)(typeof es=="string"||(0,ar.isAddressable)(es),"invalid value for Contract target","target",es),Qr==null&&(Qr=null);const Wr=cr.Interface.from(ns);(0,fr.defineProperties)(this,{target:es,runner:Qr,interface:Wr}),Object.defineProperty(this,Rr,{value:{}});let ss,Xr=null,ts=null;if(zr){const as=vr(Qr);ts=new hr.ContractTransactionResponse(this.interface,as,zr)}let fs=new Map;if(typeof es=="string")if((0,fr.isHexString)(es))Xr=es,ss=Promise.resolve(es);else{const as=Sr(Qr,"resolveName");if(!yr(as))throw(0,fr.makeError)("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});ss=as.resolveName(es).then(ps=>{if(ps==null)throw(0,fr.makeError)("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:es});return Pr(this).addr=ps,ps})}else ss=es.getAddress().then(as=>{if(as==null)throw new Error("TODO");return Pr(this).addr=as,as});Nr(this,{addrPromise:ss,addr:Xr,deployTx:ts,subs:fs});const rs=new Proxy({},{get:(as,ps,xs)=>{if(typeof ps=="symbol"||Or.indexOf(ps)>=0)return Reflect.get(as,ps,xs);try{return this.getEvent(ps)}catch(Ss){if(!(0,fr.isError)(Ss,"INVALID_ARGUMENT")||Ss.argument!=="key")throw Ss}},has:(as,ps)=>Or.indexOf(ps)>=0?Reflect.has(as,ps):Reflect.has(as,ps)||this.interface.hasEvent(String(ps))});return(0,fr.defineProperties)(this,{filters:rs}),(0,fr.defineProperties)(this,{fallback:Wr.receive||Wr.fallback?_r(this):null}),new Proxy(this,{get:(as,ps,xs)=>{if(typeof ps=="symbol"||ps in as||Or.indexOf(ps)>=0)return Reflect.get(as,ps,xs);try{return as.getFunction(ps)}catch(Ss){if(!(0,fr.isError)(Ss,"INVALID_ARGUMENT")||Ss.argument!=="key")throw Ss}},has:(as,ps)=>typeof ps=="symbol"||ps in as||Or.indexOf(ps)>=0?Reflect.has(as,ps):as.interface.hasFunction(ps)})}connect(es){return new Mr(this.target,this.interface,es)}attach(es){return new Mr(es,this.interface,this.runner)}async getAddress(){return await Pr(this).addrPromise}async getDeployedCode(){const es=vr(this.runner);(0,fr.assert)(es,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const ns=await es.getCode(await this.getAddress());return ns==="0x"?null:ns}async waitForDeployment(){const es=this.deploymentTransaction();if(es)return await es.wait(),this;if(await this.getDeployedCode()!=null)return this;const Qr=vr(this.runner);return(0,fr.assert)(Qr!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((zr,Wr)=>{const ss=async()=>{try{if(await this.getDeployedCode()!=null)return zr(this);Qr.once("block",ss)}catch(Xr){Wr(Xr)}};ss()})}deploymentTransaction(){return Pr(this).deployTx}getFunction(es){return typeof es!="string"&&(es=es.format()),Cr(this,es)}getEvent(es){return typeof es!="string"&&(es=es.format()),kr(this,es)}async queryTransaction(es){throw new Error("@TODO")}async queryFilter(es,ns,Qr){ns==null&&(ns=0),Qr==null&&(Qr="latest");const{addr:zr,addrPromise:Wr}=Pr(this),ss=zr||await Wr,{fragment:Xr,topics:ts}=await Br(this,es),fs={address:ss,topics:ts,fromBlock:ns,toBlock:Qr},rs=vr(this.runner);return(0,fr.assert)(rs,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await rs.getLogs(fs)).map(as=>{let ps=Xr;if(ps==null)try{ps=this.interface.getEvent(as.topics[0])}catch{}if(ps)try{return new hr.EventLog(as,this.interface,ps)}catch(xs){return new hr.UndecodedEventLog(as,xs)}return new dr.Log(as,rs)})}async on(es,ns){const Qr=await jr(this,"on",es);return Qr.listeners.push({listener:ns,once:!1}),Qr.start(),this}async once(es,ns){const Qr=await jr(this,"once",es);return Qr.listeners.push({listener:ns,once:!0}),Qr.start(),this}async emit(es,...ns){return await Hr(this,es,ns,null)}async listenerCount(es){if(es){const zr=await Fr(this,es);return zr?zr.listeners.length:0}const{subs:ns}=Pr(this);let Qr=0;for(const{listeners:zr}of ns.values())Qr+=zr.length;return Qr}async listeners(es){if(es){const zr=await Fr(this,es);return zr?zr.listeners.map(({listener:Wr})=>Wr):[]}const{subs:ns}=Pr(this);let Qr=[];for(const{listeners:zr}of ns.values())Qr=Qr.concat(zr.map(({listener:Wr})=>Wr));return Qr}async off(es,ns){const Qr=await Fr(this,es);if(!Qr)return this;if(ns){const zr=Qr.listeners.map(({listener:Wr})=>Wr).indexOf(ns);zr>=0&&Qr.listeners.splice(zr,1)}return(ns==null||Qr.listeners.length===0)&&(Qr.stop(),Pr(this).subs.delete(Qr.tag)),this}async removeAllListeners(es){if(es){const ns=await Fr(this,es);if(!ns)return this;ns.stop(),Pr(this).subs.delete(ns.tag)}else{const{subs:ns}=Pr(this);for(const{tag:Qr,stop:zr}of ns.values())zr(),ns.delete(Qr)}return this}async addListener(es,ns){return await this.on(es,ns)}async removeListener(es,ns){return await this.off(es,ns)}static buildClass(es){class ns extends Mr{constructor(zr,Wr=null){super(zr,es,Wr)}}return ns}static from(es,ns,Qr){return Qr==null&&(Qr=null),new this(es,ns,Qr)}}contract.BaseContract=Mr;function Lr(){return Mr}class Vr extends Lr(){}return contract.Contract=Vr,contract}var factory$1={},hasRequiredFactory;function requireFactory(){if(hasRequiredFactory)return factory$1;hasRequiredFactory=1,Object.defineProperty(factory$1,"__esModule",{value:!0}),factory$1.ContractFactory=void 0;const cr=requireAbi(),ar=requireAddress$2(),dr=requireUtils$1(),fr=requireContract$1();class hr{interface;bytecode;runner;constructor(mr,gr,yr){const xr=cr.Interface.from(mr);gr instanceof Uint8Array||(typeof gr=="object"&&(gr=gr.object),gr.startsWith("0x")||(gr="0x"+gr)),gr=(0,dr.hexlify)((0,dr.getBytes)(gr)),(0,dr.defineProperties)(this,{bytecode:gr,interface:xr,runner:yr||null})}attach(mr){return new fr.BaseContract(mr,this.interface,this.runner)}async getDeployTransaction(...mr){let gr={};const yr=this.interface.deploy;if(yr.inputs.length+1===mr.length&&(gr=await(0,fr.copyOverrides)(mr.pop())),yr.inputs.length!==mr.length)throw new Error("incorrect number of arguments to constructor");const xr=await(0,fr.resolveArgs)(this.runner,yr.inputs,mr),wr=(0,dr.concat)([this.bytecode,this.interface.encodeDeploy(xr)]);return Object.assign({},gr,{data:wr})}async deploy(...mr){const gr=await this.getDeployTransaction(...mr);(0,dr.assert)(this.runner&&typeof this.runner.sendTransaction=="function","factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const yr=await this.runner.sendTransaction(gr),xr=(0,ar.getCreateAddress)(yr);return new fr.BaseContract(xr,this.interface,this.runner,yr)}connect(mr){return new hr(this.interface,this.bytecode,mr)}static fromSolidity(mr,gr){(0,dr.assertArgument)(mr!=null,"bad compiler output","output",mr),typeof mr=="string"&&(mr=JSON.parse(mr));const yr=mr.abi;let xr="";return mr.bytecode?xr=mr.bytecode:mr.evm&&mr.evm.bytecode&&(xr=mr.evm.bytecode),new this(yr,xr,gr)}}return factory$1.ContractFactory=hr,factory$1}var hasRequiredContract;function requireContract(){return hasRequiredContract||(hasRequiredContract=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.UndecodedEventLog=cr.EventLog=cr.ContractTransactionResponse=cr.ContractTransactionReceipt=cr.ContractUnknownEventPayload=cr.ContractEventPayload=cr.ContractFactory=cr.Contract=cr.BaseContract=void 0;var ar=requireContract$1();Object.defineProperty(cr,"BaseContract",{enumerable:!0,get:function(){return ar.BaseContract}}),Object.defineProperty(cr,"Contract",{enumerable:!0,get:function(){return ar.Contract}});var dr=requireFactory();Object.defineProperty(cr,"ContractFactory",{enumerable:!0,get:function(){return dr.ContractFactory}});var fr=requireWrappers();Object.defineProperty(cr,"ContractEventPayload",{enumerable:!0,get:function(){return fr.ContractEventPayload}}),Object.defineProperty(cr,"ContractUnknownEventPayload",{enumerable:!0,get:function(){return fr.ContractUnknownEventPayload}}),Object.defineProperty(cr,"ContractTransactionReceipt",{enumerable:!0,get:function(){return fr.ContractTransactionReceipt}}),Object.defineProperty(cr,"ContractTransactionResponse",{enumerable:!0,get:function(){return fr.ContractTransactionResponse}}),Object.defineProperty(cr,"EventLog",{enumerable:!0,get:function(){return fr.EventLog}}),Object.defineProperty(cr,"UndecodedEventLog",{enumerable:!0,get:function(){return fr.UndecodedEventLog}})}(contract$1)),contract$1}var providers={},abstractProvider={},ensResolver={},hasRequiredEnsResolver;function requireEnsResolver(){if(hasRequiredEnsResolver)return ensResolver;hasRequiredEnsResolver=1,Object.defineProperty(ensResolver,"__esModule",{value:!0}),ensResolver.EnsResolver=ensResolver.BasicMulticoinProviderPlugin=ensResolver.MulticoinProviderPlugin=void 0;const cr=requireAddress$2(),ar=requireConstants(),dr=requireContract(),fr=requireHash(),hr=requireUtils$1();function pr(Sr){return Sr.match(/^ipfs:\/\/ipfs\//i)?Sr=Sr.substring(12):Sr.match(/^ipfs:\/\//i)?Sr=Sr.substring(7):(0,hr.assertArgument)(!1,"unsupported IPFS format","link",Sr),`https://gateway.ipfs.io/ipfs/${Sr}`}class mr{name;constructor(vr){(0,hr.defineProperties)(this,{name:vr})}connect(vr){return this}supportsCoinType(vr){return!1}async encodeAddress(vr,Er){throw new Error("unsupported coin")}async decodeAddress(vr,Er){throw new Error("unsupported coin")}}ensResolver.MulticoinProviderPlugin=mr;const gr="org.ethers.plugins.provider.BasicMulticoin";class yr extends mr{constructor(){super(gr)}}ensResolver.BasicMulticoinProviderPlugin=yr;const xr=new RegExp("^(ipfs)://(.*)$","i"),wr=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),xr,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class br{provider;address;name;#e;#t;constructor(vr,Er,Ar){(0,hr.defineProperties)(this,{provider:vr,address:Er,name:Ar}),this.#e=null,this.#t=new dr.Contract(Er,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],vr)}async supportsWildcard(){return this.#e==null&&(this.#e=(async()=>{try{return await this.#t.supportsInterface("0x9061b923")}catch(vr){if((0,hr.isError)(vr,"CALL_EXCEPTION"))return!1;throw this.#e=null,vr}})()),await this.#e}async#r(vr,Er){Er=(Er||[]).slice();const Ar=this.#t.interface;Er.unshift((0,fr.namehash)(this.name));let _r=null;await this.supportsWildcard()&&(_r=Ar.getFunction(vr),(0,hr.assert)(_r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:vr}}),Er=[(0,fr.dnsEncode)(this.name),Ar.encodeFunctionData(_r,Er)],vr="resolve(bytes,bytes)"),Er.push({enableCcipRead:!0});try{const Cr=await this.#t[vr](...Er);return _r?Ar.decodeFunctionResult(_r,Cr)[0]:Cr}catch(Cr){if(!(0,hr.isError)(Cr,"CALL_EXCEPTION"))throw Cr}return null}async getAddress(vr){if(vr==null&&(vr=60),vr===60)try{const Cr=await this.#r("addr(bytes32)");return Cr==null||Cr===ar.ZeroAddress?null:Cr}catch(Cr){if((0,hr.isError)(Cr,"CALL_EXCEPTION"))return null;throw Cr}if(vr>=0&&vr<2147483648){let Cr=vr+2147483648;const kr=await this.#r("addr(bytes32,uint)",[Cr]);if((0,hr.isHexString)(kr,20))return(0,cr.getAddress)(kr)}let Er=null;for(const Cr of this.provider.plugins)if(Cr instanceof mr&&Cr.supportsCoinType(vr)){Er=Cr;break}if(Er==null)return null;const Ar=await this.#r("addr(bytes32,uint)",[vr]);if(Ar==null||Ar==="0x")return null;const _r=await Er.decodeAddress(vr,Ar);if(_r!=null)return _r;(0,hr.assert)(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${vr})`,info:{coinType:vr,data:Ar}})}async getText(vr){const Er=await this.#r("text(bytes32,string)",[vr]);return Er==null||Er==="0x"?null:Er}async getContentHash(){const vr=await this.#r("contenthash(bytes32)");if(vr==null||vr==="0x")return null;const Er=vr.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(Er){const _r=Er[1]==="e3010170"?"ipfs":"ipns",Cr=parseInt(Er[4],16);if(Er[5].length===Cr*2)return`${_r}://${(0,hr.encodeBase58)("0x"+Er[2])}`}const Ar=vr.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(Ar&&Ar[1].length===64)return`bzz://${Ar[1]}`;(0,hr.assert)(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:vr}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const vr=[{type:"name",value:this.name}];try{const Er=await this.getText("avatar");if(Er==null)return vr.push({type:"!avatar",value:""}),{url:null,linkage:vr};vr.push({type:"avatar",value:Er});for(let Ar=0;Ar<wr.length;Ar++){const _r=Er.match(wr[Ar]);if(_r==null)continue;const Cr=_r[1].toLowerCase();switch(Cr){case"https":case"data":return vr.push({type:"url",value:Er}),{linkage:vr,url:Er};case"ipfs":{const kr=pr(Er);return vr.push({type:"ipfs",value:Er}),vr.push({type:"url",value:kr}),{linkage:vr,url:kr}}case"erc721":case"erc1155":{const kr=Cr==="erc721"?"tokenURI(uint256)":"uri(uint256)";vr.push({type:Cr,value:Er});const Rr=await this.getAddress();if(Rr==null)return vr.push({type:"!owner",value:""}),{url:null,linkage:vr};const Ir=(_r[2]||"").split("/");if(Ir.length!==2)return vr.push({type:`!${Cr}caip`,value:_r[2]||""}),{url:null,linkage:vr};const Nr=Ir[1],Pr=new dr.Contract(Ir[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(Cr==="erc721"){const Ur=await Pr.ownerOf(Nr);if(Rr!==Ur)return vr.push({type:"!owner",value:Ur}),{url:null,linkage:vr};vr.push({type:"owner",value:Ur})}else if(Cr==="erc1155"){const Ur=await Pr.balanceOf(Rr,Nr);if(!Ur)return vr.push({type:"!balance",value:"0"}),{url:null,linkage:vr};vr.push({type:"balance",value:Ur.toString()})}let Tr=await Pr[kr](Nr);if(Tr==null||Tr==="0x")return vr.push({type:"!metadata-url",value:""}),{url:null,linkage:vr};vr.push({type:"metadata-url-base",value:Tr}),Cr==="erc1155"&&(Tr=Tr.replace("{id}",(0,hr.toBeHex)(Nr,32).substring(2)),vr.push({type:"metadata-url-expanded",value:Tr})),Tr.match(/^ipfs:/i)&&(Tr=pr(Tr)),vr.push({type:"metadata-url",value:Tr});let Br={};const Fr=await new hr.FetchRequest(Tr).send();Fr.assertOk();try{Br=Fr.bodyJson}catch{try{vr.push({type:"!metadata",value:Fr.bodyText})}catch{const Hr=Fr.body;return Hr&&vr.push({type:"!metadata",value:(0,hr.hexlify)(Hr)}),{url:null,linkage:vr}}return{url:null,linkage:vr}}if(!Br)return vr.push({type:"!metadata",value:""}),{url:null,linkage:vr};vr.push({type:"metadata",value:JSON.stringify(Br)});let jr=Br.image;if(typeof jr!="string")return vr.push({type:"!imageUrl",value:""}),{url:null,linkage:vr};if(!jr.match(/^(https:\/\/|data:)/i)){if(jr.match(xr)==null)return vr.push({type:"!imageUrl-ipfs",value:jr}),{url:null,linkage:vr};vr.push({type:"imageUrl-ipfs",value:jr}),jr=pr(jr)}return vr.push({type:"url",value:jr}),{linkage:vr,url:jr}}}}}catch{}return{linkage:vr,url:null}}static async getEnsAddress(vr){const Er=await vr.getNetwork(),Ar=Er.getPlugin("org.ethers.plugins.network.Ens");return(0,hr.assert)(Ar,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:Er}}),Ar.address}static async#n(vr,Er){const Ar=await br.getEnsAddress(vr);try{const Cr=await new dr.Contract(Ar,["function resolver(bytes32) view returns (address)"],vr).resolver((0,fr.namehash)(Er),{enableCcipRead:!0});return Cr===ar.ZeroAddress?null:Cr}catch(_r){throw _r}return null}static async fromName(vr,Er){let Ar=Er;for(;;){if(Ar===""||Ar==="."||Er!=="eth"&&Ar==="eth")return null;const _r=await br.#n(vr,Ar);if(_r!=null){const Cr=new br(vr,_r,Er);return Ar!==Er&&!await Cr.supportsWildcard()?null:Cr}Ar=Ar.split(".").slice(1).join(".")}}}return ensResolver.EnsResolver=br,ensResolver}var format$3={},hasRequiredFormat;function requireFormat(){if(hasRequiredFormat)return format$3;hasRequiredFormat=1,Object.defineProperty(format$3,"__esModule",{value:!0}),format$3.formatTransactionResponse=format$3.formatTransactionReceipt=format$3.formatReceiptLog=format$3.formatBlock=format$3.formatLog=format$3.formatUint256=format$3.formatHash=format$3.formatData=format$3.formatBoolean=format$3.object=format$3.arrayOf=format$3.allowNull=void 0;const cr=requireAddress$2(),ar=requireCrypto(),dr=requireTransaction(),fr=requireUtils$1(),hr=BigInt(0);function pr(Nr,Pr){return function(Tr){return Tr==null?Pr:Nr(Tr)}}format$3.allowNull=pr;function mr(Nr){return Pr=>{if(!Array.isArray(Pr))throw new Error("not an array");return Pr.map(Tr=>Nr(Tr))}}format$3.arrayOf=mr;function gr(Nr,Pr){return Tr=>{const Br={};for(const Fr in Nr){let jr=Fr;if(Pr&&Fr in Pr&&!(jr in Tr)){for(const Ur of Pr[Fr])if(Ur in Tr){jr=Ur;break}}try{const Ur=Nr[Fr](Tr[jr]);Ur!==void 0&&(Br[Fr]=Ur)}catch(Ur){const qr=Ur instanceof Error?Ur.message:"not-an-error";(0,fr.assert)(!1,`invalid value for value.${Fr} (${qr})`,"BAD_DATA",{value:Tr})}}return Br}}format$3.object=gr;function yr(Nr){switch(Nr){case!0:case"true":return!0;case!1:case"false":return!1}(0,fr.assertArgument)(!1,`invalid boolean; ${JSON.stringify(Nr)}`,"value",Nr)}format$3.formatBoolean=yr;function xr(Nr){return(0,fr.assertArgument)((0,fr.isHexString)(Nr,!0),"invalid data","value",Nr),Nr}format$3.formatData=xr;function wr(Nr){return(0,fr.assertArgument)((0,fr.isHexString)(Nr,32),"invalid hash","value",Nr),Nr}format$3.formatHash=wr;function br(Nr){if(!(0,fr.isHexString)(Nr))throw new Error("invalid uint256");return(0,fr.zeroPadValue)(Nr,32)}format$3.formatUint256=br;const Sr=gr({address:cr.getAddress,blockHash:wr,blockNumber:fr.getNumber,data:xr,index:fr.getNumber,removed:pr(yr,!1),topics:mr(wr),transactionHash:wr,transactionIndex:fr.getNumber},{index:["logIndex"]});function vr(Nr){return Sr(Nr)}format$3.formatLog=vr;const Er=gr({hash:pr(wr),parentHash:wr,number:fr.getNumber,timestamp:fr.getNumber,nonce:pr(xr),difficulty:fr.getBigInt,gasLimit:fr.getBigInt,gasUsed:fr.getBigInt,miner:pr(cr.getAddress),extraData:xr,baseFeePerGas:pr(fr.getBigInt)});function Ar(Nr){const Pr=Er(Nr);return Pr.transactions=Nr.transactions.map(Tr=>typeof Tr=="string"?Tr:Ir(Tr)),Pr}format$3.formatBlock=Ar;const _r=gr({transactionIndex:fr.getNumber,blockNumber:fr.getNumber,transactionHash:wr,address:cr.getAddress,topics:mr(wr),data:xr,index:fr.getNumber,blockHash:wr},{index:["logIndex"]});function Cr(Nr){return _r(Nr)}format$3.formatReceiptLog=Cr;const kr=gr({to:pr(cr.getAddress,null),from:pr(cr.getAddress,null),contractAddress:pr(cr.getAddress,null),index:fr.getNumber,root:pr(fr.hexlify),gasUsed:fr.getBigInt,logsBloom:pr(xr),blockHash:wr,hash:wr,logs:mr(Cr),blockNumber:fr.getNumber,cumulativeGasUsed:fr.getBigInt,effectiveGasPrice:pr(fr.getBigInt),status:pr(fr.getNumber),type:pr(fr.getNumber,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Rr(Nr){return kr(Nr)}format$3.formatTransactionReceipt=Rr;function Ir(Nr){Nr.to&&(0,fr.getBigInt)(Nr.to)===hr&&(Nr.to="0x0000000000000000000000000000000000000000");const Pr=gr({hash:wr,type:Tr=>Tr==="0x"||Tr==null?0:(0,fr.getNumber)(Tr),accessList:pr(dr.accessListify,null),blockHash:pr(wr,null),blockNumber:pr(fr.getNumber,null),transactionIndex:pr(fr.getNumber,null),from:cr.getAddress,gasPrice:pr(fr.getBigInt),maxPriorityFeePerGas:pr(fr.getBigInt),maxFeePerGas:pr(fr.getBigInt),gasLimit:fr.getBigInt,to:pr(cr.getAddress,null),value:fr.getBigInt,nonce:fr.getNumber,data:xr,creates:pr(cr.getAddress,null),chainId:pr(fr.getBigInt,null)},{data:["input"],gasLimit:["gas"]})(Nr);if(Pr.to==null&&Pr.creates==null&&(Pr.creates=(0,cr.getCreateAddress)(Pr)),(Nr.type===1||Nr.type===2)&&Nr.accessList==null&&(Pr.accessList=[]),Nr.signature?Pr.signature=ar.Signature.from(Nr.signature):Pr.signature=ar.Signature.from(Nr),Pr.chainId==null){const Tr=Pr.signature.legacyChainId;Tr!=null&&(Pr.chainId=Tr)}return Pr.blockHash&&(0,fr.getBigInt)(Pr.blockHash)===hr&&(Pr.blockHash=null),Pr}return format$3.formatTransactionResponse=Ir,format$3}var network={},pluginsNetwork={},hasRequiredPluginsNetwork;function requirePluginsNetwork(){if(hasRequiredPluginsNetwork)return pluginsNetwork;hasRequiredPluginsNetwork=1,Object.defineProperty(pluginsNetwork,"__esModule",{value:!0}),pluginsNetwork.FetchUrlFeeDataNetworkPlugin=pluginsNetwork.FeeDataNetworkPlugin=pluginsNetwork.EnsPlugin=pluginsNetwork.GasCostPlugin=pluginsNetwork.NetworkPlugin=void 0;const cr=requireProperties(),ar=requireUtils$1(),dr="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class fr{name;constructor(xr){(0,cr.defineProperties)(this,{name:xr})}clone(){return new fr(this.name)}}pluginsNetwork.NetworkPlugin=fr;class hr extends fr{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(xr,wr){xr==null&&(xr=0),super(`org.ethers.network.plugins.GasCost#${xr||0}`);const br={effectiveBlock:xr};function Sr(vr,Er){let Ar=(wr||{})[vr];Ar==null&&(Ar=Er),(0,ar.assertArgument)(typeof Ar=="number",`invalud value for ${vr}`,"costs",wr),br[vr]=Ar}Sr("txBase",21e3),Sr("txCreate",32e3),Sr("txDataZero",4),Sr("txDataNonzero",16),Sr("txAccessListStorageKey",1900),Sr("txAccessListAddress",2400),(0,cr.defineProperties)(this,br)}clone(){return new hr(this.effectiveBlock,this)}}pluginsNetwork.GasCostPlugin=hr;class pr extends fr{address;targetNetwork;constructor(xr,wr){super("org.ethers.plugins.network.Ens"),(0,cr.defineProperties)(this,{address:xr||dr,targetNetwork:wr??1})}clone(){return new pr(this.address,this.targetNetwork)}}pluginsNetwork.EnsPlugin=pr;class mr extends fr{#e;get feeDataFunc(){return this.#e}constructor(xr){super("org.ethers.plugins.network.FeeData"),this.#e=xr}async getFeeData(xr){return await this.#e(xr)}clone(){return new mr(this.#e)}}pluginsNetwork.FeeDataNetworkPlugin=mr;class gr extends fr{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(xr,wr){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=xr,this.#t=wr}clone(){return this}}return pluginsNetwork.FetchUrlFeeDataNetworkPlugin=gr,pluginsNetwork}var hasRequiredNetwork;function requireNetwork(){if(hasRequiredNetwork)return network;hasRequiredNetwork=1,Object.defineProperty(network,"__esModule",{value:!0}),network.Network=void 0;const cr=requireTransaction(),ar=requireUtils$1(),dr=requirePluginsNetwork(),fr=new Map;class hr{#e;#t;#r;constructor(wr,br){this.#e=wr,this.#t=(0,ar.getBigInt)(br),this.#r=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(wr){this.#e=wr}get chainId(){return this.#t}set chainId(wr){this.#t=(0,ar.getBigInt)(wr,"chainId")}matches(wr){if(wr==null)return!1;if(typeof wr=="string"){try{return this.chainId===(0,ar.getBigInt)(wr)}catch{}return this.name===wr}if(typeof wr=="number"||typeof wr=="bigint"){try{return this.chainId===(0,ar.getBigInt)(wr)}catch{}return!1}if(typeof wr=="object"){if(wr.chainId!=null){try{return this.chainId===(0,ar.getBigInt)(wr.chainId)}catch{}return!1}return wr.name!=null?this.name===wr.name:!1}return!1}get plugins(){return Array.from(this.#r.values())}attachPlugin(wr){if(this.#r.get(wr.name))throw new Error(`cannot replace existing plugin: ${wr.name} `);return this.#r.set(wr.name,wr.clone()),this}getPlugin(wr){return this.#r.get(wr)||null}getPlugins(wr){return this.plugins.filter(br=>br.name.split("#")[0]===wr)}clone(){const wr=new hr(this.name,this.chainId);return this.plugins.forEach(br=>{wr.attachPlugin(br.clone())}),wr}computeIntrinsicGas(wr){const br=this.getPlugin("org.ethers.plugins.network.GasCost")||new dr.GasCostPlugin;let Sr=br.txBase;if(wr.to==null&&(Sr+=br.txCreate),wr.data)for(let vr=2;vr<wr.data.length;vr+=2)wr.data.substring(vr,vr+2)==="00"?Sr+=br.txDataZero:Sr+=br.txDataNonzero;if(wr.accessList){const vr=(0,cr.accessListify)(wr.accessList);for(const Er in vr)Sr+=br.txAccessListAddress+br.txAccessListStorageKey*vr[Er].storageKeys.length}return Sr}static from(wr){if(yr(),wr==null)return hr.from("mainnet");if(typeof wr=="number"&&(wr=BigInt(wr)),typeof wr=="string"||typeof wr=="bigint"){const br=fr.get(wr);if(br)return br();if(typeof wr=="bigint")return new hr("unknown",wr);(0,ar.assertArgument)(!1,"unknown network","network",wr)}if(typeof wr.clone=="function")return wr.clone();if(typeof wr=="object"){(0,ar.assertArgument)(typeof wr.name=="string"&&typeof wr.chainId=="number","invalid network object name or chainId","network",wr);const br=new hr(wr.name,wr.chainId);return(wr.ensAddress||wr.ensNetwork!=null)&&br.attachPlugin(new dr.EnsPlugin(wr.ensAddress,wr.ensNetwork)),br}(0,ar.assertArgument)(!1,"invalid network","network",wr)}static register(wr,br){typeof wr=="number"&&(wr=BigInt(wr));const Sr=fr.get(wr);Sr&&(0,ar.assertArgument)(!1,`conflicting network for ${JSON.stringify(Sr.name)}`,"nameOrChainId",wr),fr.set(wr,br)}}network.Network=hr;function pr(xr,wr){const br=String(xr);if(!br.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${xr}`);const Sr=br.split(".");if(Sr.length===1&&Sr.push(""),Sr.length!==2)throw new Error(`invalid gwei value: ${xr}`);for(;Sr[1].length<wr;)Sr[1]+="0";if(Sr[1].length>9){let vr=BigInt(Sr[1].substring(0,9));Sr[1].substring(9).match(/^0+$/)||vr++,Sr[1]=vr.toString()}return BigInt(Sr[0]+Sr[1])}function mr(xr){return new dr.FetchUrlFeeDataNetworkPlugin(xr,async(wr,br,Sr)=>{Sr.setHeader("User-Agent","ethers");let vr;try{const[Er,Ar]=await Promise.all([Sr.send(),wr()]);vr=Er;const _r=vr.bodyJson.standard;return{gasPrice:Ar.gasPrice,maxFeePerGas:pr(_r.maxFee,9),maxPriorityFeePerGas:pr(_r.maxPriorityFee,9)}}catch(Er){(0,ar.assert)(!1,`error encountered with polygon gas station (${JSON.stringify(Sr.url)})`,"SERVER_ERROR",{request:Sr,response:vr,error:Er})}})}let gr=!1;function yr(){if(gr)return;gr=!0;function xr(wr,br,Sr){const vr=function(){const Er=new hr(wr,br);return Sr.ensNetwork!=null&&Er.attachPlugin(new dr.EnsPlugin(null,Sr.ensNetwork)),Er.attachPlugin(new dr.GasCostPlugin),(Sr.plugins||[]).forEach(Ar=>{Er.attachPlugin(Ar)}),Er};hr.register(wr,vr),hr.register(br,vr),Sr.altNames&&Sr.altNames.forEach(Er=>{hr.register(Er,vr)})}xr("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),xr("ropsten",3,{ensNetwork:3}),xr("rinkeby",4,{ensNetwork:4}),xr("goerli",5,{ensNetwork:5}),xr("kovan",42,{ensNetwork:42}),xr("sepolia",11155111,{ensNetwork:11155111}),xr("classic",61,{}),xr("classicKotti",6,{}),xr("arbitrum",42161,{ensNetwork:1}),xr("arbitrum-goerli",421613,{}),xr("base",8453,{ensNetwork:1}),xr("base-goerli",84531,{}),xr("base-sepolia",84532,{}),xr("bnb",56,{ensNetwork:1}),xr("bnbt",97,{}),xr("linea",59144,{ensNetwork:1}),xr("linea-goerli",59140,{}),xr("matic",137,{ensNetwork:1,plugins:[mr("https://gasstation.polygon.technology/v2")]}),xr("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[mr("https://gasstation-testnet.polygon.technology/v2")]}),xr("optimism",10,{ensNetwork:1,plugins:[]}),xr("optimism-goerli",420,{}),xr("xdai",100,{ensNetwork:1})}return network}var subscriberPolling={},hasRequiredSubscriberPolling;function requireSubscriberPolling(){if(hasRequiredSubscriberPolling)return subscriberPolling;hasRequiredSubscriberPolling=1,Object.defineProperty(subscriberPolling,"__esModule",{value:!0}),subscriberPolling.PollingEventSubscriber=subscriberPolling.PollingTransactionSubscriber=subscriberPolling.PollingOrphanSubscriber=subscriberPolling.PollingBlockTagSubscriber=subscriberPolling.OnBlockSubscriber=subscriberPolling.PollingBlockSubscriber=subscriberPolling.getPollingSubscriber=void 0;const cr=requireUtils$1();function ar(xr){return JSON.parse(JSON.stringify(xr))}function dr(xr,wr){if(wr==="block")return new fr(xr);if((0,cr.isHexString)(wr,32))return new gr(xr,wr);(0,cr.assert)(!1,"unsupported polling event","UNSUPPORTED_OPERATION",{operation:"getPollingSubscriber",info:{event:wr}})}subscriberPolling.getPollingSubscriber=dr;class fr{#e;#t;#r;#n;constructor(wr){this.#e=wr,this.#t=null,this.#r=4e3,this.#n=-2}get pollingInterval(){return this.#r}set pollingInterval(wr){this.#r=wr}async#s(){try{const wr=await this.#e.getBlockNumber();if(this.#n===-2){this.#n=wr;return}if(wr!==this.#n){for(let br=this.#n+1;br<=wr;br++){if(this.#t==null)return;await this.#e.emit("block",br)}this.#n=wr}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#s.bind(this),this.#r))}start(){this.#t||(this.#t=this.#e._setTimeout(this.#s.bind(this),this.#r),this.#s())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(wr){this.stop(),wr&&(this.#n=-2)}resume(){this.start()}}subscriberPolling.PollingBlockSubscriber=fr;class hr{#e;#t;#r;constructor(wr){this.#e=wr,this.#r=!1,this.#t=br=>{this._poll(br,this.#e)}}async _poll(wr,br){throw new Error("sub-classes must override this")}start(){this.#r||(this.#r=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#r&&(this.#r=!1,this.#e.off("block",this.#t))}pause(wr){this.stop()}resume(){this.start()}}subscriberPolling.OnBlockSubscriber=hr;class pr extends hr{#e;#t;constructor(wr,br){super(wr),this.#e=br,this.#t=-2}pause(wr){wr&&(this.#t=-2),super.pause(wr)}async _poll(wr,br){const Sr=await br.getBlock(this.#e);Sr!=null&&(this.#t===-2?this.#t=Sr.number:Sr.number>this.#t&&(br.emit(this.#e,Sr.number),this.#t=Sr.number))}}subscriberPolling.PollingBlockTagSubscriber=pr;class mr extends hr{#e;constructor(wr,br){super(wr),this.#e=ar(br)}async _poll(wr,br){throw new Error("@TODO")}}subscriberPolling.PollingOrphanSubscriber=mr;class gr extends hr{#e;constructor(wr,br){super(wr),this.#e=br}async _poll(wr,br){const Sr=await br.getTransactionReceipt(this.#e);Sr&&br.emit(this.#e,Sr)}}subscriberPolling.PollingTransactionSubscriber=gr;class yr{#e;#t;#r;#n;#s;constructor(wr,br){this.#e=wr,this.#t=ar(br),this.#r=this.#a.bind(this),this.#n=!1,this.#s=-2}async#a(wr){if(this.#s===-2)return;const br=ar(this.#t);br.fromBlock=this.#s+1,br.toBlock=wr;const Sr=await this.#e.getLogs(br);if(Sr.length===0){this.#s<wr-60&&(this.#s=wr-60);return}for(const vr of Sr)this.#e.emit(this.#t,vr),this.#s=vr.blockNumber}start(){this.#n||(this.#n=!0,this.#s===-2&&this.#e.getBlockNumber().then(wr=>{this.#s=wr}),this.#e.on("block",this.#r))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#r))}pause(wr){this.stop(),wr&&(this.#s=-2)}resume(){this.start()}}return subscriberPolling.PollingEventSubscriber=yr,subscriberPolling}var hasRequiredAbstractProvider;function requireAbstractProvider(){if(hasRequiredAbstractProvider)return abstractProvider;hasRequiredAbstractProvider=1,Object.defineProperty(abstractProvider,"__esModule",{value:!0}),abstractProvider.AbstractProvider=abstractProvider.UnmanagedSubscriber=void 0;const cr=requireAddress$2(),ar=requireConstants(),dr=requireContract(),fr=requireHash(),hr=requireTransaction(),pr=requireUtils$1(),mr=requireEnsResolver(),gr=requireFormat(),yr=requireNetwork(),xr=requireProvider(),wr=requireSubscriberPolling(),br=BigInt(2),Sr=10;function vr(Or){return Or&&typeof Or.then=="function"}function Er(Or,Mr){return Or+":"+JSON.stringify(Mr,(Lr,Vr)=>{if(Vr==null)return"null";if(typeof Vr=="bigint")return`bigint:${Vr.toString()}`;if(typeof Vr=="string")return Vr.toLowerCase();if(typeof Vr=="object"&&!Array.isArray(Vr)){const Jr=Object.keys(Vr);return Jr.sort(),Jr.reduce((es,ns)=>(es[ns]=Vr[ns],es),{})}return Vr})}class Ar{name;constructor(Mr){(0,pr.defineProperties)(this,{name:Mr})}start(){}stop(){}pause(Mr){}resume(){}}abstractProvider.UnmanagedSubscriber=Ar;function _r(Or){return JSON.parse(JSON.stringify(Or))}function Cr(Or){return Or=Array.from(new Set(Or).values()),Or.sort(),Or}async function kr(Or,Mr){if(Or==null)throw new Error("invalid event");if(Array.isArray(Or)&&(Or={topics:Or}),typeof Or=="string")switch(Or){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:Or,tag:Or}}if((0,pr.isHexString)(Or,32)){const Lr=Or.toLowerCase();return{type:"transaction",tag:Er("tx",{hash:Lr}),hash:Lr}}if(Or.orphan){const Lr=Or;return{type:"orphan",tag:Er("orphan",Lr),filter:_r(Lr)}}if(Or.address||Or.topics){const Lr=Or,Vr={topics:(Lr.topics||[]).map(Jr=>Jr==null?null:Array.isArray(Jr)?Cr(Jr.map(es=>es.toLowerCase())):Jr.toLowerCase())};if(Lr.address){const Jr=[],es=[],ns=Qr=>{(0,pr.isHexString)(Qr)?Jr.push(Qr):es.push((async()=>{Jr.push(await(0,cr.resolveAddress)(Qr,Mr))})())};Array.isArray(Lr.address)?Lr.address.forEach(ns):ns(Lr.address),es.length&&await Promise.all(es),Vr.address=Cr(Jr.map(Qr=>Qr.toLowerCase()))}return{filter:Vr,tag:Er("event",Vr),type:"event"}}(0,pr.assertArgument)(!1,"unknown ProviderEvent","event",Or)}function Rr(){return new Date().getTime()}const Ir={cacheTimeout:250,pollingInterval:4e3};class Nr{#e;#t;#r;#n;#s;#a;#i;#o;#c;#d;#u;#f;constructor(Mr,Lr){if(this.#f=Object.assign({},Ir,Lr||{}),Mr==="any")this.#a=!0,this.#s=null;else if(Mr){const Vr=yr.Network.from(Mr);this.#a=!1,this.#s=Promise.resolve(Vr),setTimeout(()=>{this.emit("network",Vr,null)},0)}else this.#a=!1,this.#s=null;this.#o=-1,this.#i=new Map,this.#e=new Map,this.#t=new Map,this.#r=null,this.#n=!1,this.#c=1,this.#d=new Map,this.#u=!1}get pollingInterval(){return this.#f.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(Mr){if(this.#t.get(Mr.name))throw new Error(`cannot replace existing plugin: ${Mr.name} `);return this.#t.set(Mr.name,Mr.connect(this)),this}getPlugin(Mr){return this.#t.get(Mr)||null}get disableCcipRead(){return this.#u}set disableCcipRead(Mr){this.#u=!!Mr}async#l(Mr){const Lr=this.#f.cacheTimeout;if(Lr<0)return await this._perform(Mr);const Vr=Er(Mr.method,Mr);let Jr=this.#i.get(Vr);return Jr||(Jr=this._perform(Mr),this.#i.set(Vr,Jr),setTimeout(()=>{this.#i.get(Vr)===Jr&&this.#i.delete(Vr)},Lr)),await Jr}async ccipReadFetch(Mr,Lr,Vr){if(this.disableCcipRead||Vr.length===0||Mr.to==null)return null;const Jr=Mr.to.toLowerCase(),es=Lr.toLowerCase(),ns=[];for(let Qr=0;Qr<Vr.length;Qr++){const zr=Vr[Qr],Wr=zr.replace("{sender}",Jr).replace("{data}",es),ss=new pr.FetchRequest(Wr);zr.indexOf("{data}")===-1&&(ss.body={data:es,sender:Jr}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:ss,index:Qr,urls:Vr});let Xr="unknown error";const ts=await ss.send();try{const fs=ts.bodyJson;if(fs.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:ss,result:fs}),fs.data;fs.message&&(Xr=fs.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:ss,result:fs})}catch{}(0,pr.assert)(ts.statusCode<400||ts.statusCode>=500,`response not found during CCIP fetch: ${Xr}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:Mr,info:{url:zr,errorMessage:Xr}}),ns.push(Xr)}(0,pr.assert)(!1,`error encountered during CCIP fetch: ${ns.map(Qr=>JSON.stringify(Qr)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:Mr,info:{urls:Vr,errorMessages:ns}})}_wrapBlock(Mr,Lr){return new xr.Block((0,gr.formatBlock)(Mr),this)}_wrapLog(Mr,Lr){return new xr.Log((0,gr.formatLog)(Mr),this)}_wrapTransactionReceipt(Mr,Lr){return new xr.TransactionReceipt((0,gr.formatTransactionReceipt)(Mr),this)}_wrapTransactionResponse(Mr,Lr){return new xr.TransactionResponse((0,gr.formatTransactionResponse)(Mr),this)}_detectNetwork(){(0,pr.assert)(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(Mr){(0,pr.assert)(!1,`unsupported method: ${Mr.method}`,"UNSUPPORTED_OPERATION",{operation:Mr.method,info:Mr})}async getBlockNumber(){const Mr=(0,pr.getNumber)(await this.#l({method:"getBlockNumber"}),"%response");return this.#o>=0&&(this.#o=Mr),Mr}_getAddress(Mr){return(0,cr.resolveAddress)(Mr,this)}_getBlockTag(Mr){if(Mr==null)return"latest";switch(Mr){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return Mr}if((0,pr.isHexString)(Mr))return(0,pr.isHexString)(Mr,32)?Mr:(0,pr.toQuantity)(Mr);if(typeof Mr=="bigint"&&(Mr=(0,pr.getNumber)(Mr,"blockTag")),typeof Mr=="number")return Mr>=0?(0,pr.toQuantity)(Mr):this.#o>=0?(0,pr.toQuantity)(this.#o+Mr):this.getBlockNumber().then(Lr=>(0,pr.toQuantity)(Lr+Mr));(0,pr.assertArgument)(!1,"invalid blockTag","blockTag",Mr)}_getFilter(Mr){const Lr=(Mr.topics||[]).map(zr=>zr==null?null:Array.isArray(zr)?Cr(zr.map(Wr=>Wr.toLowerCase())):zr.toLowerCase()),Vr="blockHash"in Mr?Mr.blockHash:void 0,Jr=(zr,Wr,ss)=>{let Xr;switch(zr.length){case 0:break;case 1:Xr=zr[0];break;default:zr.sort(),Xr=zr}if(Vr&&(Wr!=null||ss!=null))throw new Error("invalid filter");const ts={};return Xr&&(ts.address=Xr),Lr.length&&(ts.topics=Lr),Wr&&(ts.fromBlock=Wr),ss&&(ts.toBlock=ss),Vr&&(ts.blockHash=Vr),ts};let es=[];if(Mr.address)if(Array.isArray(Mr.address))for(const zr of Mr.address)es.push(this._getAddress(zr));else es.push(this._getAddress(Mr.address));let ns;"fromBlock"in Mr&&(ns=this._getBlockTag(Mr.fromBlock));let Qr;return"toBlock"in Mr&&(Qr=this._getBlockTag(Mr.toBlock)),es.filter(zr=>typeof zr!="string").length||ns!=null&&typeof ns!="string"||Qr!=null&&typeof Qr!="string"?Promise.all([Promise.all(es),ns,Qr]).then(zr=>Jr(zr[0],zr[1],zr[2])):Jr(es,ns,Qr)}_getTransactionRequest(Mr){const Lr=(0,xr.copyRequest)(Mr),Vr=[];if(["to","from"].forEach(Jr=>{if(Lr[Jr]==null)return;const es=(0,cr.resolveAddress)(Lr[Jr],this);vr(es)?Vr.push(async function(){Lr[Jr]=await es}()):Lr[Jr]=es}),Lr.blockTag!=null){const Jr=this._getBlockTag(Lr.blockTag);vr(Jr)?Vr.push(async function(){Lr.blockTag=await Jr}()):Lr.blockTag=Jr}return Vr.length?async function(){return await Promise.all(Vr),Lr}():Lr}async getNetwork(){if(this.#s==null){const Jr=this._detectNetwork().then(es=>(this.emit("network",es,null),es),es=>{throw this.#s===Jr&&(this.#s=null),es});return this.#s=Jr,(await Jr).clone()}const Mr=this.#s,[Lr,Vr]=await Promise.all([Mr,this._detectNetwork()]);return Lr.chainId!==Vr.chainId&&(this.#a?(this.emit("network",Vr,Lr),this.#s===Mr&&(this.#s=Promise.resolve(Vr))):(0,pr.assert)(!1,`network changed: ${Lr.chainId} => ${Vr.chainId} `,"NETWORK_ERROR",{event:"changed"})),Lr.clone()}async getFeeData(){const Mr=await this.getNetwork(),Lr=async()=>{const{_block:Jr,gasPrice:es,priorityFee:ns}=await(0,pr.resolveProperties)({_block:this.#x("latest",!1),gasPrice:(async()=>{try{const ss=await this.#l({method:"getGasPrice"});return(0,pr.getBigInt)(ss,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const ss=await this.#l({method:"getPriorityFee"});return(0,pr.getBigInt)(ss,"%response")}catch{}return null})()});let Qr=null,zr=null;const Wr=this._wrapBlock(Jr,Mr);return Wr&&Wr.baseFeePerGas&&(zr=ns??BigInt("1000000000"),Qr=Wr.baseFeePerGas*br+zr),new xr.FeeData(es,Qr,zr)},Vr=Mr.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(Vr){const Jr=new pr.FetchRequest(Vr.url),es=await Vr.processFunc(Lr,this,Jr);return new xr.FeeData(es.gasPrice,es.maxFeePerGas,es.maxPriorityFeePerGas)}return await Lr()}async estimateGas(Mr){let Lr=this._getTransactionRequest(Mr);return vr(Lr)&&(Lr=await Lr),(0,pr.getBigInt)(await this.#l({method:"estimateGas",transaction:Lr}),"%response")}async#h(Mr,Lr,Vr){(0,pr.assert)(Vr<Sr,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},Mr,{blockTag:Lr,enableCcipRead:!0})});const Jr=(0,xr.copyRequest)(Mr);try{return(0,pr.hexlify)(await this._perform({method:"call",transaction:Jr,blockTag:Lr}))}catch(es){if(!this.disableCcipRead&&(0,pr.isCallException)(es)&&es.data&&Vr>=0&&Lr==="latest"&&Jr.to!=null&&(0,pr.dataSlice)(es.data,0,4)==="0x556f1830"){const ns=es.data,Qr=await(0,cr.resolveAddress)(Jr.to,this);let zr;try{zr=Hr((0,pr.dataSlice)(es.data,4))}catch(Xr){(0,pr.assert)(!1,Xr.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:Jr,info:{data:ns}})}(0,pr.assert)(zr.sender.toLowerCase()===Qr.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:ns,reason:"OffchainLookup",transaction:Jr,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:zr.errorArgs}});const Wr=await this.ccipReadFetch(Jr,zr.calldata,zr.urls);(0,pr.assert)(Wr!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:Jr,info:{data:es.data,errorArgs:zr.errorArgs}});const ss={to:Qr,data:(0,pr.concat)([zr.selector,Ur([Wr,zr.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:ss});try{const Xr=await this.#h(ss,Lr,Vr+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},ss),result:Xr}),Xr}catch(Xr){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},ss),error:Xr}),Xr}}throw es}}async#m(Mr){const{value:Lr}=await(0,pr.resolveProperties)({network:this.getNetwork(),value:Mr});return Lr}async call(Mr){const{tx:Lr,blockTag:Vr}=await(0,pr.resolveProperties)({tx:this._getTransactionRequest(Mr),blockTag:this._getBlockTag(Mr.blockTag)});return await this.#m(this.#h(Lr,Vr,Mr.enableCcipRead?0:-1))}async#p(Mr,Lr,Vr){let Jr=this._getAddress(Lr),es=this._getBlockTag(Vr);return(typeof Jr!="string"||typeof es!="string")&&([Jr,es]=await Promise.all([Jr,es])),await this.#m(this.#l(Object.assign(Mr,{address:Jr,blockTag:es})))}async getBalance(Mr,Lr){return(0,pr.getBigInt)(await this.#p({method:"getBalance"},Mr,Lr),"%response")}async getTransactionCount(Mr,Lr){return(0,pr.getNumber)(await this.#p({method:"getTransactionCount"},Mr,Lr),"%response")}async getCode(Mr,Lr){return(0,pr.hexlify)(await this.#p({method:"getCode"},Mr,Lr))}async getStorage(Mr,Lr,Vr){const Jr=(0,pr.getBigInt)(Lr,"position");return(0,pr.hexlify)(await this.#p({method:"getStorage",position:Jr},Mr,Vr))}async broadcastTransaction(Mr){const{blockNumber:Lr,hash:Vr,network:Jr}=await(0,pr.resolveProperties)({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:Mr}),network:this.getNetwork()}),es=hr.Transaction.from(Mr);if(es.hash!==Vr)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(es,Jr).replaceableTransaction(Lr)}async#x(Mr,Lr){if((0,pr.isHexString)(Mr,32))return await this.#l({method:"getBlock",blockHash:Mr,includeTransactions:Lr});let Vr=this._getBlockTag(Mr);return typeof Vr!="string"&&(Vr=await Vr),await this.#l({method:"getBlock",blockTag:Vr,includeTransactions:Lr})}async getBlock(Mr,Lr){const{network:Vr,params:Jr}=await(0,pr.resolveProperties)({network:this.getNetwork(),params:this.#x(Mr,!!Lr)});return Jr==null?null:this._wrapBlock(Jr,Vr)}async getTransaction(Mr){const{network:Lr,params:Vr}=await(0,pr.resolveProperties)({network:this.getNetwork(),params:this.#l({method:"getTransaction",hash:Mr})});return Vr==null?null:this._wrapTransactionResponse(Vr,Lr)}async getTransactionReceipt(Mr){const{network:Lr,params:Vr}=await(0,pr.resolveProperties)({network:this.getNetwork(),params:this.#l({method:"getTransactionReceipt",hash:Mr})});if(Vr==null)return null;if(Vr.gasPrice==null&&Vr.effectiveGasPrice==null){const Jr=await this.#l({method:"getTransaction",hash:Mr});if(Jr==null)throw new Error("report this; could not find tx or effectiveGasPrice");Vr.effectiveGasPrice=Jr.gasPrice}return this._wrapTransactionReceipt(Vr,Lr)}async getTransactionResult(Mr){const{result:Lr}=await(0,pr.resolveProperties)({network:this.getNetwork(),result:this.#l({method:"getTransactionResult",hash:Mr})});return Lr==null?null:(0,pr.hexlify)(Lr)}async getLogs(Mr){let Lr=this._getFilter(Mr);vr(Lr)&&(Lr=await Lr);const{network:Vr,params:Jr}=await(0,pr.resolveProperties)({network:this.getNetwork(),params:this.#l({method:"getLogs",filter:Lr})});return Jr.map(es=>this._wrapLog(es,Vr))}_getProvider(Mr){(0,pr.assert)(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(Mr){return await mr.EnsResolver.fromName(this,Mr)}async getAvatar(Mr){const Lr=await this.getResolver(Mr);return Lr?await Lr.getAvatar():null}async resolveName(Mr){const Lr=await this.getResolver(Mr);return Lr?await Lr.getAddress():null}async lookupAddress(Mr){Mr=(0,cr.getAddress)(Mr);const Lr=(0,fr.namehash)(Mr.substring(2).toLowerCase()+".addr.reverse");try{const Vr=await mr.EnsResolver.getEnsAddress(this),es=await new dr.Contract(Vr,["function resolver(bytes32) view returns (address)"],this).resolver(Lr);if(es==null||es===ar.ZeroAddress)return null;const Qr=await new dr.Contract(es,["function name(bytes32) view returns (string)"],this).name(Lr);return await this.resolveName(Qr)!==Mr?null:Qr}catch(Vr){if((0,pr.isError)(Vr,"BAD_DATA")&&Vr.value==="0x"||(0,pr.isError)(Vr,"CALL_EXCEPTION"))return null;throw Vr}return null}async waitForTransaction(Mr,Lr,Vr){const Jr=Lr??1;return Jr===0?this.getTransactionReceipt(Mr):new Promise(async(es,ns)=>{let Qr=null;const zr=async Wr=>{try{const ss=await this.getTransactionReceipt(Mr);if(ss!=null&&Wr-ss.blockNumber+1>=Jr){es(ss),Qr&&(clearTimeout(Qr),Qr=null);return}}catch(ss){console.log("EEE",ss)}this.once("block",zr)};Vr!=null&&(Qr=setTimeout(()=>{Qr!=null&&(Qr=null,this.off("block",zr),ns((0,pr.makeError)("timeout","TIMEOUT",{reason:"timeout"})))},Vr)),zr(await this.getBlockNumber())})}async waitForBlock(Mr){(0,pr.assert)(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(Mr){const Lr=this.#d.get(Mr);Lr&&(Lr.timer&&clearTimeout(Lr.timer),this.#d.delete(Mr))}_setTimeout(Mr,Lr){Lr==null&&(Lr=0);const Vr=this.#c++,Jr=()=>{this.#d.delete(Vr),Mr()};if(this.paused)this.#d.set(Vr,{timer:null,func:Jr,time:Lr});else{const es=setTimeout(Jr,Lr);this.#d.set(Vr,{timer:es,func:Jr,time:Rr()})}return Vr}_forEachSubscriber(Mr){for(const Lr of this.#e.values())Mr(Lr.subscriber)}_getSubscriber(Mr){switch(Mr.type){case"debug":case"error":case"network":return new Ar(Mr.type);case"block":{const Lr=new wr.PollingBlockSubscriber(this);return Lr.pollingInterval=this.pollingInterval,Lr}case"safe":case"finalized":return new wr.PollingBlockTagSubscriber(this,Mr.type);case"event":return new wr.PollingEventSubscriber(this,Mr.filter);case"transaction":return new wr.PollingTransactionSubscriber(this,Mr.hash);case"orphan":return new wr.PollingOrphanSubscriber(this,Mr.filter)}throw new Error(`unsupported event: ${Mr.type}`)}_recoverSubscriber(Mr,Lr){for(const Vr of this.#e.values())if(Vr.subscriber===Mr){Vr.started&&Vr.subscriber.stop(),Vr.subscriber=Lr,Vr.started&&Lr.start(),this.#r!=null&&Lr.pause(this.#r);break}}async#g(Mr,Lr){let Vr=await kr(Mr,this);return Vr.type==="event"&&Lr&&Lr.length>0&&Lr[0].removed===!0&&(Vr=await kr({orphan:"drop-log",log:Lr[0]},this)),this.#e.get(Vr.tag)||null}async#y(Mr){const Lr=await kr(Mr,this),Vr=Lr.tag;let Jr=this.#e.get(Vr);return Jr||(Jr={subscriber:this._getSubscriber(Lr),tag:Vr,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(Vr,Jr)),Jr}async on(Mr,Lr){const Vr=await this.#y(Mr);return Vr.listeners.push({listener:Lr,once:!1}),Vr.started||(Vr.subscriber.start(),Vr.started=!0,this.#r!=null&&Vr.subscriber.pause(this.#r)),this}async once(Mr,Lr){const Vr=await this.#y(Mr);return Vr.listeners.push({listener:Lr,once:!0}),Vr.started||(Vr.subscriber.start(),Vr.started=!0,this.#r!=null&&Vr.subscriber.pause(this.#r)),this}async emit(Mr,...Lr){const Vr=await this.#g(Mr,Lr);if(!Vr||Vr.listeners.length===0)return!1;const Jr=Vr.listeners.length;return Vr.listeners=Vr.listeners.filter(({listener:es,once:ns})=>{const Qr=new pr.EventPayload(this,ns?null:es,Mr);try{es.call(this,...Lr,Qr)}catch{}return!ns}),Vr.listeners.length===0&&(Vr.started&&Vr.subscriber.stop(),this.#e.delete(Vr.tag)),Jr>0}async listenerCount(Mr){if(Mr){const Vr=await this.#g(Mr);return Vr?Vr.listeners.length:0}let Lr=0;for(const{listeners:Vr}of this.#e.values())Lr+=Vr.length;return Lr}async listeners(Mr){if(Mr){const Vr=await this.#g(Mr);return Vr?Vr.listeners.map(({listener:Jr})=>Jr):[]}let Lr=[];for(const{listeners:Vr}of this.#e.values())Lr=Lr.concat(Vr.map(({listener:Jr})=>Jr));return Lr}async off(Mr,Lr){const Vr=await this.#g(Mr);if(!Vr)return this;if(Lr){const Jr=Vr.listeners.map(({listener:es})=>es).indexOf(Lr);Jr>=0&&Vr.listeners.splice(Jr,1)}return(!Lr||Vr.listeners.length===0)&&(Vr.started&&Vr.subscriber.stop(),this.#e.delete(Vr.tag)),this}async removeAllListeners(Mr){if(Mr){const{tag:Lr,started:Vr,subscriber:Jr}=await this.#y(Mr);Vr&&Jr.stop(),this.#e.delete(Lr)}else for(const[Lr,{started:Vr,subscriber:Jr}]of this.#e)Vr&&Jr.stop(),this.#e.delete(Lr);return this}async addListener(Mr,Lr){return await this.on(Mr,Lr)}async removeListener(Mr,Lr){return this.off(Mr,Lr)}get destroyed(){return this.#n}destroy(){this.removeAllListeners();for(const Mr of this.#d.keys())this._clearTimeout(Mr);this.#n=!0}get paused(){return this.#r!=null}set paused(Mr){!!Mr!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(Mr){if(this.#o=-1,this.#r!=null){if(this.#r==!!Mr)return;(0,pr.assert)(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(Lr=>Lr.pause(Mr)),this.#r=!!Mr;for(const Lr of this.#d.values())Lr.timer&&clearTimeout(Lr.timer),Lr.time=Rr()-Lr.time}resume(){if(this.#r!=null){this._forEachSubscriber(Mr=>Mr.resume()),this.#r=null;for(const Mr of this.#d.values()){let Lr=Mr.time;Lr<0&&(Lr=0),Mr.time=Rr(),setTimeout(Mr.func,Lr)}}}}abstractProvider.AbstractProvider=Nr;function Pr(Or,Mr){try{const Lr=Tr(Or,Mr);if(Lr)return(0,pr.toUtf8String)(Lr)}catch{}return null}function Tr(Or,Mr){if(Or==="0x")return null;try{const Lr=(0,pr.getNumber)((0,pr.dataSlice)(Or,Mr,Mr+32)),Vr=(0,pr.getNumber)((0,pr.dataSlice)(Or,Lr,Lr+32));return(0,pr.dataSlice)(Or,Lr+32,Lr+32+Vr)}catch{}return null}function Br(Or){const Mr=(0,pr.toBeArray)(Or);if(Mr.length>32)throw new Error("internal; should not happen");const Lr=new Uint8Array(32);return Lr.set(Mr,32-Mr.length),Lr}function Fr(Or){if(Or.length%32===0)return Or;const Mr=new Uint8Array(Math.ceil(Or.length/32)*32);return Mr.set(Or),Mr}const jr=new Uint8Array([]);function Ur(Or){const Mr=[];let Lr=0;for(let Vr=0;Vr<Or.length;Vr++)Mr.push(jr),Lr+=32;for(let Vr=0;Vr<Or.length;Vr++){const Jr=(0,pr.getBytes)(Or[Vr]);Mr[Vr]=Br(Lr),Mr.push(Br(Jr.length)),Mr.push(Fr(Jr)),Lr+=32+Math.ceil(Jr.length/32)*32}return(0,pr.concat)(Mr)}const qr="0x0000000000000000000000000000000000000000000000000000000000000000";function Hr(Or){const Mr={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};(0,pr.assert)((0,pr.dataLength)(Or)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const Lr=(0,pr.dataSlice)(Or,0,32);(0,pr.assert)((0,pr.dataSlice)(Lr,0,12)===(0,pr.dataSlice)(qr,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),Mr.sender=(0,pr.dataSlice)(Lr,12);try{const Vr=[],Jr=(0,pr.getNumber)((0,pr.dataSlice)(Or,32,64)),es=(0,pr.getNumber)((0,pr.dataSlice)(Or,Jr,Jr+32)),ns=(0,pr.dataSlice)(Or,Jr+32);for(let Qr=0;Qr<es;Qr++){const zr=Pr(ns,Qr*32);if(zr==null)throw new Error("abort");Vr.push(zr)}Mr.urls=Vr}catch{(0,pr.assert)(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const Vr=Tr(Or,64);if(Vr==null)throw new Error("abort");Mr.calldata=Vr}catch{(0,pr.assert)(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}(0,pr.assert)((0,pr.dataSlice)(Or,100,128)===(0,pr.dataSlice)(qr,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),Mr.selector=(0,pr.dataSlice)(Or,96,100);try{const Vr=Tr(Or,128);if(Vr==null)throw new Error("abort");Mr.extraData=Vr}catch{(0,pr.assert)(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return Mr.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(Vr=>Mr[Vr]),Mr}return abstractProvider}var abstractSigner={},hasRequiredAbstractSigner;function requireAbstractSigner(){if(hasRequiredAbstractSigner)return abstractSigner;hasRequiredAbstractSigner=1,Object.defineProperty(abstractSigner,"__esModule",{value:!0}),abstractSigner.VoidSigner=abstractSigner.AbstractSigner=void 0;const cr=requireAddress$2(),ar=requireTransaction(),dr=requireUtils$1(),fr=requireProvider();function hr(yr,xr){if(yr.provider)return yr.provider;(0,dr.assert)(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:xr})}async function pr(yr,xr){let wr=(0,fr.copyRequest)(xr);if(wr.to!=null&&(wr.to=(0,cr.resolveAddress)(wr.to,yr)),wr.from!=null){const br=wr.from;wr.from=Promise.all([yr.getAddress(),(0,cr.resolveAddress)(br,yr)]).then(([Sr,vr])=>((0,dr.assertArgument)(Sr.toLowerCase()===vr.toLowerCase(),"transaction from mismatch","tx.from",vr),Sr))}else wr.from=yr.getAddress();return await(0,dr.resolveProperties)(wr)}class mr{provider;constructor(xr){(0,dr.defineProperties)(this,{provider:xr||null})}async getNonce(xr){return hr(this,"getTransactionCount").getTransactionCount(await this.getAddress(),xr)}async populateCall(xr){return await pr(this,xr)}async populateTransaction(xr){const wr=hr(this,"populateTransaction"),br=await pr(this,xr);br.nonce==null&&(br.nonce=await this.getNonce("pending")),br.gasLimit==null&&(br.gasLimit=await this.estimateGas(br));const Sr=await this.provider.getNetwork();if(br.chainId!=null){const Er=(0,dr.getBigInt)(br.chainId);(0,dr.assertArgument)(Er===Sr.chainId,"transaction chainId mismatch","tx.chainId",xr.chainId)}else br.chainId=Sr.chainId;const vr=br.maxFeePerGas!=null||br.maxPriorityFeePerGas!=null;if(br.gasPrice!=null&&(br.type===2||vr)?(0,dr.assertArgument)(!1,"eip-1559 transaction do not support gasPrice","tx",xr):(br.type===0||br.type===1)&&vr&&(0,dr.assertArgument)(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",xr),(br.type===2||br.type==null)&&br.maxFeePerGas!=null&&br.maxPriorityFeePerGas!=null)br.type=2;else if(br.type===0||br.type===1){const Er=await wr.getFeeData();(0,dr.assert)(Er.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),br.gasPrice==null&&(br.gasPrice=Er.gasPrice)}else{const Er=await wr.getFeeData();if(br.type==null)if(Er.maxFeePerGas!=null&&Er.maxPriorityFeePerGas!=null)if(br.type=2,br.gasPrice!=null){const Ar=br.gasPrice;delete br.gasPrice,br.maxFeePerGas=Ar,br.maxPriorityFeePerGas=Ar}else br.maxFeePerGas==null&&(br.maxFeePerGas=Er.maxFeePerGas),br.maxPriorityFeePerGas==null&&(br.maxPriorityFeePerGas=Er.maxPriorityFeePerGas);else Er.gasPrice!=null?((0,dr.assert)(!vr,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),br.gasPrice==null&&(br.gasPrice=Er.gasPrice),br.type=0):(0,dr.assert)(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else br.type===2&&(br.maxFeePerGas==null&&(br.maxFeePerGas=Er.maxFeePerGas),br.maxPriorityFeePerGas==null&&(br.maxPriorityFeePerGas=Er.maxPriorityFeePerGas))}return await(0,dr.resolveProperties)(br)}async estimateGas(xr){return hr(this,"estimateGas").estimateGas(await this.populateCall(xr))}async call(xr){return hr(this,"call").call(await this.populateCall(xr))}async resolveName(xr){return await hr(this,"resolveName").resolveName(xr)}async sendTransaction(xr){const wr=hr(this,"sendTransaction"),br=await this.populateTransaction(xr);delete br.from;const Sr=ar.Transaction.from(br);return await wr.broadcastTransaction(await this.signTransaction(Sr))}}abstractSigner.AbstractSigner=mr;class gr extends mr{address;constructor(xr,wr){super(wr),(0,dr.defineProperties)(this,{address:xr})}async getAddress(){return this.address}connect(xr){return new gr(this.address,xr)}#e(xr,wr){(0,dr.assert)(!1,`VoidSigner cannot sign ${xr}`,"UNSUPPORTED_OPERATION",{operation:wr})}async signTransaction(xr){this.#e("transactions","signTransaction")}async signMessage(xr){this.#e("messages","signMessage")}async signTypedData(xr,wr,br){this.#e("typed-data","signTypedData")}}return abstractSigner.VoidSigner=gr,abstractSigner}var community={},hasRequiredCommunity;function requireCommunity(){if(hasRequiredCommunity)return community;hasRequiredCommunity=1,Object.defineProperty(community,"__esModule",{value:!0}),community.showThrottleMessage=void 0;const cr=new Set;function ar(dr){cr.has(dr)||(cr.add(dr),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${dr} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}return community.showThrottleMessage=ar,community}var defaultProvider={},providerAnkr={},providerJsonrpc={},subscriberFilterid={},hasRequiredSubscriberFilterid;function requireSubscriberFilterid(){if(hasRequiredSubscriberFilterid)return subscriberFilterid;hasRequiredSubscriberFilterid=1,Object.defineProperty(subscriberFilterid,"__esModule",{value:!0}),subscriberFilterid.FilterIdPendingSubscriber=subscriberFilterid.FilterIdEventSubscriber=subscriberFilterid.FilterIdSubscriber=void 0;const cr=requireUtils$1(),ar=requireSubscriberPolling();function dr(mr){return JSON.parse(JSON.stringify(mr))}class fr{#e;#t;#r;#n;#s;#a;constructor(gr){this.#e=gr,this.#t=null,this.#r=this.#i.bind(this),this.#n=!1,this.#s=null,this.#a=!1}_subscribe(gr){throw new Error("subclasses must override this")}_emitResults(gr,yr){throw new Error("subclasses must override this")}_recover(gr){throw new Error("subclasses must override this")}async#i(gr){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let yr=null;try{yr=await this.#t}catch(br){if(!(0,cr.isError)(br,"UNSUPPORTED_OPERATION")||br.operation!=="eth_newFilter")throw br}if(yr==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}const xr=await this.#e.getNetwork();if(this.#s||(this.#s=xr),this.#s.chainId!==xr.chainId)throw new Error("chaid changed");if(this.#a)return;const wr=await this.#e.send("eth_getFilterChanges",[yr]);await this._emitResults(this.#e,wr)}catch(yr){console.log("@TODO",yr)}this.#e.once("block",this.#r)}#o(){const gr=this.#t;gr&&(this.#t=null,gr.then(yr=>{this.#e.send("eth_uninstallFilter",[yr])}))}start(){this.#n||(this.#n=!0,this.#i(-2))}stop(){this.#n&&(this.#n=!1,this.#a=!0,this.#o(),this.#e.off("block",this.#r))}pause(gr){gr&&this.#o(),this.#e.off("block",this.#r)}resume(){this.start()}}subscriberFilterid.FilterIdSubscriber=fr;class hr extends fr{#e;constructor(gr,yr){super(gr),this.#e=dr(yr)}_recover(gr){return new ar.PollingEventSubscriber(gr,this.#e)}async _subscribe(gr){return await gr.send("eth_newFilter",[this.#e])}async _emitResults(gr,yr){for(const xr of yr)gr.emit(this.#e,gr._wrapLog(xr,gr._network))}}subscriberFilterid.FilterIdEventSubscriber=hr;class pr extends fr{async _subscribe(gr){return await gr.send("eth_newPendingTransactionFilter",[])}async _emitResults(gr,yr){for(const xr of yr)gr.emit("pending",xr)}}return subscriberFilterid.FilterIdPendingSubscriber=pr,subscriberFilterid}var hasRequiredProviderJsonrpc;function requireProviderJsonrpc(){if(hasRequiredProviderJsonrpc)return providerJsonrpc;hasRequiredProviderJsonrpc=1,Object.defineProperty(providerJsonrpc,"__esModule",{value:!0}),providerJsonrpc.JsonRpcProvider=providerJsonrpc.JsonRpcApiPollingProvider=providerJsonrpc.JsonRpcApiProvider=providerJsonrpc.JsonRpcSigner=void 0;const cr=requireAbi(),ar=requireAddress$2(),dr=requireHash(),fr=requireTransaction(),hr=requireUtils$1(),pr=requireAbstractProvider(),mr=requireAbstractSigner(),gr=requireNetwork(),yr=requireSubscriberFilterid(),xr=requireSubscriberPolling(),wr="bigint,boolean,function,number,string,symbol".split(/,/g);function br(Tr){if(Tr==null||wr.indexOf(typeof Tr)>=0||typeof Tr.getAddress=="function")return Tr;if(Array.isArray(Tr))return Tr.map(br);if(typeof Tr=="object")return Object.keys(Tr).reduce((Br,Fr)=>(Br[Fr]=Tr[Fr],Br),{});throw new Error(`should not happen: ${Tr} (${typeof Tr})`)}function Sr(Tr){return new Promise(Br=>{setTimeout(Br,Tr)})}function vr(Tr){return Tr&&Tr.toLowerCase()}function Er(Tr){return Tr&&typeof Tr.pollingInterval=="number"}const Ar={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class _r extends mr.AbstractSigner{address;constructor(Br,Fr){super(Br),Fr=(0,ar.getAddress)(Fr),(0,hr.defineProperties)(this,{address:Fr})}connect(Br){(0,hr.assert)(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(Br){return await this.populateCall(Br)}async sendUncheckedTransaction(Br){const Fr=br(Br),jr=[];if(Fr.from){const qr=Fr.from;jr.push((async()=>{const Hr=await(0,ar.resolveAddress)(qr,this.provider);(0,hr.assertArgument)(Hr!=null&&Hr.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",Br),Fr.from=Hr})())}else Fr.from=this.address;if(Fr.gasLimit==null&&jr.push((async()=>{Fr.gasLimit=await this.provider.estimateGas({...Fr,from:this.address})})()),Fr.to!=null){const qr=Fr.to;jr.push((async()=>{Fr.to=await(0,ar.resolveAddress)(qr,this.provider)})())}jr.length&&await Promise.all(jr);const Ur=this.provider.getRpcTransaction(Fr);return this.provider.send("eth_sendTransaction",[Ur])}async sendTransaction(Br){const Fr=await this.provider.getBlockNumber(),jr=await this.sendUncheckedTransaction(Br);return await new Promise((Ur,qr)=>{const Hr=[1e3,100],Or=async()=>{const Mr=await this.provider.getTransaction(jr);if(Mr!=null){Ur(Mr.replaceableTransaction(Fr));return}this.provider._setTimeout(()=>{Or()},Hr.pop()||4e3)};Or()})}async signTransaction(Br){const Fr=br(Br);if(Fr.from){const Ur=await(0,ar.resolveAddress)(Fr.from,this.provider);(0,hr.assertArgument)(Ur!=null&&Ur.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",Br),Fr.from=Ur}else Fr.from=this.address;const jr=this.provider.getRpcTransaction(Fr);return await this.provider.send("eth_signTransaction",[jr])}async signMessage(Br){const Fr=typeof Br=="string"?(0,hr.toUtf8Bytes)(Br):Br;return await this.provider.send("personal_sign",[(0,hr.hexlify)(Fr),this.address.toLowerCase()])}async signTypedData(Br,Fr,jr){const Ur=br(jr),qr=await dr.TypedDataEncoder.resolveNames(Br,Fr,Ur,async Hr=>{const Or=await(0,ar.resolveAddress)(Hr);return(0,hr.assertArgument)(Or!=null,"TypedData does not support null address","value",Hr),Or});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(dr.TypedDataEncoder.getPayload(qr.domain,Fr,qr.value))])}async unlock(Br){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),Br,null])}async _legacySignMessage(Br){const Fr=typeof Br=="string"?(0,hr.toUtf8Bytes)(Br):Br;return await this.provider.send("eth_sign",[this.address.toLowerCase(),(0,hr.hexlify)(Fr)])}}providerJsonrpc.JsonRpcSigner=_r;class Cr extends pr.AbstractProvider{#e;#t;#r;#n;#s;#a;#i;#o(){if(this.#n)return;const Br=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#n=setTimeout(()=>{this.#n=null;const Fr=this.#r;for(this.#r=[];Fr.length;){const jr=[Fr.shift()];for(;Fr.length&&jr.length!==this.#e.batchMaxCount;)if(jr.push(Fr.shift()),JSON.stringify(jr.map(qr=>qr.payload)).length>this.#e.batchMaxSize){Fr.unshift(jr.pop());break}(async()=>{const Ur=jr.length===1?jr[0].payload:jr.map(qr=>qr.payload);this.emit("debug",{action:"sendRpcPayload",payload:Ur});try{const qr=await this._send(Ur);this.emit("debug",{action:"receiveRpcResult",result:qr});for(const{resolve:Hr,reject:Or,payload:Mr}of jr){if(this.destroyed){Or((0,hr.makeError)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:Mr.method}));continue}const Lr=qr.filter(Vr=>Vr.id===Mr.id)[0];if(Lr==null){const Vr=(0,hr.makeError)("missing response for request","BAD_DATA",{value:qr,info:{payload:Mr}});this.emit("error",Vr),Or(Vr);continue}if("error"in Lr){Or(this.getRpcError(Mr,Lr));continue}Hr(Lr.result)}}catch(qr){this.emit("debug",{action:"receiveRpcError",error:qr});for(const{reject:Hr}of jr)Hr(qr)}})()}},Br)}constructor(Br,Fr){super(Br,Fr),this.#t=1,this.#e=Object.assign({},Ar,Fr||{}),this.#r=[],this.#n=null,this.#a=null,this.#i=null;{let Ur=null;const qr=new Promise(Hr=>{Ur=Hr});this.#s={promise:qr,resolve:Ur}}const jr=this._getOption("staticNetwork");typeof jr=="boolean"?((0,hr.assertArgument)(!jr||Br!=="any","staticNetwork cannot be used on special network 'any'","options",Fr),jr&&Br!=null&&(this.#a=gr.Network.from(Br))):jr&&((0,hr.assertArgument)(Br==null||jr.matches(Br),"staticNetwork MUST match network object","options",Fr),this.#a=jr)}_getOption(Br){return this.#e[Br]}get _network(){return(0,hr.assert)(this.#a,"network is not available yet","NETWORK_ERROR"),this.#a}async _perform(Br){if(Br.method==="call"||Br.method==="estimateGas"){let jr=Br.transaction;if(jr&&jr.type!=null&&(0,hr.getBigInt)(jr.type)&&jr.maxFeePerGas==null&&jr.maxPriorityFeePerGas==null){const Ur=await this.getFeeData();Ur.maxFeePerGas==null&&Ur.maxPriorityFeePerGas==null&&(Br=Object.assign({},Br,{transaction:Object.assign({},jr,{type:void 0})}))}}const Fr=this.getRpcRequest(Br);return Fr!=null?await this.send(Fr.method,Fr.args):super._perform(Br)}async _detectNetwork(){const Br=this._getOption("staticNetwork");if(Br)if(Br===!0){if(this.#a)return this.#a}else return Br;return this.#i?await this.#i:this.ready?(this.#i=(async()=>{const Fr=gr.Network.from((0,hr.getBigInt)(await this.send("eth_chainId",[])));return this.#i=null,Fr})(),await this.#i):(this.#i=(async()=>{const Fr={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:Fr});let jr;try{jr=(await this._send(Fr))[0],this.#i=null}catch(Ur){throw this.#i=null,this.emit("debug",{action:"receiveRpcError",error:Ur}),Ur}if(this.emit("debug",{action:"receiveRpcResult",result:jr}),"result"in jr)return gr.Network.from((0,hr.getBigInt)(jr.result));throw this.getRpcError(Fr,jr)})(),await this.#i)}_start(){this.#s==null||this.#s.resolve==null||(this.#s.resolve(),this.#s=null,(async()=>{for(;this.#a==null&&!this.destroyed;)try{this.#a=await this._detectNetwork()}catch(Br){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",(0,hr.makeError)("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:Br}})),await Sr(1e3)}this.#o()})())}async _waitUntilReady(){if(this.#s!=null)return await this.#s.promise}_getSubscriber(Br){return Br.type==="pending"?new yr.FilterIdPendingSubscriber(this):Br.type==="event"?this._getOption("polling")?new xr.PollingEventSubscriber(this,Br.filter):new yr.FilterIdEventSubscriber(this,Br.filter):Br.type==="orphan"&&Br.filter.orphan==="drop-log"?new pr.UnmanagedSubscriber("orphan"):super._getSubscriber(Br)}get ready(){return this.#s==null}getRpcTransaction(Br){const Fr={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(jr=>{if(Br[jr]==null)return;let Ur=jr;jr==="gasLimit"&&(Ur="gas"),Fr[Ur]=(0,hr.toQuantity)((0,hr.getBigInt)(Br[jr],`tx.${jr}`))}),["from","to","data"].forEach(jr=>{Br[jr]!=null&&(Fr[jr]=(0,hr.hexlify)(Br[jr]))}),Br.accessList&&(Fr.accessList=(0,fr.accessListify)(Br.accessList)),Fr}getRpcRequest(Br){switch(Br.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[vr(Br.address),Br.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[vr(Br.address),Br.blockTag]};case"getCode":return{method:"eth_getCode",args:[vr(Br.address),Br.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[vr(Br.address),"0x"+Br.position.toString(16),Br.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[Br.signedTransaction]};case"getBlock":if("blockTag"in Br)return{method:"eth_getBlockByNumber",args:[Br.blockTag,!!Br.includeTransactions]};if("blockHash"in Br)return{method:"eth_getBlockByHash",args:[Br.blockHash,!!Br.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[Br.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[Br.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(Br.transaction),Br.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(Br.transaction)]};case"getLogs":return Br.filter&&Br.filter.address!=null&&(Array.isArray(Br.filter.address)?Br.filter.address=Br.filter.address.map(vr):Br.filter.address=vr(Br.filter.address)),{method:"eth_getLogs",args:[Br.filter]}}return null}getRpcError(Br,Fr){const{method:jr}=Br,{error:Ur}=Fr;if(jr==="eth_estimateGas"&&Ur.message){const Or=Ur.message;if(!Or.match(/revert/i)&&Or.match(/insufficient funds/i))return(0,hr.makeError)("insufficient funds","INSUFFICIENT_FUNDS",{transaction:Br.params[0],info:{payload:Br,error:Ur}})}if(jr==="eth_call"||jr==="eth_estimateGas"){const Or=Ir(Ur),Mr=cr.AbiCoder.getBuiltinCallException(jr==="eth_call"?"call":"estimateGas",Br.params[0],Or?Or.data:null);return Mr.info={error:Ur,payload:Br},Mr}const qr=JSON.stringify(Pr(Ur));if(typeof Ur.message=="string"&&Ur.message.match(/user denied|ethers-user-denied/i)){const Or={eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"};return(0,hr.makeError)("user rejected action","ACTION_REJECTED",{action:Or[jr]||"unknown",reason:"rejected",info:{payload:Br,error:Ur}})}if(jr==="eth_sendRawTransaction"||jr==="eth_sendTransaction"){const Or=Br.params[0];if(qr.match(/insufficient funds|base fee exceeds gas limit/i))return(0,hr.makeError)("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:Or,info:{error:Ur}});if(qr.match(/nonce/i)&&qr.match(/too low/i))return(0,hr.makeError)("nonce has already been used","NONCE_EXPIRED",{transaction:Or,info:{error:Ur}});if(qr.match(/replacement transaction/i)&&qr.match(/underpriced/i))return(0,hr.makeError)("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:Or,info:{error:Ur}});if(qr.match(/only replay-protected/i))return(0,hr.makeError)("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:jr,info:{transaction:Or,info:{error:Ur}}})}let Hr=!!qr.match(/the method .* does not exist/i);return Hr||Ur&&Ur.details&&Ur.details.startsWith("Unauthorized method:")&&(Hr=!0),Hr?(0,hr.makeError)("unsupported operation","UNSUPPORTED_OPERATION",{operation:Br.method,info:{error:Ur,payload:Br}}):(0,hr.makeError)("could not coalesce error","UNKNOWN_ERROR",{error:Ur,payload:Br})}send(Br,Fr){if(this.destroyed)return Promise.reject((0,hr.makeError)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:Br}));const jr=this.#t++,Ur=new Promise((qr,Hr)=>{this.#r.push({resolve:qr,reject:Hr,payload:{method:Br,params:Fr,id:jr,jsonrpc:"2.0"}})});return this.#o(),Ur}async getSigner(Br){Br==null&&(Br=0);const Fr=this.send("eth_accounts",[]);if(typeof Br=="number"){const Ur=await Fr;if(Br>=Ur.length)throw new Error("no such account");return new _r(this,Ur[Br])}const{accounts:jr}=await(0,hr.resolveProperties)({network:this.getNetwork(),accounts:Fr});Br=(0,ar.getAddress)(Br);for(const Ur of jr)if((0,ar.getAddress)(Ur)===Br)return new _r(this,Br);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(Fr=>new _r(this,Fr))}destroy(){this.#n&&(clearTimeout(this.#n),this.#n=null);for(const{payload:Br,reject:Fr}of this.#r)Fr((0,hr.makeError)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:Br.method}));this.#r=[],super.destroy()}}providerJsonrpc.JsonRpcApiProvider=Cr;class kr extends Cr{#e;constructor(Br,Fr){super(Br,Fr),this.#e=4e3}_getSubscriber(Br){const Fr=super._getSubscriber(Br);return Er(Fr)&&(Fr.pollingInterval=this.#e),Fr}get pollingInterval(){return this.#e}set pollingInterval(Br){if(!Number.isInteger(Br)||Br<0)throw new Error("invalid interval");this.#e=Br,this._forEachSubscriber(Fr=>{Er(Fr)&&(Fr.pollingInterval=this.#e)})}}providerJsonrpc.JsonRpcApiPollingProvider=kr;class Rr extends kr{#e;constructor(Br,Fr,jr){Br==null&&(Br="http://localhost:8545"),super(Fr,jr),typeof Br=="string"?this.#e=new hr.FetchRequest(Br):this.#e=Br.clone()}_getConnection(){return this.#e.clone()}async send(Br,Fr){return await this._start(),await super.send(Br,Fr)}async _send(Br){const Fr=this._getConnection();Fr.body=JSON.stringify(Br),Fr.setHeader("content-type","application/json");const jr=await Fr.send();jr.assertOk();let Ur=jr.bodyJson;return Array.isArray(Ur)||(Ur=[Ur]),Ur}}providerJsonrpc.JsonRpcProvider=Rr;function Ir(Tr){if(Tr==null)return null;if(typeof Tr.message=="string"&&Tr.message.match(/revert/i)&&(0,hr.isHexString)(Tr.data))return{message:Tr.message,data:Tr.data};if(typeof Tr=="object"){for(const Br in Tr){const Fr=Ir(Tr[Br]);if(Fr)return Fr}return null}if(typeof Tr=="string")try{return Ir(JSON.parse(Tr))}catch{}return null}function Nr(Tr,Br){if(Tr!=null){if(typeof Tr.message=="string"&&Br.push(Tr.message),typeof Tr=="object")for(const Fr in Tr)Nr(Tr[Fr],Br);if(typeof Tr=="string")try{return Nr(JSON.parse(Tr),Br)}catch{}}}function Pr(Tr){const Br=[];return Nr(Tr,Br),Br}return providerJsonrpc}var hasRequiredProviderAnkr;function requireProviderAnkr(){if(hasRequiredProviderAnkr)return providerAnkr;hasRequiredProviderAnkr=1,Object.defineProperty(providerAnkr,"__esModule",{value:!0}),providerAnkr.AnkrProvider=void 0;const cr=requireUtils$1(),ar=requireCommunity(),dr=requireNetwork(),fr=requireProviderJsonrpc(),hr="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function pr(gr){switch(gr){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"matic":return"rpc.ankr.com/polygon";case"arbitrum":return"rpc.ankr.com/arbitrum"}(0,cr.assertArgument)(!1,"unsupported network","network",gr)}class mr extends fr.JsonRpcProvider{apiKey;constructor(yr,xr){yr==null&&(yr="mainnet");const wr=dr.Network.from(yr);xr==null&&(xr=hr);const br={polling:!0,staticNetwork:wr},Sr=mr.getRequest(wr,xr);super(Sr,wr,br),(0,cr.defineProperties)(this,{apiKey:xr})}_getProvider(yr){try{return new mr(yr,this.apiKey)}catch{}return super._getProvider(yr)}static getRequest(yr,xr){xr==null&&(xr=hr);const wr=new cr.FetchRequest(`https://${pr(yr.name)}/${xr}`);return wr.allowGzip=!0,xr===hr&&(wr.retryFunc=async(br,Sr,vr)=>((0,ar.showThrottleMessage)("AnkrProvider"),!0)),wr}getRpcError(yr,xr){return yr.method==="eth_sendRawTransaction"&&xr&&xr.error&&xr.error.message==="INTERNAL_ERROR: could not replace existing tx"&&(xr.error.message="replacement transaction underpriced"),super.getRpcError(yr,xr)}isCommunityResource(){return this.apiKey===hr}}return providerAnkr.AnkrProvider=mr,providerAnkr}var providerAlchemy={},hasRequiredProviderAlchemy;function requireProviderAlchemy(){if(hasRequiredProviderAlchemy)return providerAlchemy;hasRequiredProviderAlchemy=1,Object.defineProperty(providerAlchemy,"__esModule",{value:!0}),providerAlchemy.AlchemyProvider=void 0;const cr=requireUtils$1(),ar=requireCommunity(),dr=requireNetwork(),fr=requireProviderJsonrpc(),hr="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";function pr(gr){switch(gr){case"mainnet":return"eth-mainnet.alchemyapi.io";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com"}(0,cr.assertArgument)(!1,"unsupported network","network",gr)}class mr extends fr.JsonRpcProvider{apiKey;constructor(yr,xr){yr==null&&(yr="mainnet");const wr=dr.Network.from(yr);xr==null&&(xr=hr);const br=mr.getRequest(wr,xr);super(br,wr,{staticNetwork:wr}),(0,cr.defineProperties)(this,{apiKey:xr})}_getProvider(yr){try{return new mr(yr,this.apiKey)}catch{}return super._getProvider(yr)}async _perform(yr){if(yr.method==="getTransactionResult"){const{trace:xr,tx:wr}=await(0,cr.resolveProperties)({trace:this.send("trace_transaction",[yr.hash]),tx:this.getTransaction(yr.hash)});if(xr==null||wr==null)return null;let br,Sr=!1;try{br=xr[0].result.output,Sr=xr[0].error==="Reverted"}catch{}if(br)return(0,cr.assert)(!Sr,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:br,reason:null,transaction:wr,invocation:null,revert:null}),br;(0,cr.assert)(!1,"could not parse trace result","BAD_DATA",{value:xr})}return await super._perform(yr)}isCommunityResource(){return this.apiKey===hr}static getRequest(yr,xr){xr==null&&(xr=hr);const wr=new cr.FetchRequest(`https://${pr(yr.name)}/v2/${xr}`);return wr.allowGzip=!0,xr===hr&&(wr.retryFunc=async(br,Sr,vr)=>((0,ar.showThrottleMessage)("alchemy"),!0)),wr}}return providerAlchemy.AlchemyProvider=mr,providerAlchemy}var providerCloudflare={},hasRequiredProviderCloudflare;function requireProviderCloudflare(){if(hasRequiredProviderCloudflare)return providerCloudflare;hasRequiredProviderCloudflare=1,Object.defineProperty(providerCloudflare,"__esModule",{value:!0}),providerCloudflare.CloudflareProvider=void 0;const cr=requireUtils$1(),ar=requireNetwork(),dr=requireProviderJsonrpc();class fr extends dr.JsonRpcProvider{constructor(pr){pr==null&&(pr="mainnet");const mr=ar.Network.from(pr);(0,cr.assertArgument)(mr.name==="mainnet","unsupported network","network",pr),super("https://cloudflare-eth.com/",mr,{staticNetwork:mr})}}return providerCloudflare.CloudflareProvider=fr,providerCloudflare}var providerEtherscan={},hasRequiredProviderEtherscan;function requireProviderEtherscan(){if(hasRequiredProviderEtherscan)return providerEtherscan;hasRequiredProviderEtherscan=1,Object.defineProperty(providerEtherscan,"__esModule",{value:!0}),providerEtherscan.EtherscanProvider=providerEtherscan.EtherscanPlugin=void 0;const cr=requireAbi(),ar=requireContract(),dr=requireTransaction(),fr=requireUtils$1(),hr=requireAbstractProvider(),pr=requireNetwork(),mr=requirePluginsNetwork(),gr=requireCommunity(),yr=2e3;function xr(Ar){return Ar&&typeof Ar.then=="function"}const wr="org.ethers.plugins.provider.Etherscan";class br extends mr.NetworkPlugin{baseUrl;constructor(_r){super(wr),(0,fr.defineProperties)(this,{baseUrl:_r})}clone(){return new br(this.baseUrl)}}providerEtherscan.EtherscanPlugin=br;const Sr=["enableCcipRead"];let vr=1;class Er extends hr.AbstractProvider{network;apiKey;#e;constructor(_r,Cr){const kr=Cr??null;super();const Rr=pr.Network.from(_r);this.#e=Rr.getPlugin(wr),(0,fr.defineProperties)(this,{apiKey:kr,network:Rr}),this.getBaseUrl()}getBaseUrl(){if(this.#e)return this.#e.baseUrl;switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"matic":return"https://api.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io";case"bnb":return"http://api.bscscan.com";case"bnbt":return"http://api-testnet.bscscan.com"}(0,fr.assertArgument)(!1,"unsupported network","network",this.network)}getUrl(_r,Cr){const kr=Object.keys(Cr).reduce((Ir,Nr)=>{const Pr=Cr[Nr];return Pr!=null&&(Ir+=`&${Nr}=${Pr}`),Ir},""),Rr=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.getBaseUrl()}/api?module=${_r}${kr}${Rr}`}getPostUrl(){return`${this.getBaseUrl()}/api`}getPostData(_r,Cr){return Cr.module=_r,Cr.apikey=this.apiKey,Cr}async detectNetwork(){return this.network}async fetch(_r,Cr,kr){const Rr=vr++,Ir=kr?this.getPostUrl():this.getUrl(_r,Cr),Nr=kr?this.getPostData(_r,Cr):null;this.emit("debug",{action:"sendRequest",id:Rr,url:Ir,payload:Nr});const Pr=new fr.FetchRequest(Ir);Pr.setThrottleParams({slotInterval:1e3}),Pr.retryFunc=(Fr,jr,Ur)=>(this.isCommunityResource()&&(0,gr.showThrottleMessage)("Etherscan"),Promise.resolve(!0)),Pr.processFunc=async(Fr,jr)=>{const Ur=jr.hasBody()?JSON.parse((0,fr.toUtf8String)(jr.body)):{},qr=(typeof Ur.result=="string"?Ur.result:"").toLowerCase().indexOf("rate limit")>=0;return _r==="proxy"?Ur&&Ur.status==0&&Ur.message=="NOTOK"&&qr&&(this.emit("debug",{action:"receiveError",id:Rr,reason:"proxy-NOTOK",error:Ur}),jr.throwThrottleError(Ur.result,yr)):qr&&(this.emit("debug",{action:"receiveError",id:Rr,reason:"null result",error:Ur.result}),jr.throwThrottleError(Ur.result,yr)),jr},Nr&&(Pr.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8"),Pr.body=Object.keys(Nr).map(Fr=>`${Fr}=${Nr[Fr]}`).join("&"));const Tr=await Pr.send();try{Tr.assertOk()}catch(Fr){this.emit("debug",{action:"receiveError",id:Rr,error:Fr,reason:"assertOk"}),(0,fr.assert)(!1,"response error","SERVER_ERROR",{request:Pr,response:Tr})}Tr.hasBody()||(this.emit("debug",{action:"receiveError",id:Rr,error:"missing body",reason:"null body"}),(0,fr.assert)(!1,"missing response","SERVER_ERROR",{request:Pr,response:Tr}));const Br=JSON.parse((0,fr.toUtf8String)(Tr.body));return _r==="proxy"?(Br.jsonrpc!="2.0"&&(this.emit("debug",{action:"receiveError",id:Rr,result:Br,reason:"invalid JSON-RPC"}),(0,fr.assert)(!1,"invalid JSON-RPC response (missing jsonrpc='2.0')","SERVER_ERROR",{request:Pr,response:Tr,info:{result:Br}})),Br.error&&(this.emit("debug",{action:"receiveError",id:Rr,result:Br,reason:"JSON-RPC error"}),(0,fr.assert)(!1,"error response","SERVER_ERROR",{request:Pr,response:Tr,info:{result:Br}})),this.emit("debug",{action:"receiveRequest",id:Rr,result:Br}),Br.result):Br.status==0&&(Br.message==="No records found"||Br.message==="No transactions found")?(this.emit("debug",{action:"receiveRequest",id:Rr,result:Br}),Br.result):((Br.status!=1||typeof Br.message=="string"&&!Br.message.match(/^OK/))&&(this.emit("debug",{action:"receiveError",id:Rr,result:Br}),(0,fr.assert)(!1,"error response","SERVER_ERROR",{request:Pr,response:Tr,info:{result:Br}})),this.emit("debug",{action:"receiveRequest",id:Rr,result:Br}),Br.result)}_getTransactionPostData(_r){const Cr={};for(let kr in _r){if(Sr.indexOf(kr)>=0||_r[kr]==null)continue;let Rr=_r[kr];kr==="type"&&Rr===0||kr==="blockTag"&&Rr==="latest"||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[kr]?Rr=(0,fr.toQuantity)(Rr):kr==="accessList"?Rr="["+(0,dr.accessListify)(Rr).map(Ir=>`{address:"${Ir.address}",storageKeys:["${Ir.storageKeys.join('","')}"]}`).join(",")+"]":Rr=(0,fr.hexlify)(Rr),Cr[kr]=Rr)}return Cr}_checkError(_r,Cr,kr){let Rr="";if((0,fr.isError)(Cr,"SERVER_ERROR")){try{Rr=Cr.info.result.error.message}catch{}if(!Rr)try{Rr=Cr.info.message}catch{}}if(_r.method==="estimateGas"&&!Rr.match(/revert/i)&&Rr.match(/insufficient funds/i)&&(0,fr.assert)(!1,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:_r.transaction}),(_r.method==="call"||_r.method==="estimateGas")&&Rr.match(/execution reverted/i)){let Ir="";try{Ir=Cr.info.result.error.data}catch{}const Nr=cr.AbiCoder.getBuiltinCallException(_r.method,_r.transaction,Ir);throw Nr.info={request:_r,error:Cr},Nr}if(Rr&&_r.method==="broadcastTransaction"){const Ir=dr.Transaction.from(_r.signedTransaction);Rr.match(/replacement/i)&&Rr.match(/underpriced/i)&&(0,fr.assert)(!1,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:Ir}),Rr.match(/insufficient funds/)&&(0,fr.assert)(!1,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:Ir}),Rr.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&(0,fr.assert)(!1,"nonce has already been used","NONCE_EXPIRED",{transaction:Ir})}throw Cr}async _detectNetwork(){return this.network}async _perform(_r){switch(_r.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if(this.network.name==="mainnet")return"1000000000";if(this.network.name==="optimism")return"1000000";throw new Error("fallback onto the AbstractProvider default");case"getBalance":return this.fetch("account",{action:"balance",address:_r.address,tag:_r.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:_r.address,tag:_r.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:_r.address,tag:_r.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:_r.address,position:_r.position,tag:_r.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:_r.signedTransaction},!0).catch(Cr=>this._checkError(_r,Cr,_r.signedTransaction));case"getBlock":if("blockTag"in _r)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:_r.blockTag,boolean:_r.includeTransactions?"true":"false"});(0,fr.assert)(!1,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:_r.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:_r.hash});case"call":{if(_r.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const Cr=this._getTransactionPostData(_r.transaction);Cr.module="proxy",Cr.action="eth_call";try{return await this.fetch("proxy",Cr,!0)}catch(kr){return this._checkError(_r,kr,_r.transaction)}}case"estimateGas":{const Cr=this._getTransactionPostData(_r.transaction);Cr.module="proxy",Cr.action="eth_estimateGas";try{return await this.fetch("proxy",Cr,!0)}catch(kr){return this._checkError(_r,kr,_r.transaction)}}}return super._perform(_r)}async getNetwork(){return this.network}async getEtherPrice(){return this.network.name!=="mainnet"?0:parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract(_r){let Cr=this._getAddress(_r);xr(Cr)&&(Cr=await Cr);try{const kr=await this.fetch("contract",{action:"getabi",address:Cr}),Rr=JSON.parse(kr);return new ar.Contract(Cr,Rr,this)}catch{return null}}isCommunityResource(){return this.apiKey==null}}return providerEtherscan.EtherscanProvider=Er,providerEtherscan}var providerInfura={},providerWebsocket={},wsBrowser={},hasRequiredWsBrowser;function requireWsBrowser(){if(hasRequiredWsBrowser)return wsBrowser;hasRequiredWsBrowser=1,Object.defineProperty(wsBrowser,"__esModule",{value:!0}),wsBrowser.WebSocket=void 0;function cr(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate globalThis object")}const ar=cr().WebSocket;return wsBrowser.WebSocket=ar,wsBrowser}var providerSocket={},hasRequiredProviderSocket;function requireProviderSocket(){if(hasRequiredProviderSocket)return providerSocket;hasRequiredProviderSocket=1,Object.defineProperty(providerSocket,"__esModule",{value:!0}),providerSocket.SocketProvider=providerSocket.SocketEventSubscriber=providerSocket.SocketPendingSubscriber=providerSocket.SocketBlockSubscriber=providerSocket.SocketSubscriber=void 0;const cr=requireAbstractProvider(),ar=requireUtils$1(),dr=requireProviderJsonrpc();class fr{#e;#t;get filter(){return JSON.parse(this.#t)}#r;#n;#s;constructor(xr,wr){this.#e=xr,this.#t=JSON.stringify(wr),this.#r=null,this.#n=null,this.#s=null}start(){this.#r=this.#e.send("eth_subscribe",this.filter).then(xr=>(this.#e._register(xr,this),xr))}stop(){this.#r.then(xr=>{this.#e.send("eth_unsubscribe",[xr])}),this.#r=null}pause(xr){(0,ar.assert)(xr,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),this.#n=!!xr}resume(){this.#n=null}_handleMessage(xr){if(this.#r!=null&&this.#n===null){let wr=this.#s;wr==null?wr=this._emit(this.#e,xr):wr=wr.then(async()=>{await this._emit(this.#e,xr)}),this.#s=wr.then(()=>{this.#s===wr&&(this.#s=null)})}}async _emit(xr,wr){throw new Error("sub-classes must implemente this; _emit")}}providerSocket.SocketSubscriber=fr;class hr extends fr{constructor(xr){super(xr,["newHeads"])}async _emit(xr,wr){xr.emit("block",parseInt(wr.number))}}providerSocket.SocketBlockSubscriber=hr;class pr extends fr{constructor(xr){super(xr,["newPendingTransactions"])}async _emit(xr,wr){xr.emit("pending",wr)}}providerSocket.SocketPendingSubscriber=pr;class mr extends fr{#e;get logFilter(){return JSON.parse(this.#e)}constructor(xr,wr){super(xr,["logs",wr]),this.#e=JSON.stringify(wr)}async _emit(xr,wr){xr.emit(this.logFilter,xr._wrapLog(wr,xr._network))}}providerSocket.SocketEventSubscriber=mr;class gr extends dr.JsonRpcApiProvider{#e;#t;#r;constructor(xr,wr){const br=Object.assign({},wr??{});(0,ar.assertArgument)(br.batchMaxCount==null||br.batchMaxCount===1,"sockets-based providers do not support batches","options.batchMaxCount",wr),br.batchMaxCount=1,br.staticNetwork==null&&(br.staticNetwork=!0),super(xr,br),this.#e=new Map,this.#t=new Map,this.#r=new Map}_getSubscriber(xr){switch(xr.type){case"close":return new cr.UnmanagedSubscriber("close");case"block":return new hr(this);case"pending":return new pr(this);case"event":return new mr(this,xr.filter);case"orphan":if(xr.filter.orphan==="drop-log")return new cr.UnmanagedSubscriber("drop-log")}return super._getSubscriber(xr)}_register(xr,wr){this.#t.set(xr,wr);const br=this.#r.get(xr);if(br){for(const Sr of br)wr._handleMessage(Sr);this.#r.delete(xr)}}async _send(xr){(0,ar.assertArgument)(!Array.isArray(xr),"WebSocket does not support batch send","payload",xr);const wr=new Promise((br,Sr)=>{this.#e.set(xr.id,{payload:xr,resolve:br,reject:Sr})});return await this._waitUntilReady(),await this._write(JSON.stringify(xr)),[await wr]}async _processMessage(xr){const wr=JSON.parse(xr);if(wr&&typeof wr=="object"&&"id"in wr){const br=this.#e.get(wr.id);if(br==null){this.emit("error",(0,ar.makeError)("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:wr}));return}this.#e.delete(wr.id),br.resolve(wr)}else if(wr&&wr.method==="eth_subscription"){const br=wr.params.subscription,Sr=this.#t.get(br);if(Sr)Sr._handleMessage(wr.params.result);else{let vr=this.#r.get(br);vr==null&&(vr=[],this.#r.set(br,vr)),vr.push(wr.params.result)}}else{this.emit("error",(0,ar.makeError)("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:wr}));return}}async _write(xr){throw new Error("sub-classes must override this")}}return providerSocket.SocketProvider=gr,providerSocket}var hasRequiredProviderWebsocket;function requireProviderWebsocket(){if(hasRequiredProviderWebsocket)return providerWebsocket;hasRequiredProviderWebsocket=1,Object.defineProperty(providerWebsocket,"__esModule",{value:!0}),providerWebsocket.WebSocketProvider=void 0;const cr=requireWsBrowser(),ar=requireProviderSocket();class dr extends ar.SocketProvider{#e;#t;get websocket(){if(this.#t==null)throw new Error("websocket closed");return this.#t}constructor(hr,pr,mr){super(pr,mr),typeof hr=="string"?(this.#e=()=>new cr.WebSocket(hr),this.#t=this.#e()):typeof hr=="function"?(this.#e=hr,this.#t=hr()):(this.#e=null,this.#t=hr),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(gr){console.log("failed to start WebsocketProvider",gr)}},this.websocket.onmessage=gr=>{this._processMessage(gr.data)}}async _write(hr){this.websocket.send(hr)}async destroy(){this.#t!=null&&(this.#t.close(),this.#t=null),super.destroy()}}return providerWebsocket.WebSocketProvider=dr,providerWebsocket}var hasRequiredProviderInfura;function requireProviderInfura(){if(hasRequiredProviderInfura)return providerInfura;hasRequiredProviderInfura=1,Object.defineProperty(providerInfura,"__esModule",{value:!0}),providerInfura.InfuraProvider=providerInfura.InfuraWebSocketProvider=void 0;const cr=requireUtils$1(),ar=requireCommunity(),dr=requireNetwork(),fr=requireProviderJsonrpc(),hr=requireProviderWebsocket(),pr="84842078b09946638c03157f83405213";function mr(xr){switch(xr){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io"}(0,cr.assertArgument)(!1,"unsupported network","network",xr)}class gr extends hr.WebSocketProvider{projectId;projectSecret;constructor(wr,br){const Sr=new yr(wr,br),vr=Sr._getConnection();(0,cr.assert)(!vr.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});const Er=vr.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(Er,wr),(0,cr.defineProperties)(this,{projectId:Sr.projectId,projectSecret:Sr.projectSecret})}isCommunityResource(){return this.projectId===pr}}providerInfura.InfuraWebSocketProvider=gr;class yr extends fr.JsonRpcProvider{projectId;projectSecret;constructor(wr,br,Sr){wr==null&&(wr="mainnet");const vr=dr.Network.from(wr);br==null&&(br=pr),Sr==null&&(Sr=null);const Er=yr.getRequest(vr,br,Sr);super(Er,vr,{staticNetwork:vr}),(0,cr.defineProperties)(this,{projectId:br,projectSecret:Sr})}_getProvider(wr){try{return new yr(wr,this.projectId,this.projectSecret)}catch{}return super._getProvider(wr)}isCommunityResource(){return this.projectId===pr}static getWebSocketProvider(wr,br){return new gr(wr,br)}static getRequest(wr,br,Sr){br==null&&(br=pr),Sr==null&&(Sr=null);const vr=new cr.FetchRequest(`https://${mr(wr.name)}/v3/${br}`);return vr.allowGzip=!0,Sr&&vr.setCredentials("",Sr),br===pr&&(vr.retryFunc=async(Er,Ar,_r)=>((0,ar.showThrottleMessage)("InfuraProvider"),!0)),vr}}return providerInfura.InfuraProvider=yr,providerInfura}var providerQuicknode={},hasRequiredProviderQuicknode;function requireProviderQuicknode(){if(hasRequiredProviderQuicknode)return providerQuicknode;hasRequiredProviderQuicknode=1,Object.defineProperty(providerQuicknode,"__esModule",{value:!0}),providerQuicknode.QuickNodeProvider=void 0;const cr=requireUtils$1(),ar=requireCommunity(),dr=requireNetwork(),fr=requireProviderJsonrpc(),hr="919b412a057b5e9c9b6dce193c5a60242d6efadb";function pr(gr){switch(gr){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro"}(0,cr.assertArgument)(!1,"unsupported network","network",gr)}class mr extends fr.JsonRpcProvider{token;constructor(yr,xr){yr==null&&(yr="mainnet");const wr=dr.Network.from(yr);xr==null&&(xr=hr);const br=mr.getRequest(wr,xr);super(br,wr,{staticNetwork:wr}),(0,cr.defineProperties)(this,{token:xr})}_getProvider(yr){try{return new mr(yr,this.token)}catch{}return super._getProvider(yr)}isCommunityResource(){return this.token===hr}static getRequest(yr,xr){xr==null&&(xr=hr);const wr=new cr.FetchRequest(`https://${pr(yr.name)}/${xr}`);return wr.allowGzip=!0,xr===hr&&(wr.retryFunc=async(br,Sr,vr)=>((0,ar.showThrottleMessage)("QuickNodeProvider"),!0)),wr}}return providerQuicknode.QuickNodeProvider=mr,providerQuicknode}var providerFallback={},hasRequiredProviderFallback;function requireProviderFallback(){if(hasRequiredProviderFallback)return providerFallback;hasRequiredProviderFallback=1,Object.defineProperty(providerFallback,"__esModule",{value:!0}),providerFallback.FallbackProvider=void 0;const cr=requireUtils$1(),ar=requireAbstractProvider(),dr=requireNetwork(),fr=BigInt("1"),hr=BigInt("2");function pr(Rr){for(let Ir=Rr.length-1;Ir>0;Ir--){const Nr=Math.floor(Math.random()*(Ir+1)),Pr=Rr[Ir];Rr[Ir]=Rr[Nr],Rr[Nr]=Pr}}function mr(Rr){return new Promise(Ir=>{setTimeout(Ir,Rr)})}function gr(){return new Date().getTime()}function yr(Rr){return JSON.stringify(Rr,(Ir,Nr)=>typeof Nr=="bigint"?{type:"bigint",value:Nr.toString()}:Nr)}const xr={stallTimeout:400,priority:1,weight:1},wr={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};async function br(Rr,Ir){for(;(Rr.blockNumber<0||Rr.blockNumber<Ir)&&(Rr._updateNumber||(Rr._updateNumber=(async()=>{try{const Nr=await Rr.provider.getBlockNumber();Nr>Rr.blockNumber&&(Rr.blockNumber=Nr)}catch(Nr){Rr.blockNumber=-2,Rr._lastFatalError=Nr,Rr._lastFatalErrorTimestamp=gr()}Rr._updateNumber=null})()),await Rr._updateNumber,Rr.outOfSync++,!Rr._lastFatalError););}function Sr(Rr){if(Rr==null)return"null";if(Array.isArray(Rr))return"["+Rr.map(Sr).join(",")+"]";if(typeof Rr=="object"&&typeof Rr.toJSON=="function")return Sr(Rr.toJSON());switch(typeof Rr){case"boolean":case"symbol":return Rr.toString();case"bigint":case"number":return BigInt(Rr).toString();case"string":return JSON.stringify(Rr);case"object":{const Ir=Object.keys(Rr);return Ir.sort(),"{"+Ir.map(Nr=>`${JSON.stringify(Nr)}:${Sr(Rr[Nr])}`).join(",")+"}"}}throw console.log("Could not serialize",Rr),new Error("Hmm...")}function vr(Rr){if("error"in Rr){const Nr=Rr.error;return{tag:Sr(Nr),value:Nr}}const Ir=Rr.result;return{tag:Sr(Ir),value:Ir}}function Er(Rr,Ir){const Nr=new Map;for(const{value:Tr,tag:Br,weight:Fr}of Ir){const jr=Nr.get(Br)||{value:Tr,weight:0};jr.weight+=Fr,Nr.set(Br,jr)}let Pr=null;for(const Tr of Nr.values())Tr.weight>=Rr&&(!Pr||Tr.weight>Pr.weight)&&(Pr=Tr);if(Pr)return Pr.value}function Ar(Rr,Ir){let Nr=0;const Pr=new Map;let Tr=null;const Br=[];for(const{value:jr,tag:Ur,weight:qr}of Ir)if(jr instanceof Error){const Hr=Pr.get(Ur)||{value:jr,weight:0};Hr.weight+=qr,Pr.set(Ur,Hr),(Tr==null||Hr.weight>Tr.weight)&&(Tr=Hr)}else Br.push(BigInt(jr)),Nr+=qr;if(Nr<Rr)return Tr&&Tr.weight>=Rr?Tr.value:void 0;Br.sort((jr,Ur)=>jr<Ur?-1:Ur>jr?1:0);const Fr=Math.floor(Br.length/2);return Br.length%2?Br[Fr]:(Br[Fr-1]+Br[Fr]+fr)/hr}function _r(Rr,Ir){const Nr=Er(Rr,Ir);if(Nr!==void 0)return Nr;for(const Pr of Ir)if(Pr.value)return Pr.value}function Cr(Rr,Ir){if(Rr===1)return(0,cr.getNumber)(Ar(Rr,Ir),"%internal");const Nr=new Map,Pr=(Fr,jr)=>{const Ur=Nr.get(Fr)||{result:Fr,weight:0};Ur.weight+=jr,Nr.set(Fr,Ur)};for(const{weight:Fr,value:jr}of Ir){const Ur=(0,cr.getNumber)(jr);Pr(Ur-1,Fr),Pr(Ur,Fr),Pr(Ur+1,Fr)}let Tr=0,Br;for(const{weight:Fr,result:jr}of Nr.values())Fr>=Rr&&(Fr>Tr||Br!=null&&Fr===Tr&&jr>Br)&&(Tr=Fr,Br=jr);return Br}class kr extends ar.AbstractProvider{quorum;eventQuorum;eventWorkers;#e;#t;#r;constructor(Ir,Nr,Pr){super(Nr,Pr),this.#e=Ir.map(Tr=>Tr instanceof ar.AbstractProvider?Object.assign({provider:Tr},xr,wr):Object.assign({},xr,Tr,wr)),this.#t=-2,this.#r=null,Pr&&Pr.quorum!=null?this.quorum=Pr.quorum:this.quorum=Math.ceil(this.#e.reduce((Tr,Br)=>(Tr+=Br.weight,Tr),0)/2),this.eventQuorum=1,this.eventWorkers=1,(0,cr.assertArgument)(this.quorum<=this.#e.reduce((Tr,Br)=>Tr+Br.weight,0),"quorum exceed provider wieght","quorum",this.quorum)}get providerConfigs(){return this.#e.map(Ir=>{const Nr=Object.assign({},Ir);for(const Pr in Nr)Pr[0]==="_"&&delete Nr[Pr];return Nr})}async _detectNetwork(){return dr.Network.from((0,cr.getBigInt)(await this._perform({method:"chainId"})))}async _translatePerform(Ir,Nr){switch(Nr.method){case"broadcastTransaction":return await Ir.broadcastTransaction(Nr.signedTransaction);case"call":return await Ir.call(Object.assign({},Nr.transaction,{blockTag:Nr.blockTag}));case"chainId":return(await Ir.getNetwork()).chainId;case"estimateGas":return await Ir.estimateGas(Nr.transaction);case"getBalance":return await Ir.getBalance(Nr.address,Nr.blockTag);case"getBlock":{const Pr="blockHash"in Nr?Nr.blockHash:Nr.blockTag;return await Ir.getBlock(Pr,Nr.includeTransactions)}case"getBlockNumber":return await Ir.getBlockNumber();case"getCode":return await Ir.getCode(Nr.address,Nr.blockTag);case"getGasPrice":return(await Ir.getFeeData()).gasPrice;case"getPriorityFee":return(await Ir.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await Ir.getLogs(Nr.filter);case"getStorage":return await Ir.getStorage(Nr.address,Nr.position,Nr.blockTag);case"getTransaction":return await Ir.getTransaction(Nr.hash);case"getTransactionCount":return await Ir.getTransactionCount(Nr.address,Nr.blockTag);case"getTransactionReceipt":return await Ir.getTransactionReceipt(Nr.hash);case"getTransactionResult":return await Ir.getTransactionResult(Nr.hash)}}#n(Ir){const Nr=Array.from(Ir).map(Tr=>Tr.config),Pr=this.#e.slice();pr(Pr),Pr.sort((Tr,Br)=>Tr.priority-Br.priority);for(const Tr of Pr)if(!Tr._lastFatalError&&Nr.indexOf(Tr)===-1)return Tr;return null}#s(Ir,Nr){const Pr=this.#n(Ir);if(Pr==null)return null;const Tr={config:Pr,result:null,didBump:!1,perform:null,staller:null},Br=gr();return Tr.perform=(async()=>{try{Pr.requests++;const jr=await this._translatePerform(Pr.provider,Nr);Tr.result={result:jr}}catch(jr){Pr.errorResponses++,Tr.result={error:jr}}const Fr=gr()-Br;Pr._totalTime+=Fr,Pr.rollingDuration=.95*Pr.rollingDuration+.05*Fr,Tr.perform=null})(),Tr.staller=(async()=>{await mr(Pr.stallTimeout),Tr.staller=null})(),Ir.add(Tr),Tr}async#a(){let Ir=this.#r;if(!Ir){const Nr=[];this.#e.forEach(Pr=>{Nr.push((async()=>{await br(Pr,0),Pr._lastFatalError||(Pr._network=await Pr.provider.getNetwork())})())}),this.#r=Ir=(async()=>{await Promise.all(Nr);let Pr=null;for(const Tr of this.#e){if(Tr._lastFatalError)continue;const Br=Tr._network;Pr==null?Pr=Br.chainId:Br.chainId!==Pr&&(0,cr.assert)(!1,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}})()}await Ir}async#i(Ir,Nr){const Pr=[];for(const Tr of Ir)if(Tr.result!=null){const{tag:Br,value:Fr}=vr(Tr.result);Pr.push({tag:Br,value:Fr,weight:Tr.config.weight})}if(!(Pr.reduce((Tr,Br)=>Tr+Br.weight,0)<this.quorum)){switch(Nr.method){case"getBlockNumber":{this.#t===-2&&(this.#t=Math.ceil((0,cr.getNumber)(Ar(this.quorum,this.#e.filter(Br=>!Br._lastFatalError).map(Br=>({value:Br.blockNumber,tag:(0,cr.getNumber)(Br.blockNumber).toString(),weight:Br.weight}))))));const Tr=Cr(this.quorum,Pr);return Tr===void 0?void 0:(Tr>this.#t&&(this.#t=Tr),this.#t)}case"getGasPrice":case"getPriorityFee":case"estimateGas":return Ar(this.quorum,Pr);case"getBlock":return"blockTag"in Nr&&Nr.blockTag==="pending"?_r(this.quorum,Pr):Er(this.quorum,Pr);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return Er(this.quorum,Pr);case"broadcastTransaction":return _r(this.quorum,Pr)}(0,cr.assert)(!1,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${yr(Nr.method)})`})}}async#o(Ir,Nr){if(Ir.size===0)throw new Error("no runners?!");const Pr=[];let Tr=0;for(const Fr of Ir){if(Fr.perform&&Pr.push(Fr.perform),Fr.staller){Pr.push(Fr.staller);continue}Fr.didBump||(Fr.didBump=!0,Tr++)}const Br=await this.#i(Ir,Nr);if(Br!==void 0){if(Br instanceof Error)throw Br;return Br}for(let Fr=0;Fr<Tr;Fr++)this.#s(Ir,Nr);return(0,cr.assert)(Pr.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:Nr,results:Array.from(Ir).map(Fr=>yr(Fr.result))}}),await Promise.race(Pr),await this.#o(Ir,Nr)}async _perform(Ir){if(Ir.method==="broadcastTransaction"){const Br=this.#e.map(Ur=>null),Fr=this.#e.map(async({provider:Ur,weight:qr},Hr)=>{try{const Or=await Ur._perform(Ir);Br[Hr]=Object.assign(vr({result:Or}),{weight:qr})}catch(Or){Br[Hr]=Object.assign(vr({error:Or}),{weight:qr})}});for(;;){const Ur=Br.filter(Or=>Or!=null);for(const{value:Or}of Ur)if(!(Or instanceof Error))return Or;const qr=Er(this.quorum,Br.filter(Or=>Or!=null));if((0,cr.isError)(qr,"INSUFFICIENT_FUNDS"))throw qr;const Hr=Fr.filter((Or,Mr)=>Br[Mr]==null);if(Hr.length===0)break;await Promise.race(Hr)}const jr=_r(this.quorum,Br);if((0,cr.assert)(jr!==void 0,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:Ir,results:Br.map(yr)}}),jr instanceof Error)throw jr;return jr}await this.#a();const Nr=new Set;let Pr=0;for(;;){const Br=this.#s(Nr,Ir);if(Br==null||(Pr+=Br.config.weight,Pr>=this.quorum))break}const Tr=await this.#o(Nr,Ir);for(const Br of Nr)Br.perform&&Br.result==null&&Br.config.lateResponses++;return Tr}async destroy(){for(const{provider:Ir}of this.#e)Ir.destroy();super.destroy()}}return providerFallback.FallbackProvider=kr,providerFallback}var hasRequiredDefaultProvider;function requireDefaultProvider(){if(hasRequiredDefaultProvider)return defaultProvider;hasRequiredDefaultProvider=1,Object.defineProperty(defaultProvider,"__esModule",{value:!0}),defaultProvider.getDefaultProvider=void 0;const cr=requireUtils$1(),ar=requireProviderAnkr(),dr=requireProviderAlchemy(),fr=requireProviderCloudflare(),hr=requireProviderEtherscan(),pr=requireProviderInfura(),mr=requireProviderQuicknode(),gr=requireProviderFallback(),yr=requireProviderJsonrpc(),xr=requireNetwork(),wr=requireProviderWebsocket();function br(Er){return Er&&typeof Er.send=="function"&&typeof Er.close=="function"}const Sr="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ");function vr(Er,Ar){Ar==null&&(Ar={});const _r=Ir=>Ar[Ir]==="-"?!1:typeof Ar.exclusive=="string"?Ir===Ar.exclusive:Array.isArray(Ar.exclusive)?Ar.exclusive.indexOf(Ir)!==-1:!0;if(typeof Er=="string"&&Er.match(/^https?:/))return new yr.JsonRpcProvider(Er);if(typeof Er=="string"&&Er.match(/^wss?:/)||br(Er))return new wr.WebSocketProvider(Er);let Cr=null;try{Cr=xr.Network.from(Er)}catch{}const kr=[];if(_r("publicPolygon")&&Cr&&Cr.name==="matic"&&kr.push(new yr.JsonRpcProvider("https://polygon-rpc.com/",Cr,{staticNetwork:Cr})),_r("alchemy"))try{kr.push(new dr.AlchemyProvider(Er,Ar.alchemy))}catch{}if(_r("ankr")&&Ar.ankr!=null)try{kr.push(new ar.AnkrProvider(Er,Ar.ankr))}catch{}if(_r("cloudflare"))try{kr.push(new fr.CloudflareProvider(Er))}catch{}if(_r("etherscan"))try{kr.push(new hr.EtherscanProvider(Er,Ar.etherscan))}catch{}if(_r("infura"))try{let Ir=Ar.infura,Nr;typeof Ir=="object"&&(Nr=Ir.projectSecret,Ir=Ir.projectId),kr.push(new pr.InfuraProvider(Er,Ir,Nr))}catch{}if(_r("quicknode"))try{let Ir=Ar.quicknode;kr.push(new mr.QuickNodeProvider(Er,Ir))}catch{}if((0,cr.assert)(kr.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"}),kr.length===1)return kr[0];let Rr=Math.floor(kr.length/2);return Rr>2&&(Rr=2),Cr&&Sr.indexOf(Cr.name)!==-1&&(Rr=1),Ar&&Ar.quorum&&(Rr=Ar.quorum),new gr.FallbackProvider(kr,void 0,{quorum:Rr})}return defaultProvider.getDefaultProvider=vr,defaultProvider}var signerNoncemanager={},hasRequiredSignerNoncemanager;function requireSignerNoncemanager(){if(hasRequiredSignerNoncemanager)return signerNoncemanager;hasRequiredSignerNoncemanager=1,Object.defineProperty(signerNoncemanager,"__esModule",{value:!0}),signerNoncemanager.NonceManager=void 0;const cr=requireUtils$1(),ar=requireAbstractSigner();class dr extends ar.AbstractSigner{signer;#e;#t;constructor(hr){super(hr.provider),(0,cr.defineProperties)(this,{signer:hr}),this.#e=null,this.#t=0}async getAddress(){return this.signer.getAddress()}connect(hr){return new dr(this.signer.connect(hr))}async getNonce(hr){if(hr==="pending"){this.#e==null&&(this.#e=super.getNonce("pending"));const pr=this.#t;return await this.#e+pr}return super.getNonce(hr)}increment(){this.#t++}reset(){this.#t=0,this.#e=null}async sendTransaction(hr){const pr=this.getNonce("pending");return this.increment(),hr=await this.signer.populateTransaction(hr),hr.nonce=await pr,await this.signer.sendTransaction(hr)}signTransaction(hr){return this.signer.signTransaction(hr)}signMessage(hr){return this.signer.signMessage(hr)}signTypedData(hr,pr,mr){return this.signer.signTypedData(hr,pr,mr)}}return signerNoncemanager.NonceManager=dr,signerNoncemanager}var providerBrowser={},hasRequiredProviderBrowser;function requireProviderBrowser(){if(hasRequiredProviderBrowser)return providerBrowser;hasRequiredProviderBrowser=1,Object.defineProperty(providerBrowser,"__esModule",{value:!0}),providerBrowser.BrowserProvider=void 0;const cr=requireUtils$1(),ar=requireProviderJsonrpc();class dr extends ar.JsonRpcApiPollingProvider{#e;constructor(hr,pr){super(pr,{batchMaxCount:1}),this.#e=async(mr,gr)=>{const yr={method:mr,params:gr};this.emit("debug",{action:"sendEip1193Request",payload:yr});try{const xr=await hr.request(yr);return this.emit("debug",{action:"receiveEip1193Result",result:xr}),xr}catch(xr){const wr=new Error(xr.message);throw wr.code=xr.code,wr.data=xr.data,wr.payload=yr,this.emit("debug",{action:"receiveEip1193Error",error:wr}),wr}}}async send(hr,pr){return await this._start(),await super.send(hr,pr)}async _send(hr){(0,cr.assertArgument)(!Array.isArray(hr),"EIP-1193 does not support batch request","payload",hr);try{const pr=await this.#e(hr.method,hr.params||[]);return[{id:hr.id,result:pr}]}catch(pr){return[{id:hr.id,error:{code:pr.code,data:pr.data,message:pr.message}}]}}getRpcError(hr,pr){switch(pr=JSON.parse(JSON.stringify(pr)),pr.error.code||-1){case 4001:pr.error.message=`ethers-user-denied: ${pr.error.message}`;break;case 4200:pr.error.message=`ethers-unsupported: ${pr.error.message}`;break}return super.getRpcError(hr,pr)}async hasSigner(hr){hr==null&&(hr=0);const pr=await this.send("eth_accounts",[]);return typeof hr=="number"?pr.length>hr:(hr=hr.toLowerCase(),pr.filter(mr=>mr.toLowerCase()===hr).length!==0)}async getSigner(hr){if(hr==null&&(hr=0),!await this.hasSigner(hr))try{await this.#e("eth_requestAccounts",[])}catch(pr){const mr=pr.payload;throw this.getRpcError(mr,{id:mr.id,error:pr})}return await super.getSigner(hr)}}return providerBrowser.BrowserProvider=dr,providerBrowser}var providerPocket={},hasRequiredProviderPocket;function requireProviderPocket(){if(hasRequiredProviderPocket)return providerPocket;hasRequiredProviderPocket=1,Object.defineProperty(providerPocket,"__esModule",{value:!0}),providerPocket.PocketProvider=void 0;const cr=requireUtils$1(),ar=requireCommunity(),dr=requireNetwork(),fr=requireProviderJsonrpc(),hr="62e1ad51b37b8e00394bda3b";function pr(gr){switch(gr){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}(0,cr.assertArgument)(!1,"unsupported network","network",gr)}class mr extends fr.JsonRpcProvider{applicationId;applicationSecret;constructor(yr,xr,wr){yr==null&&(yr="mainnet");const br=dr.Network.from(yr);xr==null&&(xr=hr),wr==null&&(wr=null);const Sr={staticNetwork:br},vr=mr.getRequest(br,xr,wr);super(vr,br,Sr),(0,cr.defineProperties)(this,{applicationId:xr,applicationSecret:wr})}_getProvider(yr){try{return new mr(yr,this.applicationId,this.applicationSecret)}catch{}return super._getProvider(yr)}static getRequest(yr,xr,wr){xr==null&&(xr=hr);const br=new cr.FetchRequest(`https://${pr(yr.name)}/v1/lb/${xr}`);return br.allowGzip=!0,wr&&br.setCredentials("",wr),xr===hr&&(br.retryFunc=async(Sr,vr,Er)=>((0,ar.showThrottleMessage)("PocketProvider"),!0)),br}isCommunityResource(){return this.applicationId===hr}}return providerPocket.PocketProvider=mr,providerPocket}var providerIpcsocketBrowser={},hasRequiredProviderIpcsocketBrowser;function requireProviderIpcsocketBrowser(){if(hasRequiredProviderIpcsocketBrowser)return providerIpcsocketBrowser;hasRequiredProviderIpcsocketBrowser=1,Object.defineProperty(providerIpcsocketBrowser,"__esModule",{value:!0}),providerIpcsocketBrowser.IpcSocketProvider=void 0;const cr=void 0;return providerIpcsocketBrowser.IpcSocketProvider=cr,providerIpcsocketBrowser}var hasRequiredProviders;function requireProviders(){return hasRequiredProviders||(hasRequiredProviders=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.SocketEventSubscriber=cr.SocketPendingSubscriber=cr.SocketBlockSubscriber=cr.SocketSubscriber=cr.WebSocketProvider=cr.SocketProvider=cr.IpcSocketProvider=cr.QuickNodeProvider=cr.PocketProvider=cr.InfuraWebSocketProvider=cr.InfuraProvider=cr.EtherscanPlugin=cr.EtherscanProvider=cr.CloudflareProvider=cr.AnkrProvider=cr.AlchemyProvider=cr.BrowserProvider=cr.JsonRpcSigner=cr.JsonRpcProvider=cr.JsonRpcApiProvider=cr.FallbackProvider=cr.copyRequest=cr.TransactionResponse=cr.TransactionReceipt=cr.Log=cr.FeeData=cr.Block=cr.FetchUrlFeeDataNetworkPlugin=cr.FeeDataNetworkPlugin=cr.EnsPlugin=cr.GasCostPlugin=cr.NetworkPlugin=cr.NonceManager=cr.Network=cr.MulticoinProviderPlugin=cr.EnsResolver=cr.getDefaultProvider=cr.showThrottleMessage=cr.VoidSigner=cr.AbstractSigner=cr.UnmanagedSubscriber=cr.AbstractProvider=void 0;var ar=requireAbstractProvider();Object.defineProperty(cr,"AbstractProvider",{enumerable:!0,get:function(){return ar.AbstractProvider}}),Object.defineProperty(cr,"UnmanagedSubscriber",{enumerable:!0,get:function(){return ar.UnmanagedSubscriber}});var dr=requireAbstractSigner();Object.defineProperty(cr,"AbstractSigner",{enumerable:!0,get:function(){return dr.AbstractSigner}}),Object.defineProperty(cr,"VoidSigner",{enumerable:!0,get:function(){return dr.VoidSigner}});var fr=requireCommunity();Object.defineProperty(cr,"showThrottleMessage",{enumerable:!0,get:function(){return fr.showThrottleMessage}});var hr=requireDefaultProvider();Object.defineProperty(cr,"getDefaultProvider",{enumerable:!0,get:function(){return hr.getDefaultProvider}});var pr=requireEnsResolver();Object.defineProperty(cr,"EnsResolver",{enumerable:!0,get:function(){return pr.EnsResolver}}),Object.defineProperty(cr,"MulticoinProviderPlugin",{enumerable:!0,get:function(){return pr.MulticoinProviderPlugin}});var mr=requireNetwork();Object.defineProperty(cr,"Network",{enumerable:!0,get:function(){return mr.Network}});var gr=requireSignerNoncemanager();Object.defineProperty(cr,"NonceManager",{enumerable:!0,get:function(){return gr.NonceManager}});var yr=requirePluginsNetwork();Object.defineProperty(cr,"NetworkPlugin",{enumerable:!0,get:function(){return yr.NetworkPlugin}}),Object.defineProperty(cr,"GasCostPlugin",{enumerable:!0,get:function(){return yr.GasCostPlugin}}),Object.defineProperty(cr,"EnsPlugin",{enumerable:!0,get:function(){return yr.EnsPlugin}}),Object.defineProperty(cr,"FeeDataNetworkPlugin",{enumerable:!0,get:function(){return yr.FeeDataNetworkPlugin}}),Object.defineProperty(cr,"FetchUrlFeeDataNetworkPlugin",{enumerable:!0,get:function(){return yr.FetchUrlFeeDataNetworkPlugin}});var xr=requireProvider();Object.defineProperty(cr,"Block",{enumerable:!0,get:function(){return xr.Block}}),Object.defineProperty(cr,"FeeData",{enumerable:!0,get:function(){return xr.FeeData}}),Object.defineProperty(cr,"Log",{enumerable:!0,get:function(){return xr.Log}}),Object.defineProperty(cr,"TransactionReceipt",{enumerable:!0,get:function(){return xr.TransactionReceipt}}),Object.defineProperty(cr,"TransactionResponse",{enumerable:!0,get:function(){return xr.TransactionResponse}}),Object.defineProperty(cr,"copyRequest",{enumerable:!0,get:function(){return xr.copyRequest}});var wr=requireProviderFallback();Object.defineProperty(cr,"FallbackProvider",{enumerable:!0,get:function(){return wr.FallbackProvider}});var br=requireProviderJsonrpc();Object.defineProperty(cr,"JsonRpcApiProvider",{enumerable:!0,get:function(){return br.JsonRpcApiProvider}}),Object.defineProperty(cr,"JsonRpcProvider",{enumerable:!0,get:function(){return br.JsonRpcProvider}}),Object.defineProperty(cr,"JsonRpcSigner",{enumerable:!0,get:function(){return br.JsonRpcSigner}});var Sr=requireProviderBrowser();Object.defineProperty(cr,"BrowserProvider",{enumerable:!0,get:function(){return Sr.BrowserProvider}});var vr=requireProviderAlchemy();Object.defineProperty(cr,"AlchemyProvider",{enumerable:!0,get:function(){return vr.AlchemyProvider}});var Er=requireProviderAnkr();Object.defineProperty(cr,"AnkrProvider",{enumerable:!0,get:function(){return Er.AnkrProvider}});var Ar=requireProviderCloudflare();Object.defineProperty(cr,"CloudflareProvider",{enumerable:!0,get:function(){return Ar.CloudflareProvider}});var _r=requireProviderEtherscan();Object.defineProperty(cr,"EtherscanProvider",{enumerable:!0,get:function(){return _r.EtherscanProvider}}),Object.defineProperty(cr,"EtherscanPlugin",{enumerable:!0,get:function(){return _r.EtherscanPlugin}});var Cr=requireProviderInfura();Object.defineProperty(cr,"InfuraProvider",{enumerable:!0,get:function(){return Cr.InfuraProvider}}),Object.defineProperty(cr,"InfuraWebSocketProvider",{enumerable:!0,get:function(){return Cr.InfuraWebSocketProvider}});var kr=requireProviderPocket();Object.defineProperty(cr,"PocketProvider",{enumerable:!0,get:function(){return kr.PocketProvider}});var Rr=requireProviderQuicknode();Object.defineProperty(cr,"QuickNodeProvider",{enumerable:!0,get:function(){return Rr.QuickNodeProvider}});const Ir=requireProviderIpcsocketBrowser();Object.defineProperty(cr,"IpcSocketProvider",{enumerable:!0,get:function(){return Ir.IpcSocketProvider}});var Nr=requireProviderSocket();Object.defineProperty(cr,"SocketProvider",{enumerable:!0,get:function(){return Nr.SocketProvider}});var Pr=requireProviderWebsocket();Object.defineProperty(cr,"WebSocketProvider",{enumerable:!0,get:function(){return Pr.WebSocketProvider}});var Tr=requireProviderSocket();Object.defineProperty(cr,"SocketSubscriber",{enumerable:!0,get:function(){return Tr.SocketSubscriber}}),Object.defineProperty(cr,"SocketBlockSubscriber",{enumerable:!0,get:function(){return Tr.SocketBlockSubscriber}}),Object.defineProperty(cr,"SocketPendingSubscriber",{enumerable:!0,get:function(){return Tr.SocketPendingSubscriber}}),Object.defineProperty(cr,"SocketEventSubscriber",{enumerable:!0,get:function(){return Tr.SocketEventSubscriber}})}(providers)),providers}var wallet$1={},baseWallet={},hasRequiredBaseWallet;function requireBaseWallet(){if(hasRequiredBaseWallet)return baseWallet;hasRequiredBaseWallet=1,Object.defineProperty(baseWallet,"__esModule",{value:!0}),baseWallet.BaseWallet=void 0;const cr=requireAddress$2(),ar=requireHash(),dr=requireProviders(),fr=requireTransaction(),hr=requireUtils$1();class pr extends dr.AbstractSigner{address;#e;constructor(gr,yr){super(yr),(0,hr.assertArgument)(gr&&typeof gr.sign=="function","invalid private key","privateKey","[ REDACTED ]"),this.#e=gr;const xr=(0,fr.computeAddress)(this.signingKey.publicKey);(0,hr.defineProperties)(this,{address:xr})}get signingKey(){return this.#e}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(gr){return new pr(this.#e,gr)}async signTransaction(gr){const{to:yr,from:xr}=await(0,hr.resolveProperties)({to:gr.to?(0,cr.resolveAddress)(gr.to,this.provider):void 0,from:gr.from?(0,cr.resolveAddress)(gr.from,this.provider):void 0});yr!=null&&(gr.to=yr),xr!=null&&(gr.from=xr),gr.from!=null&&((0,hr.assertArgument)((0,cr.getAddress)(gr.from)===this.address,"transaction from address mismatch","tx.from",gr.from),delete gr.from);const wr=fr.Transaction.from(gr);return wr.signature=this.signingKey.sign(wr.unsignedHash),wr.serialized}async signMessage(gr){return this.signMessageSync(gr)}signMessageSync(gr){return this.signingKey.sign((0,ar.hashMessage)(gr)).serialized}async signTypedData(gr,yr,xr){const wr=await ar.TypedDataEncoder.resolveNames(gr,yr,xr,async br=>{(0,hr.assert)(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:br}});const Sr=await this.provider.resolveName(br);return(0,hr.assert)(Sr!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:br}),Sr});return this.signingKey.sign(ar.TypedDataEncoder.hash(wr.domain,yr,wr.value)).serialized}}return baseWallet.BaseWallet=pr,baseWallet}var hdwallet={},langEn={},wordlistOwl={},decodeOwl={},hasRequiredDecodeOwl;function requireDecodeOwl(){if(hasRequiredDecodeOwl)return decodeOwl;hasRequiredDecodeOwl=1,Object.defineProperty(decodeOwl,"__esModule",{value:!0}),decodeOwl.decodeOwl=decodeOwl.decode=void 0;const cr=requireUtils$1(),ar=" !#$%&'()*+,-./<=>?@[]^_`{|}~",dr=/^[a-z]*$/i;function fr(mr,gr){let yr=97;return mr.reduce((xr,wr)=>(wr===gr?yr++:wr.match(dr)?xr.push(String.fromCharCode(yr)+wr):(yr=97,xr.push(wr)),xr),[])}function hr(mr,gr){for(let wr=ar.length-1;wr>=0;wr--)mr=mr.split(ar[wr]).join(gr.substring(2*wr,2*wr+2));const yr=[],xr=mr.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(wr,br,Sr,vr)=>{if(Sr)for(let Er=parseInt(Sr);Er>=0;Er--)yr.push(";");else yr.push(br.toLowerCase());return""});if(xr)throw new Error(`leftovers: ${JSON.stringify(xr)}`);return fr(fr(yr,";"),":")}decodeOwl.decode=hr;function pr(mr){return(0,cr.assertArgument)(mr[0]==="0","unsupported auwl data","data",mr),hr(mr.substring(1+2*ar.length),mr.substring(1,1+2*ar.length))}return decodeOwl.decodeOwl=pr,decodeOwl}var wordlist={},hasRequiredWordlist;function requireWordlist(){if(hasRequiredWordlist)return wordlist;hasRequiredWordlist=1,Object.defineProperty(wordlist,"__esModule",{value:!0}),wordlist.Wordlist=void 0;const cr=requireUtils$1();class ar{locale;constructor(fr){(0,cr.defineProperties)(this,{locale:fr})}split(fr){return fr.toLowerCase().split(/\s+/g)}join(fr){return fr.join(" ")}}return wordlist.Wordlist=ar,wordlist}var hasRequiredWordlistOwl;function requireWordlistOwl(){if(hasRequiredWordlistOwl)return wordlistOwl;hasRequiredWordlistOwl=1,Object.defineProperty(wordlistOwl,"__esModule",{value:!0}),wordlistOwl.WordlistOwl=void 0;const cr=requireHash(),ar=requireUtils$1(),dr=requireDecodeOwl(),fr=requireWordlist();class hr extends fr.Wordlist{#e;#t;constructor(mr,gr,yr){super(mr),this.#e=gr,this.#t=yr,this.#r=null}get _data(){return this.#e}_decodeWords(){return(0,dr.decodeOwl)(this.#e)}#r;#n(){if(this.#r==null){const mr=this._decodeWords();if((0,cr.id)(mr.join(`
`)+`
`)!==this.#t)throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#r=mr}return this.#r}getWord(mr){const gr=this.#n();return(0,ar.assertArgument)(mr>=0&&mr<gr.length,`invalid word index: ${mr}`,"index",mr),gr[mr]}getWordIndex(mr){return this.#n().indexOf(mr)}}return wordlistOwl.WordlistOwl=hr,wordlistOwl}var hasRequiredLangEn;function requireLangEn(){if(hasRequiredLangEn)return langEn;hasRequiredLangEn=1,Object.defineProperty(langEn,"__esModule",{value:!0}),langEn.LangEn=void 0;const cr=requireWordlistOwl(),ar="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",dr="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let fr=null;class hr extends cr.WordlistOwl{constructor(){super("en",ar,dr)}static wordlist(){return fr==null&&(fr=new hr),fr}}return langEn.LangEn=hr,langEn}var mnemonic={},hasRequiredMnemonic;function requireMnemonic(){if(hasRequiredMnemonic)return mnemonic;hasRequiredMnemonic=1,Object.defineProperty(mnemonic,"__esModule",{value:!0}),mnemonic.Mnemonic=void 0;const cr=requireCrypto(),ar=requireUtils$1(),dr=requireLangEn();function fr(xr){return(1<<xr)-1<<8-xr&255}function hr(xr){return(1<<xr)-1&255}function pr(xr,wr){(0,ar.assertNormalize)("NFKD"),wr==null&&(wr=dr.LangEn.wordlist());const br=wr.split(xr);(0,ar.assertArgument)(br.length%3===0&&br.length>=12&&br.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const Sr=new Uint8Array(Math.ceil(11*br.length/8));let vr=0;for(let kr=0;kr<br.length;kr++){let Rr=wr.getWordIndex(br[kr].normalize("NFKD"));(0,ar.assertArgument)(Rr>=0,`invalid mnemonic word at index ${kr}`,"mnemonic","[ REDACTED ]");for(let Ir=0;Ir<11;Ir++)Rr&1<<10-Ir&&(Sr[vr>>3]|=1<<7-vr%8),vr++}const Er=32*br.length/3,Ar=br.length/3,_r=fr(Ar),Cr=(0,ar.getBytes)((0,cr.sha256)(Sr.slice(0,Er/8)))[0]&_r;return(0,ar.assertArgument)(Cr===(Sr[Sr.length-1]&_r),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),(0,ar.hexlify)(Sr.slice(0,Er/8))}function mr(xr,wr){(0,ar.assertArgument)(xr.length%4===0&&xr.length>=16&&xr.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),wr==null&&(wr=dr.LangEn.wordlist());const br=[0];let Sr=11;for(let Ar=0;Ar<xr.length;Ar++)Sr>8?(br[br.length-1]<<=8,br[br.length-1]|=xr[Ar],Sr-=8):(br[br.length-1]<<=Sr,br[br.length-1]|=xr[Ar]>>8-Sr,br.push(xr[Ar]&hr(8-Sr)),Sr+=3);const vr=xr.length/4,Er=parseInt((0,cr.sha256)(xr).substring(2,4),16)&fr(vr);return br[br.length-1]<<=vr,br[br.length-1]|=Er>>8-vr,wr.join(br.map(Ar=>wr.getWord(Ar)))}const gr={};class yr{phrase;password;wordlist;entropy;constructor(wr,br,Sr,vr,Er){vr==null&&(vr=""),Er==null&&(Er=dr.LangEn.wordlist()),(0,ar.assertPrivate)(wr,gr,"Mnemonic"),(0,ar.defineProperties)(this,{phrase:Sr,password:vr,wordlist:Er,entropy:br})}computeSeed(){const wr=(0,ar.toUtf8Bytes)("mnemonic"+this.password,"NFKD");return(0,cr.pbkdf2)((0,ar.toUtf8Bytes)(this.phrase,"NFKD"),wr,2048,64,"sha512")}static fromPhrase(wr,br,Sr){const vr=pr(wr,Sr);return wr=mr((0,ar.getBytes)(vr),Sr),new yr(gr,vr,wr,br,Sr)}static fromEntropy(wr,br,Sr){const vr=(0,ar.getBytes)(wr,"entropy"),Er=mr(vr,Sr);return new yr(gr,(0,ar.hexlify)(vr),Er,br,Sr)}static entropyToPhrase(wr,br){const Sr=(0,ar.getBytes)(wr,"entropy");return mr(Sr,br)}static phraseToEntropy(wr,br){return pr(wr,br)}static isValidMnemonic(wr,br){try{return pr(wr,br),!0}catch{}return!1}}return mnemonic.Mnemonic=yr,mnemonic}var jsonKeystore={};const require$$0=getAugmentedNamespace(lib_esm);var utils$1={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils$1;hasRequiredUtils=1,Object.defineProperty(utils$1,"__esModule",{value:!0}),utils$1.spelunk=utils$1.getPassword=utils$1.zpad=utils$1.looseArrayify=void 0;const cr=requireUtils$1();function ar(pr){return typeof pr=="string"&&!pr.startsWith("0x")&&(pr="0x"+pr),(0,cr.getBytesCopy)(pr)}utils$1.looseArrayify=ar;function dr(pr,mr){for(pr=String(pr);pr.length<mr;)pr="0"+pr;return pr}utils$1.zpad=dr;function fr(pr){return typeof pr=="string"?(0,cr.toUtf8Bytes)(pr,"NFKC"):(0,cr.getBytesCopy)(pr)}utils$1.getPassword=fr;function hr(pr,mr){const gr=mr.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);(0,cr.assertArgument)(gr!=null,"invalid path","path",mr);const yr=gr[1],xr=gr[3],wr=gr[4]==="!";let br=pr;for(const Sr of yr.toLowerCase().split(".")){if(Array.isArray(br)){if(!Sr.match(/^[0-9]+$/))break;br=br[parseInt(Sr)]}else if(typeof br=="object"){let vr=null;for(const Er in br)if(Er.toLowerCase()===Sr){vr=br[Er];break}br=vr}else br=null;if(br==null)break}if((0,cr.assertArgument)(!wr||br!=null,"missing required value","path",yr),xr&&br!=null){if(xr==="int"){if(typeof br=="string"&&br.match(/^-?[0-9]+$/))return parseInt(br);if(Number.isSafeInteger(br))return br}if(xr==="number"&&typeof br=="string"&&br.match(/^-?[0-9.]*$/))return parseFloat(br);if(xr==="data"&&typeof br=="string")return ar(br);if(xr==="array"&&Array.isArray(br)||xr===typeof br)return br;(0,cr.assertArgument)(!1,`wrong type found for ${xr} `,"path",yr)}return br}return utils$1.spelunk=hr,utils$1}var hasRequiredJsonKeystore;function requireJsonKeystore(){if(hasRequiredJsonKeystore)return jsonKeystore;hasRequiredJsonKeystore=1,Object.defineProperty(jsonKeystore,"__esModule",{value:!0}),jsonKeystore.encryptKeystoreJson=jsonKeystore.encryptKeystoreJsonSync=jsonKeystore.decryptKeystoreJson=jsonKeystore.decryptKeystoreJsonSync=jsonKeystore.isKeystoreJson=void 0;const cr=require$$0,ar=requireAddress$2(),dr=requireCrypto(),fr=requireTransaction(),hr=requireUtils$1(),pr=requireUtils(),mr=require_version(),gr="m/44'/60'/0'/0/0";function yr(Rr){try{const Ir=JSON.parse(Rr);if((Ir.version!=null?parseInt(Ir.version):0)===3)return!0}catch{}return!1}jsonKeystore.isKeystoreJson=yr;function xr(Rr,Ir,Nr){if((0,pr.spelunk)(Rr,"crypto.cipher:string")==="aes-128-ctr"){const Tr=(0,pr.spelunk)(Rr,"crypto.cipherparams.iv:data!"),Br=new cr.CTR(Ir,Tr);return(0,hr.hexlify)(Br.decrypt(Nr))}(0,hr.assert)(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function wr(Rr,Ir){const Nr=(0,hr.getBytes)(Ir),Pr=(0,pr.spelunk)(Rr,"crypto.ciphertext:data!"),Tr=(0,hr.hexlify)((0,dr.keccak256)((0,hr.concat)([Nr.slice(16,32),Pr]))).substring(2);(0,hr.assertArgument)(Tr===(0,pr.spelunk)(Rr,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const Br=xr(Rr,Nr.slice(0,16),Pr),Fr=(0,fr.computeAddress)(Br);if(Rr.address){let qr=Rr.address.toLowerCase();qr.startsWith("0x")||(qr="0x"+qr),(0,hr.assertArgument)((0,ar.getAddress)(qr)===Fr,"keystore address/privateKey mismatch","address",Rr.address)}const jr={address:Fr,privateKey:Br};if((0,pr.spelunk)(Rr,"x-ethers.version:string")==="0.1"){const qr=Nr.slice(32,64),Hr=(0,pr.spelunk)(Rr,"x-ethers.mnemonicCiphertext:data!"),Or=(0,pr.spelunk)(Rr,"x-ethers.mnemonicCounter:data!"),Mr=new cr.CTR(qr,Or);jr.mnemonic={path:(0,pr.spelunk)(Rr,"x-ethers.path:string")||gr,locale:(0,pr.spelunk)(Rr,"x-ethers.locale:string")||"en",entropy:(0,hr.hexlify)((0,hr.getBytes)(Mr.decrypt(Hr)))}}return jr}function br(Rr){const Ir=(0,pr.spelunk)(Rr,"crypto.kdf:string");if(Ir&&typeof Ir=="string"){if(Ir.toLowerCase()==="scrypt"){const Nr=(0,pr.spelunk)(Rr,"crypto.kdfparams.salt:data!"),Pr=(0,pr.spelunk)(Rr,"crypto.kdfparams.n:int!"),Tr=(0,pr.spelunk)(Rr,"crypto.kdfparams.r:int!"),Br=(0,pr.spelunk)(Rr,"crypto.kdfparams.p:int!");(0,hr.assertArgument)(Pr>0&&(Pr&Pr-1)===0,"invalid kdf.N","kdf.N",Pr),(0,hr.assertArgument)(Tr>0&&Br>0,"invalid kdf","kdf",Ir);const Fr=(0,pr.spelunk)(Rr,"crypto.kdfparams.dklen:int!");return(0,hr.assertArgument)(Fr===32,"invalid kdf.dklen","kdf.dflen",Fr),{name:"scrypt",salt:Nr,N:Pr,r:Tr,p:Br,dkLen:64}}else if(Ir.toLowerCase()==="pbkdf2"){const Nr=(0,pr.spelunk)(Rr,"crypto.kdfparams.salt:data!"),Pr=(0,pr.spelunk)(Rr,"crypto.kdfparams.prf:string!"),Tr=Pr.split("-").pop();(0,hr.assertArgument)(Tr==="sha256"||Tr==="sha512","invalid kdf.pdf","kdf.pdf",Pr);const Br=(0,pr.spelunk)(Rr,"crypto.kdfparams.c:int!"),Fr=(0,pr.spelunk)(Rr,"crypto.kdfparams.dklen:int!");return(0,hr.assertArgument)(Fr===32,"invalid kdf.dklen","kdf.dklen",Fr),{name:"pbkdf2",salt:Nr,count:Br,dkLen:Fr,algorithm:Tr}}}(0,hr.assertArgument)(!1,"unsupported key-derivation function","kdf",Ir)}function Sr(Rr,Ir){const Nr=JSON.parse(Rr),Pr=(0,pr.getPassword)(Ir),Tr=br(Nr);if(Tr.name==="pbkdf2"){const{salt:Or,count:Mr,dkLen:Lr,algorithm:Vr}=Tr,Jr=(0,dr.pbkdf2)(Pr,Or,Mr,Lr,Vr);return wr(Nr,Jr)}(0,hr.assert)(Tr.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:Tr});const{salt:Br,N:Fr,r:jr,p:Ur,dkLen:qr}=Tr,Hr=(0,dr.scryptSync)(Pr,Br,Fr,jr,Ur,qr);return wr(Nr,Hr)}jsonKeystore.decryptKeystoreJsonSync=Sr;function vr(Rr){return new Promise(Ir=>{setTimeout(()=>{Ir()},Rr)})}async function Er(Rr,Ir,Nr){const Pr=JSON.parse(Rr),Tr=(0,pr.getPassword)(Ir),Br=br(Pr);if(Br.name==="pbkdf2"){Nr&&(Nr(0),await vr(0));const{salt:Mr,count:Lr,dkLen:Vr,algorithm:Jr}=Br,es=(0,dr.pbkdf2)(Tr,Mr,Lr,Vr,Jr);return Nr&&(Nr(1),await vr(0)),wr(Pr,es)}(0,hr.assert)(Br.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:Br});const{salt:Fr,N:jr,r:Ur,p:qr,dkLen:Hr}=Br,Or=await(0,dr.scrypt)(Tr,Fr,jr,Ur,qr,Hr,Nr);return wr(Pr,Or)}jsonKeystore.decryptKeystoreJson=Er;function Ar(Rr){const Ir=Rr.salt!=null?(0,hr.getBytes)(Rr.salt,"options.salt"):(0,dr.randomBytes)(32);let Nr=1<<17,Pr=8,Tr=1;return Rr.scrypt&&(Rr.scrypt.N&&(Nr=Rr.scrypt.N),Rr.scrypt.r&&(Pr=Rr.scrypt.r),Rr.scrypt.p&&(Tr=Rr.scrypt.p)),(0,hr.assertArgument)(typeof Nr=="number"&&Nr>0&&Number.isSafeInteger(Nr)&&(BigInt(Nr)&BigInt(Nr-1))===BigInt(0),"invalid scrypt N parameter","options.N",Nr),(0,hr.assertArgument)(typeof Pr=="number"&&Pr>0&&Number.isSafeInteger(Pr),"invalid scrypt r parameter","options.r",Pr),(0,hr.assertArgument)(typeof Tr=="number"&&Tr>0&&Number.isSafeInteger(Tr),"invalid scrypt p parameter","options.p",Tr),{name:"scrypt",dkLen:32,salt:Ir,N:Nr,r:Pr,p:Tr}}function _r(Rr,Ir,Nr,Pr){const Tr=(0,hr.getBytes)(Nr.privateKey,"privateKey"),Br=Pr.iv!=null?(0,hr.getBytes)(Pr.iv,"options.iv"):(0,dr.randomBytes)(16);(0,hr.assertArgument)(Br.length===16,"invalid options.iv length","options.iv",Pr.iv);const Fr=Pr.uuid!=null?(0,hr.getBytes)(Pr.uuid,"options.uuid"):(0,dr.randomBytes)(16);(0,hr.assertArgument)(Fr.length===16,"invalid options.uuid length","options.uuid",Pr.iv);const jr=Rr.slice(0,16),Ur=Rr.slice(16,32),qr=new cr.CTR(jr,Br),Hr=(0,hr.getBytes)(qr.encrypt(Tr)),Or=(0,dr.keccak256)((0,hr.concat)([Ur,Hr])),Mr={address:Nr.address.substring(2).toLowerCase(),id:(0,hr.uuidV4)(Fr),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:(0,hr.hexlify)(Br).substring(2)},ciphertext:(0,hr.hexlify)(Hr).substring(2),kdf:"scrypt",kdfparams:{salt:(0,hr.hexlify)(Ir.salt).substring(2),n:Ir.N,dklen:32,p:Ir.p,r:Ir.r},mac:Or.substring(2)}};if(Nr.mnemonic){const Lr=Pr.client!=null?Pr.client:`ethers/${mr.version}`,Vr=Nr.mnemonic.path||gr,Jr=Nr.mnemonic.locale||"en",es=Rr.slice(32,64),ns=(0,hr.getBytes)(Nr.mnemonic.entropy,"account.mnemonic.entropy"),Qr=(0,dr.randomBytes)(16),zr=new cr.CTR(es,Qr),Wr=(0,hr.getBytes)(zr.encrypt(ns)),ss=new Date,ts="UTC--"+(ss.getUTCFullYear()+"-"+(0,pr.zpad)(ss.getUTCMonth()+1,2)+"-"+(0,pr.zpad)(ss.getUTCDate(),2)+"T"+(0,pr.zpad)(ss.getUTCHours(),2)+"-"+(0,pr.zpad)(ss.getUTCMinutes(),2)+"-"+(0,pr.zpad)(ss.getUTCSeconds(),2)+".0Z")+"--"+Mr.address;Mr["x-ethers"]={client:Lr,gethFilename:ts,path:Vr,locale:Jr,mnemonicCounter:(0,hr.hexlify)(Qr).substring(2),mnemonicCiphertext:(0,hr.hexlify)(Wr).substring(2),version:"0.1"}}return JSON.stringify(Mr)}function Cr(Rr,Ir,Nr){Nr==null&&(Nr={});const Pr=(0,pr.getPassword)(Ir),Tr=Ar(Nr),Br=(0,dr.scryptSync)(Pr,Tr.salt,Tr.N,Tr.r,Tr.p,64);return _r((0,hr.getBytes)(Br),Tr,Rr,Nr)}jsonKeystore.encryptKeystoreJsonSync=Cr;async function kr(Rr,Ir,Nr){Nr==null&&(Nr={});const Pr=(0,pr.getPassword)(Ir),Tr=Ar(Nr),Br=await(0,dr.scrypt)(Pr,Tr.salt,Tr.N,Tr.r,Tr.p,64,Nr.progressCallback);return _r((0,hr.getBytes)(Br),Tr,Rr,Nr)}return jsonKeystore.encryptKeystoreJson=kr,jsonKeystore}var hasRequiredHdwallet;function requireHdwallet(){return hasRequiredHdwallet||(hasRequiredHdwallet=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.getIndexedAccountPath=cr.getAccountPath=cr.HDNodeVoidWallet=cr.HDNodeWallet=cr.defaultPath=void 0;const ar=requireCrypto(),dr=requireProviders(),fr=requireTransaction(),hr=requireUtils$1(),pr=requireLangEn(),mr=requireBaseWallet(),gr=requireMnemonic(),yr=requireJsonKeystore();cr.defaultPath="m/44'/60'/0'/0/0";const xr=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),wr=2147483648,br=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Sr="0123456789abcdef";function vr(Pr,Tr){let Br="";for(;Pr;)Br=Sr[Pr%16]+Br,Pr=Math.trunc(Pr/16);for(;Br.length<Tr*2;)Br="0"+Br;return"0x"+Br}function Er(Pr){const Tr=(0,hr.getBytes)(Pr),Br=(0,hr.dataSlice)((0,ar.sha256)((0,ar.sha256)(Tr)),0,4),Fr=(0,hr.concat)([Tr,Br]);return(0,hr.encodeBase58)(Fr)}const Ar={};function _r(Pr,Tr,Br,Fr){const jr=new Uint8Array(37);Pr&wr?((0,hr.assert)(Fr!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),jr.set((0,hr.getBytes)(Fr),1)):jr.set((0,hr.getBytes)(Br));for(let qr=24;qr>=0;qr-=8)jr[33+(qr>>3)]=Pr>>24-qr&255;const Ur=(0,hr.getBytes)((0,ar.computeHmac)("sha512",Tr,jr));return{IL:Ur.slice(0,32),IR:Ur.slice(32)}}function Cr(Pr,Tr){const Br=Tr.split("/");(0,hr.assertArgument)(Br.length>0&&(Br[0]==="m"||Pr.depth>0),"invalid path","path",Tr),Br[0]==="m"&&Br.shift();let Fr=Pr;for(let jr=0;jr<Br.length;jr++){const Ur=Br[jr];if(Ur.match(/^[0-9]+'$/)){const qr=parseInt(Ur.substring(0,Ur.length-1));(0,hr.assertArgument)(qr<wr,"invalid path index",`path[${jr}]`,Ur),Fr=Fr.deriveChild(wr+qr)}else if(Ur.match(/^[0-9]+$/)){const qr=parseInt(Ur);(0,hr.assertArgument)(qr<wr,"invalid path index",`path[${jr}]`,Ur),Fr=Fr.deriveChild(qr)}else(0,hr.assertArgument)(!1,"invalid path component",`path[${jr}]`,Ur)}return Fr}class kr extends mr.BaseWallet{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(Tr,Br,Fr,jr,Ur,qr,Hr,Or,Mr){super(Br,Mr),(0,hr.assertPrivate)(Tr,Ar,"HDNodeWallet"),(0,hr.defineProperties)(this,{publicKey:Br.compressedPublicKey});const Lr=(0,hr.dataSlice)((0,ar.ripemd160)((0,ar.sha256)(this.publicKey)),0,4);(0,hr.defineProperties)(this,{parentFingerprint:Fr,fingerprint:Lr,chainCode:jr,path:Ur,index:qr,depth:Hr}),(0,hr.defineProperties)(this,{mnemonic:Or})}connect(Tr){return new kr(Ar,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,Tr)}#e(){const Tr={address:this.address,privateKey:this.privateKey},Br=this.mnemonic;return this.path&&Br&&Br.wordlist.locale==="en"&&Br.password===""&&(Tr.mnemonic={path:this.path,locale:"en",entropy:Br.entropy}),Tr}async encrypt(Tr,Br){return await(0,yr.encryptKeystoreJson)(this.#e(),Tr,{progressCallback:Br})}encryptSync(Tr){return(0,yr.encryptKeystoreJsonSync)(this.#e(),Tr)}get extendedKey(){return(0,hr.assert)(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Er((0,hr.concat)(["0x0488ADE4",vr(this.depth,1),this.parentFingerprint,vr(this.index,4),this.chainCode,(0,hr.concat)(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new Rr(Ar,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(Tr){const Br=(0,hr.getNumber)(Tr,"index");(0,hr.assertArgument)(Br<=4294967295,"invalid index","index",Br);let Fr=this.path;Fr&&(Fr+="/"+(Br&~wr),Br&wr&&(Fr+="'"));const{IR:jr,IL:Ur}=_r(Br,this.chainCode,this.publicKey,this.privateKey),qr=new ar.SigningKey((0,hr.toBeHex)(((0,hr.toBigInt)(Ur)+BigInt(this.privateKey))%br,32));return new kr(Ar,qr,this.fingerprint,(0,hr.hexlify)(jr),Fr,Br,this.depth+1,this.mnemonic,this.provider)}derivePath(Tr){return Cr(this,Tr)}static#t(Tr,Br){(0,hr.assertArgument)((0,hr.isBytesLike)(Tr),"invalid seed","seed","[REDACTED]");const Fr=(0,hr.getBytes)(Tr,"seed");(0,hr.assertArgument)(Fr.length>=16&&Fr.length<=64,"invalid seed","seed","[REDACTED]");const jr=(0,hr.getBytes)((0,ar.computeHmac)("sha512",xr,Fr)),Ur=new ar.SigningKey((0,hr.hexlify)(jr.slice(0,32)));return new kr(Ar,Ur,"0x00000000",(0,hr.hexlify)(jr.slice(32)),"m",0,0,Br,null)}static fromExtendedKey(Tr){const Br=(0,hr.toBeArray)((0,hr.decodeBase58)(Tr));(0,hr.assertArgument)(Br.length===82||Er(Br.slice(0,78))===Tr,"invalid extended key","extendedKey","[ REDACTED ]");const Fr=Br[4],jr=(0,hr.hexlify)(Br.slice(5,9)),Ur=parseInt((0,hr.hexlify)(Br.slice(9,13)).substring(2),16),qr=(0,hr.hexlify)(Br.slice(13,45)),Hr=Br.slice(45,78);switch((0,hr.hexlify)(Br.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const Or=(0,hr.hexlify)(Hr);return new Rr(Ar,(0,fr.computeAddress)(Or),Or,jr,qr,null,Ur,Fr,null)}case"0x0488ade4":case"0x04358394 ":if(Hr[0]!==0)break;return new kr(Ar,new ar.SigningKey(Hr.slice(1)),jr,qr,null,Ur,Fr,null,null)}(0,hr.assertArgument)(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(Tr,Br,Fr){Tr==null&&(Tr=""),Br==null&&(Br=cr.defaultPath),Fr==null&&(Fr=pr.LangEn.wordlist());const jr=gr.Mnemonic.fromEntropy((0,ar.randomBytes)(16),Tr,Fr);return kr.#t(jr.computeSeed(),jr).derivePath(Br)}static fromMnemonic(Tr,Br){return Br||(Br=cr.defaultPath),kr.#t(Tr.computeSeed(),Tr).derivePath(Br)}static fromPhrase(Tr,Br,Fr,jr){Br==null&&(Br=""),Fr==null&&(Fr=cr.defaultPath),jr==null&&(jr=pr.LangEn.wordlist());const Ur=gr.Mnemonic.fromPhrase(Tr,Br,jr);return kr.#t(Ur.computeSeed(),Ur).derivePath(Fr)}static fromSeed(Tr){return kr.#t(Tr,null)}}cr.HDNodeWallet=kr;class Rr extends dr.VoidSigner{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(Tr,Br,Fr,jr,Ur,qr,Hr,Or,Mr){super(Br,Mr),(0,hr.assertPrivate)(Tr,Ar,"HDNodeVoidWallet"),(0,hr.defineProperties)(this,{publicKey:Fr});const Lr=(0,hr.dataSlice)((0,ar.ripemd160)((0,ar.sha256)(Fr)),0,4);(0,hr.defineProperties)(this,{publicKey:Fr,fingerprint:Lr,parentFingerprint:jr,chainCode:Ur,path:qr,index:Hr,depth:Or})}connect(Tr){return new Rr(Ar,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,Tr)}get extendedKey(){return(0,hr.assert)(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Er((0,hr.concat)(["0x0488B21E",vr(this.depth,1),this.parentFingerprint,vr(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(Tr){const Br=(0,hr.getNumber)(Tr,"index");(0,hr.assertArgument)(Br<=4294967295,"invalid index","index",Br);let Fr=this.path;Fr&&(Fr+="/"+(Br&~wr),Br&wr&&(Fr+="'"));const{IR:jr,IL:Ur}=_r(Br,this.chainCode,this.publicKey,null),qr=ar.SigningKey.addPoints(Ur,this.publicKey,!0),Hr=(0,fr.computeAddress)(qr);return new Rr(Ar,Hr,qr,this.fingerprint,(0,hr.hexlify)(jr),Fr,Br,this.depth+1,this.provider)}derivePath(Tr){return Cr(this,Tr)}}cr.HDNodeVoidWallet=Rr;function Ir(Pr){const Tr=(0,hr.getNumber)(Pr,"index");return(0,hr.assertArgument)(Tr>=0&&Tr<wr,"invalid account index","index",Tr),`m/44'/60'/${Tr}'/0/0`}cr.getAccountPath=Ir;function Nr(Pr){const Tr=(0,hr.getNumber)(Pr,"index");return(0,hr.assertArgument)(Tr>=0&&Tr<wr,"invalid account index","index",Tr),`m/44'/60'/0'/0/${Tr}`}cr.getIndexedAccountPath=Nr}(hdwallet)),hdwallet}var jsonCrowdsale={},hasRequiredJsonCrowdsale;function requireJsonCrowdsale(){if(hasRequiredJsonCrowdsale)return jsonCrowdsale;hasRequiredJsonCrowdsale=1,Object.defineProperty(jsonCrowdsale,"__esModule",{value:!0}),jsonCrowdsale.decryptCrowdsaleJson=jsonCrowdsale.isCrowdsaleJson=void 0;const cr=require$$0,ar=requireAddress$2(),dr=requireCrypto(),fr=requireHash(),hr=requireUtils$1(),pr=requireUtils();function mr(yr){try{if(JSON.parse(yr).encseed)return!0}catch{}return!1}jsonCrowdsale.isCrowdsaleJson=mr;function gr(yr,xr){const wr=JSON.parse(yr),br=(0,pr.getPassword)(xr),Sr=(0,ar.getAddress)((0,pr.spelunk)(wr,"ethaddr:string!")),vr=(0,pr.looseArrayify)((0,pr.spelunk)(wr,"encseed:string!"));(0,hr.assertArgument)(vr&&vr.length%16===0,"invalid encseed","json",yr);const Er=(0,hr.getBytes)((0,dr.pbkdf2)(br,br,2e3,32,"sha256")).slice(0,16),Ar=vr.slice(0,16),_r=vr.slice(16),Cr=new cr.CBC(Er,Ar),kr=(0,cr.pkcs7Strip)((0,hr.getBytes)(Cr.decrypt(_r)));let Rr="";for(let Ir=0;Ir<kr.length;Ir++)Rr+=String.fromCharCode(kr[Ir]);return{address:Sr,privateKey:(0,fr.id)(Rr)}}return jsonCrowdsale.decryptCrowdsaleJson=gr,jsonCrowdsale}var wallet={},hasRequiredWallet$1;function requireWallet$1(){if(hasRequiredWallet$1)return wallet;hasRequiredWallet$1=1,Object.defineProperty(wallet,"__esModule",{value:!0}),wallet.Wallet=void 0;const cr=requireCrypto(),ar=requireUtils$1(),dr=requireBaseWallet(),fr=requireHdwallet(),hr=requireJsonCrowdsale(),pr=requireJsonKeystore(),mr=requireMnemonic();function gr(xr){return new Promise(wr=>{setTimeout(()=>{wr()},xr)})}class yr extends dr.BaseWallet{constructor(wr,br){typeof wr=="string"&&!wr.startsWith("0x")&&(wr="0x"+wr);let Sr=typeof wr=="string"?new cr.SigningKey(wr):wr;super(Sr,br)}connect(wr){return new yr(this.signingKey,wr)}async encrypt(wr,br){const Sr={address:this.address,privateKey:this.privateKey};return await(0,pr.encryptKeystoreJson)(Sr,wr,{progressCallback:br})}encryptSync(wr){const br={address:this.address,privateKey:this.privateKey};return(0,pr.encryptKeystoreJsonSync)(br,wr)}static#e(wr){if((0,ar.assertArgument)(wr,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in wr&&wr.mnemonic&&wr.mnemonic.locale==="en"){const Sr=mr.Mnemonic.fromEntropy(wr.mnemonic.entropy),vr=fr.HDNodeWallet.fromMnemonic(Sr,wr.mnemonic.path);if(vr.address===wr.address&&vr.privateKey===wr.privateKey)return vr;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const br=new yr(wr.privateKey);return(0,ar.assertArgument)(br.address===wr.address,"address/privateKey mismatch","json","[ REDACTED ]"),br}static async fromEncryptedJson(wr,br,Sr){let vr=null;return(0,pr.isKeystoreJson)(wr)?vr=await(0,pr.decryptKeystoreJson)(wr,br,Sr):(0,hr.isCrowdsaleJson)(wr)&&(Sr&&(Sr(0),await gr(0)),vr=(0,hr.decryptCrowdsaleJson)(wr,br),Sr&&(Sr(1),await gr(0))),yr.#e(vr)}static fromEncryptedJsonSync(wr,br){let Sr=null;return(0,pr.isKeystoreJson)(wr)?Sr=(0,pr.decryptKeystoreJsonSync)(wr,br):(0,hr.isCrowdsaleJson)(wr)?Sr=(0,hr.decryptCrowdsaleJson)(wr,br):(0,ar.assertArgument)(!1,"invalid JSON wallet","json","[ REDACTED ]"),yr.#e(Sr)}static createRandom(wr){const br=fr.HDNodeWallet.createRandom();return wr?br.connect(wr):br}static fromPhrase(wr,br){const Sr=fr.HDNodeWallet.fromPhrase(wr);return br?Sr.connect(br):Sr}}return wallet.Wallet=yr,wallet}var hasRequiredWallet;function requireWallet(){return hasRequiredWallet||(hasRequiredWallet=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.Wallet=cr.Mnemonic=cr.encryptKeystoreJsonSync=cr.encryptKeystoreJson=cr.decryptKeystoreJson=cr.decryptKeystoreJsonSync=cr.isKeystoreJson=cr.decryptCrowdsaleJson=cr.isCrowdsaleJson=cr.HDNodeVoidWallet=cr.HDNodeWallet=cr.getIndexedAccountPath=cr.getAccountPath=cr.defaultPath=cr.BaseWallet=void 0;var ar=requireBaseWallet();Object.defineProperty(cr,"BaseWallet",{enumerable:!0,get:function(){return ar.BaseWallet}});var dr=requireHdwallet();Object.defineProperty(cr,"defaultPath",{enumerable:!0,get:function(){return dr.defaultPath}}),Object.defineProperty(cr,"getAccountPath",{enumerable:!0,get:function(){return dr.getAccountPath}}),Object.defineProperty(cr,"getIndexedAccountPath",{enumerable:!0,get:function(){return dr.getIndexedAccountPath}}),Object.defineProperty(cr,"HDNodeWallet",{enumerable:!0,get:function(){return dr.HDNodeWallet}}),Object.defineProperty(cr,"HDNodeVoidWallet",{enumerable:!0,get:function(){return dr.HDNodeVoidWallet}});var fr=requireJsonCrowdsale();Object.defineProperty(cr,"isCrowdsaleJson",{enumerable:!0,get:function(){return fr.isCrowdsaleJson}}),Object.defineProperty(cr,"decryptCrowdsaleJson",{enumerable:!0,get:function(){return fr.decryptCrowdsaleJson}});var hr=requireJsonKeystore();Object.defineProperty(cr,"isKeystoreJson",{enumerable:!0,get:function(){return hr.isKeystoreJson}}),Object.defineProperty(cr,"decryptKeystoreJsonSync",{enumerable:!0,get:function(){return hr.decryptKeystoreJsonSync}}),Object.defineProperty(cr,"decryptKeystoreJson",{enumerable:!0,get:function(){return hr.decryptKeystoreJson}}),Object.defineProperty(cr,"encryptKeystoreJson",{enumerable:!0,get:function(){return hr.encryptKeystoreJson}}),Object.defineProperty(cr,"encryptKeystoreJsonSync",{enumerable:!0,get:function(){return hr.encryptKeystoreJsonSync}});var pr=requireMnemonic();Object.defineProperty(cr,"Mnemonic",{enumerable:!0,get:function(){return pr.Mnemonic}});var mr=requireWallet$1();Object.defineProperty(cr,"Wallet",{enumerable:!0,get:function(){return mr.Wallet}})}(wallet$1)),wallet$1}var wordlists={},wordlistOwla={},decodeOwla={},bitReader={},hasRequiredBitReader;function requireBitReader(){if(hasRequiredBitReader)return bitReader;hasRequiredBitReader=1,Object.defineProperty(bitReader,"__esModule",{value:!0}),bitReader.decodeBits=void 0;const cr=")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_";function ar(dr,fr){const hr=(1<<dr)-1,pr=[];let mr=0,gr=0,yr=0;for(let xr=0;xr<fr.length;xr++)for(mr=mr<<6|cr.indexOf(fr[xr]),gr+=6;gr>=dr;){const wr=mr>>gr-dr;mr&=(1<<gr-dr)-1,gr-=dr,wr===0?yr+=hr:(pr.push(wr+yr),yr=0)}return pr}return bitReader.decodeBits=ar,bitReader}var hasRequiredDecodeOwla;function requireDecodeOwla(){if(hasRequiredDecodeOwla)return decodeOwla;hasRequiredDecodeOwla=1,Object.defineProperty(decodeOwla,"__esModule",{value:!0}),decodeOwla.decodeOwlA=void 0;const cr=requireUtils$1(),ar=requireBitReader(),dr=requireDecodeOwl();function fr(hr,pr){let mr=(0,dr.decodeOwl)(hr).join(",");return pr.split(/,/g).forEach(gr=>{const yr=gr.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);(0,cr.assertArgument)(yr!==null,"internal error parsing accents","accents",pr);let xr=0;const wr=(0,ar.decodeBits)(parseInt(yr[3]),yr[4]),br=parseInt(yr[2]),Sr=new RegExp(`([${yr[1]}])`,"g");mr=mr.replace(Sr,(vr,Er)=>(--wr[xr]===0&&(Er=String.fromCharCode(Er.charCodeAt(0),br),xr++),Er))}),mr.split(",")}return decodeOwla.decodeOwlA=fr,decodeOwla}var hasRequiredWordlistOwla;function requireWordlistOwla(){if(hasRequiredWordlistOwla)return wordlistOwla;hasRequiredWordlistOwla=1,Object.defineProperty(wordlistOwla,"__esModule",{value:!0}),wordlistOwla.WordlistOwlA=void 0;const cr=requireWordlistOwl(),ar=requireDecodeOwla();class dr extends cr.WordlistOwl{#e;constructor(hr,pr,mr,gr){super(hr,pr,gr),this.#e=mr}get _accent(){return this.#e}_decodeWords(){return(0,ar.decodeOwlA)(this._data,this._accent)}}return wordlistOwla.WordlistOwlA=dr,wordlistOwla}var wordlistsBrowser={},hasRequiredWordlistsBrowser;function requireWordlistsBrowser(){if(hasRequiredWordlistsBrowser)return wordlistsBrowser;hasRequiredWordlistsBrowser=1,Object.defineProperty(wordlistsBrowser,"__esModule",{value:!0}),wordlistsBrowser.wordlists=void 0;const cr=requireLangEn();return wordlistsBrowser.wordlists={en:cr.LangEn.wordlist()},wordlistsBrowser}var hasRequiredWordlists;function requireWordlists(){return hasRequiredWordlists||(hasRequiredWordlists=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.wordlists=cr.WordlistOwlA=cr.WordlistOwl=cr.LangEn=cr.Wordlist=void 0;var ar=requireWordlist();Object.defineProperty(cr,"Wordlist",{enumerable:!0,get:function(){return ar.Wordlist}});var dr=requireLangEn();Object.defineProperty(cr,"LangEn",{enumerable:!0,get:function(){return dr.LangEn}});var fr=requireWordlistOwl();Object.defineProperty(cr,"WordlistOwl",{enumerable:!0,get:function(){return fr.WordlistOwl}});var hr=requireWordlistOwla();Object.defineProperty(cr,"WordlistOwlA",{enumerable:!0,get:function(){return hr.WordlistOwlA}});var pr=requireWordlistsBrowser();Object.defineProperty(cr,"wordlists",{enumerable:!0,get:function(){return pr.wordlists}})}(wordlists)),wordlists}var hasRequiredEthers;function requireEthers(){return hasRequiredEthers||(hasRequiredEthers=1,function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.ripemd160=cr.keccak256=cr.randomBytes=cr.computeHmac=cr.UndecodedEventLog=cr.EventLog=cr.ContractUnknownEventPayload=cr.ContractTransactionResponse=cr.ContractTransactionReceipt=cr.ContractEventPayload=cr.ContractFactory=cr.Contract=cr.BaseContract=cr.MessagePrefix=cr.EtherSymbol=cr.ZeroHash=cr.N=cr.MaxInt256=cr.MinInt256=cr.MaxUint256=cr.WeiPerEther=cr.ZeroAddress=cr.resolveAddress=cr.isAddress=cr.isAddressable=cr.getCreate2Address=cr.getCreateAddress=cr.getIcapAddress=cr.getAddress=cr.Typed=cr.TransactionDescription=cr.Result=cr.LogDescription=cr.Interface=cr.Indexed=cr.ErrorDescription=cr.checkResultErrors=cr.StructFragment=cr.ParamType=cr.NamedFragment=cr.FunctionFragment=cr.FallbackFragment=cr.Fragment=cr.EventFragment=cr.ErrorFragment=cr.ConstructorFragment=cr.AbiCoder=cr.encodeBytes32String=cr.decodeBytes32String=cr.version=void 0,cr.EtherscanPlugin=cr.EnsPlugin=cr.Network=cr.EnsResolver=cr.WebSocketProvider=cr.SocketProvider=cr.IpcSocketProvider=cr.QuickNodeProvider=cr.PocketProvider=cr.InfuraWebSocketProvider=cr.InfuraProvider=cr.EtherscanProvider=cr.CloudflareProvider=cr.AnkrProvider=cr.AlchemyProvider=cr.BrowserProvider=cr.JsonRpcSigner=cr.JsonRpcProvider=cr.JsonRpcApiProvider=cr.FallbackProvider=cr.AbstractProvider=cr.VoidSigner=cr.NonceManager=cr.AbstractSigner=cr.TransactionResponse=cr.TransactionReceipt=cr.Log=cr.FeeData=cr.Block=cr.getDefaultProvider=cr.verifyTypedData=cr.TypedDataEncoder=cr.solidityPackedSha256=cr.solidityPackedKeccak256=cr.solidityPacked=cr.verifyMessage=cr.hashMessage=cr.dnsEncode=cr.namehash=cr.isValidName=cr.ensNormalize=cr.id=cr.SigningKey=cr.Signature=cr.lock=cr.scryptSync=cr.scrypt=cr.pbkdf2=cr.sha512=cr.sha256=void 0,cr.toBeArray=cr.getUint=cr.getNumber=cr.getBigInt=cr.FixedNumber=cr.FetchCancelSignal=cr.FetchResponse=cr.FetchRequest=cr.EventPayload=cr.isError=cr.isCallException=cr.makeError=cr.assertPrivate=cr.assertNormalize=cr.assertArgumentCount=cr.assertArgument=cr.assert=cr.resolveProperties=cr.defineProperties=cr.zeroPadValue=cr.zeroPadBytes=cr.stripZerosLeft=cr.isBytesLike=cr.isHexString=cr.hexlify=cr.getBytesCopy=cr.getBytes=cr.dataSlice=cr.dataLength=cr.concat=cr.encodeBase64=cr.decodeBase64=cr.encodeBase58=cr.decodeBase58=cr.Transaction=cr.recoverAddress=cr.computeAddress=cr.accessListify=cr.showThrottleMessage=cr.copyRequest=cr.UnmanagedSubscriber=cr.SocketSubscriber=cr.SocketPendingSubscriber=cr.SocketEventSubscriber=cr.SocketBlockSubscriber=cr.MulticoinProviderPlugin=cr.NetworkPlugin=cr.GasCostPlugin=cr.FetchUrlFeeDataNetworkPlugin=cr.FeeDataNetworkPlugin=void 0,cr.wordlists=cr.WordlistOwlA=cr.WordlistOwl=cr.LangEn=cr.Wordlist=cr.encryptKeystoreJsonSync=cr.encryptKeystoreJson=cr.decryptKeystoreJson=cr.decryptKeystoreJsonSync=cr.decryptCrowdsaleJson=cr.isKeystoreJson=cr.isCrowdsaleJson=cr.getIndexedAccountPath=cr.getAccountPath=cr.defaultPath=cr.Wallet=cr.HDNodeVoidWallet=cr.HDNodeWallet=cr.BaseWallet=cr.Mnemonic=cr.uuidV4=cr.encodeRlp=cr.decodeRlp=cr.Utf8ErrorFuncs=cr.toUtf8String=cr.toUtf8CodePoints=cr.toUtf8Bytes=cr.parseUnits=cr.formatUnits=cr.parseEther=cr.formatEther=cr.mask=cr.toTwos=cr.fromTwos=cr.toQuantity=cr.toNumber=cr.toBeHex=cr.toBigInt=void 0;var ar=require_version();Object.defineProperty(cr,"version",{enumerable:!0,get:function(){return ar.version}});var dr=requireAbi();Object.defineProperty(cr,"decodeBytes32String",{enumerable:!0,get:function(){return dr.decodeBytes32String}}),Object.defineProperty(cr,"encodeBytes32String",{enumerable:!0,get:function(){return dr.encodeBytes32String}}),Object.defineProperty(cr,"AbiCoder",{enumerable:!0,get:function(){return dr.AbiCoder}}),Object.defineProperty(cr,"ConstructorFragment",{enumerable:!0,get:function(){return dr.ConstructorFragment}}),Object.defineProperty(cr,"ErrorFragment",{enumerable:!0,get:function(){return dr.ErrorFragment}}),Object.defineProperty(cr,"EventFragment",{enumerable:!0,get:function(){return dr.EventFragment}}),Object.defineProperty(cr,"Fragment",{enumerable:!0,get:function(){return dr.Fragment}}),Object.defineProperty(cr,"FallbackFragment",{enumerable:!0,get:function(){return dr.FallbackFragment}}),Object.defineProperty(cr,"FunctionFragment",{enumerable:!0,get:function(){return dr.FunctionFragment}}),Object.defineProperty(cr,"NamedFragment",{enumerable:!0,get:function(){return dr.NamedFragment}}),Object.defineProperty(cr,"ParamType",{enumerable:!0,get:function(){return dr.ParamType}}),Object.defineProperty(cr,"StructFragment",{enumerable:!0,get:function(){return dr.StructFragment}}),Object.defineProperty(cr,"checkResultErrors",{enumerable:!0,get:function(){return dr.checkResultErrors}}),Object.defineProperty(cr,"ErrorDescription",{enumerable:!0,get:function(){return dr.ErrorDescription}}),Object.defineProperty(cr,"Indexed",{enumerable:!0,get:function(){return dr.Indexed}}),Object.defineProperty(cr,"Interface",{enumerable:!0,get:function(){return dr.Interface}}),Object.defineProperty(cr,"LogDescription",{enumerable:!0,get:function(){return dr.LogDescription}}),Object.defineProperty(cr,"Result",{enumerable:!0,get:function(){return dr.Result}}),Object.defineProperty(cr,"TransactionDescription",{enumerable:!0,get:function(){return dr.TransactionDescription}}),Object.defineProperty(cr,"Typed",{enumerable:!0,get:function(){return dr.Typed}});var fr=requireAddress$2();Object.defineProperty(cr,"getAddress",{enumerable:!0,get:function(){return fr.getAddress}}),Object.defineProperty(cr,"getIcapAddress",{enumerable:!0,get:function(){return fr.getIcapAddress}}),Object.defineProperty(cr,"getCreateAddress",{enumerable:!0,get:function(){return fr.getCreateAddress}}),Object.defineProperty(cr,"getCreate2Address",{enumerable:!0,get:function(){return fr.getCreate2Address}}),Object.defineProperty(cr,"isAddressable",{enumerable:!0,get:function(){return fr.isAddressable}}),Object.defineProperty(cr,"isAddress",{enumerable:!0,get:function(){return fr.isAddress}}),Object.defineProperty(cr,"resolveAddress",{enumerable:!0,get:function(){return fr.resolveAddress}});var hr=requireConstants();Object.defineProperty(cr,"ZeroAddress",{enumerable:!0,get:function(){return hr.ZeroAddress}}),Object.defineProperty(cr,"WeiPerEther",{enumerable:!0,get:function(){return hr.WeiPerEther}}),Object.defineProperty(cr,"MaxUint256",{enumerable:!0,get:function(){return hr.MaxUint256}}),Object.defineProperty(cr,"MinInt256",{enumerable:!0,get:function(){return hr.MinInt256}}),Object.defineProperty(cr,"MaxInt256",{enumerable:!0,get:function(){return hr.MaxInt256}}),Object.defineProperty(cr,"N",{enumerable:!0,get:function(){return hr.N}}),Object.defineProperty(cr,"ZeroHash",{enumerable:!0,get:function(){return hr.ZeroHash}}),Object.defineProperty(cr,"EtherSymbol",{enumerable:!0,get:function(){return hr.EtherSymbol}}),Object.defineProperty(cr,"MessagePrefix",{enumerable:!0,get:function(){return hr.MessagePrefix}});var pr=requireContract();Object.defineProperty(cr,"BaseContract",{enumerable:!0,get:function(){return pr.BaseContract}}),Object.defineProperty(cr,"Contract",{enumerable:!0,get:function(){return pr.Contract}}),Object.defineProperty(cr,"ContractFactory",{enumerable:!0,get:function(){return pr.ContractFactory}}),Object.defineProperty(cr,"ContractEventPayload",{enumerable:!0,get:function(){return pr.ContractEventPayload}}),Object.defineProperty(cr,"ContractTransactionReceipt",{enumerable:!0,get:function(){return pr.ContractTransactionReceipt}}),Object.defineProperty(cr,"ContractTransactionResponse",{enumerable:!0,get:function(){return pr.ContractTransactionResponse}}),Object.defineProperty(cr,"ContractUnknownEventPayload",{enumerable:!0,get:function(){return pr.ContractUnknownEventPayload}}),Object.defineProperty(cr,"EventLog",{enumerable:!0,get:function(){return pr.EventLog}}),Object.defineProperty(cr,"UndecodedEventLog",{enumerable:!0,get:function(){return pr.UndecodedEventLog}});var mr=requireCrypto();Object.defineProperty(cr,"computeHmac",{enumerable:!0,get:function(){return mr.computeHmac}}),Object.defineProperty(cr,"randomBytes",{enumerable:!0,get:function(){return mr.randomBytes}}),Object.defineProperty(cr,"keccak256",{enumerable:!0,get:function(){return mr.keccak256}}),Object.defineProperty(cr,"ripemd160",{enumerable:!0,get:function(){return mr.ripemd160}}),Object.defineProperty(cr,"sha256",{enumerable:!0,get:function(){return mr.sha256}}),Object.defineProperty(cr,"sha512",{enumerable:!0,get:function(){return mr.sha512}}),Object.defineProperty(cr,"pbkdf2",{enumerable:!0,get:function(){return mr.pbkdf2}}),Object.defineProperty(cr,"scrypt",{enumerable:!0,get:function(){return mr.scrypt}}),Object.defineProperty(cr,"scryptSync",{enumerable:!0,get:function(){return mr.scryptSync}}),Object.defineProperty(cr,"lock",{enumerable:!0,get:function(){return mr.lock}}),Object.defineProperty(cr,"Signature",{enumerable:!0,get:function(){return mr.Signature}}),Object.defineProperty(cr,"SigningKey",{enumerable:!0,get:function(){return mr.SigningKey}});var gr=requireHash();Object.defineProperty(cr,"id",{enumerable:!0,get:function(){return gr.id}}),Object.defineProperty(cr,"ensNormalize",{enumerable:!0,get:function(){return gr.ensNormalize}}),Object.defineProperty(cr,"isValidName",{enumerable:!0,get:function(){return gr.isValidName}}),Object.defineProperty(cr,"namehash",{enumerable:!0,get:function(){return gr.namehash}}),Object.defineProperty(cr,"dnsEncode",{enumerable:!0,get:function(){return gr.dnsEncode}}),Object.defineProperty(cr,"hashMessage",{enumerable:!0,get:function(){return gr.hashMessage}}),Object.defineProperty(cr,"verifyMessage",{enumerable:!0,get:function(){return gr.verifyMessage}}),Object.defineProperty(cr,"solidityPacked",{enumerable:!0,get:function(){return gr.solidityPacked}}),Object.defineProperty(cr,"solidityPackedKeccak256",{enumerable:!0,get:function(){return gr.solidityPackedKeccak256}}),Object.defineProperty(cr,"solidityPackedSha256",{enumerable:!0,get:function(){return gr.solidityPackedSha256}}),Object.defineProperty(cr,"TypedDataEncoder",{enumerable:!0,get:function(){return gr.TypedDataEncoder}}),Object.defineProperty(cr,"verifyTypedData",{enumerable:!0,get:function(){return gr.verifyTypedData}});var yr=requireProviders();Object.defineProperty(cr,"getDefaultProvider",{enumerable:!0,get:function(){return yr.getDefaultProvider}}),Object.defineProperty(cr,"Block",{enumerable:!0,get:function(){return yr.Block}}),Object.defineProperty(cr,"FeeData",{enumerable:!0,get:function(){return yr.FeeData}}),Object.defineProperty(cr,"Log",{enumerable:!0,get:function(){return yr.Log}}),Object.defineProperty(cr,"TransactionReceipt",{enumerable:!0,get:function(){return yr.TransactionReceipt}}),Object.defineProperty(cr,"TransactionResponse",{enumerable:!0,get:function(){return yr.TransactionResponse}}),Object.defineProperty(cr,"AbstractSigner",{enumerable:!0,get:function(){return yr.AbstractSigner}}),Object.defineProperty(cr,"NonceManager",{enumerable:!0,get:function(){return yr.NonceManager}}),Object.defineProperty(cr,"VoidSigner",{enumerable:!0,get:function(){return yr.VoidSigner}}),Object.defineProperty(cr,"AbstractProvider",{enumerable:!0,get:function(){return yr.AbstractProvider}}),Object.defineProperty(cr,"FallbackProvider",{enumerable:!0,get:function(){return yr.FallbackProvider}}),Object.defineProperty(cr,"JsonRpcApiProvider",{enumerable:!0,get:function(){return yr.JsonRpcApiProvider}}),Object.defineProperty(cr,"JsonRpcProvider",{enumerable:!0,get:function(){return yr.JsonRpcProvider}}),Object.defineProperty(cr,"JsonRpcSigner",{enumerable:!0,get:function(){return yr.JsonRpcSigner}}),Object.defineProperty(cr,"BrowserProvider",{enumerable:!0,get:function(){return yr.BrowserProvider}}),Object.defineProperty(cr,"AlchemyProvider",{enumerable:!0,get:function(){return yr.AlchemyProvider}}),Object.defineProperty(cr,"AnkrProvider",{enumerable:!0,get:function(){return yr.AnkrProvider}}),Object.defineProperty(cr,"CloudflareProvider",{enumerable:!0,get:function(){return yr.CloudflareProvider}}),Object.defineProperty(cr,"EtherscanProvider",{enumerable:!0,get:function(){return yr.EtherscanProvider}}),Object.defineProperty(cr,"InfuraProvider",{enumerable:!0,get:function(){return yr.InfuraProvider}}),Object.defineProperty(cr,"InfuraWebSocketProvider",{enumerable:!0,get:function(){return yr.InfuraWebSocketProvider}}),Object.defineProperty(cr,"PocketProvider",{enumerable:!0,get:function(){return yr.PocketProvider}}),Object.defineProperty(cr,"QuickNodeProvider",{enumerable:!0,get:function(){return yr.QuickNodeProvider}}),Object.defineProperty(cr,"IpcSocketProvider",{enumerable:!0,get:function(){return yr.IpcSocketProvider}}),Object.defineProperty(cr,"SocketProvider",{enumerable:!0,get:function(){return yr.SocketProvider}}),Object.defineProperty(cr,"WebSocketProvider",{enumerable:!0,get:function(){return yr.WebSocketProvider}}),Object.defineProperty(cr,"EnsResolver",{enumerable:!0,get:function(){return yr.EnsResolver}}),Object.defineProperty(cr,"Network",{enumerable:!0,get:function(){return yr.Network}}),Object.defineProperty(cr,"EnsPlugin",{enumerable:!0,get:function(){return yr.EnsPlugin}}),Object.defineProperty(cr,"EtherscanPlugin",{enumerable:!0,get:function(){return yr.EtherscanPlugin}}),Object.defineProperty(cr,"FeeDataNetworkPlugin",{enumerable:!0,get:function(){return yr.FeeDataNetworkPlugin}}),Object.defineProperty(cr,"FetchUrlFeeDataNetworkPlugin",{enumerable:!0,get:function(){return yr.FetchUrlFeeDataNetworkPlugin}}),Object.defineProperty(cr,"GasCostPlugin",{enumerable:!0,get:function(){return yr.GasCostPlugin}}),Object.defineProperty(cr,"NetworkPlugin",{enumerable:!0,get:function(){return yr.NetworkPlugin}}),Object.defineProperty(cr,"MulticoinProviderPlugin",{enumerable:!0,get:function(){return yr.MulticoinProviderPlugin}}),Object.defineProperty(cr,"SocketBlockSubscriber",{enumerable:!0,get:function(){return yr.SocketBlockSubscriber}}),Object.defineProperty(cr,"SocketEventSubscriber",{enumerable:!0,get:function(){return yr.SocketEventSubscriber}}),Object.defineProperty(cr,"SocketPendingSubscriber",{enumerable:!0,get:function(){return yr.SocketPendingSubscriber}}),Object.defineProperty(cr,"SocketSubscriber",{enumerable:!0,get:function(){return yr.SocketSubscriber}}),Object.defineProperty(cr,"UnmanagedSubscriber",{enumerable:!0,get:function(){return yr.UnmanagedSubscriber}}),Object.defineProperty(cr,"copyRequest",{enumerable:!0,get:function(){return yr.copyRequest}}),Object.defineProperty(cr,"showThrottleMessage",{enumerable:!0,get:function(){return yr.showThrottleMessage}});var xr=requireTransaction();Object.defineProperty(cr,"accessListify",{enumerable:!0,get:function(){return xr.accessListify}}),Object.defineProperty(cr,"computeAddress",{enumerable:!0,get:function(){return xr.computeAddress}}),Object.defineProperty(cr,"recoverAddress",{enumerable:!0,get:function(){return xr.recoverAddress}}),Object.defineProperty(cr,"Transaction",{enumerable:!0,get:function(){return xr.Transaction}});var wr=requireUtils$1();Object.defineProperty(cr,"decodeBase58",{enumerable:!0,get:function(){return wr.decodeBase58}}),Object.defineProperty(cr,"encodeBase58",{enumerable:!0,get:function(){return wr.encodeBase58}}),Object.defineProperty(cr,"decodeBase64",{enumerable:!0,get:function(){return wr.decodeBase64}}),Object.defineProperty(cr,"encodeBase64",{enumerable:!0,get:function(){return wr.encodeBase64}}),Object.defineProperty(cr,"concat",{enumerable:!0,get:function(){return wr.concat}}),Object.defineProperty(cr,"dataLength",{enumerable:!0,get:function(){return wr.dataLength}}),Object.defineProperty(cr,"dataSlice",{enumerable:!0,get:function(){return wr.dataSlice}}),Object.defineProperty(cr,"getBytes",{enumerable:!0,get:function(){return wr.getBytes}}),Object.defineProperty(cr,"getBytesCopy",{enumerable:!0,get:function(){return wr.getBytesCopy}}),Object.defineProperty(cr,"hexlify",{enumerable:!0,get:function(){return wr.hexlify}}),Object.defineProperty(cr,"isHexString",{enumerable:!0,get:function(){return wr.isHexString}}),Object.defineProperty(cr,"isBytesLike",{enumerable:!0,get:function(){return wr.isBytesLike}}),Object.defineProperty(cr,"stripZerosLeft",{enumerable:!0,get:function(){return wr.stripZerosLeft}}),Object.defineProperty(cr,"zeroPadBytes",{enumerable:!0,get:function(){return wr.zeroPadBytes}}),Object.defineProperty(cr,"zeroPadValue",{enumerable:!0,get:function(){return wr.zeroPadValue}}),Object.defineProperty(cr,"defineProperties",{enumerable:!0,get:function(){return wr.defineProperties}}),Object.defineProperty(cr,"resolveProperties",{enumerable:!0,get:function(){return wr.resolveProperties}}),Object.defineProperty(cr,"assert",{enumerable:!0,get:function(){return wr.assert}}),Object.defineProperty(cr,"assertArgument",{enumerable:!0,get:function(){return wr.assertArgument}}),Object.defineProperty(cr,"assertArgumentCount",{enumerable:!0,get:function(){return wr.assertArgumentCount}}),Object.defineProperty(cr,"assertNormalize",{enumerable:!0,get:function(){return wr.assertNormalize}}),Object.defineProperty(cr,"assertPrivate",{enumerable:!0,get:function(){return wr.assertPrivate}}),Object.defineProperty(cr,"makeError",{enumerable:!0,get:function(){return wr.makeError}}),Object.defineProperty(cr,"isCallException",{enumerable:!0,get:function(){return wr.isCallException}}),Object.defineProperty(cr,"isError",{enumerable:!0,get:function(){return wr.isError}}),Object.defineProperty(cr,"EventPayload",{enumerable:!0,get:function(){return wr.EventPayload}}),Object.defineProperty(cr,"FetchRequest",{enumerable:!0,get:function(){return wr.FetchRequest}}),Object.defineProperty(cr,"FetchResponse",{enumerable:!0,get:function(){return wr.FetchResponse}}),Object.defineProperty(cr,"FetchCancelSignal",{enumerable:!0,get:function(){return wr.FetchCancelSignal}}),Object.defineProperty(cr,"FixedNumber",{enumerable:!0,get:function(){return wr.FixedNumber}}),Object.defineProperty(cr,"getBigInt",{enumerable:!0,get:function(){return wr.getBigInt}}),Object.defineProperty(cr,"getNumber",{enumerable:!0,get:function(){return wr.getNumber}}),Object.defineProperty(cr,"getUint",{enumerable:!0,get:function(){return wr.getUint}}),Object.defineProperty(cr,"toBeArray",{enumerable:!0,get:function(){return wr.toBeArray}}),Object.defineProperty(cr,"toBigInt",{enumerable:!0,get:function(){return wr.toBigInt}}),Object.defineProperty(cr,"toBeHex",{enumerable:!0,get:function(){return wr.toBeHex}}),Object.defineProperty(cr,"toNumber",{enumerable:!0,get:function(){return wr.toNumber}}),Object.defineProperty(cr,"toQuantity",{enumerable:!0,get:function(){return wr.toQuantity}}),Object.defineProperty(cr,"fromTwos",{enumerable:!0,get:function(){return wr.fromTwos}}),Object.defineProperty(cr,"toTwos",{enumerable:!0,get:function(){return wr.toTwos}}),Object.defineProperty(cr,"mask",{enumerable:!0,get:function(){return wr.mask}}),Object.defineProperty(cr,"formatEther",{enumerable:!0,get:function(){return wr.formatEther}}),Object.defineProperty(cr,"parseEther",{enumerable:!0,get:function(){return wr.parseEther}}),Object.defineProperty(cr,"formatUnits",{enumerable:!0,get:function(){return wr.formatUnits}}),Object.defineProperty(cr,"parseUnits",{enumerable:!0,get:function(){return wr.parseUnits}}),Object.defineProperty(cr,"toUtf8Bytes",{enumerable:!0,get:function(){return wr.toUtf8Bytes}}),Object.defineProperty(cr,"toUtf8CodePoints",{enumerable:!0,get:function(){return wr.toUtf8CodePoints}}),Object.defineProperty(cr,"toUtf8String",{enumerable:!0,get:function(){return wr.toUtf8String}}),Object.defineProperty(cr,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return wr.Utf8ErrorFuncs}}),Object.defineProperty(cr,"decodeRlp",{enumerable:!0,get:function(){return wr.decodeRlp}}),Object.defineProperty(cr,"encodeRlp",{enumerable:!0,get:function(){return wr.encodeRlp}}),Object.defineProperty(cr,"uuidV4",{enumerable:!0,get:function(){return wr.uuidV4}});var br=requireWallet();Object.defineProperty(cr,"Mnemonic",{enumerable:!0,get:function(){return br.Mnemonic}}),Object.defineProperty(cr,"BaseWallet",{enumerable:!0,get:function(){return br.BaseWallet}}),Object.defineProperty(cr,"HDNodeWallet",{enumerable:!0,get:function(){return br.HDNodeWallet}}),Object.defineProperty(cr,"HDNodeVoidWallet",{enumerable:!0,get:function(){return br.HDNodeVoidWallet}}),Object.defineProperty(cr,"Wallet",{enumerable:!0,get:function(){return br.Wallet}}),Object.defineProperty(cr,"defaultPath",{enumerable:!0,get:function(){return br.defaultPath}}),Object.defineProperty(cr,"getAccountPath",{enumerable:!0,get:function(){return br.getAccountPath}}),Object.defineProperty(cr,"getIndexedAccountPath",{enumerable:!0,get:function(){return br.getIndexedAccountPath}}),Object.defineProperty(cr,"isCrowdsaleJson",{enumerable:!0,get:function(){return br.isCrowdsaleJson}}),Object.defineProperty(cr,"isKeystoreJson",{enumerable:!0,get:function(){return br.isKeystoreJson}}),Object.defineProperty(cr,"decryptCrowdsaleJson",{enumerable:!0,get:function(){return br.decryptCrowdsaleJson}}),Object.defineProperty(cr,"decryptKeystoreJsonSync",{enumerable:!0,get:function(){return br.decryptKeystoreJsonSync}}),Object.defineProperty(cr,"decryptKeystoreJson",{enumerable:!0,get:function(){return br.decryptKeystoreJson}}),Object.defineProperty(cr,"encryptKeystoreJson",{enumerable:!0,get:function(){return br.encryptKeystoreJson}}),Object.defineProperty(cr,"encryptKeystoreJsonSync",{enumerable:!0,get:function(){return br.encryptKeystoreJsonSync}});var Sr=requireWordlists();Object.defineProperty(cr,"Wordlist",{enumerable:!0,get:function(){return Sr.Wordlist}}),Object.defineProperty(cr,"LangEn",{enumerable:!0,get:function(){return Sr.LangEn}}),Object.defineProperty(cr,"WordlistOwl",{enumerable:!0,get:function(){return Sr.WordlistOwl}}),Object.defineProperty(cr,"WordlistOwlA",{enumerable:!0,get:function(){return Sr.WordlistOwlA}}),Object.defineProperty(cr,"wordlists",{enumerable:!0,get:function(){return Sr.wordlists}})}(ethers)),ethers}(function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.ethers=void 0;const ar=require$$0$6,dr=ar.__importStar(requireEthers());cr.ethers=dr,ar.__exportStar(requireEthers(),cr)})(lib_commonjs);var _a$x,_b,_c;Object.defineProperty(ethersCompat,"__esModule",{value:!0});ethersCompat.getAddress=ethersCompat.hashMessage=ethersCompat.verifyMessage=void 0;const ethers_1$1=lib_commonjs;ethersCompat.verifyMessage=(_a$x=ethers_1$1.utils===null||ethers_1$1.utils===void 0?void 0:ethers_1$1.utils.verifyMessage)!==null&&_a$x!==void 0?_a$x:ethers_1$1.verifyMessage;ethersCompat.hashMessage=(_b=ethers_1$1.utils===null||ethers_1$1.utils===void 0?void 0:ethers_1$1.utils.hashMessage)!==null&&_b!==void 0?_b:ethers_1$1.hashMessage;ethersCompat.getAddress=(_c=ethers_1$1.utils===null||ethers_1$1.utils===void 0?void 0:ethers_1$1.utils.getAddress)!==null&&_c!==void 0?_c:ethers_1$1.getAddress;var types={};(function(cr){Object.defineProperty(cr,"__esModule",{value:!0}),cr.SiweErrorType=cr.SiweError=cr.VerifyOptsKeys=cr.VerifyParamsKeys=void 0,cr.VerifyParamsKeys=["signature","domain","nonce","time"],cr.VerifyOptsKeys=["provider","suppressExceptions","verificationFallback"];class ar{constructor(fr,hr,pr){this.type=fr,this.expected=hr,this.received=pr}}cr.SiweError=ar,function(dr){dr.EXPIRED_MESSAGE="Expired message.",dr.INVALID_DOMAIN="Invalid domain.",dr.DOMAIN_MISMATCH="Domain does not match provided domain for verification.",dr.NONCE_MISMATCH="Nonce does not match provided nonce for verification.",dr.INVALID_ADDRESS="Invalid address.",dr.INVALID_URI="URI does not conform to RFC 3986.",dr.INVALID_NONCE="Nonce size smaller then 8 characters or is not alphanumeric.",dr.NOT_YET_VALID_MESSAGE="Message is not valid yet.",dr.INVALID_SIGNATURE="Signature does not match address of the message.",dr.INVALID_TIME_FORMAT="Invalid time format.",dr.INVALID_MESSAGE_VERSION="Invalid message version.",dr.UNABLE_TO_PARSE="Unable to parse the message."}(cr.SiweErrorType||(cr.SiweErrorType={}))})(types);var utils={},__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(cr,ar,dr,fr){function hr(pr){return pr instanceof dr?pr:new dr(function(mr){mr(pr)})}return new(dr||(dr=Promise))(function(pr,mr){function gr(wr){try{xr(fr.next(wr))}catch(br){mr(br)}}function yr(wr){try{xr(fr.throw(wr))}catch(br){mr(br)}}function xr(wr){wr.done?pr(wr.value):hr(wr.value).then(gr,yr)}xr((fr=fr.apply(cr,ar||[])).next())})};Object.defineProperty(utils,"__esModule",{value:!0});utils.checkInvalidKeys=utils.isValidISO8601Date=utils.generateNonce=utils.checkContractWalletSignature=void 0;const random_1=random$1,ethers_1=lib_commonjs,ethersCompat_1$1=ethersCompat,EIP1271_ABI=["function isValidSignature(bytes32 _message, bytes _signature) public view returns (bytes4)"],EIP1271_MAGICVALUE="0x1626ba7e",ISO8601=/^(?<date>[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01]))[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(.[0-9]+)?(([Zz])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))$/,checkContractWalletSignature=(cr,ar,dr)=>__awaiter$1(void 0,void 0,void 0,function*(){if(!dr)return!1;const fr=new ethers_1.Contract(cr.address,EIP1271_ABI,dr),hr=(0,ethersCompat_1$1.hashMessage)(cr.prepareMessage());return(yield fr.isValidSignature(hr,ar))==EIP1271_MAGICVALUE});utils.checkContractWalletSignature=checkContractWalletSignature;const generateNonce=()=>{const cr=(0,random_1.randomStringForEntropy)(96);if(!cr||cr.length<8)throw new Error("Error during nonce creation.");return cr};utils.generateNonce=generateNonce;const isValidISO8601Date=cr=>{const ar=ISO8601.exec(cr);if(!cr)return!1;const dr=new Date(ar.groups.date).toISOString(),fr=ISO8601.exec(dr);return ar.groups.date===fr.groups.date};utils.isValidISO8601Date=isValidISO8601Date;const checkInvalidKeys=(cr,ar)=>{const dr=[];return Object.keys(cr).forEach(fr=>{ar.includes(fr)||dr.push(fr)}),dr};utils.checkInvalidKeys=checkInvalidKeys;var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(cr,ar,dr,fr){fr===void 0&&(fr=dr);var hr=Object.getOwnPropertyDescriptor(ar,dr);(!hr||("get"in hr?!ar.__esModule:hr.writable||hr.configurable))&&(hr={enumerable:!0,get:function(){return ar[dr]}}),Object.defineProperty(cr,fr,hr)}:function(cr,ar,dr,fr){fr===void 0&&(fr=dr),cr[fr]=ar[dr]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(cr,ar){Object.defineProperty(cr,"default",{enumerable:!0,value:ar})}:function(cr,ar){cr.default=ar}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(cr){if(cr&&cr.__esModule)return cr;var ar={};if(cr!=null)for(var dr in cr)dr!=="default"&&Object.prototype.hasOwnProperty.call(cr,dr)&&__createBinding(ar,cr,dr);return __setModuleDefault(ar,cr),ar},__awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(cr,ar,dr,fr){function hr(pr){return pr instanceof dr?pr:new dr(function(mr){mr(pr)})}return new(dr||(dr=Promise))(function(pr,mr){function gr(wr){try{xr(fr.next(wr))}catch(br){mr(br)}}function yr(wr){try{xr(fr.throw(wr))}catch(br){mr(br)}}function xr(wr){wr.done?pr(wr.value):hr(wr.value).then(gr,yr)}xr((fr=fr.apply(cr,ar||[])).next())})};Object.defineProperty(client,"__esModule",{value:!0});client.SiweMessage=void 0;const siwe_parser_1=parsers,uri=__importStar(validUrlExports),ethersCompat_1=ethersCompat,types_1=types,utils_1=utils;class SiweMessage{constructor(ar){if(typeof ar=="string"){const dr=new siwe_parser_1.ParsedMessage(ar);this.domain=dr.domain,this.address=dr.address,this.statement=dr.statement,this.uri=dr.uri,this.version=dr.version,this.nonce=dr.nonce,this.issuedAt=dr.issuedAt,this.expirationTime=dr.expirationTime,this.notBefore=dr.notBefore,this.requestId=dr.requestId,this.chainId=dr.chainId,this.resources=dr.resources}else Object.assign(this,ar),typeof this.chainId=="string"&&(this.chainId=(0,siwe_parser_1.parseIntegerNumber)(this.chainId));this.nonce=this.nonce||(0,utils_1.generateNonce)(),this.validateMessage()}toMessage(){this.validateMessage();const ar=`${this.domain} wants you to sign in with your Ethereum account:`,dr=`URI: ${this.uri}`;let fr=[ar,this.address].join(`
`);const hr=`Version: ${this.version}`;this.nonce||(this.nonce=(0,utils_1.generateNonce)());const pr="Chain ID: "+this.chainId||"1",mr=`Nonce: ${this.nonce}`,gr=[dr,hr,pr,mr];if(this.issuedAt=this.issuedAt||new Date().toISOString(),gr.push(`Issued At: ${this.issuedAt}`),this.expirationTime){const xr=`Expiration Time: ${this.expirationTime}`;gr.push(xr)}this.notBefore&&gr.push(`Not Before: ${this.notBefore}`),this.requestId&&gr.push(`Request ID: ${this.requestId}`),this.resources&&gr.push(["Resources:",...this.resources.map(xr=>`- ${xr}`)].join(`
`));const yr=gr.join(`
`);return fr=[fr,this.statement].join(`

`),this.statement&&(fr+=`
`),[fr,yr].join(`
`)}prepareMessage(){let ar;switch(this.version){case"1":{ar=this.toMessage();break}default:{ar=this.toMessage();break}}return ar}validate(ar,dr){return __awaiter(this,void 0,void 0,function*(){return console.warn("validate() has been deprecated, please update your code to use verify(). validate() may be removed in future versions."),this.verify({signature:ar},{provider:dr,suppressExceptions:!1}).then(({data:fr})=>fr).catch(({error:fr})=>{throw fr})})}verify(ar,dr={suppressExceptions:!1}){return __awaiter(this,void 0,void 0,function*(){return new Promise((fr,hr)=>{var pr,mr,gr;const yr=kr=>dr.suppressExceptions?fr(kr):hr(kr),xr=(0,utils_1.checkInvalidKeys)(ar,types_1.VerifyParamsKeys);xr.length>0&&yr({success:!1,data:this,error:new Error(`${xr.join(", ")} is/are not valid key(s) for VerifyParams.`)});const wr=(0,utils_1.checkInvalidKeys)(dr,types_1.VerifyOptsKeys);xr.length>0&&yr({success:!1,data:this,error:new Error(`${wr.join(", ")} is/are not valid key(s) for VerifyOpts.`)});const{signature:br,domain:Sr,nonce:vr,time:Er}=ar;Sr&&Sr!==this.domain&&yr({success:!1,data:this,error:new types_1.SiweError(types_1.SiweErrorType.DOMAIN_MISMATCH,Sr,this.domain)}),vr&&vr!==this.nonce&&yr({success:!1,data:this,error:new types_1.SiweError(types_1.SiweErrorType.NONCE_MISMATCH,vr,this.nonce)});const Ar=new Date(Er||new Date);if(this.expirationTime){const kr=new Date(this.expirationTime);Ar.getTime()>=kr.getTime()&&yr({success:!1,data:this,error:new types_1.SiweError(types_1.SiweErrorType.EXPIRED_MESSAGE,`${Ar.toISOString()} < ${kr.toISOString()}`,`${Ar.toISOString()} >= ${kr.toISOString()}`)})}if(this.notBefore){const kr=new Date(this.notBefore);Ar.getTime()<kr.getTime()&&yr({success:!1,data:this,error:new types_1.SiweError(types_1.SiweErrorType.NOT_YET_VALID_MESSAGE,`${Ar.toISOString()} >= ${kr.toISOString()}`,`${Ar.toISOString()} < ${kr.toISOString()}`)})}let _r;try{_r=this.prepareMessage()}catch(kr){yr({success:!1,data:this,error:kr})}let Cr;try{Cr=(0,ethersCompat_1.verifyMessage)(_r,br)}catch(kr){console.error(kr)}if(Cr===this.address)return fr({success:!0,data:this});{const kr=(0,utils_1.checkContractWalletSignature)(this,br,dr.provider).then(Rr=>Rr?{success:!0,data:this}:{success:!1,data:this,error:new types_1.SiweError(types_1.SiweErrorType.INVALID_SIGNATURE,Cr,`Resolved address to be ${this.address}`)}).catch(Rr=>({success:!1,data:this,error:Rr}));Promise.all([kr,(gr=(mr=(pr=dr?.verificationFallback)===null||pr===void 0?void 0:pr.call(dr,ar,dr,this,kr))===null||mr===void 0?void 0:mr.then(Rr=>Rr))===null||gr===void 0?void 0:gr.catch(Rr=>Rr)]).then(([Rr,Ir])=>{if(Ir){if(Ir.success)return fr(Ir);yr(Ir)}else{if(Rr.success)return fr(Rr);yr(Rr)}})}})})}validateMessage(...ar){var dr;if(ar.length>0)throw new types_1.SiweError(types_1.SiweErrorType.UNABLE_TO_PARSE,"Unexpected argument in the validateMessage function.");if(!this.domain||this.domain.length===0||!/[^#?]*/.test(this.domain))throw new types_1.SiweError(types_1.SiweErrorType.INVALID_DOMAIN,`${this.domain} to be a valid domain.`);if(!(0,siwe_parser_1.isEIP55Address)(this.address))throw new types_1.SiweError(types_1.SiweErrorType.INVALID_ADDRESS,(0,ethersCompat_1.getAddress)(this.address),this.address);if(!uri.isUri(this.uri))throw new types_1.SiweError(types_1.SiweErrorType.INVALID_URI,`${this.uri} to be a valid uri.`);if(this.version!=="1")throw new types_1.SiweError(types_1.SiweErrorType.INVALID_MESSAGE_VERSION,"1",this.version);const fr=(dr=this===null||this===void 0?void 0:this.nonce)===null||dr===void 0?void 0:dr.match(/[a-zA-Z0-9]{8,}/);if(!fr||this.nonce.length<8||fr[0]!==this.nonce)throw new types_1.SiweError(types_1.SiweErrorType.INVALID_NONCE,`Length > 8 (${fr.length}). Alphanumeric.`,this.nonce);if(this.issuedAt&&!(0,utils_1.isValidISO8601Date)(this.issuedAt))throw new Error(types_1.SiweErrorType.INVALID_TIME_FORMAT);if(this.expirationTime&&!(0,utils_1.isValidISO8601Date)(this.expirationTime))throw new Error(types_1.SiweErrorType.INVALID_TIME_FORMAT);if(this.notBefore&&!(0,utils_1.isValidISO8601Date)(this.notBefore))throw new Error(types_1.SiweErrorType.INVALID_TIME_FORMAT)}}client.SiweMessage=SiweMessage;(function(cr){var ar=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(fr,hr,pr,mr){mr===void 0&&(mr=pr);var gr=Object.getOwnPropertyDescriptor(hr,pr);(!gr||("get"in gr?!hr.__esModule:gr.writable||gr.configurable))&&(gr={enumerable:!0,get:function(){return hr[pr]}}),Object.defineProperty(fr,mr,gr)}:function(fr,hr,pr,mr){mr===void 0&&(mr=pr),fr[mr]=hr[pr]}),dr=commonjsGlobal&&commonjsGlobal.__exportStar||function(fr,hr){for(var pr in fr)pr!=="default"&&!Object.prototype.hasOwnProperty.call(hr,pr)&&ar(hr,fr,pr)};Object.defineProperty(cr,"__esModule",{value:!0}),dr(client,cr),dr(types,cr),dr(utils,cr)})(siwe);function equals$5(cr,ar){if(cr===ar)return!0;if(cr.byteLength!==ar.byteLength)return!1;for(let dr=0;dr<cr.byteLength;dr++)if(cr[dr]!==ar[dr])return!1;return!0}function coerce$1(cr){if(cr instanceof Uint8Array&&cr.constructor.name==="Uint8Array")return cr;if(cr instanceof ArrayBuffer)return new Uint8Array(cr);if(ArrayBuffer.isView(cr))return new Uint8Array(cr.buffer,cr.byteOffset,cr.byteLength);throw new Error("Unknown type, must be binary type")}function fromString$4(cr){return new TextEncoder().encode(cr)}function toString$5(cr){return new TextDecoder().decode(cr)}function base$2(cr,ar){if(cr.length>=255)throw new TypeError("Alphabet too long");for(var dr=new Uint8Array(256),fr=0;fr<dr.length;fr++)dr[fr]=255;for(var hr=0;hr<cr.length;hr++){var pr=cr.charAt(hr),mr=pr.charCodeAt(0);if(dr[mr]!==255)throw new TypeError(pr+" is ambiguous");dr[mr]=hr}var gr=cr.length,yr=cr.charAt(0),xr=Math.log(gr)/Math.log(256),wr=Math.log(256)/Math.log(gr);function br(Er){if(Er instanceof Uint8Array||(ArrayBuffer.isView(Er)?Er=new Uint8Array(Er.buffer,Er.byteOffset,Er.byteLength):Array.isArray(Er)&&(Er=Uint8Array.from(Er))),!(Er instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Er.length===0)return"";for(var Ar=0,_r=0,Cr=0,kr=Er.length;Cr!==kr&&Er[Cr]===0;)Cr++,Ar++;for(var Rr=(kr-Cr)*wr+1>>>0,Ir=new Uint8Array(Rr);Cr!==kr;){for(var Nr=Er[Cr],Pr=0,Tr=Rr-1;(Nr!==0||Pr<_r)&&Tr!==-1;Tr--,Pr++)Nr+=256*Ir[Tr]>>>0,Ir[Tr]=Nr%gr>>>0,Nr=Nr/gr>>>0;if(Nr!==0)throw new Error("Non-zero carry");_r=Pr,Cr++}for(var Br=Rr-_r;Br!==Rr&&Ir[Br]===0;)Br++;for(var Fr=yr.repeat(Ar);Br<Rr;++Br)Fr+=cr.charAt(Ir[Br]);return Fr}function Sr(Er){if(typeof Er!="string")throw new TypeError("Expected String");if(Er.length===0)return new Uint8Array;var Ar=0;if(Er[Ar]!==" "){for(var _r=0,Cr=0;Er[Ar]===yr;)_r++,Ar++;for(var kr=(Er.length-Ar)*xr+1>>>0,Rr=new Uint8Array(kr);Er[Ar];){var Ir=dr[Er.charCodeAt(Ar)];if(Ir===255)return;for(var Nr=0,Pr=kr-1;(Ir!==0||Nr<Cr)&&Pr!==-1;Pr--,Nr++)Ir+=gr*Rr[Pr]>>>0,Rr[Pr]=Ir%256>>>0,Ir=Ir/256>>>0;if(Ir!==0)throw new Error("Non-zero carry");Cr=Nr,Ar++}if(Er[Ar]!==" "){for(var Tr=kr-Cr;Tr!==kr&&Rr[Tr]===0;)Tr++;for(var Br=new Uint8Array(_r+(kr-Tr)),Fr=_r;Tr!==kr;)Br[Fr++]=Rr[Tr++];return Br}}}function vr(Er){var Ar=Sr(Er);if(Ar)return Ar;throw new Error(`Non-${ar} character`)}return{encode:br,decodeUnsafe:Sr,decode:vr}}var src$1=base$2,_brrp__multiformats_scope_baseX$1=src$1;let Encoder$2=class{name;prefix;baseEncode;constructor(ar,dr,fr){this.name=ar,this.prefix=dr,this.baseEncode=fr}encode(ar){if(ar instanceof Uint8Array)return`${this.prefix}${this.baseEncode(ar)}`;throw Error("Unknown type, must be binary type")}},Decoder$2=class{name;prefix;baseDecode;prefixCodePoint;constructor(ar,dr,fr){if(this.name=ar,this.prefix=dr,dr.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=dr.codePointAt(0),this.baseDecode=fr}decode(ar){if(typeof ar=="string"){if(ar.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(ar)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(ar.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(ar){return or$3(this,ar)}},ComposedDecoder$1=class{decoders;constructor(ar){this.decoders=ar}or(ar){return or$3(this,ar)}decode(ar){const dr=ar[0],fr=this.decoders[dr];if(fr!=null)return fr.decode(ar);throw RangeError(`Unable to decode multibase string ${JSON.stringify(ar)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function or$3(cr,ar){return new ComposedDecoder$1({...cr.decoders??{[cr.prefix]:cr},...ar.decoders??{[ar.prefix]:ar}})}let Codec$1=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(ar,dr,fr,hr){this.name=ar,this.prefix=dr,this.baseEncode=fr,this.baseDecode=hr,this.encoder=new Encoder$2(ar,dr,fr),this.decoder=new Decoder$2(ar,dr,hr)}encode(ar){return this.encoder.encode(ar)}decode(ar){return this.decoder.decode(ar)}};function from$3({name:cr,prefix:ar,encode:dr,decode:fr}){return new Codec$1(cr,ar,dr,fr)}function baseX$1({name:cr,prefix:ar,alphabet:dr}){const{encode:fr,decode:hr}=_brrp__multiformats_scope_baseX$1(dr,cr);return from$3({prefix:ar,name:cr,encode:fr,decode:pr=>coerce$1(hr(pr))})}function decode$f(cr,ar,dr,fr){const hr={};for(let wr=0;wr<ar.length;++wr)hr[ar[wr]]=wr;let pr=cr.length;for(;cr[pr-1]==="=";)--pr;const mr=new Uint8Array(pr*dr/8|0);let gr=0,yr=0,xr=0;for(let wr=0;wr<pr;++wr){const br=hr[cr[wr]];if(br===void 0)throw new SyntaxError(`Non-${fr} character`);yr=yr<<dr|br,gr+=dr,gr>=8&&(gr-=8,mr[xr++]=255&yr>>gr)}if(gr>=dr||255&yr<<8-gr)throw new SyntaxError("Unexpected end of data");return mr}function encode$e(cr,ar,dr){const fr=ar[ar.length-1]==="=",hr=(1<<dr)-1;let pr="",mr=0,gr=0;for(let yr=0;yr<cr.length;++yr)for(gr=gr<<8|cr[yr],mr+=8;mr>dr;)mr-=dr,pr+=ar[hr&gr>>mr];if(mr!==0&&(pr+=ar[hr&gr<<dr-mr]),fr)for(;pr.length*dr&7;)pr+="=";return pr}function rfc4648$1({name:cr,prefix:ar,bitsPerChar:dr,alphabet:fr}){return from$3({prefix:ar,name:cr,encode(hr){return encode$e(hr,fr,dr)},decode(hr){return decode$f(hr,fr,dr,cr)}})}const base32$2=rfc4648$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$1=rfc4648$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$1=rfc4648$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$1=rfc4648$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$1=rfc4648$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$1=rfc4648$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$1=rfc4648$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$1=rfc4648$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$1=rfc4648$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$3=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$2,base32hex:base32hex$1,base32hexpad:base32hexpad$1,base32hexpadupper:base32hexpadupper$1,base32hexupper:base32hexupper$1,base32pad:base32pad$1,base32padupper:base32padupper$1,base32upper:base32upper$1,base32z:base32z$1},Symbol.toStringTag,{value:"Module"})),base58btc$1=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$1=baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$1,base58flickr:base58flickr$1},Symbol.toStringTag,{value:"Module"})),base64$4=rfc4648$1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$1=rfc4648$1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$1=rfc4648$1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$1=rfc4648$1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$5=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$4,base64pad:base64pad$1,base64url:base64url$1,base64urlpad:base64urlpad$1},Symbol.toStringTag,{value:"Module"}));debug.formatters.b=cr=>cr==null?"undefined":base58btc$1.baseEncode(cr);debug.formatters.t=cr=>cr==null?"undefined":base32$2.baseEncode(cr);debug.formatters.m=cr=>cr==null?"undefined":base64$4.baseEncode(cr);debug.formatters.p=cr=>cr==null?"undefined":cr.toString();debug.formatters.c=cr=>cr==null?"undefined":cr.toString();debug.formatters.k=cr=>cr==null?"undefined":cr.toString();debug.formatters.a=cr=>cr==null?"undefined":cr.toString();function createDisabledLogger(cr){const ar=()=>{};return ar.enabled=!1,ar.color="",ar.diff=0,ar.log=()=>{},ar.namespace=cr,ar.destroy=()=>!0,ar.extend=()=>ar,ar}function defaultLogger(){return{forComponent(cr){return logger(cr)}}}function logger(cr){let ar=createDisabledLogger(`${cr}:trace`);return debug.enabled(`${cr}:trace`)&&debug.names.map(dr=>dr.toString()).find(dr=>dr.includes(":trace"))!=null&&(ar=debug(`${cr}:trace`)),Object.assign(debug(cr),{error:debug(`${cr}:error`),trace:ar})}function number$2(cr){if(!Number.isSafeInteger(cr)||cr<0)throw new Error(`Wrong positive integer: ${cr}`)}function isBytes$2(cr){return cr instanceof Uint8Array||cr!=null&&typeof cr=="object"&&cr.constructor.name==="Uint8Array"}function bytes$1(cr,...ar){if(!isBytes$2(cr))throw new Error("Expected Uint8Array");if(ar.length>0&&!ar.includes(cr.length))throw new Error(`Expected Uint8Array of length ${ar}, not of length=${cr.length}`)}function hash$1(cr){if(typeof cr!="function"||typeof cr.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$2(cr.outputLen),number$2(cr.blockLen)}function exists$1(cr,ar=!0){if(cr.destroyed)throw new Error("Hash instance has been destroyed");if(ar&&cr.finished)throw new Error("Hash#digest() has already been called")}function output$1(cr,ar){bytes$1(cr);const dr=ar.outputLen;if(cr.length<dr)throw new Error(`digestInto() expects output buffer of length at least ${dr}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8=cr=>new Uint8Array(cr.buffer,cr.byteOffset,cr.byteLength),u32$1=cr=>new Uint32Array(cr.buffer,cr.byteOffset,Math.floor(cr.byteLength/4));function isBytes$1(cr){return cr instanceof Uint8Array||cr!=null&&typeof cr=="object"&&cr.constructor.name==="Uint8Array"}const createView$1=cr=>new DataView(cr.buffer,cr.byteOffset,cr.byteLength),rotr=(cr,ar)=>cr<<32-ar|cr>>>ar,isLE$1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE$1)throw new Error("Non little-endian hardware is not supported");const hexes$1=Array.from({length:256},(cr,ar)=>ar.toString(16).padStart(2,"0"));function bytesToHex$1(cr){if(!isBytes$1(cr))throw new Error("Uint8Array expected");let ar="";for(let dr=0;dr<cr.length;dr++)ar+=hexes$1[cr[dr]];return ar}const asciis$1={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16$1(cr){if(cr>=asciis$1._0&&cr<=asciis$1._9)return cr-asciis$1._0;if(cr>=asciis$1._A&&cr<=asciis$1._F)return cr-(asciis$1._A-10);if(cr>=asciis$1._a&&cr<=asciis$1._f)return cr-(asciis$1._a-10)}function hexToBytes$1(cr){if(typeof cr!="string")throw new Error("hex string expected, got "+typeof cr);const ar=cr.length,dr=ar/2;if(ar%2)throw new Error("padded hex string expected, got unpadded hex of length "+ar);const fr=new Uint8Array(dr);for(let hr=0,pr=0;hr<dr;hr++,pr+=2){const mr=asciiToBase16$1(cr.charCodeAt(pr)),gr=asciiToBase16$1(cr.charCodeAt(pr+1));if(mr===void 0||gr===void 0){const yr=cr[pr]+cr[pr+1];throw new Error('hex string expected, got non-hex character "'+yr+'" at index '+pr)}fr[hr]=mr*16+gr}return fr}const nextTick=async()=>{};async function asyncLoop(cr,ar,dr){let fr=Date.now();for(let hr=0;hr<cr;hr++){dr(hr);const pr=Date.now()-fr;pr>=0&&pr<ar||(await nextTick(),fr+=pr)}}function utf8ToBytes$3(cr){if(typeof cr!="string")throw new Error(`utf8ToBytes expected string, got ${typeof cr}`);return new Uint8Array(new TextEncoder().encode(cr))}function toBytes$2(cr){if(typeof cr=="string"&&(cr=utf8ToBytes$3(cr)),!isBytes$1(cr))throw new Error(`expected Uint8Array, got ${typeof cr}`);return cr}function concatBytes$1(...cr){let ar=0;for(let fr=0;fr<cr.length;fr++){const hr=cr[fr];if(!isBytes$1(hr))throw new Error("Uint8Array expected");ar+=hr.length}const dr=new Uint8Array(ar);for(let fr=0,hr=0;fr<cr.length;fr++){const pr=cr[fr];dr.set(pr,hr),hr+=pr.length}return dr}class Hash{clone(){return this._cloneInto()}}const toStr={}.toString;function checkOpts$1(cr,ar){if(ar!==void 0&&toStr.call(ar)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(cr,ar)}function wrapConstructor(cr){const ar=fr=>cr().update(toBytes$2(fr)).digest(),dr=cr();return ar.outputLen=dr.outputLen,ar.blockLen=dr.blockLen,ar.create=()=>cr(),ar}function wrapXOFConstructorWithOpts(cr){const ar=(fr,hr)=>cr(hr).update(toBytes$2(fr)).digest(),dr=cr({});return ar.outputLen=dr.outputLen,ar.blockLen=dr.blockLen,ar.create=fr=>cr(fr),ar}function randomBytes$2(cr=32){if(crypto$3&&typeof crypto$3.getRandomValues=="function")return crypto$3.getRandomValues(new Uint8Array(cr));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64$1(cr,ar,dr,fr){if(typeof cr.setBigUint64=="function")return cr.setBigUint64(ar,dr,fr);const hr=BigInt(32),pr=BigInt(4294967295),mr=Number(dr>>hr&pr),gr=Number(dr&pr),yr=fr?4:0,xr=fr?0:4;cr.setUint32(ar+yr,mr,fr),cr.setUint32(ar+xr,gr,fr)}class SHA2 extends Hash{constructor(ar,dr,fr,hr){super(),this.blockLen=ar,this.outputLen=dr,this.padOffset=fr,this.isLE=hr,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(ar),this.view=createView$1(this.buffer)}update(ar){exists$1(this);const{view:dr,buffer:fr,blockLen:hr}=this;ar=toBytes$2(ar);const pr=ar.length;for(let mr=0;mr<pr;){const gr=Math.min(hr-this.pos,pr-mr);if(gr===hr){const yr=createView$1(ar);for(;hr<=pr-mr;mr+=hr)this.process(yr,mr);continue}fr.set(ar.subarray(mr,mr+gr),this.pos),this.pos+=gr,mr+=gr,this.pos===hr&&(this.process(dr,0),this.pos=0)}return this.length+=ar.length,this.roundClean(),this}digestInto(ar){exists$1(this),output$1(ar,this),this.finished=!0;const{buffer:dr,view:fr,blockLen:hr,isLE:pr}=this;let{pos:mr}=this;dr[mr++]=128,this.buffer.subarray(mr).fill(0),this.padOffset>hr-mr&&(this.process(fr,0),mr=0);for(let br=mr;br<hr;br++)dr[br]=0;setBigUint64$1(fr,hr-8,BigInt(this.length*8),pr),this.process(fr,0);const gr=createView$1(ar),yr=this.outputLen;if(yr%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const xr=yr/4,wr=this.get();if(xr>wr.length)throw new Error("_sha2: outputLen bigger than state");for(let br=0;br<xr;br++)gr.setUint32(4*br,wr[br],pr)}digest(){const{buffer:ar,outputLen:dr}=this;this.digestInto(ar);const fr=ar.slice(0,dr);return this.destroy(),fr}_cloneInto(ar){ar||(ar=new this.constructor),ar.set(...this.get());const{blockLen:dr,buffer:fr,length:hr,finished:pr,destroyed:mr,pos:gr}=this;return ar.length=hr,ar.pos=gr,ar.finished=pr,ar.destroyed=mr,hr%dr&&ar.buffer.set(fr),ar}}const U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(cr,ar=!1){return ar?{h:Number(cr&U32_MASK64),l:Number(cr>>_32n&U32_MASK64)}:{h:Number(cr>>_32n&U32_MASK64)|0,l:Number(cr&U32_MASK64)|0}}function split(cr,ar=!1){let dr=new Uint32Array(cr.length),fr=new Uint32Array(cr.length);for(let hr=0;hr<cr.length;hr++){const{h:pr,l:mr}=fromBig(cr[hr],ar);[dr[hr],fr[hr]]=[pr,mr]}return[dr,fr]}const toBig=(cr,ar)=>BigInt(cr>>>0)<<_32n|BigInt(ar>>>0),shrSH=(cr,ar,dr)=>cr>>>dr,shrSL=(cr,ar,dr)=>cr<<32-dr|ar>>>dr,rotrSH=(cr,ar,dr)=>cr>>>dr|ar<<32-dr,rotrSL=(cr,ar,dr)=>cr<<32-dr|ar>>>dr,rotrBH=(cr,ar,dr)=>cr<<64-dr|ar>>>dr-32,rotrBL=(cr,ar,dr)=>cr>>>dr-32|ar<<64-dr,rotr32H=(cr,ar)=>ar,rotr32L=(cr,ar)=>cr,rotlSH=(cr,ar,dr)=>cr<<dr|ar>>>32-dr,rotlSL=(cr,ar,dr)=>ar<<dr|cr>>>32-dr,rotlBH=(cr,ar,dr)=>ar<<dr-32|cr>>>64-dr,rotlBL=(cr,ar,dr)=>cr<<dr-32|ar>>>64-dr;function add(cr,ar,dr,fr){const hr=(ar>>>0)+(fr>>>0);return{h:cr+dr+(hr/2**32|0)|0,l:hr|0}}const add3L=(cr,ar,dr)=>(cr>>>0)+(ar>>>0)+(dr>>>0),add3H=(cr,ar,dr,fr)=>ar+dr+fr+(cr/2**32|0)|0,add4L=(cr,ar,dr,fr)=>(cr>>>0)+(ar>>>0)+(dr>>>0)+(fr>>>0),add4H=(cr,ar,dr,fr,hr)=>ar+dr+fr+hr+(cr/2**32|0)|0,add5L=(cr,ar,dr,fr,hr)=>(cr>>>0)+(ar>>>0)+(dr>>>0)+(fr>>>0)+(hr>>>0),add5H=(cr,ar,dr,fr,hr,pr)=>ar+dr+fr+hr+pr+(cr/2**32|0)|0,u64={fromBig,split,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add,add3L,add3H,add4L,add4H,add5H,add5L},[SHA512_Kh,SHA512_Kl]=(()=>u64.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(cr=>BigInt(cr))))(),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);class SHA512 extends SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:ar,Al:dr,Bh:fr,Bl:hr,Ch:pr,Cl:mr,Dh:gr,Dl:yr,Eh:xr,El:wr,Fh:br,Fl:Sr,Gh:vr,Gl:Er,Hh:Ar,Hl:_r}=this;return[ar,dr,fr,hr,pr,mr,gr,yr,xr,wr,br,Sr,vr,Er,Ar,_r]}set(ar,dr,fr,hr,pr,mr,gr,yr,xr,wr,br,Sr,vr,Er,Ar,_r){this.Ah=ar|0,this.Al=dr|0,this.Bh=fr|0,this.Bl=hr|0,this.Ch=pr|0,this.Cl=mr|0,this.Dh=gr|0,this.Dl=yr|0,this.Eh=xr|0,this.El=wr|0,this.Fh=br|0,this.Fl=Sr|0,this.Gh=vr|0,this.Gl=Er|0,this.Hh=Ar|0,this.Hl=_r|0}process(ar,dr){for(let Rr=0;Rr<16;Rr++,dr+=4)SHA512_W_H[Rr]=ar.getUint32(dr),SHA512_W_L[Rr]=ar.getUint32(dr+=4);for(let Rr=16;Rr<80;Rr++){const Ir=SHA512_W_H[Rr-15]|0,Nr=SHA512_W_L[Rr-15]|0,Pr=u64.rotrSH(Ir,Nr,1)^u64.rotrSH(Ir,Nr,8)^u64.shrSH(Ir,Nr,7),Tr=u64.rotrSL(Ir,Nr,1)^u64.rotrSL(Ir,Nr,8)^u64.shrSL(Ir,Nr,7),Br=SHA512_W_H[Rr-2]|0,Fr=SHA512_W_L[Rr-2]|0,jr=u64.rotrSH(Br,Fr,19)^u64.rotrBH(Br,Fr,61)^u64.shrSH(Br,Fr,6),Ur=u64.rotrSL(Br,Fr,19)^u64.rotrBL(Br,Fr,61)^u64.shrSL(Br,Fr,6),qr=u64.add4L(Tr,Ur,SHA512_W_L[Rr-7],SHA512_W_L[Rr-16]),Hr=u64.add4H(qr,Pr,jr,SHA512_W_H[Rr-7],SHA512_W_H[Rr-16]);SHA512_W_H[Rr]=Hr|0,SHA512_W_L[Rr]=qr|0}let{Ah:fr,Al:hr,Bh:pr,Bl:mr,Ch:gr,Cl:yr,Dh:xr,Dl:wr,Eh:br,El:Sr,Fh:vr,Fl:Er,Gh:Ar,Gl:_r,Hh:Cr,Hl:kr}=this;for(let Rr=0;Rr<80;Rr++){const Ir=u64.rotrSH(br,Sr,14)^u64.rotrSH(br,Sr,18)^u64.rotrBH(br,Sr,41),Nr=u64.rotrSL(br,Sr,14)^u64.rotrSL(br,Sr,18)^u64.rotrBL(br,Sr,41),Pr=br&vr^~br&Ar,Tr=Sr&Er^~Sr&_r,Br=u64.add5L(kr,Nr,Tr,SHA512_Kl[Rr],SHA512_W_L[Rr]),Fr=u64.add5H(Br,Cr,Ir,Pr,SHA512_Kh[Rr],SHA512_W_H[Rr]),jr=Br|0,Ur=u64.rotrSH(fr,hr,28)^u64.rotrBH(fr,hr,34)^u64.rotrBH(fr,hr,39),qr=u64.rotrSL(fr,hr,28)^u64.rotrBL(fr,hr,34)^u64.rotrBL(fr,hr,39),Hr=fr&pr^fr&gr^pr&gr,Or=hr&mr^hr&yr^mr&yr;Cr=Ar|0,kr=_r|0,Ar=vr|0,_r=Er|0,vr=br|0,Er=Sr|0,{h:br,l:Sr}=u64.add(xr|0,wr|0,Fr|0,jr|0),xr=gr|0,wr=yr|0,gr=pr|0,yr=mr|0,pr=fr|0,mr=hr|0;const Mr=u64.add3L(jr,qr,Or);fr=u64.add3H(Mr,Fr,Ur,Hr),hr=Mr|0}({h:fr,l:hr}=u64.add(this.Ah|0,this.Al|0,fr|0,hr|0)),{h:pr,l:mr}=u64.add(this.Bh|0,this.Bl|0,pr|0,mr|0),{h:gr,l:yr}=u64.add(this.Ch|0,this.Cl|0,gr|0,yr|0),{h:xr,l:wr}=u64.add(this.Dh|0,this.Dl|0,xr|0,wr|0),{h:br,l:Sr}=u64.add(this.Eh|0,this.El|0,br|0,Sr|0),{h:vr,l:Er}=u64.add(this.Fh|0,this.Fl|0,vr|0,Er|0),{h:Ar,l:_r}=u64.add(this.Gh|0,this.Gl|0,Ar|0,_r|0),{h:Cr,l:kr}=u64.add(this.Hh|0,this.Hl|0,Cr|0,kr|0),this.set(fr,hr,pr,mr,gr,yr,xr,wr,br,Sr,vr,Er,Ar,_r,Cr,kr)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sha512$1=wrapConstructor(()=>new SHA512);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$5=BigInt(0),_1n$7=BigInt(1),_2n$4=BigInt(2);function isBytes(cr){return cr instanceof Uint8Array||cr!=null&&typeof cr=="object"&&cr.constructor.name==="Uint8Array"}const hexes=Array.from({length:256},(cr,ar)=>ar.toString(16).padStart(2,"0"));function bytesToHex(cr){if(!isBytes(cr))throw new Error("Uint8Array expected");let ar="";for(let dr=0;dr<cr.length;dr++)ar+=hexes[cr[dr]];return ar}function numberToHexUnpadded(cr){const ar=cr.toString(16);return ar.length&1?`0${ar}`:ar}function hexToNumber(cr){if(typeof cr!="string")throw new Error("hex string expected, got "+typeof cr);return BigInt(cr===""?"0":`0x${cr}`)}const asciis={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16(cr){if(cr>=asciis._0&&cr<=asciis._9)return cr-asciis._0;if(cr>=asciis._A&&cr<=asciis._F)return cr-(asciis._A-10);if(cr>=asciis._a&&cr<=asciis._f)return cr-(asciis._a-10)}function hexToBytes(cr){if(typeof cr!="string")throw new Error("hex string expected, got "+typeof cr);const ar=cr.length,dr=ar/2;if(ar%2)throw new Error("padded hex string expected, got unpadded hex of length "+ar);const fr=new Uint8Array(dr);for(let hr=0,pr=0;hr<dr;hr++,pr+=2){const mr=asciiToBase16(cr.charCodeAt(pr)),gr=asciiToBase16(cr.charCodeAt(pr+1));if(mr===void 0||gr===void 0){const yr=cr[pr]+cr[pr+1];throw new Error('hex string expected, got non-hex character "'+yr+'" at index '+pr)}fr[hr]=mr*16+gr}return fr}function bytesToNumberBE(cr){return hexToNumber(bytesToHex(cr))}function bytesToNumberLE(cr){if(!isBytes(cr))throw new Error("Uint8Array expected");return hexToNumber(bytesToHex(Uint8Array.from(cr).reverse()))}function numberToBytesBE(cr,ar){return hexToBytes(cr.toString(16).padStart(ar*2,"0"))}function numberToBytesLE(cr,ar){return numberToBytesBE(cr,ar).reverse()}function numberToVarBytesBE(cr){return hexToBytes(numberToHexUnpadded(cr))}function ensureBytes$1(cr,ar,dr){let fr;if(typeof ar=="string")try{fr=hexToBytes(ar)}catch(pr){throw new Error(`${cr} must be valid hex string, got "${ar}". Cause: ${pr}`)}else if(isBytes(ar))fr=Uint8Array.from(ar);else throw new Error(`${cr} must be hex string or Uint8Array`);const hr=fr.length;if(typeof dr=="number"&&hr!==dr)throw new Error(`${cr} expected ${dr} bytes, got ${hr}`);return fr}function concatBytes(...cr){let ar=0;for(let hr=0;hr<cr.length;hr++){const pr=cr[hr];if(!isBytes(pr))throw new Error("Uint8Array expected");ar+=pr.length}let dr=new Uint8Array(ar),fr=0;for(let hr=0;hr<cr.length;hr++){const pr=cr[hr];dr.set(pr,fr),fr+=pr.length}return dr}function equalBytes$1(cr,ar){if(cr.length!==ar.length)return!1;let dr=0;for(let fr=0;fr<cr.length;fr++)dr|=cr[fr]^ar[fr];return dr===0}function utf8ToBytes$2(cr){if(typeof cr!="string")throw new Error(`utf8ToBytes expected string, got ${typeof cr}`);return new Uint8Array(new TextEncoder().encode(cr))}function bitLen(cr){let ar;for(ar=0;cr>_0n$5;cr>>=_1n$7,ar+=1);return ar}function bitGet(cr,ar){return cr>>BigInt(ar)&_1n$7}const bitSet=(cr,ar,dr)=>cr|(dr?_1n$7:_0n$5)<<BigInt(ar),bitMask=cr=>(_2n$4<<BigInt(cr-1))-_1n$7,u8n=cr=>new Uint8Array(cr),u8fr=cr=>Uint8Array.from(cr);function createHmacDrbg(cr,ar,dr){if(typeof cr!="number"||cr<2)throw new Error("hashLen must be a number");if(typeof ar!="number"||ar<2)throw new Error("qByteLen must be a number");if(typeof dr!="function")throw new Error("hmacFn must be a function");let fr=u8n(cr),hr=u8n(cr),pr=0;const mr=()=>{fr.fill(1),hr.fill(0),pr=0},gr=(...br)=>dr(hr,fr,...br),yr=(br=u8n())=>{hr=gr(u8fr([0]),br),fr=gr(),br.length!==0&&(hr=gr(u8fr([1]),br),fr=gr())},xr=()=>{if(pr++>=1e3)throw new Error("drbg: tried 1000 values");let br=0;const Sr=[];for(;br<ar;){fr=gr();const vr=fr.slice();Sr.push(vr),br+=fr.length}return concatBytes(...Sr)};return(br,Sr)=>{mr(),yr(br);let vr;for(;!(vr=Sr(xr()));)yr();return mr(),vr}}const validatorFns={bigint:cr=>typeof cr=="bigint",function:cr=>typeof cr=="function",boolean:cr=>typeof cr=="boolean",string:cr=>typeof cr=="string",stringOrUint8Array:cr=>typeof cr=="string"||isBytes(cr),isSafeInteger:cr=>Number.isSafeInteger(cr),array:cr=>Array.isArray(cr),field:(cr,ar)=>ar.Fp.isValid(cr),hash:cr=>typeof cr=="function"&&Number.isSafeInteger(cr.outputLen)};function validateObject(cr,ar,dr={}){const fr=(hr,pr,mr)=>{const gr=validatorFns[pr];if(typeof gr!="function")throw new Error(`Invalid validator "${pr}", expected function`);const yr=cr[hr];if(!(mr&&yr===void 0)&&!gr(yr,cr))throw new Error(`Invalid param ${String(hr)}=${yr} (${typeof yr}), expected ${pr}`)};for(const[hr,pr]of Object.entries(ar))fr(hr,pr,!1);for(const[hr,pr]of Object.entries(dr))fr(hr,pr,!0);return cr}const ut=Object.freeze(Object.defineProperty({__proto__:null,bitGet,bitLen,bitMask,bitSet,bytesToHex,bytesToNumberBE,bytesToNumberLE,concatBytes,createHmacDrbg,ensureBytes:ensureBytes$1,equalBytes:equalBytes$1,hexToBytes,hexToNumber,isBytes,numberToBytesBE,numberToBytesLE,numberToHexUnpadded,numberToVarBytesBE,utf8ToBytes:utf8ToBytes$2,validateObject},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$4=BigInt(0),_1n$6=BigInt(1),_2n$3=BigInt(2),_3n$1=BigInt(3),_4n=BigInt(4),_5n$1=BigInt(5),_8n$1=BigInt(8);BigInt(9);BigInt(16);function mod(cr,ar){const dr=cr%ar;return dr>=_0n$4?dr:ar+dr}function pow(cr,ar,dr){if(dr<=_0n$4||ar<_0n$4)throw new Error("Expected power/modulo > 0");if(dr===_1n$6)return _0n$4;let fr=_1n$6;for(;ar>_0n$4;)ar&_1n$6&&(fr=fr*cr%dr),cr=cr*cr%dr,ar>>=_1n$6;return fr}function pow2(cr,ar,dr){let fr=cr;for(;ar-- >_0n$4;)fr*=fr,fr%=dr;return fr}function invert(cr,ar){if(cr===_0n$4||ar<=_0n$4)throw new Error(`invert: expected positive integers, got n=${cr} mod=${ar}`);let dr=mod(cr,ar),fr=ar,hr=_0n$4,pr=_1n$6;for(;dr!==_0n$4;){const gr=fr/dr,yr=fr%dr,xr=hr-pr*gr;fr=dr,dr=yr,hr=pr,pr=xr}if(fr!==_1n$6)throw new Error("invert: does not exist");return mod(hr,ar)}function tonelliShanks(cr){const ar=(cr-_1n$6)/_2n$3;let dr,fr,hr;for(dr=cr-_1n$6,fr=0;dr%_2n$3===_0n$4;dr/=_2n$3,fr++);for(hr=_2n$3;hr<cr&&pow(hr,ar,cr)!==cr-_1n$6;hr++);if(fr===1){const mr=(cr+_1n$6)/_4n;return function(yr,xr){const wr=yr.pow(xr,mr);if(!yr.eql(yr.sqr(wr),xr))throw new Error("Cannot find square root");return wr}}const pr=(dr+_1n$6)/_2n$3;return function(gr,yr){if(gr.pow(yr,ar)===gr.neg(gr.ONE))throw new Error("Cannot find square root");let xr=fr,wr=gr.pow(gr.mul(gr.ONE,hr),dr),br=gr.pow(yr,pr),Sr=gr.pow(yr,dr);for(;!gr.eql(Sr,gr.ONE);){if(gr.eql(Sr,gr.ZERO))return gr.ZERO;let vr=1;for(let Ar=gr.sqr(Sr);vr<xr&&!gr.eql(Ar,gr.ONE);vr++)Ar=gr.sqr(Ar);const Er=gr.pow(wr,_1n$6<<BigInt(xr-vr-1));wr=gr.sqr(Er),br=gr.mul(br,Er),Sr=gr.mul(Sr,wr),xr=vr}return br}}function FpSqrt(cr){if(cr%_4n===_3n$1){const ar=(cr+_1n$6)/_4n;return function(fr,hr){const pr=fr.pow(hr,ar);if(!fr.eql(fr.sqr(pr),hr))throw new Error("Cannot find square root");return pr}}if(cr%_8n$1===_5n$1){const ar=(cr-_5n$1)/_8n$1;return function(fr,hr){const pr=fr.mul(hr,_2n$3),mr=fr.pow(pr,ar),gr=fr.mul(hr,mr),yr=fr.mul(fr.mul(gr,_2n$3),mr),xr=fr.mul(gr,fr.sub(yr,fr.ONE));if(!fr.eql(fr.sqr(xr),hr))throw new Error("Cannot find square root");return xr}}return tonelliShanks(cr)}const isNegativeLE=(cr,ar)=>(mod(cr,ar)&_1n$6)===_1n$6,FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(cr){const ar={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},dr=FIELD_FIELDS.reduce((fr,hr)=>(fr[hr]="function",fr),ar);return validateObject(cr,dr)}function FpPow(cr,ar,dr){if(dr<_0n$4)throw new Error("Expected power > 0");if(dr===_0n$4)return cr.ONE;if(dr===_1n$6)return ar;let fr=cr.ONE,hr=ar;for(;dr>_0n$4;)dr&_1n$6&&(fr=cr.mul(fr,hr)),hr=cr.sqr(hr),dr>>=_1n$6;return fr}function FpInvertBatch(cr,ar){const dr=new Array(ar.length),fr=ar.reduce((pr,mr,gr)=>cr.is0(mr)?pr:(dr[gr]=pr,cr.mul(pr,mr)),cr.ONE),hr=cr.inv(fr);return ar.reduceRight((pr,mr,gr)=>cr.is0(mr)?pr:(dr[gr]=cr.mul(pr,dr[gr]),cr.mul(pr,mr)),hr),dr}function nLength(cr,ar){const dr=ar!==void 0?ar:cr.toString(2).length,fr=Math.ceil(dr/8);return{nBitLength:dr,nByteLength:fr}}function Field(cr,ar,dr=!1,fr={}){if(cr<=_0n$4)throw new Error(`Expected Field ORDER > 0, got ${cr}`);const{nBitLength:hr,nByteLength:pr}=nLength(cr,ar);if(pr>2048)throw new Error("Field lengths over 2048 bytes are not supported");const mr=FpSqrt(cr),gr=Object.freeze({ORDER:cr,BITS:hr,BYTES:pr,MASK:bitMask(hr),ZERO:_0n$4,ONE:_1n$6,create:yr=>mod(yr,cr),isValid:yr=>{if(typeof yr!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof yr}`);return _0n$4<=yr&&yr<cr},is0:yr=>yr===_0n$4,isOdd:yr=>(yr&_1n$6)===_1n$6,neg:yr=>mod(-yr,cr),eql:(yr,xr)=>yr===xr,sqr:yr=>mod(yr*yr,cr),add:(yr,xr)=>mod(yr+xr,cr),sub:(yr,xr)=>mod(yr-xr,cr),mul:(yr,xr)=>mod(yr*xr,cr),pow:(yr,xr)=>FpPow(gr,yr,xr),div:(yr,xr)=>mod(yr*invert(xr,cr),cr),sqrN:yr=>yr*yr,addN:(yr,xr)=>yr+xr,subN:(yr,xr)=>yr-xr,mulN:(yr,xr)=>yr*xr,inv:yr=>invert(yr,cr),sqrt:fr.sqrt||(yr=>mr(gr,yr)),invertBatch:yr=>FpInvertBatch(gr,yr),cmov:(yr,xr,wr)=>wr?xr:yr,toBytes:yr=>dr?numberToBytesLE(yr,pr):numberToBytesBE(yr,pr),fromBytes:yr=>{if(yr.length!==pr)throw new Error(`Fp.fromBytes: expected ${pr}, got ${yr.length}`);return dr?bytesToNumberLE(yr):bytesToNumberBE(yr)}});return Object.freeze(gr)}function FpSqrtEven(cr,ar){if(!cr.isOdd)throw new Error("Field doesn't have isOdd");const dr=cr.sqrt(ar);return cr.isOdd(dr)?cr.neg(dr):dr}function getFieldBytesLength(cr){if(typeof cr!="bigint")throw new Error("field order must be bigint");const ar=cr.toString(2).length;return Math.ceil(ar/8)}function getMinHashLength(cr){const ar=getFieldBytesLength(cr);return ar+Math.ceil(ar/2)}function mapHashToField(cr,ar,dr=!1){const fr=cr.length,hr=getFieldBytesLength(ar),pr=getMinHashLength(ar);if(fr<16||fr<pr||fr>1024)throw new Error(`expected ${pr}-1024 bytes of input, got ${fr}`);const mr=dr?bytesToNumberBE(cr):bytesToNumberLE(cr),gr=mod(mr,ar-_1n$6)+_1n$6;return dr?numberToBytesLE(gr,hr):numberToBytesBE(gr,hr)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$5=BigInt(1);function wNAF(cr,ar){const dr=(hr,pr)=>{const mr=pr.negate();return hr?mr:pr},fr=hr=>{const pr=Math.ceil(ar/hr)+1,mr=2**(hr-1);return{windows:pr,windowSize:mr}};return{constTimeNegate:dr,unsafeLadder(hr,pr){let mr=cr.ZERO,gr=hr;for(;pr>_0n$3;)pr&_1n$5&&(mr=mr.add(gr)),gr=gr.double(),pr>>=_1n$5;return mr},precomputeWindow(hr,pr){const{windows:mr,windowSize:gr}=fr(pr),yr=[];let xr=hr,wr=xr;for(let br=0;br<mr;br++){wr=xr,yr.push(wr);for(let Sr=1;Sr<gr;Sr++)wr=wr.add(xr),yr.push(wr);xr=wr.double()}return yr},wNAF(hr,pr,mr){const{windows:gr,windowSize:yr}=fr(hr);let xr=cr.ZERO,wr=cr.BASE;const br=BigInt(2**hr-1),Sr=2**hr,vr=BigInt(hr);for(let Er=0;Er<gr;Er++){const Ar=Er*yr;let _r=Number(mr&br);mr>>=vr,_r>yr&&(_r-=Sr,mr+=_1n$5);const Cr=Ar,kr=Ar+Math.abs(_r)-1,Rr=Er%2!==0,Ir=_r<0;_r===0?wr=wr.add(dr(Rr,pr[Cr])):xr=xr.add(dr(Ir,pr[kr]))}return{p:xr,f:wr}},wNAFCached(hr,pr,mr,gr){const yr=hr._WINDOW_SIZE||1;let xr=pr.get(hr);return xr||(xr=this.precomputeWindow(hr,yr),yr!==1&&pr.set(hr,gr(xr))),this.wNAF(yr,xr,mr)}}}function validateBasic(cr){return validateField(cr.Fp),validateObject(cr,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(cr.n,cr.nBitLength),...cr,p:cr.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0),_1n$4=BigInt(1),_2n$2=BigInt(2),_8n=BigInt(8),VERIFY_DEFAULT={zip215:!0};function validateOpts$2(cr){const ar=validateBasic(cr);return validateObject(cr,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...ar})}function twistedEdwards(cr){const ar=validateOpts$2(cr),{Fp:dr,n:fr,prehash:hr,hash:pr,randomBytes:mr,nByteLength:gr,h:yr}=ar,xr=_2n$2<<BigInt(gr*8)-_1n$4,wr=dr.create,br=ar.uvRatio||((Jr,es)=>{try{return{isValid:!0,value:dr.sqrt(Jr*dr.inv(es))}}catch{return{isValid:!1,value:_0n$2}}}),Sr=ar.adjustScalarBytes||(Jr=>Jr),vr=ar.domain||((Jr,es,ns)=>{if(es.length||ns)throw new Error("Contexts/pre-hash are not supported");return Jr}),Er=Jr=>typeof Jr=="bigint"&&_0n$2<Jr,Ar=(Jr,es)=>Er(Jr)&&Er(es)&&Jr<es,_r=Jr=>Jr===_0n$2||Ar(Jr,xr);function Cr(Jr,es){if(Ar(Jr,es))return Jr;throw new Error(`Expected valid scalar < ${es}, got ${typeof Jr} ${Jr}`)}function kr(Jr){return Jr===_0n$2?Jr:Cr(Jr,fr)}const Rr=new Map;function Ir(Jr){if(!(Jr instanceof Nr))throw new Error("ExtendedPoint expected")}class Nr{constructor(es,ns,Qr,zr){if(this.ex=es,this.ey=ns,this.ez=Qr,this.et=zr,!_r(es))throw new Error("x required");if(!_r(ns))throw new Error("y required");if(!_r(Qr))throw new Error("z required");if(!_r(zr))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(es){if(es instanceof Nr)throw new Error("extended point not allowed");const{x:ns,y:Qr}=es||{};if(!_r(ns)||!_r(Qr))throw new Error("invalid affine point");return new Nr(ns,Qr,_1n$4,wr(ns*Qr))}static normalizeZ(es){const ns=dr.invertBatch(es.map(Qr=>Qr.ez));return es.map((Qr,zr)=>Qr.toAffine(ns[zr])).map(Nr.fromAffine)}_setWindowSize(es){this._WINDOW_SIZE=es,Rr.delete(this)}assertValidity(){const{a:es,d:ns}=ar;if(this.is0())throw new Error("bad point: ZERO");const{ex:Qr,ey:zr,ez:Wr,et:ss}=this,Xr=wr(Qr*Qr),ts=wr(zr*zr),fs=wr(Wr*Wr),rs=wr(fs*fs),as=wr(Xr*es),ps=wr(fs*wr(as+ts)),xs=wr(rs+wr(ns*wr(Xr*ts)));if(ps!==xs)throw new Error("bad point: equation left != right (1)");const Ss=wr(Qr*zr),Ns=wr(Wr*ss);if(Ss!==Ns)throw new Error("bad point: equation left != right (2)")}equals(es){Ir(es);const{ex:ns,ey:Qr,ez:zr}=this,{ex:Wr,ey:ss,ez:Xr}=es,ts=wr(ns*Xr),fs=wr(Wr*zr),rs=wr(Qr*Xr),as=wr(ss*zr);return ts===fs&&rs===as}is0(){return this.equals(Nr.ZERO)}negate(){return new Nr(wr(-this.ex),this.ey,this.ez,wr(-this.et))}double(){const{a:es}=ar,{ex:ns,ey:Qr,ez:zr}=this,Wr=wr(ns*ns),ss=wr(Qr*Qr),Xr=wr(_2n$2*wr(zr*zr)),ts=wr(es*Wr),fs=ns+Qr,rs=wr(wr(fs*fs)-Wr-ss),as=ts+ss,ps=as-Xr,xs=ts-ss,Ss=wr(rs*ps),Ns=wr(as*xs),Ts=wr(rs*xs),os=wr(ps*as);return new Nr(Ss,Ns,os,Ts)}add(es){Ir(es);const{a:ns,d:Qr}=ar,{ex:zr,ey:Wr,ez:ss,et:Xr}=this,{ex:ts,ey:fs,ez:rs,et:as}=es;if(ns===BigInt(-1)){const Os=wr((Wr-zr)*(fs+ts)),Ms=wr((Wr+zr)*(fs-ts)),zs=wr(Ms-Os);if(zs===_0n$2)return this.double();const Hs=wr(ss*_2n$2*as),Cs=wr(Xr*_2n$2*rs),ls=Cs+Hs,Kr=Ms+Os,Zr=Cs-Hs,hs=wr(ls*zs),ys=wr(Kr*Zr),Es=wr(ls*Zr),Is=wr(zs*Kr);return new Nr(hs,ys,Is,Es)}const ps=wr(zr*ts),xs=wr(Wr*fs),Ss=wr(Xr*Qr*as),Ns=wr(ss*rs),Ts=wr((zr+Wr)*(ts+fs)-ps-xs),os=Ns-Ss,bs=Ns+Ss,ws=wr(xs-ns*ps),As=wr(Ts*os),gs=wr(bs*ws),vs=wr(Ts*ws),Ps=wr(os*bs);return new Nr(As,gs,Ps,vs)}subtract(es){return this.add(es.negate())}wNAF(es){return Br.wNAFCached(this,Rr,es,Nr.normalizeZ)}multiply(es){const{p:ns,f:Qr}=this.wNAF(Cr(es,fr));return Nr.normalizeZ([ns,Qr])[0]}multiplyUnsafe(es){let ns=kr(es);return ns===_0n$2?Tr:this.equals(Tr)||ns===_1n$4?this:this.equals(Pr)?this.wNAF(ns).p:Br.unsafeLadder(this,ns)}isSmallOrder(){return this.multiplyUnsafe(yr).is0()}isTorsionFree(){return Br.unsafeLadder(this,fr).is0()}toAffine(es){const{ex:ns,ey:Qr,ez:zr}=this,Wr=this.is0();es==null&&(es=Wr?_8n:dr.inv(zr));const ss=wr(ns*es),Xr=wr(Qr*es),ts=wr(zr*es);if(Wr)return{x:_0n$2,y:_1n$4};if(ts!==_1n$4)throw new Error("invZ was invalid");return{x:ss,y:Xr}}clearCofactor(){const{h:es}=ar;return es===_1n$4?this:this.multiplyUnsafe(es)}static fromHex(es,ns=!1){const{d:Qr,a:zr}=ar,Wr=dr.BYTES;es=ensureBytes$1("pointHex",es,Wr);const ss=es.slice(),Xr=es[Wr-1];ss[Wr-1]=Xr&-129;const ts=bytesToNumberLE(ss);ts===_0n$2||(ns?Cr(ts,xr):Cr(ts,dr.ORDER));const fs=wr(ts*ts),rs=wr(fs-_1n$4),as=wr(Qr*fs-zr);let{isValid:ps,value:xs}=br(rs,as);if(!ps)throw new Error("Point.fromHex: invalid y coordinate");const Ss=(xs&_1n$4)===_1n$4,Ns=(Xr&128)!==0;if(!ns&&xs===_0n$2&&Ns)throw new Error("Point.fromHex: x=0 and x_0=1");return Ns!==Ss&&(xs=wr(-xs)),Nr.fromAffine({x:xs,y:ts})}static fromPrivateKey(es){return Ur(es).point}toRawBytes(){const{x:es,y:ns}=this.toAffine(),Qr=numberToBytesLE(ns,dr.BYTES);return Qr[Qr.length-1]|=es&_1n$4?128:0,Qr}toHex(){return bytesToHex(this.toRawBytes())}}Nr.BASE=new Nr(ar.Gx,ar.Gy,_1n$4,wr(ar.Gx*ar.Gy)),Nr.ZERO=new Nr(_0n$2,_1n$4,_1n$4,_0n$2);const{BASE:Pr,ZERO:Tr}=Nr,Br=wNAF(Nr,gr*8);function Fr(Jr){return mod(Jr,fr)}function jr(Jr){return Fr(bytesToNumberLE(Jr))}function Ur(Jr){const es=gr;Jr=ensureBytes$1("private key",Jr,es);const ns=ensureBytes$1("hashed private key",pr(Jr),2*es),Qr=Sr(ns.slice(0,es)),zr=ns.slice(es,2*es),Wr=jr(Qr),ss=Pr.multiply(Wr),Xr=ss.toRawBytes();return{head:Qr,prefix:zr,scalar:Wr,point:ss,pointBytes:Xr}}function qr(Jr){return Ur(Jr).pointBytes}function Hr(Jr=new Uint8Array,...es){const ns=concatBytes(...es);return jr(pr(vr(ns,ensureBytes$1("context",Jr),!!hr)))}function Or(Jr,es,ns={}){Jr=ensureBytes$1("message",Jr),hr&&(Jr=hr(Jr));const{prefix:Qr,scalar:zr,pointBytes:Wr}=Ur(es),ss=Hr(ns.context,Qr,Jr),Xr=Pr.multiply(ss).toRawBytes(),ts=Hr(ns.context,Xr,Wr,Jr),fs=Fr(ss+ts*zr);kr(fs);const rs=concatBytes(Xr,numberToBytesLE(fs,dr.BYTES));return ensureBytes$1("result",rs,gr*2)}const Mr=VERIFY_DEFAULT;function Lr(Jr,es,ns,Qr=Mr){const{context:zr,zip215:Wr}=Qr,ss=dr.BYTES;Jr=ensureBytes$1("signature",Jr,2*ss),es=ensureBytes$1("message",es),hr&&(es=hr(es));const Xr=bytesToNumberLE(Jr.slice(ss,2*ss));let ts,fs,rs;try{ts=Nr.fromHex(ns,Wr),fs=Nr.fromHex(Jr.slice(0,ss),Wr),rs=Pr.multiplyUnsafe(Xr)}catch{return!1}if(!Wr&&ts.isSmallOrder())return!1;const as=Hr(zr,fs.toRawBytes(),ts.toRawBytes(),es);return fs.add(ts.multiplyUnsafe(as)).subtract(rs).clearCofactor().equals(Nr.ZERO)}return Pr._setWindowSize(8),{CURVE:ar,getPublicKey:qr,sign:Or,verify:Lr,ExtendedPoint:Nr,utils:{getExtendedPublicKey:Ur,randomPrivateKey:()=>mr(dr.BYTES),precompute(Jr=8,es=Nr.BASE){return es._setWindowSize(Jr),es.multiply(BigInt(3)),es}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$1=BigInt(0),_1n$3=BigInt(1);function validateOpts$1(cr){return validateObject(cr,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...cr})}function montgomery(cr){const ar=validateOpts$1(cr),{P:dr}=ar,fr=Rr=>mod(Rr,dr),hr=ar.montgomeryBits,pr=Math.ceil(hr/8),mr=ar.nByteLength,gr=ar.adjustScalarBytes||(Rr=>Rr),yr=ar.powPminus2||(Rr=>pow(Rr,dr-BigInt(2),dr));function xr(Rr,Ir,Nr){const Pr=fr(Rr*(Ir-Nr));return Ir=fr(Ir-Pr),Nr=fr(Nr+Pr),[Ir,Nr]}function wr(Rr){if(typeof Rr=="bigint"&&_0n$1<=Rr&&Rr<dr)return Rr;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}const br=(ar.a-BigInt(2))/BigInt(4);function Sr(Rr,Ir){const Nr=wr(Rr),Pr=wr(Ir),Tr=Nr;let Br=_1n$3,Fr=_0n$1,jr=Nr,Ur=_1n$3,qr=_0n$1,Hr;for(let Mr=BigInt(hr-1);Mr>=_0n$1;Mr--){const Lr=Pr>>Mr&_1n$3;qr^=Lr,Hr=xr(qr,Br,jr),Br=Hr[0],jr=Hr[1],Hr=xr(qr,Fr,Ur),Fr=Hr[0],Ur=Hr[1],qr=Lr;const Vr=Br+Fr,Jr=fr(Vr*Vr),es=Br-Fr,ns=fr(es*es),Qr=Jr-ns,zr=jr+Ur,Wr=jr-Ur,ss=fr(Wr*Vr),Xr=fr(zr*es),ts=ss+Xr,fs=ss-Xr;jr=fr(ts*ts),Ur=fr(Tr*fr(fs*fs)),Br=fr(Jr*ns),Fr=fr(Qr*(Jr+fr(br*Qr)))}Hr=xr(qr,Br,jr),Br=Hr[0],jr=Hr[1],Hr=xr(qr,Fr,Ur),Fr=Hr[0],Ur=Hr[1];const Or=yr(Fr);return fr(Br*Or)}function vr(Rr){return numberToBytesLE(fr(Rr),pr)}function Er(Rr){const Ir=ensureBytes$1("u coordinate",Rr,pr);return mr===32&&(Ir[31]&=127),bytesToNumberLE(Ir)}function Ar(Rr){const Ir=ensureBytes$1("scalar",Rr),Nr=Ir.length;if(Nr!==pr&&Nr!==mr)throw new Error(`Expected ${pr} or ${mr} bytes, got ${Nr}`);return bytesToNumberLE(gr(Ir))}function _r(Rr,Ir){const Nr=Er(Ir),Pr=Ar(Rr),Tr=Sr(Nr,Pr);if(Tr===_0n$1)throw new Error("Invalid private or public key received");return vr(Tr)}const Cr=vr(ar.Gu);function kr(Rr){return _r(Rr,Cr)}return{scalarMult:_r,scalarMultBase:kr,getSharedSecret:(Rr,Ir)=>_r(Rr,Ir),getPublicKey:Rr=>kr(Rr),utils:{randomPrivateKey:()=>ar.randomBytes(ar.nByteLength)},GuBytes:Cr}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ED25519_P=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ED25519_SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _1n$2=BigInt(1),_2n$1=BigInt(2),_5n=BigInt(5),_10n=BigInt(10),_20n=BigInt(20),_40n=BigInt(40),_80n=BigInt(80);function ed25519_pow_2_252_3(cr){const ar=ED25519_P,fr=cr*cr%ar*cr%ar,hr=pow2(fr,_2n$1,ar)*fr%ar,pr=pow2(hr,_1n$2,ar)*cr%ar,mr=pow2(pr,_5n,ar)*pr%ar,gr=pow2(mr,_10n,ar)*mr%ar,yr=pow2(gr,_20n,ar)*gr%ar,xr=pow2(yr,_40n,ar)*yr%ar,wr=pow2(xr,_80n,ar)*xr%ar,br=pow2(wr,_80n,ar)*xr%ar,Sr=pow2(br,_10n,ar)*mr%ar;return{pow_p_5_8:pow2(Sr,_2n$1,ar)*cr%ar,b2:fr}}function adjustScalarBytes(cr){return cr[0]&=248,cr[31]&=127,cr[31]|=64,cr}function uvRatio(cr,ar){const dr=ED25519_P,fr=mod(ar*ar*ar,dr),hr=mod(fr*fr*ar,dr),pr=ed25519_pow_2_252_3(cr*hr).pow_p_5_8;let mr=mod(cr*fr*pr,dr);const gr=mod(ar*mr*mr,dr),yr=mr,xr=mod(mr*ED25519_SQRT_M1,dr),wr=gr===cr,br=gr===mod(-cr,dr),Sr=gr===mod(-cr*ED25519_SQRT_M1,dr);return wr&&(mr=yr),(br||Sr)&&(mr=xr),isNegativeLE(mr,dr)&&(mr=mod(-mr,dr)),{isValid:wr||br,value:mr}}const Fp$1=Field(ED25519_P,void 0,!0),ed25519Defaults={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Fp$1,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sha512$1,randomBytes:randomBytes$2,adjustScalarBytes,uvRatio},ed25519=twistedEdwards(ed25519Defaults);function ed25519_domain(cr,ar,dr){if(ar.length>255)throw new Error("Context is too big");return concatBytes$1(utf8ToBytes$3("SigEd25519 no Ed25519 collisions"),new Uint8Array([dr?1:0,ar.length]),ar,cr)}({...ed25519Defaults});({...ed25519Defaults});const x25519=(()=>montgomery({P:ED25519_P,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:cr=>{const ar=ED25519_P,{pow_p_5_8:dr,b2:fr}=ed25519_pow_2_252_3(cr);return mod(pow2(dr,BigInt(3),ar)*fr,ar)},adjustScalarBytes,randomBytes:randomBytes$2}))(),ELL2_C1=(Fp$1.ORDER+BigInt(3))/BigInt(8);Fp$1.pow(_2n$1,ELL2_C1);Fp$1.sqrt(Fp$1.neg(Fp$1.ONE));(Fp$1.ORDER-BigInt(5))/BigInt(8);BigInt(486662);FpSqrtEven(Fp$1,Fp$1.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var encode_1$1=encode$d,MSB$3=128,REST$3=127,MSBALL$1=~REST$3,INT$1=Math.pow(2,31);function encode$d(cr,ar,dr){ar=ar||[],dr=dr||0;for(var fr=dr;cr>=INT$1;)ar[dr++]=cr&255|MSB$3,cr/=128;for(;cr&MSBALL$1;)ar[dr++]=cr&255|MSB$3,cr>>>=7;return ar[dr]=cr|0,encode$d.bytes=dr-fr+1,ar}var decode$e=read$3,MSB$1$2=128,REST$1$2=127;function read$3(cr,fr){var dr=0,fr=fr||0,hr=0,pr=fr,mr,gr=cr.length;do{if(pr>=gr)throw read$3.bytes=0,new RangeError("Could not decode varint");mr=cr[pr++],dr+=hr<28?(mr&REST$1$2)<<hr:(mr&REST$1$2)*Math.pow(2,hr),hr+=7}while(mr>=MSB$1$2);return read$3.bytes=pr-fr,dr}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$2=function(cr){return cr<N1$2?1:cr<N2$2?2:cr<N3$2?3:cr<N4$2?4:cr<N5$2?5:cr<N6$2?6:cr<N7$2?7:cr<N8$1?8:cr<N9$1?9:10},varint$1={encode:encode_1$1,decode:decode$e,encodingLength:length$2},_brrp_varint$1=varint$1;function decode$d(cr,ar=0){return[_brrp_varint$1.decode(cr,ar),_brrp_varint$1.decode.bytes]}function encodeTo$1(cr,ar,dr=0){return _brrp_varint$1.encode(cr,ar,dr),ar}function encodingLength$2(cr){return _brrp_varint$1.encodingLength(cr)}function create$6(cr,ar){const dr=ar.byteLength,fr=encodingLength$2(cr),hr=fr+encodingLength$2(dr),pr=new Uint8Array(hr+dr);return encodeTo$1(cr,pr,0),encodeTo$1(dr,pr,fr),pr.set(ar,hr),new Digest$1(cr,dr,ar,pr)}function decode$c(cr){const ar=coerce$1(cr),[dr,fr]=decode$d(ar),[hr,pr]=decode$d(ar.subarray(fr)),mr=ar.subarray(fr+pr);if(mr.byteLength!==hr)throw new Error("Incorrect length");return new Digest$1(dr,hr,mr,ar)}function equals$4(cr,ar){if(cr===ar)return!0;{const dr=ar;return cr.code===dr.code&&cr.size===dr.size&&dr.bytes instanceof Uint8Array&&equals$5(cr.bytes,dr.bytes)}}let Digest$1=class{code;size;digest;bytes;constructor(ar,dr,fr,hr){this.code=ar,this.size=dr,this.digest=fr,this.bytes=hr}};function format$2(cr,ar){const{bytes:dr,version:fr}=cr;switch(fr){case 0:return toStringV0$1(dr,baseCache$1(cr),ar??base58btc$1.encoder);default:return toStringV1$1(dr,baseCache$1(cr),ar??base32$2.encoder)}}const cache$3=new WeakMap;function baseCache$1(cr){const ar=cache$3.get(cr);if(ar==null){const dr=new Map;return cache$3.set(cr,dr),dr}return ar}let CID$1=class $i{code;version;multihash;bytes;"/";constructor(ar,dr,fr,hr){this.code=dr,this.version=ar,this.multihash=fr,this.bytes=hr,this["/"]=hr}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:ar,multihash:dr}=this;if(ar!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(dr.code!==SHA_256_CODE$1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return $i.createV0(dr)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:ar,digest:dr}=this.multihash,fr=create$6(ar,dr);return $i.createV1(this.code,fr)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(ar){return $i.equals(this,ar)}static equals(ar,dr){const fr=dr;return fr!=null&&ar.code===fr.code&&ar.version===fr.version&&equals$4(ar.multihash,fr.multihash)}toString(ar){return format$2(this,ar)}toJSON(){return{"/":format$2(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(ar){if(ar==null)return null;const dr=ar;if(dr instanceof $i)return dr;if(dr["/"]!=null&&dr["/"]===dr.bytes||dr.asCID===dr){const{version:fr,code:hr,multihash:pr,bytes:mr}=dr;return new $i(fr,hr,pr,mr??encodeCID$1(fr,hr,pr.bytes))}else if(dr[cidSymbol$1]===!0){const{version:fr,multihash:hr,code:pr}=dr,mr=decode$c(hr);return $i.create(fr,pr,mr)}else return null}static create(ar,dr,fr){if(typeof dr!="number")throw new Error("String codecs are no longer supported");if(!(fr.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(ar){case 0:{if(dr!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new $i(ar,dr,fr,fr.bytes)}case 1:{const hr=encodeCID$1(ar,dr,fr.bytes);return new $i(ar,dr,fr,hr)}default:throw new Error("Invalid version")}}static createV0(ar){return $i.create(0,DAG_PB_CODE$1,ar)}static createV1(ar,dr){return $i.create(1,ar,dr)}static decode(ar){const[dr,fr]=$i.decodeFirst(ar);if(fr.length!==0)throw new Error("Incorrect length");return dr}static decodeFirst(ar){const dr=$i.inspectBytes(ar),fr=dr.size-dr.multihashSize,hr=coerce$1(ar.subarray(fr,fr+dr.multihashSize));if(hr.byteLength!==dr.multihashSize)throw new Error("Incorrect length");const pr=hr.subarray(dr.multihashSize-dr.digestSize),mr=new Digest$1(dr.multihashCode,dr.digestSize,pr,hr);return[dr.version===0?$i.createV0(mr):$i.createV1(dr.codec,mr),ar.subarray(dr.size)]}static inspectBytes(ar){let dr=0;const fr=()=>{const[br,Sr]=decode$d(ar.subarray(dr));return dr+=Sr,br};let hr=fr(),pr=DAG_PB_CODE$1;if(hr===18?(hr=0,dr=0):pr=fr(),hr!==0&&hr!==1)throw new RangeError(`Invalid CID version ${hr}`);const mr=dr,gr=fr(),yr=fr(),xr=dr+yr,wr=xr-mr;return{version:hr,codec:pr,multihashCode:gr,digestSize:yr,multihashSize:wr,size:xr}}static parse(ar,dr){const[fr,hr]=parseCIDtoBytes$1(ar,dr),pr=$i.decode(hr);if(pr.version===0&&ar[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$1(pr).set(fr,ar),pr}};function parseCIDtoBytes$1(cr,ar){switch(cr[0]){case"Q":{const dr=ar??base58btc$1;return[base58btc$1.prefix,dr.decode(`${base58btc$1.prefix}${cr}`)]}case base58btc$1.prefix:{const dr=ar??base58btc$1;return[base58btc$1.prefix,dr.decode(cr)]}case base32$2.prefix:{const dr=ar??base32$2;return[base32$2.prefix,dr.decode(cr)]}default:{if(ar==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[cr[0],ar.decode(cr)]}}}function toStringV0$1(cr,ar,dr){const{prefix:fr}=dr;if(fr!==base58btc$1.prefix)throw Error(`Cannot string encode V0 in ${dr.name} encoding`);const hr=ar.get(fr);if(hr==null){const pr=dr.encode(cr).slice(1);return ar.set(fr,pr),pr}else return hr}function toStringV1$1(cr,ar,dr){const{prefix:fr}=dr,hr=ar.get(fr);if(hr==null){const pr=dr.encode(cr);return ar.set(fr,pr),pr}else return hr}const DAG_PB_CODE$1=112,SHA_256_CODE$1=18;function encodeCID$1(cr,ar,dr){const fr=encodingLength$2(cr),hr=fr+encodingLength$2(ar),pr=new Uint8Array(hr+dr.byteLength);return encodeTo$1(cr,pr,0),encodeTo$1(ar,pr,fr),pr.set(dr,hr),pr}const cidSymbol$1=Symbol.for("@ipld/js-cid/CID");function from$2({name:cr,code:ar,encode:dr}){return new Hasher$1(cr,ar,dr)}let Hasher$1=class{name;code;encode;constructor(ar,dr,fr){this.name=ar,this.code=dr,this.encode=fr}digest(ar){if(ar instanceof Uint8Array){const dr=this.encode(ar);return dr instanceof Uint8Array?create$6(this.code,dr):dr.then(fr=>create$6(this.code,fr))}else throw Error("Unknown type, must be binary type")}};const typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(cr){if(cr===null)return"null";if(cr===void 0)return"undefined";if(cr===!0||cr===!1)return"boolean";const ar=typeof cr;if(typeofs.includes(ar))return ar;if(ar==="function")return"Function";if(Array.isArray(cr))return"Array";if(isBuffer$1(cr))return"Buffer";const dr=getObjectType(cr);return dr||"Object"}function isBuffer$1(cr){return cr&&cr.constructor&&cr.constructor.isBuffer&&cr.constructor.isBuffer.call(null,cr)}function getObjectType(cr){const ar=Object.prototype.toString.call(cr).slice(8,-1);if(objectTypeNames.includes(ar))return ar}class Type{constructor(ar,dr,fr){this.major=ar,this.majorEncoded=ar<<5,this.name=dr,this.terminal=fr}toString(){return`Type[${this.major}].${this.name}`}compare(ar){return this.major<ar.major?-1:this.major>ar.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(ar,dr,fr){this.type=ar,this.value=dr,this.encodedLength=fr,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder=new TextDecoder,textEncoder=new TextEncoder;function isBuffer(cr){return useBuffer&&globalThis.Buffer.isBuffer(cr)}function asU8A(cr){return cr instanceof Uint8Array?isBuffer(cr)?new Uint8Array(cr.buffer,cr.byteOffset,cr.byteLength):cr:Uint8Array.from(cr)}const toString$4=useBuffer?(cr,ar,dr)=>dr-ar>64?globalThis.Buffer.from(cr.subarray(ar,dr)).toString("utf8"):utf8Slice(cr,ar,dr):(cr,ar,dr)=>dr-ar>64?textDecoder.decode(cr.subarray(ar,dr)):utf8Slice(cr,ar,dr),fromString$3=useBuffer?cr=>cr.length>64?globalThis.Buffer.from(cr):utf8ToBytes$1(cr):cr=>cr.length>64?textEncoder.encode(cr):utf8ToBytes$1(cr),fromArray=cr=>Uint8Array.from(cr),slice=useBuffer?(cr,ar,dr)=>isBuffer(cr)?new Uint8Array(cr.subarray(ar,dr)):cr.slice(ar,dr):(cr,ar,dr)=>cr.slice(ar,dr),concat$3=useBuffer?(cr,ar)=>(cr=cr.map(dr=>dr instanceof Uint8Array?dr:globalThis.Buffer.from(dr)),asU8A(globalThis.Buffer.concat(cr,ar))):(cr,ar)=>{const dr=new Uint8Array(ar);let fr=0;for(let hr of cr)fr+hr.length>dr.length&&(hr=hr.subarray(0,dr.length-fr)),dr.set(hr,fr),fr+=hr.length;return dr},alloc$3=useBuffer?cr=>globalThis.Buffer.allocUnsafe(cr):cr=>new Uint8Array(cr);function compare(cr,ar){if(isBuffer(cr)&&isBuffer(ar))return cr.compare(ar);for(let dr=0;dr<cr.length;dr++)if(cr[dr]!==ar[dr])return cr[dr]<ar[dr]?-1:1;return 0}function utf8ToBytes$1(cr){const ar=[];let dr=0;for(let fr=0;fr<cr.length;fr++){let hr=cr.charCodeAt(fr);hr<128?ar[dr++]=hr:hr<2048?(ar[dr++]=hr>>6|192,ar[dr++]=hr&63|128):(hr&64512)===55296&&fr+1<cr.length&&(cr.charCodeAt(fr+1)&64512)===56320?(hr=65536+((hr&1023)<<10)+(cr.charCodeAt(++fr)&1023),ar[dr++]=hr>>18|240,ar[dr++]=hr>>12&63|128,ar[dr++]=hr>>6&63|128,ar[dr++]=hr&63|128):(ar[dr++]=hr>>12|224,ar[dr++]=hr>>6&63|128,ar[dr++]=hr&63|128)}return ar}function utf8Slice(cr,ar,dr){const fr=[];for(;ar<dr;){const hr=cr[ar];let pr=null,mr=hr>239?4:hr>223?3:hr>191?2:1;if(ar+mr<=dr){let gr,yr,xr,wr;switch(mr){case 1:hr<128&&(pr=hr);break;case 2:gr=cr[ar+1],(gr&192)===128&&(wr=(hr&31)<<6|gr&63,wr>127&&(pr=wr));break;case 3:gr=cr[ar+1],yr=cr[ar+2],(gr&192)===128&&(yr&192)===128&&(wr=(hr&15)<<12|(gr&63)<<6|yr&63,wr>2047&&(wr<55296||wr>57343)&&(pr=wr));break;case 4:gr=cr[ar+1],yr=cr[ar+2],xr=cr[ar+3],(gr&192)===128&&(yr&192)===128&&(xr&192)===128&&(wr=(hr&15)<<18|(gr&63)<<12|(yr&63)<<6|xr&63,wr>65535&&wr<1114112&&(pr=wr))}}pr===null?(pr=65533,mr=1):pr>65535&&(pr-=65536,fr.push(pr>>>10&1023|55296),pr=56320|pr&1023),fr.push(pr),ar+=mr}return decodeCodePointsArray(fr)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(cr){const ar=cr.length;if(ar<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,cr);let dr="",fr=0;for(;fr<ar;)dr+=String.fromCharCode.apply(String,cr.slice(fr,fr+=MAX_ARGUMENTS_LENGTH));return dr}const defaultChunkSize=256;class Bl{constructor(ar=defaultChunkSize){this.chunkSize=ar,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(ar){let dr=this.chunks[this.chunks.length-1];if(this.cursor+ar.length<=this.maxCursor+1){const hr=dr.length-(this.maxCursor-this.cursor)-1;dr.set(ar,hr)}else{if(dr){const hr=dr.length-(this.maxCursor-this.cursor)-1;hr<dr.length&&(this.chunks[this.chunks.length-1]=dr.subarray(0,hr),this.maxCursor=this.cursor-1)}ar.length<64&&ar.length<this.chunkSize?(dr=alloc$3(this.chunkSize),this.chunks.push(dr),this.maxCursor+=dr.length,this._initReuseChunk===null&&(this._initReuseChunk=dr),dr.set(ar,0)):(this.chunks.push(ar),this.maxCursor+=ar.length)}this.cursor+=ar.length}toBytes(ar=!1){let dr;if(this.chunks.length===1){const fr=this.chunks[0];ar&&this.cursor>fr.length/2?(dr=this.cursor===fr.length?fr:fr.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):dr=slice(fr,0,this.cursor)}else dr=concat$3(this.chunks,this.cursor);return ar&&this.reset(),dr}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(cr,ar,dr){if(cr.length-ar<dr)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(cr,ar,dr){assertEnoughData(cr,ar,1);const fr=cr[ar];if(dr.strict===!0&&fr<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return fr}function readUint16(cr,ar,dr){assertEnoughData(cr,ar,2);const fr=cr[ar]<<8|cr[ar+1];if(dr.strict===!0&&fr<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return fr}function readUint32(cr,ar,dr){assertEnoughData(cr,ar,4);const fr=cr[ar]*16777216+(cr[ar+1]<<16)+(cr[ar+2]<<8)+cr[ar+3];if(dr.strict===!0&&fr<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return fr}function readUint64(cr,ar,dr){assertEnoughData(cr,ar,8);const fr=cr[ar]*16777216+(cr[ar+1]<<16)+(cr[ar+2]<<8)+cr[ar+3],hr=cr[ar+4]*16777216+(cr[ar+5]<<16)+(cr[ar+6]<<8)+cr[ar+7],pr=(BigInt(fr)<<BigInt(32))+BigInt(hr);if(dr.strict===!0&&pr<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(pr<=Number.MAX_SAFE_INTEGER)return Number(pr);if(dr.allowBigInt===!0)return pr;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(cr,ar,dr,fr){return new Token(Type.uint,readUint8(cr,ar+1,fr),2)}function decodeUint16(cr,ar,dr,fr){return new Token(Type.uint,readUint16(cr,ar+1,fr),3)}function decodeUint32(cr,ar,dr,fr){return new Token(Type.uint,readUint32(cr,ar+1,fr),5)}function decodeUint64(cr,ar,dr,fr){return new Token(Type.uint,readUint64(cr,ar+1,fr),9)}function encodeUint(cr,ar){return encodeUintValue(cr,0,ar.value)}function encodeUintValue(cr,ar,dr){if(dr<uintBoundaries[0]){const fr=Number(dr);cr.push([ar|fr])}else if(dr<uintBoundaries[1]){const fr=Number(dr);cr.push([ar|24,fr])}else if(dr<uintBoundaries[2]){const fr=Number(dr);cr.push([ar|25,fr>>>8,fr&255])}else if(dr<uintBoundaries[3]){const fr=Number(dr);cr.push([ar|26,fr>>>24&255,fr>>>16&255,fr>>>8&255,fr&255])}else{const fr=BigInt(dr);if(fr<uintBoundaries[4]){const hr=[ar|27,0,0,0,0,0,0,0];let pr=Number(fr&BigInt(4294967295)),mr=Number(fr>>BigInt(32)&BigInt(4294967295));hr[8]=pr&255,pr=pr>>8,hr[7]=pr&255,pr=pr>>8,hr[6]=pr&255,pr=pr>>8,hr[5]=pr&255,hr[4]=mr&255,mr=mr>>8,hr[3]=mr&255,mr=mr>>8,hr[2]=mr&255,mr=mr>>8,hr[1]=mr&255,cr.push(hr)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function cr(ar){return encodeUintValue.encodedSize(ar.value)};encodeUintValue.encodedSize=function cr(ar){return ar<uintBoundaries[0]?1:ar<uintBoundaries[1]?2:ar<uintBoundaries[2]?3:ar<uintBoundaries[3]?5:9};encodeUint.compareTokens=function cr(ar,dr){return ar.value<dr.value?-1:ar.value>dr.value?1:0};function decodeNegint8(cr,ar,dr,fr){return new Token(Type.negint,-1-readUint8(cr,ar+1,fr),2)}function decodeNegint16(cr,ar,dr,fr){return new Token(Type.negint,-1-readUint16(cr,ar+1,fr),3)}function decodeNegint32(cr,ar,dr,fr){return new Token(Type.negint,-1-readUint32(cr,ar+1,fr),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(cr,ar,dr,fr){const hr=readUint64(cr,ar+1,fr);if(typeof hr!="bigint"){const pr=-1-hr;if(pr>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,pr,9)}if(fr.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(hr),9)}function encodeNegint(cr,ar){const dr=ar.value,fr=typeof dr=="bigint"?dr*neg1b-pos1b:dr*-1-1;encodeUintValue(cr,ar.type.majorEncoded,fr)}encodeNegint.encodedSize=function cr(ar){const dr=ar.value,fr=typeof dr=="bigint"?dr*neg1b-pos1b:dr*-1-1;return fr<uintBoundaries[0]?1:fr<uintBoundaries[1]?2:fr<uintBoundaries[2]?3:fr<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function cr(ar,dr){return ar.value<dr.value?1:ar.value>dr.value?-1:0};function toToken$3(cr,ar,dr,fr){assertEnoughData(cr,ar,dr+fr);const hr=slice(cr,ar+dr,ar+dr+fr);return new Token(Type.bytes,hr,dr+fr)}function decodeBytesCompact(cr,ar,dr,fr){return toToken$3(cr,ar,1,dr)}function decodeBytes8(cr,ar,dr,fr){return toToken$3(cr,ar,2,readUint8(cr,ar+1,fr))}function decodeBytes16(cr,ar,dr,fr){return toToken$3(cr,ar,3,readUint16(cr,ar+1,fr))}function decodeBytes32(cr,ar,dr,fr){return toToken$3(cr,ar,5,readUint32(cr,ar+1,fr))}function decodeBytes64(cr,ar,dr,fr){const hr=readUint64(cr,ar+1,fr);if(typeof hr=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(cr,ar,9,hr)}function tokenBytes(cr){return cr.encodedBytes===void 0&&(cr.encodedBytes=cr.type===Type.string?fromString$3(cr.value):cr.value),cr.encodedBytes}function encodeBytes(cr,ar){const dr=tokenBytes(ar);encodeUintValue(cr,ar.type.majorEncoded,dr.length),cr.push(dr)}encodeBytes.encodedSize=function cr(ar){const dr=tokenBytes(ar);return encodeUintValue.encodedSize(dr.length)+dr.length};encodeBytes.compareTokens=function cr(ar,dr){return compareBytes(tokenBytes(ar),tokenBytes(dr))};function compareBytes(cr,ar){return cr.length<ar.length?-1:cr.length>ar.length?1:compare(cr,ar)}function toToken$2(cr,ar,dr,fr,hr){const pr=dr+fr;assertEnoughData(cr,ar,pr);const mr=new Token(Type.string,toString$4(cr,ar+dr,ar+pr),pr);return hr.retainStringBytes===!0&&(mr.byteValue=slice(cr,ar+dr,ar+pr)),mr}function decodeStringCompact(cr,ar,dr,fr){return toToken$2(cr,ar,1,dr,fr)}function decodeString8(cr,ar,dr,fr){return toToken$2(cr,ar,2,readUint8(cr,ar+1,fr),fr)}function decodeString16(cr,ar,dr,fr){return toToken$2(cr,ar,3,readUint16(cr,ar+1,fr),fr)}function decodeString32(cr,ar,dr,fr){return toToken$2(cr,ar,5,readUint32(cr,ar+1,fr),fr)}function decodeString64(cr,ar,dr,fr){const hr=readUint64(cr,ar+1,fr);if(typeof hr=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(cr,ar,9,hr,fr)}const encodeString=encodeBytes;function toToken$1(cr,ar,dr,fr){return new Token(Type.array,fr,dr)}function decodeArrayCompact(cr,ar,dr,fr){return toToken$1(cr,ar,1,dr)}function decodeArray8(cr,ar,dr,fr){return toToken$1(cr,ar,2,readUint8(cr,ar+1,fr))}function decodeArray16(cr,ar,dr,fr){return toToken$1(cr,ar,3,readUint16(cr,ar+1,fr))}function decodeArray32(cr,ar,dr,fr){return toToken$1(cr,ar,5,readUint32(cr,ar+1,fr))}function decodeArray64(cr,ar,dr,fr){const hr=readUint64(cr,ar+1,fr);if(typeof hr=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(cr,ar,9,hr)}function decodeArrayIndefinite(cr,ar,dr,fr){if(fr.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(cr,ar,1,1/0)}function encodeArray(cr,ar){encodeUintValue(cr,Type.array.majorEncoded,ar.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function cr(ar){return encodeUintValue.encodedSize(ar.value)};function toToken(cr,ar,dr,fr){return new Token(Type.map,fr,dr)}function decodeMapCompact(cr,ar,dr,fr){return toToken(cr,ar,1,dr)}function decodeMap8(cr,ar,dr,fr){return toToken(cr,ar,2,readUint8(cr,ar+1,fr))}function decodeMap16(cr,ar,dr,fr){return toToken(cr,ar,3,readUint16(cr,ar+1,fr))}function decodeMap32(cr,ar,dr,fr){return toToken(cr,ar,5,readUint32(cr,ar+1,fr))}function decodeMap64(cr,ar,dr,fr){const hr=readUint64(cr,ar+1,fr);if(typeof hr=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(cr,ar,9,hr)}function decodeMapIndefinite(cr,ar,dr,fr){if(fr.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(cr,ar,1,1/0)}function encodeMap(cr,ar){encodeUintValue(cr,Type.map.majorEncoded,ar.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function cr(ar){return encodeUintValue.encodedSize(ar.value)};function decodeTagCompact(cr,ar,dr,fr){return new Token(Type.tag,dr,1)}function decodeTag8(cr,ar,dr,fr){return new Token(Type.tag,readUint8(cr,ar+1,fr),2)}function decodeTag16(cr,ar,dr,fr){return new Token(Type.tag,readUint16(cr,ar+1,fr),3)}function decodeTag32(cr,ar,dr,fr){return new Token(Type.tag,readUint32(cr,ar+1,fr),5)}function decodeTag64(cr,ar,dr,fr){return new Token(Type.tag,readUint64(cr,ar+1,fr),9)}function encodeTag(cr,ar){encodeUintValue(cr,Type.tag.majorEncoded,ar.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function cr(ar){return encodeUintValue.encodedSize(ar.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(cr,ar,dr,fr){if(fr.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return fr.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(cr,ar,dr,fr){if(fr.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(cr,ar,dr){if(dr){if(dr.allowNaN===!1&&Number.isNaN(cr))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(dr.allowInfinity===!1&&(cr===1/0||cr===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,cr,ar)}function decodeFloat16(cr,ar,dr,fr){return createToken(readFloat16(cr,ar+1),3,fr)}function decodeFloat32(cr,ar,dr,fr){return createToken(readFloat32(cr,ar+1),5,fr)}function decodeFloat64(cr,ar,dr,fr){return createToken(readFloat64(cr,ar+1),9,fr)}function encodeFloat(cr,ar,dr){const fr=ar.value;if(fr===!1)cr.push([Type.float.majorEncoded|MINOR_FALSE]);else if(fr===!0)cr.push([Type.float.majorEncoded|MINOR_TRUE]);else if(fr===null)cr.push([Type.float.majorEncoded|MINOR_NULL]);else if(fr===void 0)cr.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let hr,pr=!1;(!dr||dr.float64!==!0)&&(encodeFloat16(fr),hr=readFloat16(ui8a,1),fr===hr||Number.isNaN(fr)?(ui8a[0]=249,cr.push(ui8a.slice(0,3)),pr=!0):(encodeFloat32(fr),hr=readFloat32(ui8a,1),fr===hr&&(ui8a[0]=250,cr.push(ui8a.slice(0,5)),pr=!0))),pr||(encodeFloat64(fr),hr=readFloat64(ui8a,1),ui8a[0]=251,cr.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function cr(ar,dr){const fr=ar.value;if(fr===!1||fr===!0||fr===null||fr===void 0)return 1;if(!dr||dr.float64!==!0){encodeFloat16(fr);let hr=readFloat16(ui8a,1);if(fr===hr||Number.isNaN(fr))return 3;if(encodeFloat32(fr),hr=readFloat32(ui8a,1),fr===hr)return 5}return 9};const buffer=new ArrayBuffer(9),dataView=new DataView(buffer,1),ui8a=new Uint8Array(buffer,0);function encodeFloat16(cr){if(cr===1/0)dataView.setUint16(0,31744,!1);else if(cr===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(cr))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,cr);const ar=dataView.getUint32(0),dr=(ar&2139095040)>>23,fr=ar&8388607;if(dr===255)dataView.setUint16(0,31744,!1);else if(dr===0)dataView.setUint16(0,(cr&2147483648)>>16|fr>>13,!1);else{const hr=dr-127;hr<-24?dataView.setUint16(0,0):hr<-14?dataView.setUint16(0,(ar&2147483648)>>16|1<<24+hr,!1):dataView.setUint16(0,(ar&2147483648)>>16|hr+15<<10|fr>>13,!1)}}}function readFloat16(cr,ar){if(cr.length-ar<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const dr=(cr[ar]<<8)+cr[ar+1];if(dr===31744)return 1/0;if(dr===64512)return-1/0;if(dr===32256)return NaN;const fr=dr>>10&31,hr=dr&1023;let pr;return fr===0?pr=hr*2**-24:fr!==31?pr=(hr+1024)*2**(fr-25):pr=hr===0?1/0:NaN,dr&32768?-pr:pr}function encodeFloat32(cr){dataView.setFloat32(0,cr,!1)}function readFloat32(cr,ar){if(cr.length-ar<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const dr=(cr.byteOffset||0)+ar;return new DataView(cr.buffer,dr,4).getFloat32(0,!1)}function encodeFloat64(cr){dataView.setFloat64(0,cr,!1)}function readFloat64(cr,ar){if(cr.length-ar<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const dr=(cr.byteOffset||0)+ar;return new DataView(cr.buffer,dr,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(cr,ar,dr){throw new Error(`${decodeErrPrefix} encountered invalid minor (${dr}) for major ${cr[ar]>>>5}`)}function errorer(cr){return()=>{throw new Error(`${decodeErrPrefix} ${cr}`)}}const jump=[];for(let cr=0;cr<=23;cr++)jump[cr]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let cr=32;cr<=55;cr++)jump[cr]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let cr=64;cr<=87;cr++)jump[cr]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let cr=96;cr<=119;cr++)jump[cr]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let cr=128;cr<=151;cr++)jump[cr]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let cr=160;cr<=183;cr++)jump[cr]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let cr=192;cr<=215;cr++)jump[cr]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let cr=224;cr<=243;cr++)jump[cr]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let cr=0;cr<24;cr++)quick[cr]=new Token(Type.uint,cr,1);for(let cr=-1;cr>=-24;cr--)quick[31-cr]=new Token(Type.negint,cr,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(cr){switch(cr.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return cr.value.length?void 0:fromArray([64]);case Type.string:return cr.value===""?fromArray([96]):void 0;case Type.array:return cr.value===0?fromArray([128]):void 0;case Type.map:return cr.value===0?fromArray([160]):void 0;case Type.uint:return cr.value<24?fromArray([Number(cr.value)]):void 0;case Type.negint:if(cr.value>=-24)return fromArray([31-Number(cr.value)])}}const defaultEncodeOptions$1={float64:!1,mapSorter:mapSorter$1,quickEncodeToken};function makeCborEncoders(){const cr=[];return cr[Type.uint.major]=encodeUint,cr[Type.negint.major]=encodeNegint,cr[Type.bytes.major]=encodeBytes,cr[Type.string.major]=encodeString,cr[Type.array.major]=encodeArray,cr[Type.map.major]=encodeMap,cr[Type.tag.major]=encodeTag,cr[Type.float.major]=encodeFloat,cr}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(ar,dr){this.obj=ar,this.parent=dr}includes(ar){let dr=this;do if(dr.obj===ar)return!0;while(dr=dr.parent);return!1}static createCheck(ar,dr){if(ar&&ar.includes(dr))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(dr,ar)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(cr,ar,dr,fr){return!Number.isInteger(cr)||!Number.isSafeInteger(cr)?new Token(Type.float,cr):cr>=0?new Token(Type.uint,cr):new Token(Type.negint,cr)},bigint(cr,ar,dr,fr){return cr>=BigInt(0)?new Token(Type.uint,cr):new Token(Type.negint,cr)},Uint8Array(cr,ar,dr,fr){return new Token(Type.bytes,cr)},string(cr,ar,dr,fr){return new Token(Type.string,cr)},boolean(cr,ar,dr,fr){return cr?simpleTokens.true:simpleTokens.false},null(cr,ar,dr,fr){return simpleTokens.null},undefined(cr,ar,dr,fr){return simpleTokens.undefined},ArrayBuffer(cr,ar,dr,fr){return new Token(Type.bytes,new Uint8Array(cr))},DataView(cr,ar,dr,fr){return new Token(Type.bytes,new Uint8Array(cr.buffer,cr.byteOffset,cr.byteLength))},Array(cr,ar,dr,fr){if(!cr.length)return dr.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;fr=Ref.createCheck(fr,cr);const hr=[];let pr=0;for(const mr of cr)hr[pr++]=objectToTokens(mr,dr,fr);return dr.addBreakTokens?[new Token(Type.array,cr.length),hr,new Token(Type.break)]:[new Token(Type.array,cr.length),hr]},Object(cr,ar,dr,fr){const hr=ar!=="Object",pr=hr?cr.keys():Object.keys(cr),mr=hr?cr.size:pr.length;if(!mr)return dr.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;fr=Ref.createCheck(fr,cr);const gr=[];let yr=0;for(const xr of pr)gr[yr++]=[objectToTokens(xr,dr,fr),objectToTokens(hr?cr.get(xr):cr[xr],dr,fr)];return sortMapEntries(gr,dr),dr.addBreakTokens?[new Token(Type.map,mr),gr,new Token(Type.break)]:[new Token(Type.map,mr),gr]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const cr of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${cr}Array`]=typeEncoders.DataView;function objectToTokens(cr,ar={},dr){const fr=is(cr),hr=ar&&ar.typeEncoders&&ar.typeEncoders[fr]||typeEncoders[fr];if(typeof hr=="function"){const mr=hr(cr,fr,ar,dr);if(mr!=null)return mr}const pr=typeEncoders[fr];if(!pr)throw new Error(`${encodeErrPrefix} unsupported type: ${fr}`);return pr(cr,fr,ar,dr)}function sortMapEntries(cr,ar){ar.mapSorter&&cr.sort(ar.mapSorter)}function mapSorter$1(cr,ar){const dr=Array.isArray(cr[0])?cr[0][0]:cr[0],fr=Array.isArray(ar[0])?ar[0][0]:ar[0];if(dr.type!==fr.type)return dr.type.compare(fr.type);const hr=dr.type.major,pr=cborEncoders[hr].compareTokens(dr,fr);return pr===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),pr}function tokensToEncoded(cr,ar,dr,fr){if(Array.isArray(ar))for(const hr of ar)tokensToEncoded(cr,hr,dr,fr);else dr[ar.type.major](cr,ar,fr)}function encodeCustom(cr,ar,dr){const fr=objectToTokens(cr,dr);if(!Array.isArray(fr)&&dr.quickEncodeToken){const hr=dr.quickEncodeToken(fr);if(hr)return hr;const pr=ar[fr.type.major];if(pr.encodedSize){const mr=pr.encodedSize(fr,dr),gr=new Bl(mr);if(pr(gr,fr,dr),gr.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${fr} was wrong`);return asU8A(gr.chunks[0])}}return buf.reset(),tokensToEncoded(buf,fr,ar,dr),buf.toBytes(!0)}function encode$c(cr,ar){return ar=Object.assign({},defaultEncodeOptions$1,ar),encodeCustom(cr,cborEncoders,ar)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(ar,dr={}){this._pos=0,this.data=ar,this.options=dr}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const ar=this.data[this._pos];let dr=quick[ar];if(dr===void 0){const fr=jump[ar];if(!fr)throw new Error(`${decodeErrPrefix} no decoder for major type ${ar>>>5} (byte 0x${ar.toString(16).padStart(2,"0")})`);const hr=ar&31;dr=fr(this.data,this._pos,hr,this.options)}return this._pos+=dr.encodedLength,dr}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(cr,ar,dr){const fr=[];for(let hr=0;hr<cr.value;hr++){const pr=tokensToObject(ar,dr);if(pr===BREAK){if(cr.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(pr===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${hr}, expected ${cr.value})`);fr[hr]=pr}return fr}function tokenToMap(cr,ar,dr){const fr=dr.useMaps===!0,hr=fr?void 0:{},pr=fr?new Map:void 0;for(let mr=0;mr<cr.value;mr++){const gr=tokensToObject(ar,dr);if(gr===BREAK){if(cr.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(gr===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${mr} [no key], expected ${cr.value})`);if(fr!==!0&&typeof gr!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof gr})`);if(dr.rejectDuplicateMapKeys===!0&&(fr&&pr.has(gr)||!fr&&gr in hr))throw new Error(`${decodeErrPrefix} found repeat map key "${gr}"`);const yr=tokensToObject(ar,dr);if(yr===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${mr} [no value], expected ${cr.value})`);fr?pr.set(gr,yr):hr[gr]=yr}return fr?pr:hr}function tokensToObject(cr,ar){if(cr.done())return DONE;const dr=cr.next();if(dr.type===Type.break)return BREAK;if(dr.type.terminal)return dr.value;if(dr.type===Type.array)return tokenToArray(dr,cr,ar);if(dr.type===Type.map)return tokenToMap(dr,cr,ar);if(dr.type===Type.tag){if(ar.tags&&typeof ar.tags[dr.value]=="function"){const fr=tokensToObject(cr,ar);return ar.tags[dr.value](fr)}throw new Error(`${decodeErrPrefix} tag not supported (${dr.value})`)}throw new Error("unsupported")}function decodeFirst(cr,ar){if(!(cr instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);ar=Object.assign({},defaultDecodeOptions,ar);const dr=ar.tokenizer||new Tokeniser(cr,ar),fr=tokensToObject(dr,ar);if(fr===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(fr===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);return[fr,cr.subarray(dr.pos())]}function decode$b(cr,ar){const[dr,fr]=decodeFirst(cr,ar);if(fr.length>0)throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return dr}function base$1(cr,ar){if(cr.length>=255)throw new TypeError("Alphabet too long");for(var dr=new Uint8Array(256),fr=0;fr<dr.length;fr++)dr[fr]=255;for(var hr=0;hr<cr.length;hr++){var pr=cr.charAt(hr),mr=pr.charCodeAt(0);if(dr[mr]!==255)throw new TypeError(pr+" is ambiguous");dr[mr]=hr}var gr=cr.length,yr=cr.charAt(0),xr=Math.log(gr)/Math.log(256),wr=Math.log(256)/Math.log(gr);function br(Er){if(Er instanceof Uint8Array||(ArrayBuffer.isView(Er)?Er=new Uint8Array(Er.buffer,Er.byteOffset,Er.byteLength):Array.isArray(Er)&&(Er=Uint8Array.from(Er))),!(Er instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Er.length===0)return"";for(var Ar=0,_r=0,Cr=0,kr=Er.length;Cr!==kr&&Er[Cr]===0;)Cr++,Ar++;for(var Rr=(kr-Cr)*wr+1>>>0,Ir=new Uint8Array(Rr);Cr!==kr;){for(var Nr=Er[Cr],Pr=0,Tr=Rr-1;(Nr!==0||Pr<_r)&&Tr!==-1;Tr--,Pr++)Nr+=256*Ir[Tr]>>>0,Ir[Tr]=Nr%gr>>>0,Nr=Nr/gr>>>0;if(Nr!==0)throw new Error("Non-zero carry");_r=Pr,Cr++}for(var Br=Rr-_r;Br!==Rr&&Ir[Br]===0;)Br++;for(var Fr=yr.repeat(Ar);Br<Rr;++Br)Fr+=cr.charAt(Ir[Br]);return Fr}function Sr(Er){if(typeof Er!="string")throw new TypeError("Expected String");if(Er.length===0)return new Uint8Array;var Ar=0;if(Er[Ar]!==" "){for(var _r=0,Cr=0;Er[Ar]===yr;)_r++,Ar++;for(var kr=(Er.length-Ar)*xr+1>>>0,Rr=new Uint8Array(kr);Er[Ar];){var Ir=dr[Er.charCodeAt(Ar)];if(Ir===255)return;for(var Nr=0,Pr=kr-1;(Ir!==0||Nr<Cr)&&Pr!==-1;Pr--,Nr++)Ir+=gr*Rr[Pr]>>>0,Rr[Pr]=Ir%256>>>0,Ir=Ir/256>>>0;if(Ir!==0)throw new Error("Non-zero carry");Cr=Nr,Ar++}if(Er[Ar]!==" "){for(var Tr=kr-Cr;Tr!==kr&&Rr[Tr]===0;)Tr++;for(var Br=new Uint8Array(_r+(kr-Tr)),Fr=_r;Tr!==kr;)Br[Fr++]=Rr[Tr++];return Br}}}function vr(Er){var Ar=Sr(Er);if(Ar)return Ar;throw new Error(`Non-${ar} character`)}return{encode:br,decodeUnsafe:Sr,decode:vr}}var src=base$1,_brrp__multiformats_scope_baseX=src;const equals$3=(cr,ar)=>{if(cr===ar)return!0;if(cr.byteLength!==ar.byteLength)return!1;for(let dr=0;dr<cr.byteLength;dr++)if(cr[dr]!==ar[dr])return!1;return!0},coerce=cr=>{if(cr instanceof Uint8Array&&cr.constructor.name==="Uint8Array")return cr;if(cr instanceof ArrayBuffer)return new Uint8Array(cr);if(ArrayBuffer.isView(cr))return new Uint8Array(cr.buffer,cr.byteOffset,cr.byteLength);throw new Error("Unknown type, must be binary type")},fromString$2=cr=>new TextEncoder().encode(cr),toString$3=cr=>new TextDecoder().decode(cr);let Encoder$1=class{constructor(ar,dr,fr){this.name=ar,this.prefix=dr,this.baseEncode=fr}encode(ar){if(ar instanceof Uint8Array)return`${this.prefix}${this.baseEncode(ar)}`;throw Error("Unknown type, must be binary type")}},Decoder$1=class{constructor(ar,dr,fr){if(this.name=ar,this.prefix=dr,dr.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=dr.codePointAt(0),this.baseDecode=fr}decode(ar){if(typeof ar=="string"){if(ar.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(ar)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(ar.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(ar){return or$2(this,ar)}};class ComposedDecoder{constructor(ar){this.decoders=ar}or(ar){return or$2(this,ar)}decode(ar){const dr=ar[0],fr=this.decoders[dr];if(fr)return fr.decode(ar);throw RangeError(`Unable to decode multibase string ${JSON.stringify(ar)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$2=(cr,ar)=>new ComposedDecoder({...cr.decoders||{[cr.prefix]:cr},...ar.decoders||{[ar.prefix]:ar}});class Codec{constructor(ar,dr,fr,hr){this.name=ar,this.prefix=dr,this.baseEncode=fr,this.baseDecode=hr,this.encoder=new Encoder$1(ar,dr,fr),this.decoder=new Decoder$1(ar,dr,hr)}encode(ar){return this.encoder.encode(ar)}decode(ar){return this.decoder.decode(ar)}}const from$1=({name:cr,prefix:ar,encode:dr,decode:fr})=>new Codec(cr,ar,dr,fr),baseX=({prefix:cr,name:ar,alphabet:dr})=>{const{encode:fr,decode:hr}=_brrp__multiformats_scope_baseX(dr,ar);return from$1({prefix:cr,name:ar,encode:fr,decode:pr=>coerce(hr(pr))})},decode$a=(cr,ar,dr,fr)=>{const hr={};for(let wr=0;wr<ar.length;++wr)hr[ar[wr]]=wr;let pr=cr.length;for(;cr[pr-1]==="=";)--pr;const mr=new Uint8Array(pr*dr/8|0);let gr=0,yr=0,xr=0;for(let wr=0;wr<pr;++wr){const br=hr[cr[wr]];if(br===void 0)throw new SyntaxError(`Non-${fr} character`);yr=yr<<dr|br,gr+=dr,gr>=8&&(gr-=8,mr[xr++]=255&yr>>gr)}if(gr>=dr||255&yr<<8-gr)throw new SyntaxError("Unexpected end of data");return mr},encode$b=(cr,ar,dr)=>{const fr=ar[ar.length-1]==="=",hr=(1<<dr)-1;let pr="",mr=0,gr=0;for(let yr=0;yr<cr.length;++yr)for(gr=gr<<8|cr[yr],mr+=8;mr>dr;)mr-=dr,pr+=ar[hr&gr>>mr];if(mr&&(pr+=ar[hr&gr<<dr-mr]),fr)for(;pr.length*dr&7;)pr+="=";return pr},rfc4648=({name:cr,prefix:ar,bitsPerChar:dr,alphabet:fr})=>from$1({prefix:ar,name:cr,encode(hr){return encode$b(hr,fr,dr)},decode(hr){return decode$a(hr,fr,dr,cr)}}),base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$1=Object.freeze(Object.defineProperty({__proto__:null,base32,base32hex,base32hexpad,base32hexpadupper,base32hexupper,base32pad,base32padupper,base32upper,base32z},Symbol.toStringTag,{value:"Module"})),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc,base58flickr},Symbol.toStringTag,{value:"Module"}));var encode_1=encode$a,MSB$2=128,REST$2=127,MSBALL=~REST$2,INT=Math.pow(2,31);function encode$a(cr,ar,dr){ar=ar||[],dr=dr||0;for(var fr=dr;cr>=INT;)ar[dr++]=cr&255|MSB$2,cr/=128;for(;cr&MSBALL;)ar[dr++]=cr&255|MSB$2,cr>>>=7;return ar[dr]=cr|0,encode$a.bytes=dr-fr+1,ar}var decode$9=read$2,MSB$1$1=128,REST$1$1=127;function read$2(cr,fr){var dr=0,fr=fr||0,hr=0,pr=fr,mr,gr=cr.length;do{if(pr>=gr)throw read$2.bytes=0,new RangeError("Could not decode varint");mr=cr[pr++],dr+=hr<28?(mr&REST$1$1)<<hr:(mr&REST$1$1)*Math.pow(2,hr),hr+=7}while(mr>=MSB$1$1);return read$2.bytes=pr-fr,dr}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length$1=function(cr){return cr<N1$1?1:cr<N2$1?2:cr<N3$1?3:cr<N4$1?4:cr<N5$1?5:cr<N6$1?6:cr<N7$1?7:cr<N8?8:cr<N9?9:10},varint={encode:encode_1,decode:decode$9,encodingLength:length$1},_brrp_varint=varint;const decode$8=(cr,ar=0)=>[_brrp_varint.decode(cr,ar),_brrp_varint.decode.bytes],encodeTo=(cr,ar,dr=0)=>(_brrp_varint.encode(cr,ar,dr),ar),encodingLength$1=cr=>_brrp_varint.encodingLength(cr),create$5=(cr,ar)=>{const dr=ar.byteLength,fr=encodingLength$1(cr),hr=fr+encodingLength$1(dr),pr=new Uint8Array(hr+dr);return encodeTo(cr,pr,0),encodeTo(dr,pr,fr),pr.set(ar,hr),new Digest(cr,dr,ar,pr)},decode$7=cr=>{const ar=coerce(cr),[dr,fr]=decode$8(ar),[hr,pr]=decode$8(ar.subarray(fr)),mr=ar.subarray(fr+pr);if(mr.byteLength!==hr)throw new Error("Incorrect length");return new Digest(dr,hr,mr,ar)},equals$2=(cr,ar)=>{if(cr===ar)return!0;{const dr=ar;return cr.code===dr.code&&cr.size===dr.size&&dr.bytes instanceof Uint8Array&&equals$3(cr.bytes,dr.bytes)}};class Digest{constructor(ar,dr,fr,hr){this.code=ar,this.size=dr,this.digest=fr,this.bytes=hr}}const format$1=(cr,ar)=>{const{bytes:dr,version:fr}=cr;switch(fr){case 0:return toStringV0(dr,baseCache(cr),ar||base58btc.encoder);default:return toStringV1(dr,baseCache(cr),ar||base32.encoder)}},cache$2=new WeakMap,baseCache=cr=>{const ar=cache$2.get(cr);if(ar==null){const dr=new Map;return cache$2.set(cr,dr),dr}return ar};class CID{constructor(ar,dr,fr,hr){this.code=dr,this.version=ar,this.multihash=fr,this.bytes=hr,this["/"]=hr}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:ar,multihash:dr}=this;if(ar!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(dr.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(dr)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:ar,digest:dr}=this.multihash,fr=create$5(ar,dr);return CID.createV1(this.code,fr)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(ar){return CID.equals(this,ar)}static equals(ar,dr){const fr=dr;return fr&&ar.code===fr.code&&ar.version===fr.version&&equals$2(ar.multihash,fr.multihash)}toString(ar){return format$1(this,ar)}toJSON(){return{"/":format$1(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(ar){if(ar==null)return null;const dr=ar;if(dr instanceof CID)return dr;if(dr["/"]!=null&&dr["/"]===dr.bytes||dr.asCID===dr){const{version:fr,code:hr,multihash:pr,bytes:mr}=dr;return new CID(fr,hr,pr,mr||encodeCID(fr,hr,pr.bytes))}else if(dr[cidSymbol]===!0){const{version:fr,multihash:hr,code:pr}=dr,mr=decode$7(hr);return CID.create(fr,pr,mr)}else return null}static create(ar,dr,fr){if(typeof dr!="number")throw new Error("String codecs are no longer supported");if(!(fr.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(ar){case 0:{if(dr!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(ar,dr,fr,fr.bytes)}case 1:{const hr=encodeCID(ar,dr,fr.bytes);return new CID(ar,dr,fr,hr)}default:throw new Error("Invalid version")}}static createV0(ar){return CID.create(0,DAG_PB_CODE,ar)}static createV1(ar,dr){return CID.create(1,ar,dr)}static decode(ar){const[dr,fr]=CID.decodeFirst(ar);if(fr.length)throw new Error("Incorrect length");return dr}static decodeFirst(ar){const dr=CID.inspectBytes(ar),fr=dr.size-dr.multihashSize,hr=coerce(ar.subarray(fr,fr+dr.multihashSize));if(hr.byteLength!==dr.multihashSize)throw new Error("Incorrect length");const pr=hr.subarray(dr.multihashSize-dr.digestSize),mr=new Digest(dr.multihashCode,dr.digestSize,pr,hr);return[dr.version===0?CID.createV0(mr):CID.createV1(dr.codec,mr),ar.subarray(dr.size)]}static inspectBytes(ar){let dr=0;const fr=()=>{const[br,Sr]=decode$8(ar.subarray(dr));return dr+=Sr,br};let hr=fr(),pr=DAG_PB_CODE;if(hr===18?(hr=0,dr=0):pr=fr(),hr!==0&&hr!==1)throw new RangeError(`Invalid CID version ${hr}`);const mr=dr,gr=fr(),yr=fr(),xr=dr+yr,wr=xr-mr;return{version:hr,codec:pr,multihashCode:gr,digestSize:yr,multihashSize:wr,size:xr}}static parse(ar,dr){const[fr,hr]=parseCIDtoBytes(ar,dr),pr=CID.decode(hr);if(pr.version===0&&ar[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache(pr).set(fr,ar),pr}}const parseCIDtoBytes=(cr,ar)=>{switch(cr[0]){case"Q":{const dr=ar||base58btc;return[base58btc.prefix,dr.decode(`${base58btc.prefix}${cr}`)]}case base58btc.prefix:{const dr=ar||base58btc;return[base58btc.prefix,dr.decode(cr)]}case base32.prefix:{const dr=ar||base32;return[base32.prefix,dr.decode(cr)]}default:{if(ar==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[cr[0],ar.decode(cr)]}}},toStringV0=(cr,ar,dr)=>{const{prefix:fr}=dr;if(fr!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${dr.name} encoding`);const hr=ar.get(fr);if(hr==null){const pr=dr.encode(cr).slice(1);return ar.set(fr,pr),pr}else return hr},toStringV1=(cr,ar,dr)=>{const{prefix:fr}=dr,hr=ar.get(fr);if(hr==null){const pr=dr.encode(cr);return ar.set(fr,pr),pr}else return hr},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(cr,ar,dr)=>{const fr=encodingLength$1(cr),hr=fr+encodingLength$1(ar),pr=new Uint8Array(hr+dr.byteLength);return encodeTo(cr,pr,0),encodeTo(ar,pr,fr),pr.set(dr,hr),pr},cidSymbol=Symbol.for("@ipld/js-cid/CID"),CID_CBOR_TAG=42;function cidEncoder$1(cr){if(cr.asCID!==cr&&cr["/"]!==cr.bytes)return null;const ar=CID.asCID(cr);if(!ar)return null;const dr=new Uint8Array(ar.bytes.byteLength+1);return dr.set(ar.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,dr)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(cr){if(Number.isNaN(cr))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(cr===1/0||cr===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}};function cidDecoder(cr){if(cr[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(cr.subarray(1))}const decodeOptions$1={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions$1.tags[CID_CBOR_TAG]=cidDecoder;const code$4=113,encode$9=cr=>encode$c(cr,encodeOptions$1),decode$6=cr=>decode$b(cr,decodeOptions$1);class JSONEncoder extends Array{constructor(){super(),this.inRecursive=[]}prefix(ar){const dr=this.inRecursive[this.inRecursive.length-1];dr&&(dr.type===Type.array&&(dr.elements++,dr.elements!==1&&ar.push([44])),dr.type===Type.map&&(dr.elements++,dr.elements!==1&&(dr.elements%2===1?ar.push([44]):ar.push([58]))))}[Type.uint.major](ar,dr){this.prefix(ar);const fr=String(dr.value),hr=[];for(let pr=0;pr<fr.length;pr++)hr[pr]=fr.charCodeAt(pr);ar.push(hr)}[Type.negint.major](ar,dr){this[Type.uint.major](ar,dr)}[Type.bytes.major](ar,dr){throw new Error(`${encodeErrPrefix} unsupported type: Uint8Array`)}[Type.string.major](ar,dr){this.prefix(ar);const fr=fromString$3(JSON.stringify(dr.value));ar.push(fr.length>32?asU8A(fr):fr)}[Type.array.major](ar,dr){this.prefix(ar),this.inRecursive.push({type:Type.array,elements:0}),ar.push([91])}[Type.map.major](ar,dr){this.prefix(ar),this.inRecursive.push({type:Type.map,elements:0}),ar.push([123])}[Type.tag.major](ar,dr){}[Type.float.major](ar,dr){if(dr.type.name==="break"){const mr=this.inRecursive.pop();if(mr){if(mr.type===Type.array)ar.push([93]);else if(mr.type===Type.map)ar.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(dr.value===void 0)throw new Error(`${encodeErrPrefix} unsupported type: undefined`);if(this.prefix(ar),dr.type.name==="true"){ar.push([116,114,117,101]);return}else if(dr.type.name==="false"){ar.push([102,97,108,115,101]);return}else if(dr.type.name==="null"){ar.push([110,117,108,108]);return}const fr=String(dr.value),hr=[];let pr=!1;for(let mr=0;mr<fr.length;mr++)hr[mr]=fr.charCodeAt(mr),!pr&&(hr[mr]===46||hr[mr]===101||hr[mr]===69)&&(pr=!0);pr||(hr.push(46),hr.push(48)),ar.push(hr)}}function mapSorter(cr,ar){if(Array.isArray(cr[0])||Array.isArray(ar[0]))throw new Error(`${encodeErrPrefix} complex map keys are not supported`);const dr=cr[0],fr=ar[0];if(dr.type!==Type.string||fr.type!==Type.string)throw new Error(`${encodeErrPrefix} non-string map keys are not supported`);if(dr<fr)return-1;if(dr>fr)return 1;throw new Error(`${encodeErrPrefix} unexpected duplicate map keys, this is not supported`)}const defaultEncodeOptions={addBreakTokens:!0,mapSorter};function encode$8(cr,ar){return ar=Object.assign({},defaultEncodeOptions,ar),encodeCustom(cr,new JSONEncoder,ar)}class Tokenizer{constructor(ar,dr={}){this._pos=0,this.data=ar,this.options=dr,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let ar=this.ch();for(;ar===32||ar===9||ar===13||ar===10;)ar=this.data[++this._pos]}expect(ar){if(this.data.length-this._pos<ar.length)throw new Error(`${decodeErrPrefix} unexpected end of input at position ${this._pos}`);for(let dr=0;dr<ar.length;dr++)if(this.data[this._pos++]!==ar[dr])throw new Error(`${decodeErrPrefix} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...ar)}'`)}parseNumber(){const ar=this._pos;let dr=!1,fr=!1;const hr=gr=>{for(;!this.done();){const yr=this.ch();if(gr.includes(yr))this._pos++;else break}};if(this.ch()===45&&(dr=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,fr=!0;else return new Token(Type.uint,0,this._pos-ar);if(hr([48,49,50,51,52,53,54,55,56,57]),dr&&this._pos===ar+1)throw new Error(`${decodeErrPrefix} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(fr)throw new Error(`${decodeErrPrefix} unexpected token at position ${this._pos}`);fr=!0,this._pos++,hr([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(fr=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,hr([48,49,50,51,52,53,54,55,56,57]));const pr=String.fromCharCode.apply(null,this.data.subarray(ar,this._pos)),mr=parseFloat(pr);return fr?new Token(Type.float,mr,this._pos-ar):this.options.allowBigInt!==!0||Number.isSafeInteger(mr)?new Token(mr>=0?Type.uint:Type.negint,mr,this._pos-ar):new Token(mr>=0?Type.uint:Type.negint,BigInt(pr),this._pos-ar)}parseString(){if(this.ch()!==34)throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let pr=this._pos,mr=0;pr<this.data.length&&mr<65536;pr++,mr++){const gr=this.data[pr];if(gr===92||gr<32||gr>=128)break;if(gr===34){const yr=String.fromCharCode.apply(null,this.data.subarray(this._pos,pr));return this._pos=pr+1,new Token(Type.string,yr,mr)}}const ar=this._pos,dr=[],fr=()=>{if(this._pos+4>=this.data.length)throw new Error(`${decodeErrPrefix} unexpected end of unicode escape sequence at position ${this._pos}`);let pr=0;for(let mr=0;mr<4;mr++){let gr=this.ch();if(gr>=48&&gr<=57)gr-=48;else if(gr>=97&&gr<=102)gr=gr-97+10;else if(gr>=65&&gr<=70)gr=gr-65+10;else throw new Error(`${decodeErrPrefix} unexpected unicode escape character at position ${this._pos}`);pr=pr*16+gr,this._pos++}return pr},hr=()=>{const pr=this.ch();let mr=null,gr=pr>239?4:pr>223?3:pr>191?2:1;if(this._pos+gr>this.data.length)throw new Error(`${decodeErrPrefix} unexpected unicode sequence at position ${this._pos}`);let yr,xr,wr,br;switch(gr){case 1:pr<128&&(mr=pr);break;case 2:yr=this.data[this._pos+1],(yr&192)===128&&(br=(pr&31)<<6|yr&63,br>127&&(mr=br));break;case 3:yr=this.data[this._pos+1],xr=this.data[this._pos+2],(yr&192)===128&&(xr&192)===128&&(br=(pr&15)<<12|(yr&63)<<6|xr&63,br>2047&&(br<55296||br>57343)&&(mr=br));break;case 4:yr=this.data[this._pos+1],xr=this.data[this._pos+2],wr=this.data[this._pos+3],(yr&192)===128&&(xr&192)===128&&(wr&192)===128&&(br=(pr&15)<<18|(yr&63)<<12|(xr&63)<<6|wr&63,br>65535&&br<1114112&&(mr=br))}mr===null?(mr=65533,gr=1):mr>65535&&(mr-=65536,dr.push(mr>>>10&1023|55296),mr=56320|mr&1023),dr.push(mr),this._pos+=gr};for(;!this.done();){const pr=this.ch();let mr;switch(pr){case 92:if(this._pos++,this.done())throw new Error(`${decodeErrPrefix} unexpected string termination at position ${this._pos}`);switch(mr=this.ch(),this._pos++,mr){case 34:case 39:case 92:case 47:dr.push(mr);break;case 98:dr.push(8);break;case 116:dr.push(9);break;case 110:dr.push(10);break;case 102:dr.push(12);break;case 114:dr.push(13);break;case 117:dr.push(fr());break;default:throw new Error(`${decodeErrPrefix} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new Token(Type.string,decodeCodePointsArray(dr),this._pos-ar);default:if(pr<32)throw new Error(`${decodeErrPrefix} invalid control character at position ${this._pos}`);pr<128?(dr.push(pr),this._pos++):hr()}}throw new Error(`${decodeErrPrefix} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new Token(Type.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new Token(Type.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Token(Type.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Token(Type.false,!1,5);case 116:return this.expect([116,114,117,101]),new Token(Type.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);const ar=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),ar}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${decodeErrPrefix} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function decode$5(cr,ar){return ar=Object.assign({tokenizer:new Tokenizer(cr,ar)},ar),decode$b(cr,ar)}const from=({name:cr,code:ar,encode:dr})=>new Hasher(cr,ar,dr);class Hasher{constructor(ar,dr,fr){this.name=ar,this.code=dr,this.encode=fr}digest(ar){if(ar instanceof Uint8Array){const dr=this.encode(ar);return dr instanceof Uint8Array?create$5(this.code,dr):dr.then(fr=>create$5(this.code,fr))}else throw Error("Unknown type, must be binary type")}}const base64$2=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$3=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$2,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"}));function cidEncoder(cr){if(cr.asCID!==cr&&cr["/"]!==cr.bytes)return null;const ar=CID.asCID(cr);if(!ar)return null;const dr=ar.toString();return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.string,dr,dr.length),new Token(Type.break,void 0,1)]}function bytesEncoder(cr){const ar=base64$2.encode(cr).slice(1);return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.map,1/0,1),new Token(Type.string,"bytes",5),new Token(Type.string,ar,ar.length),new Token(Type.break,void 0,1),new Token(Type.break,void 0,1)]}function taBytesEncoder(cr){return bytesEncoder(new Uint8Array(cr.buffer,cr.byteOffset,cr.byteLength))}function abBytesEncoder(cr){return bytesEncoder(new Uint8Array(cr))}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(cr){if(Number.isNaN(cr))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(cr===1/0||cr===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={typeEncoders:{Object:cidEncoder,Buffer:bytesEncoder,Uint8Array:bytesEncoder,Int8Array:taBytesEncoder,Uint16Array:taBytesEncoder,Int16Array:taBytesEncoder,Uint32Array:taBytesEncoder,Int32Array:taBytesEncoder,Float32Array:taBytesEncoder,Float64Array:taBytesEncoder,Uint8ClampedArray:taBytesEncoder,BigInt64Array:taBytesEncoder,BigUint64Array:taBytesEncoder,DataView:taBytesEncoder,ArrayBuffer:abBytesEncoder,undefined:undefinedEncoder,number:numberEncoder}};class DagJsonTokenizer extends Tokenizer{constructor(ar,dr){super(ar,dr),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const ar=this._next();if(ar.type===Type.map){const dr=this._next();if(dr.type===Type.string&&dr.value==="/"){const fr=this._next();if(fr.type===Type.string){if(this._next().type!==Type.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(fr),new Token(Type.tag,42,0)}if(fr.type===Type.map){const hr=this._next();if(hr.type===Type.string&&hr.value==="bytes"){const pr=this._next();if(pr.type===Type.string){for(let gr=0;gr<2;gr++)if(this._next().type!==Type.break)throw new Error("Invalid encoded Bytes form");const mr=base64$2.decode(`m${pr.value}`);return new Token(Type.bytes,mr,pr.value.length)}this.tokenBuffer.push(pr)}this.tokenBuffer.push(hr)}this.tokenBuffer.push(fr)}this.tokenBuffer.push(dr)}return ar}}const decodeOptions={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions.tags[42]=CID.parse;const code$3=297,encode$7=cr=>encode$8(cr,encodeOptions),decode$4=cr=>{const ar=Object.assign(decodeOptions,{tokenizer:new DagJsonTokenizer(cr,decodeOptions)});return decode$5(cr,ar)},format=cr=>utf8Decoder.decode(encode$7(cr)),utf8Decoder=new TextDecoder,parse$1=cr=>decode$4(utf8Encoder.encode(cr)),utf8Encoder=new TextEncoder,code$2=85;function assert$7(cr,ar){if(!cr)throw new Error(ar??"assertion failed")}const codecs=[{name:"dag-cbor",code:code$4,encode:cr=>[encode$9(cr)]},{name:"dag-json",code:code$3,encode:cr=>[encode$7(cr)]},{name:"raw",code:code$2,encode:cr=>{if(typeof cr=="string")return[new TextEncoder().encode(cr)];if(cr instanceof Uint8Array)return[cr];throw new TypeError("raw values must be strings or Uint8Arrays")}}],defaultCodec="dag-cbor";function getCodec(cr){if(cr.codec!==void 0&&typeof cr.codec!="string")return cr.codec;const ar=cr.codec??defaultCodec,dr=codecs.find(fr=>fr.name===ar);return assert$7(dr!==void 0,"unsupported codec"),dr}const Chi=(cr,ar,dr)=>cr&ar^~cr&dr,Maj=(cr,ar,dr)=>cr&ar^cr&dr^ar&dr,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV$1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=IV$1[0]|0,this.B=IV$1[1]|0,this.C=IV$1[2]|0,this.D=IV$1[3]|0,this.E=IV$1[4]|0,this.F=IV$1[5]|0,this.G=IV$1[6]|0,this.H=IV$1[7]|0}get(){const{A:ar,B:dr,C:fr,D:hr,E:pr,F:mr,G:gr,H:yr}=this;return[ar,dr,fr,hr,pr,mr,gr,yr]}set(ar,dr,fr,hr,pr,mr,gr,yr){this.A=ar|0,this.B=dr|0,this.C=fr|0,this.D=hr|0,this.E=pr|0,this.F=mr|0,this.G=gr|0,this.H=yr|0}process(ar,dr){for(let br=0;br<16;br++,dr+=4)SHA256_W[br]=ar.getUint32(dr,!1);for(let br=16;br<64;br++){const Sr=SHA256_W[br-15],vr=SHA256_W[br-2],Er=rotr(Sr,7)^rotr(Sr,18)^Sr>>>3,Ar=rotr(vr,17)^rotr(vr,19)^vr>>>10;SHA256_W[br]=Ar+SHA256_W[br-7]+Er+SHA256_W[br-16]|0}let{A:fr,B:hr,C:pr,D:mr,E:gr,F:yr,G:xr,H:wr}=this;for(let br=0;br<64;br++){const Sr=rotr(gr,6)^rotr(gr,11)^rotr(gr,25),vr=wr+Sr+Chi(gr,yr,xr)+SHA256_K[br]+SHA256_W[br]|0,Ar=(rotr(fr,2)^rotr(fr,13)^rotr(fr,22))+Maj(fr,hr,pr)|0;wr=xr,xr=yr,yr=gr,gr=mr+vr|0,mr=pr,pr=hr,hr=fr,fr=vr+Ar|0}fr=fr+this.A|0,hr=hr+this.B|0,pr=pr+this.C|0,mr=mr+this.D|0,gr=gr+this.E|0,yr=yr+this.F|0,xr=xr+this.G|0,wr=wr+this.H|0,this.set(fr,hr,pr,mr,gr,yr,xr,wr)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256$3=wrapConstructor(()=>new SHA256);class BLAKE2 extends Hash{constructor(ar,dr,fr={},hr,pr,mr){if(super(),this.blockLen=ar,this.outputLen=dr,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,number$2(ar),number$2(dr),number$2(hr),dr<0||dr>hr)throw new Error("outputLen bigger than keyLen");if(fr.key!==void 0&&(fr.key.length<1||fr.key.length>hr))throw new Error(`key must be up 1..${hr} byte long or undefined`);if(fr.salt!==void 0&&fr.salt.length!==pr)throw new Error(`salt must be ${pr} byte long or undefined`);if(fr.personalization!==void 0&&fr.personalization.length!==mr)throw new Error(`personalization must be ${mr} byte long or undefined`);this.buffer32=u32$1(this.buffer=new Uint8Array(ar))}update(ar){exists$1(this);const{blockLen:dr,buffer:fr,buffer32:hr}=this;ar=toBytes$2(ar);const pr=ar.length,mr=ar.byteOffset,gr=ar.buffer;for(let yr=0;yr<pr;){this.pos===dr&&(this.compress(hr,0,!1),this.pos=0);const xr=Math.min(dr-this.pos,pr-yr),wr=mr+yr;if(xr===dr&&!(wr%4)&&yr+xr<pr){const br=new Uint32Array(gr,wr,Math.floor((pr-yr)/4));for(let Sr=0;yr+dr<pr;Sr+=hr.length,yr+=dr)this.length+=dr,this.compress(br,Sr,!1);continue}fr.set(ar.subarray(yr,yr+xr),this.pos),this.pos+=xr,this.length+=xr,yr+=xr}return this}digestInto(ar){exists$1(this),output$1(ar,this);const{pos:dr,buffer32:fr}=this;this.finished=!0,this.buffer.subarray(dr).fill(0),this.compress(fr,0,!0);const hr=u32$1(ar);this.get().forEach((pr,mr)=>hr[mr]=pr)}digest(){const{buffer:ar,outputLen:dr}=this;this.digestInto(ar);const fr=ar.slice(0,dr);return this.destroy(),fr}_cloneInto(ar){const{buffer:dr,length:fr,finished:hr,destroyed:pr,outputLen:mr,pos:gr}=this;return ar||(ar=new this.constructor({dkLen:mr})),ar.set(...this.get()),ar.length=fr,ar.finished=hr,ar.destroyed=pr,ar.outputLen=mr,ar.buffer.set(dr),ar.pos=gr,ar}}const IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);function G1(cr,ar,dr,fr,hr){return cr=cr+ar+hr|0,fr=rotr(fr^cr,16),dr=dr+fr|0,ar=rotr(ar^dr,12),{a:cr,b:ar,c:dr,d:fr}}function G2(cr,ar,dr,fr,hr){return cr=cr+ar+hr|0,fr=rotr(fr^cr,8),dr=dr+fr|0,ar=rotr(ar^dr,7),{a:cr,b:ar,c:dr,d:fr}}function compress(cr,ar,dr,fr,hr,pr,mr,gr,yr,xr,wr,br,Sr,vr,Er,Ar,_r,Cr,kr,Rr){let Ir=0;for(let Nr=0;Nr<fr;Nr++)({a:hr,b:yr,c:Sr,d:_r}=G1(hr,yr,Sr,_r,dr[ar+cr[Ir++]])),{a:hr,b:yr,c:Sr,d:_r}=G2(hr,yr,Sr,_r,dr[ar+cr[Ir++]]),{a:pr,b:xr,c:vr,d:Cr}=G1(pr,xr,vr,Cr,dr[ar+cr[Ir++]]),{a:pr,b:xr,c:vr,d:Cr}=G2(pr,xr,vr,Cr,dr[ar+cr[Ir++]]),{a:mr,b:wr,c:Er,d:kr}=G1(mr,wr,Er,kr,dr[ar+cr[Ir++]]),{a:mr,b:wr,c:Er,d:kr}=G2(mr,wr,Er,kr,dr[ar+cr[Ir++]]),{a:gr,b:br,c:Ar,d:Rr}=G1(gr,br,Ar,Rr,dr[ar+cr[Ir++]]),{a:gr,b:br,c:Ar,d:Rr}=G2(gr,br,Ar,Rr,dr[ar+cr[Ir++]]),{a:hr,b:xr,c:Er,d:Rr}=G1(hr,xr,Er,Rr,dr[ar+cr[Ir++]]),{a:hr,b:xr,c:Er,d:Rr}=G2(hr,xr,Er,Rr,dr[ar+cr[Ir++]]),{a:pr,b:wr,c:Ar,d:_r}=G1(pr,wr,Ar,_r,dr[ar+cr[Ir++]]),{a:pr,b:wr,c:Ar,d:_r}=G2(pr,wr,Ar,_r,dr[ar+cr[Ir++]]),{a:mr,b:br,c:Sr,d:Cr}=G1(mr,br,Sr,Cr,dr[ar+cr[Ir++]]),{a:mr,b:br,c:Sr,d:Cr}=G2(mr,br,Sr,Cr,dr[ar+cr[Ir++]]),{a:gr,b:yr,c:vr,d:kr}=G1(gr,yr,vr,kr,dr[ar+cr[Ir++]]),{a:gr,b:yr,c:vr,d:kr}=G2(gr,yr,vr,kr,dr[ar+cr[Ir++]]);return{v0:hr,v1:pr,v2:mr,v3:gr,v4:yr,v5:xr,v6:wr,v7:br,v8:Sr,v9:vr,v10:Er,v11:Ar,v12:_r,v13:Cr,v14:kr,v15:Rr}}const SIGMA=(()=>{const cr=Array.from({length:16},(fr,hr)=>hr),ar=fr=>[2,6,3,10,7,0,4,13,1,11,12,5,9,14,15,8].map(hr=>fr[hr]),dr=[];for(let fr=0,hr=cr;fr<7;fr++,hr=ar(hr))dr.push(...hr);return Uint8Array.from(dr)})();class BLAKE3 extends BLAKE2{constructor(ar={},dr=0){if(super(64,ar.dkLen===void 0?32:ar.dkLen,{},Number.MAX_SAFE_INTEGER,0,0),this.flags=0,this.chunkPos=0,this.chunksDone=0,this.stack=[],this.posOut=0,this.bufferOut32=new Uint32Array(16),this.chunkOut=0,this.enableXOF=!0,this.outputLen=ar.dkLen===void 0?32:ar.dkLen,number$2(this.outputLen),ar.key!==void 0&&ar.context!==void 0)throw new Error("Blake3: only key or context can be specified at same time");if(ar.key!==void 0){const fr=toBytes$2(ar.key).slice();if(fr.length!==32)throw new Error("Blake3: key should be 32 byte");this.IV=u32$1(fr),this.flags=dr|16}else if(ar.context!==void 0){const fr=new BLAKE3({dkLen:32},32).update(ar.context).digest();this.IV=u32$1(fr),this.flags=dr|64}else this.IV=IV.slice(),this.flags=dr;this.state=this.IV.slice(),this.bufferOut=u8(this.bufferOut32)}get(){return[]}set(){}b2Compress(ar,dr,fr,hr=0){const{state:pr,pos:mr}=this,{h:gr,l:yr}=fromBig(BigInt(ar),!0),{v0:xr,v1:wr,v2:br,v3:Sr,v4:vr,v5:Er,v6:Ar,v7:_r,v8:Cr,v9:kr,v10:Rr,v11:Ir,v12:Nr,v13:Pr,v14:Tr,v15:Br}=compress(SIGMA,hr,fr,7,pr[0],pr[1],pr[2],pr[3],pr[4],pr[5],pr[6],pr[7],IV[0],IV[1],IV[2],IV[3],gr,yr,mr,dr);pr[0]=xr^Cr,pr[1]=wr^kr,pr[2]=br^Rr,pr[3]=Sr^Ir,pr[4]=vr^Nr,pr[5]=Er^Pr,pr[6]=Ar^Tr,pr[7]=_r^Br}compress(ar,dr=0,fr=!1){let hr=this.flags;if(this.chunkPos||(hr|=1),(this.chunkPos===15||fr)&&(hr|=2),fr||(this.pos=this.blockLen),this.b2Compress(this.chunksDone,hr,ar,dr),this.chunkPos+=1,this.chunkPos===16||fr){let pr=this.state;this.state=this.IV.slice();for(let mr,gr=this.chunksDone+1;(fr||!(gr&1))&&(mr=this.stack.pop());gr>>=1)this.buffer32.set(mr,0),this.buffer32.set(pr,8),this.pos=this.blockLen,this.b2Compress(0,this.flags|4,this.buffer32,0),pr=this.state,this.state=this.IV.slice();this.chunksDone++,this.chunkPos=0,this.stack.push(pr)}this.pos=0}_cloneInto(ar){ar=super._cloneInto(ar);const{IV:dr,flags:fr,state:hr,chunkPos:pr,posOut:mr,chunkOut:gr,stack:yr,chunksDone:xr}=this;return ar.state.set(hr.slice()),ar.stack=yr.map(wr=>Uint32Array.from(wr)),ar.IV.set(dr),ar.flags=fr,ar.chunkPos=pr,ar.chunksDone=xr,ar.posOut=mr,ar.chunkOut=gr,ar.enableXOF=this.enableXOF,ar.bufferOut32.set(this.bufferOut32),ar}destroy(){this.destroyed=!0,this.state.fill(0),this.buffer32.fill(0),this.IV.fill(0),this.bufferOut32.fill(0);for(let ar of this.stack)ar.fill(0)}b2CompressOut(){const{state:ar,pos:dr,flags:fr,buffer32:hr,bufferOut32:pr}=this,{h:mr,l:gr}=fromBig(BigInt(this.chunkOut++)),{v0:yr,v1:xr,v2:wr,v3:br,v4:Sr,v5:vr,v6:Er,v7:Ar,v8:_r,v9:Cr,v10:kr,v11:Rr,v12:Ir,v13:Nr,v14:Pr,v15:Tr}=compress(SIGMA,0,hr,7,ar[0],ar[1],ar[2],ar[3],ar[4],ar[5],ar[6],ar[7],IV[0],IV[1],IV[2],IV[3],gr,mr,dr,fr);pr[0]=yr^_r,pr[1]=xr^Cr,pr[2]=wr^kr,pr[3]=br^Rr,pr[4]=Sr^Ir,pr[5]=vr^Nr,pr[6]=Er^Pr,pr[7]=Ar^Tr,pr[8]=ar[0]^_r,pr[9]=ar[1]^Cr,pr[10]=ar[2]^kr,pr[11]=ar[3]^Rr,pr[12]=ar[4]^Ir,pr[13]=ar[5]^Nr,pr[14]=ar[6]^Pr,pr[15]=ar[7]^Tr,this.posOut=0}finish(){if(this.finished)return;this.finished=!0,this.buffer.fill(0,this.pos);let ar=this.flags|8;this.stack.length?(ar|=4,this.compress(this.buffer32,0,!0),this.chunksDone=0,this.pos=this.blockLen):ar|=(this.chunkPos?0:1)|2,this.flags=ar,this.b2CompressOut()}writeInto(ar){exists$1(this,!1),bytes$1(ar),this.finish();const{blockLen:dr,bufferOut:fr}=this;for(let hr=0,pr=ar.length;hr<pr;){this.posOut>=dr&&this.b2CompressOut();const mr=Math.min(dr-this.posOut,pr-hr);ar.set(fr.subarray(this.posOut,this.posOut+mr),hr),this.posOut+=mr,hr+=mr}return ar}xofInto(ar){if(!this.enableXOF)throw new Error("XOF is not possible after digest call");return this.writeInto(ar)}xof(ar){return number$2(ar),this.xofInto(new Uint8Array(ar))}digestInto(ar){if(output$1(ar,this),this.finished)throw new Error("digest() was already called");return this.enableXOF=!1,this.writeInto(ar),this.destroy(),ar}digest(){return this.digestInto(new Uint8Array(this.outputLen))}}const blake3=wrapXOFConstructorWithOpts(cr=>new BLAKE3(cr)),digests=[{name:"sha2-256",code:18,digest:cr=>{const ar=sha256$3.create();for(const dr of cr)ar.update(dr);return ar.digest()}},{name:"blake3-256",code:30,digest:cr=>{const ar=blake3.create({dkLen:32});for(const dr of cr)ar.update(dr);return ar.digest()}},{name:"blake3-128",code:30,digest:cr=>{const ar=blake3.create({dkLen:16});for(const dr of cr)ar.update(dr);return ar.digest()}}],defaultDigest="sha2-256";function getDigest(cr){if(cr.digest!==void 0&&typeof cr.digest!="string")return cr.digest;const ar=cr.digest??defaultDigest,dr=digests.find(fr=>fr.name===ar);return assert$7(dr!==void 0,"unsupported digest"),dr}function getCID(cr,ar={}){const[dr,fr]=[getCodec(ar),getDigest(ar)],hr=fr.digest(dr.encode(cr));return CID$1.createV1(dr.code,create$6(fr.code,hr))}var __classPrivateFieldSet$c=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},__classPrivateFieldGet$f=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_Ed25519Signer_privateKey;class Ed25519Signer{constructor(ar=ed25519.utils.randomPrivateKey()){_Ed25519Signer_privateKey.set(this,void 0);const dr=encodingLength$2(Ed25519Signer.code),fr=ed25519.getPublicKey(ar),hr=new Uint8Array(dr+fr.byteLength);encodeTo$1(Ed25519Signer.code,hr,0),hr.set(fr,dr),this.uri=`did:key:${base58btc$1.encode(hr)}`,__classPrivateFieldSet$c(this,_Ed25519Signer_privateKey,ar,"f")}sign(ar,dr={}){const fr=getCID(ar,dr),hr=ed25519.sign(fr.bytes,__classPrivateFieldGet$f(this,_Ed25519Signer_privateKey,"f"));return{publicKey:this.uri,signature:hr,cid:fr}}export(){return{type:"ed25519",privateKey:__classPrivateFieldGet$f(this,_Ed25519Signer_privateKey,"f")}}}_Ed25519Signer_privateKey=new WeakMap;Ed25519Signer.type="ed25519";Ed25519Signer.code=237;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts(cr){const ar=validateBasic(cr);validateObject(ar,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:dr,Fp:fr,a:hr}=ar;if(dr){if(!fr.eql(hr,fr.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof dr!="object"||typeof dr.beta!="bigint"||typeof dr.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...ar})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER={Err:class extends Error{constructor(ar=""){super(ar)}},_parseInt(cr){const{Err:ar}=DER;if(cr.length<2||cr[0]!==2)throw new ar("Invalid signature integer tag");const dr=cr[1],fr=cr.subarray(2,dr+2);if(!dr||fr.length!==dr)throw new ar("Invalid signature integer: wrong length");if(fr[0]&128)throw new ar("Invalid signature integer: negative");if(fr[0]===0&&!(fr[1]&128))throw new ar("Invalid signature integer: unnecessary leading zero");return{d:b2n(fr),l:cr.subarray(dr+2)}},toSig(cr){const{Err:ar}=DER,dr=typeof cr=="string"?h2b(cr):cr;if(!isBytes(dr))throw new Error("ui8a expected");let fr=dr.length;if(fr<2||dr[0]!=48)throw new ar("Invalid signature tag");if(dr[1]!==fr-2)throw new ar("Invalid signature: incorrect length");const{d:hr,l:pr}=DER._parseInt(dr.subarray(2)),{d:mr,l:gr}=DER._parseInt(pr);if(gr.length)throw new ar("Invalid signature: left bytes after parsing");return{r:hr,s:mr}},hexFromSig(cr){const ar=xr=>Number.parseInt(xr[0],16)&8?"00"+xr:xr,dr=xr=>{const wr=xr.toString(16);return wr.length&1?`0${wr}`:wr},fr=ar(dr(cr.s)),hr=ar(dr(cr.r)),pr=fr.length/2,mr=hr.length/2,gr=dr(pr),yr=dr(mr);return`30${dr(mr+pr+4)}02${yr}${hr}02${gr}${fr}`}},_0n=BigInt(0),_1n$1=BigInt(1);BigInt(2);const _3n=BigInt(3);BigInt(4);function weierstrassPoints(cr){const ar=validatePointOpts(cr),{Fp:dr}=ar,fr=ar.toBytes||((Er,Ar,_r)=>{const Cr=Ar.toAffine();return concatBytes(Uint8Array.from([4]),dr.toBytes(Cr.x),dr.toBytes(Cr.y))}),hr=ar.fromBytes||(Er=>{const Ar=Er.subarray(1),_r=dr.fromBytes(Ar.subarray(0,dr.BYTES)),Cr=dr.fromBytes(Ar.subarray(dr.BYTES,2*dr.BYTES));return{x:_r,y:Cr}});function pr(Er){const{a:Ar,b:_r}=ar,Cr=dr.sqr(Er),kr=dr.mul(Cr,Er);return dr.add(dr.add(kr,dr.mul(Er,Ar)),_r)}if(!dr.eql(dr.sqr(ar.Gy),pr(ar.Gx)))throw new Error("bad generator point: equation left != right");function mr(Er){return typeof Er=="bigint"&&_0n<Er&&Er<ar.n}function gr(Er){if(!mr(Er))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function yr(Er){const{allowedPrivateKeyLengths:Ar,nByteLength:_r,wrapPrivateKey:Cr,n:kr}=ar;if(Ar&&typeof Er!="bigint"){if(isBytes(Er)&&(Er=bytesToHex(Er)),typeof Er!="string"||!Ar.includes(Er.length))throw new Error("Invalid key");Er=Er.padStart(_r*2,"0")}let Rr;try{Rr=typeof Er=="bigint"?Er:bytesToNumberBE(ensureBytes$1("private key",Er,_r))}catch{throw new Error(`private key must be ${_r} bytes, hex or bigint, not ${typeof Er}`)}return Cr&&(Rr=mod(Rr,kr)),gr(Rr),Rr}const xr=new Map;function wr(Er){if(!(Er instanceof br))throw new Error("ProjectivePoint expected")}class br{constructor(Ar,_r,Cr){if(this.px=Ar,this.py=_r,this.pz=Cr,Ar==null||!dr.isValid(Ar))throw new Error("x required");if(_r==null||!dr.isValid(_r))throw new Error("y required");if(Cr==null||!dr.isValid(Cr))throw new Error("z required")}static fromAffine(Ar){const{x:_r,y:Cr}=Ar||{};if(!Ar||!dr.isValid(_r)||!dr.isValid(Cr))throw new Error("invalid affine point");if(Ar instanceof br)throw new Error("projective point not allowed");const kr=Rr=>dr.eql(Rr,dr.ZERO);return kr(_r)&&kr(Cr)?br.ZERO:new br(_r,Cr,dr.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(Ar){const _r=dr.invertBatch(Ar.map(Cr=>Cr.pz));return Ar.map((Cr,kr)=>Cr.toAffine(_r[kr])).map(br.fromAffine)}static fromHex(Ar){const _r=br.fromAffine(hr(ensureBytes$1("pointHex",Ar)));return _r.assertValidity(),_r}static fromPrivateKey(Ar){return br.BASE.multiply(yr(Ar))}_setWindowSize(Ar){this._WINDOW_SIZE=Ar,xr.delete(this)}assertValidity(){if(this.is0()){if(ar.allowInfinityPoint&&!dr.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:Ar,y:_r}=this.toAffine();if(!dr.isValid(Ar)||!dr.isValid(_r))throw new Error("bad point: x or y not FE");const Cr=dr.sqr(_r),kr=pr(Ar);if(!dr.eql(Cr,kr))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:Ar}=this.toAffine();if(dr.isOdd)return!dr.isOdd(Ar);throw new Error("Field doesn't support isOdd")}equals(Ar){wr(Ar);const{px:_r,py:Cr,pz:kr}=this,{px:Rr,py:Ir,pz:Nr}=Ar,Pr=dr.eql(dr.mul(_r,Nr),dr.mul(Rr,kr)),Tr=dr.eql(dr.mul(Cr,Nr),dr.mul(Ir,kr));return Pr&&Tr}negate(){return new br(this.px,dr.neg(this.py),this.pz)}double(){const{a:Ar,b:_r}=ar,Cr=dr.mul(_r,_3n),{px:kr,py:Rr,pz:Ir}=this;let Nr=dr.ZERO,Pr=dr.ZERO,Tr=dr.ZERO,Br=dr.mul(kr,kr),Fr=dr.mul(Rr,Rr),jr=dr.mul(Ir,Ir),Ur=dr.mul(kr,Rr);return Ur=dr.add(Ur,Ur),Tr=dr.mul(kr,Ir),Tr=dr.add(Tr,Tr),Nr=dr.mul(Ar,Tr),Pr=dr.mul(Cr,jr),Pr=dr.add(Nr,Pr),Nr=dr.sub(Fr,Pr),Pr=dr.add(Fr,Pr),Pr=dr.mul(Nr,Pr),Nr=dr.mul(Ur,Nr),Tr=dr.mul(Cr,Tr),jr=dr.mul(Ar,jr),Ur=dr.sub(Br,jr),Ur=dr.mul(Ar,Ur),Ur=dr.add(Ur,Tr),Tr=dr.add(Br,Br),Br=dr.add(Tr,Br),Br=dr.add(Br,jr),Br=dr.mul(Br,Ur),Pr=dr.add(Pr,Br),jr=dr.mul(Rr,Ir),jr=dr.add(jr,jr),Br=dr.mul(jr,Ur),Nr=dr.sub(Nr,Br),Tr=dr.mul(jr,Fr),Tr=dr.add(Tr,Tr),Tr=dr.add(Tr,Tr),new br(Nr,Pr,Tr)}add(Ar){wr(Ar);const{px:_r,py:Cr,pz:kr}=this,{px:Rr,py:Ir,pz:Nr}=Ar;let Pr=dr.ZERO,Tr=dr.ZERO,Br=dr.ZERO;const Fr=ar.a,jr=dr.mul(ar.b,_3n);let Ur=dr.mul(_r,Rr),qr=dr.mul(Cr,Ir),Hr=dr.mul(kr,Nr),Or=dr.add(_r,Cr),Mr=dr.add(Rr,Ir);Or=dr.mul(Or,Mr),Mr=dr.add(Ur,qr),Or=dr.sub(Or,Mr),Mr=dr.add(_r,kr);let Lr=dr.add(Rr,Nr);return Mr=dr.mul(Mr,Lr),Lr=dr.add(Ur,Hr),Mr=dr.sub(Mr,Lr),Lr=dr.add(Cr,kr),Pr=dr.add(Ir,Nr),Lr=dr.mul(Lr,Pr),Pr=dr.add(qr,Hr),Lr=dr.sub(Lr,Pr),Br=dr.mul(Fr,Mr),Pr=dr.mul(jr,Hr),Br=dr.add(Pr,Br),Pr=dr.sub(qr,Br),Br=dr.add(qr,Br),Tr=dr.mul(Pr,Br),qr=dr.add(Ur,Ur),qr=dr.add(qr,Ur),Hr=dr.mul(Fr,Hr),Mr=dr.mul(jr,Mr),qr=dr.add(qr,Hr),Hr=dr.sub(Ur,Hr),Hr=dr.mul(Fr,Hr),Mr=dr.add(Mr,Hr),Ur=dr.mul(qr,Mr),Tr=dr.add(Tr,Ur),Ur=dr.mul(Lr,Mr),Pr=dr.mul(Or,Pr),Pr=dr.sub(Pr,Ur),Ur=dr.mul(Or,qr),Br=dr.mul(Lr,Br),Br=dr.add(Br,Ur),new br(Pr,Tr,Br)}subtract(Ar){return this.add(Ar.negate())}is0(){return this.equals(br.ZERO)}wNAF(Ar){return vr.wNAFCached(this,xr,Ar,_r=>{const Cr=dr.invertBatch(_r.map(kr=>kr.pz));return _r.map((kr,Rr)=>kr.toAffine(Cr[Rr])).map(br.fromAffine)})}multiplyUnsafe(Ar){const _r=br.ZERO;if(Ar===_0n)return _r;if(gr(Ar),Ar===_1n$1)return this;const{endo:Cr}=ar;if(!Cr)return vr.unsafeLadder(this,Ar);let{k1neg:kr,k1:Rr,k2neg:Ir,k2:Nr}=Cr.splitScalar(Ar),Pr=_r,Tr=_r,Br=this;for(;Rr>_0n||Nr>_0n;)Rr&_1n$1&&(Pr=Pr.add(Br)),Nr&_1n$1&&(Tr=Tr.add(Br)),Br=Br.double(),Rr>>=_1n$1,Nr>>=_1n$1;return kr&&(Pr=Pr.negate()),Ir&&(Tr=Tr.negate()),Tr=new br(dr.mul(Tr.px,Cr.beta),Tr.py,Tr.pz),Pr.add(Tr)}multiply(Ar){gr(Ar);let _r=Ar,Cr,kr;const{endo:Rr}=ar;if(Rr){const{k1neg:Ir,k1:Nr,k2neg:Pr,k2:Tr}=Rr.splitScalar(_r);let{p:Br,f:Fr}=this.wNAF(Nr),{p:jr,f:Ur}=this.wNAF(Tr);Br=vr.constTimeNegate(Ir,Br),jr=vr.constTimeNegate(Pr,jr),jr=new br(dr.mul(jr.px,Rr.beta),jr.py,jr.pz),Cr=Br.add(jr),kr=Fr.add(Ur)}else{const{p:Ir,f:Nr}=this.wNAF(_r);Cr=Ir,kr=Nr}return br.normalizeZ([Cr,kr])[0]}multiplyAndAddUnsafe(Ar,_r,Cr){const kr=br.BASE,Rr=(Nr,Pr)=>Pr===_0n||Pr===_1n$1||!Nr.equals(kr)?Nr.multiplyUnsafe(Pr):Nr.multiply(Pr),Ir=Rr(this,_r).add(Rr(Ar,Cr));return Ir.is0()?void 0:Ir}toAffine(Ar){const{px:_r,py:Cr,pz:kr}=this,Rr=this.is0();Ar==null&&(Ar=Rr?dr.ONE:dr.inv(kr));const Ir=dr.mul(_r,Ar),Nr=dr.mul(Cr,Ar),Pr=dr.mul(kr,Ar);if(Rr)return{x:dr.ZERO,y:dr.ZERO};if(!dr.eql(Pr,dr.ONE))throw new Error("invZ was invalid");return{x:Ir,y:Nr}}isTorsionFree(){const{h:Ar,isTorsionFree:_r}=ar;if(Ar===_1n$1)return!0;if(_r)return _r(br,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:Ar,clearCofactor:_r}=ar;return Ar===_1n$1?this:_r?_r(br,this):this.multiplyUnsafe(ar.h)}toRawBytes(Ar=!0){return this.assertValidity(),fr(br,this,Ar)}toHex(Ar=!0){return bytesToHex(this.toRawBytes(Ar))}}br.BASE=new br(ar.Gx,ar.Gy,dr.ONE),br.ZERO=new br(dr.ZERO,dr.ONE,dr.ZERO);const Sr=ar.nBitLength,vr=wNAF(br,ar.endo?Math.ceil(Sr/2):Sr);return{CURVE:ar,ProjectivePoint:br,normPrivateKeyToScalar:yr,weierstrassEquation:pr,isWithinCurveOrder:mr}}function validateOpts(cr){const ar=validateBasic(cr);return validateObject(ar,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...ar})}function weierstrass(cr){const ar=validateOpts(cr),{Fp:dr,n:fr}=ar,hr=dr.BYTES+1,pr=2*dr.BYTES+1;function mr(Mr){return _0n<Mr&&Mr<dr.ORDER}function gr(Mr){return mod(Mr,fr)}function yr(Mr){return invert(Mr,fr)}const{ProjectivePoint:xr,normPrivateKeyToScalar:wr,weierstrassEquation:br,isWithinCurveOrder:Sr}=weierstrassPoints({...ar,toBytes(Mr,Lr,Vr){const Jr=Lr.toAffine(),es=dr.toBytes(Jr.x),ns=concatBytes;return Vr?ns(Uint8Array.from([Lr.hasEvenY()?2:3]),es):ns(Uint8Array.from([4]),es,dr.toBytes(Jr.y))},fromBytes(Mr){const Lr=Mr.length,Vr=Mr[0],Jr=Mr.subarray(1);if(Lr===hr&&(Vr===2||Vr===3)){const es=bytesToNumberBE(Jr);if(!mr(es))throw new Error("Point is not on curve");const ns=br(es);let Qr=dr.sqrt(ns);const zr=(Qr&_1n$1)===_1n$1;return(Vr&1)===1!==zr&&(Qr=dr.neg(Qr)),{x:es,y:Qr}}else if(Lr===pr&&Vr===4){const es=dr.fromBytes(Jr.subarray(0,dr.BYTES)),ns=dr.fromBytes(Jr.subarray(dr.BYTES,2*dr.BYTES));return{x:es,y:ns}}else throw new Error(`Point of length ${Lr} was invalid. Expected ${hr} compressed bytes or ${pr} uncompressed bytes`)}}),vr=Mr=>bytesToHex(numberToBytesBE(Mr,ar.nByteLength));function Er(Mr){const Lr=fr>>_1n$1;return Mr>Lr}function Ar(Mr){return Er(Mr)?gr(-Mr):Mr}const _r=(Mr,Lr,Vr)=>bytesToNumberBE(Mr.slice(Lr,Vr));class Cr{constructor(Lr,Vr,Jr){this.r=Lr,this.s=Vr,this.recovery=Jr,this.assertValidity()}static fromCompact(Lr){const Vr=ar.nByteLength;return Lr=ensureBytes$1("compactSignature",Lr,Vr*2),new Cr(_r(Lr,0,Vr),_r(Lr,Vr,2*Vr))}static fromDER(Lr){const{r:Vr,s:Jr}=DER.toSig(ensureBytes$1("DER",Lr));return new Cr(Vr,Jr)}assertValidity(){if(!Sr(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!Sr(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Lr){return new Cr(this.r,this.s,Lr)}recoverPublicKey(Lr){const{r:Vr,s:Jr,recovery:es}=this,ns=Tr(ensureBytes$1("msgHash",Lr));if(es==null||![0,1,2,3].includes(es))throw new Error("recovery id invalid");const Qr=es===2||es===3?Vr+ar.n:Vr;if(Qr>=dr.ORDER)throw new Error("recovery id 2 or 3 invalid");const zr=es&1?"03":"02",Wr=xr.fromHex(zr+vr(Qr)),ss=yr(Qr),Xr=gr(-ns*ss),ts=gr(Jr*ss),fs=xr.BASE.multiplyAndAddUnsafe(Wr,Xr,ts);if(!fs)throw new Error("point at infinify");return fs.assertValidity(),fs}hasHighS(){return Er(this.s)}normalizeS(){return this.hasHighS()?new Cr(this.r,gr(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return vr(this.r)+vr(this.s)}}const kr={isValidPrivateKey(Mr){try{return wr(Mr),!0}catch{return!1}},normPrivateKeyToScalar:wr,randomPrivateKey:()=>{const Mr=getMinHashLength(ar.n);return mapHashToField(ar.randomBytes(Mr),ar.n)},precompute(Mr=8,Lr=xr.BASE){return Lr._setWindowSize(Mr),Lr.multiply(BigInt(3)),Lr}};function Rr(Mr,Lr=!0){return xr.fromPrivateKey(Mr).toRawBytes(Lr)}function Ir(Mr){const Lr=isBytes(Mr),Vr=typeof Mr=="string",Jr=(Lr||Vr)&&Mr.length;return Lr?Jr===hr||Jr===pr:Vr?Jr===2*hr||Jr===2*pr:Mr instanceof xr}function Nr(Mr,Lr,Vr=!0){if(Ir(Mr))throw new Error("first arg must be private key");if(!Ir(Lr))throw new Error("second arg must be public key");return xr.fromHex(Lr).multiply(wr(Mr)).toRawBytes(Vr)}const Pr=ar.bits2int||function(Mr){const Lr=bytesToNumberBE(Mr),Vr=Mr.length*8-ar.nBitLength;return Vr>0?Lr>>BigInt(Vr):Lr},Tr=ar.bits2int_modN||function(Mr){return gr(Pr(Mr))},Br=bitMask(ar.nBitLength);function Fr(Mr){if(typeof Mr!="bigint")throw new Error("bigint expected");if(!(_0n<=Mr&&Mr<Br))throw new Error(`bigint expected < 2^${ar.nBitLength}`);return numberToBytesBE(Mr,ar.nByteLength)}function jr(Mr,Lr,Vr=Ur){if(["recovered","canonical"].some(as=>as in Vr))throw new Error("sign() legacy options not supported");const{hash:Jr,randomBytes:es}=ar;let{lowS:ns,prehash:Qr,extraEntropy:zr}=Vr;ns==null&&(ns=!0),Mr=ensureBytes$1("msgHash",Mr),Qr&&(Mr=ensureBytes$1("prehashed msgHash",Jr(Mr)));const Wr=Tr(Mr),ss=wr(Lr),Xr=[Fr(ss),Fr(Wr)];if(zr!=null){const as=zr===!0?es(dr.BYTES):zr;Xr.push(ensureBytes$1("extraEntropy",as))}const ts=concatBytes(...Xr),fs=Wr;function rs(as){const ps=Pr(as);if(!Sr(ps))return;const xs=yr(ps),Ss=xr.BASE.multiply(ps).toAffine(),Ns=gr(Ss.x);if(Ns===_0n)return;const Ts=gr(xs*gr(fs+Ns*ss));if(Ts===_0n)return;let os=(Ss.x===Ns?0:2)|Number(Ss.y&_1n$1),bs=Ts;return ns&&Er(Ts)&&(bs=Ar(Ts),os^=1),new Cr(Ns,bs,os)}return{seed:ts,k2sig:rs}}const Ur={lowS:ar.lowS,prehash:!1},qr={lowS:ar.lowS,prehash:!1};function Hr(Mr,Lr,Vr=Ur){const{seed:Jr,k2sig:es}=jr(Mr,Lr,Vr),ns=ar;return createHmacDrbg(ns.hash.outputLen,ns.nByteLength,ns.hmac)(Jr,es)}xr.BASE._setWindowSize(8);function Or(Mr,Lr,Vr,Jr=qr){const es=Mr;if(Lr=ensureBytes$1("msgHash",Lr),Vr=ensureBytes$1("publicKey",Vr),"strict"in Jr)throw new Error("options.strict was renamed to lowS");const{lowS:ns,prehash:Qr}=Jr;let zr,Wr;try{if(typeof es=="string"||isBytes(es))try{zr=Cr.fromDER(es)}catch(Ss){if(!(Ss instanceof DER.Err))throw Ss;zr=Cr.fromCompact(es)}else if(typeof es=="object"&&typeof es.r=="bigint"&&typeof es.s=="bigint"){const{r:Ss,s:Ns}=es;zr=new Cr(Ss,Ns)}else throw new Error("PARSE");Wr=xr.fromHex(Vr)}catch(Ss){if(Ss.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ns&&zr.hasHighS())return!1;Qr&&(Lr=ar.hash(Lr));const{r:ss,s:Xr}=zr,ts=Tr(Lr),fs=yr(Xr),rs=gr(ts*fs),as=gr(ss*fs),ps=xr.BASE.multiplyAndAddUnsafe(Wr,rs,as)?.toAffine();return ps?gr(ps.x)===ss:!1}return{CURVE:ar,getPublicKey:Rr,getSharedSecret:Nr,sign:Hr,verify:Or,ProjectivePoint:xr,Signature:Cr,utils:kr}}class HMAC extends Hash{constructor(ar,dr){super(),this.finished=!1,this.destroyed=!1,hash$1(ar);const fr=toBytes$2(dr);if(this.iHash=ar.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const hr=this.blockLen,pr=new Uint8Array(hr);pr.set(fr.length>hr?ar.create().update(fr).digest():fr);for(let mr=0;mr<pr.length;mr++)pr[mr]^=54;this.iHash.update(pr),this.oHash=ar.create();for(let mr=0;mr<pr.length;mr++)pr[mr]^=106;this.oHash.update(pr),pr.fill(0)}update(ar){return exists$1(this),this.iHash.update(ar),this}digestInto(ar){exists$1(this),bytes$1(ar,this.outputLen),this.finished=!0,this.iHash.digestInto(ar),this.oHash.update(ar),this.oHash.digestInto(ar),this.destroy()}digest(){const ar=new Uint8Array(this.oHash.outputLen);return this.digestInto(ar),ar}_cloneInto(ar){ar||(ar=Object.create(Object.getPrototypeOf(this),{}));const{oHash:dr,iHash:fr,finished:hr,destroyed:pr,blockLen:mr,outputLen:gr}=this;return ar=ar,ar.finished=hr,ar.destroyed=pr,ar.blockLen=mr,ar.outputLen=gr,ar.oHash=dr._cloneInto(ar.oHash),ar.iHash=fr._cloneInto(ar.iHash),ar}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac$1=(cr,ar,dr)=>new HMAC(cr,ar).update(dr).digest();hmac$1.create=(cr,ar)=>new HMAC(cr,ar);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(cr){return{hash:cr,hmac:(ar,...dr)=>hmac$1(cr,ar,concatBytes$1(...dr)),randomBytes:randomBytes$2}}function createCurve(cr,ar){const dr=fr=>weierstrass({...cr,...getHash(fr)});return Object.freeze({...dr(ar),create:dr})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n=BigInt(1),_2n=BigInt(2),divNearest=(cr,ar)=>(cr+ar/_2n)/ar;function sqrtMod(cr){const ar=secp256k1P,dr=BigInt(3),fr=BigInt(6),hr=BigInt(11),pr=BigInt(22),mr=BigInt(23),gr=BigInt(44),yr=BigInt(88),xr=cr*cr*cr%ar,wr=xr*xr*cr%ar,br=pow2(wr,dr,ar)*wr%ar,Sr=pow2(br,dr,ar)*wr%ar,vr=pow2(Sr,_2n,ar)*xr%ar,Er=pow2(vr,hr,ar)*vr%ar,Ar=pow2(Er,pr,ar)*Er%ar,_r=pow2(Ar,gr,ar)*Ar%ar,Cr=pow2(_r,yr,ar)*_r%ar,kr=pow2(Cr,gr,ar)*Ar%ar,Rr=pow2(kr,dr,ar)*wr%ar,Ir=pow2(Rr,mr,ar)*Er%ar,Nr=pow2(Ir,fr,ar)*xr%ar,Pr=pow2(Nr,_2n,ar);if(!Fp.eql(Fp.sqr(Pr),cr))throw new Error("Cannot find square root");return Pr}const Fp=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod}),secp256k1=createCurve({a:BigInt(0),b:BigInt(7),Fp,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:cr=>{const ar=secp256k1N,dr=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),fr=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),hr=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),pr=dr,mr=BigInt("0x100000000000000000000000000000000"),gr=divNearest(pr*cr,ar),yr=divNearest(-fr*cr,ar);let xr=mod(cr-gr*dr-yr*hr,ar),wr=mod(-gr*fr-yr*pr,ar);const br=xr>mr,Sr=wr>mr;if(br&&(xr=ar-xr),Sr&&(wr=ar-wr),xr>mr||wr>mr)throw new Error("splitScalar: Endomorphism failed, k="+cr);return{k1neg:br,k1:xr,k2neg:Sr,k2:wr}}}},sha256$3);BigInt(0);secp256k1.ProjectivePoint;var __classPrivateFieldSet$b=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},__classPrivateFieldGet$e=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_Secp256k1Signer_privateKey;class Secp256k1Signer{constructor(ar=secp256k1.utils.randomPrivateKey()){_Secp256k1Signer_privateKey.set(this,void 0);const dr=encodingLength$2(Secp256k1Signer.code),fr=secp256k1.getPublicKey(ar),hr=new Uint8Array(dr+fr.byteLength);encodeTo$1(Secp256k1Signer.code,hr,0),hr.set(fr,dr),this.uri=`did:key:${base58btc$1.encode(hr)}`,__classPrivateFieldSet$b(this,_Secp256k1Signer_privateKey,ar,"f")}sign(ar,dr={}){const fr=getCID(ar,dr),hr=secp256k1.sign(fr.bytes,__classPrivateFieldGet$e(this,_Secp256k1Signer_privateKey,"f")).toCompactRawBytes();return{publicKey:this.uri,signature:hr,cid:fr}}export(){return{type:"secp256k1",privateKey:__classPrivateFieldGet$e(this,_Secp256k1Signer_privateKey,"f")}}}_Secp256k1Signer_privateKey=new WeakMap;Secp256k1Signer.type="secp256k1";Secp256k1Signer.code=231;const didKeyPattern=/^did:key:(z[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]+)$/;function verifySignedValue(cr,ar,dr={}){const fr=(dr.codecs??codecs).find(pr=>pr.code===cr.cid.code);assert$7(fr!==void 0,"unsupported codec");const hr=(dr.digests??digests).find(pr=>pr.code===cr.cid.multihash.code);assert$7(hr!==void 0,"unsupported digest"),assert$7(getCID(ar,{codec:fr,digest:hr}).equals(cr.cid),"signed CID does not match value"),verifySignature(cr,{types:dr.types})}function verifySignature({publicKey:cr,signature:ar,cid:dr},fr={}){const hr=fr.types??["ed25519","secp256k1"],pr=didKeyPattern.exec(cr);assert$7(pr!==null,"invalid public key URI");const mr=base58btc$1.decode(pr[1]),[gr,yr]=decode$d(mr),xr=mr.subarray(yr);if(gr===Ed25519Signer.code&&hr.includes(Ed25519Signer.type))assert$7(ed25519.verify(ar,dr.bytes,xr),"invalid ed25519 signature");else if(gr===Secp256k1Signer.code&&hr.includes(Secp256k1Signer.type))assert$7(secp256k1.verify(secp256k1.Signature.fromCompact(ar),dr.bytes,xr),"invalid secp256k1 signature");else throw new Error("unsupported key codec")}var __classPrivateFieldGet$d=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_SignerStore_cache;class SignerStore{constructor(){_SignerStore_cache.set(this,new Map)}getKey(ar,dr){return`canvas/${ar}/${dr}`}create(){return new Secp256k1Signer}get(ar,dr){if(__classPrivateFieldGet$d(this,_SignerStore_cache,"f").has(dr))return __classPrivateFieldGet$d(this,_SignerStore_cache,"f").get(dr)??null;const fr=this.getKey(ar,dr),hr=window.localStorage.getItem(fr);if(hr===null)return null;const{type:pr,privateKey:mr,session:gr}=parse$1(hr);if(pr!==Secp256k1Signer.type)throw new Error("invalid session signer type");const yr=new Secp256k1Signer(mr);return __classPrivateFieldGet$d(this,_SignerStore_cache,"f").set(dr,{session:gr,signer:yr}),{session:gr,signer:yr}}set(ar,dr,fr,hr){__classPrivateFieldGet$d(this,_SignerStore_cache,"f").set(dr,{session:fr,signer:hr});const pr=this.getKey(ar,dr),mr=format({session:fr,...hr.export()});window.localStorage.setItem(pr,mr)}clear(ar){const dr=[];for(let fr=0;fr<localStorage.length;fr++){const hr=localStorage.key(fr);hr?.startsWith(`canvas/${ar}/`)&&dr.push(hr)}dr.forEach(fr=>localStorage.removeItem(fr)),__classPrivateFieldGet$d(this,_SignerStore_cache,"f").clear()}}_SignerStore_cache=new WeakMap;const target$1={getDomain(){return window.location.host},getSessionStore(){return new SignerStore}};function assert$6(cr,ar){if(!cr)throw new Error(ar??"assertion failed")}function signalInvalidType$1(cr){throw console.error(cr),new TypeError("internal error: invalid type")}function validateSessionData(cr){if(cr==null)return!1;if(typeof cr=="boolean"||typeof cr=="number"||typeof cr=="string")return!1;if(CID$1.asCID(cr)!==null)return!1;if(cr instanceof Uint8Array)return!1;if(Array.isArray(cr))return!1;const{signature:ar,domain:dr,nonce:fr}=cr;return ar instanceof Uint8Array&&typeof dr=="string"&&typeof fr=="string"}const SIWEMessageVersion="1";function prepareSIWEMessage(cr){return new siwe.SiweMessage({version:cr.version,domain:cr.domain,nonce:cr.nonce,address:cr.address,uri:cr.uri,chainId:cr.chainId,issuedAt:cr.issuedAt,expirationTime:cr.expirationTime??void 0}).prepareMessage()}const addressPattern=/^eip155:(\d+):(0x[A-Fa-f0-9]+)$/;function parseAddress(cr){const ar=addressPattern.exec(cr);if(ar===null)throw new Error(`invalid address: ${cr} did not match ${addressPattern}`);const[dr,fr,hr]=ar;return[parseInt(fr),hr]}var __classPrivateFieldSet$a=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},__classPrivateFieldGet$c=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_SIWESigner_store,_SIWESigner_ethersSigner;class SIWESigner{constructor(ar={}){this.log=logger("canvas:chain-ethereum"),_SIWESigner_store.set(this,target$1.getSessionStore()),_SIWESigner_ethersSigner.set(this,void 0),this.match=dr=>addressPattern.test(dr),__classPrivateFieldSet$a(this,_SIWESigner_ethersSigner,ar.signer??Wallet.createRandom(),"f"),this.sessionDuration=ar.sessionDuration??null,this.chainId=ar.chainId??1,this.key=`SIWESigner-${ar.signer?"signer":"burner"}`}verifySession(ar,dr){const{publicKey:fr,address:hr,authorizationData:pr,timestamp:mr,duration:gr}=dr;assert$6(didKeyPattern.test(fr),"invalid signing key"),assert$6(validateSessionData(pr),"invalid session");const[yr,xr]=parseAddress(hr),wr={version:SIWEMessageVersion,domain:pr.domain,nonce:pr.nonce,chainId:yr,address:xr,uri:fr,issuedAt:new Date(mr).toISOString(),expirationTime:gr===null?null:new Date(mr+gr).toISOString(),resources:[`canvas://${ar}`]},br=verifyMessage(prepareSIWEMessage(wr),hexlify(pr.signature));assert$6(br===xr,"invalid SIWE signature")}async getSession(ar,dr={}){const fr=await __classPrivateFieldGet$c(this,_SIWESigner_ethersSigner,"f").getAddress(),hr=`eip155:${this.chainId}:${fr}`;this.log("getting session for %s",hr);{const{session:vr,signer:Er}=__classPrivateFieldGet$c(this,_SIWESigner_store,"f").get(ar,hr)??{};if(vr!==void 0&&Er!==void 0){const{timestamp:Ar,duration:_r}=vr,Cr=dr.timestamp??Ar;if(Ar<=Cr&&Cr<=Ar+(_r??1/0))return this.log("found session for %s in store: %o",hr,vr),vr;this.log("stored session for %s has expired",hr)}}if(dr.fromCache)return Promise.reject();this.log("creating new session for %s",hr);const pr=target$1.getDomain(),mr=siwe.generateNonce(),gr=new Secp256k1Signer,yr=dr.timestamp??Date.now(),xr=new Date(yr).toISOString(),wr={version:SIWEMessageVersion,address:fr,chainId:this.chainId,domain:pr,uri:gr.uri,nonce:mr,issuedAt:xr,expirationTime:null,resources:[`canvas://${ar}`]};this.sessionDuration!==null&&(wr.expirationTime=new Date(yr+this.sessionDuration).toISOString());const br=await __classPrivateFieldGet$c(this,_SIWESigner_ethersSigner,"f").signMessage(prepareSIWEMessage(wr)),Sr={type:"session",address:hr,publicKey:gr.uri,authorizationData:{signature:getBytes(br),domain:pr,nonce:mr},duration:this.sessionDuration,timestamp:yr,blockhash:null};return __classPrivateFieldGet$c(this,_SIWESigner_store,"f").set(ar,hr,Sr,gr),this.log("created new session for %s: %o",hr,Sr),Sr}sign(ar){if(ar.payload.type==="action"){const{address:dr,timestamp:fr}=ar.payload,{signer:hr,session:pr}=__classPrivateFieldGet$c(this,_SIWESigner_store,"f").get(ar.topic,dr)??{};return assert$6(hr!==void 0&&pr!==void 0),assert$6(dr===pr.address),assert$6(fr>=pr.timestamp),assert$6(fr<=pr.timestamp+(pr.duration??1/0)),hr.sign(ar)}else if(ar.payload.type==="session"){const{signer:dr,session:fr}=__classPrivateFieldGet$c(this,_SIWESigner_store,"f").get(ar.topic,ar.payload.address)??{};return assert$6(dr!==void 0&&fr!==void 0),assert$6(ar.payload===fr),dr.sign(ar)}else signalInvalidType$1(ar.payload)}async clear(ar){__classPrivateFieldGet$c(this,_SIWESigner_store,"f").clear(ar)}}_SIWESigner_store=new WeakMap,_SIWESigner_ethersSigner=new WeakMap;const connectionSymbol=Symbol.for("@libp2p/connection"),contentRoutingSymbol=Symbol.for("@libp2p/content-routing"),peerDiscoverySymbol=Symbol.for("@libp2p/peer-discovery"),peerIdSymbol=Symbol.for("@libp2p/peer-id");function isPeerId(cr){return cr!=null&&!!cr[peerIdSymbol]}const peerRoutingSymbol=Symbol.for("@libp2p/peer-routing"),KEEP_ALIVE="keep-alive",StrictSign="StrictSign",StrictNoSign="StrictNoSign";var TopicValidatorResult$1;(function(cr){cr.Accept="accept",cr.Ignore="ignore",cr.Reject="reject"})(TopicValidatorResult$1||(TopicValidatorResult$1={}));const transportSymbol=Symbol.for("@libp2p/transport");var FaultTolerance$1;(function(cr){cr[cr.FATAL_ALL=0]="FATAL_ALL",cr[cr.NO_FATAL=1]="NO_FATAL"})(FaultTolerance$1||(FaultTolerance$1={}));let AbortError$6=class ua extends Error{code;type;constructor(ar="The operation was aborted"){super(ar),this.code=ua.code,this.type=ua.type}static code="ABORT_ERR";static type="aborted"},CodeError$3=class extends Error{code;props;constructor(ar,dr,fr){super(ar),this.code=dr,this.name=fr?.name??"CodeError",this.props=fr??{}}};class AggregateCodeError extends AggregateError{code;props;constructor(ar,dr,fr,hr){super(ar,dr),this.code=fr,this.name=hr?.name??"AggregateCodeError",this.props=hr??{}}}const ERR_TIMEOUT="ERR_TIMEOUT",ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",ERR_NOT_FOUND="ERR_NOT_FOUND",ERR_INVALID_MESSAGE="ERR_INVALID_MESSAGE";class TypedEventEmitter extends EventTarget{#e=new Map;listenerCount(ar){const dr=this.#e.get(ar);return dr==null?0:dr.length}addEventListener(ar,dr,fr){super.addEventListener(ar,dr,fr);let hr=this.#e.get(ar);hr==null&&(hr=[],this.#e.set(ar,hr)),hr.push({callback:dr,once:(fr!==!0&&fr!==!1&&fr?.once)??!1})}removeEventListener(ar,dr,fr){super.removeEventListener(ar.toString(),dr??null,fr);let hr=this.#e.get(ar);hr!=null&&(hr=hr.filter(({callback:pr})=>pr!==dr),this.#e.set(ar,hr))}dispatchEvent(ar){const dr=super.dispatchEvent(ar);let fr=this.#e.get(ar.type);return fr==null||(fr=fr.filter(({once:hr})=>!hr),this.#e.set(ar.type,fr)),dr}safeDispatchEvent(ar,dr={}){return this.dispatchEvent(new CustomEvent$2(ar,dr))}}class CustomEventPolyfill extends Event{detail;constructor(ar,dr){super(ar,dr),this.detail=dr?.detail}}const CustomEvent$2=globalThis.CustomEvent??CustomEventPolyfill;function setMaxListeners$1(){}const setMaxListeners=(cr,...ar)=>{try{[...ar]}catch{}};function isStartable(cr){return cr!=null&&typeof cr.start=="function"&&typeof cr.stop=="function"}var __classPrivateFieldSet$9=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},__classPrivateFieldGet$b=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_SignerCache_signers;class SignerCache{constructor(ar=[]){_SignerCache_signers.set(this,void 0),__classPrivateFieldSet$9(this,_SignerCache_signers,ar,"f")}updateSigners(ar){__classPrivateFieldSet$9(this,_SignerCache_signers,ar,"f")}getAll(){return __classPrivateFieldGet$b(this,_SignerCache_signers,"f")}getFirst(){return __classPrivateFieldGet$b(this,_SignerCache_signers,"f")[0]}}_SignerCache_signers=new WeakMap;const code$1=0,name$2="identity",encode$6=coerce$1;function digest$1(cr){return create$6(code$1,encode$6(cr))}const identity$4={code:code$1,name:name$2,encode:encode$6,digest:digest$1};function sha$1(cr){return async ar=>new Uint8Array(await crypto.subtle.digest(cr,ar))}const sha256$2=from$2({name:"sha2-256",code:18,encode:sha$1("SHA-256")});function equals$1(cr,ar){if(cr===ar)return!0;if(cr.byteLength!==ar.byteLength)return!1;for(let dr=0;dr<cr.byteLength;dr++)if(cr[dr]!==ar[dr])return!1;return!0}function asUint8Array$1(cr){return globalThis.Buffer!=null?new Uint8Array(cr.buffer,cr.byteOffset,cr.byteLength):cr}function alloc$2(cr=0){return globalThis.Buffer?.alloc!=null?asUint8Array$1(globalThis.Buffer.alloc(cr)):new Uint8Array(cr)}function allocUnsafe$1(cr=0){return globalThis.Buffer?.allocUnsafe!=null?asUint8Array$1(globalThis.Buffer.allocUnsafe(cr)):new Uint8Array(cr)}function concat$2(cr,ar){if(globalThis.Buffer!=null)return asUint8Array$1(globalThis.Buffer.concat(cr,ar));ar==null&&(ar=cr.reduce((hr,pr)=>hr+pr.length,0));const dr=allocUnsafe$1(ar);let fr=0;for(const hr of cr)dr.set(hr,fr),fr+=hr.length;return asUint8Array$1(dr)}const base10$2=baseX$1({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$3=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$2},Symbol.toStringTag,{value:"Module"})),base16$2=rfc4648$1({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$1=rfc4648$1({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$3=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$2,base16upper:base16upper$1},Symbol.toStringTag,{value:"Module"})),base2$2=rfc4648$1({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$3=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$2},Symbol.toStringTag,{value:"Module"})),alphabet$1=Array.from(""),alphabetBytesToChars$1=alphabet$1.reduce((cr,ar,dr)=>(cr[dr]=ar,cr),[]),alphabetCharsToBytes$1=alphabet$1.reduce((cr,ar,dr)=>(cr[ar.codePointAt(0)]=dr,cr),[]);function encode$5(cr){return cr.reduce((ar,dr)=>(ar+=alphabetBytesToChars$1[dr],ar),"")}function decode$3(cr){const ar=[];for(const dr of cr){const fr=alphabetCharsToBytes$1[dr.codePointAt(0)];if(fr===void 0)throw new Error(`Non-base256emoji character: ${dr}`);ar.push(fr)}return new Uint8Array(ar)}const base256emoji$2=from$3({prefix:"",name:"base256emoji",encode:encode$5,decode:decode$3}),base256emoji$3=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$2},Symbol.toStringTag,{value:"Module"})),base36$2=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$1=baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$3=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$2,base36upper:base36upper$1},Symbol.toStringTag,{value:"Module"})),base8$2=rfc4648$1({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$3=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$2},Symbol.toStringTag,{value:"Module"})),identity$3=from$3({prefix:"\0",name:"identity",encode:cr=>toString$5(cr),decode:cr=>fromString$4(cr)}),identityBase$1=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$3},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases$1={...identityBase$1,...base2$3,...base8$3,...base10$3,...base16$3,...base32$3,...base36$3,...base58$1,...base64$5,...base256emoji$3};function createCodec$2(cr,ar,dr,fr){return{name:cr,prefix:ar,encoder:{name:cr,prefix:ar,encode:dr},decoder:{decode:fr}}}const string$2=createCodec$2("utf8","u",cr=>"u"+new TextDecoder("utf8").decode(cr),cr=>new TextEncoder().encode(cr.substring(1))),ascii$1=createCodec$2("ascii","a",cr=>{let ar="a";for(let dr=0;dr<cr.length;dr++)ar+=String.fromCharCode(cr[dr]);return ar},cr=>{cr=cr.substring(1);const ar=allocUnsafe$1(cr.length);for(let dr=0;dr<cr.length;dr++)ar[dr]=cr.charCodeAt(dr);return ar}),BASES$1={utf8:string$2,"utf-8":string$2,hex:bases$1.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases$1};function fromString$1(cr,ar="utf8"){const dr=BASES$1[ar];if(dr==null)throw new Error(`Unsupported encoding "${ar}"`);return(ar==="utf8"||ar==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$1(globalThis.Buffer.from(cr,"utf-8")):dr.decoder.decode(`${dr.prefix}${cr}`)}function isPromise$3(cr){return cr==null?!1:typeof cr.then=="function"&&typeof cr.catch=="function"&&typeof cr.finally=="function"}const PUBLIC_KEY_BYTE_LENGTH$1=32,PRIVATE_KEY_BYTE_LENGTH$1=64,KEYS_BYTE_LENGTH$1=32;function generateKey$5(){const cr=ed25519.utils.randomPrivateKey(),ar=ed25519.getPublicKey(cr);return{privateKey:concatKeys$1(cr,ar),publicKey:ar}}function generateKeyFromSeed$1(cr){if(cr.length!==KEYS_BYTE_LENGTH$1)throw new TypeError('"seed" must be 32 bytes in length.');if(!(cr instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const ar=cr,dr=ed25519.getPublicKey(ar);return{privateKey:concatKeys$1(ar,dr),publicKey:dr}}function hashAndSign$5(cr,ar){const dr=cr.subarray(0,KEYS_BYTE_LENGTH$1);return ed25519.sign(ar instanceof Uint8Array?ar:ar.subarray(),dr)}function hashAndVerify$5(cr,ar,dr){return ed25519.verify(ar,dr instanceof Uint8Array?dr:dr.subarray(),cr)}function concatKeys$1(cr,ar){const dr=new Uint8Array(PRIVATE_KEY_BYTE_LENGTH$1);for(let fr=0;fr<KEYS_BYTE_LENGTH$1;fr++)dr[fr]=cr[fr],dr[KEYS_BYTE_LENGTH$1+fr]=ar[fr];return dr}const webcrypto$1={get(cr=globalThis){const ar=cr.crypto;if(ar==null||ar.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return ar}},derivedEmptyPasswordKey$1={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function create$4(cr){const ar=cr?.algorithm??"AES-GCM";let dr=cr?.keyLength??16;const fr=cr?.nonceLength??12,hr=cr?.digest??"SHA-256",pr=cr?.saltLength??16,mr=cr?.iterations??32767,gr=webcrypto$1.get();dr*=8;async function yr(br,Sr){const vr=gr.getRandomValues(new Uint8Array(pr)),Er=gr.getRandomValues(new Uint8Array(fr)),Ar={name:ar,iv:Er};typeof Sr=="string"&&(Sr=fromString$1(Sr));let _r;if(Sr.length===0){_r=await gr.subtle.importKey("jwk",derivedEmptyPasswordKey$1,{name:"AES-GCM"},!0,["encrypt"]);try{const kr={name:"PBKDF2",salt:vr,iterations:mr,hash:{name:hr}},Rr=await gr.subtle.importKey("raw",Sr,{name:"PBKDF2"},!1,["deriveKey"]);_r=await gr.subtle.deriveKey(kr,Rr,{name:ar,length:dr},!0,["encrypt"])}catch{_r=await gr.subtle.importKey("jwk",derivedEmptyPasswordKey$1,{name:"AES-GCM"},!0,["encrypt"])}}else{const kr={name:"PBKDF2",salt:vr,iterations:mr,hash:{name:hr}},Rr=await gr.subtle.importKey("raw",Sr,{name:"PBKDF2"},!1,["deriveKey"]);_r=await gr.subtle.deriveKey(kr,Rr,{name:ar,length:dr},!0,["encrypt"])}const Cr=await gr.subtle.encrypt(Ar,_r,br);return concat$2([vr,Ar.iv,new Uint8Array(Cr)])}async function xr(br,Sr){const vr=br.subarray(0,pr),Er=br.subarray(pr,pr+fr),Ar=br.subarray(pr+fr),_r={name:ar,iv:Er};typeof Sr=="string"&&(Sr=fromString$1(Sr));let Cr;if(Sr.length===0)try{const Rr={name:"PBKDF2",salt:vr,iterations:mr,hash:{name:hr}},Ir=await gr.subtle.importKey("raw",Sr,{name:"PBKDF2"},!1,["deriveKey"]);Cr=await gr.subtle.deriveKey(Rr,Ir,{name:ar,length:dr},!0,["decrypt"])}catch{Cr=await gr.subtle.importKey("jwk",derivedEmptyPasswordKey$1,{name:"AES-GCM"},!0,["decrypt"])}else{const Rr={name:"PBKDF2",salt:vr,iterations:mr,hash:{name:hr}},Ir=await gr.subtle.importKey("raw",Sr,{name:"PBKDF2"},!1,["deriveKey"]);Cr=await gr.subtle.deriveKey(Rr,Ir,{name:ar,length:dr},!0,["decrypt"])}const kr=await gr.subtle.decrypt(_r,Cr,Ar);return new Uint8Array(kr)}return{encrypt:yr,decrypt:xr}}async function exporter$1(cr,ar){const fr=await create$4().encrypt(cr,ar);return base64$4.encode(fr)}const f32=new Float32Array([-0]),f8b=new Uint8Array(f32.buffer);function writeFloatLE(cr,ar,dr){f32[0]=cr,ar[dr]=f8b[0],ar[dr+1]=f8b[1],ar[dr+2]=f8b[2],ar[dr+3]=f8b[3]}function readFloatLE(cr,ar){return f8b[0]=cr[ar],f8b[1]=cr[ar+1],f8b[2]=cr[ar+2],f8b[3]=cr[ar+3],f32[0]}const f64=new Float64Array([-0]),d8b=new Uint8Array(f64.buffer);function writeDoubleLE(cr,ar,dr){f64[0]=cr,ar[dr]=d8b[0],ar[dr+1]=d8b[1],ar[dr+2]=d8b[2],ar[dr+3]=d8b[3],ar[dr+4]=d8b[4],ar[dr+5]=d8b[5],ar[dr+6]=d8b[6],ar[dr+7]=d8b[7]}function readDoubleLE(cr,ar){return d8b[0]=cr[ar],d8b[1]=cr[ar+1],d8b[2]=cr[ar+2],d8b[3]=cr[ar+3],d8b[4]=cr[ar+4],d8b[5]=cr[ar+5],d8b[6]=cr[ar+6],d8b[7]=cr[ar+7],f64[0]}const MAX_SAFE_NUMBER_INTEGER=BigInt(Number.MAX_SAFE_INTEGER),MIN_SAFE_NUMBER_INTEGER=BigInt(Number.MIN_SAFE_INTEGER);let LongBits$2=class Ui{lo;hi;constructor(ar,dr){this.lo=ar|0,this.hi=dr|0}toNumber(ar=!1){if(!ar&&this.hi>>>31>0){const dr=~this.lo+1>>>0;let fr=~this.hi>>>0;return dr===0&&(fr=fr+1>>>0),-(dr+fr*4294967296)}return this.lo+this.hi*4294967296}toBigInt(ar=!1){if(ar)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const dr=~this.lo+1>>>0;let fr=~this.hi>>>0;return dr===0&&(fr=fr+1>>>0),-(BigInt(dr)+(BigInt(fr)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(ar=!1){return this.toBigInt(ar).toString()}zzEncode(){const ar=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^ar)>>>0,this.lo=(this.lo<<1^ar)>>>0,this}zzDecode(){const ar=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^ar)>>>0,this.hi=(this.hi>>>1^ar)>>>0,this}length(){const ar=this.lo,dr=(this.lo>>>28|this.hi<<4)>>>0,fr=this.hi>>>24;return fr===0?dr===0?ar<16384?ar<128?1:2:ar<2097152?3:4:dr<16384?dr<128?5:6:dr<2097152?7:8:fr<128?9:10}static fromBigInt(ar){if(ar===0n)return zero;if(ar<MAX_SAFE_NUMBER_INTEGER&&ar>MIN_SAFE_NUMBER_INTEGER)return this.fromNumber(Number(ar));const dr=ar<0n;dr&&(ar=-ar);let fr=ar>>32n,hr=ar-(fr<<32n);return dr&&(fr=~fr|0n,hr=~hr|0n,++hr>TWO_32&&(hr=0n,++fr>TWO_32&&(fr=0n))),new Ui(Number(hr),Number(fr))}static fromNumber(ar){if(ar===0)return zero;const dr=ar<0;dr&&(ar=-ar);let fr=ar>>>0,hr=(ar-fr)/4294967296>>>0;return dr&&(hr=~hr>>>0,fr=~fr>>>0,++fr>4294967295&&(fr=0,++hr>4294967295&&(hr=0))),new Ui(fr,hr)}static from(ar){return typeof ar=="number"?Ui.fromNumber(ar):typeof ar=="bigint"?Ui.fromBigInt(ar):typeof ar=="string"?Ui.fromBigInt(BigInt(ar)):ar.low!=null||ar.high!=null?new Ui(ar.low>>>0,ar.high>>>0):zero}};const zero=new LongBits$2(0,0);zero.toBigInt=function(){return 0n};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};const TWO_32=4294967296n;function length(cr){let ar=0,dr=0;for(let fr=0;fr<cr.length;++fr)dr=cr.charCodeAt(fr),dr<128?ar+=1:dr<2048?ar+=2:(dr&64512)===55296&&(cr.charCodeAt(fr+1)&64512)===56320?(++fr,ar+=4):ar+=3;return ar}function read$1(cr,ar,dr){if(dr-ar<1)return"";let hr;const pr=[];let mr=0,gr;for(;ar<dr;)gr=cr[ar++],gr<128?pr[mr++]=gr:gr>191&&gr<224?pr[mr++]=(gr&31)<<6|cr[ar++]&63:gr>239&&gr<365?(gr=((gr&7)<<18|(cr[ar++]&63)<<12|(cr[ar++]&63)<<6|cr[ar++]&63)-65536,pr[mr++]=55296+(gr>>10),pr[mr++]=56320+(gr&1023)):pr[mr++]=(gr&15)<<12|(cr[ar++]&63)<<6|cr[ar++]&63,mr>8191&&((hr??(hr=[])).push(String.fromCharCode.apply(String,pr)),mr=0);return hr!=null?(mr>0&&hr.push(String.fromCharCode.apply(String,pr.slice(0,mr))),hr.join("")):String.fromCharCode.apply(String,pr.slice(0,mr))}function write$1(cr,ar,dr){const fr=dr;let hr,pr;for(let mr=0;mr<cr.length;++mr)hr=cr.charCodeAt(mr),hr<128?ar[dr++]=hr:hr<2048?(ar[dr++]=hr>>6|192,ar[dr++]=hr&63|128):(hr&64512)===55296&&((pr=cr.charCodeAt(mr+1))&64512)===56320?(hr=65536+((hr&1023)<<10)+(pr&1023),++mr,ar[dr++]=hr>>18|240,ar[dr++]=hr>>12&63|128,ar[dr++]=hr>>6&63|128,ar[dr++]=hr&63|128):(ar[dr++]=hr>>12|224,ar[dr++]=hr>>6&63|128,ar[dr++]=hr&63|128);return dr-fr}function indexOutOfRange$1(cr,ar){return RangeError(`index out of range: ${cr.pos} + ${ar??1} > ${cr.len}`)}function readFixed32End(cr,ar){return(cr[ar-4]|cr[ar-3]<<8|cr[ar-2]<<16|cr[ar-1]<<24)>>>0}class Uint8ArrayReader{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(ar){this.buf=ar,this.pos=0,this.len=ar.length}uint32(){let ar=4294967295;if(ar=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(ar=(ar|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(ar=(ar|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(ar=(ar|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(ar=(ar|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return ar;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange$1(this,10);return ar}int32(){return this.uint32()|0}sint32(){const ar=this.uint32();return ar>>>1^-(ar&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);return readFixed32End(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);return readFixed32End(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);const ar=readFloatLE(this.buf,this.pos);return this.pos+=4,ar}double(){if(this.pos+8>this.len)throw indexOutOfRange$1(this,4);const ar=readDoubleLE(this.buf,this.pos);return this.pos+=8,ar}bytes(){const ar=this.uint32(),dr=this.pos,fr=this.pos+ar;if(fr>this.len)throw indexOutOfRange$1(this,ar);return this.pos+=ar,dr===fr?new Uint8Array(0):this.buf.subarray(dr,fr)}string(){const ar=this.bytes();return read$1(ar,0,ar.length)}skip(ar){if(typeof ar=="number"){if(this.pos+ar>this.len)throw indexOutOfRange$1(this,ar);this.pos+=ar}else do if(this.pos>=this.len)throw indexOutOfRange$1(this);while(this.buf[this.pos++]&128);return this}skipType(ar){switch(ar){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(ar=this.uint32()&7)!==4;)this.skipType(ar);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${ar} at offset ${this.pos}`)}return this}readLongVarint(){const ar=new LongBits$2(0,0);let dr=0;if(this.len-this.pos>4){for(;dr<4;++dr)if(ar.lo=(ar.lo|(this.buf[this.pos]&127)<<dr*7)>>>0,this.buf[this.pos++]<128)return ar;if(ar.lo=(ar.lo|(this.buf[this.pos]&127)<<28)>>>0,ar.hi=(ar.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return ar;dr=0}else{for(;dr<3;++dr){if(this.pos>=this.len)throw indexOutOfRange$1(this);if(ar.lo=(ar.lo|(this.buf[this.pos]&127)<<dr*7)>>>0,this.buf[this.pos++]<128)return ar}return ar.lo=(ar.lo|(this.buf[this.pos++]&127)<<dr*7)>>>0,ar}if(this.len-this.pos>4){for(;dr<5;++dr)if(ar.hi=(ar.hi|(this.buf[this.pos]&127)<<dr*7+3)>>>0,this.buf[this.pos++]<128)return ar}else for(;dr<5;++dr){if(this.pos>=this.len)throw indexOutOfRange$1(this);if(ar.hi=(ar.hi|(this.buf[this.pos]&127)<<dr*7+3)>>>0,this.buf[this.pos++]<128)return ar}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange$1(this,8);const ar=readFixed32End(this.buf,this.pos+=4),dr=readFixed32End(this.buf,this.pos+=4);return new LongBits$2(ar,dr)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){return this.readLongVarint().toNumber(!0)}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function createReader(cr){return new Uint8ArrayReader(cr instanceof Uint8Array?cr:cr.subarray())}function decodeMessage$1(cr,ar){const dr=createReader(cr);return ar.decode(dr)}function asUint8Array(cr){return globalThis.Buffer!=null?new Uint8Array(cr.buffer,cr.byteOffset,cr.byteLength):cr}function alloc$1(cr=0){return globalThis.Buffer?.alloc!=null?asUint8Array(globalThis.Buffer.alloc(cr)):new Uint8Array(cr)}function allocUnsafe(cr=0){return globalThis.Buffer?.allocUnsafe!=null?asUint8Array(globalThis.Buffer.allocUnsafe(cr)):new Uint8Array(cr)}const base10=baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base2=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from(""),alphabetBytesToChars=alphabet.reduce((cr,ar,dr)=>(cr[dr]=ar,cr),[]),alphabetCharsToBytes=alphabet.reduce((cr,ar,dr)=>(cr[ar.codePointAt(0)]=dr,cr),[]);function encode$4(cr){return cr.reduce((ar,dr)=>(ar+=alphabetBytesToChars[dr],ar),"")}function decode$2(cr){const ar=[];for(const dr of cr){const fr=alphabetCharsToBytes[dr.codePointAt(0)];if(fr===void 0)throw new Error(`Non-base256emoji character: ${dr}`);ar.push(fr)}return new Uint8Array(ar)}const base256emoji=from$1({prefix:"",name:"base256emoji",encode:encode$4,decode:decode$2}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"})),base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base8=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),identity$2=from$1({prefix:"\0",name:"identity",encode:cr=>toString$3(cr),decode:cr=>fromString$2(cr)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$2},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const code=0,name$1="identity",encode$3=coerce,digest=cr=>create$5(code,encode$3(cr)),identity$1={code,name:name$1,encode:encode$3,digest},sha=cr=>async ar=>new Uint8Array(await crypto.subtle.digest(cr,ar)),sha256$1=from({name:"sha2-256",code:18,encode:sha("SHA-256")}),bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$1,...base36$1,...base58,...base64$3,...base256emoji$1};function createCodec$1(cr,ar,dr,fr){return{name:cr,prefix:ar,encoder:{name:cr,prefix:ar,encode:dr},decoder:{decode:fr}}}const string$1=createCodec$1("utf8","u",cr=>"u"+new TextDecoder("utf8").decode(cr),cr=>new TextEncoder().encode(cr.substring(1))),ascii=createCodec$1("ascii","a",cr=>{let ar="a";for(let dr=0;dr<cr.length;dr++)ar+=String.fromCharCode(cr[dr]);return ar},cr=>{cr=cr.substring(1);const ar=allocUnsafe(cr.length);for(let dr=0;dr<cr.length;dr++)ar[dr]=cr.charCodeAt(dr);return ar}),BASES={utf8:string$1,"utf-8":string$1,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function fromString(cr,ar="utf8"){const dr=BASES[ar];if(dr==null)throw new Error(`Unsupported encoding "${ar}"`);return(ar==="utf8"||ar==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(cr,"utf-8")):dr.decoder.decode(`${dr.prefix}${cr}`)}function pool$1(cr){const ar=cr??8192,dr=ar>>>1;let fr,hr=ar;return function(mr){if(mr<1||mr>dr)return allocUnsafe(mr);hr+mr>ar&&(fr=allocUnsafe(ar),hr=0);const gr=fr.subarray(hr,hr+=mr);return hr&7&&(hr=(hr|7)+1),gr}}let Op$1=class{fn;len;next;val;constructor(ar,dr,fr){this.fn=ar,this.len=dr,this.next=void 0,this.val=fr}};function noop$1(){}let State$1=class{head;tail;len;next;constructor(ar){this.head=ar.head,this.tail=ar.tail,this.len=ar.len,this.next=ar.states}};const bufferPool=pool$1();function alloc(cr){return globalThis.Buffer!=null?allocUnsafe(cr):bufferPool(cr)}class Uint8ArrayWriter{len;head;tail;states;constructor(){this.len=0,this.head=new Op$1(noop$1,0,0),this.tail=this.head,this.states=null}_push(ar,dr,fr){return this.tail=this.tail.next=new Op$1(ar,dr,fr),this.len+=dr,this}uint32(ar){return this.len+=(this.tail=this.tail.next=new VarintOp$1((ar=ar>>>0)<128?1:ar<16384?2:ar<2097152?3:ar<268435456?4:5,ar)).len,this}int32(ar){return ar<0?this._push(writeVarint64$1,10,LongBits$2.fromNumber(ar)):this.uint32(ar)}sint32(ar){return this.uint32((ar<<1^ar>>31)>>>0)}uint64(ar){const dr=LongBits$2.fromBigInt(ar);return this._push(writeVarint64$1,dr.length(),dr)}uint64Number(ar){const dr=LongBits$2.fromNumber(ar);return this._push(writeVarint64$1,dr.length(),dr)}uint64String(ar){return this.uint64(BigInt(ar))}int64(ar){return this.uint64(ar)}int64Number(ar){return this.uint64Number(ar)}int64String(ar){return this.uint64String(ar)}sint64(ar){const dr=LongBits$2.fromBigInt(ar).zzEncode();return this._push(writeVarint64$1,dr.length(),dr)}sint64Number(ar){const dr=LongBits$2.fromNumber(ar).zzEncode();return this._push(writeVarint64$1,dr.length(),dr)}sint64String(ar){return this.sint64(BigInt(ar))}bool(ar){return this._push(writeByte$1,1,ar?1:0)}fixed32(ar){return this._push(writeFixed32$1,4,ar>>>0)}sfixed32(ar){return this.fixed32(ar)}fixed64(ar){const dr=LongBits$2.fromBigInt(ar);return this._push(writeFixed32$1,4,dr.lo)._push(writeFixed32$1,4,dr.hi)}fixed64Number(ar){const dr=LongBits$2.fromNumber(ar);return this._push(writeFixed32$1,4,dr.lo)._push(writeFixed32$1,4,dr.hi)}fixed64String(ar){return this.fixed64(BigInt(ar))}sfixed64(ar){return this.fixed64(ar)}sfixed64Number(ar){return this.fixed64Number(ar)}sfixed64String(ar){return this.fixed64String(ar)}float(ar){return this._push(writeFloatLE,4,ar)}double(ar){return this._push(writeDoubleLE,8,ar)}bytes(ar){const dr=ar.length>>>0;return dr===0?this._push(writeByte$1,1,0):this.uint32(dr)._push(writeBytes$1,dr,ar)}string(ar){const dr=length(ar);return dr!==0?this.uint32(dr)._push(write$1,dr,ar):this._push(writeByte$1,1,0)}fork(){return this.states=new State$1(this),this.head=this.tail=new Op$1(noop$1,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op$1(noop$1,0,0),this.len=0),this}ldelim(){const ar=this.head,dr=this.tail,fr=this.len;return this.reset().uint32(fr),fr!==0&&(this.tail.next=ar.next,this.tail=dr,this.len+=fr),this}finish(){let ar=this.head.next;const dr=alloc(this.len);let fr=0;for(;ar!=null;)ar.fn(ar.val,dr,fr),fr+=ar.len,ar=ar.next;return dr}}function writeByte$1(cr,ar,dr){ar[dr]=cr&255}function writeVarint32$1(cr,ar,dr){for(;cr>127;)ar[dr++]=cr&127|128,cr>>>=7;ar[dr]=cr}let VarintOp$1=class extends Op$1{next;constructor(ar,dr){super(writeVarint32$1,ar,dr),this.next=void 0}};function writeVarint64$1(cr,ar,dr){for(;cr.hi!==0;)ar[dr++]=cr.lo&127|128,cr.lo=(cr.lo>>>7|cr.hi<<25)>>>0,cr.hi>>>=7;for(;cr.lo>127;)ar[dr++]=cr.lo&127|128,cr.lo=cr.lo>>>7;ar[dr++]=cr.lo}function writeFixed32$1(cr,ar,dr){ar[dr]=cr&255,ar[dr+1]=cr>>>8&255,ar[dr+2]=cr>>>16&255,ar[dr+3]=cr>>>24}function writeBytes$1(cr,ar,dr){ar.set(cr,dr)}globalThis.Buffer!=null&&(Uint8ArrayWriter.prototype.bytes=function(cr){const ar=cr.length>>>0;return this.uint32(ar),ar>0&&this._push(writeBytesBuffer,ar,cr),this},Uint8ArrayWriter.prototype.string=function(cr){const ar=globalThis.Buffer.byteLength(cr);return this.uint32(ar),ar>0&&this._push(writeStringBuffer$1,ar,cr),this});function writeBytesBuffer(cr,ar,dr){ar.set(cr,dr)}function writeStringBuffer$1(cr,ar,dr){cr.length<40?write$1(cr,ar,dr):ar.utf8Write!=null?ar.utf8Write(cr,dr):ar.set(fromString(cr),dr)}function createWriter(){return new Uint8ArrayWriter}function encodeMessage(cr,ar){const dr=createWriter();return ar.encode(cr,dr,{lengthDelimited:!1}),dr.finish()}var CODEC_TYPES;(function(cr){cr[cr.VARINT=0]="VARINT",cr[cr.BIT64=1]="BIT64",cr[cr.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",cr[cr.START_GROUP=3]="START_GROUP",cr[cr.END_GROUP=4]="END_GROUP",cr[cr.BIT32=5]="BIT32"})(CODEC_TYPES||(CODEC_TYPES={}));function createCodec(cr,ar,dr,fr){return{name:cr,type:ar,encode:dr,decode:fr}}function enumeration(cr){function ar(hr){if(cr[hr.toString()]==null)throw new Error("Invalid enum value");return cr[hr]}const dr=function(pr,mr){const gr=ar(pr);mr.int32(gr)},fr=function(pr){const mr=pr.int32();return ar(mr)};return createCodec("enum",CODEC_TYPES.VARINT,dr,fr)}function message(cr,ar){return createCodec("message",CODEC_TYPES.LENGTH_DELIMITED,cr,ar)}var KeyType$1;(function(cr){cr.RSA="RSA",cr.Ed25519="Ed25519",cr.Secp256k1="Secp256k1"})(KeyType$1||(KeyType$1={}));var __KeyTypeValues$1;(function(cr){cr[cr.RSA=0]="RSA",cr[cr.Ed25519=1]="Ed25519",cr[cr.Secp256k1=2]="Secp256k1"})(__KeyTypeValues$1||(__KeyTypeValues$1={}));(function(cr){cr.codec=()=>enumeration(__KeyTypeValues$1)})(KeyType$1||(KeyType$1={}));var PublicKey$1;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.Type!=null&&(fr.uint32(8),KeyType$1.codec().encode(dr.Type,fr)),dr.Data!=null&&(fr.uint32(18),fr.bytes(dr.Data)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.Type=KeyType$1.codec().decode(dr);break;case 2:hr.Data=dr.bytes();break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(PublicKey$1||(PublicKey$1={}));var PrivateKey$1;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.Type!=null&&(fr.uint32(8),KeyType$1.codec().encode(dr.Type,fr)),dr.Data!=null&&(fr.uint32(18),fr.bytes(dr.Data)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.Type=KeyType$1.codec().decode(dr);break;case 2:hr.Data=dr.bytes();break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(PrivateKey$1||(PrivateKey$1={}));let Ed25519PublicKey$1=class{_key;constructor(ar){this._key=ensureKey$1(ar,PUBLIC_KEY_BYTE_LENGTH$1)}verify(ar,dr){return hashAndVerify$5(this._key,dr,ar)}marshal(){return this._key}get bytes(){return PublicKey$1.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(ar){return equals$1(this.bytes,ar.bytes)}hash(){const ar=sha256$2.digest(this.bytes);return isPromise$3(ar)?ar.then(({bytes:dr})=>dr):ar.bytes}},Ed25519PrivateKey$1=class{_key;_publicKey;constructor(ar,dr){this._key=ensureKey$1(ar,PRIVATE_KEY_BYTE_LENGTH$1),this._publicKey=ensureKey$1(dr,PUBLIC_KEY_BYTE_LENGTH$1)}sign(ar){return hashAndSign$5(this._key,ar)}get public(){return new Ed25519PublicKey$1(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey$1.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(ar){return equals$1(this.bytes,ar.bytes)}async hash(){const ar=sha256$2.digest(this.bytes);let dr;return isPromise$3(ar)?{bytes:dr}=await ar:dr=ar.bytes,dr}async id(){const ar=identity$4.digest(this.public.bytes);return base58btc$1.encode(ar.bytes).substring(1)}async export(ar,dr="libp2p-key"){if(dr==="libp2p-key")return exporter$1(this.bytes,ar);throw new CodeError$3(`export format '${dr}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function unmarshalEd25519PrivateKey$1(cr){if(cr.length>PRIVATE_KEY_BYTE_LENGTH$1){cr=ensureKey$1(cr,PRIVATE_KEY_BYTE_LENGTH$1+PUBLIC_KEY_BYTE_LENGTH$1);const fr=cr.subarray(0,PRIVATE_KEY_BYTE_LENGTH$1),hr=cr.subarray(PRIVATE_KEY_BYTE_LENGTH$1,cr.length);return new Ed25519PrivateKey$1(fr,hr)}cr=ensureKey$1(cr,PRIVATE_KEY_BYTE_LENGTH$1);const ar=cr.subarray(0,PRIVATE_KEY_BYTE_LENGTH$1),dr=cr.subarray(PUBLIC_KEY_BYTE_LENGTH$1);return new Ed25519PrivateKey$1(ar,dr)}function unmarshalEd25519PublicKey$1(cr){return cr=ensureKey$1(cr,PUBLIC_KEY_BYTE_LENGTH$1),new Ed25519PublicKey$1(cr)}async function generateKeyPair$6(){const{privateKey:cr,publicKey:ar}=generateKey$5();return new Ed25519PrivateKey$1(cr,ar)}async function generateKeyPairFromSeed$1(cr){const{privateKey:ar,publicKey:dr}=generateKeyFromSeed$1(cr);return new Ed25519PrivateKey$1(ar,dr)}function ensureKey$1(cr,ar){if(cr=Uint8Array.from(cr??[]),cr.length!==ar)throw new CodeError$3(`Key must be a Uint8Array of length ${ar}, got ${cr.length}`,"ERR_INVALID_KEY_TYPE");return cr}const Ed25519$1=Object.freeze(Object.defineProperty({__proto__:null,Ed25519PrivateKey:Ed25519PrivateKey$1,Ed25519PublicKey:Ed25519PublicKey$1,generateKeyPair:generateKeyPair$6,generateKeyPairFromSeed:generateKeyPairFromSeed$1,unmarshalEd25519PrivateKey:unmarshalEd25519PrivateKey$1,unmarshalEd25519PublicKey:unmarshalEd25519PublicKey$1},Symbol.toStringTag,{value:"Module"}));function toString$2(cr,ar="utf8"){const dr=BASES$1[ar];if(dr==null)throw new Error(`Unsupported encoding "${ar}"`);return(ar==="utf8"||ar==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(cr.buffer,cr.byteOffset,cr.byteLength).toString("utf8"):dr.encoder.encode(cr).substring(1)}function randomBytes$1(cr){if(isNaN(cr)||cr<=0)throw new CodeError$3("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return randomBytes$2(cr)}function pbkdf2Init(cr,ar,dr,fr){hash$1(cr);const hr=checkOpts$1({dkLen:32,asyncTick:10},fr),{c:pr,dkLen:mr,asyncTick:gr}=hr;if(number$2(pr),number$2(mr),number$2(gr),pr<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const yr=toBytes$2(ar),xr=toBytes$2(dr),wr=new Uint8Array(mr),br=hmac$1.create(cr,yr),Sr=br._cloneInto().update(xr);return{c:pr,dkLen:mr,asyncTick:gr,DK:wr,PRF:br,PRFSalt:Sr}}function pbkdf2Output(cr,ar,dr,fr,hr){return cr.destroy(),ar.destroy(),fr&&fr.destroy(),hr.fill(0),dr}async function pbkdf2Async(cr,ar,dr,fr){const{c:hr,dkLen:pr,asyncTick:mr,DK:gr,PRF:yr,PRFSalt:xr}=pbkdf2Init(cr,ar,dr,fr);let wr;const br=new Uint8Array(4),Sr=createView$1(br),vr=new Uint8Array(yr.outputLen);for(let Er=1,Ar=0;Ar<pr;Er++,Ar+=yr.outputLen){const _r=gr.subarray(Ar,Ar+yr.outputLen);Sr.setInt32(0,Er,!1),(wr=xr._cloneInto(wr)).update(br).digestInto(vr),_r.set(vr.subarray(0,_r.length)),await asyncLoop(hr-1,mr,()=>{yr._cloneInto(wr).update(vr).digestInto(vr);for(let Cr=0;Cr<_r.length;Cr++)_r[Cr]^=vr[Cr]})}return pbkdf2Output(yr,xr,gr,wr,vr)}/*!
 * MIT License
 * 
 * Copyright (c) 2017-2022 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const ARRAY_BUFFER_NAME="[object ArrayBuffer]";class BufferSourceConverter{static isArrayBuffer(ar){return Object.prototype.toString.call(ar)===ARRAY_BUFFER_NAME}static toArrayBuffer(ar){return this.isArrayBuffer(ar)?ar:ar.byteLength===ar.buffer.byteLength||ar.byteOffset===0&&ar.byteLength===ar.buffer.byteLength?ar.buffer:this.toUint8Array(ar.buffer).slice(ar.byteOffset,ar.byteOffset+ar.byteLength).buffer}static toUint8Array(ar){return this.toView(ar,Uint8Array)}static toView(ar,dr){if(ar.constructor===dr)return ar;if(this.isArrayBuffer(ar))return new dr(ar);if(this.isArrayBufferView(ar))return new dr(ar.buffer,ar.byteOffset,ar.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(ar){return this.isArrayBufferView(ar)||this.isArrayBuffer(ar)}static isArrayBufferView(ar){return ArrayBuffer.isView(ar)||ar&&this.isArrayBuffer(ar.buffer)}static isEqual(ar,dr){const fr=BufferSourceConverter.toUint8Array(ar),hr=BufferSourceConverter.toUint8Array(dr);if(fr.length!==hr.byteLength)return!1;for(let pr=0;pr<fr.length;pr++)if(fr[pr]!==hr[pr])return!1;return!0}static concat(...ar){let dr;Array.isArray(ar[0])&&!(ar[1]instanceof Function)||Array.isArray(ar[0])&&ar[1]instanceof Function?dr=ar[0]:ar[ar.length-1]instanceof Function?dr=ar.slice(0,ar.length-1):dr=ar;let fr=0;for(const mr of dr)fr+=mr.byteLength;const hr=new Uint8Array(fr);let pr=0;for(const mr of dr){const gr=this.toUint8Array(mr);hr.set(gr,pr),pr+=gr.length}return ar[ar.length-1]instanceof Function?this.toView(hr,ar[ar.length-1]):hr.buffer}}const STRING_TYPE="string",HEX_REGEX=/^[0-9a-f]+$/i,BASE64_REGEX=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,BASE64URL_REGEX=/^[a-zA-Z0-9-_]+$/;class Utf8Converter{static fromString(ar){const dr=unescape(encodeURIComponent(ar)),fr=new Uint8Array(dr.length);for(let hr=0;hr<dr.length;hr++)fr[hr]=dr.charCodeAt(hr);return fr.buffer}static toString(ar){const dr=BufferSourceConverter.toUint8Array(ar);let fr="";for(let pr=0;pr<dr.length;pr++)fr+=String.fromCharCode(dr[pr]);return decodeURIComponent(escape(fr))}}class Utf16Converter{static toString(ar,dr=!1){const fr=BufferSourceConverter.toArrayBuffer(ar),hr=new DataView(fr);let pr="";for(let mr=0;mr<fr.byteLength;mr+=2){const gr=hr.getUint16(mr,dr);pr+=String.fromCharCode(gr)}return pr}static fromString(ar,dr=!1){const fr=new ArrayBuffer(ar.length*2),hr=new DataView(fr);for(let pr=0;pr<ar.length;pr++)hr.setUint16(pr*2,ar.charCodeAt(pr),dr);return fr}}class Convert{static isHex(ar){return typeof ar===STRING_TYPE&&HEX_REGEX.test(ar)}static isBase64(ar){return typeof ar===STRING_TYPE&&BASE64_REGEX.test(ar)}static isBase64Url(ar){return typeof ar===STRING_TYPE&&BASE64URL_REGEX.test(ar)}static ToString(ar,dr="utf8"){const fr=BufferSourceConverter.toUint8Array(ar);switch(dr.toLowerCase()){case"utf8":return this.ToUtf8String(fr);case"binary":return this.ToBinary(fr);case"hex":return this.ToHex(fr);case"base64":return this.ToBase64(fr);case"base64url":return this.ToBase64Url(fr);case"utf16le":return Utf16Converter.toString(fr,!0);case"utf16":case"utf16be":return Utf16Converter.toString(fr);default:throw new Error(`Unknown type of encoding '${dr}'`)}}static FromString(ar,dr="utf8"){if(!ar)return new ArrayBuffer(0);switch(dr.toLowerCase()){case"utf8":return this.FromUtf8String(ar);case"binary":return this.FromBinary(ar);case"hex":return this.FromHex(ar);case"base64":return this.FromBase64(ar);case"base64url":return this.FromBase64Url(ar);case"utf16le":return Utf16Converter.fromString(ar,!0);case"utf16":case"utf16be":return Utf16Converter.fromString(ar);default:throw new Error(`Unknown type of encoding '${dr}'`)}}static ToBase64(ar){const dr=BufferSourceConverter.toUint8Array(ar);if(typeof btoa<"u"){const fr=this.ToString(dr,"binary");return btoa(fr)}else return Buffer.from(dr).toString("base64")}static FromBase64(ar){const dr=this.formatString(ar);if(!dr)return new ArrayBuffer(0);if(!Convert.isBase64(dr))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(dr)):new Uint8Array(Buffer.from(dr,"base64")).buffer}static FromBase64Url(ar){const dr=this.formatString(ar);if(!dr)return new ArrayBuffer(0);if(!Convert.isBase64Url(dr))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(dr.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(ar){return this.ToBase64(ar).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(ar,dr=Convert.DEFAULT_UTF8_ENCODING){switch(dr){case"ascii":return this.FromBinary(ar);case"utf8":return Utf8Converter.fromString(ar);case"utf16":case"utf16be":return Utf16Converter.fromString(ar);case"utf16le":case"usc2":return Utf16Converter.fromString(ar,!0);default:throw new Error(`Unknown type of encoding '${dr}'`)}}static ToUtf8String(ar,dr=Convert.DEFAULT_UTF8_ENCODING){switch(dr){case"ascii":return this.ToBinary(ar);case"utf8":return Utf8Converter.toString(ar);case"utf16":case"utf16be":return Utf16Converter.toString(ar);case"utf16le":case"usc2":return Utf16Converter.toString(ar,!0);default:throw new Error(`Unknown type of encoding '${dr}'`)}}static FromBinary(ar){const dr=ar.length,fr=new Uint8Array(dr);for(let hr=0;hr<dr;hr++)fr[hr]=ar.charCodeAt(hr);return fr.buffer}static ToBinary(ar){const dr=BufferSourceConverter.toUint8Array(ar);let fr="";for(let hr=0;hr<dr.length;hr++)fr+=String.fromCharCode(dr[hr]);return fr}static ToHex(ar){const dr=BufferSourceConverter.toUint8Array(ar);let fr="";const hr=dr.length;for(let pr=0;pr<hr;pr++){const mr=dr[pr];mr<16&&(fr+="0"),fr+=mr.toString(16)}return fr}static FromHex(ar){let dr=this.formatString(ar);if(!dr)return new ArrayBuffer(0);if(!Convert.isHex(dr))throw new TypeError("Argument 'hexString' is not HEX encoded");dr.length%2&&(dr=`0${dr}`);const fr=new Uint8Array(dr.length/2);for(let hr=0;hr<dr.length;hr=hr+2){const pr=dr.slice(hr,hr+2);fr[hr/2]=parseInt(pr,16)}return fr.buffer}static ToUtf16String(ar,dr=!1){return Utf16Converter.toString(ar,dr)}static FromUtf16String(ar,dr=!1){return Utf16Converter.fromString(ar,dr)}static Base64Padding(ar){const dr=4-ar.length%4;if(dr<4)for(let fr=0;fr<dr;fr++)ar+="=";return ar}static formatString(ar){return ar?.replace(/[\n\r\t ]/g,"")||""}}Convert.DEFAULT_UTF8_ENCODING="utf8";/*!
 Copyright (c) Peculiar Ventures, LLC
*/function utilFromBase(cr,ar){let dr=0;if(cr.length===1)return cr[0];for(let fr=cr.length-1;fr>=0;fr--)dr+=cr[cr.length-1-fr]*Math.pow(2,ar*fr);return dr}function utilToBase(cr,ar,dr=-1){const fr=dr;let hr=cr,pr=0,mr=Math.pow(2,ar);for(let gr=1;gr<8;gr++){if(cr<mr){let yr;if(fr<0)yr=new ArrayBuffer(gr),pr=gr;else{if(fr<gr)return new ArrayBuffer(0);yr=new ArrayBuffer(fr),pr=fr}const xr=new Uint8Array(yr);for(let wr=gr-1;wr>=0;wr--){const br=Math.pow(2,wr*ar);xr[pr-wr-1]=Math.floor(hr/br),hr-=xr[pr-wr-1]*br}return yr}mr*=Math.pow(2,ar)}return new ArrayBuffer(0)}function utilConcatView(...cr){let ar=0,dr=0;for(const pr of cr)ar+=pr.length;const fr=new ArrayBuffer(ar),hr=new Uint8Array(fr);for(const pr of cr)hr.set(pr,dr),dr+=pr.length;return hr}function utilDecodeTC(){const cr=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const gr=cr[0]===255&&cr[1]&128,yr=cr[0]===0&&(cr[1]&128)===0;(gr||yr)&&this.warnings.push("Needlessly long format")}const ar=new ArrayBuffer(this.valueHex.byteLength),dr=new Uint8Array(ar);for(let gr=0;gr<this.valueHex.byteLength;gr++)dr[gr]=0;dr[0]=cr[0]&128;const fr=utilFromBase(dr,8),hr=new ArrayBuffer(this.valueHex.byteLength),pr=new Uint8Array(hr);for(let gr=0;gr<this.valueHex.byteLength;gr++)pr[gr]=cr[gr];return pr[0]&=127,utilFromBase(pr,8)-fr}function utilEncodeTC(cr){const ar=cr<0?cr*-1:cr;let dr=128;for(let fr=1;fr<8;fr++){if(ar<=dr){if(cr<0){const mr=dr-ar,gr=utilToBase(mr,8,fr),yr=new Uint8Array(gr);return yr[0]|=128,gr}let hr=utilToBase(ar,8,fr),pr=new Uint8Array(hr);if(pr[0]&128){const mr=hr.slice(0),gr=new Uint8Array(mr);hr=new ArrayBuffer(hr.byteLength+1),pr=new Uint8Array(hr);for(let yr=0;yr<mr.byteLength;yr++)pr[yr+1]=gr[yr];pr[0]=0}return hr}dr*=Math.pow(2,8)}return new ArrayBuffer(0)}function isEqualBuffer(cr,ar){if(cr.byteLength!==ar.byteLength)return!1;const dr=new Uint8Array(cr),fr=new Uint8Array(ar);for(let hr=0;hr<dr.length;hr++)if(dr[hr]!==fr[hr])return!1;return!0}function padNumber(cr,ar){const dr=cr.toString(10);if(ar<dr.length)return"";const fr=ar-dr.length,hr=new Array(fr);for(let mr=0;mr<fr;mr++)hr[mr]="0";return hr.join("").concat(dr)}/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function assertBigInt(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function concat$1(cr){let ar=0,dr=0;for(let hr=0;hr<cr.length;hr++){const pr=cr[hr];ar+=pr.byteLength}const fr=new Uint8Array(ar);for(let hr=0;hr<cr.length;hr++){const pr=cr[hr];fr.set(new Uint8Array(pr),dr),dr+=pr.byteLength}return fr.buffer}function checkBufferParams(cr,ar,dr,fr){return ar instanceof Uint8Array?ar.byteLength?dr<0?(cr.error="Wrong parameter: inputOffset less than zero",!1):fr<0?(cr.error="Wrong parameter: inputLength less than zero",!1):ar.byteLength-dr-fr<0?(cr.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(cr.error="Wrong parameter: inputBuffer has zero length",!1):(cr.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class ViewWriter{constructor(){this.items=[]}write(ar){this.items.push(ar)}final(){return concat$1(this.items)}}const powers2=[new Uint8Array([1])],digitsString="0123456789",EMPTY_STRING="",EMPTY_BUFFER$1=new ArrayBuffer(0),EMPTY_VIEW=new Uint8Array(0),END_OF_CONTENT_NAME="EndOfContent",OCTET_STRING_NAME="OCTET STRING",BIT_STRING_NAME="BIT STRING";function HexBlock(cr){var ar;return ar=class extends cr{constructor(...fr){var hr;super(...fr);const pr=fr[0]||{};this.isHexOnly=(hr=pr.isHexOnly)!==null&&hr!==void 0?hr:!1,this.valueHexView=pr.valueHex?BufferSourceConverter.toUint8Array(pr.valueHex):EMPTY_VIEW}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(fr){this.valueHexView=new Uint8Array(fr)}fromBER(fr,hr,pr){const mr=fr instanceof ArrayBuffer?new Uint8Array(fr):fr;if(!checkBufferParams(this,mr,hr,pr))return-1;const gr=hr+pr;return this.valueHexView=mr.subarray(hr,gr),this.valueHexView.length?(this.blockLength=pr,gr):(this.warnings.push("Zero buffer length"),hr)}toBER(fr=!1){return this.isHexOnly?fr?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",EMPTY_BUFFER$1)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Convert.ToHex(this.valueHexView)}}},ar.NAME="hexBlock",ar}class LocalBaseBlock{constructor({blockLength:ar=0,error:dr=EMPTY_STRING,warnings:fr=[],valueBeforeDecode:hr=EMPTY_VIEW}={}){this.blockLength=ar,this.error=dr,this.warnings=fr,this.valueBeforeDecodeView=BufferSourceConverter.toUint8Array(hr)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(ar){this.valueBeforeDecodeView=new Uint8Array(ar)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Convert.ToHex(this.valueBeforeDecodeView)}}}LocalBaseBlock.NAME="baseBlock";class ValueBlock extends LocalBaseBlock{fromBER(ar,dr,fr){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(ar,dr){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ValueBlock.NAME="valueBlock";class LocalIdentificationBlock extends HexBlock(LocalBaseBlock){constructor({idBlock:ar={}}={}){var dr,fr,hr,pr;super(),ar?(this.isHexOnly=(dr=ar.isHexOnly)!==null&&dr!==void 0?dr:!1,this.valueHexView=ar.valueHex?BufferSourceConverter.toUint8Array(ar.valueHex):EMPTY_VIEW,this.tagClass=(fr=ar.tagClass)!==null&&fr!==void 0?fr:-1,this.tagNumber=(hr=ar.tagNumber)!==null&&hr!==void 0?hr:-1,this.isConstructed=(pr=ar.isConstructed)!==null&&pr!==void 0?pr:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(ar=!1){let dr=0;switch(this.tagClass){case 1:dr|=0;break;case 2:dr|=64;break;case 3:dr|=128;break;case 4:dr|=192;break;default:return this.error="Unknown tag class",EMPTY_BUFFER$1}if(this.isConstructed&&(dr|=32),this.tagNumber<31&&!this.isHexOnly){const hr=new Uint8Array(1);if(!ar){let pr=this.tagNumber;pr&=31,dr|=pr,hr[0]=dr}return hr.buffer}if(!this.isHexOnly){const hr=utilToBase(this.tagNumber,7),pr=new Uint8Array(hr),mr=hr.byteLength,gr=new Uint8Array(mr+1);if(gr[0]=dr|31,!ar){for(let yr=0;yr<mr-1;yr++)gr[yr+1]=pr[yr]|128;gr[mr]=pr[mr-1]}return gr.buffer}const fr=new Uint8Array(this.valueHexView.byteLength+1);if(fr[0]=dr|31,!ar){const hr=this.valueHexView;for(let pr=0;pr<hr.length-1;pr++)fr[pr+1]=hr[pr]|128;fr[this.valueHexView.byteLength]=hr[hr.length-1]}return fr.buffer}fromBER(ar,dr,fr){const hr=BufferSourceConverter.toUint8Array(ar);if(!checkBufferParams(this,hr,dr,fr))return-1;const pr=hr.subarray(dr,dr+fr);if(pr.length===0)return this.error="Zero buffer length",-1;switch(pr[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(pr[0]&32)===32,this.isHexOnly=!1;const gr=pr[0]&31;if(gr!==31)this.tagNumber=gr,this.blockLength=1;else{let yr=1,xr=this.valueHexView=new Uint8Array(255),wr=255;for(;pr[yr]&128;){if(xr[yr-1]=pr[yr]&127,yr++,yr>=pr.length)return this.error="End of input reached before message was fully decoded",-1;if(yr===wr){wr+=255;const Sr=new Uint8Array(wr);for(let vr=0;vr<xr.length;vr++)Sr[vr]=xr[vr];xr=this.valueHexView=new Uint8Array(wr)}}this.blockLength=yr+1,xr[yr-1]=pr[yr]&127;const br=new Uint8Array(yr);for(let Sr=0;Sr<yr;Sr++)br[Sr]=xr[Sr];xr=this.valueHexView=new Uint8Array(yr),xr.set(br),this.blockLength<=9?this.tagNumber=utilFromBase(xr,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return dr+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}LocalIdentificationBlock.NAME="identificationBlock";class LocalLengthBlock extends LocalBaseBlock{constructor({lenBlock:ar={}}={}){var dr,fr,hr;super(),this.isIndefiniteForm=(dr=ar.isIndefiniteForm)!==null&&dr!==void 0?dr:!1,this.longFormUsed=(fr=ar.longFormUsed)!==null&&fr!==void 0?fr:!1,this.length=(hr=ar.length)!==null&&hr!==void 0?hr:0}fromBER(ar,dr,fr){const hr=BufferSourceConverter.toUint8Array(ar);if(!checkBufferParams(this,hr,dr,fr))return-1;const pr=hr.subarray(dr,dr+fr);if(pr.length===0)return this.error="Zero buffer length",-1;if(pr[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=pr[0]===128,this.isIndefiniteForm)return this.blockLength=1,dr+this.blockLength;if(this.longFormUsed=!!(pr[0]&128),this.longFormUsed===!1)return this.length=pr[0],this.blockLength=1,dr+this.blockLength;const mr=pr[0]&127;if(mr>8)return this.error="Too big integer",-1;if(mr+1>pr.length)return this.error="End of input reached before message was fully decoded",-1;const gr=dr+1,yr=hr.subarray(gr,gr+mr);return yr[mr-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=utilFromBase(yr,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=mr+1,dr+this.blockLength}toBER(ar=!1){let dr,fr;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return dr=new ArrayBuffer(1),ar===!1&&(fr=new Uint8Array(dr),fr[0]=128),dr;if(this.longFormUsed){const hr=utilToBase(this.length,8);if(hr.byteLength>127)return this.error="Too big length",EMPTY_BUFFER$1;if(dr=new ArrayBuffer(hr.byteLength+1),ar)return dr;const pr=new Uint8Array(hr);fr=new Uint8Array(dr),fr[0]=hr.byteLength|128;for(let mr=0;mr<hr.byteLength;mr++)fr[mr+1]=pr[mr];return dr}return dr=new ArrayBuffer(1),ar===!1&&(fr=new Uint8Array(dr),fr[0]=this.length),dr}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}LocalLengthBlock.NAME="lengthBlock";const typeStore={};class BaseBlock extends LocalBaseBlock{constructor({name:ar=EMPTY_STRING,optional:dr=!1,primitiveSchema:fr,...hr}={},pr){super(hr),this.name=ar,this.optional=dr,fr&&(this.primitiveSchema=fr),this.idBlock=new LocalIdentificationBlock(hr),this.lenBlock=new LocalLengthBlock(hr),this.valueBlock=pr?new pr(hr):new ValueBlock(hr)}fromBER(ar,dr,fr){const hr=this.valueBlock.fromBER(ar,dr,this.lenBlock.isIndefiniteForm?fr:this.lenBlock.length);return hr===-1?(this.error=this.valueBlock.error,hr):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),hr)}toBER(ar,dr){const fr=dr||new ViewWriter;dr||prepareIndefiniteForm(this);const hr=this.idBlock.toBER(ar);if(fr.write(hr),this.lenBlock.isIndefiniteForm)fr.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(ar,fr),fr.write(new ArrayBuffer(2));else{const pr=this.valueBlock.toBER(ar);this.lenBlock.length=pr.byteLength;const mr=this.lenBlock.toBER(ar);fr.write(mr),fr.write(pr)}return dr?EMPTY_BUFFER$1:fr.final()}toJSON(){const ar={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(ar.primitiveSchema=this.primitiveSchema.toJSON()),ar}toString(ar="ascii"){return ar==="ascii"?this.onAsciiEncoding():Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(ar){if(this===ar)return!0;if(!(ar instanceof this.constructor))return!1;const dr=this.toBER(),fr=ar.toBER();return isEqualBuffer(dr,fr)}}BaseBlock.NAME="BaseBlock";function prepareIndefiniteForm(cr){if(cr instanceof typeStore.Constructed)for(const ar of cr.valueBlock.value)prepareIndefiniteForm(ar)&&(cr.lenBlock.isIndefiniteForm=!0);return!!cr.lenBlock.isIndefiniteForm}class BaseStringBlock extends BaseBlock{constructor({value:ar=EMPTY_STRING,...dr}={},fr){super(dr,fr),ar&&this.fromString(ar)}getValue(){return this.valueBlock.value}setValue(ar){this.valueBlock.value=ar}fromBER(ar,dr,fr){const hr=this.valueBlock.fromBER(ar,dr,this.lenBlock.isIndefiniteForm?fr:this.lenBlock.length);return hr===-1?(this.error=this.valueBlock.error,hr):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),hr)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}BaseStringBlock.NAME="BaseStringBlock";class LocalPrimitiveValueBlock extends HexBlock(ValueBlock){constructor({isHexOnly:ar=!0,...dr}={}){super(dr),this.isHexOnly=ar}}LocalPrimitiveValueBlock.NAME="PrimitiveValueBlock";var _a$w;class Primitive extends BaseBlock{constructor(ar={}){super(ar,LocalPrimitiveValueBlock),this.idBlock.isConstructed=!1}}_a$w=Primitive;typeStore.Primitive=_a$w;Primitive.NAME="PRIMITIVE";function localChangeType(cr,ar){if(cr instanceof ar)return cr;const dr=new ar;return dr.idBlock=cr.idBlock,dr.lenBlock=cr.lenBlock,dr.warnings=cr.warnings,dr.valueBeforeDecodeView=cr.valueBeforeDecodeView,dr}function localFromBER(cr,ar=0,dr=cr.length){const fr=ar;let hr=new BaseBlock({},ValueBlock);const pr=new LocalBaseBlock;if(!checkBufferParams(pr,cr,ar,dr))return hr.error=pr.error,{offset:-1,result:hr};if(!cr.subarray(ar,ar+dr).length)return hr.error="Zero buffer length",{offset:-1,result:hr};let gr=hr.idBlock.fromBER(cr,ar,dr);if(hr.idBlock.warnings.length&&hr.warnings.concat(hr.idBlock.warnings),gr===-1)return hr.error=hr.idBlock.error,{offset:-1,result:hr};if(ar=gr,dr-=hr.idBlock.blockLength,gr=hr.lenBlock.fromBER(cr,ar,dr),hr.lenBlock.warnings.length&&hr.warnings.concat(hr.lenBlock.warnings),gr===-1)return hr.error=hr.lenBlock.error,{offset:-1,result:hr};if(ar=gr,dr-=hr.lenBlock.blockLength,!hr.idBlock.isConstructed&&hr.lenBlock.isIndefiniteForm)return hr.error="Indefinite length form used for primitive encoding form",{offset:-1,result:hr};let yr=BaseBlock;switch(hr.idBlock.tagClass){case 1:if(hr.idBlock.tagNumber>=37&&hr.idBlock.isHexOnly===!1)return hr.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:hr};switch(hr.idBlock.tagNumber){case 0:if(hr.idBlock.isConstructed&&hr.lenBlock.length>0)return hr.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:hr};yr=typeStore.EndOfContent;break;case 1:yr=typeStore.Boolean;break;case 2:yr=typeStore.Integer;break;case 3:yr=typeStore.BitString;break;case 4:yr=typeStore.OctetString;break;case 5:yr=typeStore.Null;break;case 6:yr=typeStore.ObjectIdentifier;break;case 10:yr=typeStore.Enumerated;break;case 12:yr=typeStore.Utf8String;break;case 13:yr=typeStore.RelativeObjectIdentifier;break;case 14:yr=typeStore.TIME;break;case 15:return hr.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:hr};case 16:yr=typeStore.Sequence;break;case 17:yr=typeStore.Set;break;case 18:yr=typeStore.NumericString;break;case 19:yr=typeStore.PrintableString;break;case 20:yr=typeStore.TeletexString;break;case 21:yr=typeStore.VideotexString;break;case 22:yr=typeStore.IA5String;break;case 23:yr=typeStore.UTCTime;break;case 24:yr=typeStore.GeneralizedTime;break;case 25:yr=typeStore.GraphicString;break;case 26:yr=typeStore.VisibleString;break;case 27:yr=typeStore.GeneralString;break;case 28:yr=typeStore.UniversalString;break;case 29:yr=typeStore.CharacterString;break;case 30:yr=typeStore.BmpString;break;case 31:yr=typeStore.DATE;break;case 32:yr=typeStore.TimeOfDay;break;case 33:yr=typeStore.DateTime;break;case 34:yr=typeStore.Duration;break;default:{const xr=hr.idBlock.isConstructed?new typeStore.Constructed:new typeStore.Primitive;xr.idBlock=hr.idBlock,xr.lenBlock=hr.lenBlock,xr.warnings=hr.warnings,hr=xr}}break;case 2:case 3:case 4:default:yr=hr.idBlock.isConstructed?typeStore.Constructed:typeStore.Primitive}return hr=localChangeType(hr,yr),gr=hr.fromBER(cr,ar,hr.lenBlock.isIndefiniteForm?dr:hr.lenBlock.length),hr.valueBeforeDecodeView=cr.subarray(fr,fr+hr.blockLength),{offset:gr,result:hr}}function fromBER(cr){if(!cr.byteLength){const ar=new BaseBlock({},ValueBlock);return ar.error="Input buffer has zero length",{offset:-1,result:ar}}return localFromBER(BufferSourceConverter.toUint8Array(cr).slice(),0,cr.byteLength)}function checkLen(cr,ar){return cr?1:ar}class LocalConstructedValueBlock extends ValueBlock{constructor({value:ar=[],isIndefiniteForm:dr=!1,...fr}={}){super(fr),this.value=ar,this.isIndefiniteForm=dr}fromBER(ar,dr,fr){const hr=BufferSourceConverter.toUint8Array(ar);if(!checkBufferParams(this,hr,dr,fr))return-1;if(this.valueBeforeDecodeView=hr.subarray(dr,dr+fr),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),dr;let pr=dr;for(;checkLen(this.isIndefiniteForm,fr)>0;){const mr=localFromBER(hr,pr,fr);if(mr.offset===-1)return this.error=mr.result.error,this.warnings.concat(mr.result.warnings),-1;if(pr=mr.offset,this.blockLength+=mr.result.blockLength,fr-=mr.result.blockLength,this.value.push(mr.result),this.isIndefiniteForm&&mr.result.constructor.NAME===END_OF_CONTENT_NAME)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===END_OF_CONTENT_NAME?this.value.pop():this.warnings.push("No EndOfContent block encoded")),pr}toBER(ar,dr){const fr=dr||new ViewWriter;for(let hr=0;hr<this.value.length;hr++)this.value[hr].toBER(ar,fr);return dr?EMPTY_BUFFER$1:fr.final()}toJSON(){const ar={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const dr of this.value)ar.value.push(dr.toJSON());return ar}}LocalConstructedValueBlock.NAME="ConstructedValueBlock";var _a$v;class Constructed extends BaseBlock{constructor(ar={}){super(ar,LocalConstructedValueBlock),this.idBlock.isConstructed=!0}fromBER(ar,dr,fr){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const hr=this.valueBlock.fromBER(ar,dr,this.lenBlock.isIndefiniteForm?fr:this.lenBlock.length);return hr===-1?(this.error=this.valueBlock.error,hr):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),hr)}onAsciiEncoding(){const ar=[];for(const fr of this.valueBlock.value)ar.push(fr.toString("ascii").split(`
`).map(hr=>`  ${hr}`).join(`
`));const dr=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return ar.length?`${dr} :
${ar.join(`
`)}`:`${dr} :`}}_a$v=Constructed;typeStore.Constructed=_a$v;Constructed.NAME="CONSTRUCTED";class LocalEndOfContentValueBlock extends ValueBlock{fromBER(ar,dr,fr){return dr}toBER(ar){return EMPTY_BUFFER$1}}LocalEndOfContentValueBlock.override="EndOfContentValueBlock";var _a$u;class EndOfContent extends BaseBlock{constructor(ar={}){super(ar,LocalEndOfContentValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}_a$u=EndOfContent;typeStore.EndOfContent=_a$u;EndOfContent.NAME=END_OF_CONTENT_NAME;var _a$t;class Null extends BaseBlock{constructor(ar={}){super(ar,ValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(ar,dr,fr){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=fr,dr+fr>ar.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):dr+fr}toBER(ar,dr){const fr=new ArrayBuffer(2);if(!ar){const hr=new Uint8Array(fr);hr[0]=5,hr[1]=0}return dr&&dr.write(fr),fr}onAsciiEncoding(){return`${this.constructor.NAME}`}}_a$t=Null;typeStore.Null=_a$t;Null.NAME="NULL";class LocalBooleanValueBlock extends HexBlock(ValueBlock){constructor({value:ar,...dr}={}){super(dr),dr.valueHex?this.valueHexView=BufferSourceConverter.toUint8Array(dr.valueHex):this.valueHexView=new Uint8Array(1),ar&&(this.value=ar)}get value(){for(const ar of this.valueHexView)if(ar>0)return!0;return!1}set value(ar){this.valueHexView[0]=ar?255:0}fromBER(ar,dr,fr){const hr=BufferSourceConverter.toUint8Array(ar);return checkBufferParams(this,hr,dr,fr)?(this.valueHexView=hr.subarray(dr,dr+fr),fr>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,utilDecodeTC.call(this),this.blockLength=fr,dr+fr):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}LocalBooleanValueBlock.NAME="BooleanValueBlock";var _a$s;let Boolean$1=class extends BaseBlock{constructor(ar={}){super(ar,LocalBooleanValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(ar){this.valueBlock.value=ar}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};_a$s=Boolean$1;typeStore.Boolean=_a$s;Boolean$1.NAME="BOOLEAN";class LocalOctetStringValueBlock extends HexBlock(LocalConstructedValueBlock){constructor({isConstructed:ar=!1,...dr}={}){super(dr),this.isConstructed=ar}fromBER(ar,dr,fr){let hr=0;if(this.isConstructed){if(this.isHexOnly=!1,hr=LocalConstructedValueBlock.prototype.fromBER.call(this,ar,dr,fr),hr===-1)return hr;for(let pr=0;pr<this.value.length;pr++){const mr=this.value[pr].constructor.NAME;if(mr===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(mr!==OCTET_STRING_NAME)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,hr=super.fromBER(ar,dr,fr),this.blockLength=fr;return hr}toBER(ar,dr){return this.isConstructed?LocalConstructedValueBlock.prototype.toBER.call(this,ar,dr):ar?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}LocalOctetStringValueBlock.NAME="OctetStringValueBlock";var _a$r;class OctetString extends BaseBlock{constructor({idBlock:ar={},lenBlock:dr={},...fr}={}){var hr,pr;(hr=fr.isConstructed)!==null&&hr!==void 0||(fr.isConstructed=!!(!((pr=fr.value)===null||pr===void 0)&&pr.length)),super({idBlock:{isConstructed:fr.isConstructed,...ar},lenBlock:{...dr,isIndefiniteForm:!!fr.isIndefiniteForm},...fr},LocalOctetStringValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(ar,dr,fr){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,fr===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),dr;if(!this.valueBlock.isConstructed){const pr=(ar instanceof ArrayBuffer?new Uint8Array(ar):ar).subarray(dr,dr+fr);try{if(pr.byteLength){const mr=localFromBER(pr,0,pr.byteLength);mr.offset!==-1&&mr.offset===fr&&(this.valueBlock.value=[mr.result])}}catch{}}return super.fromBER(ar,dr,fr)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Constructed.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const ar=[];for(const dr of this.valueBlock.value)dr instanceof OctetString&&ar.push(dr.valueBlock.valueHexView);return BufferSourceConverter.concat(ar)}}_a$r=OctetString;typeStore.OctetString=_a$r;OctetString.NAME=OCTET_STRING_NAME;class LocalBitStringValueBlock extends HexBlock(LocalConstructedValueBlock){constructor({unusedBits:ar=0,isConstructed:dr=!1,...fr}={}){super(fr),this.unusedBits=ar,this.isConstructed=dr,this.blockLength=this.valueHexView.byteLength}fromBER(ar,dr,fr){if(!fr)return dr;let hr=-1;if(this.isConstructed){if(hr=LocalConstructedValueBlock.prototype.fromBER.call(this,ar,dr,fr),hr===-1)return hr;for(const gr of this.value){const yr=gr.constructor.NAME;if(yr===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(yr!==BIT_STRING_NAME)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const xr=gr.valueBlock;if(this.unusedBits>0&&xr.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=xr.unusedBits}return hr}const pr=BufferSourceConverter.toUint8Array(ar);if(!checkBufferParams(this,pr,dr,fr))return-1;const mr=pr.subarray(dr,dr+fr);if(this.unusedBits=mr[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const gr=mr.subarray(1);try{if(gr.byteLength){const yr=localFromBER(gr,0,gr.byteLength);yr.offset!==-1&&yr.offset===fr-1&&(this.value=[yr.result])}}catch{}}return this.valueHexView=mr.subarray(1),this.blockLength=mr.length,dr+fr}toBER(ar,dr){if(this.isConstructed)return LocalConstructedValueBlock.prototype.toBER.call(this,ar,dr);if(ar)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return EMPTY_BUFFER$1;const fr=new Uint8Array(this.valueHexView.length+1);return fr[0]=this.unusedBits,fr.set(this.valueHexView,1),fr.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}LocalBitStringValueBlock.NAME="BitStringValueBlock";var _a$q;class BitString extends BaseBlock{constructor({idBlock:ar={},lenBlock:dr={},...fr}={}){var hr,pr;(hr=fr.isConstructed)!==null&&hr!==void 0||(fr.isConstructed=!!(!((pr=fr.value)===null||pr===void 0)&&pr.length)),super({idBlock:{isConstructed:fr.isConstructed,...ar},lenBlock:{...dr,isIndefiniteForm:!!fr.isIndefiniteForm},...fr},LocalBitStringValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(ar,dr,fr){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(ar,dr,fr)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Constructed.prototype.onAsciiEncoding.call(this);{const ar=[],dr=this.valueBlock.valueHexView;for(const hr of dr)ar.push(hr.toString(2).padStart(8,"0"));const fr=ar.join("");return`${this.constructor.NAME} : ${fr.substring(0,fr.length-this.valueBlock.unusedBits)}`}}}_a$q=BitString;typeStore.BitString=_a$q;BitString.NAME=BIT_STRING_NAME;var _a$p;function viewAdd(cr,ar){const dr=new Uint8Array([0]),fr=new Uint8Array(cr),hr=new Uint8Array(ar);let pr=fr.slice(0);const mr=pr.length-1,gr=hr.slice(0),yr=gr.length-1;let xr=0;const wr=yr<mr?mr:yr;let br=0;for(let Sr=wr;Sr>=0;Sr--,br++){switch(!0){case br<gr.length:xr=pr[mr-br]+gr[yr-br]+dr[0];break;default:xr=pr[mr-br]+dr[0]}switch(dr[0]=xr/10,!0){case br>=pr.length:pr=utilConcatView(new Uint8Array([xr%10]),pr);break;default:pr[mr-br]=xr%10}}return dr[0]>0&&(pr=utilConcatView(dr,pr)),pr}function power2(cr){if(cr>=powers2.length)for(let ar=powers2.length;ar<=cr;ar++){const dr=new Uint8Array([0]);let fr=powers2[ar-1].slice(0);for(let hr=fr.length-1;hr>=0;hr--){const pr=new Uint8Array([(fr[hr]<<1)+dr[0]]);dr[0]=pr[0]/10,fr[hr]=pr[0]%10}dr[0]>0&&(fr=utilConcatView(dr,fr)),powers2.push(fr)}return powers2[cr]}function viewSub(cr,ar){let dr=0;const fr=new Uint8Array(cr),hr=new Uint8Array(ar),pr=fr.slice(0),mr=pr.length-1,gr=hr.slice(0),yr=gr.length-1;let xr,wr=0;for(let br=yr;br>=0;br--,wr++)switch(xr=pr[mr-wr]-gr[yr-wr]-dr,!0){case xr<0:dr=1,pr[mr-wr]=xr+10;break;default:dr=0,pr[mr-wr]=xr}if(dr>0)for(let br=mr-yr+1;br>=0;br--,wr++)if(xr=pr[mr-wr]-dr,xr<0)dr=1,pr[mr-wr]=xr+10;else{dr=0,pr[mr-wr]=xr;break}return pr.slice()}class LocalIntegerValueBlock extends HexBlock(ValueBlock){constructor({value:ar,...dr}={}){super(dr),this._valueDec=0,dr.valueHex&&this.setValueHex(),ar!==void 0&&(this.valueDec=ar)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=utilDecodeTC.call(this)))}set valueDec(ar){this._valueDec=ar,this.isHexOnly=!1,this.valueHexView=new Uint8Array(utilEncodeTC(ar))}get valueDec(){return this._valueDec}fromDER(ar,dr,fr,hr=0){const pr=this.fromBER(ar,dr,fr);if(pr===-1)return pr;const mr=this.valueHexView;return mr[0]===0&&mr[1]&128?this.valueHexView=mr.subarray(1):hr!==0&&mr.length<hr&&(hr-mr.length>1&&(hr=mr.length+1),this.valueHexView=mr.subarray(hr-mr.length)),pr}toDER(ar=!1){const dr=this.valueHexView;switch(!0){case(dr[0]&128)!==0:{const fr=new Uint8Array(this.valueHexView.length+1);fr[0]=0,fr.set(dr,1),this.valueHexView=fr}break;case(dr[0]===0&&(dr[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(ar)}fromBER(ar,dr,fr){const hr=super.fromBER(ar,dr,fr);return hr===-1||this.setValueHex(),hr}toBER(ar){return ar?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const ar=this.valueHexView.length*8-1;let dr=new Uint8Array(this.valueHexView.length*8/3),fr=0,hr;const pr=this.valueHexView;let mr="",gr=!1;for(let yr=pr.byteLength-1;yr>=0;yr--){hr=pr[yr];for(let xr=0;xr<8;xr++){if((hr&1)===1)switch(fr){case ar:dr=viewSub(power2(fr),dr),mr="-";break;default:dr=viewAdd(dr,power2(fr))}fr++,hr>>=1}}for(let yr=0;yr<dr.length;yr++)dr[yr]&&(gr=!0),gr&&(mr+=digitsString.charAt(dr[yr]));return gr===!1&&(mr+=digitsString.charAt(0)),mr}}_a$p=LocalIntegerValueBlock;LocalIntegerValueBlock.NAME="IntegerValueBlock";Object.defineProperty(_a$p.prototype,"valueHex",{set:function(cr){this.valueHexView=new Uint8Array(cr),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var _a$o;class Integer extends BaseBlock{constructor(ar={}){super(ar,LocalIntegerValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return assertBigInt(),BigInt(this.valueBlock.toString())}static fromBigInt(ar){assertBigInt();const dr=BigInt(ar),fr=new ViewWriter,hr=dr.toString(16).replace(/^-/,""),pr=new Uint8Array(Convert.FromHex(hr));if(dr<0){const gr=new Uint8Array(pr.length+(pr[0]&128?1:0));gr[0]|=128;const xr=BigInt(`0x${Convert.ToHex(gr)}`)+dr,wr=BufferSourceConverter.toUint8Array(Convert.FromHex(xr.toString(16)));wr[0]|=128,fr.write(wr)}else pr[0]&128&&fr.write(new Uint8Array([0])),fr.write(pr);return new Integer({valueHex:fr.final()})}convertToDER(){const ar=new Integer({valueHex:this.valueBlock.valueHexView});return ar.valueBlock.toDER(),ar}convertFromDER(){return new Integer({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}_a$o=Integer;typeStore.Integer=_a$o;Integer.NAME="INTEGER";var _a$n;class Enumerated extends Integer{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}_a$n=Enumerated;typeStore.Enumerated=_a$n;Enumerated.NAME="ENUMERATED";class LocalSidValueBlock extends HexBlock(ValueBlock){constructor({valueDec:ar=-1,isFirstSid:dr=!1,...fr}={}){super(fr),this.valueDec=ar,this.isFirstSid=dr}fromBER(ar,dr,fr){if(!fr)return dr;const hr=BufferSourceConverter.toUint8Array(ar);if(!checkBufferParams(this,hr,dr,fr))return-1;const pr=hr.subarray(dr,dr+fr);this.valueHexView=new Uint8Array(fr);for(let gr=0;gr<fr&&(this.valueHexView[gr]=pr[gr]&127,this.blockLength++,!!(pr[gr]&128));gr++);const mr=new Uint8Array(this.blockLength);for(let gr=0;gr<this.blockLength;gr++)mr[gr]=this.valueHexView[gr];return this.valueHexView=mr,pr[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),dr+this.blockLength)}set valueBigInt(ar){assertBigInt();let dr=BigInt(ar).toString(2);for(;dr.length%7;)dr="0"+dr;const fr=new Uint8Array(dr.length/7);for(let hr=0;hr<fr.length;hr++)fr[hr]=parseInt(dr.slice(hr*7,hr*7+7),2)+(hr+1<fr.length?128:0);this.fromBER(fr.buffer,0,fr.length)}toBER(ar){if(this.isHexOnly){if(ar)return new ArrayBuffer(this.valueHexView.byteLength);const hr=this.valueHexView,pr=new Uint8Array(this.blockLength);for(let mr=0;mr<this.blockLength-1;mr++)pr[mr]=hr[mr]|128;return pr[this.blockLength-1]=hr[this.blockLength-1],pr.buffer}const dr=utilToBase(this.valueDec,7);if(dr.byteLength===0)return this.error="Error during encoding SID value",EMPTY_BUFFER$1;const fr=new Uint8Array(dr.byteLength);if(!ar){const hr=new Uint8Array(dr),pr=dr.byteLength-1;for(let mr=0;mr<pr;mr++)fr[mr]=hr[mr]|128;fr[pr]=hr[pr]}return fr}toString(){let ar="";if(this.isHexOnly)ar=Convert.ToHex(this.valueHexView);else if(this.isFirstSid){let dr=this.valueDec;this.valueDec<=39?ar="0.":this.valueDec<=79?(ar="1.",dr-=40):(ar="2.",dr-=80),ar+=dr.toString()}else ar=this.valueDec.toString();return ar}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}LocalSidValueBlock.NAME="sidBlock";class LocalObjectIdentifierValueBlock extends ValueBlock{constructor({value:ar=EMPTY_STRING,...dr}={}){super(dr),this.value=[],ar&&this.fromString(ar)}fromBER(ar,dr,fr){let hr=dr;for(;fr>0;){const pr=new LocalSidValueBlock;if(hr=pr.fromBER(ar,hr,fr),hr===-1)return this.blockLength=0,this.error=pr.error,hr;this.value.length===0&&(pr.isFirstSid=!0),this.blockLength+=pr.blockLength,fr-=pr.blockLength,this.value.push(pr)}return hr}toBER(ar){const dr=[];for(let fr=0;fr<this.value.length;fr++){const hr=this.value[fr].toBER(ar);if(hr.byteLength===0)return this.error=this.value[fr].error,EMPTY_BUFFER$1;dr.push(hr)}return concat$1(dr)}fromString(ar){this.value=[];let dr=0,fr=0,hr="",pr=!1;do if(fr=ar.indexOf(".",dr),fr===-1?hr=ar.substring(dr):hr=ar.substring(dr,fr),dr=fr+1,pr){const mr=this.value[0];let gr=0;switch(mr.valueDec){case 0:break;case 1:gr=40;break;case 2:gr=80;break;default:this.value=[];return}const yr=parseInt(hr,10);if(isNaN(yr))return;mr.valueDec=yr+gr,pr=!1}else{const mr=new LocalSidValueBlock;if(hr>Number.MAX_SAFE_INTEGER){assertBigInt();const gr=BigInt(hr);mr.valueBigInt=gr}else if(mr.valueDec=parseInt(hr,10),isNaN(mr.valueDec))return;this.value.length||(mr.isFirstSid=!0,pr=!0),this.value.push(mr)}while(fr!==-1)}toString(){let ar="",dr=!1;for(let fr=0;fr<this.value.length;fr++){dr=this.value[fr].isHexOnly;let hr=this.value[fr].toString();fr!==0&&(ar=`${ar}.`),dr?(hr=`{${hr}}`,this.value[fr].isFirstSid?ar=`2.{${hr} - 80}`:ar+=hr):ar+=hr}return ar}toJSON(){const ar={...super.toJSON(),value:this.toString(),sidArray:[]};for(let dr=0;dr<this.value.length;dr++)ar.sidArray.push(this.value[dr].toJSON());return ar}}LocalObjectIdentifierValueBlock.NAME="ObjectIdentifierValueBlock";var _a$m;class ObjectIdentifier extends BaseBlock{constructor(ar={}){super(ar,LocalObjectIdentifierValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(ar){this.valueBlock.fromString(ar)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$m=ObjectIdentifier;typeStore.ObjectIdentifier=_a$m;ObjectIdentifier.NAME="OBJECT IDENTIFIER";class LocalRelativeSidValueBlock extends HexBlock(LocalBaseBlock){constructor({valueDec:ar=0,...dr}={}){super(dr),this.valueDec=ar}fromBER(ar,dr,fr){if(fr===0)return dr;const hr=BufferSourceConverter.toUint8Array(ar);if(!checkBufferParams(this,hr,dr,fr))return-1;const pr=hr.subarray(dr,dr+fr);this.valueHexView=new Uint8Array(fr);for(let gr=0;gr<fr&&(this.valueHexView[gr]=pr[gr]&127,this.blockLength++,!!(pr[gr]&128));gr++);const mr=new Uint8Array(this.blockLength);for(let gr=0;gr<this.blockLength;gr++)mr[gr]=this.valueHexView[gr];return this.valueHexView=mr,pr[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),dr+this.blockLength)}toBER(ar){if(this.isHexOnly){if(ar)return new ArrayBuffer(this.valueHexView.byteLength);const hr=this.valueHexView,pr=new Uint8Array(this.blockLength);for(let mr=0;mr<this.blockLength-1;mr++)pr[mr]=hr[mr]|128;return pr[this.blockLength-1]=hr[this.blockLength-1],pr.buffer}const dr=utilToBase(this.valueDec,7);if(dr.byteLength===0)return this.error="Error during encoding SID value",EMPTY_BUFFER$1;const fr=new Uint8Array(dr.byteLength);if(!ar){const hr=new Uint8Array(dr),pr=dr.byteLength-1;for(let mr=0;mr<pr;mr++)fr[mr]=hr[mr]|128;fr[pr]=hr[pr]}return fr.buffer}toString(){let ar="";return this.isHexOnly?ar=Convert.ToHex(this.valueHexView):ar=this.valueDec.toString(),ar}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}LocalRelativeSidValueBlock.NAME="relativeSidBlock";class LocalRelativeObjectIdentifierValueBlock extends ValueBlock{constructor({value:ar=EMPTY_STRING,...dr}={}){super(dr),this.value=[],ar&&this.fromString(ar)}fromBER(ar,dr,fr){let hr=dr;for(;fr>0;){const pr=new LocalRelativeSidValueBlock;if(hr=pr.fromBER(ar,hr,fr),hr===-1)return this.blockLength=0,this.error=pr.error,hr;this.blockLength+=pr.blockLength,fr-=pr.blockLength,this.value.push(pr)}return hr}toBER(ar,dr){const fr=[];for(let hr=0;hr<this.value.length;hr++){const pr=this.value[hr].toBER(ar);if(pr.byteLength===0)return this.error=this.value[hr].error,EMPTY_BUFFER$1;fr.push(pr)}return concat$1(fr)}fromString(ar){this.value=[];let dr=0,fr=0,hr="";do{fr=ar.indexOf(".",dr),fr===-1?hr=ar.substring(dr):hr=ar.substring(dr,fr),dr=fr+1;const pr=new LocalRelativeSidValueBlock;if(pr.valueDec=parseInt(hr,10),isNaN(pr.valueDec))return!0;this.value.push(pr)}while(fr!==-1);return!0}toString(){let ar="",dr=!1;for(let fr=0;fr<this.value.length;fr++){dr=this.value[fr].isHexOnly;let hr=this.value[fr].toString();fr!==0&&(ar=`${ar}.`),dr&&(hr=`{${hr}}`),ar+=hr}return ar}toJSON(){const ar={...super.toJSON(),value:this.toString(),sidArray:[]};for(let dr=0;dr<this.value.length;dr++)ar.sidArray.push(this.value[dr].toJSON());return ar}}LocalRelativeObjectIdentifierValueBlock.NAME="RelativeObjectIdentifierValueBlock";var _a$l;class RelativeObjectIdentifier extends BaseBlock{constructor(ar={}){super(ar,LocalRelativeObjectIdentifierValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(ar){this.valueBlock.fromString(ar)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$l=RelativeObjectIdentifier;typeStore.RelativeObjectIdentifier=_a$l;RelativeObjectIdentifier.NAME="RelativeObjectIdentifier";var _a$k;class Sequence extends Constructed{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}_a$k=Sequence;typeStore.Sequence=_a$k;Sequence.NAME="SEQUENCE";var _a$j;let Set$1=class extends Constructed{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};_a$j=Set$1;typeStore.Set=_a$j;Set$1.NAME="SET";class LocalStringValueBlock extends HexBlock(ValueBlock){constructor({...ar}={}){super(ar),this.isHexOnly=!0,this.value=EMPTY_STRING}toJSON(){return{...super.toJSON(),value:this.value}}}LocalStringValueBlock.NAME="StringValueBlock";class LocalSimpleStringValueBlock extends LocalStringValueBlock{}LocalSimpleStringValueBlock.NAME="SimpleStringValueBlock";class LocalSimpleStringBlock extends BaseStringBlock{constructor({...ar}={}){super(ar,LocalSimpleStringValueBlock)}fromBuffer(ar){this.valueBlock.value=String.fromCharCode.apply(null,BufferSourceConverter.toUint8Array(ar))}fromString(ar){const dr=ar.length,fr=this.valueBlock.valueHexView=new Uint8Array(dr);for(let hr=0;hr<dr;hr++)fr[hr]=ar.charCodeAt(hr);this.valueBlock.value=ar}}LocalSimpleStringBlock.NAME="SIMPLE STRING";class LocalUtf8StringValueBlock extends LocalSimpleStringBlock{fromBuffer(ar){this.valueBlock.valueHexView=BufferSourceConverter.toUint8Array(ar);try{this.valueBlock.value=Convert.ToUtf8String(ar)}catch(dr){this.warnings.push(`Error during "decodeURIComponent": ${dr}, using raw string`),this.valueBlock.value=Convert.ToBinary(ar)}}fromString(ar){this.valueBlock.valueHexView=new Uint8Array(Convert.FromUtf8String(ar)),this.valueBlock.value=ar}}LocalUtf8StringValueBlock.NAME="Utf8StringValueBlock";var _a$i;class Utf8String extends LocalUtf8StringValueBlock{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}_a$i=Utf8String;typeStore.Utf8String=_a$i;Utf8String.NAME="UTF8String";class LocalBmpStringValueBlock extends LocalSimpleStringBlock{fromBuffer(ar){this.valueBlock.value=Convert.ToUtf16String(ar),this.valueBlock.valueHexView=BufferSourceConverter.toUint8Array(ar)}fromString(ar){this.valueBlock.value=ar,this.valueBlock.valueHexView=new Uint8Array(Convert.FromUtf16String(ar))}}LocalBmpStringValueBlock.NAME="BmpStringValueBlock";var _a$h;class BmpString extends LocalBmpStringValueBlock{constructor({...ar}={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}_a$h=BmpString;typeStore.BmpString=_a$h;BmpString.NAME="BMPString";class LocalUniversalStringValueBlock extends LocalSimpleStringBlock{fromBuffer(ar){const dr=ArrayBuffer.isView(ar)?ar.slice().buffer:ar.slice(0),fr=new Uint8Array(dr);for(let hr=0;hr<fr.length;hr+=4)fr[hr]=fr[hr+3],fr[hr+1]=fr[hr+2],fr[hr+2]=0,fr[hr+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(dr))}fromString(ar){const dr=ar.length,fr=this.valueBlock.valueHexView=new Uint8Array(dr*4);for(let hr=0;hr<dr;hr++){const pr=utilToBase(ar.charCodeAt(hr),8),mr=new Uint8Array(pr);if(mr.length>4)continue;const gr=4-mr.length;for(let yr=mr.length-1;yr>=0;yr--)fr[hr*4+yr+gr]=mr[yr]}this.valueBlock.value=ar}}LocalUniversalStringValueBlock.NAME="UniversalStringValueBlock";var _a$g;class UniversalString extends LocalUniversalStringValueBlock{constructor({...ar}={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}_a$g=UniversalString;typeStore.UniversalString=_a$g;UniversalString.NAME="UniversalString";var _a$f;class NumericString extends LocalSimpleStringBlock{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}_a$f=NumericString;typeStore.NumericString=_a$f;NumericString.NAME="NumericString";var _a$e;class PrintableString extends LocalSimpleStringBlock{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}_a$e=PrintableString;typeStore.PrintableString=_a$e;PrintableString.NAME="PrintableString";var _a$d;class TeletexString extends LocalSimpleStringBlock{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}_a$d=TeletexString;typeStore.TeletexString=_a$d;TeletexString.NAME="TeletexString";var _a$c;class VideotexString extends LocalSimpleStringBlock{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}_a$c=VideotexString;typeStore.VideotexString=_a$c;VideotexString.NAME="VideotexString";var _a$b;class IA5String extends LocalSimpleStringBlock{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}_a$b=IA5String;typeStore.IA5String=_a$b;IA5String.NAME="IA5String";var _a$a;class GraphicString extends LocalSimpleStringBlock{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}_a$a=GraphicString;typeStore.GraphicString=_a$a;GraphicString.NAME="GraphicString";var _a$9;class VisibleString extends LocalSimpleStringBlock{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}_a$9=VisibleString;typeStore.VisibleString=_a$9;VisibleString.NAME="VisibleString";var _a$8;class GeneralString extends LocalSimpleStringBlock{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}_a$8=GeneralString;typeStore.GeneralString=_a$8;GeneralString.NAME="GeneralString";var _a$7;class CharacterString extends LocalSimpleStringBlock{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}_a$7=CharacterString;typeStore.CharacterString=_a$7;CharacterString.NAME="CharacterString";var _a$6;class UTCTime extends VisibleString{constructor({value:ar,valueDate:dr,...fr}={}){if(super(fr),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,ar){this.fromString(ar),this.valueBlock.valueHexView=new Uint8Array(ar.length);for(let hr=0;hr<ar.length;hr++)this.valueBlock.valueHexView[hr]=ar.charCodeAt(hr)}dr&&(this.fromDate(dr),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(ar){this.fromString(String.fromCharCode.apply(null,BufferSourceConverter.toUint8Array(ar)))}toBuffer(){const ar=this.toString(),dr=new ArrayBuffer(ar.length),fr=new Uint8Array(dr);for(let hr=0;hr<ar.length;hr++)fr[hr]=ar.charCodeAt(hr);return dr}fromDate(ar){this.year=ar.getUTCFullYear(),this.month=ar.getUTCMonth()+1,this.day=ar.getUTCDate(),this.hour=ar.getUTCHours(),this.minute=ar.getUTCMinutes(),this.second=ar.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(ar){const fr=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(ar);if(fr===null){this.error="Wrong input string for conversion";return}const hr=parseInt(fr[1],10);hr>=50?this.year=1900+hr:this.year=2e3+hr,this.month=parseInt(fr[2],10),this.day=parseInt(fr[3],10),this.hour=parseInt(fr[4],10),this.minute=parseInt(fr[5],10),this.second=parseInt(fr[6],10)}toString(ar="iso"){if(ar==="iso"){const dr=new Array(7);return dr[0]=padNumber(this.year<2e3?this.year-1900:this.year-2e3,2),dr[1]=padNumber(this.month,2),dr[2]=padNumber(this.day,2),dr[3]=padNumber(this.hour,2),dr[4]=padNumber(this.minute,2),dr[5]=padNumber(this.second,2),dr[6]="Z",dr.join("")}return super.toString(ar)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}_a$6=UTCTime;typeStore.UTCTime=_a$6;UTCTime.NAME="UTCTime";var _a$5;class GeneralizedTime extends UTCTime{constructor(ar={}){var dr;super(ar),(dr=this.millisecond)!==null&&dr!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(ar){super.fromDate(ar),this.millisecond=ar.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(ar){let dr=!1,fr="",hr="",pr=0,mr,gr=0,yr=0;if(ar[ar.length-1]==="Z")fr=ar.substring(0,ar.length-1),dr=!0;else{const br=new Number(ar[ar.length-1]);if(isNaN(br.valueOf()))throw new Error("Wrong input string for conversion");fr=ar}if(dr){if(fr.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(fr.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let br=1,Sr=fr.indexOf("+"),vr="";if(Sr===-1&&(Sr=fr.indexOf("-"),br=-1),Sr!==-1){if(vr=fr.substring(Sr+1),fr=fr.substring(0,Sr),vr.length!==2&&vr.length!==4)throw new Error("Wrong input string for conversion");let Er=parseInt(vr.substring(0,2),10);if(isNaN(Er.valueOf()))throw new Error("Wrong input string for conversion");if(gr=br*Er,vr.length===4){if(Er=parseInt(vr.substring(2,4),10),isNaN(Er.valueOf()))throw new Error("Wrong input string for conversion");yr=br*Er}}}let xr=fr.indexOf(".");if(xr===-1&&(xr=fr.indexOf(",")),xr!==-1){const br=new Number(`0${fr.substring(xr)}`);if(isNaN(br.valueOf()))throw new Error("Wrong input string for conversion");pr=br.valueOf(),hr=fr.substring(0,xr)}else hr=fr;switch(!0){case hr.length===8:if(mr=/(\d{4})(\d{2})(\d{2})/ig,xr!==-1)throw new Error("Wrong input string for conversion");break;case hr.length===10:if(mr=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,xr!==-1){let br=60*pr;this.minute=Math.floor(br),br=60*(br-this.minute),this.second=Math.floor(br),br=1e3*(br-this.second),this.millisecond=Math.floor(br)}break;case hr.length===12:if(mr=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,xr!==-1){let br=60*pr;this.second=Math.floor(br),br=1e3*(br-this.second),this.millisecond=Math.floor(br)}break;case hr.length===14:if(mr=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,xr!==-1){const br=1e3*pr;this.millisecond=Math.floor(br)}break;default:throw new Error("Wrong input string for conversion")}const wr=mr.exec(hr);if(wr===null)throw new Error("Wrong input string for conversion");for(let br=1;br<wr.length;br++)switch(br){case 1:this.year=parseInt(wr[br],10);break;case 2:this.month=parseInt(wr[br],10);break;case 3:this.day=parseInt(wr[br],10);break;case 4:this.hour=parseInt(wr[br],10)+gr;break;case 5:this.minute=parseInt(wr[br],10)+yr;break;case 6:this.second=parseInt(wr[br],10);break;default:throw new Error("Wrong input string for conversion")}if(dr===!1){const br=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=br.getUTCFullYear(),this.month=br.getUTCMonth(),this.day=br.getUTCDay(),this.hour=br.getUTCHours(),this.minute=br.getUTCMinutes(),this.second=br.getUTCSeconds(),this.millisecond=br.getUTCMilliseconds()}}toString(ar="iso"){if(ar==="iso"){const dr=[];return dr.push(padNumber(this.year,4)),dr.push(padNumber(this.month,2)),dr.push(padNumber(this.day,2)),dr.push(padNumber(this.hour,2)),dr.push(padNumber(this.minute,2)),dr.push(padNumber(this.second,2)),this.millisecond!==0&&(dr.push("."),dr.push(padNumber(this.millisecond,3))),dr.push("Z"),dr.join("")}return super.toString(ar)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}_a$5=GeneralizedTime;typeStore.GeneralizedTime=_a$5;GeneralizedTime.NAME="GeneralizedTime";var _a$4;class DATE extends Utf8String{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}_a$4=DATE;typeStore.DATE=_a$4;DATE.NAME="DATE";var _a$3;class TimeOfDay extends Utf8String{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}_a$3=TimeOfDay;typeStore.TimeOfDay=_a$3;TimeOfDay.NAME="TimeOfDay";var _a$2;class DateTime extends Utf8String{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}_a$2=DateTime;typeStore.DateTime=_a$2;DateTime.NAME="DateTime";var _a$1;class Duration extends Utf8String{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}_a$1=Duration;typeStore.Duration=_a$1;Duration.NAME="Duration";var _a;class TIME extends Utf8String{constructor(ar={}){super(ar),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}_a=TIME;typeStore.TIME=_a;TIME.NAME="TIME";function pkcs1ToJwk$1(cr){const{result:ar}=fromBER(cr),dr=ar.valueBlock.value;return{n:toString$2(bnToBuf(dr[1].toBigInt()),"base64url"),e:toString$2(bnToBuf(dr[2].toBigInt()),"base64url"),d:toString$2(bnToBuf(dr[3].toBigInt()),"base64url"),p:toString$2(bnToBuf(dr[4].toBigInt()),"base64url"),q:toString$2(bnToBuf(dr[5].toBigInt()),"base64url"),dp:toString$2(bnToBuf(dr[6].toBigInt()),"base64url"),dq:toString$2(bnToBuf(dr[7].toBigInt()),"base64url"),qi:toString$2(bnToBuf(dr[8].toBigInt()),"base64url"),kty:"RSA",alg:"RS256"}}function jwkToPkcs1$1(cr){if(cr.n==null||cr.e==null||cr.d==null||cr.p==null||cr.q==null||cr.dp==null||cr.dq==null||cr.qi==null)throw new CodeError$3("JWK was missing components","ERR_INVALID_PARAMETERS");const dr=new Sequence({value:[new Integer({value:0}),Integer.fromBigInt(bufToBn(fromString$1(cr.n,"base64url"))),Integer.fromBigInt(bufToBn(fromString$1(cr.e,"base64url"))),Integer.fromBigInt(bufToBn(fromString$1(cr.d,"base64url"))),Integer.fromBigInt(bufToBn(fromString$1(cr.p,"base64url"))),Integer.fromBigInt(bufToBn(fromString$1(cr.q,"base64url"))),Integer.fromBigInt(bufToBn(fromString$1(cr.dp,"base64url"))),Integer.fromBigInt(bufToBn(fromString$1(cr.dq,"base64url"))),Integer.fromBigInt(bufToBn(fromString$1(cr.qi,"base64url")))]}).toBER();return new Uint8Array(dr,0,dr.byteLength)}function pkixToJwk$1(cr){const{result:ar}=fromBER(cr),dr=ar.valueBlock.value[1].valueBlock.value[0].valueBlock.value;return{kty:"RSA",n:toString$2(bnToBuf(dr[0].toBigInt()),"base64url"),e:toString$2(bnToBuf(dr[1].toBigInt()),"base64url")}}function jwkToPkix$1(cr){if(cr.n==null||cr.e==null)throw new CodeError$3("JWK was missing components","ERR_INVALID_PARAMETERS");const dr=new Sequence({value:[new Sequence({value:[new ObjectIdentifier({value:"1.2.840.113549.1.1.1"}),new Null]}),new BitString({valueHex:new Sequence({value:[Integer.fromBigInt(bufToBn(fromString$1(cr.n,"base64url"))),Integer.fromBigInt(bufToBn(fromString$1(cr.e,"base64url")))]}).toBER()})]}).toBER();return new Uint8Array(dr,0,dr.byteLength)}function bnToBuf(cr){let ar=cr.toString(16);ar.length%2>0&&(ar=`0${ar}`);const dr=ar.length/2,fr=new Uint8Array(dr);let hr=0,pr=0;for(;hr<dr;)fr[hr]=parseInt(ar.slice(pr,pr+2),16),hr+=1,pr+=2;return fr}function bufToBn(cr){const ar=[];return cr.forEach(function(dr){let fr=dr.toString(16);fr.length%2>0&&(fr=`0${fr}`),ar.push(fr)}),BigInt("0x"+ar.join(""))}const SALT_LENGTH=16,KEY_SIZE=32,ITERATIONS=1e4;async function exportToPem(cr,ar){const dr=webcrypto$1.get(),hr=new Sequence({value:[new Integer({value:0}),new Sequence({value:[new ObjectIdentifier({value:"1.2.840.113549.1.1.1"}),new Null]}),new OctetString({valueHex:cr.marshal()})]}).toBER(),pr=new Uint8Array(hr,0,hr.byteLength),mr=randomBytes$1(SALT_LENGTH),gr=await pbkdf2Async(sha512$1,ar,mr,{c:ITERATIONS,dkLen:KEY_SIZE}),yr=randomBytes$1(16),xr=await dr.subtle.importKey("raw",gr,"AES-CBC",!1,["encrypt"]),wr=await dr.subtle.encrypt({name:"AES-CBC",iv:yr},xr,pr),br=new Sequence({value:[new OctetString({valueHex:mr}),new Integer({value:ITERATIONS}),new Integer({value:KEY_SIZE}),new Sequence({value:[new ObjectIdentifier({value:"1.2.840.113549.2.11"}),new Null]})]}),Sr=new Sequence({value:[new ObjectIdentifier({value:"1.2.840.113549.1.5.13"}),new Sequence({value:[new Sequence({value:[new ObjectIdentifier({value:"1.2.840.113549.1.5.12"}),br]}),new Sequence({value:[new ObjectIdentifier({value:"2.16.840.1.101.3.4.1.42"}),new OctetString({valueHex:yr})]})]})]}),Er=new Sequence({value:[Sr,new OctetString({valueHex:wr})]}).toBER(),Ar=new Uint8Array(Er,0,Er.byteLength);return["-----BEGIN ENCRYPTED PRIVATE KEY-----",...toString$2(Ar,"base64pad").split(/(.{64})/).filter(Boolean),"-----END ENCRYPTED PRIVATE KEY-----"].join(`
`)}async function generateKey$4(cr){const ar=await webcrypto$1.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:cr,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),dr=await exportKey$1(ar);return{privateKey:dr[0],publicKey:dr[1]}}async function unmarshalPrivateKey$3(cr){const dr=[await webcrypto$1.get().subtle.importKey("jwk",cr,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await derivePublicFromPrivate$1(cr)],fr=await exportKey$1({privateKey:dr[0],publicKey:dr[1]});return{privateKey:fr[0],publicKey:fr[1]}}async function hashAndSign$4(cr,ar){const dr=await webcrypto$1.get().subtle.importKey("jwk",cr,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),fr=await webcrypto$1.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},dr,ar instanceof Uint8Array?ar:ar.subarray());return new Uint8Array(fr,0,fr.byteLength)}async function hashAndVerify$4(cr,ar,dr){const fr=await webcrypto$1.get().subtle.importKey("jwk",cr,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return webcrypto$1.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},fr,ar,dr instanceof Uint8Array?dr:dr.subarray())}async function exportKey$1(cr){if(cr.privateKey==null||cr.publicKey==null)throw new CodeError$3("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([webcrypto$1.get().subtle.exportKey("jwk",cr.privateKey),webcrypto$1.get().subtle.exportKey("jwk",cr.publicKey)])}async function derivePublicFromPrivate$1(cr){return webcrypto$1.get().subtle.importKey("jwk",{kty:cr.kty,n:cr.n,e:cr.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function keySize$1(cr){if(cr.kty!=="RSA")throw new CodeError$3("invalid key type","ERR_INVALID_KEY_TYPE");if(cr.n==null)throw new CodeError$3("invalid key modulus","ERR_INVALID_KEY_MODULUS");return fromString$1(cr.n,"base64url").length*8}const MAX_RSA_KEY_SIZE=8192;let RsaPublicKey$1=class{_key;constructor(ar){this._key=ar}verify(ar,dr){return hashAndVerify$4(this._key,dr,ar)}marshal(){return jwkToPkix$1(this._key)}get bytes(){return PublicKey$1.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}equals(ar){return equals$1(this.bytes,ar.bytes)}hash(){const ar=sha256$2.digest(this.bytes);return isPromise$3(ar)?ar.then(({bytes:dr})=>dr):ar.bytes}},RsaPrivateKey$1=class{_key;_publicKey;constructor(ar,dr){this._key=ar,this._publicKey=dr}genSecret(){return randomBytes$1(16)}sign(ar){return hashAndSign$4(this._key,ar)}get public(){if(this._publicKey==null)throw new CodeError$3("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new RsaPublicKey$1(this._publicKey)}marshal(){return jwkToPkcs1$1(this._key)}get bytes(){return PrivateKey$1.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}equals(ar){return equals$1(this.bytes,ar.bytes)}hash(){const ar=sha256$2.digest(this.bytes);return isPromise$3(ar)?ar.then(({bytes:dr})=>dr):ar.bytes}async id(){const ar=await this.public.hash();return toString$2(ar,"base58btc")}async export(ar,dr="pkcs-8"){if(dr==="pkcs-8")return exportToPem(this,ar);if(dr==="libp2p-key")return exporter$1(this.bytes,ar);throw new CodeError$3(`export format '${dr}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};async function unmarshalRsaPrivateKey$1(cr){const ar=pkcs1ToJwk$1(cr);if(keySize$1(ar)>MAX_RSA_KEY_SIZE)throw new CodeError$3("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const dr=await unmarshalPrivateKey$3(ar);return new RsaPrivateKey$1(dr.privateKey,dr.publicKey)}function unmarshalRsaPublicKey$1(cr){const ar=pkixToJwk$1(cr);if(keySize$1(ar)>MAX_RSA_KEY_SIZE)throw new CodeError$3("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new RsaPublicKey$1(ar)}async function fromJwk$1(cr){if(keySize$1(cr)>MAX_RSA_KEY_SIZE)throw new CodeError$3("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const ar=await unmarshalPrivateKey$3(cr);return new RsaPrivateKey$1(ar.privateKey,ar.publicKey)}async function generateKeyPair$5(cr){if(cr>MAX_RSA_KEY_SIZE)throw new CodeError$3("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const ar=await generateKey$4(cr);return new RsaPrivateKey$1(ar.privateKey,ar.publicKey)}const RSA$1=Object.freeze(Object.defineProperty({__proto__:null,MAX_RSA_KEY_SIZE,RsaPrivateKey:RsaPrivateKey$1,RsaPublicKey:RsaPublicKey$1,fromJwk:fromJwk$1,generateKeyPair:generateKeyPair$5,unmarshalRsaPrivateKey:unmarshalRsaPrivateKey$1,unmarshalRsaPublicKey:unmarshalRsaPublicKey$1},Symbol.toStringTag,{value:"Module"}));function generateKey$3(){return secp256k1.utils.randomPrivateKey()}function hashAndSign$3(cr,ar){const dr=sha256$2.digest(ar instanceof Uint8Array?ar:ar.subarray());if(isPromise$3(dr))return dr.then(({digest:fr})=>secp256k1.sign(fr,cr).toDERRawBytes()).catch(fr=>{throw new CodeError$3(String(fr),"ERR_INVALID_INPUT")});try{return secp256k1.sign(dr.digest,cr).toDERRawBytes()}catch(fr){throw new CodeError$3(String(fr),"ERR_INVALID_INPUT")}}function hashAndVerify$3(cr,ar,dr){const fr=sha256$2.digest(dr instanceof Uint8Array?dr:dr.subarray());if(isPromise$3(fr))return fr.then(({digest:hr})=>secp256k1.verify(ar,hr,cr)).catch(hr=>{throw new CodeError$3(String(hr),"ERR_INVALID_INPUT")});try{return secp256k1.verify(ar,fr.digest,cr)}catch(hr){throw new CodeError$3(String(hr),"ERR_INVALID_INPUT")}}function compressPublicKey$1(cr){return secp256k1.ProjectivePoint.fromHex(cr).toRawBytes(!0)}function validatePrivateKey$1(cr){try{secp256k1.getPublicKey(cr,!0)}catch(ar){throw new CodeError$3(String(ar),"ERR_INVALID_PRIVATE_KEY")}}function validatePublicKey$1(cr){try{secp256k1.ProjectivePoint.fromHex(cr)}catch(ar){throw new CodeError$3(String(ar),"ERR_INVALID_PUBLIC_KEY")}}function computePublicKey$1(cr){try{return secp256k1.getPublicKey(cr,!0)}catch(ar){throw new CodeError$3(String(ar),"ERR_INVALID_PRIVATE_KEY")}}let Secp256k1PublicKey$1=class{_key;constructor(ar){validatePublicKey$1(ar),this._key=ar}verify(ar,dr){return hashAndVerify$3(this._key,dr,ar)}marshal(){return compressPublicKey$1(this._key)}get bytes(){return PublicKey$1.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(ar){return equals$1(this.bytes,ar.bytes)}async hash(){const ar=sha256$2.digest(this.bytes);let dr;return isPromise$3(ar)?{bytes:dr}=await ar:dr=ar.bytes,dr}},Secp256k1PrivateKey$1=class{_key;_publicKey;constructor(ar,dr){this._key=ar,this._publicKey=dr??computePublicKey$1(ar),validatePrivateKey$1(this._key),validatePublicKey$1(this._publicKey)}sign(ar){return hashAndSign$3(this._key,ar)}get public(){return new Secp256k1PublicKey$1(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey$1.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(ar){return equals$1(this.bytes,ar.bytes)}hash(){const ar=sha256$2.digest(this.bytes);return isPromise$3(ar)?ar.then(({bytes:dr})=>dr):ar.bytes}async id(){const ar=await this.public.hash();return toString$2(ar,"base58btc")}async export(ar,dr="libp2p-key"){if(dr==="libp2p-key")return exporter$1(this.bytes,ar);throw new CodeError$3(`export format '${dr}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function unmarshalSecp256k1PrivateKey$1(cr){return new Secp256k1PrivateKey$1(cr)}function unmarshalSecp256k1PublicKey$1(cr){return new Secp256k1PublicKey$1(cr)}async function generateKeyPair$4(){const cr=generateKey$3();return new Secp256k1PrivateKey$1(cr)}const Secp256k1$1=Object.freeze(Object.defineProperty({__proto__:null,Secp256k1PrivateKey:Secp256k1PrivateKey$1,Secp256k1PublicKey:Secp256k1PublicKey$1,generateKeyPair:generateKeyPair$4,unmarshalSecp256k1PrivateKey:unmarshalSecp256k1PrivateKey$1,unmarshalSecp256k1PublicKey:unmarshalSecp256k1PublicKey$1},Symbol.toStringTag,{value:"Module"})),supportedKeys$1={rsa:RSA$1,ed25519:Ed25519$1,secp256k1:Secp256k1$1};function unsupportedKey$1(cr){const ar=Object.keys(supportedKeys$1).join(" / ");return new CodeError$3(`invalid or unsupported key type ${cr}. Must be ${ar}`,"ERR_UNSUPPORTED_KEY_TYPE")}function typeToKey$1(cr){if(cr=cr.toLowerCase(),cr==="rsa"||cr==="ed25519"||cr==="secp256k1")return supportedKeys$1[cr];throw unsupportedKey$1(cr)}async function generateKeyPair$3(cr,ar){return typeToKey$1(cr).generateKeyPair(ar??2048)}function unmarshalPublicKey$1(cr){const ar=PublicKey$1.decode(cr),dr=ar.Data??new Uint8Array;switch(ar.Type){case KeyType$1.RSA:return supportedKeys$1.rsa.unmarshalRsaPublicKey(dr);case KeyType$1.Ed25519:return supportedKeys$1.ed25519.unmarshalEd25519PublicKey(dr);case KeyType$1.Secp256k1:return supportedKeys$1.secp256k1.unmarshalSecp256k1PublicKey(dr);default:throw unsupportedKey$1(ar.Type??"unknown")}}function marshalPublicKey$1(cr,ar){return ar=(ar??"rsa").toLowerCase(),typeToKey$1(ar),cr.bytes}async function unmarshalPrivateKey$2(cr){const ar=PrivateKey$1.decode(cr),dr=ar.Data??new Uint8Array;switch(ar.Type){case KeyType$1.RSA:return supportedKeys$1.rsa.unmarshalRsaPrivateKey(dr);case KeyType$1.Ed25519:return supportedKeys$1.ed25519.unmarshalEd25519PrivateKey(dr);case KeyType$1.Secp256k1:return supportedKeys$1.secp256k1.unmarshalSecp256k1PrivateKey(dr);default:throw unsupportedKey$1(ar.Type??"RSA")}}function marshalPrivateKey(cr,ar){return ar=(ar??"rsa").toLowerCase(),typeToKey$1(ar),cr.bytes}const inspect$1=Symbol.for("nodejs.util.inspect.custom"),baseDecoder=Object.values(bases$1).map(cr=>cr.decoder).reduce((cr,ar)=>cr.or(ar),bases$1.identity.decoder),LIBP2P_KEY_CODE=114,MARSHALLED_ED225519_PUBLIC_KEY_LENGTH=36,MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH=37;class PeerIdImpl{type;multihash;privateKey;publicKey;string;constructor(ar){this.type=ar.type,this.multihash=ar.multihash,this.privateKey=ar.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[peerIdSymbol]=!0;toString(){return this.string==null&&(this.string=base58btc$1.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return CID$1.createV1(LIBP2P_KEY_CODE,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(ar){if(ar==null)return!1;if(ar instanceof Uint8Array)return equals$1(this.multihash.bytes,ar);if(typeof ar=="string")return peerIdFromString(ar).equals(this);if(ar?.multihash?.bytes!=null)return equals$1(this.multihash.bytes,ar.multihash.bytes);throw new Error("not valid Id")}[inspect$1](){return`PeerId(${this.toString()})`}}class RSAPeerIdImpl extends PeerIdImpl{type="RSA";publicKey;constructor(ar){super({...ar,type:"RSA"}),this.publicKey=ar.publicKey}}class Ed25519PeerIdImpl extends PeerIdImpl{type="Ed25519";publicKey;constructor(ar){super({...ar,type:"Ed25519"}),this.publicKey=ar.multihash.digest}}class Secp256k1PeerIdImpl extends PeerIdImpl{type="secp256k1";publicKey;constructor(ar){super({...ar,type:"secp256k1"}),this.publicKey=ar.multihash.digest}}function peerIdFromPeerId(cr){if(cr.type==="RSA")return new RSAPeerIdImpl(cr);if(cr.type==="Ed25519")return new Ed25519PeerIdImpl(cr);if(cr.type==="secp256k1")return new Secp256k1PeerIdImpl(cr);throw new CodeError$3("Not a PeerId","ERR_INVALID_PARAMETERS")}function peerIdFromString(cr,ar){if(cr.charAt(0)==="1"||cr.charAt(0)==="Q"){const dr=decode$c(base58btc$1.decode(`z${cr}`));return cr.startsWith("12D")?new Ed25519PeerIdImpl({multihash:dr}):cr.startsWith("16U")?new Secp256k1PeerIdImpl({multihash:dr}):new RSAPeerIdImpl({multihash:dr})}return peerIdFromBytes(baseDecoder.decode(cr))}function peerIdFromBytes(cr){try{const ar=decode$c(cr);if(ar.code===identity$4.code){if(ar.digest.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH)return new Ed25519PeerIdImpl({multihash:ar});if(ar.digest.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH)return new Secp256k1PeerIdImpl({multihash:ar})}if(ar.code===sha256$2.code)return new RSAPeerIdImpl({multihash:ar})}catch{return peerIdFromCID(CID$1.decode(cr))}throw new Error("Supplied PeerID CID is invalid")}function peerIdFromCID(cr){if(cr==null||cr.multihash==null||cr.version==null||cr.version===1&&cr.code!==LIBP2P_KEY_CODE)throw new Error("Supplied PeerID CID is invalid");const ar=cr.multihash;if(ar.code===sha256$2.code)return new RSAPeerIdImpl({multihash:cr.multihash});if(ar.code===identity$4.code){if(ar.digest.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH)return new Ed25519PeerIdImpl({multihash:cr.multihash});if(ar.digest.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH)return new Secp256k1PeerIdImpl({multihash:cr.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function peerIdFromKeys(cr,ar){return cr.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH?new Ed25519PeerIdImpl({multihash:create$6(identity$4.code,cr),privateKey:ar}):cr.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH?new Secp256k1PeerIdImpl({multihash:create$6(identity$4.code,cr),privateKey:ar}):new RSAPeerIdImpl({multihash:await sha256$2.digest(cr),publicKey:cr,privateKey:ar})}var PeerIdProto;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.id!=null&&(fr.uint32(10),fr.bytes(dr.id)),dr.pubKey!=null&&(fr.uint32(18),fr.bytes(dr.pubKey)),dr.privKey!=null&&(fr.uint32(26),fr.bytes(dr.privKey)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.id=dr.bytes();break;case 2:hr.pubKey=dr.bytes();break;case 3:hr.privKey=dr.bytes();break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(PeerIdProto||(PeerIdProto={}));const createEd25519PeerId=async()=>{const cr=await generateKeyPair$3("Ed25519"),ar=await createFromPrivKey(cr);if(ar.type==="Ed25519")return ar;throw new Error(`Generated unexpected PeerId type "${ar.type}"`)};async function createFromPubKey(cr){return peerIdFromKeys(marshalPublicKey$1(cr))}async function createFromPrivKey(cr){return peerIdFromKeys(marshalPublicKey$1(cr.public),marshalPrivateKey(cr))}function exportToProtobuf(cr,ar){return PeerIdProto.encode({id:cr.multihash.bytes,pubKey:cr.publicKey,privKey:ar===!0||cr.privateKey==null?void 0:cr.privateKey})}async function createFromProtobuf(cr){const{id:ar,privKey:dr,pubKey:fr}=PeerIdProto.decode(cr);return createFromParts(ar??new Uint8Array(0),dr,fr)}async function createFromParts(cr,ar,dr){if(ar!=null){const fr=await unmarshalPrivateKey$2(ar);return createFromPrivKey(fr)}else if(dr!=null){const fr=unmarshalPublicKey$1(dr);return createFromPubKey(fr)}return peerIdFromBytes(cr)}function mapIterable(cr,ar){const dr={[Symbol.iterator]:()=>dr,next:()=>{const fr=cr.next(),hr=fr.value;return fr.done===!0||hr==null?{done:!0,value:void 0}:{done:!1,value:ar(hr)}}};return dr}class PeerMap{map;constructor(ar){if(this.map=new Map,ar!=null)for(const[dr,fr]of ar.entries())this.map.set(dr.toString(),fr)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(ar){return this.map.delete(ar.toString())}entries(){return mapIterable(this.map.entries(),ar=>[peerIdFromString(ar[0]),ar[1]])}forEach(ar){this.map.forEach((dr,fr)=>{ar(dr,peerIdFromString(fr),this)})}get(ar){return this.map.get(ar.toString())}has(ar){return this.map.has(ar.toString())}set(ar,dr){this.map.set(ar.toString(),dr)}keys(){return mapIterable(this.map.keys(),ar=>peerIdFromString(ar))}values(){return this.map.values()}get size(){return this.map.size}}class PeerSet{set;constructor(ar){if(this.set=new Set,ar!=null)for(const dr of ar)this.set.add(dr.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(ar){this.set.add(ar.toString())}clear(){this.set.clear()}delete(ar){this.set.delete(ar.toString())}entries(){return mapIterable(this.set.entries(),ar=>{const dr=peerIdFromString(ar[0]);return[dr,dr]})}forEach(ar){this.set.forEach(dr=>{const fr=peerIdFromString(dr);ar(fr,fr,this)})}has(ar){return this.set.has(ar.toString())}values(){return mapIterable(this.set.values(),ar=>peerIdFromString(ar))}intersection(ar){const dr=new PeerSet;for(const fr of ar)this.has(fr)&&dr.add(fr);return dr}difference(ar){const dr=new PeerSet;for(const fr of this)ar.has(fr)||dr.add(fr);return dr}union(ar){const dr=new PeerSet;for(const fr of ar)dr.add(fr);for(const fr of this)dr.add(fr);return dr}}const N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),MSB$1=128,REST$1=127;function encodingLength(cr){if(cr<N1)return 1;if(cr<N2)return 2;if(cr<N3)return 3;if(cr<N4)return 4;if(cr<N5)return 5;if(cr<N6)return 6;if(cr<N7)return 7;if(Number.MAX_SAFE_INTEGER!=null&&cr>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function encodeUint8Array(cr,ar,dr=0){switch(encodingLength(cr)){case 8:ar[dr++]=cr&255|MSB$1,cr/=128;case 7:ar[dr++]=cr&255|MSB$1,cr/=128;case 6:ar[dr++]=cr&255|MSB$1,cr/=128;case 5:ar[dr++]=cr&255|MSB$1,cr/=128;case 4:ar[dr++]=cr&255|MSB$1,cr>>>=7;case 3:ar[dr++]=cr&255|MSB$1,cr>>>=7;case 2:ar[dr++]=cr&255|MSB$1,cr>>>=7;case 1:{ar[dr++]=cr&255,cr>>>=7;break}default:throw new Error("unreachable")}return ar}function encodeUint8ArrayList(cr,ar,dr=0){switch(encodingLength(cr)){case 8:ar.set(dr++,cr&255|MSB$1),cr/=128;case 7:ar.set(dr++,cr&255|MSB$1),cr/=128;case 6:ar.set(dr++,cr&255|MSB$1),cr/=128;case 5:ar.set(dr++,cr&255|MSB$1),cr/=128;case 4:ar.set(dr++,cr&255|MSB$1),cr>>>=7;case 3:ar.set(dr++,cr&255|MSB$1),cr>>>=7;case 2:ar.set(dr++,cr&255|MSB$1),cr>>>=7;case 1:{ar.set(dr++,cr&255),cr>>>=7;break}default:throw new Error("unreachable")}return ar}function decodeUint8Array(cr,ar){let dr=cr[ar],fr=0;if(fr+=dr&REST$1,dr<MSB$1||(dr=cr[ar+1],fr+=(dr&REST$1)<<7,dr<MSB$1)||(dr=cr[ar+2],fr+=(dr&REST$1)<<14,dr<MSB$1)||(dr=cr[ar+3],fr+=(dr&REST$1)<<21,dr<MSB$1)||(dr=cr[ar+4],fr+=(dr&REST$1)*N4,dr<MSB$1)||(dr=cr[ar+5],fr+=(dr&REST$1)*N5,dr<MSB$1)||(dr=cr[ar+6],fr+=(dr&REST$1)*N6,dr<MSB$1)||(dr=cr[ar+7],fr+=(dr&REST$1)*N7,dr<MSB$1))return fr;throw new RangeError("Could not decode varint")}function decodeUint8ArrayList(cr,ar){let dr=cr.get(ar),fr=0;if(fr+=dr&REST$1,dr<MSB$1||(dr=cr.get(ar+1),fr+=(dr&REST$1)<<7,dr<MSB$1)||(dr=cr.get(ar+2),fr+=(dr&REST$1)<<14,dr<MSB$1)||(dr=cr.get(ar+3),fr+=(dr&REST$1)<<21,dr<MSB$1)||(dr=cr.get(ar+4),fr+=(dr&REST$1)*N4,dr<MSB$1)||(dr=cr.get(ar+5),fr+=(dr&REST$1)*N5,dr<MSB$1)||(dr=cr.get(ar+6),fr+=(dr&REST$1)*N6,dr<MSB$1)||(dr=cr.get(ar+7),fr+=(dr&REST$1)*N7,dr<MSB$1))return fr;throw new RangeError("Could not decode varint")}function encode$2(cr,ar,dr=0){return ar==null&&(ar=allocUnsafe(encodingLength(cr))),ar instanceof Uint8Array?encodeUint8Array(cr,ar,dr):encodeUint8ArrayList(cr,ar,dr)}function decode$1(cr,ar=0){return cr instanceof Uint8Array?decodeUint8Array(cr,ar):decodeUint8ArrayList(cr,ar)}function concat(cr,ar){if(globalThis.Buffer!=null)return asUint8Array(globalThis.Buffer.concat(cr,ar));ar==null&&(ar=cr.reduce((hr,pr)=>hr+pr.length,0));const dr=allocUnsafe(ar);let fr=0;for(const hr of cr)dr.set(hr,fr),fr+=hr.length;return asUint8Array(dr)}function equals(cr,ar){if(cr===ar)return!0;if(cr.byteLength!==ar.byteLength)return!1;for(let dr=0;dr<cr.byteLength;dr++)if(cr[dr]!==ar[dr])return!1;return!0}const symbol$1=Symbol.for("@achingbrain/uint8arraylist");function findBufAndOffset(cr,ar){if(ar==null||ar<0)throw new RangeError("index is out of bounds");let dr=0;for(const fr of cr){const hr=dr+fr.byteLength;if(ar<hr)return{buf:fr,index:ar-dr};dr=hr}throw new RangeError("index is out of bounds")}function isUint8ArrayList(cr){return!!cr?.[symbol$1]}class Uint8ArrayList{bufs;length;[symbol$1]=!0;constructor(...ar){this.bufs=[],this.length=0,ar.length>0&&this.appendAll(ar)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...ar){this.appendAll(ar)}appendAll(ar){let dr=0;for(const fr of ar)if(fr instanceof Uint8Array)dr+=fr.byteLength,this.bufs.push(fr);else if(isUint8ArrayList(fr))dr+=fr.byteLength,this.bufs.push(...fr.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=dr}prepend(...ar){this.prependAll(ar)}prependAll(ar){let dr=0;for(const fr of ar.reverse())if(fr instanceof Uint8Array)dr+=fr.byteLength,this.bufs.unshift(fr);else if(isUint8ArrayList(fr))dr+=fr.byteLength,this.bufs.unshift(...fr.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=dr}get(ar){const dr=findBufAndOffset(this.bufs,ar);return dr.buf[dr.index]}set(ar,dr){const fr=findBufAndOffset(this.bufs,ar);fr.buf[fr.index]=dr}write(ar,dr=0){if(ar instanceof Uint8Array)for(let fr=0;fr<ar.length;fr++)this.set(dr+fr,ar[fr]);else if(isUint8ArrayList(ar))for(let fr=0;fr<ar.length;fr++)this.set(dr+fr,ar.get(fr));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(ar){if(ar=Math.trunc(ar),!(Number.isNaN(ar)||ar<=0)){if(ar===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(ar>=this.bufs[0].byteLength)ar-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(ar),this.length-=ar;break}}}slice(ar,dr){const{bufs:fr,length:hr}=this._subList(ar,dr);return concat(fr,hr)}subarray(ar,dr){const{bufs:fr,length:hr}=this._subList(ar,dr);return fr.length===1?fr[0]:concat(fr,hr)}sublist(ar,dr){const{bufs:fr,length:hr}=this._subList(ar,dr),pr=new Uint8ArrayList;return pr.length=hr,pr.bufs=[...fr],pr}_subList(ar,dr){if(ar=ar??0,dr=dr??this.length,ar<0&&(ar=this.length+ar),dr<0&&(dr=this.length+dr),ar<0||dr>this.length)throw new RangeError("index is out of bounds");if(ar===dr)return{bufs:[],length:0};if(ar===0&&dr===this.length)return{bufs:this.bufs,length:this.length};const fr=[];let hr=0;for(let pr=0;pr<this.bufs.length;pr++){const mr=this.bufs[pr],gr=hr,yr=gr+mr.byteLength;if(hr=yr,ar>=yr)continue;const xr=ar>=gr&&ar<yr,wr=dr>gr&&dr<=yr;if(xr&&wr){if(ar===gr&&dr===yr){fr.push(mr);break}const br=ar-gr;fr.push(mr.subarray(br,br+(dr-ar)));break}if(xr){if(ar===0){fr.push(mr);continue}fr.push(mr.subarray(ar-gr));continue}if(wr){if(dr===yr){fr.push(mr);break}fr.push(mr.subarray(0,dr-gr));break}fr.push(mr)}return{bufs:fr,length:dr-ar}}indexOf(ar,dr=0){if(!isUint8ArrayList(ar)&&!(ar instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const fr=ar instanceof Uint8Array?ar:ar.subarray();if(dr=Number(dr??0),isNaN(dr)&&(dr=0),dr<0&&(dr=this.length+dr),dr<0&&(dr=0),ar.length===0)return dr>this.length?this.length:dr;const hr=fr.byteLength;if(hr===0)throw new TypeError("search must be at least 1 byte long");const pr=256,mr=new Int32Array(pr);for(let br=0;br<pr;br++)mr[br]=-1;for(let br=0;br<hr;br++)mr[fr[br]]=br;const gr=mr,yr=this.byteLength-fr.byteLength,xr=fr.byteLength-1;let wr;for(let br=dr;br<=yr;br+=wr){wr=0;for(let Sr=xr;Sr>=0;Sr--){const vr=this.get(br+Sr);if(fr[Sr]!==vr){wr=Math.max(1,Sr-gr[vr]);break}}if(wr===0)return br}return-1}getInt8(ar){const dr=this.subarray(ar,ar+1);return new DataView(dr.buffer,dr.byteOffset,dr.byteLength).getInt8(0)}setInt8(ar,dr){const fr=allocUnsafe(1);new DataView(fr.buffer,fr.byteOffset,fr.byteLength).setInt8(0,dr),this.write(fr,ar)}getInt16(ar,dr){const fr=this.subarray(ar,ar+2);return new DataView(fr.buffer,fr.byteOffset,fr.byteLength).getInt16(0,dr)}setInt16(ar,dr,fr){const hr=alloc$1(2);new DataView(hr.buffer,hr.byteOffset,hr.byteLength).setInt16(0,dr,fr),this.write(hr,ar)}getInt32(ar,dr){const fr=this.subarray(ar,ar+4);return new DataView(fr.buffer,fr.byteOffset,fr.byteLength).getInt32(0,dr)}setInt32(ar,dr,fr){const hr=alloc$1(4);new DataView(hr.buffer,hr.byteOffset,hr.byteLength).setInt32(0,dr,fr),this.write(hr,ar)}getBigInt64(ar,dr){const fr=this.subarray(ar,ar+8);return new DataView(fr.buffer,fr.byteOffset,fr.byteLength).getBigInt64(0,dr)}setBigInt64(ar,dr,fr){const hr=alloc$1(8);new DataView(hr.buffer,hr.byteOffset,hr.byteLength).setBigInt64(0,dr,fr),this.write(hr,ar)}getUint8(ar){const dr=this.subarray(ar,ar+1);return new DataView(dr.buffer,dr.byteOffset,dr.byteLength).getUint8(0)}setUint8(ar,dr){const fr=allocUnsafe(1);new DataView(fr.buffer,fr.byteOffset,fr.byteLength).setUint8(0,dr),this.write(fr,ar)}getUint16(ar,dr){const fr=this.subarray(ar,ar+2);return new DataView(fr.buffer,fr.byteOffset,fr.byteLength).getUint16(0,dr)}setUint16(ar,dr,fr){const hr=alloc$1(2);new DataView(hr.buffer,hr.byteOffset,hr.byteLength).setUint16(0,dr,fr),this.write(hr,ar)}getUint32(ar,dr){const fr=this.subarray(ar,ar+4);return new DataView(fr.buffer,fr.byteOffset,fr.byteLength).getUint32(0,dr)}setUint32(ar,dr,fr){const hr=alloc$1(4);new DataView(hr.buffer,hr.byteOffset,hr.byteLength).setUint32(0,dr,fr),this.write(hr,ar)}getBigUint64(ar,dr){const fr=this.subarray(ar,ar+8);return new DataView(fr.buffer,fr.byteOffset,fr.byteLength).getBigUint64(0,dr)}setBigUint64(ar,dr,fr){const hr=alloc$1(8);new DataView(hr.buffer,hr.byteOffset,hr.byteLength).setBigUint64(0,dr,fr),this.write(hr,ar)}getFloat32(ar,dr){const fr=this.subarray(ar,ar+4);return new DataView(fr.buffer,fr.byteOffset,fr.byteLength).getFloat32(0,dr)}setFloat32(ar,dr,fr){const hr=alloc$1(4);new DataView(hr.buffer,hr.byteOffset,hr.byteLength).setFloat32(0,dr,fr),this.write(hr,ar)}getFloat64(ar,dr){const fr=this.subarray(ar,ar+8);return new DataView(fr.buffer,fr.byteOffset,fr.byteLength).getFloat64(0,dr)}setFloat64(ar,dr,fr){const hr=alloc$1(8);new DataView(hr.buffer,hr.byteOffset,hr.byteLength).setFloat64(0,dr,fr),this.write(hr,ar)}equals(ar){if(ar==null||!(ar instanceof Uint8ArrayList)||ar.bufs.length!==this.bufs.length)return!1;for(let dr=0;dr<this.bufs.length;dr++)if(!equals(this.bufs[dr],ar.bufs[dr]))return!1;return!0}static fromUint8Arrays(ar,dr){const fr=new Uint8ArrayList;return fr.bufs=ar,dr==null&&(dr=ar.reduce((hr,pr)=>hr+pr.byteLength,0)),fr.length=dr,fr}}const codes$4={ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"};var Envelope;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.publicKey!=null&&dr.publicKey.byteLength>0&&(fr.uint32(10),fr.bytes(dr.publicKey)),dr.payloadType!=null&&dr.payloadType.byteLength>0&&(fr.uint32(18),fr.bytes(dr.payloadType)),dr.payload!=null&&dr.payload.byteLength>0&&(fr.uint32(26),fr.bytes(dr.payload)),dr.signature!=null&&dr.signature.byteLength>0&&(fr.uint32(42),fr.bytes(dr.signature)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.publicKey=dr.bytes();break;case 2:hr.payloadType=dr.bytes();break;case 3:hr.payload=dr.bytes();break;case 5:hr.signature=dr.bytes();break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(Envelope||(Envelope={}));class RecordEnvelope{static createFromProtobuf=async ar=>{const dr=Envelope.decode(ar),fr=await peerIdFromKeys(dr.publicKey);return new RecordEnvelope({peerId:fr,payloadType:dr.payloadType,payload:dr.payload,signature:dr.signature})};static seal=async(ar,dr)=>{if(dr.privateKey==null)throw new Error("Missing private key");const fr=ar.domain,hr=ar.codec,pr=ar.marshal(),mr=formatSignaturePayload(fr,hr,pr),yr=await(await unmarshalPrivateKey$2(dr.privateKey)).sign(mr.subarray());return new RecordEnvelope({peerId:dr,payloadType:hr,payload:pr,signature:yr})};static openAndCertify=async(ar,dr)=>{const fr=await RecordEnvelope.createFromProtobuf(ar);if(!await fr.validate(dr))throw new CodeError$3("envelope signature is not valid for the given domain",codes$4.ERR_SIGNATURE_NOT_VALID);return fr};peerId;payloadType;payload;signature;marshaled;constructor(ar){const{peerId:dr,payloadType:fr,payload:hr,signature:pr}=ar;this.peerId=dr,this.payloadType=fr,this.payload=hr,this.signature=pr}marshal(){if(this.peerId.publicKey==null)throw new Error("Missing public key");return this.marshaled==null&&(this.marshaled=Envelope.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(ar){return equals$1(this.marshal(),ar.marshal())}async validate(ar){const dr=formatSignaturePayload(ar,this.payloadType,this.payload);if(this.peerId.publicKey==null)throw new Error("Missing public key");return unmarshalPublicKey$1(this.peerId.publicKey).verify(dr.subarray(),this.signature)}}const formatSignaturePayload=(cr,ar,dr)=>{const fr=fromString$1(cr),hr=encode$2(fr.byteLength),pr=encode$2(ar.length),mr=encode$2(dr.length);return new Uint8ArrayList(hr,fr,pr,ar,mr,dr)};function arrayEquals(cr,ar){const dr=(fr,hr)=>fr.toString().localeCompare(hr.toString());return cr.length!==ar.length?!1:(ar.sort(dr),cr.sort(dr).every((fr,hr)=>ar[hr].equals(fr)))}var TopicValidatorResult;(function(cr){cr.Accept="accept",cr.Ignore="ignore",cr.Reject="reject"})(TopicValidatorResult||(TopicValidatorResult={}));var FaultTolerance;(function(cr){cr[cr.FATAL_ALL=0]="FATAL_ALL",cr[cr.NO_FATAL=1]="NO_FATAL"})(FaultTolerance||(FaultTolerance={}));let CodeError$2=class extends Error{code;props;constructor(ar,dr,fr){super(ar),this.code=dr,this.name=fr?.name??"CodeError",this.props=fr??{}}};function toString$1(cr,ar="utf8"){const dr=BASES[ar];if(dr==null)throw new Error(`Unsupported encoding "${ar}"`);return(ar==="utf8"||ar==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(cr.buffer,cr.byteOffset,cr.byteLength).toString("utf8"):dr.encoder.encode(cr).substring(1)}class Parser{index=0;input="";new(ar){return this.index=0,this.input=ar,this}readAtomically(ar){const dr=this.index,fr=ar();return fr===void 0&&(this.index=dr),fr}parseWith(ar){const dr=ar();if(this.index===this.input.length)return dr}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(ar){return this.readAtomically(()=>{const dr=this.readChar();if(dr===ar)return dr})}readSeparator(ar,dr,fr){return this.readAtomically(()=>{if(!(dr>0&&this.readGivenChar(ar)===void 0))return fr()})}readNumber(ar,dr,fr,hr){return this.readAtomically(()=>{let pr=0,mr=0;const gr=this.peekChar();if(gr===void 0)return;const yr=gr==="0",xr=2**(8*hr)-1;for(;;){const wr=this.readAtomically(()=>{const br=this.readChar();if(br===void 0)return;const Sr=Number.parseInt(br,ar);if(!Number.isNaN(Sr))return Sr});if(wr===void 0)break;if(pr*=ar,pr+=wr,pr>xr||(mr+=1,dr!==void 0&&mr>dr))return}if(mr!==0)return!fr&&yr&&mr>1?void 0:pr})}readIPv4Addr(){return this.readAtomically(()=>{const ar=new Uint8Array(4);for(let dr=0;dr<ar.length;dr++){const fr=this.readSeparator(".",dr,()=>this.readNumber(10,3,!1,1));if(fr===void 0)return;ar[dr]=fr}return ar})}readIPv6Addr(){const ar=dr=>{for(let fr=0;fr<dr.length/2;fr++){const hr=fr*2;if(fr<dr.length-3){const mr=this.readSeparator(":",fr,()=>this.readIPv4Addr());if(mr!==void 0)return dr[hr]=mr[0],dr[hr+1]=mr[1],dr[hr+2]=mr[2],dr[hr+3]=mr[3],[hr+4,!0]}const pr=this.readSeparator(":",fr,()=>this.readNumber(16,4,!0,2));if(pr===void 0)return[hr,!1];dr[hr]=pr>>8,dr[hr+1]=pr&255}return[dr.length,!1]};return this.readAtomically(()=>{const dr=new Uint8Array(16),[fr,hr]=ar(dr);if(fr===16)return dr;if(hr||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const pr=new Uint8Array(14),mr=16-(fr+2),[gr]=ar(pr.subarray(0,mr));return dr.set(pr.subarray(0,gr),16-gr),dr})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const MAX_IPV6_LENGTH=45,MAX_IPV4_LENGTH=15,parser$1=new Parser;function parseIPv4(cr){if(!(cr.length>MAX_IPV4_LENGTH))return parser$1.new(cr).parseWith(()=>parser$1.readIPv4Addr())}function parseIPv6(cr){if(cr.includes("%")&&(cr=cr.split("%")[0]),!(cr.length>MAX_IPV6_LENGTH))return parser$1.new(cr).parseWith(()=>parser$1.readIPv6Addr())}function parseIP(cr){if(cr.includes("%")&&(cr=cr.split("%")[0]),!(cr.length>MAX_IPV6_LENGTH))return parser$1.new(cr).parseWith(()=>parser$1.readIPAddr())}function isIPv4(cr){return!!parseIPv4(cr)}function isIPv6(cr){return!!parseIPv6(cr)}function isIP(cr){return!!parseIP(cr)}const isV4=isIPv4,isV6=isIPv6,toBytes$1=function(cr){let ar=0;if(cr=cr.toString().trim(),isV4(cr)){const dr=new Uint8Array(ar+4);return cr.split(/\./g).forEach(fr=>{dr[ar++]=parseInt(fr,10)&255}),dr}if(isV6(cr)){const dr=cr.split(":",8);let fr;for(fr=0;fr<dr.length;fr++){const pr=isV4(dr[fr]);let mr;pr&&(mr=toBytes$1(dr[fr]),dr[fr]=toString$1(mr.slice(0,2),"base16")),mr!=null&&++fr<8&&dr.splice(fr,0,toString$1(mr.slice(2,4),"base16"))}if(dr[0]==="")for(;dr.length<8;)dr.unshift("0");else if(dr[dr.length-1]==="")for(;dr.length<8;)dr.push("0");else if(dr.length<8){for(fr=0;fr<dr.length&&dr[fr]!=="";fr++);const pr=[fr,1];for(fr=9-dr.length;fr>0;fr--)pr.push("0");dr.splice.apply(dr,pr)}const hr=new Uint8Array(ar+16);for(fr=0;fr<dr.length;fr++){const pr=parseInt(dr[fr],16);hr[ar++]=pr>>8&255,hr[ar++]=pr&255}return hr}throw new Error("invalid ip address")},toString=function(cr,ar=0,dr){ar=~~ar,dr=dr??cr.length-ar;const fr=new DataView(cr.buffer);if(dr===4){const hr=[];for(let pr=0;pr<dr;pr++)hr.push(cr[ar+pr]);return hr.join(".")}if(dr===16){const hr=[];for(let pr=0;pr<dr;pr+=2)hr.push(fr.getUint16(ar+pr).toString(16));return hr.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},V=-1,names={},codes$3={},table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V,"ip6zone"],[43,8,"ipcidr"],[53,V,"dns",!0],[54,V,"dns4",!0],[55,V,"dns6",!0],[56,V,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V,"unix",!1,!0],[421,V,"ipfs"],[421,V,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V,"garlic64"],[448,0,"tls"],[449,V,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,V,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,V,"memory"]];table.forEach(cr=>{const ar=createProtocol(...cr);codes$3[ar.code]=ar,names[ar.name]=ar});function createProtocol(cr,ar,dr,fr,hr){return{code:cr,size:ar,name:dr,resolvable:!!fr,path:!!hr}}function getProtocol(cr){if(typeof cr=="number"){if(codes$3[cr]!=null)return codes$3[cr];throw new Error(`no protocol with code: ${cr}`)}else if(typeof cr=="string"){if(names[cr]!=null)return names[cr];throw new Error(`no protocol with name: ${cr}`)}throw new Error(`invalid protocol id type: ${typeof cr}`)}getProtocol("ip4");getProtocol("ip6");getProtocol("ipcidr");function convertToString(cr,ar){switch(getProtocol(cr).code){case 4:case 41:return bytes2ip(ar);case 42:return bytes2str(ar);case 6:case 273:case 33:case 132:return bytes2port(ar).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return bytes2str(ar);case 421:return bytes2mh(ar);case 444:return bytes2onion(ar);case 445:return bytes2onion(ar);case 466:return bytes2mb(ar);default:return toString$1(ar,"base16")}}function convertToBytes(cr,ar){switch(getProtocol(cr).code){case 4:return ip2bytes(ar);case 41:return ip2bytes(ar);case 42:return str2bytes(ar);case 6:case 273:case 33:case 132:return port2bytes(parseInt(ar,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return str2bytes(ar);case 421:return mh2bytes(ar);case 444:return onion2bytes(ar);case 445:return onion32bytes(ar);case 466:return mb2bytes(ar);default:return fromString(ar,"base16")}}const decoders=Object.values(bases).map(cr=>cr.decoder),anybaseDecoder=function(){let cr=decoders[0].or(decoders[1]);return decoders.slice(2).forEach(ar=>cr=cr.or(ar)),cr}();function ip2bytes(cr){if(!isIP(cr))throw new Error("invalid ip address");return toBytes$1(cr)}function bytes2ip(cr){const ar=toString(cr,0,cr.length);if(ar==null)throw new Error("ipBuff is required");if(!isIP(ar))throw new Error("invalid ip address");return ar}function port2bytes(cr){const ar=new ArrayBuffer(2);return new DataView(ar).setUint16(0,cr),new Uint8Array(ar)}function bytes2port(cr){return new DataView(cr.buffer).getUint16(cr.byteOffset)}function str2bytes(cr){const ar=fromString(cr),dr=Uint8Array.from(encode$2(ar.length));return concat([dr,ar],dr.length+ar.length)}function bytes2str(cr){const ar=decode$1(cr);if(cr=cr.slice(encodingLength(ar)),cr.length!==ar)throw new Error("inconsistent lengths");return toString$1(cr)}function mh2bytes(cr){let ar;cr[0]==="Q"||cr[0]==="1"?ar=decode$7(base58btc.decode(`z${cr}`)).bytes:ar=CID.parse(cr).multihash.bytes;const dr=Uint8Array.from(encode$2(ar.length));return concat([dr,ar],dr.length+ar.length)}function mb2bytes(cr){const ar=anybaseDecoder.decode(cr),dr=Uint8Array.from(encode$2(ar.length));return concat([dr,ar],dr.length+ar.length)}function bytes2mb(cr){const ar=decode$1(cr),dr=cr.slice(encodingLength(ar));if(dr.length!==ar)throw new Error("inconsistent lengths");return"u"+toString$1(dr,"base64url")}function bytes2mh(cr){const ar=decode$1(cr),dr=cr.slice(encodingLength(ar));if(dr.length!==ar)throw new Error("inconsistent lengths");return toString$1(dr,"base58btc")}function onion2bytes(cr){const ar=cr.split(":");if(ar.length!==2)throw new Error(`failed to parse onion addr: ["'${ar.join('", "')}'"]' does not contain a port number`);if(ar[0].length!==16)throw new Error(`failed to parse onion addr: ${ar[0]} not a Tor onion address.`);const dr=base32.decode("b"+ar[0]),fr=parseInt(ar[1],10);if(fr<1||fr>65536)throw new Error("Port number is not in range(1, 65536)");const hr=port2bytes(fr);return concat([dr,hr],dr.length+hr.length)}function onion32bytes(cr){const ar=cr.split(":");if(ar.length!==2)throw new Error(`failed to parse onion addr: ["'${ar.join('", "')}'"]' does not contain a port number`);if(ar[0].length!==56)throw new Error(`failed to parse onion addr: ${ar[0]} not a Tor onion3 address.`);const dr=base32.decode(`b${ar[0]}`),fr=parseInt(ar[1],10);if(fr<1||fr>65536)throw new Error("Port number is not in range(1, 65536)");const hr=port2bytes(fr);return concat([dr,hr],dr.length+hr.length)}function bytes2onion(cr){const ar=cr.slice(0,cr.length-2),dr=cr.slice(cr.length-2),fr=toString$1(ar,"base32"),hr=bytes2port(dr);return`${fr}:${hr}`}function stringToMultiaddrParts(cr){cr=cleanPath(cr);const ar=[],dr=[];let fr=null;const hr=cr.split("/").slice(1);if(hr.length===1&&hr[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let pr=0;pr<hr.length;pr++){const mr=hr[pr],gr=getProtocol(mr);if(gr.size===0){ar.push([gr.code]),dr.push([gr.code]);continue}if(pr++,pr>=hr.length)throw ParseError("invalid address: "+cr);if(gr.path===!0){fr=cleanPath(hr.slice(pr).join("/")),ar.push([gr.code,convertToBytes(gr.code,fr)]),dr.push([gr.code,fr]);break}const yr=convertToBytes(gr.code,hr[pr]);ar.push([gr.code,yr]),dr.push([gr.code,convertToString(gr.code,yr)])}return{string:stringTuplesToString(dr),bytes:tuplesToBytes(ar),tuples:ar,stringTuples:dr,path:fr}}function bytesToMultiaddrParts(cr){const ar=[],dr=[];let fr=null,hr=0;for(;hr<cr.length;){const pr=decode$1(cr,hr),mr=encodingLength(pr),gr=getProtocol(pr),yr=sizeForAddr(gr,cr.slice(hr+mr));if(yr===0){ar.push([pr]),dr.push([pr]),hr+=mr;continue}const xr=cr.slice(hr+mr,hr+mr+yr);if(hr+=yr+mr,hr>cr.length)throw ParseError("Invalid address Uint8Array: "+toString$1(cr,"base16"));ar.push([pr,xr]);const wr=convertToString(pr,xr);if(dr.push([pr,wr]),gr.path===!0){fr=wr;break}}return{bytes:Uint8Array.from(cr),string:stringTuplesToString(dr),tuples:ar,stringTuples:dr,path:fr}}function stringTuplesToString(cr){const ar=[];return cr.map(dr=>{const fr=getProtocol(dr[0]);return ar.push(fr.name),dr.length>1&&dr[1]!=null&&ar.push(dr[1]),null}),cleanPath(ar.join("/"))}function tuplesToBytes(cr){return concat(cr.map(ar=>{const dr=getProtocol(ar[0]);let fr=Uint8Array.from(encode$2(dr.code));return ar.length>1&&ar[1]!=null&&(fr=concat([fr,ar[1]])),fr}))}function sizeForAddr(cr,ar){if(cr.size>0)return cr.size/8;if(cr.size===0)return 0;{const dr=decode$1(ar instanceof Uint8Array?ar:Uint8Array.from(ar));return dr+encodingLength(dr)}}function cleanPath(cr){return"/"+cr.trim().split("/").filter(ar=>ar).join("/")}function ParseError(cr){return new Error("Error parsing address: "+cr)}const inspect=Symbol.for("nodejs.util.inspect.custom"),symbol=Symbol.for("@multiformats/js-multiaddr/multiaddr"),DNS_CODES=[getProtocol("dns").code,getProtocol("dns4").code,getProtocol("dns6").code,getProtocol("dnsaddr").code];class Multiaddr{bytes;#e;#t;#r;#n;[symbol]=!0;constructor(ar){ar==null&&(ar="");let dr;if(ar instanceof Uint8Array)dr=bytesToMultiaddrParts(ar);else if(typeof ar=="string"){if(ar.length>0&&ar.charAt(0)!=="/")throw new Error(`multiaddr "${ar}" must start with a "/"`);dr=stringToMultiaddrParts(ar)}else if(isMultiaddr(ar))dr=bytesToMultiaddrParts(ar.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=dr.bytes,this.#e=dr.string,this.#t=dr.tuples,this.#r=dr.stringTuples,this.#n=dr.path}toString(){return this.#e}toJSON(){return this.toString()}toOptions(){let ar,dr,fr,hr,pr="";const mr=getProtocol("tcp"),gr=getProtocol("udp"),yr=getProtocol("ip4"),xr=getProtocol("ip6"),wr=getProtocol("dns6"),br=getProtocol("ip6zone");for(const[vr,Er]of this.stringTuples())vr===br.code&&(pr=`%${Er??""}`),DNS_CODES.includes(vr)&&(dr=mr.name,hr=443,fr=`${Er??""}${pr}`,ar=vr===wr.code?6:4),(vr===mr.code||vr===gr.code)&&(dr=getProtocol(vr).name,hr=parseInt(Er??"")),(vr===yr.code||vr===xr.code)&&(dr=getProtocol(vr).name,fr=`${Er??""}${pr}`,ar=vr===xr.code?6:4);if(ar==null||dr==null||fr==null||hr==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:ar,host:fr,transport:dr,port:hr}}protos(){return this.#t.map(([ar])=>Object.assign({},getProtocol(ar)))}protoCodes(){return this.#t.map(([ar])=>ar)}protoNames(){return this.#t.map(([ar])=>getProtocol(ar).name)}tuples(){return this.#t}stringTuples(){return this.#r}encapsulate(ar){return ar=new Multiaddr(ar),new Multiaddr(this.toString()+ar.toString())}decapsulate(ar){const dr=ar.toString(),fr=this.toString(),hr=fr.lastIndexOf(dr);if(hr<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${ar.toString()}`);return new Multiaddr(fr.slice(0,hr))}decapsulateCode(ar){const dr=this.tuples();for(let fr=dr.length-1;fr>=0;fr--)if(dr[fr][0]===ar)return new Multiaddr(tuplesToBytes(dr.slice(0,fr)));return this}getPeerId(){try{let ar=[];this.stringTuples().forEach(([fr,hr])=>{fr===names.p2p.code&&ar.push([fr,hr]),fr===names["p2p-circuit"].code&&(ar=[])});const dr=ar.pop();if(dr?.[1]!=null){const fr=dr[1];return fr[0]==="Q"||fr[0]==="1"?toString$1(base58btc.decode(`z${fr}`),"base58btc"):toString$1(CID.parse(fr).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return this.#n}equals(ar){return equals(this.bytes,ar.bytes)}async resolve(ar){const dr=this.protos().find(pr=>pr.resolvable);if(dr==null)return[this];const fr=resolvers.get(dr.name);if(fr==null)throw new CodeError$2(`no available resolver for ${dr.name}`,"ERR_NO_AVAILABLE_RESOLVER");return(await fr(this,ar)).map(pr=>new Multiaddr(pr))}nodeAddress(){const ar=this.toOptions();if(ar.transport!=="tcp"&&ar.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${ar.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:ar.family,address:ar.host,port:ar.port}}isThinWaistAddress(ar){const dr=(ar??this).protos();return!(dr.length!==2||dr[0].code!==4&&dr[0].code!==41||dr[1].code!==6&&dr[1].code!==273)}[inspect](){return`Multiaddr(${this.#e})`}}const resolvers=new Map;function isMultiaddr(cr){return!!cr?.[symbol]}function multiaddr(cr){return new Multiaddr(cr)}const ENVELOPE_DOMAIN_PEER_RECORD="libp2p-peer-record",ENVELOPE_PAYLOAD_TYPE_PEER_RECORD=Uint8Array.from([3,1]);var PeerRecord$1;(function(cr){(function(dr){let fr;dr.codec=()=>(fr==null&&(fr=message((hr,pr,mr={})=>{mr.lengthDelimited!==!1&&pr.fork(),hr.multiaddr!=null&&hr.multiaddr.byteLength>0&&(pr.uint32(10),pr.bytes(hr.multiaddr)),mr.lengthDelimited!==!1&&pr.ldelim()},(hr,pr)=>{const mr={multiaddr:new Uint8Array(0)},gr=pr==null?hr.len:hr.pos+pr;for(;hr.pos<gr;){const yr=hr.uint32();switch(yr>>>3){case 1:mr.multiaddr=hr.bytes();break;default:hr.skipType(yr&7);break}}return mr})),fr),dr.encode=hr=>encodeMessage(hr,dr.codec()),dr.decode=hr=>decodeMessage$1(hr,dr.codec())})(cr.AddressInfo||(cr.AddressInfo={}));let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{if(hr.lengthDelimited!==!1&&fr.fork(),dr.peerId!=null&&dr.peerId.byteLength>0&&(fr.uint32(10),fr.bytes(dr.peerId)),dr.seq!=null&&dr.seq!==0n&&(fr.uint32(16),fr.uint64(dr.seq)),dr.addresses!=null)for(const pr of dr.addresses)fr.uint32(26),cr.AddressInfo.codec().encode(pr,fr);hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={peerId:new Uint8Array(0),seq:0n,addresses:[]},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.peerId=dr.bytes();break;case 2:hr.seq=dr.uint64();break;case 3:hr.addresses.push(cr.AddressInfo.codec().decode(dr,dr.uint32()));break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(PeerRecord$1||(PeerRecord$1={}));class PeerRecord{static createFromProtobuf=ar=>{const dr=PeerRecord$1.decode(ar),fr=peerIdFromBytes(dr.peerId),hr=(dr.addresses??[]).map(mr=>multiaddr(mr.multiaddr)),pr=dr.seq;return new PeerRecord({peerId:fr,multiaddrs:hr,seqNumber:pr})};static DOMAIN=ENVELOPE_DOMAIN_PEER_RECORD;static CODEC=ENVELOPE_PAYLOAD_TYPE_PEER_RECORD;peerId;multiaddrs;seqNumber;domain=PeerRecord.DOMAIN;codec=PeerRecord.CODEC;marshaled;constructor(ar){const{peerId:dr,multiaddrs:fr,seqNumber:hr}=ar;this.peerId=dr,this.multiaddrs=fr??[],this.seqNumber=hr??BigInt(Date.now())}marshal(){return this.marshaled==null&&(this.marshaled=PeerRecord$1.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map(ar=>({multiaddr:ar.bytes}))})),this.marshaled}equals(ar){return!(!(ar instanceof PeerRecord)||!this.peerId.equals(ar.peerId)||this.seqNumber!==ar.seqNumber||!arrayEquals(this.multiaddrs,ar.multiaddrs))}}function isAsyncIterable$8(cr){return cr[Symbol.asyncIterator]!=null}function all$1(cr){if(isAsyncIterable$8(cr))return(async()=>{const dr=[];for await(const fr of cr)dr.push(fr);return dr})();const ar=[];for(const dr of cr)ar.push(dr);return ar}class TimeoutError extends Error{constructor(ar){super(ar),this.name="TimeoutError"}}let AbortError$5=class extends Error{constructor(ar){super(),this.name="AbortError",this.message=ar}};const getDOMException=cr=>globalThis.DOMException===void 0?new AbortError$5(cr):new DOMException(cr),getAbortedReason=cr=>{const ar=cr.reason===void 0?getDOMException("This operation was aborted."):cr.reason;return ar instanceof Error?ar:getDOMException(ar)};function pTimeout(cr,ar){const{milliseconds:dr,fallback:fr,message:hr,customTimers:pr={setTimeout,clearTimeout}}=ar;let mr;const yr=new Promise((xr,wr)=>{if(typeof dr!="number"||Math.sign(dr)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${dr}\``);if(ar.signal){const{signal:Sr}=ar;Sr.aborted&&wr(getAbortedReason(Sr)),Sr.addEventListener("abort",()=>{wr(getAbortedReason(Sr))})}if(dr===Number.POSITIVE_INFINITY){cr.then(xr,wr);return}const br=new TimeoutError;mr=pr.setTimeout.call(void 0,()=>{if(fr){try{xr(fr())}catch(Sr){wr(Sr)}return}typeof cr.cancel=="function"&&cr.cancel(),hr===!1?xr():hr instanceof Error?wr(hr):(br.message=hr??`Promise timed out after ${dr} milliseconds`,wr(br))},dr),(async()=>{try{xr(await cr)}catch(Sr){wr(Sr)}})()}).finally(()=>{yr.clear()});return yr.clear=()=>{pr.clearTimeout.call(void 0,mr),mr=void 0},yr}let nanoid$1=(cr=21)=>crypto.getRandomValues(new Uint8Array(cr)).reduce((ar,dr)=>(dr&=63,dr<36?ar+=dr.toString(36):dr<62?ar+=(dr-26).toString(36).toUpperCase():dr>62?ar+="-":ar+="_",ar),"");const WORKER_REQUEST_READ_LOCK="lock:worker:request-read",WORKER_RELEASE_READ_LOCK="lock:worker:release-read",MASTER_GRANT_READ_LOCK="lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK="lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK="lock:worker:release-write",MASTER_GRANT_WRITE_LOCK="lock:master:grant-write",events={},observable=cr=>{cr.addEventListener("message",ar=>{observable.dispatchEvent("message",cr,ar)}),cr.port!=null&&cr.port.addEventListener("message",ar=>{observable.dispatchEvent("message",cr,ar)})};observable.addEventListener=(cr,ar)=>{events[cr]==null&&(events[cr]=[]),events[cr].push(ar)};observable.removeEventListener=(cr,ar)=>{events[cr]!=null&&(events[cr]=events[cr].filter(dr=>dr===ar))};observable.dispatchEvent=function(cr,ar,dr){events[cr]!=null&&events[cr].forEach(fr=>fr(ar,dr))};const handleWorkerLockRequest=(cr,ar,dr,fr,hr)=>(pr,mr)=>{if(mr.data.type!==dr)return;const gr={type:mr.data.type,name:mr.data.name,identifier:mr.data.identifier};cr.dispatchEvent(new MessageEvent(ar,{data:{name:gr.name,handler:async()=>(pr.postMessage({type:hr,name:gr.name,identifier:gr.identifier}),await new Promise(yr=>{const xr=wr=>{if(wr==null||wr.data==null)return;const br={type:wr.data.type,name:wr.data.name,identifier:wr.data.identifier};br.type===fr&&br.identifier===gr.identifier&&(pr.removeEventListener("message",xr),yr())};pr.addEventListener("message",xr)}))}}))},makeWorkerLockRequest=(cr,ar,dr,fr)=>async()=>{const hr=nanoid$1();return globalThis.postMessage({type:ar,identifier:hr,name:cr}),await new Promise(pr=>{const mr=gr=>{if(gr==null||gr.data==null)return;const yr={type:gr.data.type,identifier:gr.data.identifier};yr.type===dr&&yr.identifier===hr&&(globalThis.removeEventListener("message",mr),pr(()=>{globalThis.postMessage({type:fr,identifier:hr,name:cr})}))};globalThis.addEventListener("message",mr)})},defaultOptions$5={singleProcess:!1},impl=cr=>{if(cr=Object.assign({},defaultOptions$5,cr),!!globalThis.document||cr.singleProcess){const dr=new EventTarget;return observable.addEventListener("message",handleWorkerLockRequest(dr,"requestReadLock",WORKER_REQUEST_READ_LOCK,WORKER_RELEASE_READ_LOCK,MASTER_GRANT_READ_LOCK)),observable.addEventListener("message",handleWorkerLockRequest(dr,"requestWriteLock",WORKER_REQUEST_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK)),dr}return{isWorker:!0,readLock:dr=>makeWorkerLockRequest(dr,WORKER_REQUEST_READ_LOCK,MASTER_GRANT_READ_LOCK,WORKER_RELEASE_READ_LOCK),writeLock:dr=>makeWorkerLockRequest(dr,WORKER_REQUEST_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK)}},mutexes={};let implementation;async function createReleaseable(cr,ar){let dr;const fr=new Promise(hr=>{dr=hr});return cr.add(async()=>await pTimeout((async()=>await new Promise(hr=>{dr(()=>{hr()})}))(),{milliseconds:ar.timeout})),await fr}const createMutex=(cr,ar)=>{if(implementation.isWorker===!0)return{readLock:implementation.readLock(cr,ar),writeLock:implementation.writeLock(cr,ar)};const dr=new PQueue$1({concurrency:1});let fr;return{async readLock(){if(fr!=null)return await createReleaseable(fr,ar);fr=new PQueue$1({concurrency:ar.concurrency,autoStart:!1});const hr=fr,pr=createReleaseable(fr,ar);return dr.add(async()=>(hr.start(),await hr.onIdle().then(()=>{fr===hr&&(fr=null)}))),await pr},async writeLock(){return fr=null,await createReleaseable(dr,ar)}}},defaultOptions$4={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function createMortice(cr){const ar=Object.assign({},defaultOptions$4,cr);return implementation==null&&(implementation=impl(ar),implementation.isWorker!==!0&&(implementation.addEventListener("requestReadLock",dr=>{mutexes[dr.data.name]!=null&&mutexes[dr.data.name].readLock().then(async fr=>await dr.data.handler().finally(()=>fr()))}),implementation.addEventListener("requestWriteLock",async dr=>{mutexes[dr.data.name]!=null&&mutexes[dr.data.name].writeLock().then(async fr=>await dr.data.handler().finally(()=>fr()))}))),mutexes[ar.name]==null&&(mutexes[ar.name]=createMutex(ar.name,ar)),mutexes[ar.name]}const codes$2={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS"};var Peer$1;(function(cr){(function(dr){let fr;dr.codec=()=>(fr==null&&(fr=message((hr,pr,mr={})=>{mr.lengthDelimited!==!1&&pr.fork(),hr.key!=null&&hr.key!==""&&(pr.uint32(10),pr.string(hr.key)),hr.value!=null&&hr.value.byteLength>0&&(pr.uint32(18),pr.bytes(hr.value)),mr.lengthDelimited!==!1&&pr.ldelim()},(hr,pr)=>{const mr={key:"",value:new Uint8Array(0)},gr=pr==null?hr.len:hr.pos+pr;for(;hr.pos<gr;){const yr=hr.uint32();switch(yr>>>3){case 1:mr.key=hr.string();break;case 2:mr.value=hr.bytes();break;default:hr.skipType(yr&7);break}}return mr})),fr),dr.encode=hr=>encodeMessage(hr,dr.codec()),dr.decode=hr=>decodeMessage$1(hr,dr.codec())})(cr.Peer$metadataEntry||(cr.Peer$metadataEntry={})),function(dr){let fr;dr.codec=()=>(fr==null&&(fr=message((hr,pr,mr={})=>{mr.lengthDelimited!==!1&&pr.fork(),hr.key!=null&&hr.key!==""&&(pr.uint32(10),pr.string(hr.key)),hr.value!=null&&(pr.uint32(18),Tag.codec().encode(hr.value,pr)),mr.lengthDelimited!==!1&&pr.ldelim()},(hr,pr)=>{const mr={key:""},gr=pr==null?hr.len:hr.pos+pr;for(;hr.pos<gr;){const yr=hr.uint32();switch(yr>>>3){case 1:mr.key=hr.string();break;case 2:mr.value=Tag.codec().decode(hr,hr.uint32());break;default:hr.skipType(yr&7);break}}return mr})),fr),dr.encode=hr=>encodeMessage(hr,dr.codec()),dr.decode=hr=>decodeMessage$1(hr,dr.codec())}(cr.Peer$tagsEntry||(cr.Peer$tagsEntry={}));let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{if(hr.lengthDelimited!==!1&&fr.fork(),dr.addresses!=null)for(const pr of dr.addresses)fr.uint32(10),Address.codec().encode(pr,fr);if(dr.protocols!=null)for(const pr of dr.protocols)fr.uint32(18),fr.string(pr);if(dr.publicKey!=null&&(fr.uint32(34),fr.bytes(dr.publicKey)),dr.peerRecordEnvelope!=null&&(fr.uint32(42),fr.bytes(dr.peerRecordEnvelope)),dr.metadata!=null&&dr.metadata.size!==0)for(const[pr,mr]of dr.metadata.entries())fr.uint32(50),cr.Peer$metadataEntry.codec().encode({key:pr,value:mr},fr);if(dr.tags!=null&&dr.tags.size!==0)for(const[pr,mr]of dr.tags.entries())fr.uint32(58),cr.Peer$tagsEntry.codec().encode({key:pr,value:mr},fr);hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={addresses:[],protocols:[],metadata:new Map,tags:new Map},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.addresses.push(Address.codec().decode(dr,dr.uint32()));break;case 2:hr.protocols.push(dr.string());break;case 4:hr.publicKey=dr.bytes();break;case 5:hr.peerRecordEnvelope=dr.bytes();break;case 6:{const gr=cr.Peer$metadataEntry.codec().decode(dr,dr.uint32());hr.metadata.set(gr.key,gr.value);break}case 7:{const gr=cr.Peer$tagsEntry.codec().decode(dr,dr.uint32());hr.tags.set(gr.key,gr.value);break}default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(Peer$1||(Peer$1={}));var Address;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.multiaddr!=null&&dr.multiaddr.byteLength>0&&(fr.uint32(10),fr.bytes(dr.multiaddr)),dr.isCertified!=null&&(fr.uint32(16),fr.bool(dr.isCertified)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={multiaddr:new Uint8Array(0)},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.multiaddr=dr.bytes();break;case 2:hr.isCertified=dr.bool();break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(Address||(Address={}));var Tag;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.value!=null&&dr.value!==0&&(fr.uint32(8),fr.uint32(dr.value)),dr.expiry!=null&&(fr.uint32(16),fr.uint64(dr.expiry)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={value:0},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.value=dr.uint32();break;case 2:hr.expiry=dr.uint64();break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(Tag||(Tag={}));function bytesToPeer(cr,ar){const dr=Peer$1.decode(ar);dr.publicKey!=null&&cr.publicKey==null&&(cr=peerIdFromPeerId({...cr,publicKey:cr.publicKey}));const fr=new Map,hr=BigInt(Date.now());for(const[pr,mr]of dr.tags.entries())mr.expiry!=null&&mr.expiry<hr||fr.set(pr,mr);return{...dr,id:cr,addresses:dr.addresses.map(({multiaddr:pr,isCertified:mr})=>({multiaddr:multiaddr(pr),isCertified:mr??!1})),metadata:dr.metadata,peerRecordEnvelope:dr.peerRecordEnvelope??void 0,tags:fr}}let nanoid=(cr=21)=>crypto.getRandomValues(new Uint8Array(cr)).reduce((ar,dr)=>(dr&=63,dr<36?ar+=dr.toString(36):dr<62?ar+=(dr-26).toString(36).toUpperCase():dr>62?ar+="-":ar+="_",ar),"");const pathSepS="/",pathSepB=new TextEncoder().encode(pathSepS),pathSep=pathSepB[0];class Key{_buf;constructor(ar,dr){if(typeof ar=="string")this._buf=fromString(ar);else if(ar instanceof Uint8Array)this._buf=ar;else throw new Error("Invalid key, should be String of Uint8Array");if(dr==null&&(dr=!0),dr&&this.clean(),this._buf.byteLength===0||this._buf[0]!==pathSep)throw new Error("Invalid key")}toString(ar="utf8"){return toString$1(this._buf,ar)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(ar){return new Key(ar.join(pathSepS))}static random(){return new Key(nanoid().replace(/-/g,""))}static asKey(ar){return ar instanceof Uint8Array||typeof ar=="string"?new Key(ar):typeof ar.uint8Array=="function"?new Key(ar.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=pathSepB),this._buf[0]!==pathSep){const ar=new Uint8Array(this._buf.byteLength+1);ar.fill(pathSep,0,1),ar.set(this._buf,1),this._buf=ar}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===pathSep;)this._buf=this._buf.subarray(0,-1)}less(ar){const dr=this.list(),fr=ar.list();for(let hr=0;hr<dr.length;hr++){if(fr.length<hr+1)return!1;const pr=dr[hr],mr=fr[hr];if(pr<mr)return!0;if(pr>mr)return!1}return dr.length<fr.length}reverse(){return Key.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const ar=this.namespaces();return ar[ar.length-1]}list(){return this.toString().split(pathSepS).slice(1)}type(){return namespaceType(this.baseNamespace())}name(){return namespaceValue(this.baseNamespace())}instance(ar){return new Key(this.toString()+":"+ar)}path(){let ar=this.parent().toString();return ar.endsWith(pathSepS)||(ar+=pathSepS),ar+=this.type(),new Key(ar)}parent(){const ar=this.list();return ar.length===1?new Key(pathSepS):new Key(ar.slice(0,-1).join(pathSepS))}child(ar){return this.toString()===pathSepS?ar:ar.toString()===pathSepS?this:new Key(this.toString()+ar.toString(),!1)}isAncestorOf(ar){return ar.toString()===this.toString()?!1:ar.toString().startsWith(this.toString())}isDecendantOf(ar){return ar.toString()===this.toString()?!1:this.toString().startsWith(ar.toString())}isTopLevel(){return this.list().length===1}concat(...ar){return Key.withNamespaces([...this.namespaces(),...flatten$1(ar.map(dr=>dr.namespaces()))])}}function namespaceType(cr){const ar=cr.split(":");return ar.length<2?"":ar.slice(0,-1).join(":")}function namespaceValue(cr){const ar=cr.split(":");return ar[ar.length-1]}function flatten$1(cr){return[].concat(...cr)}const NAMESPACE_COMMON="/peers/";function peerIdToDatastoreKey(cr){if(!isPeerId(cr)||cr.type==null)throw new CodeError$3("Invalid PeerId",codes$2.ERR_INVALID_PARAMETERS);const ar=cr.toCID().toString();return new Key(`${NAMESPACE_COMMON}${ar}`)}async function dedupeFilterAndSortAddresses(cr,ar,dr){const fr=new Map;for(const hr of dr){if(hr==null)continue;if(hr.multiaddr instanceof Uint8Array&&(hr.multiaddr=multiaddr(hr.multiaddr)),!isMultiaddr(hr.multiaddr))throw new CodeError$3("Multiaddr was invalid",codes$2.ERR_INVALID_PARAMETERS);if(!await ar(cr,hr.multiaddr))continue;const pr=hr.isCertified??!1,mr=hr.multiaddr.toString(),gr=fr.get(mr);gr!=null?hr.isCertified=gr.isCertified||pr:fr.set(mr,{multiaddr:hr.multiaddr,isCertified:pr})}return[...fr.values()].sort((hr,pr)=>hr.multiaddr.toString().localeCompare(pr.multiaddr.toString())).map(({isCertified:hr,multiaddr:pr})=>({isCertified:hr,multiaddr:pr.bytes}))}async function toPeerPB(cr,ar,dr,fr){if(ar==null)throw new CodeError$3("Invalid PeerData",codes$2.ERR_INVALID_PARAMETERS);if(ar.publicKey!=null&&cr.publicKey!=null&&!equals$1(ar.publicKey,cr.publicKey))throw new CodeError$3("publicKey bytes do not match peer id publicKey bytes",codes$2.ERR_INVALID_PARAMETERS);const hr=fr.existingPeer;if(hr!=null&&!cr.equals(hr.id))throw new CodeError$3("peer id did not match existing peer id",codes$2.ERR_INVALID_PARAMETERS);let pr=hr?.addresses??[],mr=new Set(hr?.protocols??[]),gr=hr?.metadata??new Map,yr=hr?.tags??new Map,xr=hr?.peerRecordEnvelope;if(dr==="patch"){if((ar.multiaddrs!=null||ar.addresses!=null)&&(pr=[],ar.multiaddrs!=null&&pr.push(...ar.multiaddrs.map(br=>({isCertified:!1,multiaddr:br}))),ar.addresses!=null&&pr.push(...ar.addresses)),ar.protocols!=null&&(mr=new Set(ar.protocols)),ar.metadata!=null){const br=ar.metadata instanceof Map?[...ar.metadata.entries()]:Object.entries(ar.metadata);gr=createSortedMap(br,{validate:validateMetadata})}if(ar.tags!=null){const br=ar.tags instanceof Map?[...ar.tags.entries()]:Object.entries(ar.tags);yr=createSortedMap(br,{validate:validateTag,map:mapTag})}ar.peerRecordEnvelope!=null&&(xr=ar.peerRecordEnvelope)}if(dr==="merge"){if(ar.multiaddrs!=null&&pr.push(...ar.multiaddrs.map(br=>({isCertified:!1,multiaddr:br}))),ar.addresses!=null&&pr.push(...ar.addresses),ar.protocols!=null&&(mr=new Set([...mr,...ar.protocols])),ar.metadata!=null){const br=ar.metadata instanceof Map?[...ar.metadata.entries()]:Object.entries(ar.metadata);for(const[Sr,vr]of br)vr==null?gr.delete(Sr):gr.set(Sr,vr);gr=createSortedMap([...gr.entries()],{validate:validateMetadata})}if(ar.tags!=null){const br=ar.tags instanceof Map?[...ar.tags.entries()]:Object.entries(ar.tags),Sr=new Map(yr);for(const[vr,Er]of br)Er==null?Sr.delete(vr):Sr.set(vr,Er);yr=createSortedMap([...Sr.entries()],{validate:validateTag,map:mapTag})}ar.peerRecordEnvelope!=null&&(xr=ar.peerRecordEnvelope)}const wr={addresses:await dedupeFilterAndSortAddresses(cr,fr.addressFilter??(async()=>!0),pr),protocols:[...mr.values()].sort((br,Sr)=>br.localeCompare(Sr)),metadata:gr,tags:yr,publicKey:hr?.id.publicKey??ar.publicKey??cr.publicKey,peerRecordEnvelope:xr};return cr.type!=="RSA"&&delete wr.publicKey,wr}function createSortedMap(cr,ar){const dr=new Map;for(const[fr,hr]of cr)hr!=null&&ar.validate(fr,hr);for(const[fr,hr]of cr.sort(([pr],[mr])=>pr.localeCompare(mr)))hr!=null&&dr.set(fr,ar.map?.(fr,hr)??hr);return dr}function validateMetadata(cr,ar){if(typeof cr!="string")throw new CodeError$3("Metadata key must be a string",codes$2.ERR_INVALID_PARAMETERS);if(!(ar instanceof Uint8Array))throw new CodeError$3("Metadata value must be a Uint8Array",codes$2.ERR_INVALID_PARAMETERS)}function validateTag(cr,ar){if(typeof cr!="string")throw new CodeError$3("Tag name must be a string",codes$2.ERR_INVALID_PARAMETERS);if(ar.value!=null){if(parseInt(`${ar.value}`,10)!==ar.value)throw new CodeError$3("Tag value must be an integer",codes$2.ERR_INVALID_PARAMETERS);if(ar.value<0||ar.value>100)throw new CodeError$3("Tag value must be between 0-100",codes$2.ERR_INVALID_PARAMETERS)}if(ar.ttl!=null){if(parseInt(`${ar.ttl}`,10)!==ar.ttl)throw new CodeError$3("Tag ttl must be an integer",codes$2.ERR_INVALID_PARAMETERS);if(ar.ttl<0)throw new CodeError$3("Tag ttl must be between greater than 0",codes$2.ERR_INVALID_PARAMETERS)}}function mapTag(cr,ar){let dr;return ar.expiry!=null&&(dr=ar.expiry),ar.ttl!=null&&(dr=BigInt(Date.now()+Number(ar.ttl))),{value:ar.value??0,expiry:dr}}function decodePeer(cr,ar,dr){const fr=cr.toString().split("/")[2],hr=base32$2.decode(fr),pr=peerIdFromBytes(hr),mr=dr.get(pr);if(mr!=null)return mr;const gr=bytesToPeer(pr,ar);return dr.set(pr,gr),gr}function mapQuery(cr,ar){return cr==null?{}:{prefix:NAMESPACE_COMMON,filters:(cr.filters??[]).map(dr=>({key:fr,value:hr})=>dr(decodePeer(fr,hr,ar))),orders:(cr.orders??[]).map(dr=>(fr,hr)=>dr(decodePeer(fr.key,fr.value,ar),decodePeer(hr.key,hr.value,ar)))}}class PersistentStore{peerId;datastore;lock;addressFilter;constructor(ar,dr={}){this.peerId=ar.peerId,this.datastore=ar.datastore,this.addressFilter=dr.addressFilter,this.lock=createMortice({name:"peer-store",singleProcess:!0})}async has(ar){return this.datastore.has(peerIdToDatastoreKey(ar))}async delete(ar){if(this.peerId.equals(ar))throw new CodeError$3("Cannot delete self peer",codes$2.ERR_INVALID_PARAMETERS);await this.datastore.delete(peerIdToDatastoreKey(ar))}async load(ar){const dr=await this.datastore.get(peerIdToDatastoreKey(ar));return bytesToPeer(ar,dr)}async save(ar,dr){const{existingBuf:fr,existingPeer:hr}=await this.#e(ar),pr=await toPeerPB(ar,dr,"patch",{addressFilter:this.addressFilter});return this.#t(ar,pr,fr,hr)}async patch(ar,dr){const{existingBuf:fr,existingPeer:hr}=await this.#e(ar),pr=await toPeerPB(ar,dr,"patch",{addressFilter:this.addressFilter,existingPeer:hr});return this.#t(ar,pr,fr,hr)}async merge(ar,dr){const{existingBuf:fr,existingPeer:hr}=await this.#e(ar),pr=await toPeerPB(ar,dr,"merge",{addressFilter:this.addressFilter,existingPeer:hr});return this.#t(ar,pr,fr,hr)}async*all(ar){const dr=new PeerMap;for await(const{key:fr,value:hr}of this.datastore.query(mapQuery(ar??{},dr))){const pr=decodePeer(fr,hr,dr);pr.id.equals(this.peerId)||(yield pr)}}async#e(ar){try{const dr=await this.datastore.get(peerIdToDatastoreKey(ar)),fr=bytesToPeer(ar,dr);return{existingBuf:dr,existingPeer:fr}}catch(dr){if(dr.code!=="ERR_NOT_FOUND")throw dr}return{}}async#t(ar,dr,fr,hr){const pr=Peer$1.encode(dr);return fr!=null&&equals$1(pr,fr)?{peer:bytesToPeer(ar,pr),previous:hr,updated:!1}:(await this.datastore.put(peerIdToDatastoreKey(ar),pr),{peer:bytesToPeer(ar,pr),previous:hr,updated:!0})}}class PersistentPeerStore{store;events;peerId;log;constructor(ar,dr={}){this.log=ar.logger.forComponent("libp2p:peer-store"),this.events=ar.events,this.peerId=ar.peerId,this.store=new PersistentStore(ar,dr)}async forEach(ar,dr){this.log.trace("forEach await read lock");const fr=await this.store.lock.readLock();this.log.trace("forEach got read lock");try{for await(const hr of this.store.all(dr))ar(hr)}finally{this.log.trace("forEach release read lock"),fr()}}async all(ar){this.log.trace("all await read lock");const dr=await this.store.lock.readLock();this.log.trace("all got read lock");try{return await all$1(this.store.all(ar))}finally{this.log.trace("all release read lock"),dr()}}async delete(ar){this.log.trace("delete await write lock");const dr=await this.store.lock.writeLock();this.log.trace("delete got write lock");try{await this.store.delete(ar)}finally{this.log.trace("delete release write lock"),dr()}}async has(ar){this.log.trace("has await read lock");const dr=await this.store.lock.readLock();this.log.trace("has got read lock");try{return await this.store.has(ar)}finally{this.log.trace("has release read lock"),dr()}}async get(ar){this.log.trace("get await read lock");const dr=await this.store.lock.readLock();this.log.trace("get got read lock");try{return await this.store.load(ar)}finally{this.log.trace("get release read lock"),dr()}}async save(ar,dr){this.log.trace("save await write lock");const fr=await this.store.lock.writeLock();this.log.trace("save got write lock");try{const hr=await this.store.save(ar,dr);return this.#e(ar,hr),hr.peer}finally{this.log.trace("save release write lock"),fr()}}async patch(ar,dr){this.log.trace("patch await write lock");const fr=await this.store.lock.writeLock();this.log.trace("patch got write lock");try{const hr=await this.store.patch(ar,dr);return this.#e(ar,hr),hr.peer}finally{this.log.trace("patch release write lock"),fr()}}async merge(ar,dr){this.log.trace("merge await write lock");const fr=await this.store.lock.writeLock();this.log.trace("merge got write lock");try{const hr=await this.store.merge(ar,dr);return this.#e(ar,hr),hr.peer}finally{this.log.trace("merge release write lock"),fr()}}async consumePeerRecord(ar,dr){const fr=await RecordEnvelope.openAndCertify(ar,PeerRecord.DOMAIN);if(dr?.equals(fr.peerId)===!1)return this.log("envelope peer id was not the expected peer id - expected: %p received: %p",dr,fr.peerId),!1;const hr=PeerRecord.createFromProtobuf(fr.payload);let pr;try{pr=await this.get(fr.peerId)}catch(mr){if(mr.code!=="ERR_NOT_FOUND")throw mr}if(pr?.peerRecordEnvelope!=null){const mr=await RecordEnvelope.createFromProtobuf(pr.peerRecordEnvelope),gr=PeerRecord.createFromProtobuf(mr.payload);if(gr.seqNumber>=hr.seqNumber)return this.log("sequence number was lower or equal to existing sequence number - stored: %d received: %d",gr.seqNumber,hr.seqNumber),!1}return await this.patch(hr.peerId,{peerRecordEnvelope:ar,addresses:hr.multiaddrs.map(mr=>({isCertified:!0,multiaddr:mr}))}),!0}#e(ar,dr){dr.updated&&(this.peerId.equals(ar)?this.events.safeDispatchEvent("self:peer:update",{detail:dr}):this.events.safeDispatchEvent("peer:update",{detail:dr}))}}function isAsyncIterable$7(cr){return cr[Symbol.asyncIterator]!=null}function drain(cr){if(isAsyncIterable$7(cr))return(async()=>{for await(const ar of cr);})();for(const ar of cr);}function peekable(cr){const[ar,dr]=cr[Symbol.asyncIterator]!=null?[cr[Symbol.asyncIterator](),Symbol.asyncIterator]:[cr[Symbol.iterator](),Symbol.iterator],fr=[];return{peek:()=>ar.next(),push:hr=>{fr.push(hr)},next:()=>fr.length>0?{done:!1,value:fr.shift()}:ar.next(),[dr](){return this}}}function isAsyncIterable$6(cr){return cr[Symbol.asyncIterator]!=null}function filter(cr,ar){if(isAsyncIterable$6(cr))return async function*(){for await(const gr of cr)await ar(gr)&&(yield gr)}();const dr=peekable(cr),{value:fr,done:hr}=dr.next();if(hr===!0)return function*(){}();const pr=ar(fr);if(typeof pr.then=="function")return async function*(){await pr&&(yield fr);for await(const gr of dr)await ar(gr)&&(yield gr)}();const mr=ar;return function*(){pr===!0&&(yield fr);for(const gr of dr)mr(gr)&&(yield gr)}()}function isAsyncIterable$5(cr){return cr[Symbol.asyncIterator]!=null}function sort(cr,ar){return isAsyncIterable$5(cr)?async function*(){yield*(await all$1(cr)).sort(ar)}():function*(){yield*all$1(cr).sort(ar)}()}function isAsyncIterable$4(cr){return cr[Symbol.asyncIterator]!=null}function take(cr,ar){return isAsyncIterable$4(cr)?async function*(){let dr=0;if(!(ar<1)){for await(const fr of cr)if(yield fr,dr++,dr===ar)return}}():function*(){let dr=0;if(!(ar<1)){for(const fr of cr)if(yield fr,dr++,dr===ar)return}}()}class BaseDatastore{put(ar,dr,fr){return Promise.reject(new Error(".put is not implemented"))}get(ar,dr){return Promise.reject(new Error(".get is not implemented"))}has(ar,dr){return Promise.reject(new Error(".has is not implemented"))}delete(ar,dr){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(ar,dr={}){for await(const{key:fr,value:hr}of ar)await this.put(fr,hr,dr),yield fr}async*getMany(ar,dr={}){for await(const fr of ar)yield{key:fr,value:await this.get(fr,dr)}}async*deleteMany(ar,dr={}){for await(const fr of ar)await this.delete(fr,dr),yield fr}batch(){let ar=[],dr=[];return{put(fr,hr){ar.push({key:fr,value:hr})},delete(fr){dr.push(fr)},commit:async fr=>{await drain(this.putMany(ar,fr)),ar=[],await drain(this.deleteMany(dr,fr)),dr=[]}}}async*_all(ar,dr){throw new Error("._all is not implemented")}async*_allKeys(ar,dr){throw new Error("._allKeys is not implemented")}query(ar,dr){let fr=this._all(ar,dr);if(ar.prefix!=null){const hr=ar.prefix;fr=filter(fr,pr=>pr.key.toString().startsWith(hr))}if(Array.isArray(ar.filters)&&(fr=ar.filters.reduce((hr,pr)=>filter(hr,pr),fr)),Array.isArray(ar.orders)&&(fr=ar.orders.reduce((hr,pr)=>sort(hr,pr),fr)),ar.offset!=null){let hr=0;const pr=ar.offset;fr=filter(fr,()=>hr++>=pr)}return ar.limit!=null&&(fr=take(fr,ar.limit)),fr}queryKeys(ar,dr){let fr=this._allKeys(ar,dr);if(ar.prefix!=null){const hr=ar.prefix;fr=filter(fr,pr=>pr.toString().startsWith(hr))}if(Array.isArray(ar.filters)&&(fr=ar.filters.reduce((hr,pr)=>filter(hr,pr),fr)),Array.isArray(ar.orders)&&(fr=ar.orders.reduce((hr,pr)=>sort(hr,pr),fr)),ar.offset!=null){const hr=ar.offset;let pr=0;fr=filter(fr,()=>pr++>=hr)}return ar.limit!=null&&(fr=take(fr,ar.limit)),fr}}function assign(cr,ar){for(const dr in ar)Object.defineProperty(cr,dr,{value:ar[dr],enumerable:!0,configurable:!0});return cr}function createError(cr,ar,dr){if(!cr||typeof cr=="string")throw new TypeError("Please pass an Error to err-code");dr||(dr={}),typeof ar=="object"&&(dr=ar,ar=""),ar&&(dr.code=ar);try{return assign(cr,dr)}catch{dr.message=cr.message,dr.stack=cr.stack;const hr=function(){};return hr.prototype=Object.create(Object.getPrototypeOf(cr)),assign(new hr,dr)}}var errCode=createError;const errCode$1=getDefaultExportFromCjs(errCode);function notFoundError(cr){return cr=cr??new Error("Not Found"),errCode$1(cr,"ERR_NOT_FOUND")}class MemoryDatastore extends BaseDatastore{data;constructor(){super(),this.data=new Map}put(ar,dr){return this.data.set(ar.toString(),dr),ar}get(ar){const dr=this.data.get(ar.toString());if(dr==null)throw notFoundError();return dr}has(ar){return this.data.has(ar.toString())}delete(ar){this.data.delete(ar.toString())}*_all(){for(const[ar,dr]of this.data.entries())yield{key:new Key(ar),value:dr}}*_allKeys(){for(const ar of this.data.keys())yield new Key(ar)}}function debounce(cr,ar){let dr;return function(){const fr=function(){dr=void 0,cr()};clearTimeout(dr),dr=setTimeout(fr,ar)}}const defaultAddressFilter=cr=>cr;function stripPeerId(cr,ar){const dr=cr.getPeerId();return dr!=null&&peerIdFromString(dr).equals(ar)&&(cr=cr.decapsulate(multiaddr(`/p2p/${ar.toString()}`))),cr}class DefaultAddressManager{log;components;listen;announce;observed;announceFilter;constructor(ar,dr={}){const{listen:fr=[],announce:hr=[]}=dr;this.components=ar,this.log=ar.logger.forComponent("libp2p:address-manager"),this.listen=fr.map(pr=>pr.toString()),this.announce=new Set(hr.map(pr=>pr.toString())),this.observed=new Map,this.announceFilter=dr.announceFilter??defaultAddressFilter,this._updatePeerStoreAddresses=debounce(this._updatePeerStoreAddresses.bind(this),1e3),ar.events.addEventListener("transport:listening",()=>{this._updatePeerStoreAddresses()}),ar.events.addEventListener("transport:close",()=>{this._updatePeerStoreAddresses()})}_updatePeerStoreAddresses(){const ar=this.getAnnounceAddrs().concat(this.components.transportManager.getAddrs()).concat([...this.observed.entries()].filter(([dr,fr])=>fr.confident).map(([dr])=>multiaddr(dr))).map(dr=>dr.getPeerId()===this.components.peerId.toString()?dr.decapsulate(`/p2p/${this.components.peerId.toString()}`):dr);this.components.peerStore.patch(this.components.peerId,{multiaddrs:ar}).catch(dr=>{this.log.error("error updating addresses",dr)})}getListenAddrs(){return Array.from(this.listen).map(ar=>multiaddr(ar))}getAnnounceAddrs(){return Array.from(this.announce).map(ar=>multiaddr(ar))}getObservedAddrs(){return Array.from(this.observed).map(([ar])=>multiaddr(ar))}addObservedAddr(ar){ar=stripPeerId(ar,this.components.peerId);const dr=ar.toString();this.observed.has(dr)||this.observed.set(dr,{confident:!1})}confirmObservedAddr(ar){ar=stripPeerId(ar,this.components.peerId);const dr=ar.toString(),hr=(this.observed.get(dr)??{confident:!1}).confident;this.observed.set(dr,{confident:!0}),hr||this._updatePeerStoreAddresses()}removeObservedAddr(ar){ar=stripPeerId(ar,this.components.peerId);const dr=ar.toString();this.observed.delete(dr)}getAddresses(){let ar=this.getAnnounceAddrs().map(fr=>fr.toString());ar.length===0&&(ar=this.components.transportManager.getAddrs().map(fr=>fr.toString())),ar=ar.concat(Array.from(this.observed).filter(([fr,hr])=>hr.confident).map(([fr])=>fr));const dr=new Set(ar);return this.announceFilter(Array.from(dr).map(fr=>multiaddr(fr))).map(fr=>fr.protos().pop()?.path===!0||fr.getPeerId()===this.components.peerId.toString()?fr:fr.encapsulate(`/p2p/${this.components.peerId.toString()}`))}}class DefaultComponents{components={};_started=!1;constructor(ar={}){this.components={};for(const[dr,fr]of Object.entries(ar))this.components[dr]=fr;this.components.logger==null&&(this.components.logger=defaultLogger())}isStarted(){return this._started}async _invokeStartableMethod(ar){await Promise.all(Object.values(this.components).filter(dr=>isStartable(dr)).map(async dr=>{await dr[ar]?.()}))}async beforeStart(){await this._invokeStartableMethod("beforeStart")}async start(){await this._invokeStartableMethod("start"),this._started=!0}async afterStart(){await this._invokeStartableMethod("afterStart")}async beforeStop(){await this._invokeStartableMethod("beforeStop")}async stop(){await this._invokeStartableMethod("stop"),this._started=!1}async afterStop(){await this._invokeStartableMethod("afterStop")}}const OPTIONAL_SERVICES=["metrics","connectionProtector"],NON_SERVICE_PROPERTIES=["components","isStarted","beforeStart","start","afterStart","beforeStop","stop","afterStop","then","_invokeStartableMethod"];function defaultComponents(cr={}){const ar=new DefaultComponents(cr);return new Proxy(ar,{get(fr,hr,pr){if(typeof hr=="string"&&!NON_SERVICE_PROPERTIES.includes(hr)){const mr=ar.components[hr];if(mr==null&&!OPTIONAL_SERVICES.includes(hr))throw new CodeError$3(`${hr} not set`,"ERR_SERVICE_MISSING");return mr}return Reflect.get(fr,hr,pr)},set(fr,hr,pr){return typeof hr=="string"?ar.components[hr]=pr:Reflect.set(fr,hr,pr),!0}})}var Netmask_1;(function(){var cr,ar,dr,fr,hr,pr,mr,gr;gr=function(yr){var xr,wr,br,Sr;return xr=(yr&255<<24)>>>24,wr=(yr&255<<16)>>>16,br=(yr&65280)>>>8,Sr=yr&255,[xr,wr,br,Sr].join(".")},mr=function(yr){var xr,wr,br,Sr,vr,Er;for(xr=[],br=Sr=0;Sr<=3&&yr.length!==0;br=++Sr){if(br>0){if(yr[0]!==".")throw new Error("Invalid IP");yr=yr.substring(1)}Er=ar(yr),vr=Er[0],wr=Er[1],yr=yr.substring(wr),xr.push(vr)}if(yr.length!==0)throw new Error("Invalid IP");switch(xr.length){case 1:if(xr[0]>4294967295)throw new Error("Invalid IP");return xr[0]>>>0;case 2:if(xr[0]>255||xr[1]>16777215)throw new Error("Invalid IP");return(xr[0]<<24|xr[1])>>>0;case 3:if(xr[0]>255||xr[1]>255||xr[2]>65535)throw new Error("Invalid IP");return(xr[0]<<24|xr[1]<<16|xr[2])>>>0;case 4:if(xr[0]>255||xr[1]>255||xr[2]>255||xr[3]>255)throw new Error("Invalid IP");return(xr[0]<<24|xr[1]<<16|xr[2]<<8|xr[3])>>>0;default:throw new Error("Invalid IP")}},dr=function(yr){return yr.charCodeAt(0)},fr=dr("0"),pr=dr("a"),hr=dr("A"),ar=function(yr){var xr,wr,br,Sr,vr;for(Sr=0,xr=10,wr="9",br=0,yr.length>1&&yr[br]==="0"&&(yr[br+1]==="x"||yr[br+1]==="X"?(br+=2,xr=16):"0"<=yr[br+1]&&yr[br+1]<="9"&&(br++,xr=8,wr="7")),vr=br;br<yr.length;){if("0"<=yr[br]&&yr[br]<=wr)Sr=Sr*xr+(dr(yr[br])-fr)>>>0;else if(xr===16)if("a"<=yr[br]&&yr[br]<="f")Sr=Sr*xr+(10+dr(yr[br])-pr)>>>0;else if("A"<=yr[br]&&yr[br]<="F")Sr=Sr*xr+(10+dr(yr[br])-hr)>>>0;else break;else break;if(Sr>4294967295)throw new Error("too large");br++}if(br===vr)throw new Error("empty octet");return[Sr,br]},cr=function(){function yr(xr,wr){var br,Sr,vr;if(typeof xr!="string")throw new Error("Missing `net' parameter");if(wr||(vr=xr.split("/",2),xr=vr[0],wr=vr[1]),wr||(wr=32),typeof wr=="string"&&wr.indexOf(".")>-1){try{this.maskLong=mr(wr)}catch{throw new Error("Invalid mask: "+wr)}for(br=Sr=32;Sr>=0;br=--Sr)if(this.maskLong===4294967295<<32-br>>>0){this.bitmask=br;break}}else if(wr||wr===0)this.bitmask=parseInt(wr,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(mr(xr)&this.maskLong)>>>0}catch{throw new Error("Invalid net address: "+xr)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+wr);this.size=Math.pow(2,32-this.bitmask),this.base=gr(this.netLong),this.mask=gr(this.maskLong),this.hostmask=gr(~this.maskLong),this.first=this.bitmask<=30?gr(this.netLong+1):this.base,this.last=this.bitmask<=30?gr(this.netLong+this.size-2):gr(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?gr(this.netLong+this.size-1):void 0}return yr.prototype.contains=function(xr){return typeof xr=="string"&&(xr.indexOf("/")>0||xr.split(".").length!==4)&&(xr=new yr(xr)),xr instanceof yr?this.contains(xr.base)&&this.contains(xr.broadcast||xr.last):(mr(xr)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},yr.prototype.next=function(xr){return xr==null&&(xr=1),new yr(gr(this.netLong+this.size*xr),this.mask)},yr.prototype.forEach=function(xr){var wr,br,Sr;for(Sr=mr(this.first),br=mr(this.last),wr=0;Sr<=br;)xr(gr(Sr),Sr,wr),wr++,Sr++},yr.prototype.toString=function(){return this.base+"/"+this.bitmask},yr}(),Netmask_1=cr}).call(commonjsGlobal);const PRIVATE_IP_RANGES=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],NETMASK_RANGES=PRIVATE_IP_RANGES.map(cr=>new Netmask_1(cr));function ipv4Check(cr){for(const ar of NETMASK_RANGES)if(ar.contains(cr))return!0;return!1}function ipv6Check(cr){return/^::$/.test(cr)||/^::1$/.test(cr)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(cr)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(cr)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(cr)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(cr)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(cr)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(cr)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(cr)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(cr)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(cr)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(cr)||/^ff([0-9a-fA-F]{2,2}):/i.test(cr)}function isPrivateIp(cr){return isIPv4(cr)?ipv4Check(cr):isIPv6(cr)?ipv6Check(cr):void 0}function connectionGater(cr={}){return{denyDialPeer:async()=>!1,denyDialMultiaddr:async ar=>{const dr=ar.stringTuples();return dr[0][0]===4||dr[0][0]===41?!!isPrivateIp(`${dr[0][1]}`):!1},denyInboundConnection:async()=>!1,denyOutboundConnection:async()=>!1,denyInboundEncryptedConnection:async()=>!1,denyOutboundEncryptedConnection:async()=>!1,denyInboundUpgradedConnection:async()=>!1,denyOutboundUpgradedConnection:async()=>!1,filterMultiaddrForPeer:async()=>!0,...cr}}const toParts=cr=>cr.toString().split("/").slice(1),func=cr=>({match:ar=>ar.length<1?!1:cr(ar[0])?ar.slice(1):!1,pattern:"fn"}),literal=cr=>({match:ar=>func(dr=>dr===cr).match(ar),pattern:cr}),string=()=>({match:cr=>func(ar=>typeof ar=="string").match(cr),pattern:"{string}"}),number$1=()=>({match:cr=>func(ar=>!isNaN(parseInt(ar))).match(cr),pattern:"{number}"}),peerId=()=>({match:cr=>{if(cr.length<2||cr[0]!=="p2p"&&cr[0]!=="ipfs")return!1;if(cr[1].startsWith("Q")||cr[1].startsWith("1"))try{base58btc.decode(`z${cr[1]}`)}catch{return!1}else return!1;return cr.slice(2)},pattern:"/p2p/{peerid}"}),certhash=()=>({match:cr=>{if(cr.length<2||cr[0]!=="certhash")return!1;try{base64url.decode(cr[1])}catch{return!1}return cr.slice(2)},pattern:"/certhash/{certhash}"}),optional=cr=>({match:ar=>{const dr=cr.match(ar);return dr===!1?ar:dr},pattern:`optional(${cr.pattern})`}),or$1=(...cr)=>({match:ar=>{let dr;for(const fr of cr){const hr=fr.match(ar);hr!==!1&&(dr==null||hr.length<dr.length)&&(dr=hr)}return dr??!1},pattern:`or(${cr.map(ar=>ar.pattern).join(", ")})`}),and$1=(...cr)=>({match:ar=>{for(const dr of cr){const fr=dr.match(ar);if(fr===!1)return!1;ar=fr}return ar},pattern:`and(${cr.map(ar=>ar.pattern).join(", ")})`});function fmt(...cr){function ar(hr){let pr=toParts(hr);for(const mr of cr){const gr=mr.match(pr);if(gr===!1)return!1;pr=gr}return pr}function dr(hr){return ar(hr)!==!1}function fr(hr){const pr=ar(hr);return pr===!1?!1:pr.length===0}return{matches:dr,exactMatch:fr}}const _DNS4=and$1(literal("dns4"),string()),_DNS6=and$1(literal("dns6"),string()),_DNSADDR=and$1(literal("dnsaddr"),string()),_DNS=and$1(literal("dns"),string());fmt(or$1(_DNS,_DNSADDR,_DNS4,_DNS6));const _IP4=and$1(literal("ip4"),func(isIPv4)),_IP6=and$1(literal("ip6"),func(isIPv6)),_IP=or$1(_IP4,_IP6),_IP_OR_DOMAIN=or$1(_IP,_DNS,_DNS4,_DNS6,_DNSADDR),IP_OR_DOMAIN=fmt(_IP_OR_DOMAIN),_TCP=and$1(_IP_OR_DOMAIN,literal("tcp"),number$1()),_UDP=and$1(_IP_OR_DOMAIN,literal("udp"),number$1()),TCP_OR_UDP=or$1(_TCP,_UDP),_QUIC=and$1(_UDP,literal("quic")),_QUICV1=and$1(_UDP,literal("quic-v1")),QUIC_V0_OR_V1=or$1(_QUIC,_QUICV1),_WEB=or$1(_IP_OR_DOMAIN,_TCP,_UDP,_QUIC,_QUICV1),_WebSockets$1=or$1(and$1(_WEB,literal("ws"),optional(peerId()))),WebSockets$2=fmt(_WebSockets$1),_WebSocketsSecure$1=or$1(and$1(_WEB,literal("wss"),optional(peerId())),and$1(_WEB,literal("tls"),literal("ws"),optional(peerId()))),WebSocketsSecure$1=fmt(_WebSocketsSecure$1),_WebRTCDirect$1=and$1(TCP_OR_UDP,literal("webrtc-direct"),certhash(),optional(certhash()),optional(peerId())),_WebTransport$1=and$1(_QUICV1,literal("webtransport"),certhash(),certhash(),optional(peerId())),_P2P$1=or$1(_WebSockets$1,_WebSocketsSecure$1,and$1(_TCP,optional(peerId())),and$1(QUIC_V0_OR_V1,optional(peerId())),and$1(_IP_OR_DOMAIN,optional(peerId())),_WebRTCDirect$1,_WebTransport$1,peerId()),_Circuit$1=and$1(_P2P$1,literal("p2p-circuit"),peerId()),Circuit$1=fmt(_Circuit$1),_WebRTC=or$1(and$1(_P2P$1,literal("p2p-circuit"),literal("webrtc"),peerId()),and$1(_P2P$1,literal("webrtc"),optional(peerId())),literal("webrtc")),WebRTC=fmt(_WebRTC);function isPrivate(cr){try{const{address:ar}=cr.nodeAddress();return!!isPrivateIp(ar)}catch{return!0}}function publicAddressesFirst(cr,ar){const dr=isPrivate(cr.multiaddr),fr=isPrivate(ar.multiaddr);return dr&&!fr?1:!dr&&fr?-1:0}function certifiedAddressesFirst(cr,ar){return cr.isCertified&&!ar.isCertified?-1:!cr.isCertified&&ar.isCertified?1:0}function circuitRelayAddressesLast(cr,ar){const dr=Circuit$1.exactMatch(cr.multiaddr),fr=Circuit$1.exactMatch(ar.multiaddr);return dr&&!fr?1:!dr&&fr?-1:0}function defaultAddressSort(cr,ar){const dr=publicAddressesFirst(cr,ar);if(dr!==0)return dr;const fr=circuitRelayAddressesLast(cr,ar);return fr!==0?fr:certifiedAddressesFirst(cr,ar)}var s$1=1e3,m=s$1*60,h=m*60,d$1=h*24,w=d$1*7,y=d$1*365.25,ms=function(cr,ar){ar=ar||{};var dr=typeof cr;if(dr==="string"&&cr.length>0)return parse(cr);if(dr==="number"&&isFinite(cr))return ar.long?fmtLong(cr):fmtShort(cr);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(cr))};function parse(cr){if(cr=String(cr),!(cr.length>100)){var ar=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(cr);if(ar){var dr=parseFloat(ar[1]),fr=(ar[2]||"ms").toLowerCase();switch(fr){case"years":case"year":case"yrs":case"yr":case"y":return dr*y;case"weeks":case"week":case"w":return dr*w;case"days":case"day":case"d":return dr*d$1;case"hours":case"hour":case"hrs":case"hr":case"h":return dr*h;case"minutes":case"minute":case"mins":case"min":case"m":return dr*m;case"seconds":case"second":case"secs":case"sec":case"s":return dr*s$1;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return dr;default:return}}}}function fmtShort(cr){var ar=Math.abs(cr);return ar>=d$1?Math.round(cr/d$1)+"d":ar>=h?Math.round(cr/h)+"h":ar>=m?Math.round(cr/m)+"m":ar>=s$1?Math.round(cr/s$1)+"s":cr+"ms"}function fmtLong(cr){var ar=Math.abs(cr);return ar>=d$1?plural(cr,ar,d$1,"day"):ar>=h?plural(cr,ar,h,"hour"):ar>=m?plural(cr,ar,m,"minute"):ar>=s$1?plural(cr,ar,s$1,"second"):cr+" ms"}function plural(cr,ar,dr,fr){var hr=ar>=dr*1.5;return Math.round(cr/dr)+" "+fr+(hr?"s":"")}var receptacle=Receptacle,toMS=ms,cache$1=Receptacle.prototype,counter=new Date%1e9;function getUID(){return(Math.random()*1e9>>>0)+counter++}function Receptacle(cr){cr=cr||{},this.id=cr.id||getUID(),this.max=cr.max||1/0,this.items=cr.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(cr.lastModified||new Date);for(var ar,dr,fr=this.items.length;fr--;)ar=this.items[fr],dr=new Date(ar.expires)-new Date,this._lookup[ar.key]=ar,dr>0?this.expire(ar.key,dr):dr<=0&&this.delete(ar.key)}cache$1.has=function(cr){return cr in this._lookup};cache$1.get=function(cr){if(!this.has(cr))return null;var ar=this._lookup[cr];return ar.refresh&&this.expire(cr,ar.refresh),this.items.splice(this.items.indexOf(ar),1),this.items.push(ar),ar.value};cache$1.meta=function(cr){if(!this.has(cr))return null;var ar=this._lookup[cr];return"meta"in ar?ar.meta:null};cache$1.set=function(cr,ar,dr){var fr=this._lookup[cr],hr=this._lookup[cr]={key:cr,value:ar};return this.lastModified=new Date,fr?(clearTimeout(fr.timeout),this.items.splice(this.items.indexOf(fr),1,hr)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(hr),this.size++),dr&&("ttl"in dr&&this.expire(cr,dr.ttl),"meta"in dr&&(hr.meta=dr.meta),dr.refresh&&(hr.refresh=dr.ttl)),this};cache$1.delete=function(cr){var ar=this._lookup[cr];return ar?(this.lastModified=new Date,this.items.splice(this.items.indexOf(ar),1),clearTimeout(ar.timeout),delete this._lookup[cr],this.size--,this):!1};cache$1.expire=function(cr,ar){var dr=ar||0,fr=this._lookup[cr];if(!fr)return this;if(typeof dr=="string"&&(dr=toMS(ar)),typeof dr!="number")throw new TypeError("Expiration time must be a string or number.");return clearTimeout(fr.timeout),fr.timeout=setTimeout(this.delete.bind(this,fr.key),dr),fr.expires=Number(new Date)+dr,this};cache$1.clear=function(){for(var cr=this.items.length;cr--;)this.delete(this.items[cr].key);return this};cache$1.toJSON=function(){for(var cr=new Array(this.items.length),ar,dr=cr.length;dr--;)ar=this.items[dr],cr[dr]={key:ar.key,meta:ar.meta,value:ar.value,expires:ar.expires,refresh:ar.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:cr}};const Receptacle$1=getDefaultExportFromCjs(receptacle);function buildResource(cr,ar,dr){return`${cr}?name=${ar}&type=${dr}`}async function request(cr,ar){return await(await fetch(cr,{headers:new Headers({accept:"application/dns-json"}),signal:ar})).json()}function getCacheKey(cr,ar){return`${ar}_${cr}`}const log=Object.assign(debug("dns-over-http-resolver"),{error:debug("dns-over-http-resolver:error")});class Resolver{_cache;_TXTcache;_servers;_request;_abortControllers;constructor(ar={}){this._cache=new Receptacle$1({max:ar?.maxCache??100}),this._TXTcache=new Receptacle$1({max:ar?.maxCache??100}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"],this._request=ar.request??request,this._abortControllers=[]}cancel(){this._abortControllers.forEach(ar=>{ar.abort()})}getServers(){return this._servers}_getShuffledServers(){const ar=[...this._servers];for(let dr=ar.length-1;dr>0;dr--){const fr=Math.floor(Math.random()*dr),hr=ar[dr];ar[dr]=ar[fr],ar[fr]=hr}return ar}setServers(ar){this._servers=ar}async resolve(ar,dr="A"){switch(dr){case"A":return this.resolve4(ar);case"AAAA":return this.resolve6(ar);case"TXT":return this.resolveTxt(ar);default:throw new Error(`${dr} is not supported`)}}async resolve4(ar){const dr="A",fr=this._cache.get(getCacheKey(ar,dr));if(fr!=null)return fr;let hr=!1;for(const pr of this._getShuffledServers()){const mr=new AbortController;this._abortControllers.push(mr);try{const gr=await this._request(buildResource(pr,ar,dr),mr.signal),yr=gr.Answer.map(wr=>wr.data),xr=Math.min(...gr.Answer.map(wr=>wr.TTL));return this._cache.set(getCacheKey(ar,dr),yr,{ttl:xr}),yr}catch{mr.signal.aborted&&(hr=!0),log.error(`${pr} could not resolve ${ar} record ${dr}`)}finally{this._abortControllers=this._abortControllers.filter(gr=>gr!==mr)}}throw hr?Object.assign(new Error("queryA ECANCELLED"),{code:"ECANCELLED"}):new Error(`Could not resolve ${ar} record ${dr}`)}async resolve6(ar){const dr="AAAA",fr=this._cache.get(getCacheKey(ar,dr));if(fr!=null)return fr;let hr=!1;for(const pr of this._getShuffledServers()){const mr=new AbortController;this._abortControllers.push(mr);try{const gr=await this._request(buildResource(pr,ar,dr),mr.signal),yr=gr.Answer.map(wr=>wr.data),xr=Math.min(...gr.Answer.map(wr=>wr.TTL));return this._cache.set(getCacheKey(ar,dr),yr,{ttl:xr}),yr}catch{mr.signal.aborted&&(hr=!0),log.error(`${pr} could not resolve ${ar} record ${dr}`)}finally{this._abortControllers=this._abortControllers.filter(gr=>gr!==mr)}}throw hr?Object.assign(new Error("queryAaaa ECANCELLED"),{code:"ECANCELLED"}):new Error(`Could not resolve ${ar} record ${dr}`)}async resolveTxt(ar){const dr="TXT",fr=this._TXTcache.get(getCacheKey(ar,dr));if(fr!=null)return fr;let hr=!1;for(const pr of this._getShuffledServers()){const mr=new AbortController;this._abortControllers.push(mr);try{const gr=await this._request(buildResource(pr,ar,dr),mr.signal),yr=gr.Answer.map(wr=>[wr.data.replace(/['"]+/g,"")]),xr=Math.min(...gr.Answer.map(wr=>wr.TTL));return this._TXTcache.set(getCacheKey(ar,dr),yr,{ttl:xr}),yr}catch{mr.signal.aborted&&(hr=!0),log.error(`${pr} could not resolve ${ar} record ${dr}`)}finally{this._abortControllers=this._abortControllers.filter(gr=>gr!==mr)}}throw hr?Object.assign(new Error("queryTxt ECANCELLED"),{code:"ECANCELLED"}):new Error(`Could not resolve ${ar} record ${dr}`)}clearCache(){this._cache.clear(),this._TXTcache.clear()}}const{code:dnsaddrCode}=getProtocol("dnsaddr");async function dnsaddrResolver(cr,ar={}){const dr=new Resolver;ar.signal!=null&&ar.signal.addEventListener("abort",()=>{dr.cancel()});const fr=cr.getPeerId(),[,hr]=cr.stringTuples().find(([gr])=>gr===dnsaddrCode)??[];if(hr==null)throw new Error("No hostname found in multiaddr");let mr=(await dr.resolveTxt(`_dnsaddr.${hr}`)).flat().map(gr=>gr.split("=")[1]).filter(Boolean);return fr!=null&&(mr=mr.filter(gr=>gr.includes(fr))),mr}var isPlainObj=cr=>{if(Object.prototype.toString.call(cr)!=="[object Object]")return!1;const ar=Object.getPrototypeOf(cr);return ar===null||ar===Object.prototype};const isOptionObject=isPlainObj,{hasOwnProperty}=Object.prototype,{propertyIsEnumerable}=Object,defineProperty=(cr,ar,dr)=>Object.defineProperty(cr,ar,{value:dr,writable:!0,enumerable:!0,configurable:!0}),globalThis$1=commonjsGlobal,defaultMergeOptions={concatArrays:!1,ignoreUndefined:!1},getEnumerableOwnPropertyKeys=cr=>{const ar=[];for(const dr in cr)hasOwnProperty.call(cr,dr)&&ar.push(dr);if(Object.getOwnPropertySymbols){const dr=Object.getOwnPropertySymbols(cr);for(const fr of dr)propertyIsEnumerable.call(cr,fr)&&ar.push(fr)}return ar};function clone(cr){return Array.isArray(cr)?cloneArray(cr):isOptionObject(cr)?cloneOptionObject(cr):cr}function cloneArray(cr){const ar=cr.slice(0,0);return getEnumerableOwnPropertyKeys(cr).forEach(dr=>{defineProperty(ar,dr,clone(cr[dr]))}),ar}function cloneOptionObject(cr){const ar=Object.getPrototypeOf(cr)===null?Object.create(null):{};return getEnumerableOwnPropertyKeys(cr).forEach(dr=>{defineProperty(ar,dr,clone(cr[dr]))}),ar}const mergeKeys=(cr,ar,dr,fr)=>(dr.forEach(hr=>{typeof ar[hr]>"u"&&fr.ignoreUndefined||(hr in cr&&cr[hr]!==Object.getPrototypeOf(cr)?defineProperty(cr,hr,merge$1(cr[hr],ar[hr],fr)):defineProperty(cr,hr,clone(ar[hr])))}),cr),concatArrays=(cr,ar,dr)=>{let fr=cr.slice(0,0),hr=0;return[cr,ar].forEach(pr=>{const mr=[];for(let gr=0;gr<pr.length;gr++)hasOwnProperty.call(pr,gr)&&(mr.push(String(gr)),pr===cr?defineProperty(fr,hr++,pr[gr]):defineProperty(fr,hr++,clone(pr[gr])));fr=mergeKeys(fr,pr,getEnumerableOwnPropertyKeys(pr).filter(gr=>!mr.includes(gr)),dr)}),fr};function merge$1(cr,ar,dr){return dr.concatArrays&&Array.isArray(cr)&&Array.isArray(ar)?concatArrays(cr,ar,dr):!isOptionObject(ar)||!isOptionObject(cr)?clone(ar):mergeKeys(cr,ar,getEnumerableOwnPropertyKeys(ar),dr)}var mergeOptions=function(...cr){const ar=merge$1(clone(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let dr={_:{}};for(const fr of cr)if(fr!==void 0){if(!isOptionObject(fr))throw new TypeError("`"+fr+"` is not an Option Object");dr=merge$1(dr,{_:fr},ar)}return dr._};const mergeOptions$1=getDefaultExportFromCjs(mergeOptions);var messages;(function(cr){cr.NOT_STARTED_YET="The libp2p node is not started yet",cr.ERR_PROTECTOR_REQUIRED="Private network is enforced, but no protector was provided",cr.NOT_FOUND="Not found"})(messages||(messages={}));var codes$1;(function(cr){cr.ERR_PROTECTOR_REQUIRED="ERR_PROTECTOR_REQUIRED",cr.ERR_PEER_DIAL_INTERCEPTED="ERR_PEER_DIAL_INTERCEPTED",cr.ERR_CONNECTION_INTERCEPTED="ERR_CONNECTION_INTERCEPTED",cr.ERR_INVALID_PROTOCOLS_FOR_STREAM="ERR_INVALID_PROTOCOLS_FOR_STREAM",cr.ERR_CONNECTION_ENDED="ERR_CONNECTION_ENDED",cr.ERR_CONNECTION_FAILED="ERR_CONNECTION_FAILED",cr.ERR_NODE_NOT_STARTED="ERR_NODE_NOT_STARTED",cr.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",cr.ERR_TOO_MANY_ADDRESSES="ERR_TOO_MANY_ADDRESSES",cr.ERR_NO_VALID_ADDRESSES="ERR_NO_VALID_ADDRESSES",cr.ERR_RELAYED_DIAL="ERR_RELAYED_DIAL",cr.ERR_DIALED_SELF="ERR_DIALED_SELF",cr.ERR_DISCOVERED_SELF="ERR_DISCOVERED_SELF",cr.ERR_DUPLICATE_TRANSPORT="ERR_DUPLICATE_TRANSPORT",cr.ERR_ENCRYPTION_FAILED="ERR_ENCRYPTION_FAILED",cr.ERR_HOP_REQUEST_FAILED="ERR_HOP_REQUEST_FAILED",cr.ERR_INVALID_KEY="ERR_INVALID_KEY",cr.ERR_INVALID_MESSAGE="ERR_INVALID_MESSAGE",cr.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",cr.ERR_INVALID_PEER="ERR_INVALID_PEER",cr.ERR_MUXER_UNAVAILABLE="ERR_MUXER_UNAVAILABLE",cr.ERR_NOT_FOUND="ERR_NOT_FOUND",cr.ERR_TRANSPORT_UNAVAILABLE="ERR_TRANSPORT_UNAVAILABLE",cr.ERR_TRANSPORT_DIAL_FAILED="ERR_TRANSPORT_DIAL_FAILED",cr.ERR_UNSUPPORTED_PROTOCOL="ERR_UNSUPPORTED_PROTOCOL",cr.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",cr.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",cr.ERR_SIGNATURE_NOT_VALID="ERR_SIGNATURE_NOT_VALID",cr.ERR_FIND_SELF="ERR_FIND_SELF",cr.ERR_NO_ROUTERS_AVAILABLE="ERR_NO_ROUTERS_AVAILABLE",cr.ERR_CONNECTION_NOT_MULTIPLEXED="ERR_CONNECTION_NOT_MULTIPLEXED",cr.ERR_NO_DIAL_TOKENS="ERR_NO_DIAL_TOKENS",cr.ERR_INVALID_CMS="ERR_INVALID_CMS",cr.ERR_MISSING_KEYS="ERR_MISSING_KEYS",cr.ERR_NO_KEY="ERR_NO_KEY",cr.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",cr.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",cr.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",cr.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",cr.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",cr.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",cr.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",cr.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",cr.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",cr.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",cr.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",cr.ERR_MISSING_PUBLIC_KEY="ERR_MISSING_PUBLIC_KEY",cr.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",cr.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",cr.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH",cr.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",cr.ERR_WRONG_PING_ACK="ERR_WRONG_PING_ACK",cr.ERR_INVALID_RECORD="ERR_INVALID_RECORD",cr.ERR_ALREADY_SUCCEEDED="ERR_ALREADY_SUCCEEDED",cr.ERR_NO_HANDLER_FOR_PROTOCOL="ERR_NO_HANDLER_FOR_PROTOCOL",cr.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS",cr.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",cr.ERR_CONNECTION_DENIED="ERR_CONNECTION_DENIED",cr.ERR_TRANSFER_LIMIT_EXCEEDED="ERR_TRANSFER_LIMIT_EXCEEDED"})(codes$1||(codes$1={}));const DefaultConfig={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:cr=>cr},connectionManager:{resolvers:{dnsaddr:dnsaddrResolver},addressSorter:defaultAddressSort},transportManager:{faultTolerance:FaultTolerance$1.FATAL_ALL}};async function validateConfig(cr){const ar=mergeOptions$1(DefaultConfig,cr);if(ar.connectionProtector===null&&globalThis.process?.env?.LIBP2P_FORCE_PNET!=null)throw new CodeError$3(messages.ERR_PROTECTOR_REQUIRED,codes$1.ERR_PROTECTOR_REQUIRED);if(!(await peerIdFromKeys(ar.privateKey.public.bytes,ar.privateKey.bytes)).equals(ar.peerId))throw new CodeError$3("Private key doesn't match peer id",codes$1.ERR_INVALID_KEY);return ar}const createAbortError=()=>{const cr=new Error("Delay aborted");return cr.name="AbortError",cr},clearMethods=new WeakMap;function createDelay({clearTimeout:cr,setTimeout:ar}={}){return(dr,{value:fr,signal:hr}={})=>{if(hr?.aborted)return Promise.reject(createAbortError());let pr,mr,gr;const yr=cr??clearTimeout,xr=()=>{yr(pr),gr(createAbortError())},wr=()=>{hr&&hr.removeEventListener("abort",xr)},br=new Promise((Sr,vr)=>{mr=()=>{wr(),Sr(fr)},gr=vr,pr=(ar??setTimeout)(mr,dr)});return hr&&hr.addEventListener("abort",xr,{once:!0}),clearMethods.set(br,()=>{yr(pr),pr=null,mr()}),br}}const delay=createDelay();class RateLimiter{memoryStorage;points;duration;blockDuration;execEvenly;execEvenlyMinDelayMs;keyPrefix;constructor(ar={}){this.points=ar.points??4,this.duration=ar.duration??1,this.blockDuration=ar.blockDuration??0,this.execEvenly=ar.execEvenly??!1,this.execEvenlyMinDelayMs=ar.execEvenlyMinDelayMs??this.duration*1e3/this.points,this.keyPrefix=ar.keyPrefix??"rlflx",this.memoryStorage=new MemoryStorage}async consume(ar,dr=1,fr={}){const hr=this.getKey(ar),pr=this._getKeySecDuration(fr);let mr=this.memoryStorage.incrby(hr,dr,pr);if(mr.remainingPoints=Math.max(this.points-mr.consumedPoints,0),mr.consumedPoints>this.points)throw this.blockDuration>0&&mr.consumedPoints<=this.points+dr&&(mr=this.memoryStorage.set(hr,mr.consumedPoints,this.blockDuration)),new CodeError$3("Rate limit exceeded","ERR_RATE_LIMIT_EXCEEDED",mr);if(this.execEvenly&&mr.msBeforeNext>0&&!mr.isFirstInDuration){let gr=Math.ceil(mr.msBeforeNext/(mr.remainingPoints+2));gr<this.execEvenlyMinDelayMs&&(gr=mr.consumedPoints*this.execEvenlyMinDelayMs),await delay(gr)}return mr}penalty(ar,dr=1,fr={}){const hr=this.getKey(ar),pr=this._getKeySecDuration(fr),mr=this.memoryStorage.incrby(hr,dr,pr);return mr.remainingPoints=Math.max(this.points-mr.consumedPoints,0),mr}reward(ar,dr=1,fr={}){const hr=this.getKey(ar),pr=this._getKeySecDuration(fr),mr=this.memoryStorage.incrby(hr,-dr,pr);return mr.remainingPoints=Math.max(this.points-mr.consumedPoints,0),mr}block(ar,dr){const fr=dr*1e3,hr=this.points+1;return this.memoryStorage.set(this.getKey(ar),hr,dr),{remainingPoints:0,msBeforeNext:fr===0?-1:fr,consumedPoints:hr,isFirstInDuration:!1}}set(ar,dr,fr=0){const hr=(fr>=0?fr:this.duration)*1e3;return this.memoryStorage.set(this.getKey(ar),dr,fr),{remainingPoints:0,msBeforeNext:hr===0?-1:hr,consumedPoints:dr,isFirstInDuration:!1}}get(ar){const dr=this.memoryStorage.get(this.getKey(ar));return dr!=null&&(dr.remainingPoints=Math.max(this.points-dr.consumedPoints,0)),dr}delete(ar){this.memoryStorage.delete(this.getKey(ar))}_getKeySecDuration(ar){return ar?.customDuration!=null&&ar.customDuration>=0?ar.customDuration:this.duration}getKey(ar){return this.keyPrefix.length>0?`${this.keyPrefix}:${ar}`:ar}parseKey(ar){return ar.substring(this.keyPrefix.length)}}class MemoryStorage{storage;constructor(){this.storage=new Map}incrby(ar,dr,fr){const hr=this.storage.get(ar);if(hr!=null){const pr=hr.expiresAt!=null?hr.expiresAt.getTime()-new Date().getTime():-1;return hr.expiresAt==null||pr>0?(hr.value+=dr,{remainingPoints:0,msBeforeNext:pr,consumedPoints:hr.value,isFirstInDuration:!1}):this.set(ar,dr,fr)}return this.set(ar,dr,fr)}set(ar,dr,fr){const hr=fr*1e3,pr=this.storage.get(ar);pr!=null&&clearTimeout(pr.timeoutId);const mr={value:dr,expiresAt:hr>0?new Date(Date.now()+hr):void 0};return this.storage.set(ar,mr),hr>0&&(mr.timeoutId=setTimeout(()=>{this.storage.delete(ar)},hr),mr.timeoutId.unref!=null&&mr.timeoutId.unref()),{remainingPoints:0,msBeforeNext:hr===0?-1:hr,consumedPoints:mr.value,isFirstInDuration:!0}}get(ar){const dr=this.storage.get(ar);if(dr!=null)return{remainingPoints:0,msBeforeNext:dr.expiresAt!=null?dr.expiresAt.getTime()-new Date().getTime():-1,consumedPoints:dr.value,isFirstInDuration:!1}}delete(ar){const dr=this.storage.get(ar);return dr!=null?(dr.timeoutId!=null&&clearTimeout(dr.timeoutId),this.storage.delete(ar),!0):!1}}function getPeerAddress(cr){if(isPeerId(cr))return{peerId:cr,multiaddrs:[]};Array.isArray(cr)||(cr=[cr]);let ar;if(cr.length>0){const dr=cr[0].getPeerId();ar=dr==null?void 0:peerIdFromString(dr),cr.forEach(fr=>{if(!isMultiaddr(fr))throw new CodeError$3("Invalid Multiaddr",codes$1.ERR_INVALID_MULTIADDR);const hr=fr.getPeerId();if(hr==null){if(ar!=null)throw new CodeError$3("Multiaddrs must all have the same peer id or have no peer id",codes$1.ERR_INVALID_PARAMETERS)}else{const pr=peerIdFromString(hr);if(ar==null||!ar.equals(pr))throw new CodeError$3("Multiaddrs must all have the same peer id or have no peer id",codes$1.ERR_INVALID_PARAMETERS)}})}return{peerId:ar,multiaddrs:cr}}function pDefer(){const cr={};return cr.promise=new Promise((ar,dr)=>{cr.resolve=ar,cr.reject=dr}),cr}class FixedFIFO{buffer;mask;top;btm;next;constructor(ar){if(!(ar>0)||ar-1&ar)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(ar),this.mask=ar-1,this.top=0,this.btm=0,this.next=null}push(ar){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=ar,this.top=this.top+1&this.mask,!0)}shift(){const ar=this.buffer[this.btm];if(ar!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,ar}isEmpty(){return this.buffer[this.btm]===void 0}}class FIFO{size;hwm;head;tail;constructor(ar={}){this.hwm=ar.splitLimit??16,this.head=new FixedFIFO(this.hwm),this.tail=this.head,this.size=0}calculateSize(ar){return ar?.byteLength!=null?ar.byteLength:1}push(ar){if(ar?.value!=null&&(this.size+=this.calculateSize(ar.value)),!this.head.push(ar)){const dr=this.head;this.head=dr.next=new FixedFIFO(2*this.head.buffer.length),this.head.push(ar)}}shift(){let ar=this.tail.shift();if(ar===void 0&&this.tail.next!=null){const dr=this.tail.next;this.tail.next=null,this.tail=dr,ar=this.tail.shift()}return ar?.value!=null&&(this.size-=this.calculateSize(ar.value)),ar}isEmpty(){return this.head.isEmpty()}}let AbortError$4=class extends Error{type;code;constructor(ar,dr){super(ar??"The operation was aborted"),this.type="aborted",this.code=dr??"ABORT_ERR"}};function pushable$1(cr={}){return _pushable(dr=>{const fr=dr.shift();if(fr==null)return{done:!0};if(fr.error!=null)throw fr.error;return{done:fr.done===!0,value:fr.value}},cr)}function _pushable(cr,ar){ar=ar??{};let dr=ar.onEnd,fr=new FIFO,hr,pr,mr,gr=pDefer();const yr=async()=>{try{return fr.isEmpty()?mr?{done:!0}:await new Promise((_r,Cr)=>{pr=kr=>{pr=null,fr.push(kr);try{_r(cr(fr))}catch(Rr){Cr(Rr)}return hr}}):cr(fr)}finally{fr.isEmpty()&&queueMicrotask(()=>{gr.resolve(),gr=pDefer()})}},xr=_r=>pr!=null?pr(_r):(fr.push(_r),hr),wr=_r=>(fr=new FIFO,pr!=null?pr({error:_r}):(fr.push({error:_r}),hr)),br=_r=>{if(mr)return hr;if(ar?.objectMode!==!0&&_r?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return xr({done:!1,value:_r})},Sr=_r=>mr?hr:(mr=!0,_r!=null?wr(_r):xr({done:!0})),vr=()=>(fr=new FIFO,Sr(),{done:!0}),Er=_r=>(Sr(_r),{done:!0});if(hr={[Symbol.asyncIterator](){return this},next:yr,return:vr,throw:Er,push:br,end:Sr,get readableLength(){return fr.size},onEmpty:async _r=>{const Cr=_r?.signal;if(Cr?.throwIfAborted(),fr.isEmpty())return;let kr,Rr;Cr!=null&&(kr=new Promise((Ir,Nr)=>{Rr=()=>{Nr(new AbortError$4)},Cr.addEventListener("abort",Rr)}));try{await Promise.race([gr.promise,kr])}finally{Rr!=null&&Cr!=null&&Cr?.removeEventListener("abort",Rr)}}},dr==null)return hr;const Ar=hr;return hr={[Symbol.asyncIterator](){return this},next(){return Ar.next()},throw(_r){return Ar.throw(_r),dr!=null&&(dr(_r),dr=void 0),{done:!0}},return(){return Ar.return(),dr!=null&&(dr(),dr=void 0),{done:!0}},push:br,end(_r){return Ar.end(_r),dr!=null&&(dr(_r),dr=void 0),hr},get readableLength(){return Ar.readableLength},onEmpty:_r=>Ar.onEmpty(_r)},hr}let AbortError$3=class extends Error{type;code;constructor(ar,dr){super(ar??"The operation was aborted"),this.type="aborted",this.name="AbortError",this.code=dr??"ABORT_ERR"}};async function raceEvent(cr,ar,dr,fr){const hr=new AbortError$3(fr?.errorMessage,fr?.errorCode);return dr?.aborted===!0?Promise.reject(hr):new Promise((pr,mr)=>{const gr=xr=>{fr?.filter?.(xr)!==!1&&(cr.removeEventListener(ar,gr),dr?.removeEventListener("abort",yr),pr(xr))},yr=()=>{cr.removeEventListener(ar,gr),dr?.removeEventListener("abort",yr),mr(hr)};cr.addEventListener(ar,gr),dr?.addEventListener("abort",yr)})}let AbortError$2=class extends Error{type;code;constructor(ar,dr){super(ar??"The operation was aborted"),this.type="aborted",this.name="AbortError",this.code=dr??"ABORT_ERR"}};async function raceSignal(cr,ar,dr){if(ar==null)return cr;if(ar.aborted)return Promise.reject(new AbortError$2(dr?.errorMessage,dr?.errorCode));let fr;const hr=new AbortError$2(dr?.errorMessage,dr?.errorCode);try{return await Promise.race([cr,new Promise((pr,mr)=>{fr=()=>{mr(hr)},ar.addEventListener("abort",fr)})])}finally{fr!=null&&ar.removeEventListener("abort",fr)}}class JobRecipient{deferred;signal;where;constructor(ar,dr){this.signal=dr,this.deferred=pDefer(),this.where=ar,this.onAbort=this.onAbort.bind(this),this.signal?.addEventListener("abort",this.onAbort)}onAbort(){this.deferred.reject(new AbortError$6)}cleanup(){this.signal?.removeEventListener("abort",this.onAbort)}}function randomId(){return`${parseInt(String(Math.random()*1e9),10).toString()}${Date.now()}`}class Job{id;fn;options;priority;recipients;status;timeline;controller;constructor(ar,dr,fr=0){this.id=randomId(),this.status="queued",this.fn=ar,this.priority=fr,this.options=dr,this.recipients=[],this.timeline={created:Date.now()},this.controller=new AbortController,setMaxListeners(1/0,this.controller.signal),this.onAbort=this.onAbort.bind(this)}abort(ar){this.controller.abort(ar)}onAbort(){this.recipients.reduce((dr,fr)=>dr&&fr.signal?.aborted===!0,!0)&&this.controller.abort(new AbortError$6)}async join(ar={}){const dr=new JobRecipient(new Error("where").stack,ar.signal);return this.recipients.push(dr),ar.signal?.addEventListener("abort",this.onAbort),dr.deferred.promise}async run(){this.status="running",this.timeline.started=Date.now();try{this.controller.signal.throwIfAborted();const ar=await raceSignal(this.fn({...this.options??{},signal:this.controller.signal}),this.controller.signal);this.recipients.forEach(dr=>{dr.deferred.resolve(ar)}),this.status="complete"}catch(ar){this.recipients.forEach(dr=>{dr.deferred.reject(ar)}),this.status="errored"}finally{this.timeline.finished=Date.now(),this.cleanup()}}cleanup(){this.recipients.forEach(ar=>{ar.signal?.removeEventListener("abort",this.onAbort)})}}function lowerBound$1(cr,ar,dr){let fr=0,hr=cr.length;for(;hr>0;){const pr=Math.trunc(hr/2);let mr=fr+pr;dr(cr[mr],ar)<=0?(fr=++mr,hr-=pr+1):hr=pr}return fr}class Queue extends TypedEventEmitter{concurrency;queue;pending;constructor(ar={}){super(),this.concurrency=ar.concurrency??Number.POSITIVE_INFINITY,this.pending=0,ar.metricName!=null&&ar.metrics?.registerMetricGroup(ar.metricName,{calculate:()=>({size:this.queue.length,running:this.pending,queued:this.queue.length-this.pending})}),this.queue=[]}tryToStartAnother(){if(this.size===0)return queueMicrotask(()=>{this.safeDispatchEvent("empty")}),this.running===0&&queueMicrotask(()=>{this.safeDispatchEvent("idle")}),!1;if(this.pending<this.concurrency){let ar;for(const dr of this.queue)if(dr.status==="queued"){ar=dr;break}return ar==null?!1:(this.safeDispatchEvent("active"),this.pending++,ar.run().finally(()=>{for(let dr=0;dr<this.queue.length;dr++)if(this.queue[dr]===ar){this.queue.splice(dr,1);break}this.pending--,this.tryToStartAnother(),this.safeDispatchEvent("next")}),!0)}return!1}enqueue(ar){if(this.queue[this.size-1]?.priority>=ar.priority){this.queue.push(ar);return}const dr=lowerBound$1(this.queue,ar,(fr,hr)=>hr.priority-fr.priority);this.queue.splice(dr,0,ar)}async add(ar,dr){dr?.signal?.throwIfAborted();const fr=new Job(ar,dr,dr?.priority),hr=fr.join(dr).then(pr=>(this.safeDispatchEvent("completed",{detail:pr}),pr)).catch(pr=>{throw this.safeDispatchEvent("error",{detail:pr}),pr});return this.enqueue(fr),this.safeDispatchEvent("add"),this.tryToStartAnother(),hr}clear(){this.queue.splice(0,this.queue.length)}abort(){this.queue.forEach(ar=>{ar.abort(new AbortError$6)}),this.clear()}async onEmpty(ar){this.size!==0&&await raceEvent(this,"empty",ar?.signal)}async onSizeLessThan(ar,dr){this.size<ar||await raceEvent(this,"next",dr?.signal,{filter:()=>this.size<ar})}async onIdle(ar){this.pending===0&&this.size===0||await raceEvent(this,"idle",ar?.signal)}get size(){return this.queue.length}get queued(){return this.queue.length-this.pending}get running(){return this.pending}async*toGenerator(ar){ar?.signal?.throwIfAborted();const dr=pushable$1({objectMode:!0}),fr=yr=>{yr!=null?this.abort():this.clear(),dr.end(yr)},hr=yr=>{yr.detail!=null&&dr.push(yr.detail)},pr=yr=>{fr(yr.detail)},mr=()=>{fr()},gr=()=>{fr(new CodeError$3("Queue aborted","ERR_QUEUE_ABORTED"))};this.addEventListener("completed",hr),this.addEventListener("error",pr),this.addEventListener("idle",mr),ar?.signal?.addEventListener("abort",gr);try{yield*dr}finally{this.removeEventListener("completed",hr),this.removeEventListener("error",pr),this.removeEventListener("idle",mr),ar?.signal?.removeEventListener("abort",gr),fr()}}}class PeerQueue extends Queue{has(ar){return this.find(ar)!=null}find(ar){return this.queue.find(dr=>ar.equals(dr.options.peerId))}}const DIAL_TIMEOUT=3e4,INBOUND_UPGRADE_TIMEOUT=3e4,MAX_PEER_ADDRS_TO_DIAL=25,AUTO_DIAL_INTERVAL=5e3,AUTO_DIAL_CONCURRENCY=25,AUTO_DIAL_PRIORITY=0,AUTO_DIAL_MAX_QUEUE_LENGTH=100,AUTO_DIAL_DISCOVERED_PEERS_DEBOUNCE=10,INBOUND_CONNECTION_THRESHOLD=5,MAX_INCOMING_PENDING_CONNECTIONS=10,LAST_DIAL_FAILURE_KEY="last-dial-failure",MIN_CONNECTIONS$2=5,MAX_CONNECTIONS$3=100,MAX_PARALLEL_DIALS=50,AUTO_DIAL_PEER_RETRY_THRESHOLD=1e3*60*7,defaultOptions$3={minConnections:MIN_CONNECTIONS$2,maxQueueLength:AUTO_DIAL_MAX_QUEUE_LENGTH,autoDialConcurrency:AUTO_DIAL_CONCURRENCY,autoDialPriority:AUTO_DIAL_PRIORITY,autoDialInterval:AUTO_DIAL_INTERVAL,autoDialPeerRetryThreshold:AUTO_DIAL_PEER_RETRY_THRESHOLD,autoDialDiscoveredPeersDebounce:AUTO_DIAL_DISCOVERED_PEERS_DEBOUNCE};class AutoDial{connectionManager;peerStore;queue;minConnections;autoDialPriority;autoDialIntervalMs;autoDialMaxQueueLength;autoDialPeerRetryThresholdMs;autoDialDiscoveredPeersDebounce;autoDialInterval;started;running;log;constructor(ar,dr){this.connectionManager=ar.connectionManager,this.peerStore=ar.peerStore,this.minConnections=dr.minConnections??defaultOptions$3.minConnections,this.autoDialPriority=dr.autoDialPriority??defaultOptions$3.autoDialPriority,this.autoDialIntervalMs=dr.autoDialInterval??defaultOptions$3.autoDialInterval,this.autoDialMaxQueueLength=dr.maxQueueLength??defaultOptions$3.maxQueueLength,this.autoDialPeerRetryThresholdMs=dr.autoDialPeerRetryThreshold??defaultOptions$3.autoDialPeerRetryThreshold,this.autoDialDiscoveredPeersDebounce=dr.autoDialDiscoveredPeersDebounce??defaultOptions$3.autoDialDiscoveredPeersDebounce,this.log=ar.logger.forComponent("libp2p:connection-manager:auto-dial"),this.started=!1,this.running=!1,this.queue=new PeerQueue({concurrency:dr.autoDialConcurrency??defaultOptions$3.autoDialConcurrency,metricName:"libp2p_autodial_queue",metrics:ar.metrics}),this.queue.addEventListener("error",hr=>{this.log.error("error during auto-dial",hr.detail)}),ar.events.addEventListener("connection:close",()=>{this.autoDial().catch(hr=>{this.log.error(hr)})});let fr;ar.events.addEventListener("peer:discovery",()=>{clearTimeout(fr),fr=setTimeout(()=>{this.autoDial().catch(hr=>{this.log.error(hr)})},this.autoDialDiscoveredPeersDebounce)})}isStarted(){return this.started}start(){this.started=!0}afterStart(){this.autoDial().catch(ar=>{this.log.error("error while autodialing",ar)})}stop(){this.queue.clear(),clearTimeout(this.autoDialInterval),this.started=!1,this.running=!1}async autoDial(){if(!this.started||this.running)return;const ar=this.connectionManager.getConnectionsMap(),dr=ar.size;if(dr>=this.minConnections){this.minConnections>0&&this.log.trace("have enough connections %d/%d",dr,this.minConnections);return}if(this.queue.size>this.autoDialMaxQueueLength){this.log("not enough connections %d/%d but auto dial queue is full",dr,this.minConnections),this.sheduleNextAutodial();return}this.running=!0,this.log("not enough connections %d/%d - will dial peers to increase the number of connections",dr,this.minConnections);const fr=new PeerSet(this.connectionManager.getDialQueue().map(xr=>xr.peerId).filter(Boolean)),hr=await this.peerStore.all({filters:[xr=>xr.addresses.length===0?(this.log.trace("not autodialing %p because they have no addresses",xr.id),!1):ar.has(xr.id)?(this.log.trace("not autodialing %p because they are already connected",xr.id),!1):fr.has(xr.id)?(this.log.trace("not autodialing %p because they are already being dialed",xr.id),!1):this.queue.has(xr.id)?(this.log.trace("not autodialing %p because they are already being autodialed",xr.id),!1):!0]}),pr=hr.sort(()=>Math.random()>.5?1:-1),mr=new PeerMap;for(const xr of pr)mr.has(xr.id)||mr.set(xr.id,[...xr.tags.values()].reduce((wr,br)=>wr+br.value,0));const yr=pr.sort((xr,wr)=>{const br=mr.get(xr.id)??0,Sr=mr.get(wr.id)??0;return br>Sr?-1:br<Sr?1:0}).filter(xr=>{const wr=xr.metadata.get(LAST_DIAL_FAILURE_KEY);if(wr==null)return!0;const br=parseInt(toString$2(wr));return isNaN(br)?!0:Date.now()-br>this.autoDialPeerRetryThresholdMs});this.log("selected %d/%d peers to dial",yr.length,hr.length);for(const xr of yr)this.queue.add(async()=>{const wr=this.connectionManager.getConnectionsMap().size;if(wr>=this.minConnections){this.log("got enough connections now %d/%d",wr,this.minConnections),this.queue.clear();return}this.log("connecting to a peerStore stored peer %p",xr.id),await this.connectionManager.openConnection(xr.id,{priority:this.autoDialPriority})},{peerId:xr.id}).catch(wr=>{this.log.error("could not connect to peerStore stored peer",wr)});this.running=!1,this.sheduleNextAutodial()}sheduleNextAutodial(){this.started&&(this.autoDialInterval=setTimeout(()=>{this.autoDial().catch(ar=>{this.log.error("error while autodialing",ar)})},this.autoDialIntervalMs))}}const defaultOptions$2={maxConnections:MAX_CONNECTIONS$3,allow:[]};class ConnectionPruner{maxConnections;connectionManager;peerStore;allow;events;log;constructor(ar,dr={}){this.maxConnections=dr.maxConnections??defaultOptions$2.maxConnections,this.allow=dr.allow??defaultOptions$2.allow,this.connectionManager=ar.connectionManager,this.peerStore=ar.peerStore,this.events=ar.events,this.log=ar.logger.forComponent("libp2p:connection-manager:connection-pruner"),ar.events.addEventListener("connection:open",()=>{this.maybePruneConnections().catch(fr=>{this.log.error(fr)})})}async maybePruneConnections(){const ar=this.connectionManager.getConnections(),dr=ar.length,fr=Math.max(dr-this.maxConnections,0);if(this.log("checking max connections limit %d/%d",dr,this.maxConnections),dr<=this.maxConnections)return;this.log("max connections limit exceeded %d/%d, pruning %d connection(s)",dr,this.maxConnections,fr);const hr=new PeerMap;for(const gr of ar){const yr=gr.remotePeer;if(!hr.has(yr)){hr.set(yr,0);try{const xr=await this.peerStore.get(yr);hr.set(yr,[...xr.tags.values()].reduce((wr,br)=>wr+br.value,0))}catch(xr){xr.code!=="ERR_NOT_FOUND"&&this.log.error("error loading peer tags",xr)}}}const pr=ar.sort((gr,yr)=>{const xr=hr.get(gr.remotePeer)??0,wr=hr.get(yr.remotePeer)??0;if(xr>wr)return 1;if(xr<wr)return-1;const br=gr.timeline.open,Sr=yr.timeline.open;return br<Sr?1:br>Sr?-1:0}),mr=[];for(const gr of pr)if(this.log("too many connections open - closing a connection to %p",gr.remotePeer),this.allow.some(xr=>gr.remoteAddr.toString().startsWith(xr.toString()))||mr.push(gr),mr.length===fr)break;await Promise.all(mr.map(async gr=>{try{await gr.close()}catch(yr){this.log.error(yr)}})),this.events.safeDispatchEvent("connection:prune",{detail:mr})}}function anySignal(cr){const ar=new globalThis.AbortController;function dr(){ar.abort();for(const pr of cr)pr?.removeEventListener!=null&&pr.removeEventListener("abort",dr)}for(const pr of cr){if(pr?.aborted===!0){dr();break}pr?.addEventListener!=null&&pr.addEventListener("abort",dr)}function fr(){for(const pr of cr)pr?.removeEventListener!=null&&pr.removeEventListener("abort",dr)}const hr=ar.signal;return hr.clear=fr,hr}async function resolveMultiaddrs(cr,ar){if(!cr.protoNames().includes("dnsaddr"))return[cr];const fr=await resolveRecord(cr,ar),mr=(await Promise.all(fr.map(async gr=>resolveMultiaddrs(gr,ar)))).flat().reduce((gr,yr)=>(gr.find(xr=>xr.equals(yr))==null&&gr.push(yr),gr),[]);return ar.log("resolved %s to",cr,mr.map(gr=>gr.toString())),mr}async function resolveRecord(cr,ar){try{return cr=multiaddr(cr.toString()),await cr.resolve(ar)}catch(dr){return ar.log.error(`multiaddr ${cr.toString()} could not be resolved`,dr),[]}}const defaultOptions$1={addressSorter:defaultAddressSort,maxParallelDials:MAX_PARALLEL_DIALS,maxPeerAddrsToDial:MAX_PEER_ADDRS_TO_DIAL,dialTimeout:DIAL_TIMEOUT,resolvers:{dnsaddr:dnsaddrResolver}};class DialQueue{queue;components;addressSorter;maxPeerAddrsToDial;dialTimeout;shutDownController;connections;log;constructor(ar,dr={}){this.addressSorter=dr.addressSorter??defaultOptions$1.addressSorter,this.maxPeerAddrsToDial=dr.maxPeerAddrsToDial??defaultOptions$1.maxPeerAddrsToDial,this.dialTimeout=dr.dialTimeout??defaultOptions$1.dialTimeout,this.connections=dr.connections??new PeerMap,this.log=ar.logger.forComponent("libp2p:connection-manager:dial-queue"),this.components=ar,this.shutDownController=new AbortController,setMaxListeners(1/0,this.shutDownController.signal);for(const[fr,hr]of Object.entries(dr.resolvers??{}))resolvers.set(fr,hr);this.queue=new Queue({concurrency:dr.maxParallelDials??defaultOptions$1.maxParallelDials,metricName:"libp2p_dial_queue",metrics:ar.metrics}),this.queue.addEventListener("error",fr=>{this.log.error("error in dial queue",fr.detail)})}start(){this.shutDownController=new AbortController}stop(){this.shutDownController.abort(),this.queue.abort()}async dial(ar,dr={}){const{peerId:fr,multiaddrs:hr}=getPeerAddress(ar),pr=Array.from(this.connections.values()).flat().find(gr=>dr.force===!0?!1:gr.remotePeer.equals(fr)?!0:hr.find(yr=>yr.equals(gr.remoteAddr)));if(pr!=null)return this.log("already connected to %a",pr.remoteAddr),pr;const mr=this.queue.queue.find(gr=>{if(fr?.equals(gr.options.peerId)===!0)return!0;const yr=gr.options.multiaddrs;if(yr==null)return!1;for(const xr of hr)if(yr.has(xr.toString()))return!0;return!1});if(mr!=null){this.log("joining existing dial target for %p",fr);for(const gr of hr)mr.options.multiaddrs.add(gr.toString());return mr.join(dr)}return this.log("creating dial target for %p",fr,hr.map(gr=>gr.toString())),this.queue.add(async gr=>{const yr=this.createDialAbortController(gr?.signal);let xr;try{xr=await this.calculateMultiaddrs(fr,gr?.multiaddrs,{...gr,signal:yr}),xr.map(({multiaddr:wr})=>wr.toString()).forEach(wr=>{gr?.multiaddrs.add(wr)})}catch(wr){throw yr.clear(),wr}try{let wr=0;const br=[];for(const Sr of xr){if(wr===this.maxPeerAddrsToDial)throw this.log("dialed maxPeerAddrsToDial (%d) addresses for %p, not trying any others",wr,fr),new CodeError$3("Peer had more than maxPeerAddrsToDial",codes$1.ERR_TOO_MANY_ADDRESSES);wr++;try{const vr=await this.components.transportManager.dial(Sr.multiaddr,{...gr,signal:yr});return this.log("dial to %a succeeded",Sr.multiaddr),vr}catch(vr){if(this.log.error("dial failed to %a",Sr.multiaddr,vr),fr!=null)try{await this.components.peerStore.patch(fr,{metadata:{[LAST_DIAL_FAILURE_KEY]:fromString$1(Date.now().toString())}})}catch(Er){this.log.error("could not update last dial failure key for %p",fr,Er)}if(yr.aborted)throw new CodeError$3(vr.message,ERR_TIMEOUT);br.push(vr)}}throw br.length===1?br[0]:new AggregateCodeError(br,"All multiaddr dials failed",codes$1.ERR_TRANSPORT_DIAL_FAILED)}finally{yr.clear()}},{peerId:fr,priority:dr.priority,multiaddrs:new Set(hr.map(gr=>gr.toString())),signal:dr.signal})}createDialAbortController(ar){const dr=anySignal([AbortSignal.timeout(this.dialTimeout),this.shutDownController.signal,ar]);return setMaxListeners(1/0,dr),dr}async calculateMultiaddrs(ar,dr=new Set,fr={}){const hr=[...dr].map(br=>({multiaddr:multiaddr(br),isCertified:!1}));if(ar!=null){if(this.components.peerId.equals(ar))throw new CodeError$3("Tried to dial self",codes$1.ERR_DIALED_SELF);if(await this.components.connectionGater.denyDialPeer?.(ar)===!0)throw new CodeError$3("The dial request is blocked by gater.allowDialPeer",codes$1.ERR_PEER_DIAL_INTERCEPTED);if(hr.length===0){this.log("loading multiaddrs for %p",ar);try{const br=await this.components.peerStore.get(ar);hr.push(...br.addresses),this.log("loaded multiaddrs for %p",ar,hr.map(({multiaddr:Sr})=>Sr.toString()))}catch(br){if(br.code!==codes$1.ERR_NOT_FOUND)throw br}}if(hr.length===0){this.log("looking up multiaddrs for %p in the peer routing",ar);try{const br=await this.components.peerRouting.findPeer(ar);this.log("found multiaddrs for %p in the peer routing",ar,hr.map(({multiaddr:Sr})=>Sr.toString())),hr.push(...br.multiaddrs.map(Sr=>({multiaddr:Sr,isCertified:!1})))}catch(br){br.code!==codes$1.ERR_NO_ROUTERS_AVAILABLE&&this.log.error("looking up multiaddrs for %p in the peer routing failed",ar,br)}}}let pr=(await Promise.all(hr.map(async br=>{const Sr=await resolveMultiaddrs(br.multiaddr,{...fr,log:this.log});return Sr.length===1&&Sr[0].equals(br.multiaddr)?br:Sr.map(vr=>({multiaddr:vr,isCertified:!1}))}))).flat();if(ar!=null){const br=`/p2p/${ar.toString()}`;pr=pr.map(Sr=>Sr.multiaddr.protos().pop()?.path===!0?Sr:Sr.multiaddr.getPeerId()==null?{multiaddr:Sr.multiaddr.encapsulate(br),isCertified:Sr.isCertified}:Sr)}const mr=pr.filter(br=>{if(this.components.transportManager.transportForMultiaddr(br.multiaddr)==null)return!1;const Sr=br.multiaddr.getPeerId();return ar!=null&&Sr!=null?ar.equals(Sr):!0}),gr=new Map;for(const br of mr){const Sr=br.multiaddr.toString(),vr=gr.get(Sr);if(vr!=null){vr.isCertified=vr.isCertified||br.isCertified||!1;continue}gr.set(Sr,br)}const yr=[...gr.values()];if(yr.length===0)throw new CodeError$3("The dial request has no valid addresses",codes$1.ERR_NO_VALID_ADDRESSES);const xr=[];for(const br of yr)this.components.connectionGater.denyDialMultiaddr!=null&&await this.components.connectionGater.denyDialMultiaddr(br.multiaddr)||xr.push(br);const wr=xr.sort(this.addressSorter);if(wr.length===0)throw new CodeError$3("The connection gater denied all addresses in the dial request",codes$1.ERR_NO_VALID_ADDRESSES);return this.log.trace("addresses for %p before filtering",ar??"unknown peer",pr.map(({multiaddr:br})=>br.toString())),this.log.trace("addresses for %p after filtering",ar??"unknown peer",wr.map(({multiaddr:br})=>br.toString())),wr}}const DEFAULT_DIAL_PRIORITY=50,defaultOptions={minConnections:MIN_CONNECTIONS$2,maxConnections:MAX_CONNECTIONS$3,inboundConnectionThreshold:INBOUND_CONNECTION_THRESHOLD,maxIncomingPendingConnections:MAX_INCOMING_PENDING_CONNECTIONS,autoDialConcurrency:AUTO_DIAL_CONCURRENCY,autoDialPriority:AUTO_DIAL_PRIORITY,autoDialMaxQueueLength:AUTO_DIAL_MAX_QUEUE_LENGTH};class DefaultConnectionManager{started;connections;allow;deny;maxIncomingPendingConnections;incomingPendingConnections;maxConnections;dialQueue;autoDial;connectionPruner;inboundConnectionRateLimiter;peerStore;metrics;events;log;constructor(ar,dr={}){this.maxConnections=dr.maxConnections??defaultOptions.maxConnections;const fr=dr.minConnections??defaultOptions.minConnections;if(this.maxConnections<fr)throw new CodeError$3("Connection Manager maxConnections must be greater than minConnections",codes$1.ERR_INVALID_PARAMETERS);this.connections=new PeerMap,this.started=!1,this.peerStore=ar.peerStore,this.metrics=ar.metrics,this.events=ar.events,this.log=ar.logger.forComponent("libp2p:connection-manager"),this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.events.addEventListener("connection:open",this.onConnect),this.events.addEventListener("connection:close",this.onDisconnect),this.allow=(dr.allow??[]).map(hr=>multiaddr(hr)),this.deny=(dr.deny??[]).map(hr=>multiaddr(hr)),this.incomingPendingConnections=0,this.maxIncomingPendingConnections=dr.maxIncomingPendingConnections??defaultOptions.maxIncomingPendingConnections,this.inboundConnectionRateLimiter=new RateLimiter({points:dr.inboundConnectionThreshold??defaultOptions.inboundConnectionThreshold,duration:1}),this.autoDial=new AutoDial({connectionManager:this,peerStore:ar.peerStore,events:ar.events,logger:ar.logger},{minConnections:fr,autoDialConcurrency:dr.autoDialConcurrency??defaultOptions.autoDialConcurrency,autoDialPriority:dr.autoDialPriority??defaultOptions.autoDialPriority,maxQueueLength:dr.autoDialMaxQueueLength??defaultOptions.autoDialMaxQueueLength}),this.connectionPruner=new ConnectionPruner({connectionManager:this,peerStore:ar.peerStore,events:ar.events,logger:ar.logger},{maxConnections:this.maxConnections,allow:this.allow}),this.dialQueue=new DialQueue(ar,{addressSorter:dr.addressSorter??defaultAddressSort,maxParallelDials:dr.maxParallelDials??MAX_PARALLEL_DIALS,maxPeerAddrsToDial:dr.maxPeerAddrsToDial??MAX_PEER_ADDRS_TO_DIAL,dialTimeout:dr.dialTimeout??DIAL_TIMEOUT,resolvers:dr.resolvers??{dnsaddr:dnsaddrResolver},connections:this.connections})}isStarted(){return this.started}async start(){this.metrics?.registerMetricGroup("libp2p_connection_manager_connections",{calculate:()=>{const ar={inbound:0,outbound:0};for(const dr of this.connections.values())for(const fr of dr)fr.direction==="inbound"?ar.inbound++:ar.outbound++;return ar}}),this.metrics?.registerMetricGroup("libp2p_protocol_streams_total",{label:"protocol",calculate:()=>{const ar={};for(const dr of this.connections.values())for(const fr of dr)for(const hr of fr.streams){const pr=`${hr.direction} ${hr.protocol??"unnegotiated"}`;ar[pr]=(ar[pr]??0)+1}return ar}}),this.metrics?.registerMetricGroup("libp2p_connection_manager_protocol_streams_per_connection_90th_percentile",{label:"protocol",calculate:()=>{const ar={};for(const fr of this.connections.values())for(const hr of fr){const pr={};for(const mr of hr.streams){const gr=`${mr.direction} ${mr.protocol??"unnegotiated"}`;pr[gr]=(pr[gr]??0)+1}for(const[mr,gr]of Object.entries(pr))ar[mr]=ar[mr]??[],ar[mr].push(gr)}const dr={};for(let[fr,hr]of Object.entries(ar)){hr=hr.sort((mr,gr)=>mr-gr);const pr=Math.floor(hr.length*.9);dr[fr]=hr[pr]}return dr}}),this.dialQueue.start(),this.autoDial.start(),this.started=!0,this.log("started")}async afterStart(){Promise.resolve().then(async()=>{const ar=await this.peerStore.all({filters:[dr=>dr.tags.has(KEEP_ALIVE)]});await Promise.all(ar.map(async dr=>{await this.openConnection(dr.id).catch(fr=>{this.log.error(fr)})}))}).catch(ar=>{this.log.error(ar)}),this.autoDial.afterStart()}async stop(){this.dialQueue.stop(),this.autoDial.stop();const ar=[];for(const dr of this.connections.values())for(const fr of dr)ar.push((async()=>{try{await fr.close()}catch(hr){this.log.error(hr)}})());this.log("closing %d connections",ar.length),await Promise.all(ar),this.connections.clear(),this.log("stopped")}onConnect(ar){this._onConnect(ar).catch(dr=>{this.log.error(dr)})}async _onConnect(ar){const{detail:dr}=ar;if(!this.started){await dr.close();return}const fr=dr.remotePeer,hr=this.connections.get(fr);let pr=!1;hr!=null?hr.push(dr):(pr=!0,this.connections.set(fr,[dr])),fr.publicKey!=null&&fr.type==="RSA"&&await this.peerStore.patch(fr,{publicKey:fr.publicKey}),pr&&this.events.safeDispatchEvent("peer:connect",{detail:dr.remotePeer})}onDisconnect(ar){const{detail:dr}=ar;if(!this.started)return;const fr=dr.remotePeer;let hr=this.connections.get(fr);hr!=null&&hr.length>1?(hr=hr.filter(pr=>pr.id!==dr.id),this.connections.set(fr,hr)):hr!=null&&(this.connections.delete(fr),this.events.safeDispatchEvent("peer:disconnect",{detail:dr.remotePeer}))}getConnections(ar){if(ar!=null)return this.connections.get(ar)??[];let dr=[];for(const fr of this.connections.values())dr=dr.concat(fr);return dr}getConnectionsMap(){return this.connections}async openConnection(ar,dr={}){if(!this.isStarted())throw new CodeError$3("Not started",codes$1.ERR_NODE_NOT_STARTED);dr.signal?.throwIfAborted();const{peerId:fr}=getPeerAddress(ar);if(fr!=null&&dr.force!==!0){this.log("dial %p",fr);const gr=this.getConnections(fr).find(yr=>!yr.transient);if(gr!=null)return this.log("had an existing non-transient connection to %p",fr),gr}const hr=await this.dialQueue.dial(ar,{...dr,priority:dr.priority??DEFAULT_DIAL_PRIORITY});let pr=this.connections.get(hr.remotePeer);pr==null&&(pr=[],this.connections.set(hr.remotePeer,pr));let mr=!1;for(const gr of pr)gr.id===hr.id&&(mr=!0);return mr||pr.push(hr),hr}async closeConnections(ar,dr={}){const fr=this.connections.get(ar)??[];await Promise.all(fr.map(async hr=>{try{await hr.close(dr)}catch(pr){hr.abort(pr)}}))}async acceptIncomingConnection(ar){if(this.deny.some(hr=>ar.remoteAddr.toString().startsWith(hr.toString())))return this.log("connection from %a refused - connection remote address was in deny list",ar.remoteAddr),!1;if(this.allow.some(hr=>ar.remoteAddr.toString().startsWith(hr.toString())))return this.incomingPendingConnections++,!0;if(this.incomingPendingConnections===this.maxIncomingPendingConnections)return this.log("connection from %a refused - incomingPendingConnections exceeded by host",ar.remoteAddr),!1;if(ar.remoteAddr.isThinWaistAddress()){const hr=ar.remoteAddr.nodeAddress().address;try{await this.inboundConnectionRateLimiter.consume(hr,1)}catch{return this.log("connection from %a refused - inboundConnectionThreshold exceeded by host %s",ar.remoteAddr,hr),!1}}return this.getConnections().length<this.maxConnections?(this.incomingPendingConnections++,!0):(this.log("connection from %a refused - maxConnections exceeded",ar.remoteAddr),!1)}afterUpgradeInbound(){this.incomingPendingConnections--}getDialQueue(){const ar={queued:"queued",running:"active",errored:"error",complete:"success"};return this.dialQueue.queue.queue.map(dr=>({id:dr.id,status:ar[dr.status],peerId:dr.options.peerId,multiaddrs:[...dr.options.multiaddrs].map(fr=>multiaddr(fr))}))}}function isAsyncIterable$3(cr){return cr[Symbol.asyncIterator]!=null}function merge(...cr){const ar=[];for(const dr of cr)isAsyncIterable$3(dr)||ar.push(dr);return ar.length===cr.length?function*(){for(const dr of ar)yield*dr}():async function*(){const dr=pushable$1({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(cr.map(async fr=>{for await(const hr of fr)dr.push(hr)})),dr.end()}catch(fr){dr.end(fr)}}),yield*dr}()}class CompoundContentRouting{routers;started;components;constructor(ar,dr){this.routers=dr.routers??[],this.started=!1,this.components=ar}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async*findProviders(ar,dr={}){if(this.routers.length===0)throw new CodeError$3("No content routers available",codes$1.ERR_NO_ROUTERS_AVAILABLE);const fr=this,hr=new PeerSet;for await(const pr of merge(...fr.routers.map(mr=>mr.findProviders(ar,dr))))pr!=null&&(pr.multiaddrs.length>0&&await this.components.peerStore.merge(pr.id,{multiaddrs:pr.multiaddrs}),!hr.has(pr.id)&&(hr.add(pr.id),yield pr))}async provide(ar,dr={}){if(this.routers.length===0)throw new CodeError$3("No content routers available",codes$1.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map(async fr=>{await fr.provide(ar,dr)}))}async put(ar,dr,fr){if(!this.isStarted())throw new CodeError$3(messages.NOT_STARTED_YET,codes$1.ERR_NODE_NOT_STARTED);await Promise.all(this.routers.map(async hr=>{await hr.put(ar,dr,fr)}))}async get(ar,dr){if(!this.isStarted())throw new CodeError$3(messages.NOT_STARTED_YET,codes$1.ERR_NODE_NOT_STARTED);return Promise.any(this.routers.map(async fr=>fr.get(ar,dr)))}}const CustomEvent$1=globalThis.CustomEvent??Event;async function*parallel(cr,ar={}){let dr=ar.concurrency??1/0;dr<1&&(dr=1/0);const fr=ar.ordered==null?!1:ar.ordered,hr=new EventTarget,pr=[];let mr=pDefer(),gr=pDefer(),yr=!1,xr,wr=!1;hr.addEventListener("task-complete",()=>{gr.resolve()}),Promise.resolve().then(async()=>{try{for await(const Er of cr){if(pr.length===dr&&(mr=pDefer(),await mr.promise),wr)break;const Ar={done:!1};pr.push(Ar),Er().then(_r=>{Ar.done=!0,Ar.ok=!0,Ar.value=_r,hr.dispatchEvent(new CustomEvent$1("task-complete"))},_r=>{Ar.done=!0,Ar.err=_r,hr.dispatchEvent(new CustomEvent$1("task-complete"))})}yr=!0,hr.dispatchEvent(new CustomEvent$1("task-complete"))}catch(Er){xr=Er,hr.dispatchEvent(new CustomEvent$1("task-complete"))}});function br(){return fr?pr[0]?.done:!!pr.find(Er=>Er.done)}function*Sr(){for(;pr.length>0&&pr[0].done;){const Er=pr[0];if(pr.shift(),Er.ok)yield Er.value;else throw wr=!0,mr.resolve(),Er.err;mr.resolve()}}function*vr(){for(;br();)for(let Er=0;Er<pr.length;Er++)if(pr[Er].done){const Ar=pr[Er];if(pr.splice(Er,1),Er--,Ar.ok)yield Ar.value;else throw wr=!0,mr.resolve(),Ar.err;mr.resolve()}}for(;;){if(br()||(gr=pDefer(),await gr.promise),xr!=null)throw xr;if(fr?yield*Sr():yield*vr(),yr&&pr.length===0)break}}class DefaultPeerRouting{log;peerId;peerStore;routers;constructor(ar,dr={}){this.log=ar.logger.forComponent("libp2p:peer-routing"),this.peerId=ar.peerId,this.peerStore=ar.peerStore,this.routers=dr.routers??[]}async findPeer(ar,dr){if(this.routers.length===0)throw new CodeError$3("No peer routers available",codes$1.ERR_NO_ROUTERS_AVAILABLE);if(ar.toString()===this.peerId.toString())throw new CodeError$3("Should not try to find self",codes$1.ERR_FIND_SELF);const fr=this,hr=merge(...this.routers.map(pr=>async function*(){try{yield await pr.findPeer(ar,dr)}catch(mr){fr.log.error(mr)}}()));for await(const pr of hr)if(pr!=null)return pr.multiaddrs.length>0&&await this.peerStore.merge(pr.id,{multiaddrs:pr.multiaddrs}),pr;throw new CodeError$3(messages.NOT_FOUND,codes$1.ERR_NOT_FOUND)}async*getClosestPeers(ar,dr={}){if(this.routers.length===0)throw new CodeError$3("No peer routers available",codes$1.ERR_NO_ROUTERS_AVAILABLE);const fr=this,hr=new PeerSet;for await(const pr of parallel(async function*(){const mr=merge(...fr.routers.map(gr=>gr.getClosestPeers(ar,dr)));for await(let gr of mr)yield async()=>{if(gr.multiaddrs.length===0)try{gr=await fr.findPeer(gr.id,{...dr,useCache:!1})}catch(yr){fr.log.error("could not find peer multiaddrs",yr);return}return gr}}()))pr!=null&&(pr.multiaddrs.length>0&&await this.peerStore.merge(pr.id,{multiaddrs:pr.multiaddrs}),!hr.has(pr.id)&&(hr.add(pr.id),yield pr))}}const DEFAULT_MAX_INBOUND_STREAMS=32,DEFAULT_MAX_OUTBOUND_STREAMS=64;class DefaultRegistrar{log;topologies;handlers;components;constructor(ar){this.log=ar.logger.forComponent("libp2p:registrar"),this.topologies=new Map,this.handlers=new Map,this.components=ar,this._onDisconnect=this._onDisconnect.bind(this),this._onPeerUpdate=this._onPeerUpdate.bind(this),this._onPeerIdentify=this._onPeerIdentify.bind(this),this.components.events.addEventListener("peer:disconnect",this._onDisconnect),this.components.events.addEventListener("peer:update",this._onPeerUpdate),this.components.events.addEventListener("peer:identify",this._onPeerIdentify)}getProtocols(){return Array.from(new Set([...this.handlers.keys()])).sort()}getHandler(ar){const dr=this.handlers.get(ar);if(dr==null)throw new CodeError$3(`No handler registered for protocol ${ar}`,codes$1.ERR_NO_HANDLER_FOR_PROTOCOL);return dr}getTopologies(ar){const dr=this.topologies.get(ar);return dr==null?[]:[...dr.values()]}async handle(ar,dr,fr){if(this.handlers.has(ar))throw new CodeError$3(`Handler already registered for protocol ${ar}`,codes$1.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);const hr=mergeOptions$1.bind({ignoreUndefined:!0})({maxInboundStreams:DEFAULT_MAX_INBOUND_STREAMS,maxOutboundStreams:DEFAULT_MAX_OUTBOUND_STREAMS},fr);this.handlers.set(ar,{handler:dr,options:hr}),await this.components.peerStore.merge(this.components.peerId,{protocols:[ar]})}async unhandle(ar){(Array.isArray(ar)?ar:[ar]).forEach(fr=>{this.handlers.delete(fr)}),await this.components.peerStore.patch(this.components.peerId,{protocols:this.getProtocols()})}async register(ar,dr){if(dr==null)throw new CodeError$3("invalid topology",codes$1.ERR_INVALID_PARAMETERS);const fr=`${(Math.random()*1e9).toString(36)}${Date.now()}`;let hr=this.topologies.get(ar);return hr==null&&(hr=new Map,this.topologies.set(ar,hr)),hr.set(fr,dr),fr}unregister(ar){for(const[dr,fr]of this.topologies.entries())fr.has(ar)&&(fr.delete(ar),fr.size===0&&this.topologies.delete(dr))}_onDisconnect(ar){const dr=ar.detail;this.components.peerStore.get(dr).then(fr=>{for(const hr of fr.protocols){const pr=this.topologies.get(hr);if(pr!=null)for(const mr of pr.values())mr.onDisconnect?.(dr)}}).catch(fr=>{fr.code!==codes$1.ERR_NOT_FOUND&&this.log.error("could not inform topologies of disconnecting peer %p",dr,fr)})}_onPeerUpdate(ar){const{peer:dr,previous:fr}=ar.detail,hr=(fr?.protocols??[]).filter(pr=>!dr.protocols.includes(pr));for(const pr of hr){const mr=this.topologies.get(pr);if(mr!=null)for(const gr of mr.values())gr.onDisconnect?.(dr.id)}}_onPeerIdentify(ar){const dr=ar.detail.protocols,fr=ar.detail.connection,hr=ar.detail.peerId;for(const pr of dr){const mr=this.topologies.get(pr);if(mr!=null)for(const gr of mr.values())fr.transient&&gr.notifyOnTransient!==!0||gr.onConnect?.(hr,fr)}}}class TrackedMap extends Map{metric;constructor(ar){super();const{name:dr,metrics:fr}=ar;this.metric=fr.registerMetric(dr),this.updateComponentMetric()}set(ar,dr){return super.set(ar,dr),this.updateComponentMetric(),this}delete(ar){const dr=super.delete(ar);return this.updateComponentMetric(),dr}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}function trackedMap(cr){const{name:ar,metrics:dr}=cr;let fr;return dr!=null?fr=new TrackedMap({name:ar,metrics:dr}):fr=new Map,fr}class DefaultTransportManager{log;components;transports;listeners;faultTolerance;started;constructor(ar,dr={}){this.log=ar.logger.forComponent("libp2p:transports"),this.components=ar,this.started=!1,this.transports=new Map,this.listeners=trackedMap({name:"libp2p_transport_manager_listeners",metrics:this.components.metrics}),this.faultTolerance=dr.faultTolerance??FaultTolerance$1.FATAL_ALL}add(ar){const dr=ar[Symbol.toStringTag];if(dr==null)throw new CodeError$3("Transport must have a valid tag",codes$1.ERR_INVALID_KEY);if(this.transports.has(dr))throw new CodeError$3(`There is already a transport with the tag ${dr}`,codes$1.ERR_DUPLICATE_TRANSPORT);this.log("adding transport %s",dr),this.transports.set(dr,ar),this.listeners.has(dr)||this.listeners.set(dr,[])}isStarted(){return this.started}start(){this.started=!0}async afterStart(){const ar=this.components.addressManager.getListenAddrs();await this.listen(ar)}async stop(){const ar=[];for(const[dr,fr]of this.listeners)for(this.log("closing listeners for %s",dr);fr.length>0;){const hr=fr.pop();hr!=null&&ar.push(hr.close())}await Promise.all(ar),this.log("all listeners closed");for(const dr of this.listeners.keys())this.listeners.set(dr,[]);this.started=!1}async dial(ar,dr){const fr=this.transportForMultiaddr(ar);if(fr==null)throw new CodeError$3(`No transport available for address ${String(ar)}`,codes$1.ERR_TRANSPORT_UNAVAILABLE);try{return await fr.dial(ar,{...dr,upgrader:this.components.upgrader})}catch(hr){throw hr.code==null&&(hr.code=codes$1.ERR_TRANSPORT_DIAL_FAILED),hr}}getAddrs(){let ar=[];for(const dr of this.listeners.values())for(const fr of dr)ar=[...ar,...fr.getAddrs()];return ar}getTransports(){return Array.of(...this.transports.values())}getListeners(){return Array.of(...this.listeners.values()).flat()}transportForMultiaddr(ar){for(const dr of this.transports.values())if(dr.filter([ar]).length>0)return dr}async listen(ar){if(!this.isStarted())throw new CodeError$3("Not started",codes$1.ERR_NODE_NOT_STARTED);if(ar==null||ar.length===0){this.log("no addresses were provided for listening, this node is dial only");return}const dr=[];for(const[fr,hr]of this.transports.entries()){const pr=hr.filter(ar),mr=[];for(const xr of pr){this.log("creating listener for %s on %a",fr,xr);const wr=hr.createListener({upgrader:this.components.upgrader});let br=this.listeners.get(fr)??[];br==null&&(br=[],this.listeners.set(fr,br)),br.push(wr),wr.addEventListener("listening",()=>{this.components.events.safeDispatchEvent("transport:listening",{detail:wr})}),wr.addEventListener("close",()=>{const Sr=br.findIndex(vr=>vr===wr);br.splice(Sr,1),this.components.events.safeDispatchEvent("transport:close",{detail:wr})}),mr.push(wr.listen(xr))}if(mr.length===0){dr.push(fr);continue}if((await Promise.allSettled(mr)).find(xr=>xr.status==="fulfilled")==null&&this.faultTolerance!==FaultTolerance$1.NO_FATAL)throw new CodeError$3(`Transport (${fr}) could not listen on any available address`,codes$1.ERR_NO_VALID_ADDRESSES)}if(dr.length===this.transports.size){const fr=`no valid addresses were provided for transports [${dr.join(", ")}]`;if(this.faultTolerance===FaultTolerance$1.FATAL_ALL)throw new CodeError$3(fr,codes$1.ERR_NO_VALID_ADDRESSES);this.log(`libp2p in dial mode only: ${fr}`)}}async remove(ar){const dr=this.listeners.get(ar)??[];this.log.trace("removing transport %s",ar);const fr=[];for(this.log.trace("closing listeners for %s",ar);dr.length>0;){const hr=dr.pop();hr!=null&&fr.push(hr.close())}await Promise.all(fr),this.transports.delete(ar),this.listeners.delete(ar)}async removeAll(){const ar=[];for(const dr of this.transports.keys())ar.push(this.remove(dr));await Promise.all(ar)}}const PROTOCOL_ID="/multistream/1.0.0",MAX_PROTOCOL_LENGTH=1024;class QueuelessPushable{needNext;haveNext;ended;nextResult;constructor(){this.ended=!1,this.needNext=pDefer(),this.needNext.resolve(),this.haveNext=pDefer()}[Symbol.asyncIterator](){return this}async next(){if(this.nextResult==null&&await this.haveNext.promise,this.nextResult==null)throw new Error("Have next but next was undefined");const ar=this.nextResult;return this.nextResult=void 0,this.needNext.resolve(),this.needNext=pDefer(),ar}async throw(ar){return this.ended=!0,ar!=null&&this.haveNext.reject(ar),{done:!0,value:void 0}}async return(){const ar={done:!0,value:void 0};return await this._push(void 0),ar}async push(ar,dr){await this._push(ar,dr)}async end(ar,dr){ar!=null?await this.throw(ar):await this._push(void 0,dr)}async _push(ar,dr){if(ar!=null&&this.ended)throw new Error("Cannot push value onto an ended pushable");this.nextResult!=null&&await this.needNext.promise,ar!=null?this.nextResult={done:!1,value:ar}:(this.ended=!0,this.nextResult={done:!0,value:void 0}),this.haveNext.resolve(),this.haveNext=pDefer(),await raceSignal(this.needNext.promise,dr?.signal,dr)}}function pushable(){return new QueuelessPushable}let CodeError$1=class extends Error{code;constructor(ar,dr){super(ar),this.code=dr}},AbortError$1=class extends CodeError$1{type;constructor(ar){super(ar,"ABORT_ERR"),this.type="aborted"}};function byteStream(cr,ar){const dr=pushable();cr.sink(dr).catch(async mr=>{await dr.end(mr)}),cr.sink=async mr=>{for await(const gr of mr)await dr.push(gr);await dr.end()};let fr=cr.source;cr.source[Symbol.iterator]!=null?fr=cr.source[Symbol.iterator]():cr.source[Symbol.asyncIterator]!=null&&(fr=cr.source[Symbol.asyncIterator]());const hr=new Uint8ArrayList;return{read:async(mr,gr)=>{gr?.signal?.throwIfAborted();let yr;const xr=new Promise((wr,br)=>{yr=()=>{br(new AbortError$1("Read aborted"))},gr?.signal?.addEventListener("abort",yr)});try{if(mr==null){const{done:br,value:Sr}=await Promise.race([fr.next(),xr]);return br===!0?new Uint8ArrayList:Sr}for(;hr.byteLength<mr;){const{value:br,done:Sr}=await Promise.race([fr.next(),xr]);if(Sr===!0)throw new CodeError$1("unexpected end of input","ERR_UNEXPECTED_EOF");hr.append(br)}const wr=hr.sublist(0,mr);return hr.consume(mr),wr}finally{yr!=null&&gr?.signal?.removeEventListener("abort",yr)}},write:async(mr,gr)=>{gr?.signal?.throwIfAborted(),mr instanceof Uint8Array?await dr.push(mr,gr):await dr.push(mr.subarray(),gr)},unwrap:()=>{if(hr.byteLength>0){const mr=cr.source;cr.source=async function*(){ar?.yieldBytes===!1?yield hr:yield*hr,yield*mr}()}return cr}}}function isAsyncIterable$2(cr){return cr[Symbol.asyncIterator]!=null}const defaultEncoder=cr=>{const ar=encodingLength(cr),dr=allocUnsafe(ar);return encode$2(cr,dr),defaultEncoder.bytes=ar,dr};defaultEncoder.bytes=0;function encode$1(cr,ar){ar=ar??{};const dr=ar.lengthEncoder??defaultEncoder;function*fr(hr){const pr=dr(hr.byteLength);pr instanceof Uint8Array?yield pr:yield*pr,hr instanceof Uint8Array?yield hr:yield*hr}return isAsyncIterable$2(cr)?async function*(){for await(const hr of cr)yield*fr(hr)}():function*(){for(const hr of cr)yield*fr(hr)}()}encode$1.single=(cr,ar)=>{ar=ar??{};const dr=ar.lengthEncoder??defaultEncoder;return new Uint8ArrayList(dr(cr.byteLength),cr)};const MAX_LENGTH_LENGTH=8,MAX_DATA_LENGTH=1024*1024*4;var ReadMode;(function(cr){cr[cr.LENGTH=0]="LENGTH",cr[cr.DATA=1]="DATA"})(ReadMode||(ReadMode={}));const defaultDecoder=cr=>{const ar=decode$1(cr);return defaultDecoder.bytes=encodingLength(ar),ar};defaultDecoder.bytes=0;function decode(cr,ar){const dr=new Uint8ArrayList;let fr=ReadMode.LENGTH,hr=-1;const pr=ar?.lengthDecoder??defaultDecoder,mr=ar?.maxLengthLength??MAX_LENGTH_LENGTH,gr=ar?.maxDataLength??MAX_DATA_LENGTH;function*yr(){for(;dr.byteLength>0;){if(fr===ReadMode.LENGTH)try{if(hr=pr(dr),hr<0)throw errCode$1(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(hr>gr)throw errCode$1(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");const xr=pr.bytes;dr.consume(xr),ar?.onLength!=null&&ar.onLength(hr),fr=ReadMode.DATA}catch(xr){if(xr instanceof RangeError){if(dr.byteLength>mr)throw errCode$1(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw xr}if(fr===ReadMode.DATA){if(dr.byteLength<hr)break;const xr=dr.sublist(0,hr);dr.consume(hr),ar?.onData!=null&&ar.onData(xr),yield xr,fr=ReadMode.LENGTH}}}return isAsyncIterable$2(cr)?async function*(){for await(const xr of cr)dr.append(xr),yield*yr();if(dr.byteLength>0)throw errCode$1(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}():function*(){for(const xr of cr)dr.append(xr),yield*yr();if(dr.byteLength>0)throw errCode$1(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}()}decode.fromReader=(cr,ar)=>{let dr=1;const fr=async function*(){for(;;)try{const{done:pr,value:mr}=await cr.next(dr);if(pr===!0)return;mr!=null&&(yield mr)}catch(pr){if(pr.code==="ERR_UNDER_READ")return{done:!0,value:null};throw pr}finally{dr=1}}();return decode(fr,{...ar??{},onLength:pr=>{dr=pr}})};class CodeError extends Error{code;constructor(ar,dr){super(ar),this.code=dr}}const defaultLengthDecoder=cr=>decode$1(cr);defaultLengthDecoder.bytes=0;function lpStream(cr,ar={}){const dr=byteStream(cr,ar);return ar.maxDataLength!=null&&ar.maxLengthLength==null&&(ar.maxLengthLength=encodingLength(ar.maxDataLength)),{read:async hr=>{let pr=-1;const mr=new Uint8ArrayList,gr=ar?.lengthDecoder??defaultLengthDecoder;for(;;){mr.append(await dr.read(1,hr));try{pr=gr(mr)}catch(yr){if(yr instanceof RangeError)continue;throw yr}if(ar?.maxLengthLength!=null&&mr.byteLength>ar.maxLengthLength)throw new CodeError("message length length too long","ERR_MSG_LENGTH_TOO_LONG");if(pr>-1)break}if(ar?.maxDataLength!=null&&pr>ar.maxDataLength)throw new CodeError("message length too long","ERR_MSG_DATA_TOO_LONG");return dr.read(pr,hr)},write:async(hr,pr)=>{await dr.write(encode$1.single(hr,ar),pr)},writeV:async(hr,pr)=>{const mr=new Uint8ArrayList(...hr.map(gr=>encode$1.single(gr,ar)));await dr.write(mr,pr)},unwrap:()=>dr.unwrap()}}const NewLine=fromString(`
`);async function write(cr,ar,dr){await cr.write(ar,dr)}async function writeAll(cr,ar,dr){await cr.writeV(ar,dr)}async function read(cr,ar){const dr=await cr.read(ar);if(dr.byteLength===0||dr.get(dr.byteLength-1)!==NewLine[0])throw ar?.log?.error("Invalid mss message - missing newline",dr),new CodeError$2("missing newline","ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return dr.sublist(0,-1)}async function readString(cr,ar){const dr=await read(cr,ar);return toString$1(dr.subarray())}async function select(cr,ar,dr){if(ar=Array.isArray(ar)?[...ar]:[ar],ar.length===1)return optimisticSelect(cr,ar[0],dr);const fr=lpStream(cr,{...dr,maxDataLength:MAX_PROTOCOL_LENGTH}),hr=ar.shift();if(hr==null)throw new Error("At least one protocol must be specified");dr?.log?.trace('select: write ["%s", "%s"]',PROTOCOL_ID,hr);const pr=fromString(`${PROTOCOL_ID}
`),mr=fromString(`${hr}
`);await writeAll(fr,[pr,mr],dr),dr?.log?.trace("select: reading multistream-select header");let gr=await readString(fr,dr);if(dr?.log?.trace('select: read "%s"',gr),gr===PROTOCOL_ID&&(dr?.log?.trace("select: reading protocol response"),gr=await readString(fr,dr),dr?.log?.trace('select: read "%s"',gr)),gr===hr)return{stream:fr.unwrap(),protocol:hr};for(const yr of ar){dr?.log?.trace('select: write "%s"',yr),await write(fr,fromString(`${yr}
`),dr),dr?.log?.trace("select: reading protocol response");const xr=await readString(fr,dr);if(dr?.log?.trace('select: read "%s" for "%s"',xr,yr),xr===yr)return{stream:fr.unwrap(),protocol:yr}}throw new CodeError$2("protocol selection failed","ERR_UNSUPPORTED_PROTOCOL")}function optimisticSelect(cr,ar,dr){const fr=cr.sink.bind(cr),hr=cr.source;let pr=!1,mr=!1;const gr=pDefer();let yr=!1,xr=!1;const wr=pDefer();let br=!1,Sr=!1;const vr=pDefer(),Er=lpStream({sink:fr,source:hr},{...dr,maxDataLength:MAX_PROTOCOL_LENGTH});cr.sink=async kr=>{const{sink:Rr}=Er.unwrap();await Rr(async function*(){let Ir=!1;for await(const Nr of kr){if(xr&&await wr.promise,yr)yield Nr;else{xr=!0,dr?.log?.trace('optimistic: write ["%s", "%s", data(%d)] in sink',PROTOCOL_ID,ar,Nr.byteLength);const Pr=`${ar}
`;yield new Uint8ArrayList(Uint8Array.from([19]),fromString(`${PROTOCOL_ID}
`),encode$2(Pr.length),fromString(Pr),Nr).subarray(),dr?.log?.trace('optimistic: wrote ["%s", "%s", data(%d)] in sink',PROTOCOL_ID,ar,Nr.byteLength),yr=!0,xr=!1,wr.resolve()}Ir=!0}Ir||await Ar()}())};async function Ar(){if(mr){dr?.log?.trace("optimistic: already negotiating %s stream",ar),await gr.promise;return}mr=!0;try{yr||(dr?.log?.trace("optimistic: doing send protocol for %s stream",ar),await _r()),br||(dr?.log?.trace("optimistic: doing read protocol for %s stream",ar),await Cr())}finally{mr=!1,pr=!0,gr.resolve()}}async function _r(){if(xr){await wr.promise;return}xr=!0;try{dr?.log?.trace('optimistic: write ["%s", "%s", data] in source',PROTOCOL_ID,ar),await Er.writeV([fromString(`${PROTOCOL_ID}
`),fromString(`${ar}
`)]),dr?.log?.trace('optimistic: wrote ["%s", "%s", data] in source',PROTOCOL_ID,ar)}finally{yr=!0,xr=!1,wr.resolve()}}async function Cr(){if(Sr){await vr.promise;return}Sr=!0;try{dr?.log?.trace("optimistic: reading multistream select header");let kr=await readString(Er,dr);if(dr?.log?.trace('optimistic: read multistream select header "%s"',kr),kr===PROTOCOL_ID&&(kr=await readString(Er,dr)),dr?.log?.trace('optimistic: read protocol "%s", expecting "%s"',kr,ar),kr!==ar)throw new CodeError$2("protocol selection failed","ERR_UNSUPPORTED_PROTOCOL")}finally{br=!0,Sr=!1,vr.resolve()}}if(cr.source=async function*(){await Ar(),dr?.log?.trace('optimistic: reading data from "%s" stream',ar),yield*Er.unwrap().source}(),cr.closeRead!=null){const kr=cr.closeRead.bind(cr);cr.closeRead=async Rr=>{pr||await Ar().catch(Ir=>{dr?.log?.error("could not negotiate protocol before close read",Ir)}),await kr(Rr)}}if(cr.closeWrite!=null){const kr=cr.closeWrite.bind(cr);cr.closeWrite=async Rr=>{pr||await Ar().catch(Ir=>{dr?.log?.error("could not negotiate protocol before close write",Ir)}),await kr(Rr)}}if(cr.close!=null){const kr=cr.close.bind(cr);cr.close=async Rr=>{pr||(pr=!0,mr=!1,gr.resolve()),await kr(Rr)}}return{stream:cr,protocol:ar}}async function handle(cr,ar,dr){ar=Array.isArray(ar)?ar:[ar],dr?.log?.trace("handle: available protocols %s",ar);const fr=lpStream(cr,{...dr,maxDataLength:MAX_PROTOCOL_LENGTH,maxLengthLength:2});for(;;){dr?.log?.trace("handle: reading incoming string");const hr=await readString(fr,dr);if(dr?.log?.trace('handle: read "%s"',hr),hr===PROTOCOL_ID){dr?.log?.trace('handle: respond with "%s" for "%s"',PROTOCOL_ID,hr),await write(fr,fromString(`${PROTOCOL_ID}
`),dr),dr?.log?.trace('handle: responded with "%s" for "%s"',PROTOCOL_ID,hr);continue}if(ar.includes(hr))return dr?.log?.trace('handle: respond with "%s" for "%s"',hr,hr),await write(fr,fromString(`${hr}
`),dr),dr?.log?.trace('handle: responded with "%s" for "%s"',hr,hr),{stream:fr.unwrap(),protocol:hr};if(hr==="ls"){const pr=new Uint8ArrayList(...ar.map(mr=>encode$1.single(fromString(`${mr}
`))),fromString(`
`));dr?.log?.trace('handle: respond with "%s" for %s',ar,hr),await write(fr,pr,dr),dr?.log?.trace('handle: responded with "%s" for %s',ar,hr);continue}dr?.log?.('handle: respond with "na" for "%s"',hr),await write(fr,fromString(`na
`),dr),dr?.log?.('handle: responded with "na" for "%s"',hr)}}const CLOSE_TIMEOUT$2=500;class ConnectionImpl{id;remoteAddr;remotePeer;direction;timeline;multiplexer;encryption;status;transient;log;tags;_newStream;_close;_abort;_getStreams;constructor(ar){const{remoteAddr:dr,remotePeer:fr,newStream:hr,close:pr,abort:mr,getStreams:gr}=ar;this.id=`${parseInt(String(Math.random()*1e9)).toString(36)}${Date.now()}`,this.remoteAddr=dr,this.remotePeer=fr,this.direction=ar.direction,this.status="open",this.timeline=ar.timeline,this.multiplexer=ar.multiplexer,this.encryption=ar.encryption,this.transient=ar.transient??!1,this.log=ar.logger.forComponent(`libp2p:connection:${this.direction}:${this.id}`),this.remoteAddr.getPeerId()==null&&(this.remoteAddr=this.remoteAddr.encapsulate(`/p2p/${this.remotePeer}`)),this._newStream=hr,this._close=pr,this._abort=mr,this._getStreams=gr,this.tags=[]}[Symbol.toStringTag]="Connection";[connectionSymbol]=!0;get streams(){return this._getStreams()}async newStream(ar,dr){if(this.status==="closing")throw new CodeError$3("the connection is being closed","ERR_CONNECTION_BEING_CLOSED");if(this.status==="closed")throw new CodeError$3("the connection is closed","ERR_CONNECTION_CLOSED");if(Array.isArray(ar)||(ar=[ar]),this.transient&&dr?.runOnTransientConnection!==!0)throw new CodeError$3("Cannot open protocol stream on transient connection","ERR_TRANSIENT_CONNECTION");const fr=await this._newStream(ar,dr);return fr.direction="outbound",fr}async close(ar={}){if(!(this.status==="closed"||this.status==="closing")){if(this.log("closing connection to %a",this.remoteAddr),this.status="closing",ar.signal==null){const dr=AbortSignal.timeout(CLOSE_TIMEOUT$2);setMaxListeners(1/0,dr),ar={...ar,signal:dr}}try{this.log.trace("closing all streams"),await Promise.all(this.streams.map(async dr=>dr.close(ar))),this.log.trace("closing underlying transport"),await this._close(ar),this.log.trace("updating timeline with close time"),this.status="closed",this.timeline.close=Date.now()}catch(dr){this.log.error("error encountered during graceful close of connection to %a",this.remoteAddr,dr),this.abort(dr)}}}abort(ar){this.log.error("aborting connection to %a due to error",this.remoteAddr,ar),this.status="closing",this.streams.forEach(dr=>{dr.abort(ar)}),this.log.error("all streams aborted",this.streams.length),this._abort(ar),this.timeline.close=Date.now(),this.status="closed"}}function createConnection(cr){return new ConnectionImpl(cr)}const DEFAULT_PROTOCOL_SELECT_TIMEOUT=3e4;function findIncomingStreamLimit(cr,ar){try{const{options:dr}=ar.getHandler(cr);return dr.maxInboundStreams}catch(dr){if(dr.code!==codes$1.ERR_NO_HANDLER_FOR_PROTOCOL)throw dr}return DEFAULT_MAX_INBOUND_STREAMS}function findOutgoingStreamLimit(cr,ar,dr={}){try{const{options:fr}=ar.getHandler(cr);if(fr.maxOutboundStreams!=null)return fr.maxOutboundStreams}catch(fr){if(fr.code!==codes$1.ERR_NO_HANDLER_FOR_PROTOCOL)throw fr}return dr.maxOutboundStreams??DEFAULT_MAX_OUTBOUND_STREAMS}function countStreams(cr,ar,dr){let fr=0;return dr.streams.forEach(hr=>{hr.direction===ar&&hr.protocol===cr&&fr++}),fr}class DefaultUpgrader{components;connectionEncryption;muxers;inboundUpgradeTimeout;events;constructor(ar,dr){this.components=ar,this.connectionEncryption=new Map,dr.connectionEncryption.forEach(fr=>{this.connectionEncryption.set(fr.protocol,fr)}),this.muxers=new Map,dr.muxers.forEach(fr=>{this.muxers.set(fr.protocol,fr)}),this.inboundUpgradeTimeout=dr.inboundUpgradeTimeout??INBOUND_UPGRADE_TIMEOUT,this.events=ar.events}async shouldBlockConnection(ar,dr,fr){const hr=this.components.connectionGater[fr];if(hr!==void 0&&await hr(ar,dr))throw new CodeError$3(`The multiaddr connection is blocked by gater.${fr}`,codes$1.ERR_CONNECTION_INTERCEPTED)}async upgradeInbound(ar,dr){if(!await this.components.connectionManager.acceptIncomingConnection(ar))throw new CodeError$3("connection denied",codes$1.ERR_CONNECTION_DENIED);let hr,pr,mr,gr,yr;const xr=AbortSignal.timeout(this.inboundUpgradeTimeout),wr=()=>{ar.abort(new CodeError$3("inbound upgrade timeout",ERR_TIMEOUT))};xr.addEventListener("abort",wr,{once:!0}),setMaxListeners(1/0,xr);try{if(await this.components.connectionGater.denyInboundConnection?.(ar)===!0)throw new CodeError$3("The multiaddr connection is blocked by gater.acceptConnection",codes$1.ERR_CONNECTION_INTERCEPTED);this.components.metrics?.trackMultiaddrConnection(ar),ar.log("starting the inbound connection upgrade");let br=ar;if(dr?.skipProtection!==!0){const Sr=this.components.connectionProtector;Sr!=null&&(ar.log("protecting the inbound connection"),br=await Sr.protect(ar))}try{if(hr=br,dr?.skipEncryption!==!0){({conn:hr,remotePeer:pr,protocol:yr}=await this._encryptInbound(br));const Sr={...br,...hr};await this.shouldBlockConnection(pr,Sr,"denyInboundEncryptedConnection")}else{const Sr=ar.remoteAddr.getPeerId();if(Sr==null)throw new CodeError$3("inbound connection that skipped encryption must have a peer id",codes$1.ERR_INVALID_MULTIADDR);const vr=peerIdFromString(Sr);yr="native",pr=vr}if(mr=hr,dr?.muxerFactory!=null)gr=dr.muxerFactory;else if(this.muxers.size>0){const Sr=await this._multiplexInbound({...br,...hr},this.muxers);gr=Sr.muxerFactory,mr=Sr.stream}}catch(Sr){throw ar.log.error("failed to upgrade inbound connection",Sr),Sr}return await this.shouldBlockConnection(pr,ar,"denyInboundUpgradedConnection"),ar.log("successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:yr,direction:"inbound",maConn:ar,upgradedConn:mr,muxerFactory:gr,remotePeer:pr,transient:dr?.transient})}finally{xr.removeEventListener("abort",wr),this.components.connectionManager.afterUpgradeInbound()}}async upgradeOutbound(ar,dr){const fr=ar.remoteAddr.getPeerId();let hr;fr!=null&&(hr=peerIdFromString(fr),await this.shouldBlockConnection(hr,ar,"denyOutboundConnection"));let pr,mr,gr,yr,xr;this.components.metrics?.trackMultiaddrConnection(ar),ar.log("starting the outbound connection upgrade");let wr=ar;if(dr?.skipProtection!==!0){const br=this.components.connectionProtector;br!=null&&(wr=await br.protect(ar))}try{if(pr=wr,dr?.skipEncryption!==!0){({conn:pr,remotePeer:mr,protocol:yr}=await this._encryptOutbound(wr,hr));const br={...wr,...pr};await this.shouldBlockConnection(mr,br,"denyOutboundEncryptedConnection")}else{if(hr==null)throw new CodeError$3("Encryption was skipped but no peer id was passed",codes$1.ERR_INVALID_PEER);yr="native",mr=hr}if(gr=pr,dr?.muxerFactory!=null)xr=dr.muxerFactory;else if(this.muxers.size>0){const br=await this._multiplexOutbound({...wr,...pr},this.muxers);xr=br.muxerFactory,gr=br.stream}}catch(br){throw ar.log.error("failed to upgrade outbound connection",br),await ar.close(br),br}return await this.shouldBlockConnection(mr,ar,"denyOutboundUpgradedConnection"),ar.log("successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:yr,direction:"outbound",maConn:ar,upgradedConn:gr,muxerFactory:xr,remotePeer:mr,transient:dr?.transient})}_createConnection(ar){const{cryptoProtocol:dr,direction:fr,maConn:hr,upgradedConn:pr,remotePeer:mr,muxerFactory:gr,transient:yr}=ar;let xr,wr,br;gr!=null&&(xr=gr.createStreamMuxer({direction:fr,onIncomingStream:Er=>{br!=null&&Promise.resolve().then(async()=>{const Ar=this.components.registrar.getProtocols(),{stream:_r,protocol:Cr}=await handle(Er,Ar,{log:Er.log,yieldBytes:!1});if(br==null)return;br.log("incoming stream opened on %s",Cr);const kr=findIncomingStreamLimit(Cr,this.components.registrar);if(countStreams(Cr,"inbound",br)===kr){const Ir=new CodeError$3(`Too many inbound protocol streams for protocol "${Cr}" - limit ${kr}`,codes$1.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS);throw Er.abort(Ir),Ir}Er.source=_r.source,Er.sink=_r.sink,Er.protocol=Cr,_r.closeWrite!=null&&(Er.closeWrite=_r.closeWrite),_r.closeRead!=null&&(Er.closeRead=_r.closeRead),_r.close!=null&&(Er.close=_r.close),await this.components.peerStore.merge(mr,{protocols:[Cr]}),this.components.metrics?.trackProtocolStream(Er,br),this._onStream({connection:br,stream:Er,protocol:Cr})}).catch(async Ar=>{br.log.error("error handling incoming stream id %s",Er.id,Ar.message,Ar.code,Ar.stack),Er.timeline.close==null&&await Er.close()})}}),wr=async(Er,Ar={})=>{if(xr==null)throw new CodeError$3("Stream is not multiplexed",codes$1.ERR_MUXER_UNAVAILABLE);br.log("starting new stream for protocols %s",Er);const _r=await xr.newStream();br.log.trace("started new stream %s for protocols %s",_r.id,Er);try{if(Ar.signal==null){_r.log("no abort signal was passed while trying to negotiate protocols %s falling back to default timeout",Er);const Nr=AbortSignal.timeout(DEFAULT_PROTOCOL_SELECT_TIMEOUT);setMaxListeners(1/0,Nr),Ar={...Ar,signal:Nr}}_r.log.trace("selecting protocol from protocols %s",Er);const{stream:Cr,protocol:kr}=await select(_r,Er,{...Ar,log:_r.log,yieldBytes:!0});_r.log("selected protocol %s",kr);const Rr=findOutgoingStreamLimit(kr,this.components.registrar,Ar);if(countStreams(kr,"outbound",br)>=Rr){const Nr=new CodeError$3(`Too many outbound protocol streams for protocol "${kr}" - limit ${Rr}`,codes$1.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS);throw _r.abort(Nr),Nr}return await this.components.peerStore.merge(mr,{protocols:[kr]}),_r.source=Cr.source,_r.sink=Cr.sink,_r.protocol=kr,Cr.closeWrite!=null&&(_r.closeWrite=Cr.closeWrite),Cr.closeRead!=null&&(_r.closeRead=Cr.closeRead),Cr.close!=null&&(_r.close=Cr.close),this.components.metrics?.trackProtocolStream(_r,br),_r}catch(Cr){throw br.log.error("could not create new stream for protocols %s",Er,Cr),_r.timeline.close==null&&_r.abort(Cr),Cr.code!=null?Cr:new CodeError$3(String(Cr),codes$1.ERR_UNSUPPORTED_PROTOCOL)}},Promise.all([xr.sink(pr.source),pr.sink(xr.source)]).catch(Er=>{br.log.error("error piping data through muxer",Er)}));const Sr=hr.timeline;hr.timeline=new Proxy(Sr,{set:(...Er)=>(br!=null&&Er[1]==="close"&&Er[2]!=null&&Sr.close==null&&(async()=>{try{br.status==="open"&&await br.close()}catch(Ar){br.log.error("error closing connection after timeline close",Ar)}finally{this.events.safeDispatchEvent("connection:close",{detail:br})}})().catch(Ar=>{br.log.error("error thrown while dispatching connection:close event",Ar)}),Reflect.set(...Er))}),hr.timeline.upgraded=Date.now();const vr=()=>{throw new CodeError$3("connection is not multiplexed",codes$1.ERR_CONNECTION_NOT_MULTIPLEXED)};return br=createConnection({remoteAddr:hr.remoteAddr,remotePeer:mr,status:"open",direction:fr,timeline:hr.timeline,multiplexer:xr?.protocol,encryption:dr,transient:yr,logger:this.components.logger,newStream:wr??vr,getStreams:()=>xr!=null?xr.streams:[],close:async Er=>{xr!=null&&(br.log.trace("close muxer"),await xr.close(Er)),br.log.trace("close maconn"),await hr.close(Er),br.log.trace("closed maconn")},abort:Er=>{hr.abort(Er),xr?.abort(Er)}}),this.events.safeDispatchEvent("connection:open",{detail:br}),br}_onStream(ar){const{connection:dr,stream:fr,protocol:hr}=ar,{handler:pr,options:mr}=this.components.registrar.getHandler(hr);if(dr.transient&&mr.runOnTransientConnection!==!0)throw new CodeError$3("Cannot open protocol stream on transient connection","ERR_TRANSIENT_CONNECTION");pr({connection:dr,stream:fr})}async _encryptInbound(ar){const dr=Array.from(this.connectionEncryption.keys());ar.log("handling inbound crypto protocol selection",dr);try{const{stream:fr,protocol:hr}=await handle(ar,dr,{log:ar.log}),pr=this.connectionEncryption.get(hr);if(pr==null)throw new Error(`no crypto module found for ${hr}`);return ar.log("encrypting inbound connection using",hr),{...await pr.secureInbound(this.components.peerId,fr),protocol:hr}}catch(fr){throw ar.log.error("encrypting inbound connection to %p failed",fr),new CodeError$3(fr.message,codes$1.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(ar,dr){const fr=Array.from(this.connectionEncryption.keys());ar.log("selecting outbound crypto protocol",fr);try{ar.log.trace("selecting encrypter from %s",fr);const{stream:hr,protocol:pr}=await select(ar,fr,{log:ar.log,yieldBytes:!0}),mr=this.connectionEncryption.get(pr);if(mr==null)throw new Error(`no crypto module found for ${pr}`);return ar.log("encrypting outbound connection to %p using %p",dr),{...await mr.secureOutbound(this.components.peerId,hr,dr),protocol:pr}}catch(hr){throw ar.log.error("encrypting outbound connection to %p failed",hr),new CodeError$3(hr.message,codes$1.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(ar,dr){const fr=Array.from(dr.keys());ar.log("outbound selecting muxer %s",fr);try{ar.log.trace("selecting stream muxer from %s",fr);const{stream:hr,protocol:pr}=await select(ar,fr,{log:ar.log,yieldBytes:!0});ar.log("selected %s as muxer protocol",pr);const mr=dr.get(pr);return{stream:hr,muxerFactory:mr}}catch(hr){throw ar.log.error("error multiplexing outbound connection",hr),new CodeError$3(String(hr),codes$1.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(ar,dr){const fr=Array.from(dr.keys());ar.log("inbound handling muxers %s",fr);try{const{stream:hr,protocol:pr}=await handle(ar,fr,{log:ar.log}),mr=dr.get(pr);return{stream:hr,muxerFactory:mr}}catch(hr){throw ar.log.error("error multiplexing inbound connection",hr),new CodeError$3(String(hr),codes$1.ERR_MUXER_UNAVAILABLE)}}}const version="1.2.1",name="libp2p";class Libp2pNode extends TypedEventEmitter{peerId;peerStore;contentRouting;peerRouting;metrics;services;logger;status;components;log;constructor(ar){super(),this.status="stopped";const dr=new TypedEventEmitter,fr=dr.dispatchEvent.bind(dr);dr.dispatchEvent=gr=>{const yr=fr(gr),xr=this.dispatchEvent(new CustomEvent$2(gr.type,{detail:gr.detail}));return yr||xr},setMaxListeners(1/0,dr),this.peerId=ar.peerId,this.logger=ar.logger??defaultLogger(),this.log=this.logger.forComponent("libp2p"),this.services={};const hr=this.components=defaultComponents({peerId:ar.peerId,privateKey:ar.privateKey,nodeInfo:ar.nodeInfo??{name,version},logger:this.logger,events:dr,datastore:ar.datastore??new MemoryDatastore,connectionGater:connectionGater(ar.connectionGater)});this.peerStore=this.configureComponent("peerStore",new PersistentPeerStore(hr,{addressFilter:this.components.connectionGater.filterMultiaddrForPeer,...ar.peerStore})),ar.metrics!=null&&(this.metrics=this.configureComponent("metrics",ar.metrics(this.components))),hr.events.addEventListener("peer:update",gr=>{if(gr.detail.previous==null){const yr={id:gr.detail.peer.id,multiaddrs:gr.detail.peer.addresses.map(xr=>xr.multiaddr)};hr.events.safeDispatchEvent("peer:discovery",{detail:yr})}}),ar.connectionProtector!=null&&this.configureComponent("connectionProtector",ar.connectionProtector(hr)),this.components.upgrader=new DefaultUpgrader(this.components,{connectionEncryption:(ar.connectionEncryption??[]).map((gr,yr)=>this.configureComponent(`connection-encryption-${yr}`,gr(this.components))),muxers:(ar.streamMuxers??[]).map((gr,yr)=>this.configureComponent(`stream-muxers-${yr}`,gr(this.components))),inboundUpgradeTimeout:ar.connectionManager.inboundUpgradeTimeout}),this.configureComponent("transportManager",new DefaultTransportManager(this.components,ar.transportManager)),this.configureComponent("connectionManager",new DefaultConnectionManager(this.components,ar.connectionManager)),this.configureComponent("registrar",new DefaultRegistrar(this.components)),this.configureComponent("addressManager",new DefaultAddressManager(this.components,ar.addresses));const pr=(ar.peerRouters??[]).map((gr,yr)=>this.configureComponent(`peer-router-${yr}`,gr(this.components)));this.peerRouting=this.components.peerRouting=this.configureComponent("peerRouting",new DefaultPeerRouting(this.components,{routers:pr}));const mr=(ar.contentRouters??[]).map((gr,yr)=>this.configureComponent(`content-router-${yr}`,gr(this.components)));if(this.contentRouting=this.components.contentRouting=this.configureComponent("contentRouting",new CompoundContentRouting(this.components,{routers:mr})),(ar.peerDiscovery??[]).forEach((gr,yr)=>{this.configureComponent(`peer-discovery-${yr}`,gr(this.components)).addEventListener("peer",wr=>{this.#e(wr)})}),ar.transports?.forEach((gr,yr)=>{this.components.transportManager.add(this.configureComponent(`transport-${yr}`,gr(this.components)))}),ar.services!=null)for(const gr of Object.keys(ar.services)){const yr=ar.services[gr],xr=yr(this.components);if(xr==null){this.log.error("service factory %s returned null or undefined instance",gr);continue}this.services[gr]=xr,this.configureComponent(gr,xr),xr[contentRoutingSymbol]!=null&&(this.log("registering service %s for content routing",gr),mr.push(xr[contentRoutingSymbol])),xr[peerRoutingSymbol]!=null&&(this.log("registering service %s for peer routing",gr),pr.push(xr[peerRoutingSymbol])),xr[peerDiscoverySymbol]!=null&&(this.log("registering service %s for peer discovery",gr),xr[peerDiscoverySymbol].addEventListener?.("peer",wr=>{this.#e(wr)}))}}configureComponent(ar,dr){return dr==null&&this.log.error("component %s was null or undefined",ar),this.components[ar]=dr,dr}async start(){if(this.status==="stopped"){this.status="starting",this.log("libp2p is starting");try{await this.components.beforeStart?.(),await this.components.start(),await this.components.afterStart?.(),this.status="started",this.safeDispatchEvent("start",{detail:this}),this.log("libp2p has started")}catch(ar){throw this.log.error("An error occurred starting libp2p",ar),this.status="started",await this.stop(),ar}}}async stop(){this.status==="started"&&(this.log("libp2p is stopping"),this.status="stopping",await this.components.beforeStop?.(),await this.components.stop(),await this.components.afterStop?.(),this.status="stopped",this.safeDispatchEvent("stop",{detail:this}),this.log("libp2p has stopped"))}getConnections(ar){return this.components.connectionManager.getConnections(ar)}getDialQueue(){return this.components.connectionManager.getDialQueue()}getPeers(){const ar=new PeerSet;for(const dr of this.components.connectionManager.getConnections())ar.add(dr.remotePeer);return Array.from(ar)}async dial(ar,dr={}){return this.components.connectionManager.openConnection(ar,{priority:75,...dr})}async dialProtocol(ar,dr,fr={}){if(dr==null)throw new CodeError$3("no protocols were provided to open a stream",codes$1.ERR_INVALID_PROTOCOLS_FOR_STREAM);if(dr=Array.isArray(dr)?dr:[dr],dr.length===0)throw new CodeError$3("no protocols were provided to open a stream",codes$1.ERR_INVALID_PROTOCOLS_FOR_STREAM);return(await this.dial(ar,fr)).newStream(dr,fr)}getMultiaddrs(){return this.components.addressManager.getAddresses()}getProtocols(){return this.components.registrar.getProtocols()}async hangUp(ar,dr={}){isMultiaddr(ar)&&(ar=peerIdFromString(ar.getPeerId()??"")),await this.components.connectionManager.closeConnections(ar,dr)}async getPublicKey(ar,dr={}){if(this.log("getPublicKey %p",ar),ar.publicKey!=null)return ar.publicKey;try{const pr=await this.peerStore.get(ar);if(pr.id.publicKey!=null)return pr.id.publicKey}catch(pr){if(pr.code!==codes$1.ERR_NOT_FOUND)throw pr}const fr=concat$2([fromString$1("/pk/"),ar.multihash.digest]),hr=await this.contentRouting.get(fr,dr);return unmarshalPublicKey$1(hr),await this.peerStore.patch(ar,{publicKey:hr}),hr}async handle(ar,dr,fr){Array.isArray(ar)||(ar=[ar]),await Promise.all(ar.map(async hr=>{await this.components.registrar.handle(hr,dr,fr)}))}async unhandle(ar){Array.isArray(ar)||(ar=[ar]),await Promise.all(ar.map(async dr=>{await this.components.registrar.unhandle(dr)}))}async register(ar,dr){return this.components.registrar.register(ar,dr)}unregister(ar){this.components.registrar.unregister(ar)}#e(ar){const{detail:dr}=ar;if(dr.id.toString()===this.peerId.toString()){this.log.error(new Error(codes$1.ERR_DISCOVERED_SELF));return}this.components.peerStore.merge(dr.id,{multiaddrs:dr.multiaddrs}).catch(fr=>{this.log.error(fr)})}}async function createLibp2pNode(cr={}){const ar=cr.peerId??=await createEd25519PeerId();if(ar.privateKey==null)throw new CodeError$3("peer id was missing private key","ERR_MISSING_PRIVATE_KEY");return cr.privateKey??=await unmarshalPrivateKey$2(ar.privateKey),new Libp2pNode(await validateConfig(cr))}async function createLibp2p(cr={}){const ar=await createLibp2pNode(cr);return cr.start!==!1&&await ar.start(),ar}const OKRA_VERSION=1,DEFAULT_K=16,DEFAULT_Q=32,DEFAULT_METADATA={K:DEFAULT_K,Q:DEFAULT_Q},MAXIMUM_HEIGHT=128;class NodeStore{store;metadata;static metadataKey=new Uint8Array([255]);static anchorLeafKey=new Uint8Array([0]);limit;constructor(ar,dr){this.store=ar,this.metadata=dr,this.limit=Number((1n<<32n)/BigInt(dr.Q))}async initialize(){const ar=await this.getMetadata();if(ar===null)await this.setMetadata(this.metadata),await this.setNode({level:0,key:null,hash:this.getLeafAnchorHash()});else{if(ar.K!==this.metadata.K)throw new Error("metadata.K conflict");if(ar.Q!==this.metadata.Q)throw new Error("metadata.Q conflict")}}async setMetadata(ar){const dr=new ArrayBuffer(10),fr=new DataView(dr,0,10),hr=new Uint8Array(dr,0,10);new TextEncoder().encodeInto("okra",hr),hr[4]=OKRA_VERSION,hr[5]=ar.K,fr.setUint32(6,ar.Q),await this.store.set(NodeStore.metadataKey,hr)}async getMetadata(){const ar=await this.store.get(NodeStore.metadataKey);if(ar===null)return null;if(ar.length===10){const dr=new DataView(ar.buffer,ar.byteOffset,ar.byteLength);return{K:ar[5],Q:dr.getUint32(6)}}else throw new Error("Invalid metadata entry")}async getNode(ar,dr){const fr=NodeStore.createEntryKey(ar,dr),hr=await this.store.get(fr);return hr&&this.parseEntry([fr,hr])}async setNode(ar){if(ar.hash.byteLength!==this.metadata.K)throw new Error("Internal error: node hash is not K bytes");const dr=NodeStore.createEntryKey(ar.level,ar.key);if(ar.level===0&&ar.key!==null){if(ar.value===void 0)throw new Error("Internal error: expected leaf node to have a value");const fr=new Uint8Array(new ArrayBuffer(this.metadata.K+ar.value.byteLength));fr.set(ar.hash),fr.set(ar.value,this.metadata.K),await this.store.set(dr,fr)}else await this.store.set(dr,ar.hash)}async deleteNode(ar,dr){const fr=NodeStore.createEntryKey(ar,dr);await this.store.delete(fr)}async*nodes(ar,dr=null,fr=null,{reverse:hr=!1}={}){const pr=dr?{key:NodeStore.createEntryKey(ar,dr.key),inclusive:dr.inclusive}:{key:NodeStore.createEntryKey(ar,null),inclusive:!0},mr=fr?{key:NodeStore.createEntryKey(ar,fr.key),inclusive:fr.inclusive}:{key:NodeStore.createEntryKey(ar+1,null),inclusive:!1};for await(const gr of this.store.entries(pr,mr,{reverse:hr}))yield this.parseEntry(gr)}parseEntry([ar,dr]){const[fr,hr]=NodeStore.parseEntryKey(ar);if(dr.byteLength<this.metadata.K)throw new Error("Internal error: entry value is less than K bytes");const pr=dr.subarray(0,this.metadata.K);return fr===0&&hr!==null?{level:fr,key:hr,hash:pr,value:dr.subarray(this.metadata.K)}:{level:fr,key:hr,hash:pr}}static parseEntryKey(ar){if(ar.byteLength===0)throw new Error("Internal error: empty entry key");return ar.byteLength===1?[ar[0],null]:[ar[0],ar.subarray(1)]}static createEntryKey(ar,dr){if(dr===null)return new Uint8Array([ar]);{const fr=new Uint8Array(new ArrayBuffer(1+dr.length));return fr[0]=ar,fr.set(dr,1),fr}}static size=new ArrayBuffer(4);static view=new DataView(NodeStore.size);hashEntry(ar,dr){const fr=blake3.create({dkLen:this.metadata.K});return NodeStore.view.setUint32(0,ar.length),fr.update(new Uint8Array(NodeStore.size)),fr.update(ar),NodeStore.view.setUint32(0,dr.length),fr.update(new Uint8Array(NodeStore.size)),fr.update(dr),fr.digest()}isSplit(ar){return new DataView(ar.buffer,ar.byteOffset,4).getUint32(0)<this.limit}getLeafAnchorHash=()=>blake3(new Uint8Array([]),{dkLen:this.metadata.K})}function assert$5(cr,ar,...dr){if(!cr)throw dr&&dr.length>0&&console.error(...dr),new Error(ar??"Internal error")}function lessThan$1(cr,ar){if(cr===null||ar===null)return ar!==null;let dr=cr.length,fr=ar.length;for(let hr=0,pr=Math.min(dr,fr);hr<pr;++hr)if(cr[hr]!==ar[hr]){dr=cr[hr],fr=ar[hr];break}return dr<fr}const equalArrays=(cr,ar)=>cr.length===ar.length&&cr.every((dr,fr)=>dr===ar[fr]);function equalKeys(cr,ar){return cr===null||ar===null?cr===null&&ar===null:equalArrays(cr,ar)}const equalNodes=(cr,ar)=>cr.level===ar.level&&equalKeys(cr.key,ar.key)&&equalArrays(cr.hash,ar.hash);let Builder$1=class io extends NodeStore{static async open(ar,dr=DEFAULT_METADATA){const fr=new io(ar,dr);return await fr.initialize(),await fr.setNode({level:0,key:null,hash:fr.getLeafAnchorHash()}),fr}nodeCount=1;async set(ar,dr){const fr=this.hashEntry(ar,dr);await this.setNode({level:0,key:ar,hash:fr,value:dr}),this.nodeCount+=1}async finalize(){let ar=0;for(;this.nodeCount>1;)this.nodeCount=await this.buildLevel(ar++);const dr=await this.getNode(ar,null);return assert$5(dr!==null,"root not found"),dr}async buildLevel(ar){const dr=this.nodes(ar),fr=()=>dr.next().then(({done:hr,value:pr})=>hr?null:pr);try{let hr=0,pr=await fr();assert$5(pr!==null,"level is empty"),assert$5(pr.level===ar&&pr.key===null,"first node was not an anchor");let mr=pr.key,gr=blake3.create({dkLen:this.metadata.K});for(gr.update(pr.hash);;){if(pr=await fr(),pr===null){await this.setNode({level:ar+1,key:mr,hash:gr.digest()}),hr++;break}assert$5(pr.level===ar,"unexpected node level"),this.isSplit(pr.hash)&&(await this.setNode({level:ar+1,key:mr,hash:gr.digest()}),hr++,mr=pr.key,gr=blake3.create({dkLen:this.metadata.K})),gr.update(pr.hash)}return hr}finally{if(dr.return!==void 0){const{done:hr,value:pr}=await dr.return();assert$5(hr&&pr===void 0)}}}};const formatKey=cr=>cr?bytesToHex$1(cr):"null",formatNode=cr=>cr?`{ ${cr.level}:${formatKey(cr.key)} | ${bytesToHex$1(cr.hash)} }`:"null",formatBound=cr=>cr?cr.inclusive?`[${formatKey(cr.key)}]`:`(${formatKey(cr.key)})`:"...";debug.formatters.h=bytesToHex$1;debug.formatters.k=formatKey;debug.formatters.n=formatNode;debug.formatters.b=formatBound;const Result={Update:0,Delete:1};class Tree extends NodeStore{store;static leafEntryLowerBound={key:NodeStore.createEntryKey(0,null),inclusive:!1};static leafEntryUpperBound={key:NodeStore.createEntryKey(1,null),inclusive:!1};static indent="  ";depth=0;newSiblings=[];format=debug("okra:tree");constructor(ar,dr={}){const fr={K:dr.K??DEFAULT_K,Q:dr.Q??DEFAULT_Q};super(ar,fr),this.store=ar}async*entries(ar=null,dr=null,{reverse:fr=!1}={}){const hr=ar?{key:NodeStore.createEntryKey(0,ar.key),inclusive:ar.inclusive}:Tree.leafEntryLowerBound,pr=dr?{key:NodeStore.createEntryKey(0,dr.key),inclusive:dr.inclusive}:Tree.leafEntryUpperBound;for await(const mr of this.store.entries(hr,pr,{reverse:fr})){const gr=this.parseEntry(mr);if(gr.key===null||gr.value===void 0)throw new Error("Internal error - unexpected leaf entry");yield[gr.key,gr.value]}}async get(ar){const dr=await this.getNode(0,ar);if(dr===null)return null;if(dr.value!==void 0)return dr.value;throw new Error("Internal error - missing leaf value")}async set(ar,dr){this.log("set(%h, %h)",ar,dr),await this.apply({type:"set",key:ar,value:dr})}async delete(ar){this.log("delete(%h)",ar),await this.apply({type:"delete",key:ar})}async apply(ar){if(this.newSiblings.length!==0)throw new Error("internal error");this.log("- apply");const dr=await this.getRoot();if(this.log("- got root %d %k %h",dr.level,dr.key,dr.hash),(dr.level===0?await this.applyLeaf(null,ar):await this.applyNode(dr.level-1,null,ar))===Result.Delete)throw new Error("internal error");let hr=dr.level||1;for(await this.hashNode(hr,null);this.newSiblings.length>0;)await this.promote(hr),hr+=1,await this.hashNode(hr,null);for(;hr>0;){const{key:pr,hash:mr}=await this.getLastNode(hr-1);if(this.log("got last: %k %h",pr,mr),pr!==null)break;await this.deleteNode(hr,null),hr--}}async applyLeaf(ar,dr){if(this.log("applyLeaf(%k, { %s %h })",ar,dr.type,dr.key),dr.type==="set"){const{key:fr,value:hr}=dr,pr=this.hashEntry(fr,hr);if(await this.setNode({level:0,key:fr,hash:pr,value:hr}),lessThan$1(ar,fr))return this.isSplit(pr)&&this.newSiblings.push(fr),Result.Update;if(equalKeys(ar,fr))return ar===null||this.isSplit(pr)?Result.Update:Result.Delete;throw new Error("invalid database")}else{if(dr.type==="delete")return await this.deleteNode(0,dr.key),equalKeys(dr.key,ar)?Result.Delete:Result.Update;throw new Error("invalid operation type")}}async applyNode(ar,dr,fr){try{if(this.depth+=1,ar===0)return this.applyLeaf(dr,fr);const hr=await this.findTarget(ar,dr,fr.key),pr=dr===null,mr=equalKeys(hr,dr);if(await this.applyNode(ar-1,hr,fr)===Result.Delete){assert$5(!pr||!mr);const yr=await this.moveToPreviousChild(ar,hr);await this.promote(ar);const xr=await this.hashNode(ar,yr);return mr||lessThan$1(yr,dr)?(xr&&this.newSiblings.push(yr),Result.Delete):equalKeys(yr,dr)?pr||xr?Result.Update:Result.Delete:(xr&&this.newSiblings.push(yr),Result.Update)}else{const yr=await this.hashNode(ar,hr);return await this.promote(ar),mr?yr||pr?Result.Update:Result.Delete:(yr&&this.newSiblings.push(hr),Result.Update)}}finally{this.depth-=1}}async promote(ar){const dr=[];for(const fr of this.newSiblings)await this.hashNode(ar,fr)&&dr.push(fr);this.newSiblings=dr}async findTarget(ar,dr,fr){let hr=null;for await(const pr of this.nodes(ar,{key:dr,inclusive:!0})){if(lessThan$1(fr,pr.key))break;hr=pr}return assert$5(hr!==null),hr.key}async moveToPreviousChild(ar,dr){this.log("moveToPreviousChild(%d, %k)",ar,dr),assert$5(ar>0),await this.deleteNode(ar,dr);const fr={key:null,inclusive:!0},hr={key:dr,inclusive:!1};for await(const pr of this.nodes(ar,fr,hr,{reverse:!0})){if(this.log("previousChild: %n",pr),pr.key===null)return null;const mr=await this.getNode(ar-1,pr.key);if(mr!==null&&this.isSplit(mr.hash))return pr.key;await this.deleteNode(ar,pr.key)}throw new Error("Internal error: unexpected end of range")}async hashNode(ar,dr){this.log("hashing %d %k",ar,dr);const fr=blake3.create({dkLen:this.metadata.K});for await(const pr of this.nodes(ar-1,{key:dr,inclusive:!0})){if(this.isSplit(pr.hash)&&!equalKeys(pr.key,dr))break;this.log("------- %h (%k)",pr.hash,pr.key),fr.update(pr.hash)}const hr={level:ar,key:dr,hash:fr.digest()};return this.log("------- %h",hr.hash),await this.setNode(hr),this.isSplit(hr.hash)}async getLastNode(ar){for await(const dr of this.nodes(ar,null,null,{reverse:!0}))return assert$5(dr.level===ar),dr;throw new Error("Internal error: empty level")}log(ar,...dr){this.format("%s"+ar,Tree.indent.repeat(this.depth),...dr)}async getRoot(){const ar={key:new Uint8Array([MAXIMUM_HEIGHT]),inclusive:!1};for await(const dr of this.store.entries(null,ar,{reverse:!0})){const fr=this.parseEntry(dr);return assert$5(fr.key===null,"Internal error: unexpected root node key",fr),fr}throw new Error("Internal error: empty node store")}async getChildren(ar,dr){if(ar===0)throw new RangeError("Cannot get children of a leaf node");const fr=[];for await(const hr of this.nodes(ar-1,{key:dr,inclusive:!0})){if(this.isSplit(hr.hash)&&!equalKeys(hr.key,dr))break;fr.push(hr)}return fr}async rebuild(){const ar={key:NodeStore.createEntryKey(1,null),inclusive:!0};for await(const[hr]of this.store.entries(ar))await this.store.delete(hr);return await(await Builder$1.open(this.store,this.metadata)).finalize()}async*print(ar={}){const dr=ar.hashSize??4,fr="  ".repeat(dr),hr=({hash:xr})=>bytesToHex$1(xr.subarray(0,dr)),pr=new TextEncoder,mr=this;async function*gr(xr,wr,br){if(yield pr.encode(wr),yield pr.encode(` ${hr(br)} `),br.level===0)br.key===null?yield pr.encode(`
`):yield pr.encode(` ${bytesToHex$1(br.key)}
`);else{const Sr=await mr.getChildren(br.level,br.key);for(const[vr,Er]of Sr.entries())vr>0&&(yield pr.encode(xr)),vr<Sr.length-1?yield*gr(xr+"   "+fr,vr===0?"":"",Er):yield*gr(xr+"    "+fr,vr===0?"":"",Er)}}const yr=await this.getRoot();yield*gr("    "+fr,"",yr)}}debug.formatters.h=bytesToHex$1;debug.formatters.k=formatKey;debug.formatters.n=formatNode;class IDBStore{db;storeName;log=debug("okra-idb:store");txn=null;constructor(ar,dr){this.db=ar,this.storeName=dr}async write(ar){this.txn=this.db.transaction(this.storeName,"readwrite");try{const dr=await ar();return this.txn.commit(),dr}catch(dr){console.error(dr),this.txn.abort()}finally{this.txn=null}}async read(ar){this.txn=this.db.transaction(this.storeName,"readonly");try{return await ar()}finally{this.txn=null}}async get(ar){this.log("get(%h})",ar),assert$5(this.txn!==null,"Internal error: this.txn !== null");const fr=await this.txn.objectStore(this.storeName).get(ar);if(fr===void 0)return null;if(fr instanceof Uint8Array)return fr;throw new Error("Unexpected value type")}async set(ar,dr){this.log("set(%h, %h)",ar,dr),assert$5(this.txn!==null,"Internal error: this.txn !== null");const fr=this.txn.objectStore(this.storeName);if(this.txn.mode==="readonly"||fr.put===void 0)throw new Error("Cannot set in a read-only transaction");await fr.put(dr,ar)}async delete(ar){assert$5(this.txn!==null,"Internal error: this.txn !== null");const dr=this.txn.objectStore(this.storeName);if(this.txn.mode==="readonly"||dr.delete===void 0)throw new Error("Cannot delete in a read-only transaction");await dr.delete(ar)}async*entries(ar=null,dr=null,{reverse:fr=!1}={}){let hr=null;ar&&dr?hr=IDBKeyRange.bound(ar.key,dr.key,!ar.inclusive,!dr.inclusive):ar?hr=IDBKeyRange.lowerBound(ar.key,!ar.inclusive):dr&&(hr=IDBKeyRange.upperBound(dr.key,!dr.inclusive)),assert$5(this.txn!==null,"Internal error: this.txn !== null");let mr=await this.txn.objectStore(this.storeName).openCursor(hr,fr?"prev":"next");for(;mr!==null;){let gr=null;if(mr.key instanceof Uint8Array)gr=mr.key;else if(mr.key instanceof ArrayBuffer)gr=new Uint8Array(mr.key);else throw new Error("Unexpected cursor key type");if(mr.value instanceof Uint8Array)yield[gr,mr.value];else throw new Error("Unexpected cursor value type");mr=await mr.continue()}}}class IDBTree extends Tree{store;static async open(ar,dr,fr={}){const hr=new IDBStore(ar,dr),pr=new IDBTree(hr,fr);return await hr.write(()=>pr.initialize()),pr}constructor(ar,dr){super(ar,dr),this.store=ar}async get(ar){return this.store.read(()=>super.get(ar))}async set(ar,dr){this.store.txn===null?await this.store.write(()=>super.set(ar,dr)):await super.set(ar,dr)}async delete(ar){this.store.txn===null?await this.store.write(()=>super.delete(ar)):await super.delete(ar)}async getRoot(){return this.store.txn===null?this.store.read(()=>super.getRoot()):super.getRoot()}getNode(ar,dr){return this.store.txn===null?this.store.read(()=>super.getNode(ar,dr)):super.getNode(ar,dr)}getChildren(ar,dr){return this.store.txn===null?this.store.read(()=>super.getChildren(ar,dr)):super.getChildren(ar,dr)}async*nodes(ar,dr=null,fr=null,{reverse:hr=!1}={}){if(this.store.txn===null)throw new Error("can only call nodes() from within a managed transaction");yield*super.nodes(ar,dr,fr,{reverse:hr})}async*entries(ar=null,dr=null,{reverse:fr=!1}={}){if(this.store.txn===null)throw new Error("can only call entries() from within a managed transaction");for await(const hr of this.nodes(0,ar??{key:null,inclusive:!1},dr,{reverse:fr}))assert$5(hr.key!==null&&hr.value!==void 0,"invalid leaf entry"),yield[hr.key,hr.value]}}const instanceOfAny=(cr,ar)=>ar.some(dr=>cr instanceof dr);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const transactionDoneMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(cr){const ar=new Promise((dr,fr)=>{const hr=()=>{cr.removeEventListener("success",pr),cr.removeEventListener("error",mr)},pr=()=>{dr(wrap(cr.result)),hr()},mr=()=>{fr(cr.error),hr()};cr.addEventListener("success",pr),cr.addEventListener("error",mr)});return reverseTransformCache.set(ar,cr),ar}function cacheDonePromiseForTransaction(cr){if(transactionDoneMap.has(cr))return;const ar=new Promise((dr,fr)=>{const hr=()=>{cr.removeEventListener("complete",pr),cr.removeEventListener("error",mr),cr.removeEventListener("abort",mr)},pr=()=>{dr(),hr()},mr=()=>{fr(cr.error||new DOMException("AbortError","AbortError")),hr()};cr.addEventListener("complete",pr),cr.addEventListener("error",mr),cr.addEventListener("abort",mr)});transactionDoneMap.set(cr,ar)}let idbProxyTraps={get(cr,ar,dr){if(cr instanceof IDBTransaction){if(ar==="done")return transactionDoneMap.get(cr);if(ar==="store")return dr.objectStoreNames[1]?void 0:dr.objectStore(dr.objectStoreNames[0])}return wrap(cr[ar])},set(cr,ar,dr){return cr[ar]=dr,!0},has(cr,ar){return cr instanceof IDBTransaction&&(ar==="done"||ar==="store")?!0:ar in cr}};function replaceTraps(cr){idbProxyTraps=cr(idbProxyTraps)}function wrapFunction(cr){return getCursorAdvanceMethods().includes(cr)?function(...ar){return cr.apply(unwrap(this),ar),wrap(this.request)}:function(...ar){return wrap(cr.apply(unwrap(this),ar))}}function transformCachableValue(cr){return typeof cr=="function"?wrapFunction(cr):(cr instanceof IDBTransaction&&cacheDonePromiseForTransaction(cr),instanceOfAny(cr,getIdbProxyableTypes())?new Proxy(cr,idbProxyTraps):cr)}function wrap(cr){if(cr instanceof IDBRequest)return promisifyRequest(cr);if(transformCache.has(cr))return transformCache.get(cr);const ar=transformCachableValue(cr);return ar!==cr&&(transformCache.set(cr,ar),reverseTransformCache.set(ar,cr)),ar}const unwrap=cr=>reverseTransformCache.get(cr);function openDB(cr,ar,{blocked:dr,upgrade:fr,blocking:hr,terminated:pr}={}){const mr=indexedDB.open(cr,ar),gr=wrap(mr);return fr&&mr.addEventListener("upgradeneeded",yr=>{fr(wrap(mr.result),yr.oldVersion,yr.newVersion,wrap(mr.transaction),yr)}),dr&&mr.addEventListener("blocked",yr=>dr(yr.oldVersion,yr.newVersion,yr)),gr.then(yr=>{pr&&yr.addEventListener("close",()=>pr()),hr&&yr.addEventListener("versionchange",xr=>hr(xr.oldVersion,xr.newVersion,xr))}).catch(()=>{}),gr}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(cr,ar){if(!(cr instanceof IDBDatabase&&!(ar in cr)&&typeof ar=="string"))return;if(cachedMethods.get(ar))return cachedMethods.get(ar);const dr=ar.replace(/FromIndex$/,""),fr=ar!==dr,hr=writeMethods.includes(dr);if(!(dr in(fr?IDBIndex:IDBObjectStore).prototype)||!(hr||readMethods.includes(dr)))return;const pr=async function(mr,...gr){const yr=this.transaction(mr,hr?"readwrite":"readonly");let xr=yr.store;return fr&&(xr=xr.index(gr.shift())),(await Promise.all([xr[dr](...gr),hr&&yr.done]))[0]};return cachedMethods.set(ar,pr),pr}replaceTraps(cr=>({...cr,get:(ar,dr,fr)=>getMethod(ar,dr)||cr.get(ar,dr,fr),has:(ar,dr)=>!!getMethod(ar,dr)||cr.has(ar,dr)}));const advanceMethodProps=["continue","continuePrimaryKey","advance"],methodMap={},advanceResults=new WeakMap,ittrProxiedCursorToOriginalProxy=new WeakMap,cursorIteratorTraps={get(cr,ar){if(!advanceMethodProps.includes(ar))return cr[ar];let dr=methodMap[ar];return dr||(dr=methodMap[ar]=function(...fr){advanceResults.set(this,ittrProxiedCursorToOriginalProxy.get(this)[ar](...fr))}),dr}};async function*iterate(...cr){let ar=this;if(ar instanceof IDBCursor||(ar=await ar.openCursor(...cr)),!ar)return;ar=ar;const dr=new Proxy(ar,cursorIteratorTraps);for(ittrProxiedCursorToOriginalProxy.set(dr,ar),reverseTransformCache.set(dr,unwrap(ar));ar;)yield dr,ar=await(advanceResults.get(dr)||ar.continue()),advanceResults.delete(dr)}function isIteratorProp(cr,ar){return ar===Symbol.asyncIterator&&instanceOfAny(cr,[IDBIndex,IDBObjectStore,IDBCursor])||ar==="iterate"&&instanceOfAny(cr,[IDBIndex,IDBObjectStore])}replaceTraps(cr=>({...cr,get(ar,dr,fr){return isIteratorProp(ar,dr)?iterate:cr.get(ar,dr,fr)},has(ar,dr){return isIteratorProp(ar,dr)||cr.has(ar,dr)}}));function peg$subclass(cr,ar){function dr(){this.constructor=cr}dr.prototype=ar.prototype,cr.prototype=new dr}function peg$SyntaxError(cr,ar,dr,fr){this.message=cr,this.expected=ar,this.found=dr,this.location=fr,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,peg$SyntaxError)}peg$subclass(peg$SyntaxError,Error);peg$SyntaxError.buildMessage=function(cr,ar){var dr={literal:function(xr){return'"'+hr(xr.text)+'"'},class:function(xr){var wr="",br;for(br=0;br<xr.parts.length;br++)wr+=xr.parts[br]instanceof Array?pr(xr.parts[br][0])+"-"+pr(xr.parts[br][1]):pr(xr.parts[br]);return"["+(xr.inverted?"^":"")+wr+"]"},any:function(xr){return"any character"},end:function(xr){return"end of input"},other:function(xr){return xr.description}};function fr(xr){return xr.charCodeAt(0).toString(16).toUpperCase()}function hr(xr){return xr.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(wr){return"\\x0"+fr(wr)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(wr){return"\\x"+fr(wr)})}function pr(xr){return xr.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(wr){return"\\x0"+fr(wr)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(wr){return"\\x"+fr(wr)})}function mr(xr){return dr[xr.type](xr)}function gr(xr){var wr=new Array(xr.length),br,Sr;for(br=0;br<xr.length;br++)wr[br]=mr(xr[br]);if(wr.sort(),wr.length>0){for(br=1,Sr=1;br<wr.length;br++)wr[br-1]!==wr[br]&&(wr[Sr]=wr[br],Sr++);wr.length=Sr}switch(wr.length){case 1:return wr[0];case 2:return wr[0]+" or "+wr[1];default:return wr.slice(0,-1).join(", ")+", or "+wr[wr.length-1]}}function yr(xr){return xr?'"'+hr(xr)+'"':"end of input"}return"Expected "+gr(cr)+" but "+yr(ar)+" found."};function peg$parse(cr,ar){ar=ar!==void 0?ar:{};var dr={},fr={Root:La},hr=La,pr=function(Gr){return Gr.reduce((us,ks)=>(ks.types?(us.types||(us.types={}),Object.assign(us.types,ks.types)):ks.advanced&&(us.advanced||(us.advanced={}),Object.assign(us.advanced,ks.advanced)),us),{})},mr=function(Gr){return{types:Gr}},gr=function(Gr){return{advanced:Gr}},yr="type",xr=ti("type",!1),wr=function(Gr,us){return{[Gr]:us}},br="advanced",Sr=ti("advanced",!1),vr=function(Gr){return{[Gr]:{advanced:{}}}},Er=function(Gr){return{advanced:Gr}},Ar=function(Gr){return Gr},_r=function(Gr){return{[Gr]:{}}},Cr="map",kr=ti("map",!1),Rr="list",Ir=ti("list",!1),Nr="enum",Pr=ti("enum",!1),Tr="union",Br=ti("union",!1),Fr="struct",jr=ti("struct",!1),Ur="bytes",qr=ti("bytes",!1),Hr=function(Gr){return Gr},Or="[",Mr=ti("[",!1),Lr="]",Vr=ti("]",!1),Jr=function(Gr,us){return{list:Object.assign({},Gr,us?{representation:us}:null)}},es=function(Gr,us){return Gr.reduce(Ci,{valueType:us})},ns="&",Qr=ti("&",!1),zr=function(Gr){return{link:{expectedType:Gr}}},Wr="=",ss=ti("=",!1),Xr=function(Gr){return{copy:{fromType:Gr}}},ts="{",fs=ti("{",!1),rs="}",as=ti("}",!1),ps=function(Gr,us){(!us||!(us.string||us.int))&&(us={string:{}});const ks=Gr.filter(_s=>Object.values(_s)[0]).reduce(Ci,{});return Gr=Object.keys(Gr.reduce(Ci,{})),us.string?us.string=ks:us.int&&(us.int=ks,Object.entries(ks).forEach(([_s,Ks])=>{const Gs=parseInt(Ks,10);if(Gs!=Ks)throw new Error("int representations only support integer representation values");ks[_s]=Gs})),{enum:{members:Gr,representation:us}}},xs="|",Ss=ti("|",!1),Ns=function(Gr,us){return{[Gr]:us}},Ts="(",os=ti("(",!1),bs=")",ws=ti(")",!1),As=function(Gr){return Gr},gs=function(Gr,us){let ks=Gr.reduce(Ci,{});if(us.keyed)us.keyed=ks;else if(us.kinded)us.kinded=ks;else if(us.stringprefix)us.stringprefix={prefixes:ks};else if(us.bytesprefix)us.bytesprefix={prefixes:ks};else if(us.inline)us.inline.discriminantTable=ks;else if(us.envelope)us.envelope.discriminantTable=ks;else throw new Error("Unsupported union type");return{union:{members:Object.values(ks),representation:us}}},vs=function(Gr,us){return{[us]:Gr}},Ps=":",Os=ti(":",!1),Ms=function(Gr,us,ks){let _s=ks&&ks.type;return _s&&(ks={[_s]:ks||{}},delete ks[_s].type),{map:Object.assign({keyType:Gr},us,ks?{representation:ks}:null)}},zs=function(Gr,us){let ks=Gr.reduce(Ci,{});const _s=Object.entries(ks).reduce((Gs,Zs)=>(Zs[1].representationOptions&&(Gs[Zs[0]]=Zs[1].representationOptions,delete Zs[1].representationOptions),Gs),{});let Ks=us&&us.type;if(Ks&&(us={[Ks]:us||{}},delete us[Ks].type),Object.keys(_s).length){if(us||(us=no()),!us.map)throw new Error("field modifiers only valid for struct map representation");us.map.fields=_s}return{struct:Ci({fields:ks},{representation:us||no()})}},Hs=function(Gr,us,ks,_s){return{[Gr]:us.reduce(Ci,Ci({type:ks},_s?{representationOptions:_s}:null))}},Cs="optional",ls=ti("optional",!1),Kr=function(){return{optional:!0}},Zr="nullable",hs=ti("nullable",!1),ys=function(){return{nullable:!0}},Es=function(){return{valueNullable:!0}},Is=function(Gr){return Gr},$s=function(Gr){return Gr.reduce(Ci,{})},Rs="implicit",Bs=ti("implicit",!1),Ds=function(Gr){return{implicit:Gr}},Ls="rename",Fs=ti("rename",!1),js=function(Gr){return{rename:Gr}},Us=function(Gr){return Gr},Vs=function(Gr){return parseInt(Gr,10)},ni="true",Js=ti("true",!1),Ys=function(){return!0},Xs="false",Qs=ti("false",!1),ai=function(){return!1},hi="representation",li=ti("representation",!1),fi=function(Gr){return Gr},gi="keyed",ui=ti("keyed",!1),pi=function(){return{keyed:{}}},wi="kinded",ei=ti("kinded",!1),ci=function(){return{kinded:{}}},ii="stringprefix",si=ti("stringprefix",!1),di=function(){return{stringprefix:{}}},xi="bytesprefix",ri=ti("bytesprefix",!1),mi=function(){return{bytesprefix:{}}},Ai="inline",Ti=ti("inline",!1),Ri="envelope",Ni=ti("envelope",!1),bi="discriminantKey",zi=ti("discriminantKey",!1),Qi=function(Gr){return{inline:{discriminantKey:Gr}}},Ki="contentKey",Ji=ti("contentKey",!1),Xi=function(Gr,us){return{envelope:{discriminantKey:Gr,contentKey:us}}},Hi=function(){return{type:"map"}},Di="listpairs",Vi=ti("listpairs",!1),Gi=function(){return{type:"listpairs"}},ji="stringpairs",qi=ti("stringpairs",!1),Li=function(Gr){return Gr},Zi=function(Gr){let us=Ci({type:"stringpairs"},Gr.reduce(Ci,{}));if(!us.innerDelim||!us.entryDelim)throw new Error('"stringpairs" representation requires both "innerDelim" and "entryDelim" options');return us},Wi="innerDelim",ao=ti("innerDelim",!1),oo=function(Gr){return{innerDelim:Gr}},da="entryDelim",co=ti("entryDelim",!1),lo=function(Gr){return{entryDelim:Gr}},fa="tuple",uo=ti("tuple",!1),fo=function(Gr){return Ci({type:"tuple"},Gr?{fieldOrder:Gr}:null)},ha="stringjoin",ho=ti("stringjoin",!1),po=function(Gr){return Ci({type:"stringjoin"},Gr)},pa=function(Gr){return Gr},ea="fieldOrder",ma=ti("fieldOrder",!1),mo=function(Gr){if(Gr=Gr.reduce(Ci,{}),!Gr.join)throw new Error('stringjoin representation needs a "join" specifier');return Gr},ga="join",go=ti("join",!1),yo=function(Gr){return{join:Gr}},xo=function(Gr){return{fieldOrder:Gr}},ta="string",ya=ti("string",!1),wo=function(){return{string:{}}},ra="int",xa=ti("int",!1),bo=function(){return{int:{}}},So=function(Gr){return{bytes:{representation:Gr}}},wa=",",ba=ti(",",!1),Sa=function(Gr,us){return us},vo=function(Gr,us){return Gr?us?[Gr].concat(us):[Gr]:[]},va='"',Ea=ti('"',!1),$a=/^[^"]/,Aa=Fi(['"'],!0,!1),Eo=function(Gr){return Gr.join("")},_o=/^[a-zA-Z]/,$o=Fi([["a","z"],["A","Z"]],!1,!1),Ca=/^[a-zA-Z0-9_]/,ka=Fi([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),Ao=function(Gr,us){return Gr+us.join("")},Ta=/^[0-9]/,Ra=Fi([["0","9"]],!1,!1),Co=function(Gr){return parseInt(Gr.join(""),10)},Ia="bool",ko=ti("bool",!1),Pa="float",To=ti("float",!1),Na="link",Ro=ti("link",!1),Ba="null",Io=ti("null",!1),Oa="any",Po=ti("any",!1),No=/^[ \t\n\r]/,Bo=Fi([" ","	",`
`,"\r"],!1,!1),Oo="#",Mo=ti("#",!1),Ma=/^[^\r\n]/,za=Fi(["\r",`
`],!0,!1),zo=/^[\r\n]/,Do=Fi(["\r",`
`],!1,!1),jo=function(){},ds=0,na=[{line:1,column:1}],Bi=0,aa=[],sa;if("startRule"in ar){if(!(ar.startRule in fr))throw new Error(`Can't start parsing from rule "`+ar.startRule+'".');hr=fr[ar.startRule]}function ti(Gr,us){return{type:"literal",text:Gr,ignoreCase:us}}function Fi(Gr,us,ks){return{type:"class",parts:Gr,inverted:us,ignoreCase:ks}}function Lo(){return{type:"end"}}function Da(Gr){var us=na[Gr],ks;if(us)return us;for(ks=Gr-1;!na[ks];)ks--;for(us=na[ks],us={line:us.line,column:us.column};ks<Gr;)cr.charCodeAt(ks)===10?(us.line++,us.column=1):us.column++,ks++;return na[Gr]=us,us}function ja(Gr,us){var ks=Da(Gr),_s=Da(us);return{start:{offset:Gr,line:ks.line,column:ks.column},end:{offset:us,line:_s.line,column:_s.column}}}function qs(Gr){ds<Bi||(ds>Bi&&(Bi=ds,aa=[]),aa.push(Gr))}function Fo(Gr,us,ks){return new peg$SyntaxError(peg$SyntaxError.buildMessage(Gr,us),Gr,us,ks)}function La(){var Gr,us,ks;if(Gr=ds,us=[],ks=Fa(),ks!==dr)for(;ks!==dr;)us.push(ks),ks=Fa();else us=dr;return us!==dr&&(us=pr(us)),Gr=us,Gr}function Fa(){var Gr,us;return Gr=ds,us=Uo(),us!==dr&&(us=mr(us)),Gr=us,Gr===dr&&(Gr=ds,us=Ko(),us!==dr&&(us=gr(us)),Gr=us),Gr}function Uo(){var Gr,us,ks,_s,Ks,Gs,Zs,oi;return Gr=ds,us=Ws(),us!==dr?(cr.substr(ds,4)===yr?(ks=yr,ds+=4):(ks=dr,qs(xr)),ks!==dr?(_s=Ws(),_s!==dr?(Ks=Ii(),Ks!==dr?(Gs=Ws(),Gs!==dr?(Zs=Ho(),Zs!==dr?(oi=Ws(),oi!==dr?(us=wr(Ks,Zs),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function Ko(){var Gr,us,ks,_s,Ks,Gs;return Gr=ds,us=Ws(),us!==dr?(cr.substr(ds,8)===br?(ks=br,ds+=8):(ks=dr,qs(Sr)),ks!==dr?(_s=Ws(),_s!==dr?(Ks=Ii(),Ks!==dr?(Gs=Ws(),Gs!==dr?(us=vr(Ks),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function oa(){var Gr,us;return Gr=ds,us=Ii(),us!==dr&&(us=Er(us)),Gr=us,Gr}function Ho(){var Gr,us,ks,_s;return Gr=ds,us=la(),us!==dr&&(us=Ar(us)),Gr=us,Gr===dr&&(Gr=ds,us=ca(),us!==dr&&(us=Ar(us)),Gr=us,Gr===dr&&(Gr=ds,us=ia(),us!==dr&&(us=Ar(us)),Gr=us,Gr===dr&&(Gr=ds,us=Jo(),us!==dr&&(us=Ar(us)),Gr=us,Gr===dr&&(Gr=ds,us=Go(),us!==dr?(ks=Ws(),ks!==dr?(_s=Xo(),_s!==dr?(us=Ar(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr===dr&&(Gr=ds,us=qo(),us!==dr?(ks=Ws(),ks!==dr?(_s=rc(),_s!==dr?(us=Ar(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr===dr&&(Gr=ds,us=Wo(),us!==dr?(ks=Ws(),ks!==dr?(_s=nc(),_s!==dr?(us=Ar(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr===dr&&(Gr=ds,us=Yo(),us!==dr?(ks=Ws(),ks!==dr?(_s=$c(),_s!==dr?(us=Ar(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr===dr&&(Gr=ds,us=Qo(),us!==dr&&(us=_r(us)),Gr=us)))))))),Gr}function Go(){var Gr;return cr.substr(ds,4)===Nr?(Gr=Nr,ds+=4):(Gr=dr,qs(Pr)),Gr}function qo(){var Gr;return cr.substr(ds,5)===Tr?(Gr=Tr,ds+=5):(Gr=dr,qs(Br)),Gr}function Wo(){var Gr;return cr.substr(ds,6)===Fr?(Gr=Fr,ds+=6):(Gr=dr,qs(jr)),Gr}function Yo(){var Gr;return cr.substr(ds,5)===Ur?(Gr=Ur,ds+=5):(Gr=dr,qs(qr)),Gr}function Qo(){var Gr,us;return Gr=ds,us=Za(),us!==dr&&(us=Hr(us)),Gr=us,Gr}function ca(){var Gr,us,ks,_s,Ks,Gs,Zs,oi;return Gr=ds,cr.charCodeAt(ds)===91?(us=Or,ds++):(us=dr,qs(Mr)),us!==dr?(ks=Ws(),ks!==dr?(_s=Ua(),_s!==dr?(Ks=Ws(),Ks!==dr?(cr.charCodeAt(ds)===93?(Gs=Lr,ds++):(Gs=dr,qs(Vr)),Gs!==dr?(Zs=Ws(),Zs!==dr?(oi=lc(),oi===dr&&(oi=null),oi!==dr?(us=Jr(_s,oi),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function Ua(){var Gr,us,ks,_s;for(Gr=ds,us=[],ks=qa();ks!==dr;)us.push(ks),ks=qa();return us!==dr?(ks=Ws(),ks!==dr?(_s=Ii(),_s===dr&&(_s=la(),_s===dr&&(_s=ca(),_s===dr&&(_s=ia()))),_s!==dr?(us=es(us,_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function ia(){var Gr,us,ks;return Gr=ds,cr.charCodeAt(ds)===38?(us=ns,ds++):(us=dr,qs(Qr)),us!==dr?(ks=Ii(),ks!==dr?(us=zr(ks),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function Jo(){var Gr,us,ks,_s;return Gr=ds,cr.charCodeAt(ds)===61?(us=Wr,ds++):(us=dr,qs(ss)),us!==dr?(ks=Ws(),ks!==dr?(_s=Ii(),_s!==dr?(us=Xr(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function Xo(){var Gr,us,ks,_s,Ks,Gs,Zs;if(Gr=ds,cr.charCodeAt(ds)===123?(us=ts,ds++):(us=dr,qs(fs)),us!==dr){if(ks=[],_s=Ka(),_s!==dr)for(;_s!==dr;)ks.push(_s),_s=Ka();else ks=dr;ks!==dr?(cr.charCodeAt(ds)===125?(_s=rs,ds++):(_s=dr,qs(as)),_s!==dr?(Ks=Ws(),Ks!==dr?(Gs=dc(),Gs===dr&&(Gs=null),Gs!==dr?(Zs=Ws(),Zs!==dr?(us=ps(ks,Gs),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)}else ds=Gr,Gr=dr;return Gr}function Ka(){var Gr,us,ks,_s,Ks,Gs,Zs,oi;return Gr=ds,us=Ws(),us!==dr?(cr.charCodeAt(ds)===124?(ks=xs,ds++):(ks=dr,qs(Ss)),ks!==dr?(_s=Ws(),_s!==dr?(Ks=Ii(),Ks!==dr?(Gs=Ws(),Gs!==dr?(Zs=Zo(),Zs===dr&&(Zs=null),Zs!==dr?(oi=Ws(),oi!==dr?(us=Ns(Ks,Zs),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function Zo(){var Gr,us,ks,_s,Ks,Gs;return Gr=ds,cr.charCodeAt(ds)===40?(us=Ts,ds++):(us=dr,qs(os)),us!==dr?(ks=Ws(),ks!==dr?(_s=ki(),_s!==dr?(Ks=Ws(),Ks!==dr?(cr.charCodeAt(ds)===41?(Gs=bs,ds++):(Gs=dr,qs(ws)),Gs!==dr?(us=As(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function rc(){var Gr,us,ks,_s,Ks,Gs;if(Gr=ds,cr.charCodeAt(ds)===123?(us=ts,ds++):(us=dr,qs(fs)),us!==dr){if(ks=[],_s=Ha(),_s!==dr)for(;_s!==dr;)ks.push(_s),_s=Ha();else ks=dr;ks!==dr?(cr.charCodeAt(ds)===125?(_s=rs,ds++):(_s=dr,qs(as)),_s!==dr?(Ks=Ws(),Ks!==dr?(Gs=oc(),Gs!==dr?(us=gs(ks,Gs),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)}else ds=Gr,Gr=dr;return Gr}function Ha(){var Gr,us,ks,_s,Ks,Gs,Zs,oi;return Gr=ds,us=Ws(),us!==dr?(cr.charCodeAt(ds)===124?(ks=xs,ds++):(ks=dr,qs(Ss)),ks!==dr?(_s=Ws(),_s!==dr?(Ks=Ii(),Ks===dr&&(Ks=ia()),Ks!==dr?(Gs=Ws(),Gs!==dr?(Zs=ki(),Zs===dr&&(Zs=Za()),Zs!==dr?(oi=Ws(),oi!==dr?(us=vs(Ks,Zs),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function la(){var Gr,us,ks,_s,Ks,Gs,Zs,oi,_i,vi,Oi,Mi;return Gr=ds,cr.charCodeAt(ds)===123?(us=ts,ds++):(us=dr,qs(fs)),us!==dr?(ks=Ws(),ks!==dr?(_s=Ii(),_s!==dr?(Ks=Ws(),Ks!==dr?(cr.charCodeAt(ds)===58?(Gs=Ps,ds++):(Gs=dr,qs(Os)),Gs!==dr?(Zs=Ws(),Zs!==dr?(oi=Ua(),oi!==dr?(_i=Ws(),_i!==dr?(cr.charCodeAt(ds)===125?(vi=rs,ds++):(vi=dr,qs(as)),vi!==dr?(Oi=Ws(),Oi!==dr?(Mi=cc(),Mi===dr&&(Mi=null),Mi!==dr?(us=Ms(_s,oi,Mi),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function nc(){var Gr,us,ks,_s,Ks,Gs,Zs,oi;if(Gr=ds,cr.charCodeAt(ds)===123?(us=ts,ds++):(us=dr,qs(fs)),us!==dr)if(ks=Ws(),ks!==dr){for(_s=[],Ks=Va();Ks!==dr;)_s.push(Ks),Ks=Va();_s!==dr?(Ks=Ws(),Ks!==dr?(cr.charCodeAt(ds)===125?(Gs=rs,ds++):(Gs=dr,qs(as)),Gs!==dr?(Zs=Ws(),Zs!==dr?(oi=uc(),oi===dr&&(oi=null),oi!==dr?(us=zs(_s,oi),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)}else ds=Gr,Gr=dr;else ds=Gr,Gr=dr;return Gr}function Va(){var Gr,us,ks,_s,Ks,Gs,Zs,oi,_i,vi;if(Gr=ds,us=Ws(),us!==dr)if(ks=Ii(),ks!==dr)if(_s=Ws(),_s!==dr){for(Ks=[],Gs=Ga();Gs!==dr;)Ks.push(Gs),Gs=Ga();Ks!==dr?(Gs=Ws(),Gs!==dr?(Zs=sc(),Zs!==dr?(oi=Ws(),oi!==dr?(_i=ic(),_i===dr&&(_i=null),_i!==dr?(vi=Ws(),vi!==dr?(us=Hs(ks,Ks,Zs,_i),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)}else ds=Gr,Gr=dr;else ds=Gr,Gr=dr;else ds=Gr,Gr=dr;return Gr}function Ga(){var Gr,us;return Gr=ds,cr.substr(ds,8)===Cs?(us=Cs,ds+=8):(us=dr,qs(ls)),us!==dr&&(us=Kr()),Gr=us,Gr===dr&&(Gr=ds,cr.substr(ds,8)===Zr?(us=Zr,ds+=8):(us=dr,qs(hs)),us!==dr&&(us=ys()),Gr=us),Gr}function qa(){var Gr,us;return Gr=ds,cr.substr(ds,8)===Cs?(us=Cs,ds+=8):(us=dr,qs(ls)),us!==dr&&(us=Kr()),Gr=us,Gr===dr&&(Gr=ds,cr.substr(ds,8)===Zr?(us=Zr,ds+=8):(us=dr,qs(hs)),us!==dr&&(us=Es()),Gr=us),Gr}function sc(){var Gr,us;return Gr=ds,us=Ii(),us!==dr&&(us=Is(us)),Gr=us,Gr===dr&&(Gr=la(),Gr===dr&&(Gr=ca(),Gr===dr&&(Gr=ia()))),Gr}function ic(){var Gr,us,ks,_s,Ks,Gs;if(Gr=ds,cr.charCodeAt(ds)===40?(us=Ts,ds++):(us=dr,qs(os)),us!==dr)if(ks=Ws(),ks!==dr){for(_s=[],Ks=Wa();Ks!==dr;)_s.push(Ks),Ks=Wa();_s!==dr?(Ks=Ws(),Ks!==dr?(cr.charCodeAt(ds)===41?(Gs=bs,ds++):(Gs=dr,qs(ws)),Gs!==dr?(us=$s(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)}else ds=Gr,Gr=dr;else ds=Gr,Gr=dr;return Gr}function Wa(){var Gr,us,ks,_s,Ks;return Gr=ds,cr.substr(ds,8)===Rs?(us=Rs,ds+=8):(us=dr,qs(Bs)),us!==dr?(ks=Ws(),ks!==dr?(_s=ac(),_s!==dr?(us=Ds(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr===dr&&(Gr=ds,cr.substr(ds,6)===Ls?(us=Ls,ds+=6):(us=dr,qs(Fs)),us!==dr?(ks=Ws(),ks!==dr?(_s=ki(),_s!==dr?(Ks=Ws(),Ks!==dr?(us=js(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)),Gr}function ac(){var Gr,us,ks;return Gr=ds,us=ki(),us!==dr?(ks=Ws(),ks!==dr?(us=Us(us),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr===dr&&(Gr=ds,us=Ac(),us!==dr?(ks=Ws(),ks!==dr?(us=Vs(us),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr===dr&&(Gr=ds,cr.substr(ds,4)===ni?(us=ni,ds+=4):(us=dr,qs(Js)),us!==dr&&(us=Ys()),Gr=us,Gr===dr&&(Gr=ds,cr.substr(ds,5)===Xs?(us=Xs,ds+=5):(us=dr,qs(Qs)),us!==dr&&(us=ai()),Gr=us))),Gr}function oc(){var Gr,us,ks,_s,Ks;return Gr=ds,cr.substr(ds,14)===hi?(us=hi,ds+=14):(us=dr,qs(li)),us!==dr?(ks=Ws(),ks!==dr?(_s=fc(),_s!==dr?(Ks=Ws(),Ks!==dr?(us=fi(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function cc(){var Gr,us,ks,_s,Ks;return Gr=ds,cr.substr(ds,14)===hi?(us=hi,ds+=14):(us=dr,qs(li)),us!==dr?(ks=Ws(),ks!==dr?(_s=mc(),_s!==dr?(Ks=Ws(),Ks!==dr?(us=fi(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function lc(){var Gr,us,ks,_s,Ks;return Gr=ds,cr.substr(ds,14)===hi?(us=hi,ds+=14):(us=dr,qs(li)),us!==dr?(ks=Ws(),ks!==dr?(_s=gc(),_s!==dr?(Ks=Ws(),Ks!==dr?(us=fi(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function uc(){var Gr,us,ks,_s,Ks;return Gr=ds,cr.substr(ds,14)===hi?(us=hi,ds+=14):(us=dr,qs(li)),us!==dr?(ks=Ws(),ks!==dr?(_s=yc(),_s!==dr?(Ks=Ws(),Ks!==dr?(us=fi(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function dc(){var Gr,us,ks,_s,Ks;return Gr=ds,cr.substr(ds,14)===hi?(us=hi,ds+=14):(us=dr,qs(li)),us!==dr?(ks=Ws(),ks!==dr?(_s=Ec(),_s!==dr?(Ks=Ws(),Ks!==dr?(us=fi(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function fc(){var Gr,us,ks,_s;return Gr=ds,cr.substr(ds,5)===gi?(us=gi,ds+=5):(us=dr,qs(ui)),us!==dr&&(us=pi()),Gr=us,Gr===dr&&(Gr=ds,cr.substr(ds,6)===wi?(us=wi,ds+=6):(us=dr,qs(ei)),us!==dr&&(us=ci()),Gr=us,Gr===dr&&(Gr=ds,cr.substr(ds,12)===ii?(us=ii,ds+=12):(us=dr,qs(si)),us!==dr&&(us=di()),Gr=us,Gr===dr&&(Gr=ds,cr.substr(ds,11)===xi?(us=xi,ds+=11):(us=dr,qs(ri)),us!==dr&&(us=mi()),Gr=us,Gr===dr&&(Gr=ds,cr.substr(ds,6)===Ai?(us=Ai,ds+=6):(us=dr,qs(Ti)),us!==dr?(ks=Ws(),ks!==dr?(_s=hc(),_s!==dr?(us=Ar(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr===dr&&(Gr=ds,cr.substr(ds,8)===Ri?(us=Ri,ds+=8):(us=dr,qs(Ni)),us!==dr?(ks=Ws(),ks!==dr?(_s=pc(),_s!==dr?(us=Ar(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)))))),Gr}function hc(){var Gr,us,ks,_s,Ks,Gs,Zs,oi;return Gr=ds,cr.charCodeAt(ds)===123?(us=ts,ds++):(us=dr,qs(fs)),us!==dr?(ks=Ws(),ks!==dr?(cr.substr(ds,15)===bi?(_s=bi,ds+=15):(_s=dr,qs(zi)),_s===dr&&(cr.substr(ds,15)===bi?(_s=bi,ds+=15):(_s=dr,qs(zi))),_s!==dr?(Ks=Ws(),Ks!==dr?(Gs=ki(),Gs!==dr?(Zs=Ws(),Zs!==dr?(cr.charCodeAt(ds)===125?(oi=rs,ds++):(oi=dr,qs(as)),oi!==dr?(us=Qi(Gs),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function pc(){var Gr,us,ks,_s,Ks,Gs,Zs,oi,_i,vi,Oi,Mi;return Gr=ds,cr.charCodeAt(ds)===123?(us=ts,ds++):(us=dr,qs(fs)),us!==dr?(ks=Ws(),ks!==dr?(cr.substr(ds,15)===bi?(_s=bi,ds+=15):(_s=dr,qs(zi)),_s===dr&&(cr.substr(ds,15)===bi?(_s=bi,ds+=15):(_s=dr,qs(zi))),_s!==dr?(Ks=Ws(),Ks!==dr?(Gs=ki(),Gs!==dr?(Zs=Ws(),Zs!==dr?(cr.substr(ds,10)===Ki?(oi=Ki,ds+=10):(oi=dr,qs(Ji)),oi!==dr?(_i=Ws(),_i!==dr?(vi=ki(),vi!==dr?(Oi=Ws(),Oi!==dr?(cr.charCodeAt(ds)===125?(Mi=rs,ds++):(Mi=dr,qs(as)),Mi!==dr?(us=Xi(Gs,vi),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function mc(){var Gr,us,ks,_s;return Gr=ds,cr.substr(ds,3)===Cr?(us=Cr,ds+=3):(us=dr,qs(kr)),us!==dr&&(us=Hi()),Gr=us,Gr===dr&&(Gr=ds,cr.substr(ds,9)===Di?(us=Di,ds+=9):(us=dr,qs(Vi)),us!==dr&&(us=Gi()),Gr=us,Gr===dr&&(Gr=ds,cr.substr(ds,11)===ji?(us=ji,ds+=11):(us=dr,qs(qi)),us!==dr?(ks=Ws(),ks!==dr?(_s=Ya(),_s!==dr?(us=Li(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr===dr&&(Gr=ds,cr.substr(ds,8)===br?(us=br,ds+=8):(us=dr,qs(Sr)),us!==dr?(ks=Ws(),ks!==dr?(_s=oa(),_s!==dr?(us=Li(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)))),Gr}function Ya(){var Gr,us,ks,_s,Ks,Gs;if(Gr=ds,cr.charCodeAt(ds)===123?(us=ts,ds++):(us=dr,qs(fs)),us!==dr)if(ks=Ws(),ks!==dr){for(_s=[],Ks=Qa();Ks!==dr;)_s.push(Ks),Ks=Qa();_s!==dr?(Ks=Ws(),Ks!==dr?(cr.charCodeAt(ds)===125?(Gs=rs,ds++):(Gs=dr,qs(as)),Gs!==dr?(us=Zi(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)}else ds=Gr,Gr=dr;else ds=Gr,Gr=dr;return Gr}function Qa(){var Gr,us,ks,_s,Ks;return Gr=ds,us=Ws(),us!==dr?(cr.substr(ds,10)===Wi?(ks=Wi,ds+=10):(ks=dr,qs(ao)),ks!==dr?(_s=Ws(),_s!==dr?(Ks=ki(),Ks!==dr?(us=oo(Ks),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr===dr&&(Gr=ds,us=Ws(),us!==dr?(cr.substr(ds,10)===da?(ks=da,ds+=10):(ks=dr,qs(co)),ks!==dr?(_s=Ws(),_s!==dr?(Ks=ki(),Ks!==dr?(us=lo(Ks),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)),Gr}function gc(){var Gr,us,ks,_s;return Gr=ds,cr.substr(ds,8)===br?(us=br,ds+=8):(us=dr,qs(Sr)),us!==dr?(ks=Ws(),ks!==dr?(_s=oa(),_s!==dr?(us=Li(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function yc(){var Gr,us,ks,_s;return Gr=ds,cr.substr(ds,3)===Cr?(us=Cr,ds+=3):(us=dr,qs(kr)),us!==dr&&(us=Hi()),Gr=us,Gr===dr&&(Gr=ds,cr.substr(ds,5)===fa?(us=fa,ds+=5):(us=dr,qs(uo)),us!==dr?(ks=Ws(),ks!==dr?(_s=xc(),_s===dr&&(_s=null),_s!==dr?(us=fo(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr===dr&&(Gr=ds,cr.substr(ds,10)===ha?(us=ha,ds+=10):(us=dr,qs(ho)),us!==dr?(ks=Ws(),ks!==dr?(_s=bc(),_s!==dr?(us=po(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr===dr&&(Gr=ds,cr.substr(ds,11)===ji?(us=ji,ds+=11):(us=dr,qs(qi)),us!==dr?(ks=Ws(),ks!==dr?(_s=Ya(),_s!==dr?(us=Li(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr===dr&&(Gr=ds,cr.substr(ds,9)===Di?(us=Di,ds+=9):(us=dr,qs(Vi)),us!==dr&&(us=Gi()),Gr=us)))),Gr}function xc(){var Gr,us,ks,_s,Ks,Gs;return Gr=ds,cr.charCodeAt(ds)===123?(us=ts,ds++):(us=dr,qs(fs)),us!==dr?(ks=Ws(),ks!==dr?(_s=wc(),_s===dr&&(_s=null),_s!==dr?(Ks=Ws(),Ks!==dr?(cr.charCodeAt(ds)===125?(Gs=rs,ds++):(Gs=dr,qs(as)),Gs!==dr?(us=pa(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function wc(){var Gr,us,ks,_s;return Gr=ds,cr.substr(ds,10)===ea?(us=ea,ds+=10):(us=dr,qs(ma)),us!==dr?(ks=Ws(),ks!==dr?(_s=Xa(),_s!==dr?(us=pa(_s),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function bc(){var Gr,us,ks,_s;if(Gr=ds,cr.charCodeAt(ds)===123?(us=ts,ds++):(us=dr,qs(fs)),us!==dr){if(ks=[],_s=Ja(),_s!==dr)for(;_s!==dr;)ks.push(_s),_s=Ja();else ks=dr;ks!==dr?(cr.charCodeAt(ds)===125?(_s=rs,ds++):(_s=dr,qs(as)),_s!==dr?(us=mo(ks),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)}else ds=Gr,Gr=dr;return Gr}function Ja(){var Gr;return Gr=Sc(),Gr===dr&&(Gr=vc()),Gr}function Sc(){var Gr,us,ks,_s,Ks,Gs;return Gr=ds,us=Ws(),us!==dr?(cr.substr(ds,4)===ga?(ks=ga,ds+=4):(ks=dr,qs(go)),ks!==dr?(_s=Ws(),_s!==dr?(Ks=ki(),Ks!==dr?(Gs=Ws(),Gs!==dr?(us=yo(Ks),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function vc(){var Gr,us,ks,_s,Ks,Gs;return Gr=ds,us=Ws(),us!==dr?(cr.substr(ds,10)===ea?(ks=ea,ds+=10):(ks=dr,qs(ma)),ks!==dr?(_s=Ws(),_s!==dr?(Ks=Xa(),Ks!==dr?(Gs=Ws(),Gs!==dr?(us=xo(Ks),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function Ec(){var Gr,us;return Gr=ds,cr.substr(ds,6)===ta?(us=ta,ds+=6):(us=dr,qs(ya)),us!==dr&&(us=wo()),Gr=us,Gr===dr&&(Gr=ds,cr.substr(ds,3)===ra?(us=ra,ds+=3):(us=dr,qs(xa)),us!==dr&&(us=bo()),Gr=us),Gr}function $c(){var Gr,us,ks,_s,Ks,Gs;return Gr=ds,cr.substr(ds,14)===hi?(us=hi,ds+=14):(us=dr,qs(li)),us!==dr?(ks=Ws(),ks!==dr?(cr.substr(ds,8)===br?(_s=br,ds+=8):(_s=dr,qs(Sr)),_s!==dr?(Ks=Ws(),Ks!==dr?(Gs=oa(),Gs!==dr?(us=So(Gs),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr),Gr}function Xa(){var Gr,us,ks,_s,Ks,Gs,Zs,oi,_i,vi,Oi;if(Gr=ds,cr.charCodeAt(ds)===91?(us=Or,ds++):(us=dr,qs(Mr)),us!==dr)if(ks=Ws(),ks!==dr)if(_s=ki(),_s===dr&&(_s=null),_s!==dr){for(Ks=[],Gs=ds,Zs=Ws(),Zs!==dr?(cr.charCodeAt(ds)===44?(oi=wa,ds++):(oi=dr,qs(ba)),oi!==dr?(_i=Ws(),_i!==dr?(vi=ki(),vi!==dr?(Oi=Ws(),Oi!==dr?(Zs=Sa(_s,vi),Gs=Zs):(ds=Gs,Gs=dr)):(ds=Gs,Gs=dr)):(ds=Gs,Gs=dr)):(ds=Gs,Gs=dr)):(ds=Gs,Gs=dr);Gs!==dr;)Ks.push(Gs),Gs=ds,Zs=Ws(),Zs!==dr?(cr.charCodeAt(ds)===44?(oi=wa,ds++):(oi=dr,qs(ba)),oi!==dr?(_i=Ws(),_i!==dr?(vi=ki(),vi!==dr?(Oi=Ws(),Oi!==dr?(Zs=Sa(_s,vi),Gs=Zs):(ds=Gs,Gs=dr)):(ds=Gs,Gs=dr)):(ds=Gs,Gs=dr)):(ds=Gs,Gs=dr)):(ds=Gs,Gs=dr);Ks!==dr?(Gs=Ws(),Gs!==dr?(cr.charCodeAt(ds)===93?(Zs=Lr,ds++):(Zs=dr,qs(Vr)),Zs!==dr?(us=vo(_s,Ks),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)}else ds=Gr,Gr=dr;else ds=Gr,Gr=dr;else ds=Gr,Gr=dr;return Gr}function ki(){var Gr,us,ks,_s;if(Gr=ds,cr.charCodeAt(ds)===34?(us=va,ds++):(us=dr,qs(Ea)),us!==dr){if(ks=[],$a.test(cr.charAt(ds))?(_s=cr.charAt(ds),ds++):(_s=dr,qs(Aa)),_s!==dr)for(;_s!==dr;)ks.push(_s),$a.test(cr.charAt(ds))?(_s=cr.charAt(ds),ds++):(_s=dr,qs(Aa));else ks=dr;ks!==dr?(cr.charCodeAt(ds)===34?(_s=va,ds++):(_s=dr,qs(Ea)),_s!==dr?(us=Eo(ks),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)}else ds=Gr,Gr=dr;return Gr}function Ii(){var Gr,us,ks,_s;if(Gr=ds,_o.test(cr.charAt(ds))?(us=cr.charAt(ds),ds++):(us=dr,qs($o)),us!==dr){for(ks=[],Ca.test(cr.charAt(ds))?(_s=cr.charAt(ds),ds++):(_s=dr,qs(ka));_s!==dr;)ks.push(_s),Ca.test(cr.charAt(ds))?(_s=cr.charAt(ds),ds++):(_s=dr,qs(ka));ks!==dr?(us=Ao(us,ks),Gr=us):(ds=Gr,Gr=dr)}else ds=Gr,Gr=dr;return Gr}function Ac(){var Gr,us,ks;if(Gr=ds,us=[],Ta.test(cr.charAt(ds))?(ks=cr.charAt(ds),ds++):(ks=dr,qs(Ra)),ks!==dr)for(;ks!==dr;)us.push(ks),Ta.test(cr.charAt(ds))?(ks=cr.charAt(ds),ds++):(ks=dr,qs(Ra));else us=dr;return us!==dr&&(us=Co(us)),Gr=us,Gr}function Za(){var Gr;return cr.substr(ds,4)===Ia?(Gr=Ia,ds+=4):(Gr=dr,qs(ko)),Gr===dr&&(cr.substr(ds,6)===ta?(Gr=ta,ds+=6):(Gr=dr,qs(ya)),Gr===dr&&(cr.substr(ds,5)===Ur?(Gr=Ur,ds+=5):(Gr=dr,qs(qr)),Gr===dr&&(cr.substr(ds,3)===ra?(Gr=ra,ds+=3):(Gr=dr,qs(xa)),Gr===dr&&(cr.substr(ds,5)===Pa?(Gr=Pa,ds+=5):(Gr=dr,qs(To)),Gr===dr&&(cr.substr(ds,3)===Cr?(Gr=Cr,ds+=3):(Gr=dr,qs(kr)),Gr===dr&&(cr.substr(ds,4)===Rr?(Gr=Rr,ds+=4):(Gr=dr,qs(Ir)),Gr===dr&&(cr.substr(ds,4)===Na?(Gr=Na,ds+=4):(Gr=dr,qs(Ro)),Gr===dr&&(cr.substr(ds,4)===Ba?(Gr=Ba,ds+=4):(Gr=dr,qs(Io)),Gr===dr&&(cr.substr(ds,3)===Oa?(Gr=Oa,ds+=3):(Gr=dr,qs(Po))))))))))),Gr}function eo(){var Gr,us;if(Gr=[],us=to(),us!==dr)for(;us!==dr;)Gr.push(us),us=to();else Gr=dr;if(Gr===dr)if(Gr=[],us=ro(),us!==dr)for(;us!==dr;)Gr.push(us),us=ro();else Gr=dr;return Gr}function Ws(){var Gr,us;for(Gr=[],us=eo();us!==dr;)Gr.push(us),us=eo();return Gr}function to(){var Gr;return No.test(cr.charAt(ds))?(Gr=cr.charAt(ds),ds++):(Gr=dr,qs(Bo)),Gr}function ro(){var Gr,us,ks,_s;if(Gr=ds,cr.charCodeAt(ds)===35?(us=Oo,ds++):(us=dr,qs(Mo)),us!==dr){for(ks=[],Ma.test(cr.charAt(ds))?(_s=cr.charAt(ds),ds++):(_s=dr,qs(za));_s!==dr;)ks.push(_s),Ma.test(cr.charAt(ds))?(_s=cr.charAt(ds),ds++):(_s=dr,qs(za));ks!==dr?(zo.test(cr.charAt(ds))?(_s=cr.charAt(ds),ds++):(_s=dr,qs(Do)),_s===dr&&(_s=null),_s!==dr?(us=jo(),Gr=us):(ds=Gr,Gr=dr)):(ds=Gr,Gr=dr)}else ds=Gr,Gr=dr;return Gr}function no(){return{map:{}}}function Ci(Gr,us){return Object.assign(Gr,us)}if(sa=hr(),sa!==dr&&ds===cr.length)return sa;throw sa!==dr&&ds<cr.length&&qs(Lo()),Fo(aa,Bi<cr.length?cr.charAt(Bi):null,Bi<cr.length?ja(Bi,Bi+1):ja(Bi,Bi))}var parser={SyntaxError:peg$SyntaxError,parse:peg$parse};function transformError(cr){return"location"in cr&&(cr.message=`Error parsing schema @ line:${cr.location.start.line} col:${cr.location.start.column}: ${cr.message}`),cr}function fromDSL(cr){try{return parser.parse(cr)}catch(ar){throw transformError(ar)}}const safeNameRe=/^\$*[a-z][a-z0-9_]*$/i;function safeReference(cr){return safeNameRe.test(cr)?`.${cr}`:`['${cr}']`}function safeFieldReference(cr){return safeNameRe.test(cr)?`${cr}`:`'${cr}'`}const KindsDefn=`const Kinds = {
  Null: /** @returns {undefined|null} */ (/** @type {any} */ obj) => obj === null ? obj : undefined,
  Int: /** @returns {undefined|number} */ (/** @type {any} */ obj) => Number.isInteger(obj) ? obj : undefined,
  Float: /** @returns {undefined|number} */ (/** @type {any} */ obj) => typeof obj === 'number' && Number.isFinite(obj) ? obj : undefined,
  String: /** @returns {undefined|string} */ (/** @type {any} */ obj) => typeof obj === 'string' ? obj : undefined,
  Bool: /** @returns {undefined|boolean} */ (/** @type {any} */ obj) => typeof obj === 'boolean' ? obj : undefined,
  Bytes: /** @returns {undefined|Uint8Array} */ (/** @type {any} */ obj) => obj instanceof Uint8Array ? obj : undefined,
  Link: /** @returns {undefined|object} */ (/** @type {any} */ obj) => obj !== null && typeof obj === 'object' && obj.asCID === obj ? obj : undefined,
  List: /** @returns {undefined|Array<any>} */ (/** @type {any} */ obj) => Array.isArray(obj) ? obj : undefined,
  Map: /** @returns {undefined|object} */ (/** @type {any} */ obj) => obj !== null && typeof obj === 'object' && obj.asCID !== obj && !Array.isArray(obj) && !(obj instanceof Uint8Array) ? obj : undefined
}`,ScalarKindNames=["Null","Int","Float","String","Bool","Bytes","Link"],ScalarKindNamesLower=ScalarKindNames.map(cr=>cr.toLowerCase()),emptyListTransformer=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.List(obj) === undefined) {
      return undefined
    }
    if (obj.length) {
      return undefined
    }
    return obj
  }`,emptyMapTransformer=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    if (Object.keys(obj).length) {
      return undefined
    }
    return obj
  }`,implicits={Null:{null:{}},Int:{int:{}},Float:{float:{}},String:{string:{}},Bool:{bool:{}},Bytes:{bytes:{}},Link:{link:{}}};implicits.AnyScalar={union:{members:["Bool","String","Bytes","Int","Float"],representation:{kinded:{bool:"Bool",string:"String",bytes:"Bytes",int:"Int",float:"Float"}}}};implicits.$$AnyMap={map:{keyType:"String",valueType:"$$Any"}};implicits.$$AnyList={list:{valueType:"$$Any"}};implicits.$$Any={union:{members:["Bool","String","Bytes","Int","Float","Null","Link","$$AnyMap","$$AnyList"],representation:{kinded:{bool:"Bool",string:"String",bytes:"Bytes",int:"Int",float:"Float",null:"Null",link:"Link",map:"$$AnyMap",list:"$$AnyList"}}}};function tc(cr){return cr.charAt(0).toUpperCase()+cr.substring(1)}function create$3(cr,ar){if(!ar||typeof ar!="string")throw new TypeError("A root is required");const dr=new Builder(cr);dr.addType(ar);let fr=`'use strict'
`;return fr+=dr.dumpTypeTransformers(),fr+=`
return {
  toTyped: (obj) => Types${safeReference(ar)}(obj),
  toRepresentation: (obj) => Reprs${safeReference(ar)}(obj)
}`,new Function(fr)()}class Builder{constructor(ar){if(!ar||typeof ar.types!="object")throw new TypeError("Invalid schema definition");this.schema={types:Object.assign({},implicits,ar.types)},this.typeTransformers={},this.reprTransformers={}}dumpTypeTransformers(){const ar=fr=>safeNameRe.test(fr)?fr:`'${fr}'`;return`${KindsDefn}
/** @type {{ [k in string]: (obj:any)=>undefined|any}} */
const Types = {
${Object.entries(this.typeTransformers).map(([fr,hr])=>`  ${ar(fr)}: ${hr}`).join(`,
`)}
}
/** @type {{ [k in string]: (obj:any)=>undefined|any}} */
const Reprs = {
${Object.entries(this.reprTransformers).map(([fr,hr])=>`  ${ar(fr)}: ${hr}`).join(`,
`)}
}`}addType(ar,dr){if(this.typeTransformers[ar])return;if(ar==="$$Any"&&(this.typeTransformers.$$Any="() => false"),ar==="any"){this.addType("$$Any"),this.typeTransformers.any="/** @returns {undefined|any} */ (/** @type {any} */ obj) => Types.$$Any(obj) === undefined ? undefined : obj",this.reprTransformers.any=this.typeTransformers.any;return}if(dr===void 0&&ar in this.schema.types&&this.schema.types[ar]!==void 0&&(dr=this.schema.types[ar]),dr===void 0)throw new TypeError(`A type must match an existing type definition ("${ar}")`);if(Array.isArray(dr)||dr==null||typeof dr!="object")throw new TypeError(`Malformed type definition: not an object: ("${ar}")`);const fr=typeKind(dr,ar);if(ScalarKindNamesLower.includes(fr)){this.typeTransformers[ar]=this.reprTransformers[ar]=`Kinds.${tc(fr)}`;return}const hr=(pr,mr)=>{if(pr===ar)throw new Error(`Recursive typedef in type "${ar}"`);let gr=pr;if(typeof gr=="string")this.addType(gr);else if(pr!=null&&!Array.isArray(pr)&&typeof pr=="object")typeKind(pr,mr),gr=`${ar} > ${mr} (anon)`,this.addType(gr,pr);else throw new Error(`Bad type for "${mr}" in "${ar}"`);return gr};if("list"in dr){const pr=hr(dr.list.valueType,"valueType");for(const mr of["Types","Reprs"]){let gr=`${mr}${safeReference(pr)}(v)`;dr.list.valueNullable===!0&&(gr=`v === null ? v : ${gr}`),this[`${mr==="Types"?"type":"repr"}Transformers`][ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.List(obj) === undefined) {
      return undefined
    }
    for (let i = 0; i < obj.length; i++) {
      let v = obj[i]
      v = ${gr}
      if (v === undefined) {
        return undefined
      }
      if (v !== obj[i]) {
        const ret = obj.slice(0, i)
        for (let j = i; j < obj.length; j++) {
          let v = obj[j]
          v = ${gr}
          if (v === undefined) {
            return undefined
          }
          ret.push(v)
        }
        return ret
      }
    }
    return obj
  }`}return}if("map"in dr){if(dr.map.keyType!=="String")throw new Error(`Invalid keyType for Map "${ar}", expected String, found "${dr.map.keyType}"`);let pr="map";if(dr.map.representation!==void 0){if("listpairs"in dr.map.representation&&typeof dr.map.representation.listpairs=="object")pr="listpairs";else if(!("map"in dr.map.representation)||typeof dr.map.representation.map!="object")throw new Error(`Unsupported map representation "${Object.keys(dr.map.representation).join(",")}"`)}const mr=hr(dr.map.valueType,"valueType");if(pr==="listpairs"){let gr=`Types${safeReference(mr)}(v)`;dr.map.valueNullable===!0&&(gr=`v === null ? v : ${gr}`),this.typeTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.List(obj) === undefined) {
      return undefined
    }
    /** @type {{[k in string]: any}} */
    const ret = {}
    for (let i = 0; i < obj.length; i++) {
      const e = obj[i]
      if (Kinds.List(e) === undefined || e.length !== 2 || Kinds.String(e[0]) === undefined) {
        return undefined
      }
      let v = e[1]
      v = ${gr}
      if (v === undefined) {
        return undefined
      }
      ret[e[0]] = v
    }
    return ret
  }`,gr=`Reprs${safeReference(mr)}(entry[1])`,dr.map.valueNullable===!0&&(gr=`entry[1] === null ? entry[1] : ${gr}`),this.reprTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    const ret = []
    for (const entry of Object.entries(obj)) {
      const v = ${gr}
      if (v === undefined) {
        return undefined
      }
      ret.push(entry[1] === v ? entry : [entry[0], v])
    }
    return ret
  }`;return}for(const gr of["Types","Reprs"]){let yr=`${gr}${safeReference(mr)}(v)`;dr.map.valueNullable===!0&&(yr=`v === null ? v : ${yr}`),this[`${gr==="Types"?"type":"repr"}Transformers`][ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    const keys = Object.keys(obj)
    for (let i = 0; i < keys.length; i++) {
      let v = obj[keys[i]]
      v = ${yr}
      if (v === undefined) {
        return undefined
      }
      if (v !== obj[keys[i]]) {
        /** @type {{[k in string]: any}} */
        const ret = {}
        for (let j = 0; j < keys.length; j++) {
          if (j < i) {
            ret[keys[j]] = obj[keys[i]]
          } else if (j === i) {
            ret[keys[j]] = v
          } else {
            let v = obj[keys[j]]
            v = ${yr}
            if (v === undefined) {
              return undefined
            }
            ret[keys[j]] = v
          }
        }
        return ret
      }
    }
    return obj
  }`}return}if("struct"in dr){let pr="map";if(dr.struct.representation!==void 0){if("tuple"in dr.struct.representation&&typeof dr.struct.representation.tuple=="object")pr="tuple";else if("listpairs"in dr.struct.representation&&typeof dr.struct.representation.listpairs=="object")pr="listpairs";else if(!("map"in dr.struct.representation)||typeof dr.struct.representation.map!="object")throw new Error(`Unsupported struct representation for "${ar}": "${Object.keys(dr.struct.representation).join(",")}"`)}const mr=[],gr=[];let yr=!1,xr=0,wr=0;const br=[],Sr=[],vr=[],Er=[],Ar=[];for(let[Cr,kr]of Object.entries(dr.struct.fields)){let Rr=kr.optional!==!0;Rr&&wr++;const Ir=Cr;if(dr.struct.representation!==void 0&&"map"in dr.struct.representation&&typeof dr.struct.representation.map=="object"&&typeof dr.struct.representation.map.fields=="object"&&typeof dr.struct.representation.map.fields[Cr]=="object"){if(dr.struct.representation.map.fields[Cr].implicit!==void 0){Rr=!1;const Tr=dr.struct.representation.map.fields[Cr].implicit;if(typeof Tr!="string"&&typeof Tr!="number"&&parseInt(String(Tr),10)!==Number(Tr)&&Tr!==!0&&Tr!==!1)throw new Error(`Unsupported implicit type for "${ar}" -> "${Cr}": ${Tr}`);Ar.push({fieldName:Cr,value:Tr})}const Pr=dr.struct.representation.map.fields[Cr];typeof Pr.rename=="string"&&(Cr=Pr.rename,yr=!0)}if(Rr&&xr++,pr!=="map"&&pr!=="listpairs"&&kr.optional===!0)throw new Error(`Struct "${ar}" includes "optional" fields for non-map struct`);const Nr=hr(kr.type,Cr);if(pr==="map"){const Pr=kr.nullable?"value === null ? value : ":"";let Tr=Rr?`requiredCount--
            `:"";mr.push(`        case '${Cr}':
          {
            ${Tr}const v = ${Pr}Types${safeReference(Nr)}(obj[key])
            if (v === undefined) {
              return undefined
            }
            if (v !== value || ret !== obj) {
              if (ret === obj) {
                /** @type {{[k in string]: any}} */
                ret = {}
                for (let j = 0; j < i; j++) {
                  ret[entries[j][0]] = entries[j][1]
                }
              }
              ret${safeReference(Ir)} = v
            }
          }
          break`),Tr=Rr?`requiredCount--
            `:"",gr.push(`        case '${Ir}':
          {
            ${Tr}const v = ${Pr}Reprs${safeReference(Nr)}(value)
            if (v === undefined) {
              return undefined
            }
            if (v !== value || ret !== obj) {
              if (ret === obj) {
                /** @type {{[k in string]: any}} */
                ret = {}
                for (let j = 0; j < i; j++) {
                  ret[entries[j][0]] = entries[j][1]
                }
              }
              ret${safeReference(Cr)} = v
            }
          }
          break`)}else if(pr==="tuple"){let Pr=kr.nullable?"obj[{{POSITION}}] === null ? obj[{{POSITION}}] : ":"";br.push({fieldName:Cr,fn:`    {
      const v = ${Pr}Types${safeReference(Nr)}(obj[{{POSITION}}])
      if (v === undefined) {
        return undefined
      }
      ret${safeReference(Cr)} = v
    }`});const Tr=`requiredCount--
            `;Pr=kr.nullable?"value === null ? value : ":"",Sr.push({fieldName:Cr,fn:`        case '${Cr}':
          {
            ${Tr}const v = ${Pr}Reprs${safeReference(Nr)}(value)
            if (v === undefined) {
              return undefined
            }
            ret[{{POSITION}}] = v
          }
          break`})}else if(pr==="listpairs"){const Pr=kr.nullable?"value === null ? value : ":"",Tr=Rr?`requiredCount--
            `:"";vr.push(`        case '${Cr}':
          {
            ${Tr}const v = ${Pr}Types${safeReference(Nr)}(value)
            if (v === undefined) {
              return undefined
            }
            ret${safeReference(Cr)} = v
          }
          break`),Er.push(`        case '${Cr}':
          {
            ${Tr}const v = ${Pr}Reprs${safeReference(Nr)}(value)
            if (v === undefined) {
              return undefined
            }
            ret.push([key, v])
          }
          break`)}}if(pr==="tuple"){let Cr;if(dr.struct.representation&&"tuple"in dr.struct.representation&&Array.isArray(dr.struct.representation.tuple.fieldOrder)){if(dr.struct.representation.tuple.fieldOrder.length!==br.length)throw new Error(`Struct "${ar}" with tuple representation "fieldOrder" does not match the struct field count`);if(dr.struct.representation.tuple.fieldOrder.some(Rr=>!br.some(({fieldName:Ir})=>Rr===Ir)))throw new Error(`Struct "${ar}" with tuple representation "fieldOrder" does not match the struct field names`);const kr=dr.struct.representation.tuple.fieldOrder;Cr=Rr=>{const Ir=kr.indexOf(Rr.fieldName);if(Ir===-1)throw new Error("Internal error: expected to find tuple field name, this check should have already passed");Rr.fn=Rr.fn.replace(/\{\{POSITION\}\}/g,String(Ir))}}else Cr=(kr,Rr)=>{kr.fn=kr.fn.replace(/\{\{POSITION\}\}/g,String(Rr))};if(br.forEach(Cr),Sr.forEach(Cr),Object.keys(dr.struct.fields).length===0){this.typeTransformers.$$EmptyMap=emptyMapTransformer,this.typeTransformers.$$EmptyList=emptyListTransformer,this.typeTransformers[ar]="/** @returns {undefined|any} */ (/** @type {any} */ obj) => Types.$$EmptyList(obj) === undefined ? undefined : {}",this.reprTransformers[ar]="/** @returns {undefined|any} */ (/** @type {any} */ obj) => Types.$$EmptyMap(obj) === undefined ? undefined : []";return}this.typeTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.List(obj) === undefined) {
      return undefined
    }
    if (obj.length !== ${br.length}) {
      return undefined
    }
    /** @type {{[k in string]: any}} */
    const ret = {}
${br.map(kr=>kr.fn).join(`
`)}
    return ret
  }`,this.reprTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    const entries = Object.entries(obj)
    const ret = []${requiredCountInit(xr)}
    for (let i = 0; i < entries.length; i++) {
      const [key, value] = entries[i]
      switch (key) {
${Sr.map(kr=>kr.fn).join(`
`)}
        default:
          return undefined
      }
    }${requiredCountCheck(xr)}
    return ret
  }`;return}const _r=Ar.map(Cr=>{const kr=typeof Cr.value=="string"?`'${Cr.value}'`:String(Cr.value);return`
    if (ret${safeReference(Cr.fieldName)} === undefined) {
      ret${safeReference(Cr.fieldName)} = ${kr}
    }`});if(pr==="listpairs"){if(Object.keys(dr.struct.fields).length===0){this.typeTransformers.$$EmptyMap=emptyMapTransformer,this.typeTransformers.$$EmptyList=emptyListTransformer,this.typeTransformers[ar]="/** @returns {undefined|any} */ (/** @type {any} */ obj) => Types.$$EmptyList(obj) === undefined ? undefined : {}",this.reprTransformers[ar]="/** @returns {undefined|any} */ (/** @type {any} */ obj) => Types.$$EmptyMap(obj) === undefined ? undefined : []";return}this.typeTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.List(obj) === undefined) {
      return undefined
    }
    /** @type {{[k in string]: any}} */
    const ret = {}
    if (obj.length < ${xr} || obj.length > ${Object.keys(dr.struct.fields).length}) {
      return undefined
    }${requiredCountInit(xr)}
    for (const e of obj) {
      if (Kinds.List(e) === undefined || e.length !== 2) {
        return undefined
      }
      const [key, value] = e
      switch (key) {
${vr.join(`
`)}
        default:
          return undefined
      }
    }${_r.join(`
`)}${_r.length?`
`:""}${requiredCountCheck(xr)}
    return ret
  }`,this.reprTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    const entries = Object.entries(obj)
    const ret = []${requiredCountInit(wr)}
    for (let i = 0; i < entries.length; i++) {
      const [key, value] = entries[i]
      switch (key) {
${Er.join(`
`)}
        default:
          return undefined
      }
    }${requiredCountCheck(wr)}
    return ret
  }`;return}if(Object.keys(dr.struct.fields).length===0){this.typeTransformers.$$EmptyMap=emptyMapTransformer,this.typeTransformers[ar]="/** @returns {undefined|any} */ (/** @type {any} */ obj) => Types.$$EmptyMap(obj)",this.reprTransformers[ar]="/** @returns {undefined|any} */ (/** @type {any} */ obj) => Types.$$EmptyMap(obj)";return}this.typeTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    const entries = Object.entries(obj)
    /** @type {{[k in string]: any}} */
    let ret = ${yr?"{}":"obj"}${requiredCountInit(xr)}
    for (let i = 0; i < entries.length; i++) {
      const [key, value] = entries[i]
      switch (key) {
${mr.join(`
`)}
        default:
          return undefined
      }
    }
${_r.join(`
`)}${_r.length?`
`:""}${requiredCountCheck(xr)}
    return ret
  }`,this.reprTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    const entries = Object.entries(obj)
    /** @type {{[k in string]: any}} */
    let ret = ${yr?"{}":"obj"}${requiredCountInit(wr)}
    for (let i = 0; i < entries.length; i++) {
      const [key, value] = entries[i]
      switch (key) {
${gr.join(`
`)}
        default:
          return undefined
      }
    }${requiredCountCheck(wr)}
    return ret
  }`;return}if("union"in dr){if(typeof dr.union.representation!="object")throw new Error(`Bad union definition for "${ar}"`);if("keyed"in dr.union.representation&&typeof dr.union.representation.keyed=="object"){const pr=dr.union.representation.keyed,mr=[],gr=[];Object.entries(pr).forEach(([yr,xr])=>{if(typeof xr!="string")throw new Error(`Keyed union "${ar}" refers to non-string type name: ${JSON.stringify(xr)}`);this.addType(xr),mr.push(`    if (key === '${yr}') {
      const v = Types${safeReference(xr)}(value)
      return v === undefined ? undefined : { ${safeFieldReference(xr)}: v }
    }`),gr.push(`    if (key === '${xr}') {
      const v = Reprs${safeReference(xr)}(value)
      return v === undefined ? undefined : { ${safeFieldReference(yr)}: v }
    }`)}),this.typeTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    const entries = obj && Object.entries(obj)
    if (entries.length !== 1) {
      return undefined
    }
    const [key, value] = entries[0]
${mr.join(`
`)}
    return undefined
  }`,this.reprTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    const entries = obj && Object.entries(obj)
    if (entries.length !== 1) {
      return undefined
    }
    const [key, value] = entries[0]
${gr.join(`
`)}
    return undefined
  }`;return}if("kinded"in dr.union.representation&&typeof dr.union.representation.kinded=="object"){const pr=dr.union.representation.kinded,mr=[],gr=[];Object.entries(pr).forEach(([yr,xr])=>{if(typeof xr!="string")throw new Error(`Kinded union "${ar}" refers to non-string type name: ${JSON.stringify(xr)}`);this.addType(xr),mr.push(`    if (Kinds.${tc(yr)}(obj) !== undefined) {
      const v = Types${safeReference(xr)}(obj)
      return v === undefined ? undefined : { ${safeFieldReference(xr)}: v }
    }`),gr.push(`    if (key === '${xr}') {
      return Reprs${safeReference(xr)}(value)
    }`)}),this.typeTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
${mr.join(`
`)}
    return undefined
  }`,this.reprTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    const entries = obj && Object.entries(obj)
    if (entries.length !== 1) {
      return undefined
    }
    const [key, value] = entries[0]
${gr.join(`
`)}
    return undefined
  }`;return}if("inline"in dr.union.representation&&typeof dr.union.representation.inline=="object"){const pr=dr.union.representation.inline;if(typeof pr.discriminantKey!="string")throw new Error(`Expected "discriminantKey" for inline union "${ar}"`);if(typeof pr.discriminantTable!="object")throw new Error(`Expected "discriminantTable" for inline union "${ar}"`);const mr=[],gr=[];Object.entries(pr.discriminantTable).forEach(([yr,xr])=>{if(typeof xr!="string")throw new Error(`Inline union "${ar}" refers to non-string type name: ${JSON.stringify(xr)}`);this.addType(xr),mr.push(`    if (key === '${yr}') {
      const v = Types${safeReference(xr)}(value)
      return v === undefined ? undefined : { ${safeFieldReference(xr)}: v }
    }`),gr.push(`      case '${xr}': {
        const v = Reprs${safeReference(xr)}(value)
        return v === undefined ? undefined : Object.assign({ ${safeFieldReference(pr.discriminantKey)}: '${yr}' }, v)
      }`)}),this.typeTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    if (!('${pr.discriminantKey}' in obj)) {
      return undefined
    }
    const key = obj${safeReference(pr.discriminantKey)}
    const value = Object.assign({}, obj)
    delete value${safeReference(pr.discriminantKey)}
${mr.join(`
`)}
    return undefined
  }`,this.reprTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    const entries = obj && Object.entries(obj)
    if (entries.length !== 1) {
      return undefined
    }
    const [key, value] = entries[0]
    switch (key) {
${gr.join(`
`)}
    }
    return undefined
  }`;return}if("envelope"in dr.union.representation&&typeof dr.union.representation.envelope=="object"){const pr=dr.union.representation.envelope;if(typeof pr.discriminantKey!="string")throw new Error(`Expected "discriminantKey" for envelope union "${ar}"`);if(typeof pr.contentKey!="string")throw new Error(`Expected "contentKey" for envelope union "${ar}"`);if(typeof pr.discriminantTable!="object")throw new Error(`Expected "discriminantTable" for envelope union "${ar}"`);const mr=[],gr=[];Object.entries(pr.discriminantTable).forEach(([yr,xr])=>{if(typeof xr!="string")throw new Error(`Envelope union "${ar}" refers to non-string type name: ${JSON.stringify(xr)}`);this.addType(xr),mr.push(`    if (key === '${yr}') {
      const v = Types${safeReference(xr)}(value)
      return v === undefined ? undefined : { ${safeFieldReference(xr)}: v }
    }`),gr.push(`      case '${xr}': {
        const v = Reprs${safeReference(xr)}(value)
        return v === undefined ? undefined : { ${safeFieldReference(pr.discriminantKey)}: '${yr}', ${safeFieldReference(pr.contentKey)}: v }
      }`)}),this.typeTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    if (!('${pr.discriminantKey}' in obj)) {
      return undefined
    }
    const key = obj${safeReference(pr.discriminantKey)}
    const value = obj${safeReference(pr.contentKey)}
    if (value === undefined) {
      return undefined
    }
${mr.join(`
`)}
    return undefined
  }`,this.reprTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    const entries = obj && Object.entries(obj)
    if (entries.length !== 1) {
      return undefined
    }
    const [key, value] = entries[0]
    switch (key) {
${gr.join(`
`)}
    }
    return undefined
  }`;return}if("bytesprefix"in dr.union.representation&&typeof dr.union.representation.bytesprefix=="object"){const pr=[],mr=[];Object.entries(dr.union.representation.bytesprefix.prefixes).forEach(([gr,yr])=>{if(typeof yr!="string")throw new Error(`Bytesprefix union "${ar}" refers to non-string type name: ${JSON.stringify(yr)}`);if(typeof gr!="string"||!/^([0-9a-f][0-9a-f])+$/.test(gr))throw new Error(`Invalid bytesprefix byte for "${ar}": "${gr}"`);const xr=gr.match(/[0-9a-f][0-9a-f]/ig);if(!xr)throw new Error(`Invalid bytesprefix byte for "${ar}": "${gr}"`);this.addType(yr);const wr=xr.map(br=>parseInt(br,16));pr.push(`    if (${wr.map((br,Sr)=>`obj[${Sr}] === ${br}`).join(" && ")}) {
      const v = Types${safeReference(yr)}(obj.subarray(${wr.length}))
      return v === undefined ? undefined : { ${safeFieldReference(yr)}: v }
    }`),mr.push(`      case '${yr}': {
        const v = Kinds.Bytes(Reprs${safeReference(yr)}(value))
        if (v === undefined) {
          return undefined
        }
        const ret = new Uint8Array(v.length + ${wr.length})
        ret.set([${wr.join(", ")}], 0)
        ret.set(v, ${wr.length})
        return ret
      }`)}),this.typeTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Bytes(obj) === undefined) {
      return undefined
    }
${pr.join(`
`)}
    return undefined
  }`,this.reprTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.Map(obj) === undefined) {
      return undefined
    }
    const entries = obj && Object.entries(obj)
    if (entries.length !== 1) {
      return undefined
    }
    const [key, value] = entries[0]
    switch (key) {
${mr.join(`
`)}
    }
    return undefined
  }`;return}throw new Error(`Unsupported union type for "${ar}": "${Object.keys(dr.union.representation).join(",")}"`)}if("enum"in dr){if(!Array.isArray(dr.enum.members))throw new Error('Enum needs a "members" list');let pr,mr="string";if(typeof dr.enum.representation=="object")if("string"in dr.enum.representation&&typeof dr.enum.representation.string=="object"){const gr=dr.enum.representation.string;pr=dr.enum.members.map(yr=>{const xr=gr[yr]!==void 0?gr[yr]:yr;if(typeof xr!="string")throw new Error("Enum members must be strings");return[`'${xr}'`,`'${yr}'`]})}else if("int"in dr.enum.representation&&typeof dr.enum.representation.int=="object"){const gr=dr.enum.representation.int;pr=dr.enum.members.map(yr=>{if(gr[yr]===void 0||typeof gr[yr]!="number"||!Number.isInteger(gr[yr]))throw new Error("Enum members must be ints");return[String(gr[yr]),`'${yr}'`]}),mr="int"}else throw new Error("Enum doesn't have a valid representation");else throw new Error("Enum doesn't have a valid representation");this.typeTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.${tc(mr)}(obj) === undefined) {
      return undefined
    }
${pr.map(([gr,yr])=>`    if (obj === ${gr}) {
      return ${yr}
    }`).join(`
`)}
    return undefined
  }`,this.reprTransformers[ar]=`/** @returns {undefined|any} */ (/** @type {any} */ obj) => {
    if (Kinds.String(obj) === undefined) {
      return undefined
    }
${pr.map(([gr,yr])=>`    if (obj === ${yr}) {
      return ${gr}
    }`).join(`
`)}
    return undefined
  }`;return}throw new Error(`Can't deal with type kind: "${fr}"`)}}function typeKind(cr,ar){const dr=Object.keys(cr);if(!dr.length)throw new TypeError(`Malformed type definition: empty ("${ar}")`);if(dr.length>1)throw new TypeError(`Malformed type definition: expected single kind key ("${ar}")`);return dr[0]}function requiredCountInit(cr){return cr>0?`
    let requiredCount = ${cr}`:""}function requiredCountCheck(cr){return cr>0?`
    if (requiredCount > 0) {
      return undefined
    }`:""}var __classPrivateFieldSet$8=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},__classPrivateFieldGet$a=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_DelayableController_interval,_DelayableController_controller,_DelayableController_timer;class SyncDeadlockError extends Error{}class SyncTimeoutError extends Error{}class SyncResourceError extends Error{}const cborNull=encode$9(null),topicPattern=/^[a-zA-Z0-9\.\-]+$/;function*getAncestorClocks(cr){let ar=0;for(;;){const dr=cr-(1<<ar++);if(dr>0)yield dr;else break}}function sortPair(cr,ar){return lessThan$1(cr.multihash.digest,ar.multihash.digest)?[cr,ar]:[ar,cr]}function assert$4(cr,ar){if(!cr)throw new Error(ar??"assertion failed")}async function wait(cr,ar){if(ar.signal.aborted)return;const dr=anySignal([AbortSignal.timeout(cr),ar.signal]);await new Promise(fr=>{dr.addEventListener("abort",()=>fr())}).finally(()=>dr.clear())}class DelayableController{constructor(ar){_DelayableController_interval.set(this,void 0),_DelayableController_controller.set(this,void 0),_DelayableController_timer.set(this,void 0),__classPrivateFieldSet$8(this,_DelayableController_interval,ar,"f"),__classPrivateFieldSet$8(this,_DelayableController_controller,new AbortController,"f"),this.signal=__classPrivateFieldGet$a(this,_DelayableController_controller,"f").signal,__classPrivateFieldSet$8(this,_DelayableController_timer,setTimeout(()=>{__classPrivateFieldGet$a(this,_DelayableController_controller,"f").abort()},__classPrivateFieldGet$a(this,_DelayableController_interval,"f")),"f")}delay(){clearTimeout(__classPrivateFieldGet$a(this,_DelayableController_timer,"f")),__classPrivateFieldSet$8(this,_DelayableController_timer,setTimeout(()=>{__classPrivateFieldGet$a(this,_DelayableController_controller,"f").abort()},__classPrivateFieldGet$a(this,_DelayableController_interval,"f")),"f")}}_DelayableController_interval=new WeakMap,_DelayableController_controller=new WeakMap,_DelayableController_timer=new WeakMap;class CacheMap extends Map{constructor(ar,dr){super(),this.capacity=ar;for(const[fr,hr]of dr??[])this.set(fr,hr)}set(ar,dr){super.set(ar,dr);for(const fr of this.keys())if(this.size>this.capacity)this.delete(fr);else break;return this}}function shuffle$1(cr){for(let ar=cr.length-1;ar>0;ar--){const dr=Math.floor(Math.random()*(ar+1));[cr[ar],cr[dr]]=[cr[dr],cr[ar]]}}class Mempool{constructor(){this.log=logger("canvas:gossiplog:mempool"),this.values=new Map,this.missingParents=new Map,this.waitingChildren=new Map}add(ar,dr,fr){this.values.set(ar,dr),this.missingParents.set(ar,fr);for(const hr of fr){const pr=this.waitingChildren.get(hr);pr===void 0?this.waitingChildren.set(hr,new Set([ar])):pr.add(ar)}}*observe(ar){const dr=this.waitingChildren.get(ar);if(this.log("observing %s with %d children %o",ar,dr?.size??0,dr??[]),dr===void 0)return[];this.waitingChildren.delete(ar);for(const fr of dr){const hr=this.missingParents.get(fr);if(assert$4(hr!==void 0,"expected missingParents !== undefined"),hr.delete(ar),hr.size===0){const pr=this.values.get(fr);assert$4(pr!==void 0,"expected value !== undefined"),this.values.delete(fr),this.missingParents.delete(fr),yield[fr,pr]}}}}class Driver{constructor(ar,dr,fr){this.source=dr,this.target=fr,this.log=logger(`canvas:gossiplog:[${ar}]:driver`)}async*sync(){const[ar,dr]=await Promise.all([this.source.getRoot(),this.target.getRoot()]);assert$4(ar.key===null,"invalid source root"),assert$4(dr.key===null,"invalid target root"),this.log("source root: level %d, hash %s",ar.level,bytesToHex$1(ar.hash)),this.log("target root: level %d, hash %s",dr.level,bytesToHex$1(dr.hash)),ar.level!==0&&(equalNodes(ar,dr)||(yield*this.syncRoot(dr.level,ar)))}async*syncRoot(ar,dr){if(dr.level>ar){const fr=await this.source.getChildren(dr.level,dr.key);if(ar===0&&dr.level===1)for(const{level:hr,key:pr,value:mr}of fr)pr!==null&&(assert$4(hr===0,"unexpected leaf level"),assert$4(mr!==void 0,"missing leaf entry value"),yield[pr,mr]);else for(const hr of fr)yield*this.syncRoot(ar,hr)}else yield*this.syncNode(dr)}async*syncNode(ar){const dr=await this.target.getNode(ar.level,ar.key);if(dr!==null&&equalNodes(ar,dr))return;const fr=await this.source.getChildren(ar.level,ar.key);if(ar.level>1)for(const hr of fr)yield*this.syncNode(hr);else if(ar.level===1)for(const{level:hr,key:pr,hash:mr,value:gr}of fr){if(pr===null)continue;assert$4(hr===0,"unexpected leaf level"),assert$4(gr!==void 0,"missing leaf entry value");const yr=await this.target.getNode(0,pr);if(yr===null)try{yield[pr,gr]}catch(xr){this.log.error("failed to process entry: %O",xr)}else{if(equalArrays(mr,yr.hash))continue;this.log.error("conflict at key %s",bytesToHex$1(pr)),this.log.error("- target hash: %s",bytesToHex$1(yr.hash)),this.log.error("+ source hash: %s",bytesToHex$1(mr))}}}}function encodeClock(cr,ar){if(ar===0)return cr[0]=0,1;const dr=[];for(;ar>0;)dr.push(Number(ar&127)),ar>>=7;for(let fr=0;fr<dr.length;fr++){let hr=dr[fr];fr>0&&(hr|=128),cr[dr.length-1-fr]=hr}return dr.length}function decodeClock(cr){const ar=[];for(const fr of cr)if(ar.push(fr&127),!(fr&128))break;return[ar.reduce((fr,hr,pr)=>{const mr=7*(ar.length-1-pr),gr=hr<<mr;return fr+gr},0),ar.length]}const schema$1=fromDSL(`
type SignedMessage struct {
	publicKey Bytes
	signature Bytes
	parents  [Bytes]
	payload   any
} representation tuple
`),{toTyped:toSignedMessage,toRepresentation:fromSignedMessage}=create$3(schema$1,"SignedMessage");function decodeSignedMessage(cr){const ar=decode$6(cr),dr=toSignedMessage(ar);return assert$4(dr!==void 0,"error decoding message (internal error)"),dr}function encodeSignedMessage(cr){const ar=fromSignedMessage(cr);return assert$4(ar!==void 0,"error decoding message (internal error)"),encode$9(ar)}function getNextClock(cr){let ar=0;for(const dr of cr){assert$4(dr.byteLength===KEY_LENGTH,"expected key.byteLength === KEY_LENGTH");const[fr]=decodeClock(dr);fr>ar&&(ar=fr)}return ar+1}const KEY_LENGTH=20,MIN_MESSAGE_ID="00000000000000000000000000000000",MAX_MESSAGE_ID="vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv",messageIdPattern=/^[0123456789abcdefghijklmnopqrstuv]{32}$/;function getKey(cr,ar){const dr=sha256$3(ar),fr=new Uint8Array(KEY_LENGTH),hr=encodeClock(fr,cr);return fr.set(dr.subarray(0,KEY_LENGTH-hr),hr),fr}const encodeId=cr=>base32hex$1.baseDecode(cr),decodeId=cr=>base32hex$1.baseEncode(cr);var __classPrivateFieldSet$7=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},__classPrivateFieldGet$9=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_AbstractGossipLog_instances,_AbstractGossipLog_transformer,_AbstractGossipLog_apply,_AbstractGossipLog_getAncestors,_AbstractGossipLog_insert;class AbstractGossipLog extends TypedEventEmitter{constructor(ar){if(super(),_AbstractGossipLog_instances.add(this),this.mempool=new Mempool,_AbstractGossipLog_transformer.set(this,void 0),_AbstractGossipLog_apply.set(this,void 0),assert$4(topicPattern.test(ar.topic),"invalid topic (must match [a-zA-Z0-9\\.\\-])"),this.topic=ar.topic,__classPrivateFieldSet$7(this,_AbstractGossipLog_apply,ar.apply,"f"),typeof ar.validate=="function"){const{validate:dr}=ar;__classPrivateFieldSet$7(this,_AbstractGossipLog_transformer,{toTyped:fr=>dr(fr)?fr:void 0,toRepresentation:fr=>dr(fr)?fr:void 0},"f")}else{const{schema:dr,name:fr}=ar.validate;__classPrivateFieldSet$7(this,_AbstractGossipLog_transformer,create$3(typeof dr=="string"?fromDSL(dr):dr,fr),"f")}this.indexAncestors=ar.indexAncestors??!1,this.signer=ar.signer??new Ed25519Signer,this.log=logger(`canvas:gossiplog:[${this.topic}]`)}async replay(){await this.read(async ar=>{for await(const[dr,fr]of ar.messages.entries()){const[hr,pr,mr]=this.decode(fr);assert$4(hr===decodeId(dr),"expected id === decodeId(key)"),await __classPrivateFieldGet$9(this,_AbstractGossipLog_apply,"f").apply(ar,[hr,pr,mr])}})}async*iterate(ar=null,dr=null,fr={}){const{id:hr,inclusive:pr}=ar??{id:MIN_MESSAGE_ID,inclusive:!0},{id:mr,inclusive:gr}=dr??{id:MAX_MESSAGE_ID,inclusive:!0};assert$4(messageIdPattern.test(hr),"lowerBound.id: invalid message ID"),assert$4(messageIdPattern.test(mr),"upperBound.id: invalid message ID");for await(const[yr,xr]of this.entries({key:encodeId(hr),inclusive:pr},{key:encodeId(mr),inclusive:gr},fr)){const[wr,br,Sr]=this.decode(xr);assert$4(wr===decodeId(yr),"expected id === decodeId(key)"),yield[wr,br,Sr]}}encode(ar,dr){assert$4(dr.topic===this.topic,"invalid message topic");const fr=dr.parents.sort().map(encodeId);assert$4(getNextClock(fr)===dr.clock,"error encoding message (invalid clock)");const hr=__classPrivateFieldGet$9(this,_AbstractGossipLog_transformer,"f").toRepresentation(dr.payload);assert$4(hr!==void 0,"error encoding message (invalid payload)");const pr=didKeyPattern.exec(ar.publicKey);assert$4(pr!==null);const[{},mr]=pr,gr={publicKey:base58btc$1.decode(mr),signature:ar.signature,parents:fr,payload:hr},yr=encodeSignedMessage(gr);return[getKey(dr.clock,yr),yr]}decode(ar){const dr=decodeSignedMessage(ar),fr=getNextClock(dr.parents),hr=dr.parents.map(decodeId);assert$4(hr.every((xr,wr)=>wr===0||hr[wr-1]<xr),"unsorted parents array");const pr=__classPrivateFieldGet$9(this,_AbstractGossipLog_transformer,"f").toTyped(dr.payload);assert$4(pr!==void 0,"error decoding message (invalid payload)");const mr={topic:this.topic,clock:fr,parents:hr,payload:pr},gr={publicKey:`did:key:${base58btc$1.encode(dr.publicKey)}`,signature:dr.signature,cid:getCID(mr,{codec:"dag-cbor",digest:"sha2-256"})};return[decodeId(getKey(fr,ar)),gr,mr]}async getClock(){const ar=await this.read(fr=>this.getHeads(fr));return[getNextClock(ar),ar.map(decodeId)]}async has(ar){return assert$4(messageIdPattern.test(ar),"invalid message ID"),await this.read(({messages:dr})=>dr.get(encodeId(ar))!==null)}async get(ar){assert$4(messageIdPattern.test(ar),"invalid message ID");const dr=await this.read(({messages:mr})=>mr.get(encodeId(ar)));if(dr===null)return[null,null];const[fr,hr,pr]=this.decode(dr);return[hr,pr]}async getHeads(ar){const dr=[];for await(const[fr,hr]of ar.heads.entries())assert$4(fr.byteLength===KEY_LENGTH,"internal error (expected key.byteLength === KEY_LENGTH)"),assert$4(equals$1(hr,cborNull),"internal error (unexpected parent entry value)"),dr.push(fr);return dr}async append(ar,dr={}){const fr=dr.signer??this.signer,{id:hr,signature:pr,message:mr,result:gr,root:yr}=await this.write(async xr=>{const wr=await this.getHeads(xr),br=getNextClock(wr),Sr=wr.map(decodeId),vr={topic:this.topic,clock:br,parents:Sr,payload:ar},Er=await fr.sign(vr),[Ar,_r]=this.encode(Er,vr),Cr=decodeId(Ar);this.log("appending message %s: %O",Cr,vr);const kr=await __classPrivateFieldGet$9(this,_AbstractGossipLog_instances,"m",_AbstractGossipLog_insert).call(this,xr,Cr,Er,vr,[Ar,_r]),Rr=await xr.messages.getRoot();return{id:Cr,signature:Er,message:vr,result:kr,root:Rr}});return this.dispatchEvent(new CustomEvent$2("commit",{detail:{topic:this.topic,root:yr}})),this.log("commited root %s",bytesToHex$1(yr.hash)),{id:hr,signature:pr,message:mr,result:gr}}async insert(ar,dr){verifySignedValue(ar,dr);const{id:fr,root:hr}=await this.write(async pr=>{const[mr,gr]=this.encode(ar,dr),yr=decodeId(mr);this.log("inserting message %s",yr);const xr=new Set;this.log("looking up %s parents",dr.parents.length);for(const br of dr.parents)await pr.messages.get(encodeId(br))===null?(this.log("missing parent %s",br),xr.add(br)):this.log("found parent %s",br);if(xr.size>0&&(this.log("missing %d/%d parents",xr.size,dr.parents.length),this.mempool.add(yr,{signature:ar,message:dr},xr),this.indexAncestors))return{id:yr};await __classPrivateFieldGet$9(this,_AbstractGossipLog_instances,"m",_AbstractGossipLog_insert).call(this,pr,yr,ar,dr,[mr,gr]);const wr=await pr.messages.getRoot();return{id:yr,root:wr}});return hr!==void 0&&(this.dispatchEvent(new CustomEvent$2("commit",{detail:{topic:this.topic,root:hr}})),this.log("commited root %s",bytesToHex$1(hr.hash))),{id:fr}}async getAncestors(ar,dr){assert$4(messageIdPattern.test(ar),"invalid message ID");const fr=new Set;return await this.read(hr=>__classPrivateFieldGet$9(this,_AbstractGossipLog_instances,"m",_AbstractGossipLog_getAncestors).call(this,hr,encodeId(ar),dr,fr)),this.log("getAncestors of %s atOrBefore %d: %o",ar,dr,fr),Array.from(fr).sort()}async isAncestor(ar,dr){return assert$4(messageIdPattern.test(ar),"invalid message ID"),await this.read(fr=>AbstractGossipLog.isAncestor(fr,ar,dr))}static async isAncestor(ar,dr,fr,hr=new Set){if(assert$4(ar.ancestors!==void 0,"expected txn.ancestors !== undefined"),assert$4(messageIdPattern.test(dr),"invalid message ID (id)"),assert$4(messageIdPattern.test(fr),"invalid message ID (ancestor)"),dr===fr)return!0;const pr=encodeId(fr),[mr]=decodeClock(pr),gr=encodeId(dr),[yr]=decodeClock(gr);if(yr<=mr)return!1;const xr=Math.floor(Math.log2(Number(yr-mr))),wr=await ar.ancestors.get(gr);assert$4(wr!==null,"key not found in ancestor index");const br=decode$6(wr);for(const Sr of br[xr]){const vr=decodeId(Sr);if(hr.has(vr))continue;if(hr.add(vr),await AbstractGossipLog.isAncestor(ar,vr,fr,hr))return!0}return!1}async sync(ar,dr={}){let fr=0;const hr=performance.now(),pr=await this.write(async yr=>{const xr=new Driver(this.topic,ar,yr.messages);for await(const[wr,br]of xr.sync()){const[Sr,vr,Er]=this.decode(br);if(assert$4(Sr===decodeId(wr),"expected id === decodeId(key)"),verifySignature(vr),await yr.messages.get(wr)===null){for(const _r of Er.parents){const Cr=encodeId(_r);if(await yr.messages.get(Cr)===null){if(this.log.error("missing parent %s of message %s: %O",_r,Sr,Er),this.indexAncestors)throw new Error(`missing parent ${_r} of message ${Sr}`);continue}}await __classPrivateFieldGet$9(this,_AbstractGossipLog_instances,"m",_AbstractGossipLog_insert).call(this,yr,Sr,vr,Er,[wr,br]),dr.timeoutController&&dr.timeoutController.delay(),fr++}}return await yr.messages.getRoot()},dr),mr=Math.ceil(performance.now()-hr),gr=dr.sourceId;return this.dispatchEvent(new CustomEvent$2("sync",{detail:{peer:gr,duration:mr,messageCount:fr}})),this.dispatchEvent(new CustomEvent$2("commit",{detail:{root:pr}})),this.log("commited root %s",bytesToHex$1(pr.hash)),{root:pr,messageCount:fr}}async serve(ar,dr={}){await this.read(fr=>ar(fr.messages),dr)}}_AbstractGossipLog_transformer=new WeakMap,_AbstractGossipLog_apply=new WeakMap,_AbstractGossipLog_instances=new WeakSet,_AbstractGossipLog_getAncestors=async function cr(ar,dr,fr,hr,pr=new Set){assert$4(ar.ancestors!==void 0,"expected txn.ancestors !== undefined"),assert$4(fr>0,"expected atOrBefore > 0");const[mr]=decodeClock(dr);assert$4(fr<Number(mr),"expected atOrBefore < clock");const gr=Math.floor(Math.log2(Number(mr)-fr)),yr=await ar.ancestors.get(dr);if(yr===null)throw new Error(`key ${decodeId(dr)} not found in ancestor index`);const xr=decode$6(yr);for(const wr of xr[gr]){const[br]=decodeClock(wr),Sr=decodeId(wr);if(Number(br)<=fr)hr.add(Sr);else{if(pr.has(Sr))return;pr.add(Sr),await __classPrivateFieldGet$9(this,_AbstractGossipLog_instances,"m",cr).call(this,ar,wr,fr,hr,pr)}}},_AbstractGossipLog_insert=async function cr(ar,dr,fr,hr,[pr,mr]=this.encode(fr,hr)){this.log("applying %s %O",dr,hr);let gr;try{gr=await __classPrivateFieldGet$9(this,_AbstractGossipLog_apply,"f").apply(ar,[dr,fr,hr])}catch(xr){throw this.dispatchEvent(new CustomEvent$2("error",{detail:{error:xr}})),xr}this.dispatchEvent(new CustomEvent$2("message",{detail:{id:dr,signature:fr,message:hr,result:gr}})),await ar.messages.set(pr,mr);const yr=hr.parents.map(encodeId);await ar.heads.set(pr,cborNull);for(const xr of yr)await ar.heads.delete(xr);if(this.indexAncestors){assert$4(ar.ancestors!==void 0,"expected txn.ancestors !== undefined");const xr=Array.from(getAncestorClocks(hr.clock)),wr=new Array(xr.length);for(const[br,Sr]of xr.entries())if(br===0)wr[br]=yr;else{const vr=new Set;for(const Er of wr[br-1]){const[Ar]=decodeClock(Er);Number(Ar)<=Sr?vr.add(decodeId(Er)):(assert$4(Number(Ar)<=xr[br-1],"expected childClock <= ancestorClocks[i - 1]"),await __classPrivateFieldGet$9(this,_AbstractGossipLog_instances,"m",_AbstractGossipLog_getAncestors).call(this,ar,Er,Sr,vr))}wr[br]=Array.from(vr).map(encodeId)}await ar.ancestors.set(pr,encode$9(wr))}for(const[xr,wr]of this.mempool.observe(dr))await __classPrivateFieldGet$9(this,_AbstractGossipLog_instances,"m",cr).call(this,ar,xr,wr.signature,wr.message);return gr};class GossipLog extends AbstractGossipLog{static async open(ar){const dr=["messages","heads","ancestors"],fr=await openDB(`canvas/${ar.topic}/log`,2,{upgrade:(gr,yr,xr)=>{for(const wr of dr)gr.objectStoreNames.contains(wr)||gr.createObjectStore(wr)}}),hr=await IDBTree.open(fr,"messages"),pr=new IDBStore(fr,"heads"),mr=new IDBStore(fr,"ancestors");return new GossipLog(fr,hr,pr,mr,ar)}constructor(ar,dr,fr,hr,pr){super(pr),this.db=ar,this.messages=dr,this.heads=fr,this.ancestors=hr,this.incomingSyncPeers=new Set,this.outgoingSyncPeers=new Set,this.controller=new AbortController,this.lockName=bytesToHex$1(randomBytes$2(16)),ar.addEventListener("error",mr=>this.log("db: error",mr)),ar.addEventListener("close",mr=>this.log("db: close",mr)),ar.addEventListener("versionchange",mr=>{if(this.log("db: versionchange",mr),!(mr.oldVersion===null&&mr.newVersion!==null)){if(mr.oldVersion!==null&&mr.newVersion!==null)return;if(mr.oldVersion!==null&&mr.newVersion===null){ar.close();return}}})}async close(){this.log("closing"),this.controller.abort(),this.db.close()}async*entries(ar=null,dr=null,fr={}){this.log("requesting shared lock");const hr=pDefer();navigator.locks.request(this.lockName,{mode:"shared",signal:this.controller.signal},pr=>{if(pr===null)throw this.log.error("failed to acquire shared lock"),new SyncResourceError(`failed to acquire shared lock ${this.lockName}`);return this.log("acquired shared lock"),hr.promise}),this.messages.store.txn===null&&(this.messages.store.txn=this.db.transaction(this.messages.store.storeName,"readonly"));try{for await(const pr of this.messages.nodes(0,ar??{key:null,inclusive:!1},dr,fr))assert$4(pr.key!==null,"expected node.key !== null"),assert$4(pr.value!==void 0,"expected node.value !== undefined"),yield[pr.key,pr.value]}finally{this.messages.store.txn=null,this.log("releasing shared lock"),hr.resolve()}}async read(ar,dr={}){const fr=dr.targetId??null;if(fr!==null&&this.outgoingSyncPeers.has(fr))throw new SyncDeadlockError(`deadlock with peer ${fr}`);let hr;return this.log("requesting shared lock"),await navigator.locks.request(this.lockName,{mode:"shared",signal:this.controller.signal},async pr=>{if(pr===null)throw this.log.error("failed to acquire shared lock"),new SyncResourceError(`failed to acquire shared lock ${this.lockName}`);this.log("acquired shared lock"),fr!==null&&this.incomingSyncPeers.add(fr);const mr={get:yr=>this.heads.read(()=>this.heads.get(yr)),entries:(yr=null,xr=null,wr={})=>(this.heads.txn=this.db.transaction(this.heads.storeName,"readonly"),this.heads.entries(yr,xr,wr))},gr={get:yr=>this.ancestors.read(()=>this.ancestors.get(yr)),entries:(yr=null,xr=null,wr={})=>(this.ancestors.txn=this.db.transaction(this.ancestors.storeName,"readonly"),this.ancestors.entries(yr,xr,wr))};try{hr=await ar({messages:this.messages,heads:mr,ancestors:gr})}catch(yr){yr instanceof Error&&yr.name==="TransactionInactiveError"?this.log.error("incoming merkle sync attempted, but transaction was invalid"):yr instanceof Error&&yr.name==="Error"&&yr.message==="TIMEOUT"?this.log.error("incoming merkle sync reached timeout"):this.log.error("error in read-only transaction: %O",yr)}finally{this.log("releasing shared lock"),fr!==null&&this.incomingSyncPeers.delete(fr)}}),hr}async write(ar,dr={}){const fr=dr.sourceId??null;if(fr!==null&&this.incomingSyncPeers.has(fr))throw new SyncDeadlockError(`deadlock with peer ${fr}`);let hr,pr=null;if(this.log("requesting exclusive lock"),await navigator.locks.request(this.lockName,{mode:"exclusive",signal:this.controller.signal},async mr=>{if(mr===null)throw this.log.error("failed to exclusive lock"),new SyncResourceError(`failed to acquire exclusive lock ${this.lockName}`);this.log("acquired exclusive lock"),fr!==null&&this.outgoingSyncPeers.add(fr);const gr={get:xr=>this.heads.read(()=>this.heads.get(xr)),set:(xr,wr)=>this.heads.write(()=>this.heads.set(xr,wr)),delete:xr=>this.heads.write(()=>this.heads.delete(xr)),entries:(xr=null,wr=null,br={})=>(this.heads.txn=this.db.transaction(this.heads.storeName,"readonly"),this.heads.entries(xr,wr,br))},yr={get:xr=>this.ancestors.read(()=>this.ancestors.get(xr)),set:(xr,wr)=>this.ancestors.write(()=>this.ancestors.set(xr,wr)),delete:xr=>this.ancestors.write(()=>this.ancestors.delete(xr)),entries:(xr=null,wr=null,br={})=>(this.ancestors.txn=this.db.transaction(this.ancestors.storeName,"readonly"),this.ancestors.entries(xr,wr,br))};try{hr=await ar({messages:this.messages,heads:gr,ancestors:yr})}catch(xr){throw this.log.error("error in read-write transaction: %O",xr),pr=xr,xr}finally{this.log("releasing exclusive lock"),fr!==null&&this.outgoingSyncPeers.delete(fr)}}),pr!==null)throw pr;return hr}}const namePattern=/^[a-zA-Z0-9$:_\-\.]+$/;function assert$3(cr,ar){if(!cr)throw new Error(ar??"assertion failed")}function signalInvalidType(cr){throw console.error(cr),new TypeError("internal error: invalid type")}function validateModelValue(cr,ar){for(const dr of cr.properties){const fr=ar[dr.name];if(fr===void 0)throw new Error(`missing property ${dr.name}`);validatePropertyValue(cr.name,dr,fr)}}function validatePropertyValue(cr,ar,dr){if(ar.kind==="primary"){if(typeof dr!="string")throw new TypeError(`${cr}/${ar.name} must be a string`)}else if(ar.kind==="primitive"){if(ar.optional&&dr===null)return;if(ar.type==="integer"){if(typeof dr!="number"||!Number.isSafeInteger(dr))throw new TypeError(`${cr}/${ar.name} must be an integer`)}else if(ar.type==="float"){if(typeof dr!="number")throw new TypeError(`${cr}/${ar.name} must be a number`)}else if(ar.type==="string"){if(typeof dr!="string")throw new TypeError(`${cr}/${ar.name} must be a string`)}else if(ar.type==="bytes"){if(dr instanceof Uint8Array)return;throw new TypeError(`${cr}/${ar.name} must be a Uint8Array`)}else if(ar.type==="boolean"){if(typeof dr!="boolean")throw new TypeError(`${cr}/${ar.name} must be a boolean`)}else if(ar.type==="json"){if(dr===null)throw new TypeError(`${cr}/${ar.name} must not be null`);try{JSON.stringify(dr)}catch{throw new TypeError(`${cr}/${ar.name} must be JSON-serializable`)}}else signalInvalidType(ar.type)}else if(ar.kind==="reference"){if(ar.optional&&dr===null)return;if(typeof dr!="string")throw new TypeError(`${cr}/${ar.name} must be a string`)}else if(ar.kind==="relation"){if(!Array.isArray(dr)||dr.some(fr=>typeof fr!="string"))throw new TypeError(`${cr}/${ar.name} must be an array of strings`)}else signalInvalidType(ar)}function lessThan(cr,ar){if(cr===null||ar===null)return ar!==null;let dr=cr.length,fr=ar.length;for(let hr=0,pr=Math.min(dr,fr);hr<pr;++hr)if(cr[hr]!==ar[hr]){dr=cr[hr],fr=ar[hr];break}return dr<fr}function isLiteralExpression(cr){return cr===null||typeof cr=="boolean"||typeof cr=="number"||typeof cr=="string"||cr instanceof Uint8Array?!0:!!(Array.isArray(cr)&&cr.every(ar=>typeof ar=="string"))}function isNotExpression(cr){if(isLiteralExpression(cr))return!1;const{neq:ar}=cr;return ar!==void 0}function isRangeExpression(cr){if(isLiteralExpression(cr))return!1;const{neq:ar}=cr;return ar===void 0}const stringOrder={equals:(cr,ar)=>cr===ar,lessThan:(cr,ar)=>cr===null&&ar===null?!1:cr===null?!0:ar===null?!1:cr<ar},numberOrder={equals:(cr,ar)=>cr===ar,lessThan:(cr,ar)=>cr===null&&ar===null?!1:cr===null?!0:ar===null?!1:cr<ar},byteOrder={equals:(cr,ar)=>cr===null&&ar===null?!0:cr instanceof Uint8Array&&ar instanceof Uint8Array?equals$1(cr,ar):!1,lessThan:(cr,ar)=>cr===null&&ar===null?!1:cr===null?!0:ar===null?!1:cr instanceof Uint8Array&&ar instanceof Uint8Array?lessThan(cr,ar):!1},booleanOrder={equals:(cr,ar)=>cr===null&&ar===null?!0:typeof cr=="boolean"&&typeof ar=="boolean"?cr===ar:!1,lessThan:(cr,ar)=>cr===null&&ar===null?!1:cr===null?!0:ar===null?!1:typeof cr=="boolean"&&typeof ar=="boolean"?cr===!1&&ar===!0:!1},primitiveTypeOrders={integer:numberOrder,float:numberOrder,string:stringOrder,bytes:byteOrder,boolean:booleanOrder,json:stringOrder},referenceOrder=stringOrder;function getCompare(cr,ar){const dr=Object.entries(ar);assert$3(dr.length===1,"orderBy must have exactly one entry");const[[fr,hr]]=dr,pr=cr.properties.find(mr=>mr.name===fr);if(assert$3(pr!==void 0,"property not found"),pr.kind==="primary"){if(hr==="asc")return({[fr]:mr},{[fr]:gr})=>stringOrder.lessThan(mr,gr)?-1:stringOrder.equals(mr,gr)?0:1;if(hr==="desc")return({[fr]:mr},{[fr]:gr})=>stringOrder.lessThan(mr,gr)?1:stringOrder.equals(mr,gr)?0:-1;signalInvalidType(hr)}else if(pr.kind==="primitive"){const mr=primitiveTypeOrders[pr.type];if(hr==="asc")return({[fr]:gr},{[fr]:yr})=>mr.lessThan(gr,yr)?-1:mr.equals(gr,yr)?0:1;if(hr==="desc")return({[fr]:gr},{[fr]:yr})=>mr.lessThan(gr,yr)?1:mr.equals(gr,yr)?0:-1;signalInvalidType(hr)}else if(pr.kind==="reference"){if(hr==="asc")return({[fr]:mr},{[fr]:gr})=>referenceOrder.lessThan(mr,gr)?-1:referenceOrder.equals(mr,gr)?0:1;if(hr==="desc")return({[fr]:mr},{[fr]:gr})=>referenceOrder.lessThan(mr,gr)?1:referenceOrder.equals(mr,gr)?0:-1;signalInvalidType(hr)}else{if(pr.kind==="relation")throw new Error("cannot orderBy a relation property");signalInvalidType(pr)}}function getFilter(cr,ar={}){const dr=[];for(const[fr,hr]of Object.entries(ar)){const pr=getPropertyFilter(cr,fr,hr);dr.push({property:fr,filter:pr})}return fr=>dr.every(({filter:hr,property:pr})=>hr(fr[pr]))}function getPropertyFilter(cr,ar,dr){const fr=cr.properties.find(hr=>hr.name===ar);if(assert$3(fr!==void 0),fr.kind==="primary")return getPrimitiveFilter(cr.name,{name:ar,kind:"primitive",type:"string",optional:!1},dr);if(fr.kind==="primitive")return getPrimitiveFilter(cr.name,fr,dr);if(fr.kind==="reference")return getReferenceFilter(cr.name,fr,dr);if(fr.kind==="relation")return getRelationFilter(cr.name,fr,dr);signalInvalidType(fr)}function getReferenceFilter(cr,ar,dr){if(isLiteralExpression(dr)){const fr=dr;return assert$3(fr===null||typeof fr=="string","invalid reference value expression"),hr=>hr===fr}else if(isNotExpression(dr)){const fr=dr.neq;return assert$3(fr===null||typeof fr=="string","invalid reference value expression"),hr=>hr!==fr}else{if(isRangeExpression(dr))throw new Error("cannot use range expressions on reference values");signalInvalidType(dr)}}function getRelationFilter(cr,ar,dr){if(isLiteralExpression(dr)){const fr=dr;return assert$3(Array.isArray(fr)&&fr.every(hr=>typeof hr=="string"),"invalid relation expression (expected string[])"),hr=>fr.every(pr=>Array.isArray(hr)&&hr.includes(pr))}else if(isNotExpression(dr)){const fr=dr.neq;return assert$3(Array.isArray(fr)&&fr.every(hr=>typeof hr=="string"),"invalid relation expression (expected string[])"),hr=>fr.every(pr=>Array.isArray(hr)&&!hr.includes(pr))}else{if(isRangeExpression(dr))throw new Error("cannot use range expressions on relation values");signalInvalidType(dr)}}function getPrimitiveFilter(cr,ar,dr){const fr=primitiveTypeOrders[ar.type];if(isLiteralExpression(dr)){const hr=dr;return validatePropertyValue(cr,ar,hr),pr=>fr.equals(pr,hr)}else if(isNotExpression(dr)){const hr=dr.neq;return validatePropertyValue(cr,ar,hr),pr=>!fr.equals(pr,hr)}else if(isRangeExpression(dr)){const{gt:hr,gte:pr,lt:mr,lte:gr}=dr;for(const yr of[hr,pr,mr,gr])yr!==void 0&&validatePropertyValue(cr,ar,yr);return yr=>!(hr!==void 0&&(fr.lessThan(yr,hr)||fr.equals(yr,hr))||pr!==void 0&&fr.lessThan(yr,pr)||mr!==void 0&&!fr.lessThan(yr,mr)||gr!==void 0&&!fr.lessThan(yr,gr)&&!fr.equals(yr,gr))}else signalInvalidType(dr)}var __classPrivateFieldGet$8=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},__classPrivateFieldSet$6=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},_AbstractModelDB_subscriptionId;class AbstractModelDB{constructor(ar,dr={}){this.config=ar,this.log=logger("canvas:modeldb"),this.subscriptions=new Map,_AbstractModelDB_subscriptionId.set(this,0),this.models={};for(const fr of ar.models)this.models[fr.name]=fr}async set(ar,dr){await this.apply([{operation:"set",model:ar,value:dr}])}async delete(ar,dr){await this.apply([{operation:"delete",model:ar,key:dr}])}subscribe(ar,dr,fr){var hr,pr;const mr=this.models[ar];assert$3(mr!==void 0,`model ${ar} not found`);const gr=this.getEffectFilter(mr,dr),yr=(__classPrivateFieldSet$6(this,_AbstractModelDB_subscriptionId,(pr=__classPrivateFieldGet$8(this,_AbstractModelDB_subscriptionId,"f"),hr=pr++,pr),"f"),hr);return this.subscriptions.set(yr,{model:ar,query:dr,filter:gr,callback:fr}),{id:yr,results:this.query(ar,dr).then(xr=>Promise.resolve(fr(xr)).then(()=>xr,wr=>(this.log.error(wr),xr)))}}unsubscribe(ar){this.subscriptions.delete(ar)}getEffectFilter(ar,dr){const fr=getFilter(ar,dr.where);return hr=>!(hr.model!==ar.name||hr.operation==="set"&&!fr(hr.value))}}_AbstractModelDB_subscriptionId=new WeakMap;function parseConfig(cr){const ar=[],dr=[];for(const[fr,{$indexes:hr,...pr}]of Object.entries(cr)){assert$3(namePattern.test(fr),"expected model name to match /^[a-zA-Z0-9$:_\\-\\.]+$/");const mr=[],gr=[];for(const[wr,br]of Object.entries(pr)){assert$3(!Array.isArray(br),"invalid property type");const Sr=parseProperty(wr,br);gr.push(Sr),Sr.kind==="relation"&&ar.push({source:fr,property:wr,target:Sr.target,indexed:hr?.includes(wr)??!1})}const yr=gr.filter(wr=>wr.kind==="primary");assert$3(yr.length===1,"models must have exactly one `primary` property");const[{name:xr}]=yr;if(hr!==void 0)for(const wr of hr)ar.some(br=>br.source===fr&&br.property===wr)||mr.push(Array.isArray(wr)?wr:[wr]);dr.push({name:fr,primaryKey:xr,properties:gr,indexes:mr})}return{relations:ar,models:dr}}const primitivePropertyPattern=/^(integer|float|string|bytes|boolean|json)(\??)$/,referencePropertyPattern=/^@([a-z0-9.-]+)(\??)$/,relationPropertyPattern=/^@([a-z0-9.-]+)\[\]$/;function parseProperty(cr,ar){if(assert$3(namePattern.test(cr),"expected property name to match /^[a-zA-Z0-9$:_\\-\\.]+$/"),ar==="primary")return{name:cr,kind:"primary"};const dr=primitivePropertyPattern.exec(ar);if(dr!==null){const[pr,mr,gr]=dr;if(mr==="json"&&gr==="?")throw new Error(`field "${cr}" is invalid - json fields cannot be optional`);return{name:cr,kind:"primitive",type:mr,optional:gr==="?"}}const fr=referencePropertyPattern.exec(ar);if(fr!==null){const[pr,mr,gr]=fr;return{name:cr,kind:"reference",target:mr,optional:gr==="?"}}const hr=relationPropertyPattern.exec(ar);if(hr!==null){const[pr,mr]=hr;return{name:cr,kind:"relation",target:mr}}throw new Error(`invalid property "${ar}"`)}const getIndexName=cr=>cr.join("/"),checkForMissingObjectStores=(cr,ar)=>{for(const dr of ar)if(!cr.objectStoreNames.contains(dr))throw new Error(`IndexedDB store '${cr.name}->${dr}' was expected, but not found.

If necessary, you can clear IndexedDB by running this in the console:

const dbs = await window.indexedDB.databases()
dbs.forEach(db => { window.indexedDB.deleteDatabase(db.name) })`)};class ModelAPI{constructor(ar){this.model=ar,this.storeName=this.model.name,this.log=logger(`canvas:modeldb:[${this.model.name}]`)}getStore(ar){return ar.objectStore(this.storeName)}async get(ar,dr){const fr=await this.getStore(ar).get(dr);return fr===void 0?null:this.decodeObject(fr)}async set(ar,dr){validateModelValue(this.model,dr);const fr=this.encodeObject(dr);await this.getStore(ar).put(fr)}async delete(ar,dr){await this.getStore(ar).delete(dr)}async query(ar,dr){const fr=dr.limit??1/0;if(fr===0)return[];const hr=this.getSelect(dr.select),pr=getFilter(this.model,dr.where),mr=this.getStore(ar);if(dr.where!==void 0)for(const[wr,br]of Object.entries(dr.where)){const Sr=this.model.properties.find(Cr=>Cr.name===wr);if(Sr&&Sr.kind==="primitive"&&Sr.type==="json")throw new Error("json properties are not supported in where clauses");const vr=this.model.indexes.find(Cr=>Cr[0]===wr);if(vr===void 0)continue;const Er=mr.index(getIndexName(vr)),Ar=[];let _r=0;for await(const Cr of this.queryIndex(wr,Er,br))pr(Cr)&&(dr.offset!==void 0&&_r<dr.offset?_r++:Ar.push(Cr));return dr.orderBy!==void 0&&Ar.sort(getCompare(this.model,dr.orderBy)),Ar.slice(0,fr).map(hr)}if(dr.orderBy!==void 0){const wr=Object.entries(dr.orderBy);assert$3(wr.length===1,"expected exactly one entry in query.orderBy");const[[br,Sr]]=wr,vr=this.model.indexes.find(Er=>Er[0]===br);if(vr!==void 0){const Er=mr.index(getIndexName(vr)),Ar=[];let _r=await Er.openCursor(null,directions[Sr]),Cr=0;for(;_r!==null&&dr.offset!==void 0&&dr.offset!==0&&Cr<dr.offset;)_r=await _r.continue(),Cr++;try{for(;_r!==null;_r=await _r.continue()){const kr=this.decodeObject(_r.value);if(pr(kr)&&Ar.push(hr(kr))>=fr)break}}catch(kr){if(!(kr instanceof DOMException)||kr.code!==kr.INVALID_STATE_ERR)throw kr}return Ar}}this.log("iterating over all objects");const gr=[];let yr=await mr.openCursor(),xr=0;for(;yr!==null&&dr.offset!==void 0&&dr.offset!==0&&xr<dr.offset;)yr=await yr.continue(),xr++;try{for(;yr!==null;yr=await yr.continue()){const wr=this.decodeObject(yr.value);pr(wr)&&gr.push(wr)}}catch(wr){if(!(wr instanceof DOMException)||wr.code!==wr.INVALID_STATE_ERR)throw wr}return dr.orderBy!==void 0&&gr.sort(getCompare(this.model,dr.orderBy)),gr.slice(0,fr).map(hr)}async*queryIndex(ar,dr,fr){const hr=this.model.properties.find(pr=>pr.name===ar);if(assert$3(hr!==void 0,"property not found"),isLiteralExpression(fr)){const pr=IDBKeyRange.only(encodePropertyValue(hr,fr));for(let mr=await dr.openCursor(pr);mr!==null;mr=await mr.continue())yield this.decodeObject(mr.value)}else if(isNotExpression(fr)){if(fr.neq!==null){const mr=IDBKeyRange.upperBound(encodePropertyValue(hr,fr.neq),!0);for(let gr=await dr.openCursor(mr);gr!==null;gr=await gr.continue())yield this.decodeObject(gr.value)}const pr=IDBKeyRange.lowerBound(encodePropertyValue(hr,fr.neq),!0);for(let mr=await dr.openCursor(pr);mr!==null;mr=await mr.continue())yield this.decodeObject(mr.value)}else if(isRangeExpression(fr)){const pr=getRange(hr,fr);for(let mr=await dr.openCursor(pr);mr!==null;mr=await mr.continue())yield this.decodeObject(mr.value)}else signalInvalidType(fr)}getSelect(ar){if(ar===void 0)return fr=>fr;const dr=Object.keys(ar).filter(fr=>ar[fr]);return fr=>Object.fromEntries(dr.map(hr=>[hr,fr[hr]]))}async*iterate(ar){const dr=this.getStore(ar);for(let fr=await dr.openCursor();fr!==null;fr=await fr.continue()){const hr=fr.key;assert$3(typeof hr=="string","internal error - unexpected cursor key"),yield this.decodeObject(fr.value)}}encodeObject(ar){const dr={};for(const fr of this.model.properties)dr[fr.name]=encodePropertyValue(fr,ar[fr.name]);return dr}decodeObject(ar){const dr={};for(const fr of this.model.properties)dr[fr.name]=decodePropertyValue(fr,ar[fr.name]);return dr}}function encodePropertyValue(cr,ar){if(cr.kind==="primary")return ar;if(cr.kind==="primitive")return cr.optional?ar===null?[]:[ar]:ar;if(cr.kind==="reference")return cr.optional?ar===null?[]:[ar]:ar;if(cr.kind==="relation")return ar;signalInvalidType(cr)}function decodePropertyValue(cr,ar){if(cr.kind==="primary")return assert$3(typeof ar=="string",'expected objectPropertyValue === "string"'),ar;if(cr.kind==="primitive")return cr.optional?(assert$3(Array.isArray(ar)),ar.length===0?null:ar[0]):(assert$3(!Array.isArray(ar)),ar);if(cr.kind==="reference")return cr.optional?(assert$3(Array.isArray(ar)),ar.length===0?null:ar[0]):(assert$3(!Array.isArray(ar)),ar);if(cr.kind==="relation")return ar;signalInvalidType(cr)}const directions={asc:"next",desc:"prev"};function getRange(cr,{gt:ar,gte:dr,lt:fr,lte:hr}){const pr=ar!==void 0?ar:dr!==void 0?dr:void 0,mr=fr!==void 0||hr!==void 0?fr:void 0;return pr!==void 0&&mr!==void 0?IDBKeyRange.bound(encodePropertyValue(cr,pr),mr,ar!==void 0,fr!==void 0):pr!==void 0?IDBKeyRange.lowerBound(encodePropertyValue(cr,pr),ar!==void 0):mr!==void 0?IDBKeyRange.upperBound(encodePropertyValue(cr,mr),fr!==void 0):null}var __classPrivateFieldGet$7=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_ModelDB_models;class ModelDB extends AbstractModelDB{static async initialize({name:ar,models:dr,indexHistory:fr}){const hr=parseConfig(dr),pr=await openDB(ar,1,{upgrade(mr){for(const gr of hr.models){const yr=gr.properties.find(wr=>wr.kind==="primary");assert$3(yr!==void 0,"expected primaryKey !== undefined");const xr=mr.createObjectStore(gr.name,{keyPath:yr.name});for(const wr of gr.indexes){if(wr.length>1)throw new Error("multi-property indexes not supported yet");const[br]=wr;xr.createIndex(getIndexName(wr),br)}}}});return new ModelDB(pr,hr,{indexHistory:fr})}constructor(ar,dr,fr){super(dr,fr),this.db=ar,_ModelDB_models.set(this,{});for(const hr of dr.models)__classPrivateFieldGet$7(this,_ModelDB_models,"f")[hr.name]=new ModelAPI(hr);ar.addEventListener("error",hr=>this.log("db: error",hr)),ar.addEventListener("close",hr=>this.log("db: close",hr)),ar.addEventListener("versionchange",hr=>{if(this.log("db: versionchange",hr),!(hr.oldVersion===null&&hr.newVersion!==null)){if(hr.oldVersion!==null&&hr.newVersion!==null)return;if(hr.oldVersion!==null&&hr.newVersion===null){ar.close();return}}})}async close(){this.log("closing"),this.db.close()}async read(ar,dr=[...this.db.objectStoreNames]){checkForMissingObjectStores(this.db,dr);const fr=this.db.transaction(dr,"readonly");return await ar(fr)}async write(ar){let dr=null;try{dr=this.db.transaction(this.db.objectStoreNames,"readwrite");const[fr,hr]=await Promise.all([ar(dr),dr.done]);return fr}catch(fr){throw dr?.abort(),fr}}async*iterate(ar){const dr=__classPrivateFieldGet$7(this,_ModelDB_models,"f")[ar];assert$3(dr!==void 0,`model ${ar} not found`),checkForMissingObjectStores(this.db,[dr.storeName]);const fr=this.db.transaction([dr.storeName],"readonly",{});yield*dr.iterate(fr)}async get(ar,dr){const fr=__classPrivateFieldGet$7(this,_ModelDB_models,"f")[ar];return assert$3(fr!==void 0,`model ${ar} not found`),await this.read(hr=>fr.get(hr,dr),[fr.storeName])}async query(ar,dr={}){const fr=__classPrivateFieldGet$7(this,_ModelDB_models,"f")[ar];return assert$3(fr!==void 0,`model ${ar} not found`),await this.read(pr=>fr.query(pr,dr),[fr.storeName])}async count(ar){const dr=__classPrivateFieldGet$7(this,_ModelDB_models,"f")[ar];return assert$3(dr!==void 0,`model ${ar} not found`),checkForMissingObjectStores(this.db,[dr.storeName]),await this.db.count(dr.storeName)}async apply(ar){await this.write(async dr=>{for(const fr of ar){const hr=__classPrivateFieldGet$7(this,_ModelDB_models,"f")[fr.model];assert$3(hr!==void 0,`model ${fr.model} not found`),fr.operation==="set"?await hr.set(dr,fr.value):fr.operation==="delete"?await hr.delete(dr,fr.key):signalInvalidType(fr)}await Promise.all([...this.subscriptions.values()].map(async({model:fr,query:hr,filter:pr,callback:mr})=>{const gr=__classPrivateFieldGet$7(this,_ModelDB_models,"f")[fr];if(assert$3(gr!==void 0,`model ${fr} not found`),ar.some(yr=>pr(yr)))try{const yr=await gr.query(dr,hr);await mr(yr)}catch(yr){this.log.error(yr)}}))})}}_ModelDB_models=new WeakMap;var es6=function cr(ar,dr){if(ar===dr)return!0;if(ar&&dr&&typeof ar=="object"&&typeof dr=="object"){if(ar.constructor!==dr.constructor)return!1;var fr,hr,pr;if(Array.isArray(ar)){if(fr=ar.length,fr!=dr.length)return!1;for(hr=fr;hr--!==0;)if(!cr(ar[hr],dr[hr]))return!1;return!0}if(ar instanceof Map&&dr instanceof Map){if(ar.size!==dr.size)return!1;for(hr of ar.entries())if(!dr.has(hr[0]))return!1;for(hr of ar.entries())if(!cr(hr[1],dr.get(hr[0])))return!1;return!0}if(ar instanceof Set&&dr instanceof Set){if(ar.size!==dr.size)return!1;for(hr of ar.entries())if(!dr.has(hr[0]))return!1;return!0}if(ArrayBuffer.isView(ar)&&ArrayBuffer.isView(dr)){if(fr=ar.length,fr!=dr.length)return!1;for(hr=fr;hr--!==0;)if(ar[hr]!==dr[hr])return!1;return!0}if(ar.constructor===RegExp)return ar.source===dr.source&&ar.flags===dr.flags;if(ar.valueOf!==Object.prototype.valueOf)return ar.valueOf()===dr.valueOf();if(ar.toString!==Object.prototype.toString)return ar.toString()===dr.toString();if(pr=Object.keys(ar),fr=pr.length,fr!==Object.keys(dr).length)return!1;for(hr=fr;hr--!==0;)if(!Object.prototype.hasOwnProperty.call(dr,pr[hr]))return!1;for(hr=fr;hr--!==0;){var mr=pr[hr];if(!cr(ar[mr],dr[mr]))return!1}return!0}return ar!==ar&&dr!==dr};const equal=getDefaultExportFromCjs(es6);function useLiveQuery$1(cr,ar,dr){const fr=reactExports.useRef(cr??null),hr=reactExports.useRef(ar??null),pr=reactExports.useRef(dr??null),mr=reactExports.useRef(null),[gr,yr]=reactExports.useState(null);return reactExports.useEffect(()=>{if(cr===null||ar===null||dr===null||cr===void 0||ar===void 0||dr===void 0){fr.current!==null&&mr.current!==null&&(fr.current.unsubscribe(mr.current),mr.current=null,yr(null)),fr.current=cr??null,hr.current=ar??null,pr.current=dr??null;return}if(fr.current===cr&&hr.current===ar&&equal(pr.current,dr)&&mr.current!==null)return;fr.current!==null&&mr.current!==null&&cr.unsubscribe(mr.current);const{id:xr}=cr.subscribe(ar,dr,wr=>yr(wr));fr.current=cr,hr.current=ar,pr.current=dr,mr.current=xr},[cr,dr]),gr}function isAsyncIterable$1(cr){return cr[Symbol.asyncIterator]!=null}function first(cr){if(isAsyncIterable$1(cr))return(async()=>{for await(const ar of cr)return ar})();for(const ar of cr)return ar}function pipe(cr,...ar){if(cr==null)throw new Error("Empty pipeline");if(isDuplex(cr)){const fr=cr;cr=()=>fr.source}else if(isIterable(cr)||isAsyncIterable(cr)){const fr=cr;cr=()=>fr}const dr=[cr,...ar];if(dr.length>1&&isDuplex(dr[dr.length-1])&&(dr[dr.length-1]=dr[dr.length-1].sink),dr.length>2)for(let fr=1;fr<dr.length-1;fr++)isDuplex(dr[fr])&&(dr[fr]=duplexPipelineFn(dr[fr]));return rawPipe(...dr)}const rawPipe=(...cr)=>{let ar;for(;cr.length>0;)ar=cr.shift()(ar);return ar},isAsyncIterable=cr=>cr?.[Symbol.asyncIterator]!=null,isIterable=cr=>cr?.[Symbol.iterator]!=null,isDuplex=cr=>cr==null?!1:cr.sink!=null&&cr.source!=null,duplexPipelineFn=cr=>ar=>{const dr=cr.sink(ar);if(dr?.then!=null){const fr=pushable$1({objectMode:!0});dr.then(()=>{fr.end()},mr=>{fr.end(mr)});let hr;const pr=cr.source;if(isAsyncIterable(pr))hr=async function*(){yield*pr,fr.end()};else if(isIterable(pr))hr=function*(){yield*pr,fr.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return merge(fr,hr())}return cr.source},PING_LENGTH=32,PROTOCOL_VERSION$1="1.0.0",PROTOCOL_NAME$1="ping",PROTOCOL_PREFIX="ipfs",TIMEOUT=1e4,MAX_INBOUND_STREAMS$1=2,MAX_OUTBOUND_STREAMS$1=1,ERR_WRONG_PING_ACK="ERR_WRONG_PING_ACK";class PingService{protocol;components;started;timeout;maxInboundStreams;maxOutboundStreams;runOnTransientConnection;log;constructor(ar,dr={}){this.components=ar,this.log=ar.logger.forComponent("libp2p:ping"),this.started=!1,this.protocol=`/${dr.protocolPrefix??PROTOCOL_PREFIX}/${PROTOCOL_NAME$1}/${PROTOCOL_VERSION$1}`,this.timeout=dr.timeout??TIMEOUT,this.maxInboundStreams=dr.maxInboundStreams??MAX_INBOUND_STREAMS$1,this.maxOutboundStreams=dr.maxOutboundStreams??MAX_OUTBOUND_STREAMS$1,this.runOnTransientConnection=dr.runOnTransientConnection??!0,this.handleMessage=this.handleMessage.bind(this)}async start(){await this.components.registrar.handle(this.protocol,this.handleMessage,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnTransientConnection:this.runOnTransientConnection}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}handleMessage(ar){this.log("incoming ping from %p",ar.connection.remotePeer);const{stream:dr}=ar,fr=Date.now();pipe(dr,dr).catch(hr=>{this.log.error("incoming ping from %p failed with error",ar.connection.remotePeer,hr)}).finally(()=>{const hr=Date.now()-fr;this.log("incoming ping from %p complete in %dms",ar.connection.remotePeer,hr)})}async ping(ar,dr={}){this.log("pinging %p",ar);const fr=Date.now(),hr=randomBytes$1(PING_LENGTH),pr=await this.components.connectionManager.openConnection(ar,dr);let mr,gr=()=>{};if(dr.signal==null){const yr=AbortSignal.timeout(this.timeout);dr={...dr,signal:yr}}try{mr=await pr.newStream(this.protocol,{...dr,runOnTransientConnection:this.runOnTransientConnection}),gr=()=>{mr?.abort(new CodeError$3("ping timeout",ERR_TIMEOUT))},dr.signal?.addEventListener("abort",gr,{once:!0});const yr=await pipe([hr],mr,async wr=>first(wr)),xr=Date.now()-fr;if(yr==null)throw new CodeError$3(`Did not receive a ping ack after ${xr}ms`,ERR_WRONG_PING_ACK);if(!equals$1(hr,yr.subarray()))throw new CodeError$3(`Received wrong ping ack after ${xr}ms`,ERR_WRONG_PING_ACK);return this.log("ping %p complete in %dms",pr.remotePeer,xr),xr}catch(yr){throw this.log.error("error while pinging %p",pr.remotePeer,yr),mr?.abort(yr),yr}finally{dr.signal?.removeEventListener("abort",gr),mr!=null&&await mr.close()}}}function ping(cr={}){return ar=>new PingService(ar,cr)}const IDENTIFY_PROTOCOL_VERSION="0.1.0",MULTICODEC_IDENTIFY_PROTOCOL_NAME="id",MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME="id/push",MULTICODEC_IDENTIFY_PROTOCOL_VERSION="1.0.0",MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION="1.0.0";function pbStream(cr,ar){const dr=lpStream(cr,ar),fr={read:async(hr,pr)=>{const mr=await dr.read(pr);return hr.decode(mr)},write:async(hr,pr,mr)=>{await dr.write(pr.encode(hr),mr)},writeV:async(hr,pr,mr)=>{await dr.writeV(hr.map(gr=>pr.encode(gr)),mr)},pb:hr=>({read:async pr=>fr.read(hr,pr),write:async(pr,mr)=>fr.write(pr,hr,mr),writeV:async(pr,mr)=>fr.writeV(pr,hr,mr),unwrap:()=>fr}),unwrap:()=>dr.unwrap()};return fr}function isElectron$1(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var isElectron_1=isElectron$1;const detectElectron=getDefaultExportFromCjs(isElectron_1),isEnvWithDom=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,isElectron=detectElectron(),isBrowser=isEnvWithDom&&!isElectron,isElectronMain=isElectron&&!isEnvWithDom,isElectronRenderer=isElectron&&isEnvWithDom,isNode=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!isElectron,isWebWorker=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;typeof globalThis.process<"u"&&typeof globalThis.process.env<"u"&&globalThis.process.env["NODE"+(()=>"_")()+"ENV"];const isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";var Identify$1;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{if(hr.lengthDelimited!==!1&&fr.fork(),dr.protocolVersion!=null&&(fr.uint32(42),fr.string(dr.protocolVersion)),dr.agentVersion!=null&&(fr.uint32(50),fr.string(dr.agentVersion)),dr.publicKey!=null&&(fr.uint32(10),fr.bytes(dr.publicKey)),dr.listenAddrs!=null)for(const pr of dr.listenAddrs)fr.uint32(18),fr.bytes(pr);if(dr.observedAddr!=null&&(fr.uint32(34),fr.bytes(dr.observedAddr)),dr.protocols!=null)for(const pr of dr.protocols)fr.uint32(26),fr.string(pr);dr.signedPeerRecord!=null&&(fr.uint32(66),fr.bytes(dr.signedPeerRecord)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={listenAddrs:[],protocols:[]},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 5:hr.protocolVersion=dr.string();break;case 6:hr.agentVersion=dr.string();break;case 1:hr.publicKey=dr.bytes();break;case 2:hr.listenAddrs.push(dr.bytes());break;case 4:hr.observedAddr=dr.bytes();break;case 3:hr.protocols.push(dr.string());break;case 8:hr.signedPeerRecord=dr.bytes();break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(Identify$1||(Identify$1={}));const MAX_IDENTIFY_MESSAGE_SIZE=1024*8,defaultValues={protocolPrefix:"ipfs",timeout:6e4,maxInboundStreams:1,maxOutboundStreams:1,maxPushIncomingStreams:1,maxPushOutgoingStreams:1,maxObservedAddresses:10,maxIdentifyMessageSize:8192,runOnConnectionOpen:!0,runOnTransientConnection:!0};class Identify{identifyProtocolStr;identifyPushProtocolStr;host;started;timeout;peerId;peerStore;registrar;connectionManager;addressManager;maxInboundStreams;maxOutboundStreams;maxPushIncomingStreams;maxPushOutgoingStreams;maxIdentifyMessageSize;maxObservedAddresses;events;runOnTransientConnection;log;constructor(ar,dr={}){this.started=!1,this.peerId=ar.peerId,this.peerStore=ar.peerStore,this.registrar=ar.registrar,this.addressManager=ar.addressManager,this.connectionManager=ar.connectionManager,this.events=ar.events,this.log=ar.logger.forComponent("libp2p:identify"),this.identifyProtocolStr=`/${dr.protocolPrefix??defaultValues.protocolPrefix}/${MULTICODEC_IDENTIFY_PROTOCOL_NAME}/${MULTICODEC_IDENTIFY_PROTOCOL_VERSION}`,this.identifyPushProtocolStr=`/${dr.protocolPrefix??defaultValues.protocolPrefix}/${MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME}/${MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION}`,this.timeout=dr.timeout??defaultValues.timeout,this.maxInboundStreams=dr.maxInboundStreams??defaultValues.maxInboundStreams,this.maxOutboundStreams=dr.maxOutboundStreams??defaultValues.maxOutboundStreams,this.maxPushIncomingStreams=dr.maxPushIncomingStreams??defaultValues.maxPushIncomingStreams,this.maxPushOutgoingStreams=dr.maxPushOutgoingStreams??defaultValues.maxPushOutgoingStreams,this.maxIdentifyMessageSize=dr.maxIdentifyMessageSize??defaultValues.maxIdentifyMessageSize,this.maxObservedAddresses=dr.maxObservedAddresses??defaultValues.maxObservedAddresses,this.runOnTransientConnection=dr.runOnTransientConnection??defaultValues.runOnTransientConnection,this.host={protocolVersion:`${dr.protocolPrefix??defaultValues.protocolPrefix}/${IDENTIFY_PROTOCOL_VERSION}`,agentVersion:dr.agentVersion??`${ar.nodeInfo.name}/${ar.nodeInfo.version}`},(dr.runOnConnectionOpen??defaultValues.runOnConnectionOpen)&&ar.events.addEventListener("connection:open",fr=>{const hr=fr.detail;this.identify(hr).catch(pr=>{this.log.error("error during identify trigged by connection:open",pr)})}),ar.events.addEventListener("self:peer:update",fr=>{this.push().catch(hr=>{this.log.error(hr)})}),this.host.agentVersion===`${ar.nodeInfo.name}/${ar.nodeInfo.version}`&&(isNode||isElectronMain?this.host.agentVersion+=` UserAgent=${globalThis.process.version}`:(isBrowser||isWebWorker||isElectronRenderer||isReactNative)&&(this.host.agentVersion+=` UserAgent=${globalThis.navigator.userAgent}`))}isStarted(){return this.started}async start(){this.started||(await this.peerStore.merge(this.peerId,{metadata:{AgentVersion:fromString$1(this.host.agentVersion),ProtocolVersion:fromString$1(this.host.protocolVersion)}}),await this.registrar.handle(this.identifyProtocolStr,ar=>{this._handleIdentify(ar).catch(dr=>{this.log.error(dr)})},{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnTransientConnection:this.runOnTransientConnection}),await this.registrar.handle(this.identifyPushProtocolStr,ar=>{this._handlePush(ar).catch(dr=>{this.log.error(dr)})},{maxInboundStreams:this.maxPushIncomingStreams,maxOutboundStreams:this.maxPushOutgoingStreams,runOnTransientConnection:this.runOnTransientConnection}),this.started=!0)}async stop(){await this.registrar.unhandle(this.identifyProtocolStr),await this.registrar.unhandle(this.identifyPushProtocolStr),this.started=!1}async pushToConnections(ar){const dr=this.addressManager.getAddresses().map(wr=>wr.decapsulateCode(getProtocol("p2p").code)),fr=new PeerRecord({peerId:this.peerId,multiaddrs:dr}),hr=await RecordEnvelope.seal(fr,this.peerId),pr=this.registrar.getProtocols(),mr=await this.peerStore.get(this.peerId),gr=toString$2(mr.metadata.get("AgentVersion")??fromString$1(this.host.agentVersion)),yr=toString$2(mr.metadata.get("ProtocolVersion")??fromString$1(this.host.protocolVersion)),xr=ar.map(async wr=>{let br;const Sr=AbortSignal.timeout(this.timeout);setMaxListeners(1/0,Sr);try{br=await wr.newStream(this.identifyPushProtocolStr,{signal:Sr,runOnTransientConnection:this.runOnTransientConnection}),await pbStream(br,{maxDataLength:this.maxIdentifyMessageSize??MAX_IDENTIFY_MESSAGE_SIZE}).pb(Identify$1).write({listenAddrs:dr.map(Er=>Er.bytes),signedPeerRecord:hr.marshal(),protocols:pr,agentVersion:gr,protocolVersion:yr},{signal:Sr}),await br.close({signal:Sr})}catch(vr){this.log.error("could not push identify update to peer",vr),br?.abort(vr)}});await Promise.all(xr)}async push(){if(!this.isStarted())return;const ar=[];await Promise.all(this.connectionManager.getConnections().map(async dr=>{try{if(!(await this.peerStore.get(dr.remotePeer)).protocols.includes(this.identifyPushProtocolStr))return;ar.push(dr)}catch(fr){if(fr.code!==ERR_NOT_FOUND)throw fr}})),await this.pushToConnections(ar)}async _identify(ar,dr={}){let fr;if(dr.signal==null){const hr=AbortSignal.timeout(this.timeout);setMaxListeners(1/0,hr),dr={...dr,signal:hr}}try{fr=await ar.newStream(this.identifyProtocolStr,{...dr,runOnTransientConnection:this.runOnTransientConnection});const pr=await pbStream(fr,{maxDataLength:this.maxIdentifyMessageSize??MAX_IDENTIFY_MESSAGE_SIZE}).pb(Identify$1).read(dr);return await fr.close(dr),pr}catch(hr){throw this.log.error("error while reading identify message",hr),fr?.abort(hr),hr}}async identify(ar,dr={}){const fr=await this._identify(ar,dr),{publicKey:hr,protocols:pr,observedAddr:mr}=fr;if(hr==null)throw new CodeError$3("public key was missing from identify message","ERR_MISSING_PUBLIC_KEY");const gr=await peerIdFromKeys(hr);if(!ar.remotePeer.equals(gr))throw new CodeError$3("identified peer does not match the expected peer","ERR_INVALID_PEER");if(this.peerId.equals(gr))throw new CodeError$3("identified peer is our own peer id?","ERR_INVALID_PEER");const yr=getCleanMultiaddr(mr);return this.log("identify completed for peer %p and protocols %o",gr,pr),this.log("our observed address is %a",yr),yr!=null&&this.addressManager.getObservedAddrs().length<(this.maxObservedAddresses??1/0)&&(this.log("storing our observed address %a",yr),this.addressManager.addObservedAddr(yr)),this.#e(ar,fr)}async _handleIdentify(ar){const{connection:dr,stream:fr}=ar,hr=AbortSignal.timeout(this.timeout);setMaxListeners(1/0,hr);try{const pr=this.peerId.publicKey??new Uint8Array(0),mr=await this.peerStore.get(this.peerId),gr=this.addressManager.getAddresses().map(br=>br.decapsulateCode(getProtocol("p2p").code));let yr=mr.peerRecordEnvelope;if(gr.length>0&&yr==null){const br=new PeerRecord({peerId:this.peerId,multiaddrs:gr});yr=(await RecordEnvelope.seal(br,this.peerId)).marshal().subarray()}let xr=dr.remoteAddr.bytes;IP_OR_DOMAIN.matches(dr.remoteAddr)||(xr=void 0),await pbStream(fr).pb(Identify$1).write({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:pr,listenAddrs:gr.map(br=>br.bytes),signedPeerRecord:yr,observedAddr:xr,protocols:mr.protocols},{signal:hr}),await fr.close({signal:hr})}catch(pr){this.log.error("could not respond to identify request",pr),fr.abort(pr)}}async _handlePush(ar){const{connection:dr,stream:fr}=ar;try{if(this.peerId.equals(dr.remotePeer))throw new Error("received push from ourselves?");const hr={signal:AbortSignal.timeout(this.timeout)},mr=await pbStream(fr,{maxDataLength:this.maxIdentifyMessageSize??MAX_IDENTIFY_MESSAGE_SIZE}).pb(Identify$1).read(hr);await fr.close(hr),await this.#e(dr,mr)}catch(hr){this.log.error("received invalid message",hr),fr.abort(hr);return}this.log("handled push from %p",dr.remotePeer)}async#e(ar,dr){if(this.log("received identify from %p",ar.remotePeer),dr==null)throw new CodeError$3("message was null or undefined","ERR_INVALID_MESSAGE");const fr={};if(dr.listenAddrs.length>0&&(fr.addresses=dr.listenAddrs.map(mr=>({isCertified:!1,multiaddr:multiaddr(mr)}))),dr.protocols.length>0&&(fr.protocols=dr.protocols),dr.publicKey!=null&&(fr.publicKey=dr.publicKey,!(await peerIdFromKeys(dr.publicKey)).equals(ar.remotePeer)))throw new CodeError$3("public key did not match remote PeerId","ERR_INVALID_PUBLIC_KEY");let hr;if(dr.signedPeerRecord!=null){this.log("received signedPeerRecord from %p",ar.remotePeer);let mr=dr.signedPeerRecord;const gr=await RecordEnvelope.openAndCertify(mr,PeerRecord.DOMAIN);let yr=PeerRecord.createFromProtobuf(gr.payload);if(!yr.peerId.equals(gr.peerId))throw new CodeError$3("signing key does not match PeerId in the PeerRecord","ERR_INVALID_SIGNING_KEY");if(!ar.remotePeer.equals(yr.peerId))throw new CodeError$3("signing key does not match remote PeerId","ERR_INVALID_PEER_RECORD_KEY");let xr;try{xr=await this.peerStore.get(yr.peerId)}catch(wr){if(wr.code!=="ERR_NOT_FOUND")throw wr}if(xr!=null&&(fr.metadata=xr.metadata,xr.peerRecordEnvelope!=null)){const wr=await RecordEnvelope.createFromProtobuf(xr.peerRecordEnvelope),br=PeerRecord.createFromProtobuf(wr.payload);br.seqNumber>=yr.seqNumber&&(this.log("sequence number was lower or equal to existing sequence number - stored: %d received: %d",br.seqNumber,yr.seqNumber),yr=br,mr=xr.peerRecordEnvelope)}fr.peerRecordEnvelope=mr,fr.addresses=yr.multiaddrs.map(wr=>({isCertified:!0,multiaddr:wr})),hr={seq:yr.seqNumber,addresses:yr.multiaddrs}}else this.log("%p did not send a signed peer record",ar.remotePeer);if(this.log("patching %p with",ar.remotePeer,fr),await this.peerStore.patch(ar.remotePeer,fr),dr.agentVersion!=null||dr.protocolVersion!=null){const mr={};dr.agentVersion!=null&&(mr.AgentVersion=fromString$1(dr.agentVersion)),dr.protocolVersion!=null&&(mr.ProtocolVersion=fromString$1(dr.protocolVersion)),this.log("merging %p metadata",ar.remotePeer,mr),await this.peerStore.merge(ar.remotePeer,{metadata:mr})}const pr={peerId:ar.remotePeer,protocolVersion:dr.protocolVersion,agentVersion:dr.agentVersion,publicKey:dr.publicKey,listenAddrs:dr.listenAddrs.map(mr=>multiaddr(mr)),observedAddr:dr.observedAddr==null?void 0:multiaddr(dr.observedAddr),protocols:dr.protocols,signedPeerRecord:hr,connection:ar};return this.events.safeDispatchEvent("peer:identify",{detail:pr}),pr}}function getCleanMultiaddr(cr){if(cr!=null&&cr.length>0)try{return multiaddr(cr)}catch{}}function identify(cr={}){return ar=>new Identify(ar,cr)}const PROTOCOL_VERSION="0.0.1",PROTOCOL_NAME="fetch";var FetchRequest;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.identifier!=null&&dr.identifier!==""&&(fr.uint32(10),fr.string(dr.identifier)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={identifier:""},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.identifier=dr.string();break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(FetchRequest||(FetchRequest={}));var FetchResponse;(function(cr){let ar;(function(hr){hr.OK="OK",hr.NOT_FOUND="NOT_FOUND",hr.ERROR="ERROR"})(ar=cr.StatusCode||(cr.StatusCode={}));let dr;(function(hr){hr[hr.OK=0]="OK",hr[hr.NOT_FOUND=1]="NOT_FOUND",hr[hr.ERROR=2]="ERROR"})(dr||(dr={})),function(hr){hr.codec=()=>enumeration(dr)}(ar=cr.StatusCode||(cr.StatusCode={}));let fr;cr.codec=()=>(fr==null&&(fr=message((hr,pr,mr={})=>{mr.lengthDelimited!==!1&&pr.fork(),hr.status!=null&&dr[hr.status]!==0&&(pr.uint32(8),cr.StatusCode.codec().encode(hr.status,pr)),hr.data!=null&&hr.data.byteLength>0&&(pr.uint32(18),pr.bytes(hr.data)),mr.lengthDelimited!==!1&&pr.ldelim()},(hr,pr)=>{const mr={status:ar.OK,data:new Uint8Array(0)},gr=pr==null?hr.len:hr.pos+pr;for(;hr.pos<gr;){const yr=hr.uint32();switch(yr>>>3){case 1:mr.status=cr.StatusCode.codec().decode(hr);break;case 2:mr.data=hr.bytes();break;default:hr.skipType(yr&7);break}}return mr})),fr),cr.encode=hr=>encodeMessage(hr,cr.codec()),cr.decode=hr=>decodeMessage$1(hr,cr.codec())})(FetchResponse||(FetchResponse={}));const DEFAULT_TIMEOUT=1e4;class Fetch{protocol;components;lookupFunctions;started;init;log;constructor(ar,dr={}){this.log=ar.logger.forComponent("libp2p:fetch"),this.started=!1,this.components=ar,this.protocol=`/${dr.protocolPrefix??"libp2p"}/${PROTOCOL_NAME}/${PROTOCOL_VERSION}`,this.lookupFunctions=new Map,this.handleMessage=this.handleMessage.bind(this),this.init=dr}async start(){await this.components.registrar.handle(this.protocol,ar=>{this.handleMessage(ar).then(async()=>{await ar.stream.close()}).catch(dr=>{this.log.error(dr)})},{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}async fetch(ar,dr,fr={}){this.log("dialing %s to %p",this.protocol,ar);const hr=await this.components.connectionManager.openConnection(ar,fr);let pr=fr.signal,mr,gr=()=>{};if(pr==null){const yr=this.init.timeout??DEFAULT_TIMEOUT;this.log("using default timeout of %d ms",yr),pr=AbortSignal.timeout(yr),setMaxListeners(1/0,pr)}try{mr=await hr.newStream(this.protocol,{signal:pr}),gr=()=>{mr?.abort(new CodeError$3("fetch timeout",ERR_TIMEOUT))},pr.addEventListener("abort",gr,{once:!0}),this.log("fetch %s",dr);const yr=pbStream(mr);await yr.write({identifier:dr},FetchRequest,fr);const xr=await yr.read(FetchResponse,fr);switch(await yr.unwrap().close(fr),xr.status){case FetchResponse.StatusCode.OK:return this.log("received status for %s ok",dr),xr.data;case FetchResponse.StatusCode.NOT_FOUND:{this.log("received status for %s not found",dr);return}case FetchResponse.StatusCode.ERROR:{this.log("received status for %s error",dr);const wr=toString$2(xr.data);throw new CodeError$3("Error in fetch protocol response: "+wr,ERR_INVALID_PARAMETERS)}default:throw this.log("received status for %s unknown",dr),new CodeError$3("Unknown response status",ERR_INVALID_MESSAGE)}}catch(yr){throw mr?.abort(yr),yr}finally{pr.removeEventListener("abort",gr),mr!=null&&await mr.close()}}async handleMessage(ar){const{stream:dr}=ar,fr=AbortSignal.timeout(this.init.timeout??DEFAULT_TIMEOUT);try{const hr=pbStream(dr),pr=await hr.read(FetchRequest,{signal:fr});let mr;const gr=this._getLookupFunction(pr.identifier);if(gr!=null){this.log("look up data with identifier %s",pr.identifier);const yr=await gr(pr.identifier);yr!=null?(this.log("sending status for %s ok",pr.identifier),mr={status:FetchResponse.StatusCode.OK,data:yr}):(this.log("sending status for %s not found",pr.identifier),mr={status:FetchResponse.StatusCode.NOT_FOUND,data:new Uint8Array(0)})}else{this.log("sending status for %s error",pr.identifier);const yr=fromString$1(`No lookup function registered for key: ${pr.identifier}`);mr={status:FetchResponse.StatusCode.ERROR,data:yr}}await hr.write(mr,FetchResponse,{signal:fr}),await hr.unwrap().close({signal:fr})}catch(hr){this.log("error answering fetch request",hr),dr.abort(hr)}}_getLookupFunction(ar){for(const dr of this.lookupFunctions.keys())if(ar.startsWith(dr))return this.lookupFunctions.get(dr)}registerLookupFunction(ar,dr){if(this.lookupFunctions.has(ar))throw new CodeError$3(`Fetch protocol handler for key prefix '${ar}' already registered`,"ERR_KEY_ALREADY_EXISTS");this.lookupFunctions.set(ar,dr)}unregisterLookupFunction(ar,dr){dr!=null&&this.lookupFunctions.get(ar)!==dr||this.lookupFunctions.delete(ar)}}function fetch$1(cr={}){return ar=>new Fetch(ar,cr)}const CIRCUIT_PROTO_CODE=290,RELAY_RENDEZVOUS_NS="/libp2p/relay",DEFAULT_RESERVATION_CONCURRENCY=1,RELAY_TAG="circuit-relay-relay";BigInt(1<<17);const RELAY_V2_HOP_CODEC="/libp2p/circuit/relay/0.2.0/hop",RELAY_V2_STOP_CODEC="/libp2p/circuit/relay/0.2.0/stop",MAX_CONNECTIONS$2=300,ERR_RELAYED_DIAL="ERR_RELAYED_DIAL",ERR_HOP_REQUEST_FAILED="ERR_HOP_REQUEST_FAILED";var HopMessage;(function(cr){(function(fr){fr.RESERVE="RESERVE",fr.CONNECT="CONNECT",fr.STATUS="STATUS"})(cr.Type||(cr.Type={}));let ar;(function(fr){fr[fr.RESERVE=0]="RESERVE",fr[fr.CONNECT=1]="CONNECT",fr[fr.STATUS=2]="STATUS"})(ar||(ar={})),function(fr){fr.codec=()=>enumeration(ar)}(cr.Type||(cr.Type={}));let dr;cr.codec=()=>(dr==null&&(dr=message((fr,hr,pr={})=>{pr.lengthDelimited!==!1&&hr.fork(),fr.type!=null&&(hr.uint32(8),cr.Type.codec().encode(fr.type,hr)),fr.peer!=null&&(hr.uint32(18),Peer.codec().encode(fr.peer,hr)),fr.reservation!=null&&(hr.uint32(26),Reservation.codec().encode(fr.reservation,hr)),fr.limit!=null&&(hr.uint32(34),Limit.codec().encode(fr.limit,hr)),fr.status!=null&&(hr.uint32(40),Status.codec().encode(fr.status,hr)),pr.lengthDelimited!==!1&&hr.ldelim()},(fr,hr)=>{const pr={},mr=hr==null?fr.len:fr.pos+hr;for(;fr.pos<mr;){const gr=fr.uint32();switch(gr>>>3){case 1:pr.type=cr.Type.codec().decode(fr);break;case 2:pr.peer=Peer.codec().decode(fr,fr.uint32());break;case 3:pr.reservation=Reservation.codec().decode(fr,fr.uint32());break;case 4:pr.limit=Limit.codec().decode(fr,fr.uint32());break;case 5:pr.status=Status.codec().decode(fr);break;default:fr.skipType(gr&7);break}}return pr})),dr),cr.encode=fr=>encodeMessage(fr,cr.codec()),cr.decode=fr=>decodeMessage$1(fr,cr.codec())})(HopMessage||(HopMessage={}));var StopMessage;(function(cr){(function(fr){fr.CONNECT="CONNECT",fr.STATUS="STATUS"})(cr.Type||(cr.Type={}));let ar;(function(fr){fr[fr.CONNECT=0]="CONNECT",fr[fr.STATUS=1]="STATUS"})(ar||(ar={})),function(fr){fr.codec=()=>enumeration(ar)}(cr.Type||(cr.Type={}));let dr;cr.codec=()=>(dr==null&&(dr=message((fr,hr,pr={})=>{pr.lengthDelimited!==!1&&hr.fork(),fr.type!=null&&(hr.uint32(8),cr.Type.codec().encode(fr.type,hr)),fr.peer!=null&&(hr.uint32(18),Peer.codec().encode(fr.peer,hr)),fr.limit!=null&&(hr.uint32(26),Limit.codec().encode(fr.limit,hr)),fr.status!=null&&(hr.uint32(32),Status.codec().encode(fr.status,hr)),pr.lengthDelimited!==!1&&hr.ldelim()},(fr,hr)=>{const pr={},mr=hr==null?fr.len:fr.pos+hr;for(;fr.pos<mr;){const gr=fr.uint32();switch(gr>>>3){case 1:pr.type=cr.Type.codec().decode(fr);break;case 2:pr.peer=Peer.codec().decode(fr,fr.uint32());break;case 3:pr.limit=Limit.codec().decode(fr,fr.uint32());break;case 4:pr.status=Status.codec().decode(fr);break;default:fr.skipType(gr&7);break}}return pr})),dr),cr.encode=fr=>encodeMessage(fr,cr.codec()),cr.decode=fr=>decodeMessage$1(fr,cr.codec())})(StopMessage||(StopMessage={}));var Peer;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{if(hr.lengthDelimited!==!1&&fr.fork(),dr.id!=null&&dr.id.byteLength>0&&(fr.uint32(10),fr.bytes(dr.id)),dr.addrs!=null)for(const pr of dr.addrs)fr.uint32(18),fr.bytes(pr);hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={id:new Uint8Array(0),addrs:[]},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.id=dr.bytes();break;case 2:hr.addrs.push(dr.bytes());break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(Peer||(Peer={}));var Reservation;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{if(hr.lengthDelimited!==!1&&fr.fork(),dr.expire!=null&&dr.expire!==0n&&(fr.uint32(8),fr.uint64(dr.expire)),dr.addrs!=null)for(const pr of dr.addrs)fr.uint32(18),fr.bytes(pr);dr.voucher!=null&&(fr.uint32(26),fr.bytes(dr.voucher)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={expire:0n,addrs:[]},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.expire=dr.uint64();break;case 2:hr.addrs.push(dr.bytes());break;case 3:hr.voucher=dr.bytes();break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(Reservation||(Reservation={}));var Limit;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.duration!=null&&(fr.uint32(8),fr.uint32(dr.duration)),dr.data!=null&&(fr.uint32(16),fr.uint64(dr.data)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.duration=dr.uint32();break;case 2:hr.data=dr.uint64();break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(Limit||(Limit={}));var Status;(function(cr){cr.UNUSED="UNUSED",cr.OK="OK",cr.RESERVATION_REFUSED="RESERVATION_REFUSED",cr.RESOURCE_LIMIT_EXCEEDED="RESOURCE_LIMIT_EXCEEDED",cr.PERMISSION_DENIED="PERMISSION_DENIED",cr.CONNECTION_FAILED="CONNECTION_FAILED",cr.NO_RESERVATION="NO_RESERVATION",cr.MALFORMED_MESSAGE="MALFORMED_MESSAGE",cr.UNEXPECTED_MESSAGE="UNEXPECTED_MESSAGE"})(Status||(Status={}));var __StatusValues;(function(cr){cr[cr.UNUSED=0]="UNUSED",cr[cr.OK=100]="OK",cr[cr.RESERVATION_REFUSED=200]="RESERVATION_REFUSED",cr[cr.RESOURCE_LIMIT_EXCEEDED=201]="RESOURCE_LIMIT_EXCEEDED",cr[cr.PERMISSION_DENIED=202]="PERMISSION_DENIED",cr[cr.CONNECTION_FAILED=203]="CONNECTION_FAILED",cr[cr.NO_RESERVATION=204]="NO_RESERVATION",cr[cr.MALFORMED_MESSAGE=400]="MALFORMED_MESSAGE",cr[cr.UNEXPECTED_MESSAGE=401]="UNEXPECTED_MESSAGE"})(__StatusValues||(__StatusValues={}));(function(cr){cr.codec=()=>enumeration(__StatusValues)})(Status||(Status={}));var ReservationVoucher;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.relay!=null&&dr.relay.byteLength>0&&(fr.uint32(10),fr.bytes(dr.relay)),dr.peer!=null&&dr.peer.byteLength>0&&(fr.uint32(18),fr.bytes(dr.peer)),dr.expiration!=null&&dr.expiration!==0n&&(fr.uint32(24),fr.uint64(dr.expiration)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={relay:new Uint8Array(0),peer:new Uint8Array(0),expiration:0n},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.relay=dr.bytes();break;case 2:hr.peer=dr.bytes();break;case 3:hr.expiration=dr.uint64();break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(ReservationVoucher||(ReservationVoucher={}));async function namespaceToCid(cr){const ar=new TextEncoder().encode(cr),dr=await sha256$2.digest(ar);return CID$1.createV0(dr)}function getExpirationMilliseconds(cr){const ar=cr*BigInt(1e3),dr=new Date().getTime();return Number(ar-BigInt(dr))}class RelayDiscovery extends TypedEventEmitter{peerId;peerStore;contentRouting;registrar;started;topologyId;log;constructor(ar){super(),this.log=ar.logger.forComponent("libp2p:circuit-relay:discover-relays"),this.started=!1,this.peerId=ar.peerId,this.peerStore=ar.peerStore,this.contentRouting=ar.contentRouting,this.registrar=ar.registrar}isStarted(){return this.started}async start(){this.topologyId=await this.registrar.register(RELAY_V2_HOP_CODEC,{notifyOnTransient:!0,onConnect:ar=>{this.safeDispatchEvent("relay:discover",{detail:ar})}}),this.started=!0}afterStart(){this.discover().catch(ar=>{this.log.error("error discovering relays",ar)})}stop(){this.topologyId!=null&&this.registrar.unregister(this.topologyId),this.started=!1}async discover(){this.log("searching peer store for relays");const ar=await this.peerStore.all({filters:[dr=>dr.protocols.includes(RELAY_V2_HOP_CODEC)],orders:[()=>Math.random()<.5?1:-1]});for(const dr of ar)this.log("found relay peer %p in content peer store",dr.id),this.safeDispatchEvent("relay:discover",{detail:dr.id});this.log("found %d relay peers in peer store",ar.length);try{this.log("searching content routing for relays");const dr=await namespaceToCid(RELAY_RENDEZVOUS_NS);let fr=0;for await(const hr of this.contentRouting.findProviders(dr))if(hr.multiaddrs.length>0&&!hr.id.equals(this.peerId)){const pr=hr.id;fr++,await this.peerStore.merge(pr,{multiaddrs:hr.multiaddrs}),this.log("found relay peer %p in content routing",pr),this.safeDispatchEvent("relay:discover",{detail:pr})}this.log("found %d relay peers in content routing",fr)}catch(dr){this.log.error("failed when finding relays on the network",dr)}}}const REFRESH_WINDOW=60*1e3*10,REFRESH_TIMEOUT=60*1e3*5,REFRESH_TIMEOUT_MIN=30*1e3;class ReservationStore extends TypedEventEmitter{peerId;connectionManager;transportManager;peerStore;events;reserveQueue;reservations;maxDiscoveredRelays;maxReservationQueueLength;reservationCompletionTimeout;started;log;constructor(ar,dr){super(),this.log=ar.logger.forComponent("libp2p:circuit-relay:transport:reservation-store"),this.peerId=ar.peerId,this.connectionManager=ar.connectionManager,this.transportManager=ar.transportManager,this.peerStore=ar.peerStore,this.events=ar.events,this.reservations=new PeerMap,this.maxDiscoveredRelays=dr?.discoverRelays??0,this.maxReservationQueueLength=dr?.maxReservationQueueLength??100,this.reservationCompletionTimeout=dr?.reservationCompletionTimeout??1e4,this.started=!1,this.reserveQueue=new PeerQueue({concurrency:dr?.reservationConcurrency??DEFAULT_RESERVATION_CONCURRENCY,metricName:"libp2p_relay_reservation_queue",metrics:ar.metrics}),this.events.addEventListener("peer:disconnect",fr=>{this.#t(fr.detail)})}isStarted(){return this.started}start(){this.started=!0}stop(){this.reserveQueue.clear(),this.reservations.forEach(({timeout:ar})=>{clearTimeout(ar)}),this.reservations.clear(),this.started=!1}async addRelay(ar,dr){if(this.peerId.equals(ar)){this.log("not trying to use self as relay");return}if(this.reserveQueue.size>this.maxReservationQueueLength){this.log("not adding relay as the queue is full");return}if(this.reserveQueue.has(ar)){this.log("relay peer is already in the reservation queue");return}this.log("add relay %p",ar),await this.reserveQueue.add(async()=>{try{const fr=this.reservations.get(ar);if(fr!=null){if(getExpirationMilliseconds(fr.reservation.expire)>REFRESH_WINDOW){this.log("already have reservation on relay peer %p and it expires in more than 10 minutes",ar);return}clearTimeout(fr.timeout),this.reservations.delete(ar)}if(dr==="discovered"&&[...this.reservations.values()].reduce((wr,br)=>(br.type==="discovered"&&wr++,wr),0)>=this.maxDiscoveredRelays){this.log("already have enough discovered relays");return}const hr=AbortSignal.timeout(this.reservationCompletionTimeout),pr=await this.connectionManager.openConnection(ar,{signal:hr});if(pr.remoteAddr.protoNames().includes("p2p-circuit")){this.log("not creating reservation over relayed connection");return}const mr=await this.#e(pr,{signal:hr});this.log("created reservation on relay peer %p",ar);const gr=getExpirationMilliseconds(mr.expire),yr=Math.min(Math.max(gr-REFRESH_TIMEOUT,REFRESH_TIMEOUT_MIN),Math.pow(2,31)-1),xr=setTimeout(()=>{this.addRelay(ar,dr).catch(wr=>{this.log.error("could not refresh reservation to relay %p",ar,wr)})},yr);this.reservations.set(ar,{timeout:xr,reservation:mr,type:dr}),await this.peerStore.merge(ar,{tags:{[RELAY_TAG]:{value:1,ttl:gr}}}),await this.transportManager.listen([multiaddr(`/p2p/${ar.toString()}/p2p-circuit`)])}catch(fr){this.log.error("could not reserve slot on %p",ar,fr);const hr=this.reservations.get(ar);hr!=null&&clearTimeout(hr.timeout),this.reservations.delete(ar)}},{peerId:ar})}hasReservation(ar){return this.reservations.has(ar)}getReservation(ar){return this.reservations.get(ar)?.reservation}async#e(ar,dr){dr.signal?.throwIfAborted(),this.log("requesting reservation from %p",ar.remotePeer);const fr=await ar.newStream(RELAY_V2_HOP_CODEC,dr),pr=pbStream(fr).pb(HopMessage);await pr.write({type:HopMessage.Type.RESERVE},dr);let mr;try{mr=await pr.read(dr)}catch(yr){throw this.log.error("error parsing reserve message response from %p because",ar.remotePeer,yr),fr.abort(yr),yr}finally{await fr.close()}if(mr.status===Status.OK&&mr.reservation!=null){let yr=!1;const xr=ar.remoteAddr.bytes;for(const wr of mr.reservation.addrs)if(equals$1(xr,wr)){yr=!0;break}return yr||mr.reservation.addrs.push(xr),mr.reservation}const gr=`reservation failed with status ${mr.status??"undefined"}`;throw this.log.error(gr),new Error(gr)}#t(ar){const dr=this.reservations.get(ar);dr!=null&&(this.log("connection to relay %p closed, removing reservation from local store",ar),clearTimeout(dr.timeout),this.reservations.delete(ar),this.safeDispatchEvent("relay:removed",{detail:ar}),this.reservations.size<this.maxDiscoveredRelays&&(this.log("not enough relays %d/%d",this.reservations.size,this.maxDiscoveredRelays),this.safeDispatchEvent("relay:not-enough-relays",{})))}}function streamToMaConnection(cr){const{stream:ar,remoteAddr:dr,logger:fr}=cr,hr=fr.forComponent("libp2p:stream:converter");let pr=!1,mr=!1;const gr=ar.close.bind(ar);ar.close=async Sr=>{await gr(Sr),br(!0)};const yr=ar.abort.bind(ar);ar.abort=Sr=>{yr(Sr),br(!0)};const xr=ar.sink.bind(ar);ar.sink=async Sr=>{try{await xr(Sr)}catch(vr){vr.type!=="aborted"&&hr.error("%s error in sink",dr,vr)}finally{mr=!0,br()}};const wr={log:hr,sink:ar.sink,source:async function*(){try{for await(const Sr of ar.source)Sr instanceof Uint8Array?yield Sr:yield*Sr}finally{pr=!0,br()}}(),remoteAddr:dr,timeline:{open:Date.now(),close:void 0},close:ar.close,abort:ar.abort};function br(Sr){Sr===!0&&(pr=!0,mr=!0),pr&&mr&&wr.timeline.close==null&&(wr.timeline.close=Date.now())}return wr}const DNS4=base("dns4"),DNS6=base("dns6"),DNSADDR=base("dnsaddr"),DNS=or(base("dns"),DNSADDR,DNS4,DNS6),IP=or(base("ip4"),base("ip6")),TCP=or(and(IP,base("tcp")),and(DNS,base("tcp"))),UDP=and(IP,base("udp")),UTP=and(UDP,base("utp")),QUIC=and(UDP,base("quic")),QUICV1=and(UDP,base("quic-v1")),_WebSockets=or(and(TCP,base("ws")),and(DNS,base("ws"))),WebSockets$1=or(and(_WebSockets,base("p2p")),_WebSockets),_WebSocketsSecure=or(and(TCP,base("wss")),and(DNS,base("wss")),and(TCP,base("tls"),base("ws")),and(DNS,base("tls"),base("ws"))),WebSocketsSecure=or(and(_WebSocketsSecure,base("p2p")),_WebSocketsSecure),HTTP=or(and(TCP,base("http")),and(IP,base("http")),and(DNS,base("http"))),HTTPS=or(and(TCP,base("https")),and(IP,base("https")),and(DNS,base("https"))),_WebRTCDirect=and(UDP,base("webrtc-direct"),base("certhash")),WebRTCDirect=or(and(_WebRTCDirect,base("p2p")),_WebRTCDirect),_WebTransport=and(QUICV1,base("webtransport"),base("certhash"),base("certhash")),WebTransport=or(and(_WebTransport,base("p2p")),_WebTransport),P2PWebRTCStar=or(and(WebSockets$1,base("p2p-webrtc-star"),base("p2p")),and(WebSocketsSecure,base("p2p-webrtc-star"),base("p2p")),and(WebSockets$1,base("p2p-webrtc-star")),and(WebSocketsSecure,base("p2p-webrtc-star"))),P2PWebRTCDirect=or(and(HTTP,base("p2p-webrtc-direct"),base("p2p")),and(HTTPS,base("p2p-webrtc-direct"),base("p2p")),and(HTTP,base("p2p-webrtc-direct")),and(HTTPS,base("p2p-webrtc-direct"))),Reliable=or(_WebSockets,_WebSocketsSecure,HTTP,HTTPS,P2PWebRTCStar,P2PWebRTCDirect,TCP,UTP,QUIC,DNS,WebRTCDirect,WebTransport),_P2P=or(and(Reliable,base("p2p")),P2PWebRTCStar,P2PWebRTCDirect,WebRTCDirect,WebTransport,base("p2p")),_Circuit=or(and(_P2P,base("p2p-circuit"),_P2P),and(_P2P,base("p2p-circuit")),and(base("p2p-circuit"),_P2P),and(Reliable,base("p2p-circuit")),and(base("p2p-circuit"),Reliable),base("p2p-circuit")),CircuitRecursive=()=>or(and(_Circuit,CircuitRecursive),_Circuit),Circuit=CircuitRecursive(),P2P=or(and(Circuit,_P2P,Circuit),and(_P2P,Circuit),and(Circuit,_P2P),Circuit,_P2P);function makeMatchesFunction(cr){function ar(dr){let fr;try{fr=multiaddr(dr)}catch{return!1}const hr=cr(fr.protoNames());return hr===null?!1:hr===!0||hr===!1?hr:hr.length===0}return ar}function and(...cr){function ar(dr){if(dr.length<cr.length)return null;let fr=dr;return cr.some(hr=>(fr=typeof hr=="function"?hr().partialMatch(dr):hr.partialMatch(dr),Array.isArray(fr)&&(dr=fr),fr===null)),fr}return{toString:function(){return"{ "+cr.join(" ")+" }"},input:cr,matches:makeMatchesFunction(ar),partialMatch:ar}}function or(...cr){function ar(fr){let hr=null;return cr.some(pr=>{const mr=typeof pr=="function"?pr().partialMatch(fr):pr.partialMatch(fr);return mr!=null?(hr=mr,!0):!1}),hr}return{toString:function(){return"{ "+cr.join(" ")+" }"},input:cr,matches:makeMatchesFunction(ar),partialMatch:ar}}function base(cr){const ar=cr;function dr(hr){let pr;try{pr=multiaddr(hr)}catch{return!1}const mr=pr.protoNames();return mr.length===1&&mr[0]===ar}function fr(hr){return hr.length===0?null:hr[0]===ar?hr.slice(1):null}return{toString:function(){return ar},matches:dr,partialMatch:fr}}class CircuitRelayTransportListener extends TypedEventEmitter{connectionManager;relayStore;listeningAddrs;log;constructor(ar){super(),this.log=ar.logger.forComponent("libp2p:circuit-relay:transport:listener"),this.connectionManager=ar.connectionManager,this.relayStore=ar.relayStore,this.listeningAddrs=new PeerMap,this.relayStore.addEventListener("relay:removed",this._onRemoveRelayPeer)}_onRemoveRelayPeer=ar=>{this.#e(ar.detail)};async listen(ar){this.log("listen on %a",ar);const dr=ar.decapsulate("/p2p-circuit"),fr=await this.connectionManager.openConnection(dr);if(!this.relayStore.hasReservation(fr.remotePeer)){this.log("making reservation on peer %p",fr.remotePeer),await this.relayStore.addRelay(fr.remotePeer,"configured");return}const hr=this.relayStore.getReservation(fr.remotePeer);if(hr==null)throw new CodeError$3("Did not have reservation after making reservation","ERR_NO_RESERVATION");if(this.listeningAddrs.has(fr.remotePeer)){this.log("already listening on relay %p",fr.remotePeer);return}this.listeningAddrs.set(fr.remotePeer,hr.addrs.map(pr=>multiaddr(pr).encapsulate("/p2p-circuit"))),this.safeDispatchEvent("listening",{})}getAddrs(){return[...this.listeningAddrs.values()].flat()}async close(){}#e(ar){const dr=this.listeningAddrs.has(ar);this.log("relay peer removed %p - had reservation",ar,dr),this.listeningAddrs.delete(ar),dr&&(this.log.trace("removing relay event listener for peer %p",ar),this.relayStore.removeEventListener("relay:removed",this._onRemoveRelayPeer),this.safeDispatchEvent("close",{}))}}function createListener$1(cr){return new CircuitRelayTransportListener(cr)}const isValidStop=cr=>{if(cr.peer==null)return!1;try{cr.peer.addrs.forEach(multiaddr)}catch{return!1}return!0},defaults={maxInboundStopStreams:MAX_CONNECTIONS$2,maxOutboundStopStreams:MAX_CONNECTIONS$2,stopTimeout:3e4};class CircuitRelayTransport{discovery;registrar;peerStore;connectionManager;transportManager;peerId;upgrader;addressManager;connectionGater;reservationStore;logger;maxInboundStopStreams;maxOutboundStopStreams;stopTimeout;started;log;constructor(ar,dr){this.log=ar.logger.forComponent("libp2p:circuit-relay:transport"),this.registrar=ar.registrar,this.peerStore=ar.peerStore,this.connectionManager=ar.connectionManager,this.transportManager=ar.transportManager,this.logger=ar.logger,this.peerId=ar.peerId,this.upgrader=ar.upgrader,this.addressManager=ar.addressManager,this.connectionGater=ar.connectionGater,this.maxInboundStopStreams=dr.maxInboundStopStreams??defaults.maxInboundStopStreams,this.maxOutboundStopStreams=dr.maxOutboundStopStreams??defaults.maxOutboundStopStreams,this.stopTimeout=dr.stopTimeout??defaults.stopTimeout,dr.discoverRelays!=null&&dr.discoverRelays>0&&(this.discovery=new RelayDiscovery(ar),this.discovery.addEventListener("relay:discover",fr=>{this.reservationStore.addRelay(fr.detail,"discovered").catch(hr=>{this.log.error("could not add discovered relay %p",fr.detail,hr)})})),this.reservationStore=new ReservationStore(ar,dr),this.reservationStore.addEventListener("relay:not-enough-relays",()=>{this.discovery?.discover().catch(fr=>{this.log.error("could not discover relays",fr)})}),this.started=!1}isStarted(){return this.started}async start(){this.reservationStore.start(),await this.registrar.handle(RELAY_V2_STOP_CODEC,ar=>{this.onStop(ar).catch(dr=>{this.log.error("error while handling STOP protocol",dr),ar.stream.abort(dr)})},{maxInboundStreams:this.maxInboundStopStreams,maxOutboundStreams:this.maxOutboundStopStreams,runOnTransientConnection:!0}),await this.discovery?.start(),this.started=!0}afterStart(){this.discovery?.afterStart()}async stop(){this.discovery?.stop(),this.reservationStore.stop(),await this.registrar.unhandle(RELAY_V2_STOP_CODEC),this.started=!1}[transportSymbol]=!0;[Symbol.toStringTag]="libp2p/circuit-relay-v2";async dial(ar,dr={}){if(ar.protoCodes().filter(Er=>Er===CIRCUIT_PROTO_CODE).length!==1){const Er="Invalid circuit relay address";throw this.log.error(Er,ar),new CodeError$3(Er,ERR_RELAYED_DIAL)}const fr=ar.toString().split("/p2p-circuit"),hr=multiaddr(fr[0]),pr=multiaddr(fr[fr.length-1]),mr=hr.getPeerId(),gr=pr.getPeerId();if(mr==null||gr==null){const Er=`Circuit relay dial to ${ar.toString()} failed as address did not have peer ids`;throw this.log.error(Er),new CodeError$3(Er,ERR_RELAYED_DIAL)}const yr=peerIdFromString(mr),xr=peerIdFromString(gr);let wr=!1,Sr=this.connectionManager.getConnections(yr)[0];Sr==null&&(await this.peerStore.merge(yr,{multiaddrs:[hr]}),Sr=await this.connectionManager.openConnection(yr,dr),wr=!0);let vr;try{return vr=await Sr.newStream(RELAY_V2_HOP_CODEC),await this.connectV2({stream:vr,connection:Sr,destinationPeer:xr,destinationAddr:pr,relayAddr:hr,ma:ar,disconnectOnFailure:wr})}catch(Er){throw this.log.error("circuit relay dial to destination %p via relay %p failed",xr,yr,Er),vr?.abort(Er),wr&&await Sr.close(),Er}}async connectV2({stream:ar,connection:dr,destinationPeer:fr,destinationAddr:hr,relayAddr:pr,ma:mr,disconnectOnFailure:gr}){try{const yr=pbStream(ar),xr=yr.pb(HopMessage);await xr.write({type:HopMessage.Type.CONNECT,peer:{id:fr.toBytes(),addrs:[multiaddr(hr).bytes]}});const wr=await xr.read();if(wr.status!==Status.OK)throw new CodeError$3(`failed to connect via relay with status ${wr?.status?.toString()??"undefined"}`,ERR_HOP_REQUEST_FAILED);const br=streamToMaConnection({stream:yr.unwrap(),remoteAddr:mr,localAddr:pr.encapsulate(`/p2p-circuit/p2p/${this.peerId.toString()}`),logger:this.logger});return this.log("new outbound transient connection %a",br.remoteAddr),await this.upgrader.upgradeOutbound(br,{transient:!0})}catch(yr){throw this.log.error(`Circuit relay dial to destination ${fr.toString()} via relay ${dr.remotePeer.toString()} failed`,yr),gr&&await dr.close(),yr}}createListener(ar){return createListener$1({connectionManager:this.connectionManager,relayStore:this.reservationStore,logger:this.logger})}filter(ar){return ar=Array.isArray(ar)?ar:[ar],ar.filter(dr=>Circuit.matches(dr))}async onStop({connection:ar,stream:dr}){if(!this.reservationStore.hasReservation(ar.remotePeer))try{this.log("dialed via relay we did not have a reservation on, start listening on that relay address"),await this.transportManager.listen([ar.remoteAddr.encapsulate("/p2p-circuit")])}catch(wr){this.log.error("failed to listen on a relay peer we were dialed via but did not have a reservation on",wr)}const fr=AbortSignal.timeout(this.stopTimeout),hr=pbStream(dr).pb(StopMessage),pr=await hr.read({signal:fr});if(this.log("new circuit relay v2 stop stream from %p with type %s",ar.remotePeer,pr.type),pr?.type===void 0){this.log.error("type was missing from circuit v2 stop protocol request from %s",ar.remotePeer),await hr.write({type:StopMessage.Type.STATUS,status:Status.MALFORMED_MESSAGE},{signal:fr}),await dr.close();return}if(pr.type!==StopMessage.Type.CONNECT){this.log.error("invalid stop connect request via peer %p",ar.remotePeer),await hr.write({type:StopMessage.Type.STATUS,status:Status.UNEXPECTED_MESSAGE},{signal:fr}),await dr.close();return}if(!isValidStop(pr)){this.log.error("invalid stop connect request via peer %p",ar.remotePeer),await hr.write({type:StopMessage.Type.STATUS,status:Status.MALFORMED_MESSAGE},{signal:fr}),await dr.close();return}const mr=peerIdFromBytes(pr.peer.id);if(await this.connectionGater.denyInboundRelayedConnection?.(ar.remotePeer,mr)===!0){this.log.error("connection gater denied inbound relayed connection from %p",ar.remotePeer),await hr.write({type:StopMessage.Type.STATUS,status:Status.PERMISSION_DENIED},{signal:fr}),await dr.close();return}this.log.trace("sending success response to %p",ar.remotePeer),await hr.write({type:StopMessage.Type.STATUS,status:Status.OK},{signal:fr});const gr=ar.remoteAddr.encapsulate(`/p2p-circuit/p2p/${mr.toString()}`),yr=this.addressManager.getAddresses()[0],xr=streamToMaConnection({stream:hr.unwrap().unwrap(),remoteAddr:gr,localAddr:yr,logger:this.logger});this.log("new inbound transient connection %a",xr.remoteAddr),await this.upgrader.upgradeInbound(xr,{transient:!0}),this.log("%s connection %a upgraded","inbound",xr.remoteAddr)}}function circuitRelayTransport(cr={}){return ar=>new CircuitRelayTransport(ar,cr)}function extractSNI(cr){let ar;try{ar=getProtocol("sni").code}catch{return null}for(const[dr,fr]of cr)if(dr===ar&&fr!==void 0)return fr;return null}function hasTLS(cr){return cr.some(([ar,dr])=>ar===getProtocol("tls").code)}function interpretNext(cr,ar,dr){const fr=interpreters[getProtocol(cr).name];if(fr===void 0)throw new Error(`Can't interpret protocol ${getProtocol(cr).name}`);const hr=fr(ar,dr);return cr===getProtocol("ip6").code?`[${hr}]`:hr}const interpreters={ip4:(cr,ar)=>cr,ip6:(cr,ar)=>ar.length===0?cr:`[${cr}]`,tcp:(cr,ar)=>{const dr=ar.pop();if(dr===void 0)throw new Error("Unexpected end of multiaddr");return`tcp://${interpretNext(dr[0],dr[1]??"",ar)}:${cr}`},udp:(cr,ar)=>{const dr=ar.pop();if(dr===void 0)throw new Error("Unexpected end of multiaddr");return`udp://${interpretNext(dr[0],dr[1]??"",ar)}:${cr}`},dnsaddr:(cr,ar)=>cr,dns4:(cr,ar)=>cr,dns6:(cr,ar)=>cr,dns:(cr,ar)=>cr,ipfs:(cr,ar)=>{const dr=ar.pop();if(dr===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(dr[0],dr[1]??"",ar)}/ipfs/${cr}`},p2p:(cr,ar)=>{const dr=ar.pop();if(dr===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(dr[0],dr[1]??"",ar)}/p2p/${cr}`},http:(cr,ar)=>{const dr=hasTLS(ar),fr=extractSNI(ar);if(dr&&fr!==null)return`https://${fr}`;const hr=dr?"https://":"http://",pr=ar.pop();if(pr===void 0)throw new Error("Unexpected end of multiaddr");let mr=interpretNext(pr[0],pr[1]??"",ar);return mr=mr.replace("tcp://",""),`${hr}${mr}`},tls:(cr,ar)=>{const dr=ar.pop();if(dr===void 0)throw new Error("Unexpected end of multiaddr");return interpretNext(dr[0],dr[1]??"",ar)},sni:(cr,ar)=>{const dr=ar.pop();if(dr===void 0)throw new Error("Unexpected end of multiaddr");return interpretNext(dr[0],dr[1]??"",ar)},https:(cr,ar)=>{const dr=ar.pop();if(dr===void 0)throw new Error("Unexpected end of multiaddr");let fr=interpretNext(dr[0],dr[1]??"",ar);return fr=fr.replace("tcp://",""),`https://${fr}`},ws:(cr,ar)=>{const dr=hasTLS(ar),fr=extractSNI(ar);if(dr&&fr!==null)return`wss://${fr}`;const hr=dr?"wss://":"ws://",pr=ar.pop();if(pr===void 0)throw new Error("Unexpected end of multiaddr");let mr=interpretNext(pr[0],pr[1]??"",ar);return mr=mr.replace("tcp://",""),`${hr}${mr}`},wss:(cr,ar)=>{const dr=ar.pop();if(dr===void 0)throw new Error("Unexpected end of multiaddr");let fr=interpretNext(dr[0],dr[1]??"",ar);return fr=fr.replace("tcp://",""),`wss://${fr}`},"p2p-websocket-star":(cr,ar)=>{const dr=ar.pop();if(dr===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(dr[0],dr[1]??"",ar)}/p2p-websocket-star`},"p2p-webrtc-star":(cr,ar)=>{const dr=ar.pop();if(dr===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(dr[0],dr[1]??"",ar)}/p2p-webrtc-star`},"p2p-webrtc-direct":(cr,ar)=>{const dr=ar.pop();if(dr===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(dr[0],dr[1]??"",ar)}/p2p-webrtc-direct`}};function multiaddrToUri(cr,ar){const fr=multiaddr(cr).stringTuples(),hr=fr.pop();if(hr===void 0)throw new Error("Unexpected end of multiaddr");const pr=getProtocol(hr[0]),mr=interpreters[pr.name];if(mr==null)throw new Error(`No interpreter found for ${pr.name}`);let gr=mr(hr[1]??"",fr);return ar?.assumeHttp!==!1&&hr[0]===getProtocol("tcp").code&&(gr=gr.replace("tcp://","http://"),(hr[1]==="443"||hr[1]==="80")&&(hr[1]==="443"&&(gr=gr.replace("http://","https://")),gr=gr.substring(0,gr.lastIndexOf(":")))),gr}const ready=async cr=>{if(cr.readyState>=2)throw new Error("socket closed");cr.readyState!==1&&await new Promise((ar,dr)=>{function fr(){cr.removeEventListener("open",hr),cr.removeEventListener("error",pr)}function hr(){fr(),ar()}function pr(mr){fr(),dr(mr.error??new Error(`connect ECONNREFUSED ${cr.url}`))}cr.addEventListener("open",hr),cr.addEventListener("error",pr)})},sink=(cr,ar)=>(ar=ar??{},ar.closeOnEnd=ar.closeOnEnd!==!1,async fr=>{for await(const hr of fr){try{await ready(cr)}catch(pr){if(pr.message==="socket closed")break;throw pr}if(cr.readyState===cr.CLOSING||cr.readyState===cr.CLOSED)break;cr.send(hr)}ar.closeOnEnd!=null&&cr.readyState<=1&&await new Promise((hr,pr)=>{cr.addEventListener("close",mr=>{if(mr.wasClean||mr.code===1006)hr();else{const gr=Object.assign(new Error("ws error"),{event:mr});pr(gr)}}),setTimeout(()=>{cr.close()})})});var dom={},eventIterator={};Object.defineProperty(eventIterator,"__esModule",{value:!0});class EventQueue{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(ar){if(this.isStopped)return;const dr={value:ar,done:!1};if(this.pullQueue.length){const fr=this.pullQueue.shift();fr&&fr.resolve(dr)}else this.pushQueue.push(Promise.resolve(dr)),this.highWaterMark!==void 0&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const ar of this.pullQueue)ar.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(ar){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const dr of this.pullQueue)dr.reject(ar);this.pullQueue.length=0}else{const dr=Promise.reject(ar);dr.catch(()=>{}),this.pushQueue.push(dr)}}remove(){Promise.resolve().then(()=>{this.removeCallback&&this.removeCallback()})}[Symbol.asyncIterator](){return{next:ar=>{const dr=this.pushQueue.shift();return dr?(this.lowWaterMark!==void 0&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),dr):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((fr,hr)=>{this.pullQueue.push({resolve:fr,reject:hr})})},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}let EventIterator$1=class{constructor(ar,{highWaterMark:dr=100,lowWaterMark:fr=1}={}){const hr=new EventQueue;hr.highWaterMark=dr,hr.lowWaterMark=fr,hr.removeCallback=ar({push:pr=>hr.push(pr),stop:()=>hr.stop(),fail:pr=>hr.fail(pr),on:(pr,mr)=>{hr.eventHandlers[pr]=mr}})||(()=>{}),this[Symbol.asyncIterator]=()=>hr[Symbol.asyncIterator](),Object.freeze(this)}};eventIterator.EventIterator=EventIterator$1;eventIterator.default=EventIterator$1;Object.defineProperty(dom,"__esModule",{value:!0});const event_iterator_1=eventIterator;var EventIterator=dom.EventIterator=event_iterator_1.EventIterator;function subscribe(cr,ar,dr){return new event_iterator_1.EventIterator(({push:fr})=>(this.addEventListener(cr,fr,ar),()=>this.removeEventListener(cr,fr,ar)),dr)}dom.subscribe=subscribe;dom.default=event_iterator_1.EventIterator;function isArrayBuffer(cr){return cr instanceof ArrayBuffer||cr?.constructor?.name==="ArrayBuffer"&&typeof cr?.byteLength=="number"}const source=cr=>{cr.binaryType="arraybuffer";const ar=async()=>{await new Promise((pr,mr)=>{if(fr){pr();return}if(hr!=null){mr(hr);return}const gr=wr=>{cr.removeEventListener("open",yr),cr.removeEventListener("error",xr),wr()},yr=()=>{gr(pr)},xr=wr=>{gr(()=>{mr(wr.error??new Error(`connect ECONNREFUSED ${cr.url}`))})};cr.addEventListener("open",yr),cr.addEventListener("error",xr)})},dr=async function*(){const pr=new EventIterator(({push:mr,stop:gr,fail:yr})=>{const xr=br=>{let Sr=null;typeof br.data=="string"&&(Sr=fromString$1(br.data)),isArrayBuffer(br.data)&&(Sr=new Uint8Array(br.data)),br.data instanceof Uint8Array&&(Sr=br.data),Sr!=null&&mr(Sr)},wr=br=>{yr(br.error??new Error("Socket error"))};return cr.addEventListener("message",xr),cr.addEventListener("error",wr),cr.addEventListener("close",gr),()=>{cr.removeEventListener("message",xr),cr.removeEventListener("error",wr),cr.removeEventListener("close",gr)}},{highWaterMark:1/0});await ar();for await(const mr of pr)yield isArrayBuffer(mr)?new Uint8Array(mr):mr}();let fr=cr.readyState===1,hr;return cr.addEventListener("open",()=>{fr=!0,hr=null}),cr.addEventListener("close",()=>{fr=!1,hr=null}),cr.addEventListener("error",pr=>{fr||(hr=pr.error??new Error(`connect ECONNREFUSED ${cr.url}`))}),Object.assign(dr,{connected:ar})},duplex=(cr,ar)=>{ar=ar??{};const dr=source(cr);let fr=ar.remoteAddress,hr=ar.remotePort;if(cr.url!=null)try{const mr=new URL(cr.url);fr=mr.hostname,hr=parseInt(mr.port,10)}catch{}if(fr==null||hr==null)throw new Error("Remote connection did not have address and/or port");return{sink:sink(cr,ar),source:dr,connected:async()=>{await dr.connected()},close:async()=>{(cr.readyState===cr.CONNECTING||cr.readyState===cr.OPEN)&&await new Promise(mr=>{cr.addEventListener("close",()=>{mr()}),cr.close()})},destroy:()=>{cr.terminate!=null?cr.terminate():cr.close()},remoteAddress:fr,remotePort:hr,socket:cr}},WebSocket$1=WebSocket,map={"http:":"ws:","https:":"wss:"},defaultProtocol="ws:",wsurl=(cr,ar)=>{if(cr.startsWith("//")&&(cr=`${ar?.protocol??defaultProtocol}${cr}`),cr.startsWith("/")&&ar!=null){const fr=ar.protocol??defaultProtocol,hr=ar.host,pr=ar.port!=null&&hr?.endsWith(`:${ar.port}`)!==!0?`:${ar.port}`:"";cr=`${fr}//${hr}${pr}${cr}`}const dr=new URL(cr);for(const[fr,hr]of Object.entries(map))dr.protocol===fr&&(dr.protocol=hr);return dr};function connect(cr,ar){const dr=typeof window>"u"?void 0:window.location;ar=ar??{};const fr=wsurl(cr,dr),hr=new WebSocket$1(fr.toString(),ar.websocket);return duplex(hr,ar)}const CODE_P2P=421,CODE_CIRCUIT=290,CLOSE_TIMEOUT$1=500;function all(cr){return cr.filter(ar=>{if(ar.protoCodes().includes(CODE_CIRCUIT))return!1;const dr=ar.decapsulateCode(CODE_P2P);return WebSockets$1.matches(dr)||WebSocketsSecure.matches(dr)})}function wss(cr){return cr.filter(ar=>{if(ar.protoCodes().includes(CODE_CIRCUIT))return!1;const dr=ar.decapsulateCode(CODE_P2P);return WebSocketsSecure.matches(dr)})}function createListener(){throw new Error("WebSocket Servers can not be created in the browser!")}function socketToMaConn(cr,ar,dr){const fr=dr.logger.forComponent("libp2p:websockets:maconn"),hr={log:fr,async sink(pr){try{await cr.sink(async function*(){for await(const mr of pr)mr instanceof Uint8Array?yield mr:yield mr.subarray()}())}catch(mr){mr.type!=="aborted"&&fr.error(mr)}},source:cr.source,remoteAddr:ar,timeline:{open:Date.now()},async close(pr={}){const mr=Date.now();if(pr.signal==null){const yr=AbortSignal.timeout(CLOSE_TIMEOUT$1);pr={...pr,signal:yr}}const gr=()=>{const{host:yr,port:xr}=hr.remoteAddr.toOptions();fr("timeout closing stream to %s:%s after %dms, destroying it manually",yr,xr,Date.now()-mr),this.abort(new CodeError$3("Socket close timeout","ERR_SOCKET_CLOSE_TIMEOUT"))};pr.signal?.addEventListener("abort",gr);try{await cr.close()}catch(yr){fr.error("error closing WebSocket gracefully",yr),this.abort(yr)}finally{pr.signal?.removeEventListener("abort",gr),hr.timeline.close=Date.now()}},abort(pr){const{host:mr,port:gr}=hr.remoteAddr.toOptions();fr("timeout closing stream to %s:%s due to error",mr,gr,pr),cr.destroy(),hr.timeline.close=Date.now()}};return cr.socket.addEventListener("close",()=>{hr.timeline.close==null&&(hr.timeline.close=Date.now())},{once:!0}),hr}class WebSockets{log;init;logger;constructor(ar,dr){this.log=ar.logger.forComponent("libp2p:websockets"),this.logger=ar.logger,this.init=dr}[Symbol.toStringTag]="@libp2p/websockets";[transportSymbol]=!0;async dial(ar,dr){this.log("dialing %s",ar),dr=dr??{};const fr=await this._connect(ar,dr),hr=socketToMaConn(fr,ar,{logger:this.logger});this.log("new outbound connection %s",hr.remoteAddr);const pr=await dr.upgrader.upgradeOutbound(hr);return this.log("outbound connection %s upgraded",hr.remoteAddr),pr}async _connect(ar,dr){if(dr?.signal?.aborted===!0)throw new AbortError$6;const fr=ar.toOptions();this.log("dialing %s:%s",fr.host,fr.port);const hr=pDefer(),pr=connect(multiaddrToUri(ar),this.init);if(pr.socket.addEventListener("error",()=>{const yr=new CodeError$3(`Could not connect to ${ar.toString()}`,"ERR_CONNECTION_FAILED");this.log.error("connection error:",yr),hr.reject(yr)}),dr.signal==null)return await Promise.race([pr.connected(),hr.promise]),this.log("connected %s",ar),pr;let mr;const gr=new Promise((yr,xr)=>{if(mr=()=>{xr(new AbortError$6),pr.close().catch(wr=>{this.log.error("error closing raw socket",wr)})},dr?.signal?.aborted===!0){mr();return}dr?.signal?.addEventListener("abort",mr)});try{await Promise.race([gr,hr.promise,pr.connected()])}finally{mr!=null&&dr?.signal?.removeEventListener("abort",mr)}return this.log("connected %s",ar),pr}createListener(ar){return createListener({logger:this.logger},{...this.init,...ar})}filter(ar){return ar=Array.isArray(ar)?ar:[ar],this.init?.filter!=null?this.init?.filter(ar):isBrowser||isWebWorker?wss(ar):all(ar)}}function webSockets(cr={}){return ar=>new WebSockets(ar,cr)}function pair(){const cr=pDefer();let ar=!1;return{sink:async dr=>{if(ar)throw new Error("already piped");ar=!0,cr.resolve(dr)},source:async function*(){yield*await cr.promise}()}}function duplexPair(){const cr=pair(),ar=pair();return[{source:cr.source,sink:ar.sink},{source:ar.source,sink:cr.sink}]}const NOISE_MSG_MAX_LENGTH_BYTES=65535,NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=NOISE_MSG_MAX_LENGTH_BYTES-16,DUMP_SESSION_KEYS=!!globalThis.process?.env?.DUMP_SESSION_KEYS;/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const u8a=cr=>cr instanceof Uint8Array,u32=cr=>new Uint32Array(cr.buffer,cr.byteOffset,Math.floor(cr.byteLength/4)),createView=cr=>new DataView(cr.buffer,cr.byteOffset,cr.byteLength),isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes(cr){if(typeof cr!="string")throw new Error(`utf8ToBytes expected string, got ${typeof cr}`);return new Uint8Array(new TextEncoder().encode(cr))}function toBytes(cr){if(typeof cr=="string")cr=utf8ToBytes(cr);else if(u8a(cr))cr=cr.slice();else throw new Error(`expected Uint8Array, got ${typeof cr}`);return cr}const isPlainObject=cr=>Object.prototype.toString.call(cr)==="[object Object]"&&cr.constructor===Object;function checkOpts(cr,ar){if(ar!==void 0&&(typeof ar!="object"||!isPlainObject(ar)))throw new Error("options must be object or undefined");return Object.assign(cr,ar)}function ensureBytes(cr,ar){if(!(cr instanceof Uint8Array))throw new Error("Uint8Array expected");if(typeof ar=="number"&&cr.length!==ar)throw new Error(`Uint8Array length ${ar} expected`)}function equalBytes(cr,ar){if(cr.length!==ar.length)throw new Error("equalBytes: Different size of Uint8Arrays");let dr=!0;for(let fr=0;fr<cr.length;fr++)dr&&(dr=cr[fr]===ar[fr]);return dr}const wrapCipher=(cr,ar)=>(Object.assign(ar,cr),ar);function setBigUint64(cr,ar,dr,fr){if(typeof cr.setBigUint64=="function")return cr.setBigUint64(ar,dr,fr);const hr=BigInt(32),pr=BigInt(4294967295),mr=Number(dr>>hr&pr),gr=Number(dr&pr),yr=fr?4:0,xr=fr?0:4;cr.setUint32(ar+yr,mr,fr),cr.setUint32(ar+xr,gr,fr)}function number(cr){if(!Number.isSafeInteger(cr)||cr<0)throw new Error(`Wrong positive integer: ${cr}`)}function bool(cr){if(typeof cr!="boolean")throw new Error(`Expected boolean, not ${cr}`)}function bytes(cr,...ar){if(!(cr instanceof Uint8Array))throw new Error("Expected Uint8Array");if(ar.length>0&&!ar.includes(cr.length))throw new Error(`Expected Uint8Array of length ${ar}, not of length=${cr.length}`)}function exists(cr,ar=!0){if(cr.destroyed)throw new Error("Hash instance has been destroyed");if(ar&&cr.finished)throw new Error("Hash#digest() has already been called")}function output(cr,ar){bytes(cr);const dr=ar.outputLen;if(cr.length<dr)throw new Error(`digestInto() expects output buffer of length at least ${dr}`)}const u8to16=(cr,ar)=>cr[ar++]&255|(cr[ar++]&255)<<8;class Poly1305{constructor(ar){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,ar=toBytes(ar),ensureBytes(ar,32);const dr=u8to16(ar,0),fr=u8to16(ar,2),hr=u8to16(ar,4),pr=u8to16(ar,6),mr=u8to16(ar,8),gr=u8to16(ar,10),yr=u8to16(ar,12),xr=u8to16(ar,14);this.r[0]=dr&8191,this.r[1]=(dr>>>13|fr<<3)&8191,this.r[2]=(fr>>>10|hr<<6)&7939,this.r[3]=(hr>>>7|pr<<9)&8191,this.r[4]=(pr>>>4|mr<<12)&255,this.r[5]=mr>>>1&8190,this.r[6]=(mr>>>14|gr<<2)&8191,this.r[7]=(gr>>>11|yr<<5)&8065,this.r[8]=(yr>>>8|xr<<8)&8191,this.r[9]=xr>>>5&127;for(let wr=0;wr<8;wr++)this.pad[wr]=u8to16(ar,16+2*wr)}process(ar,dr,fr=!1){const hr=fr?0:2048,{h:pr,r:mr}=this,gr=mr[0],yr=mr[1],xr=mr[2],wr=mr[3],br=mr[4],Sr=mr[5],vr=mr[6],Er=mr[7],Ar=mr[8],_r=mr[9],Cr=u8to16(ar,dr+0),kr=u8to16(ar,dr+2),Rr=u8to16(ar,dr+4),Ir=u8to16(ar,dr+6),Nr=u8to16(ar,dr+8),Pr=u8to16(ar,dr+10),Tr=u8to16(ar,dr+12),Br=u8to16(ar,dr+14);let Fr=pr[0]+(Cr&8191),jr=pr[1]+((Cr>>>13|kr<<3)&8191),Ur=pr[2]+((kr>>>10|Rr<<6)&8191),qr=pr[3]+((Rr>>>7|Ir<<9)&8191),Hr=pr[4]+((Ir>>>4|Nr<<12)&8191),Or=pr[5]+(Nr>>>1&8191),Mr=pr[6]+((Nr>>>14|Pr<<2)&8191),Lr=pr[7]+((Pr>>>11|Tr<<5)&8191),Vr=pr[8]+((Tr>>>8|Br<<8)&8191),Jr=pr[9]+(Br>>>5|hr),es=0,ns=es+Fr*gr+jr*(5*_r)+Ur*(5*Ar)+qr*(5*Er)+Hr*(5*vr);es=ns>>>13,ns&=8191,ns+=Or*(5*Sr)+Mr*(5*br)+Lr*(5*wr)+Vr*(5*xr)+Jr*(5*yr),es+=ns>>>13,ns&=8191;let Qr=es+Fr*yr+jr*gr+Ur*(5*_r)+qr*(5*Ar)+Hr*(5*Er);es=Qr>>>13,Qr&=8191,Qr+=Or*(5*vr)+Mr*(5*Sr)+Lr*(5*br)+Vr*(5*wr)+Jr*(5*xr),es+=Qr>>>13,Qr&=8191;let zr=es+Fr*xr+jr*yr+Ur*gr+qr*(5*_r)+Hr*(5*Ar);es=zr>>>13,zr&=8191,zr+=Or*(5*Er)+Mr*(5*vr)+Lr*(5*Sr)+Vr*(5*br)+Jr*(5*wr),es+=zr>>>13,zr&=8191;let Wr=es+Fr*wr+jr*xr+Ur*yr+qr*gr+Hr*(5*_r);es=Wr>>>13,Wr&=8191,Wr+=Or*(5*Ar)+Mr*(5*Er)+Lr*(5*vr)+Vr*(5*Sr)+Jr*(5*br),es+=Wr>>>13,Wr&=8191;let ss=es+Fr*br+jr*wr+Ur*xr+qr*yr+Hr*gr;es=ss>>>13,ss&=8191,ss+=Or*(5*_r)+Mr*(5*Ar)+Lr*(5*Er)+Vr*(5*vr)+Jr*(5*Sr),es+=ss>>>13,ss&=8191;let Xr=es+Fr*Sr+jr*br+Ur*wr+qr*xr+Hr*yr;es=Xr>>>13,Xr&=8191,Xr+=Or*gr+Mr*(5*_r)+Lr*(5*Ar)+Vr*(5*Er)+Jr*(5*vr),es+=Xr>>>13,Xr&=8191;let ts=es+Fr*vr+jr*Sr+Ur*br+qr*wr+Hr*xr;es=ts>>>13,ts&=8191,ts+=Or*yr+Mr*gr+Lr*(5*_r)+Vr*(5*Ar)+Jr*(5*Er),es+=ts>>>13,ts&=8191;let fs=es+Fr*Er+jr*vr+Ur*Sr+qr*br+Hr*wr;es=fs>>>13,fs&=8191,fs+=Or*xr+Mr*yr+Lr*gr+Vr*(5*_r)+Jr*(5*Ar),es+=fs>>>13,fs&=8191;let rs=es+Fr*Ar+jr*Er+Ur*vr+qr*Sr+Hr*br;es=rs>>>13,rs&=8191,rs+=Or*wr+Mr*xr+Lr*yr+Vr*gr+Jr*(5*_r),es+=rs>>>13,rs&=8191;let as=es+Fr*_r+jr*Ar+Ur*Er+qr*vr+Hr*Sr;es=as>>>13,as&=8191,as+=Or*br+Mr*wr+Lr*xr+Vr*yr+Jr*gr,es+=as>>>13,as&=8191,es=(es<<2)+es|0,es=es+ns|0,ns=es&8191,es=es>>>13,Qr+=es,pr[0]=ns,pr[1]=Qr,pr[2]=zr,pr[3]=Wr,pr[4]=ss,pr[5]=Xr,pr[6]=ts,pr[7]=fs,pr[8]=rs,pr[9]=as}finalize(){const{h:ar,pad:dr}=this,fr=new Uint16Array(10);let hr=ar[1]>>>13;ar[1]&=8191;for(let gr=2;gr<10;gr++)ar[gr]+=hr,hr=ar[gr]>>>13,ar[gr]&=8191;ar[0]+=hr*5,hr=ar[0]>>>13,ar[0]&=8191,ar[1]+=hr,hr=ar[1]>>>13,ar[1]&=8191,ar[2]+=hr,fr[0]=ar[0]+5,hr=fr[0]>>>13,fr[0]&=8191;for(let gr=1;gr<10;gr++)fr[gr]=ar[gr]+hr,hr=fr[gr]>>>13,fr[gr]&=8191;fr[9]-=8192;let pr=(hr^1)-1;for(let gr=0;gr<10;gr++)fr[gr]&=pr;pr=~pr;for(let gr=0;gr<10;gr++)ar[gr]=ar[gr]&pr|fr[gr];ar[0]=(ar[0]|ar[1]<<13)&65535,ar[1]=(ar[1]>>>3|ar[2]<<10)&65535,ar[2]=(ar[2]>>>6|ar[3]<<7)&65535,ar[3]=(ar[3]>>>9|ar[4]<<4)&65535,ar[4]=(ar[4]>>>12|ar[5]<<1|ar[6]<<14)&65535,ar[5]=(ar[6]>>>2|ar[7]<<11)&65535,ar[6]=(ar[7]>>>5|ar[8]<<8)&65535,ar[7]=(ar[8]>>>8|ar[9]<<5)&65535;let mr=ar[0]+dr[0];ar[0]=mr&65535;for(let gr=1;gr<8;gr++)mr=(ar[gr]+dr[gr]|0)+(mr>>>16)|0,ar[gr]=mr&65535}update(ar){exists(this);const{buffer:dr,blockLen:fr}=this;ar=toBytes(ar);const hr=ar.length;for(let pr=0;pr<hr;){const mr=Math.min(fr-this.pos,hr-pr);if(mr===fr){for(;fr<=hr-pr;pr+=fr)this.process(ar,pr);continue}dr.set(ar.subarray(pr,pr+mr),this.pos),this.pos+=mr,pr+=mr,this.pos===fr&&(this.process(dr,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(ar){exists(this),output(ar,this),this.finished=!0;const{buffer:dr,h:fr}=this;let{pos:hr}=this;if(hr){for(dr[hr++]=1;hr<16;hr++)dr[hr]=0;this.process(dr,0,!0)}this.finalize();let pr=0;for(let mr=0;mr<8;mr++)ar[pr++]=fr[mr]>>>0,ar[pr++]=fr[mr]>>>8;return ar}digest(){const{buffer:ar,outputLen:dr}=this;this.digestInto(ar);const fr=ar.slice(0,dr);return this.destroy(),fr}}function wrapConstructorWithKey(cr){const ar=(fr,hr)=>cr(hr).update(toBytes(fr)).digest(),dr=cr(new Uint8Array(32));return ar.outputLen=dr.outputLen,ar.blockLen=dr.blockLen,ar.create=fr=>cr(fr),ar}const poly1305=wrapConstructorWithKey(cr=>new Poly1305(cr)),sigma16=utf8ToBytes("expand 16-byte k"),sigma32=utf8ToBytes("expand 32-byte k"),sigma16_32=u32(sigma16),sigma32_32=u32(sigma32);function rotl(cr,ar){return cr<<ar|cr>>>32-ar}function isAligned32(cr){return cr.byteOffset%4===0}const BLOCK_LEN=64,BLOCK_LEN32=16,MAX_COUNTER=2**32-1,U32_EMPTY=new Uint32Array;function runCipher(cr,ar,dr,fr,hr,pr,mr,gr){const yr=hr.length,xr=new Uint8Array(BLOCK_LEN),wr=u32(xr),br=isAligned32(hr)&&isAligned32(pr),Sr=br?u32(hr):U32_EMPTY,vr=br?u32(pr):U32_EMPTY;for(let Er=0;Er<yr;mr++){if(cr(ar,dr,fr,wr,mr,gr),mr>=MAX_COUNTER)throw new Error("arx: counter overflow");const Ar=Math.min(BLOCK_LEN,yr-Er);if(br&&Ar===BLOCK_LEN){const _r=Er/4;if(Er%4!==0)throw new Error("arx: invalid block position");for(let Cr=0,kr;Cr<BLOCK_LEN32;Cr++)kr=_r+Cr,vr[kr]=Sr[kr]^wr[Cr];Er+=BLOCK_LEN;continue}for(let _r=0,Cr;_r<Ar;_r++)Cr=Er+_r,pr[Cr]=hr[Cr]^xr[_r];Er+=Ar}}function createCipher$1(cr,ar){const{allowShortKeys:dr,extendNonceFn:fr,counterLength:hr,counterRight:pr,rounds:mr}=checkOpts({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},ar);if(typeof cr!="function")throw new Error("core must be a function");return number(hr),number(mr),bool(pr),bool(dr),(gr,yr,xr,wr,br=0)=>{bytes(gr),bytes(yr),bytes(xr);const Sr=xr.length;if(wr||(wr=new Uint8Array(Sr)),bytes(wr),number(br),br<0||br>=MAX_COUNTER)throw new Error("arx: counter overflow");if(wr.length<Sr)throw new Error(`arx: output (${wr.length}) is shorter than data (${Sr})`);const vr=[];let Er=gr.length,Ar,_r;if(Er===32)Ar=gr.slice(),vr.push(Ar),_r=sigma32_32;else if(Er===16&&dr)Ar=new Uint8Array(32),Ar.set(gr),Ar.set(gr,16),_r=sigma16_32,vr.push(Ar);else throw new Error(`arx: invalid 32-byte key, got length=${Er}`);isAligned32(yr)||(yr=yr.slice(),vr.push(yr));const Cr=u32(Ar);if(fr){if(yr.length!==24)throw new Error("arx: extended nonce must be 24 bytes");fr(_r,Cr,u32(yr.subarray(0,16)),Cr),yr=yr.subarray(16)}const kr=16-hr;if(kr!==yr.length)throw new Error(`arx: nonce must be ${kr} or 16 bytes`);if(kr!==12){const Ir=new Uint8Array(12);Ir.set(yr,pr?0:12-yr.length),yr=Ir,vr.push(yr)}const Rr=u32(yr);for(runCipher(cr,_r,Cr,Rr,xr,wr,br,mr);vr.length>0;)vr.pop().fill(0);return wr}}function chachaCore(cr,ar,dr,fr,hr,pr=20){let mr=cr[0],gr=cr[1],yr=cr[2],xr=cr[3],wr=ar[0],br=ar[1],Sr=ar[2],vr=ar[3],Er=ar[4],Ar=ar[5],_r=ar[6],Cr=ar[7],kr=hr,Rr=dr[0],Ir=dr[1],Nr=dr[2],Pr=mr,Tr=gr,Br=yr,Fr=xr,jr=wr,Ur=br,qr=Sr,Hr=vr,Or=Er,Mr=Ar,Lr=_r,Vr=Cr,Jr=kr,es=Rr,ns=Ir,Qr=Nr;for(let Wr=0;Wr<pr;Wr+=2)Pr=Pr+jr|0,Jr=rotl(Jr^Pr,16),Or=Or+Jr|0,jr=rotl(jr^Or,12),Pr=Pr+jr|0,Jr=rotl(Jr^Pr,8),Or=Or+Jr|0,jr=rotl(jr^Or,7),Tr=Tr+Ur|0,es=rotl(es^Tr,16),Mr=Mr+es|0,Ur=rotl(Ur^Mr,12),Tr=Tr+Ur|0,es=rotl(es^Tr,8),Mr=Mr+es|0,Ur=rotl(Ur^Mr,7),Br=Br+qr|0,ns=rotl(ns^Br,16),Lr=Lr+ns|0,qr=rotl(qr^Lr,12),Br=Br+qr|0,ns=rotl(ns^Br,8),Lr=Lr+ns|0,qr=rotl(qr^Lr,7),Fr=Fr+Hr|0,Qr=rotl(Qr^Fr,16),Vr=Vr+Qr|0,Hr=rotl(Hr^Vr,12),Fr=Fr+Hr|0,Qr=rotl(Qr^Fr,8),Vr=Vr+Qr|0,Hr=rotl(Hr^Vr,7),Pr=Pr+Ur|0,Qr=rotl(Qr^Pr,16),Lr=Lr+Qr|0,Ur=rotl(Ur^Lr,12),Pr=Pr+Ur|0,Qr=rotl(Qr^Pr,8),Lr=Lr+Qr|0,Ur=rotl(Ur^Lr,7),Tr=Tr+qr|0,Jr=rotl(Jr^Tr,16),Vr=Vr+Jr|0,qr=rotl(qr^Vr,12),Tr=Tr+qr|0,Jr=rotl(Jr^Tr,8),Vr=Vr+Jr|0,qr=rotl(qr^Vr,7),Br=Br+Hr|0,es=rotl(es^Br,16),Or=Or+es|0,Hr=rotl(Hr^Or,12),Br=Br+Hr|0,es=rotl(es^Br,8),Or=Or+es|0,Hr=rotl(Hr^Or,7),Fr=Fr+jr|0,ns=rotl(ns^Fr,16),Mr=Mr+ns|0,jr=rotl(jr^Mr,12),Fr=Fr+jr|0,ns=rotl(ns^Fr,8),Mr=Mr+ns|0,jr=rotl(jr^Mr,7);let zr=0;fr[zr++]=mr+Pr|0,fr[zr++]=gr+Tr|0,fr[zr++]=yr+Br|0,fr[zr++]=xr+Fr|0,fr[zr++]=wr+jr|0,fr[zr++]=br+Ur|0,fr[zr++]=Sr+qr|0,fr[zr++]=vr+Hr|0,fr[zr++]=Er+Or|0,fr[zr++]=Ar+Mr|0,fr[zr++]=_r+Lr|0,fr[zr++]=Cr+Vr|0,fr[zr++]=kr+Jr|0,fr[zr++]=Rr+es|0,fr[zr++]=Ir+ns|0,fr[zr++]=Nr+Qr|0}const chacha20=createCipher$1(chachaCore,{counterRight:!1,counterLength:4,allowShortKeys:!1}),ZEROS16=new Uint8Array(16),updatePadded=(cr,ar)=>{cr.update(ar);const dr=ar.length%16;dr&&cr.update(ZEROS16.subarray(dr))},ZEROS32=new Uint8Array(32);function computeTag(cr,ar,dr,fr,hr){const pr=cr(ar,dr,ZEROS32),mr=poly1305.create(pr);hr&&updatePadded(mr,hr),updatePadded(mr,fr);const gr=new Uint8Array(16),yr=createView(gr);setBigUint64(yr,0,BigInt(hr?hr.length:0),!0),setBigUint64(yr,8,BigInt(fr.length),!0),mr.update(gr);const xr=mr.digest();return pr.fill(0),xr}const _poly1305_aead=cr=>(ar,dr,fr)=>(ensureBytes(ar,32),ensureBytes(dr),{encrypt:(pr,mr)=>{const gr=pr.length,yr=gr+16;mr?ensureBytes(mr,yr):mr=new Uint8Array(yr),cr(ar,dr,pr,mr,1);const xr=computeTag(cr,ar,dr,mr.subarray(0,-16),fr);return mr.set(xr,gr),mr},decrypt:(pr,mr)=>{const gr=pr.length,yr=gr-16;if(gr<16)throw new Error("encrypted data must be at least 16 bytes");mr?ensureBytes(mr,yr):mr=new Uint8Array(yr);const xr=pr.subarray(0,-16),wr=pr.subarray(-16),br=computeTag(cr,ar,dr,xr,fr);if(!equalBytes(wr,br))throw new Error("invalid tag");return cr(ar,dr,xr,mr,1),mr}}),chacha20poly1305=wrapCipher({blockSize:64,nonceLength:12,tagLength:16},_poly1305_aead(chacha20));function extract(cr,ar,dr){return hash$1(cr),dr===void 0&&(dr=new Uint8Array(cr.outputLen)),hmac$1(cr,toBytes$2(dr),toBytes$2(ar))}const HKDF_COUNTER=new Uint8Array([0]),EMPTY_BUFFER=new Uint8Array;function expand(cr,ar,dr,fr=32){if(hash$1(cr),number$2(fr),fr>255*cr.outputLen)throw new Error("Length should be <= 255*HashLen");const hr=Math.ceil(fr/cr.outputLen);dr===void 0&&(dr=EMPTY_BUFFER);const pr=new Uint8Array(hr*cr.outputLen),mr=hmac$1.create(cr,ar),gr=mr._cloneInto(),yr=new Uint8Array(mr.outputLen);for(let xr=0;xr<hr;xr++)HKDF_COUNTER[0]=xr+1,gr.update(xr===0?EMPTY_BUFFER:yr).update(dr).update(HKDF_COUNTER).digestInto(yr),pr.set(yr,cr.outputLen*xr),mr._cloneInto(gr);return mr.destroy(),gr.destroy(),yr.fill(0),HKDF_COUNTER.fill(0),pr.slice(0,fr)}const pureJsCrypto={hashSHA256(cr){return sha256$3(cr.subarray())},getHKDF(cr,ar){const dr=extract(sha256$3,ar,cr),hr=expand(sha256$3,dr,void 0,96),pr=hr.subarray(0,32),mr=hr.subarray(32,64),gr=hr.subarray(64,96);return[pr,mr,gr]},generateX25519KeyPair(){const cr=x25519.utils.randomPrivateKey();return{publicKey:x25519.getPublicKey(cr),privateKey:cr}},generateX25519KeyPairFromSeed(cr){return{publicKey:x25519.getPublicKey(cr),privateKey:cr}},generateX25519SharedKey(cr,ar){return x25519.getSharedSecret(cr.subarray(),ar.subarray())},chaCha20Poly1305Encrypt(cr,ar,dr,fr){return chacha20poly1305(fr,ar,dr).encrypt(cr.subarray())},chaCha20Poly1305Decrypt(cr,ar,dr,fr,hr){return chacha20poly1305(fr,ar,dr).decrypt(cr.subarray(),hr)}},defaultCrypto=pureJsCrypto,uint16BEEncode=cr=>{const ar=allocUnsafe$1(2);return new DataView(ar.buffer,ar.byteOffset,ar.byteLength).setUint16(0,cr,!1),ar};uint16BEEncode.bytes=2;const uint16BEDecode=cr=>{if(cr.length<2)throw RangeError("Could not decode int16BE");return cr instanceof Uint8Array?new DataView(cr.buffer,cr.byteOffset,cr.byteLength).getUint16(0,!1):cr.getUint16(0)};uint16BEDecode.bytes=2;function encode0(cr){return new Uint8ArrayList(cr.ne,cr.ciphertext)}function encode1(cr){return new Uint8ArrayList(cr.ne,cr.ns,cr.ciphertext)}function encode2(cr){return new Uint8ArrayList(cr.ns,cr.ciphertext)}function decode0(cr){if(cr.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:cr.subarray(0,32),ciphertext:cr.subarray(32,cr.length),ns:alloc$2(0)}}function decode1(cr){if(cr.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:cr.subarray(0,32),ns:cr.subarray(32,80),ciphertext:cr.subarray(80,cr.length)}}function decode2(cr){if(cr.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:alloc$2(0),ns:cr.subarray(0,48),ciphertext:cr.subarray(48,cr.length)}}const CHACHA_TAG_LENGTH=16;function encryptStream(cr,ar){return async function*(dr){for await(const fr of dr)for(let hr=0;hr<fr.length;hr+=NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG){let pr=hr+NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG;pr>fr.length&&(pr=fr.length);let mr;fr instanceof Uint8Array?mr=cr.encrypt(fr.subarray(hr,pr),cr.session):mr=cr.encrypt(fr.sublist(hr,pr),cr.session),ar?.encryptedPackets.increment(),yield new Uint8ArrayList(uint16BEEncode(mr.byteLength),mr)}}}function decryptStream(cr,ar){return async function*(dr){for await(const fr of dr)for(let hr=0;hr<fr.length;hr+=NOISE_MSG_MAX_LENGTH_BYTES){let pr=hr+NOISE_MSG_MAX_LENGTH_BYTES;if(pr>fr.length&&(pr=fr.length),pr-CHACHA_TAG_LENGTH<hr)throw new Error("Invalid chunk");const mr=fr.sublist(hr,pr),gr=fr.subarray(hr,pr-CHACHA_TAG_LENGTH),{plaintext:yr,valid:xr}=cr.decrypt(mr,cr.session,gr);if(!xr)throw ar?.decryptErrors.increment(),new Error("Failed to validate decrypted chunk");ar?.decryptedPackets.increment(),yield yr}}}class UnexpectedPeerError extends Error{code;constructor(ar="Unexpected Peer"){super(ar),this.code=UnexpectedPeerError.code}static code="ERR_UNEXPECTED_PEER"}class InvalidCryptoExchangeError extends Error{code;constructor(ar="Invalid crypto exchange"){super(ar),this.code=InvalidCryptoExchangeError.code}static code="ERR_INVALID_CRYPTO_EXCHANGE"}var forge$m={options:{usePureJavaScript:!1}};const forge$n=getDefaultExportFromCjs(forge$m);var api={},baseN$1=api,_reverseAlphabets={};api.encode=function(cr,ar,dr){if(typeof ar!="string")throw new TypeError('"alphabet" must be a string.');if(dr!==void 0&&typeof dr!="number")throw new TypeError('"maxline" must be a number.');var fr="";if(!(cr instanceof Uint8Array))fr=_encodeWithByteBuffer(cr,ar);else{var hr=0,pr=ar.length,mr=ar.charAt(0),gr=[0];for(hr=0;hr<cr.length;++hr){for(var yr=0,xr=cr[hr];yr<gr.length;++yr)xr+=gr[yr]<<8,gr[yr]=xr%pr,xr=xr/pr|0;for(;xr>0;)gr.push(xr%pr),xr=xr/pr|0}for(hr=0;cr[hr]===0&&hr<cr.length-1;++hr)fr+=mr;for(hr=gr.length-1;hr>=0;--hr)fr+=ar[gr[hr]]}if(dr){var wr=new RegExp(".{1,"+dr+"}","g");fr=fr.match(wr).join(`\r
`)}return fr};api.decode=function(cr,ar){if(typeof cr!="string")throw new TypeError('"input" must be a string.');if(typeof ar!="string")throw new TypeError('"alphabet" must be a string.');var dr=_reverseAlphabets[ar];if(!dr){dr=_reverseAlphabets[ar]=[];for(var fr=0;fr<ar.length;++fr)dr[ar.charCodeAt(fr)]=fr}cr=cr.replace(/\s/g,"");for(var hr=ar.length,pr=ar.charAt(0),mr=[0],fr=0;fr<cr.length;fr++){var gr=dr[cr.charCodeAt(fr)];if(gr===void 0)return;for(var yr=0,xr=gr;yr<mr.length;++yr)xr+=mr[yr]*hr,mr[yr]=xr&255,xr>>=8;for(;xr>0;)mr.push(xr&255),xr>>=8}for(var wr=0;cr[wr]===pr&&wr<cr.length-1;++wr)mr.push(0);return typeof Buffer<"u"?Buffer.from(mr.reverse()):new Uint8Array(mr.reverse())};function _encodeWithByteBuffer(cr,ar){var dr=0,fr=ar.length,hr=ar.charAt(0),pr=[0];for(dr=0;dr<cr.length();++dr){for(var mr=0,gr=cr.at(dr);mr<pr.length;++mr)gr+=pr[mr]<<8,pr[mr]=gr%fr,gr=gr/fr|0;for(;gr>0;)pr.push(gr%fr),gr=gr/fr|0}var yr="";for(dr=0;cr.at(dr)===0&&dr<cr.length()-1;++dr)yr+=hr;for(dr=pr.length-1;dr>=0;--dr)yr+=ar[pr[dr]];return yr}var forge$l=forge$m,baseN=baseN$1,util$6=forge$l.util=forge$l.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){util$6.nextTick=process.nextTick,typeof setImmediate=="function"?util$6.setImmediate=setImmediate:util$6.setImmediate=util$6.nextTick;return}if(typeof setImmediate=="function"){util$6.setImmediate=function(){return setImmediate.apply(void 0,arguments)},util$6.nextTick=function(mr){return setImmediate(mr)};return}if(util$6.setImmediate=function(mr){setTimeout(mr,0)},typeof window<"u"&&typeof window.postMessage=="function"){let mr=function(gr){if(gr.source===window&&gr.data===cr){gr.stopPropagation();var yr=ar.slice();ar.length=0,yr.forEach(function(xr){xr()})}};var cr="forge.setImmediate",ar=[];util$6.setImmediate=function(gr){ar.push(gr),ar.length===1&&window.postMessage(cr,"*")},window.addEventListener("message",mr,!0)}if(typeof MutationObserver<"u"){var dr=Date.now(),fr=!0,hr=document.createElement("div"),ar=[];new MutationObserver(function(){var gr=ar.slice();ar.length=0,gr.forEach(function(yr){yr()})}).observe(hr,{attributes:!0});var pr=util$6.setImmediate;util$6.setImmediate=function(gr){Date.now()-dr>15?(dr=Date.now(),pr(gr)):(ar.push(gr),ar.length===1&&hr.setAttribute("a",fr=!fr))}}util$6.nextTick=util$6.setImmediate})();util$6.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;util$6.globalScope=function(){return util$6.isNodejs?globalThis:typeof self>"u"?window:self}();util$6.isArray=Array.isArray||function(cr){return Object.prototype.toString.call(cr)==="[object Array]"};util$6.isArrayBuffer=function(cr){return typeof ArrayBuffer<"u"&&cr instanceof ArrayBuffer};util$6.isArrayBufferView=function(cr){return cr&&util$6.isArrayBuffer(cr.buffer)&&cr.byteLength!==void 0};function _checkBitsParam(cr){if(!(cr===8||cr===16||cr===24||cr===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+cr)}util$6.ByteBuffer=ByteStringBuffer;function ByteStringBuffer(cr){if(this.data="",this.read=0,typeof cr=="string")this.data=cr;else if(util$6.isArrayBuffer(cr)||util$6.isArrayBufferView(cr))if(typeof Buffer<"u"&&cr instanceof Buffer)this.data=cr.toString("binary");else{var ar=new Uint8Array(cr);try{this.data=String.fromCharCode.apply(null,ar)}catch{for(var dr=0;dr<ar.length;++dr)this.putByte(ar[dr])}}else(cr instanceof ByteStringBuffer||typeof cr=="object"&&typeof cr.data=="string"&&typeof cr.read=="number")&&(this.data=cr.data,this.read=cr.read);this._constructedStringLength=0}util$6.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;util$6.ByteStringBuffer.prototype._optimizeConstructedString=function(cr){this._constructedStringLength+=cr,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)};util$6.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};util$6.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};util$6.ByteStringBuffer.prototype.putByte=function(cr){return this.putBytes(String.fromCharCode(cr))};util$6.ByteStringBuffer.prototype.fillWithByte=function(cr,ar){cr=String.fromCharCode(cr);for(var dr=this.data;ar>0;)ar&1&&(dr+=cr),ar>>>=1,ar>0&&(cr+=cr);return this.data=dr,this._optimizeConstructedString(ar),this};util$6.ByteStringBuffer.prototype.putBytes=function(cr){return this.data+=cr,this._optimizeConstructedString(cr.length),this};util$6.ByteStringBuffer.prototype.putString=function(cr){return this.putBytes(util$6.encodeUtf8(cr))};util$6.ByteStringBuffer.prototype.putInt16=function(cr){return this.putBytes(String.fromCharCode(cr>>8&255)+String.fromCharCode(cr&255))};util$6.ByteStringBuffer.prototype.putInt24=function(cr){return this.putBytes(String.fromCharCode(cr>>16&255)+String.fromCharCode(cr>>8&255)+String.fromCharCode(cr&255))};util$6.ByteStringBuffer.prototype.putInt32=function(cr){return this.putBytes(String.fromCharCode(cr>>24&255)+String.fromCharCode(cr>>16&255)+String.fromCharCode(cr>>8&255)+String.fromCharCode(cr&255))};util$6.ByteStringBuffer.prototype.putInt16Le=function(cr){return this.putBytes(String.fromCharCode(cr&255)+String.fromCharCode(cr>>8&255))};util$6.ByteStringBuffer.prototype.putInt24Le=function(cr){return this.putBytes(String.fromCharCode(cr&255)+String.fromCharCode(cr>>8&255)+String.fromCharCode(cr>>16&255))};util$6.ByteStringBuffer.prototype.putInt32Le=function(cr){return this.putBytes(String.fromCharCode(cr&255)+String.fromCharCode(cr>>8&255)+String.fromCharCode(cr>>16&255)+String.fromCharCode(cr>>24&255))};util$6.ByteStringBuffer.prototype.putInt=function(cr,ar){_checkBitsParam(ar);var dr="";do ar-=8,dr+=String.fromCharCode(cr>>ar&255);while(ar>0);return this.putBytes(dr)};util$6.ByteStringBuffer.prototype.putSignedInt=function(cr,ar){return cr<0&&(cr+=2<<ar-1),this.putInt(cr,ar)};util$6.ByteStringBuffer.prototype.putBuffer=function(cr){return this.putBytes(cr.getBytes())};util$6.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};util$6.ByteStringBuffer.prototype.getInt16=function(){var cr=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,cr};util$6.ByteStringBuffer.prototype.getInt24=function(){var cr=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,cr};util$6.ByteStringBuffer.prototype.getInt32=function(){var cr=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,cr};util$6.ByteStringBuffer.prototype.getInt16Le=function(){var cr=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,cr};util$6.ByteStringBuffer.prototype.getInt24Le=function(){var cr=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,cr};util$6.ByteStringBuffer.prototype.getInt32Le=function(){var cr=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,cr};util$6.ByteStringBuffer.prototype.getInt=function(cr){_checkBitsParam(cr);var ar=0;do ar=(ar<<8)+this.data.charCodeAt(this.read++),cr-=8;while(cr>0);return ar};util$6.ByteStringBuffer.prototype.getSignedInt=function(cr){var ar=this.getInt(cr),dr=2<<cr-2;return ar>=dr&&(ar-=dr<<1),ar};util$6.ByteStringBuffer.prototype.getBytes=function(cr){var ar;return cr?(cr=Math.min(this.length(),cr),ar=this.data.slice(this.read,this.read+cr),this.read+=cr):cr===0?ar="":(ar=this.read===0?this.data:this.data.slice(this.read),this.clear()),ar};util$6.ByteStringBuffer.prototype.bytes=function(cr){return typeof cr>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+cr)};util$6.ByteStringBuffer.prototype.at=function(cr){return this.data.charCodeAt(this.read+cr)};util$6.ByteStringBuffer.prototype.setAt=function(cr,ar){return this.data=this.data.substr(0,this.read+cr)+String.fromCharCode(ar)+this.data.substr(this.read+cr+1),this};util$6.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};util$6.ByteStringBuffer.prototype.copy=function(){var cr=util$6.createBuffer(this.data);return cr.read=this.read,cr};util$6.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};util$6.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};util$6.ByteStringBuffer.prototype.truncate=function(cr){var ar=Math.max(0,this.length()-cr);return this.data=this.data.substr(this.read,ar),this.read=0,this};util$6.ByteStringBuffer.prototype.toHex=function(){for(var cr="",ar=this.read;ar<this.data.length;++ar){var dr=this.data.charCodeAt(ar);dr<16&&(cr+="0"),cr+=dr.toString(16)}return cr};util$6.ByteStringBuffer.prototype.toString=function(){return util$6.decodeUtf8(this.bytes())};function DataBuffer(cr,ar){ar=ar||{},this.read=ar.readOffset||0,this.growSize=ar.growSize||1024;var dr=util$6.isArrayBuffer(cr),fr=util$6.isArrayBufferView(cr);if(dr||fr){dr?this.data=new DataView(cr):this.data=new DataView(cr.buffer,cr.byteOffset,cr.byteLength),this.write="writeOffset"in ar?ar.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,cr!=null&&this.putBytes(cr),"writeOffset"in ar&&(this.write=ar.writeOffset)}util$6.DataBuffer=DataBuffer;util$6.DataBuffer.prototype.length=function(){return this.write-this.read};util$6.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};util$6.DataBuffer.prototype.accommodate=function(cr,ar){if(this.length()>=cr)return this;ar=Math.max(ar||this.growSize,cr);var dr=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),fr=new Uint8Array(this.length()+ar);return fr.set(dr),this.data=new DataView(fr.buffer),this};util$6.DataBuffer.prototype.putByte=function(cr){return this.accommodate(1),this.data.setUint8(this.write++,cr),this};util$6.DataBuffer.prototype.fillWithByte=function(cr,ar){this.accommodate(ar);for(var dr=0;dr<ar;++dr)this.data.setUint8(cr);return this};util$6.DataBuffer.prototype.putBytes=function(cr,ar){if(util$6.isArrayBufferView(cr)){var dr=new Uint8Array(cr.buffer,cr.byteOffset,cr.byteLength),fr=dr.byteLength-dr.byteOffset;this.accommodate(fr);var hr=new Uint8Array(this.data.buffer,this.write);return hr.set(dr),this.write+=fr,this}if(util$6.isArrayBuffer(cr)){var dr=new Uint8Array(cr);this.accommodate(dr.byteLength);var hr=new Uint8Array(this.data.buffer);return hr.set(dr,this.write),this.write+=dr.byteLength,this}if(cr instanceof util$6.DataBuffer||typeof cr=="object"&&typeof cr.read=="number"&&typeof cr.write=="number"&&util$6.isArrayBufferView(cr.data)){var dr=new Uint8Array(cr.data.byteLength,cr.read,cr.length());this.accommodate(dr.byteLength);var hr=new Uint8Array(cr.data.byteLength,this.write);return hr.set(dr),this.write+=dr.byteLength,this}if(cr instanceof util$6.ByteStringBuffer&&(cr=cr.data,ar="binary"),ar=ar||"binary",typeof cr=="string"){var pr;if(ar==="hex")return this.accommodate(Math.ceil(cr.length/2)),pr=new Uint8Array(this.data.buffer,this.write),this.write+=util$6.binary.hex.decode(cr,pr,this.write),this;if(ar==="base64")return this.accommodate(Math.ceil(cr.length/4)*3),pr=new Uint8Array(this.data.buffer,this.write),this.write+=util$6.binary.base64.decode(cr,pr,this.write),this;if(ar==="utf8"&&(cr=util$6.encodeUtf8(cr),ar="binary"),ar==="binary"||ar==="raw")return this.accommodate(cr.length),pr=new Uint8Array(this.data.buffer,this.write),this.write+=util$6.binary.raw.decode(pr),this;if(ar==="utf16")return this.accommodate(cr.length*2),pr=new Uint16Array(this.data.buffer,this.write),this.write+=util$6.text.utf16.encode(pr),this;throw new Error("Invalid encoding: "+ar)}throw Error("Invalid parameter: "+cr)};util$6.DataBuffer.prototype.putBuffer=function(cr){return this.putBytes(cr),cr.clear(),this};util$6.DataBuffer.prototype.putString=function(cr){return this.putBytes(cr,"utf16")};util$6.DataBuffer.prototype.putInt16=function(cr){return this.accommodate(2),this.data.setInt16(this.write,cr),this.write+=2,this};util$6.DataBuffer.prototype.putInt24=function(cr){return this.accommodate(3),this.data.setInt16(this.write,cr>>8&65535),this.data.setInt8(this.write,cr>>16&255),this.write+=3,this};util$6.DataBuffer.prototype.putInt32=function(cr){return this.accommodate(4),this.data.setInt32(this.write,cr),this.write+=4,this};util$6.DataBuffer.prototype.putInt16Le=function(cr){return this.accommodate(2),this.data.setInt16(this.write,cr,!0),this.write+=2,this};util$6.DataBuffer.prototype.putInt24Le=function(cr){return this.accommodate(3),this.data.setInt8(this.write,cr>>16&255),this.data.setInt16(this.write,cr>>8&65535,!0),this.write+=3,this};util$6.DataBuffer.prototype.putInt32Le=function(cr){return this.accommodate(4),this.data.setInt32(this.write,cr,!0),this.write+=4,this};util$6.DataBuffer.prototype.putInt=function(cr,ar){_checkBitsParam(ar),this.accommodate(ar/8);do ar-=8,this.data.setInt8(this.write++,cr>>ar&255);while(ar>0);return this};util$6.DataBuffer.prototype.putSignedInt=function(cr,ar){return _checkBitsParam(ar),this.accommodate(ar/8),cr<0&&(cr+=2<<ar-1),this.putInt(cr,ar)};util$6.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};util$6.DataBuffer.prototype.getInt16=function(){var cr=this.data.getInt16(this.read);return this.read+=2,cr};util$6.DataBuffer.prototype.getInt24=function(){var cr=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,cr};util$6.DataBuffer.prototype.getInt32=function(){var cr=this.data.getInt32(this.read);return this.read+=4,cr};util$6.DataBuffer.prototype.getInt16Le=function(){var cr=this.data.getInt16(this.read,!0);return this.read+=2,cr};util$6.DataBuffer.prototype.getInt24Le=function(){var cr=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,cr};util$6.DataBuffer.prototype.getInt32Le=function(){var cr=this.data.getInt32(this.read,!0);return this.read+=4,cr};util$6.DataBuffer.prototype.getInt=function(cr){_checkBitsParam(cr);var ar=0;do ar=(ar<<8)+this.data.getInt8(this.read++),cr-=8;while(cr>0);return ar};util$6.DataBuffer.prototype.getSignedInt=function(cr){var ar=this.getInt(cr),dr=2<<cr-2;return ar>=dr&&(ar-=dr<<1),ar};util$6.DataBuffer.prototype.getBytes=function(cr){var ar;return cr?(cr=Math.min(this.length(),cr),ar=this.data.slice(this.read,this.read+cr),this.read+=cr):cr===0?ar="":(ar=this.read===0?this.data:this.data.slice(this.read),this.clear()),ar};util$6.DataBuffer.prototype.bytes=function(cr){return typeof cr>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+cr)};util$6.DataBuffer.prototype.at=function(cr){return this.data.getUint8(this.read+cr)};util$6.DataBuffer.prototype.setAt=function(cr,ar){return this.data.setUint8(cr,ar),this};util$6.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};util$6.DataBuffer.prototype.copy=function(){return new util$6.DataBuffer(this)};util$6.DataBuffer.prototype.compact=function(){if(this.read>0){var cr=new Uint8Array(this.data.buffer,this.read),ar=new Uint8Array(cr.byteLength);ar.set(cr),this.data=new DataView(ar),this.write-=this.read,this.read=0}return this};util$6.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};util$6.DataBuffer.prototype.truncate=function(cr){return this.write=Math.max(0,this.length()-cr),this.read=Math.min(this.read,this.write),this};util$6.DataBuffer.prototype.toHex=function(){for(var cr="",ar=this.read;ar<this.data.byteLength;++ar){var dr=this.data.getUint8(ar);dr<16&&(cr+="0"),cr+=dr.toString(16)}return cr};util$6.DataBuffer.prototype.toString=function(cr){var ar=new Uint8Array(this.data,this.read,this.length());if(cr=cr||"utf8",cr==="binary"||cr==="raw")return util$6.binary.raw.encode(ar);if(cr==="hex")return util$6.binary.hex.encode(ar);if(cr==="base64")return util$6.binary.base64.encode(ar);if(cr==="utf8")return util$6.text.utf8.decode(ar);if(cr==="utf16")return util$6.text.utf16.decode(ar);throw new Error("Invalid encoding: "+cr)};util$6.createBuffer=function(cr,ar){return ar=ar||"raw",cr!==void 0&&ar==="utf8"&&(cr=util$6.encodeUtf8(cr)),new util$6.ByteBuffer(cr)};util$6.fillString=function(cr,ar){for(var dr="";ar>0;)ar&1&&(dr+=cr),ar>>>=1,ar>0&&(cr+=cr);return dr};util$6.xorBytes=function(cr,ar,dr){for(var fr="",hr="",pr="",mr=0,gr=0;dr>0;--dr,++mr)hr=cr.charCodeAt(mr)^ar.charCodeAt(mr),gr>=10&&(fr+=pr,pr="",gr=0),pr+=String.fromCharCode(hr),++gr;return fr+=pr,fr};util$6.hexToBytes=function(cr){var ar="",dr=0;for(cr.length&!0&&(dr=1,ar+=String.fromCharCode(parseInt(cr[0],16)));dr<cr.length;dr+=2)ar+=String.fromCharCode(parseInt(cr.substr(dr,2),16));return ar};util$6.bytesToHex=function(cr){return util$6.createBuffer(cr).toHex()};util$6.int32ToBytes=function(cr){return String.fromCharCode(cr>>24&255)+String.fromCharCode(cr>>16&255)+String.fromCharCode(cr>>8&255)+String.fromCharCode(cr&255)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";util$6.encode64=function(cr,ar){for(var dr="",fr="",hr,pr,mr,gr=0;gr<cr.length;)hr=cr.charCodeAt(gr++),pr=cr.charCodeAt(gr++),mr=cr.charCodeAt(gr++),dr+=_base64.charAt(hr>>2),dr+=_base64.charAt((hr&3)<<4|pr>>4),isNaN(pr)?dr+="==":(dr+=_base64.charAt((pr&15)<<2|mr>>6),dr+=isNaN(mr)?"=":_base64.charAt(mr&63)),ar&&dr.length>ar&&(fr+=dr.substr(0,ar)+`\r
`,dr=dr.substr(ar));return fr+=dr,fr};util$6.decode64=function(cr){cr=cr.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var ar="",dr,fr,hr,pr,mr=0;mr<cr.length;)dr=_base64Idx[cr.charCodeAt(mr++)-43],fr=_base64Idx[cr.charCodeAt(mr++)-43],hr=_base64Idx[cr.charCodeAt(mr++)-43],pr=_base64Idx[cr.charCodeAt(mr++)-43],ar+=String.fromCharCode(dr<<2|fr>>4),hr!==64&&(ar+=String.fromCharCode((fr&15)<<4|hr>>2),pr!==64&&(ar+=String.fromCharCode((hr&3)<<6|pr)));return ar};util$6.encodeUtf8=function(cr){return unescape(encodeURIComponent(cr))};util$6.decodeUtf8=function(cr){return decodeURIComponent(escape(cr))};util$6.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}};util$6.binary.raw.encode=function(cr){return String.fromCharCode.apply(null,cr)};util$6.binary.raw.decode=function(cr,ar,dr){var fr=ar;fr||(fr=new Uint8Array(cr.length)),dr=dr||0;for(var hr=dr,pr=0;pr<cr.length;++pr)fr[hr++]=cr.charCodeAt(pr);return ar?hr-dr:fr};util$6.binary.hex.encode=util$6.bytesToHex;util$6.binary.hex.decode=function(cr,ar,dr){var fr=ar;fr||(fr=new Uint8Array(Math.ceil(cr.length/2))),dr=dr||0;var hr=0,pr=dr;for(cr.length&1&&(hr=1,fr[pr++]=parseInt(cr[0],16));hr<cr.length;hr+=2)fr[pr++]=parseInt(cr.substr(hr,2),16);return ar?pr-dr:fr};util$6.binary.base64.encode=function(cr,ar){for(var dr="",fr="",hr,pr,mr,gr=0;gr<cr.byteLength;)hr=cr[gr++],pr=cr[gr++],mr=cr[gr++],dr+=_base64.charAt(hr>>2),dr+=_base64.charAt((hr&3)<<4|pr>>4),isNaN(pr)?dr+="==":(dr+=_base64.charAt((pr&15)<<2|mr>>6),dr+=isNaN(mr)?"=":_base64.charAt(mr&63)),ar&&dr.length>ar&&(fr+=dr.substr(0,ar)+`\r
`,dr=dr.substr(ar));return fr+=dr,fr};util$6.binary.base64.decode=function(cr,ar,dr){var fr=ar;fr||(fr=new Uint8Array(Math.ceil(cr.length/4)*3)),cr=cr.replace(/[^A-Za-z0-9\+\/\=]/g,""),dr=dr||0;for(var hr,pr,mr,gr,yr=0,xr=dr;yr<cr.length;)hr=_base64Idx[cr.charCodeAt(yr++)-43],pr=_base64Idx[cr.charCodeAt(yr++)-43],mr=_base64Idx[cr.charCodeAt(yr++)-43],gr=_base64Idx[cr.charCodeAt(yr++)-43],fr[xr++]=hr<<2|pr>>4,mr!==64&&(fr[xr++]=(pr&15)<<4|mr>>2,gr!==64&&(fr[xr++]=(mr&3)<<6|gr));return ar?xr-dr:fr.subarray(0,xr)};util$6.binary.base58.encode=function(cr,ar){return util$6.binary.baseN.encode(cr,_base58,ar)};util$6.binary.base58.decode=function(cr,ar){return util$6.binary.baseN.decode(cr,_base58,ar)};util$6.text={utf8:{},utf16:{}};util$6.text.utf8.encode=function(cr,ar,dr){cr=util$6.encodeUtf8(cr);var fr=ar;fr||(fr=new Uint8Array(cr.length)),dr=dr||0;for(var hr=dr,pr=0;pr<cr.length;++pr)fr[hr++]=cr.charCodeAt(pr);return ar?hr-dr:fr};util$6.text.utf8.decode=function(cr){return util$6.decodeUtf8(String.fromCharCode.apply(null,cr))};util$6.text.utf16.encode=function(cr,ar,dr){var fr=ar;fr||(fr=new Uint8Array(cr.length*2));var hr=new Uint16Array(fr.buffer);dr=dr||0;for(var pr=dr,mr=dr,gr=0;gr<cr.length;++gr)hr[mr++]=cr.charCodeAt(gr),pr+=2;return ar?pr-dr:fr};util$6.text.utf16.decode=function(cr){return String.fromCharCode.apply(null,new Uint16Array(cr.buffer))};util$6.deflate=function(cr,ar,dr){if(ar=util$6.decode64(cr.deflate(util$6.encode64(ar)).rval),dr){var fr=2,hr=ar.charCodeAt(1);hr&32&&(fr=6),ar=ar.substring(fr,ar.length-4)}return ar};util$6.inflate=function(cr,ar,dr){var fr=cr.inflate(util$6.encode64(ar)).rval;return fr===null?null:util$6.decode64(fr)};var _setStorageObject=function(cr,ar,dr){if(!cr)throw new Error("WebStorage not available.");var fr;if(dr===null?fr=cr.removeItem(ar):(dr=util$6.encode64(JSON.stringify(dr)),fr=cr.setItem(ar,dr)),typeof fr<"u"&&fr.rval!==!0){var hr=new Error(fr.error.message);throw hr.id=fr.error.id,hr.name=fr.error.name,hr}},_getStorageObject=function(cr,ar){if(!cr)throw new Error("WebStorage not available.");var dr=cr.getItem(ar);if(cr.init)if(dr.rval===null){if(dr.error){var fr=new Error(dr.error.message);throw fr.id=dr.error.id,fr.name=dr.error.name,fr}dr=null}else dr=dr.rval;return dr!==null&&(dr=JSON.parse(util$6.decode64(dr))),dr},_setItem=function(cr,ar,dr,fr){var hr=_getStorageObject(cr,ar);hr===null&&(hr={}),hr[dr]=fr,_setStorageObject(cr,ar,hr)},_getItem=function(cr,ar,dr){var fr=_getStorageObject(cr,ar);return fr!==null&&(fr=dr in fr?fr[dr]:null),fr},_removeItem=function(cr,ar,dr){var fr=_getStorageObject(cr,ar);if(fr!==null&&dr in fr){delete fr[dr];var hr=!0;for(var pr in fr){hr=!1;break}hr&&(fr=null),_setStorageObject(cr,ar,fr)}},_clearItems=function(cr,ar){_setStorageObject(cr,ar,null)},_callStorageFunction=function(cr,ar,dr){var fr=null;typeof dr>"u"&&(dr=["web","flash"]);var hr,pr=!1,mr=null;for(var gr in dr){hr=dr[gr];try{if(hr==="flash"||hr==="both"){if(ar[0]===null)throw new Error("Flash local storage not available.");fr=cr.apply(this,ar),pr=hr==="flash"}(hr==="web"||hr==="both")&&(ar[0]=localStorage,fr=cr.apply(this,ar),pr=!0)}catch(yr){mr=yr}if(pr)break}if(!pr)throw mr;return fr};util$6.setItem=function(cr,ar,dr,fr,hr){_callStorageFunction(_setItem,arguments,hr)};util$6.getItem=function(cr,ar,dr,fr){return _callStorageFunction(_getItem,arguments,fr)};util$6.removeItem=function(cr,ar,dr,fr){_callStorageFunction(_removeItem,arguments,fr)};util$6.clearItems=function(cr,ar,dr){_callStorageFunction(_clearItems,arguments,dr)};util$6.isEmpty=function(cr){for(var ar in cr)if(cr.hasOwnProperty(ar))return!1;return!0};util$6.format=function(cr){for(var ar=/%./g,dr,fr,hr=0,pr=[],mr=0;dr=ar.exec(cr);){fr=cr.substring(mr,ar.lastIndex-2),fr.length>0&&pr.push(fr),mr=ar.lastIndex;var gr=dr[0][1];switch(gr){case"s":case"o":hr<arguments.length?pr.push(arguments[hr+++1]):pr.push("<?>");break;case"%":pr.push("%");break;default:pr.push("<%"+gr+"?>")}}return pr.push(cr.substring(mr)),pr.join("")};util$6.formatNumber=function(cr,ar,dr,fr){var hr=cr,pr=isNaN(ar=Math.abs(ar))?2:ar,mr=dr===void 0?",":dr,gr=fr===void 0?".":fr,yr=hr<0?"-":"",xr=parseInt(hr=Math.abs(+hr||0).toFixed(pr),10)+"",wr=xr.length>3?xr.length%3:0;return yr+(wr?xr.substr(0,wr)+gr:"")+xr.substr(wr).replace(/(\d{3})(?=\d)/g,"$1"+gr)+(pr?mr+Math.abs(hr-xr).toFixed(pr).slice(2):"")};util$6.formatSize=function(cr){return cr>=1073741824?cr=util$6.formatNumber(cr/1073741824,2,".","")+" GiB":cr>=1048576?cr=util$6.formatNumber(cr/1048576,2,".","")+" MiB":cr>=1024?cr=util$6.formatNumber(cr/1024,0)+" KiB":cr=util$6.formatNumber(cr,0)+" bytes",cr};util$6.bytesFromIP=function(cr){return cr.indexOf(".")!==-1?util$6.bytesFromIPv4(cr):cr.indexOf(":")!==-1?util$6.bytesFromIPv6(cr):null};util$6.bytesFromIPv4=function(cr){if(cr=cr.split("."),cr.length!==4)return null;for(var ar=util$6.createBuffer(),dr=0;dr<cr.length;++dr){var fr=parseInt(cr[dr],10);if(isNaN(fr))return null;ar.putByte(fr)}return ar.getBytes()};util$6.bytesFromIPv6=function(cr){var ar=0;cr=cr.split(":").filter(function(mr){return mr.length===0&&++ar,!0});for(var dr=(8-cr.length+ar)*2,fr=util$6.createBuffer(),hr=0;hr<8;++hr){if(!cr[hr]||cr[hr].length===0){fr.fillWithByte(0,dr),dr=0;continue}var pr=util$6.hexToBytes(cr[hr]);pr.length<2&&fr.putByte(0),fr.putBytes(pr)}return fr.getBytes()};util$6.bytesToIP=function(cr){return cr.length===4?util$6.bytesToIPv4(cr):cr.length===16?util$6.bytesToIPv6(cr):null};util$6.bytesToIPv4=function(cr){if(cr.length!==4)return null;for(var ar=[],dr=0;dr<cr.length;++dr)ar.push(cr.charCodeAt(dr));return ar.join(".")};util$6.bytesToIPv6=function(cr){if(cr.length!==16)return null;for(var ar=[],dr=[],fr=0,hr=0;hr<cr.length;hr+=2){for(var pr=util$6.bytesToHex(cr[hr]+cr[hr+1]);pr[0]==="0"&&pr!=="0";)pr=pr.substr(1);if(pr==="0"){var mr=dr[dr.length-1],gr=ar.length;!mr||gr!==mr.end+1?dr.push({start:gr,end:gr}):(mr.end=gr,mr.end-mr.start>dr[fr].end-dr[fr].start&&(fr=dr.length-1))}ar.push(pr)}if(dr.length>0){var yr=dr[fr];yr.end-yr.start>0&&(ar.splice(yr.start,yr.end-yr.start+1,""),yr.start===0&&ar.unshift(""),yr.end===7&&ar.push(""))}return ar.join(":")};util$6.estimateCores=function(cr,ar){if(typeof cr=="function"&&(ar=cr,cr={}),cr=cr||{},"cores"in util$6&&!cr.update)return ar(null,util$6.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return util$6.cores=navigator.hardwareConcurrency,ar(null,util$6.cores);if(typeof Worker>"u")return util$6.cores=1,ar(null,util$6.cores);if(typeof Blob>"u")return util$6.cores=2,ar(null,util$6.cores);var dr=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(mr){var gr=Date.now(),yr=gr+4;self.postMessage({st:gr,et:yr})})}.toString(),")()"],{type:"application/javascript"}));fr([],5,16);function fr(mr,gr,yr){if(gr===0){var xr=Math.floor(mr.reduce(function(wr,br){return wr+br},0)/mr.length);return util$6.cores=Math.max(1,xr),URL.revokeObjectURL(dr),ar(null,util$6.cores)}hr(yr,function(wr,br){mr.push(pr(yr,br)),fr(mr,gr-1,yr)})}function hr(mr,gr){for(var yr=[],xr=[],wr=0;wr<mr;++wr){var br=new Worker(dr);br.addEventListener("message",function(Sr){if(xr.push(Sr.data),xr.length===mr){for(var vr=0;vr<mr;++vr)yr[vr].terminate();gr(null,xr)}}),yr.push(br)}for(var wr=0;wr<mr;++wr)yr[wr].postMessage(wr)}function pr(mr,gr){for(var yr=[],xr=0;xr<mr;++xr)for(var wr=gr[xr],br=yr[xr]=[],Sr=0;Sr<mr;++Sr)if(xr!==Sr){var vr=gr[Sr];(wr.st>vr.st&&wr.st<vr.et||vr.st>wr.st&&vr.st<wr.et)&&br.push(Sr)}return yr.reduce(function(Er,Ar){return Math.max(Er,Ar.length)},0)}};var forge$k=forge$m;forge$k.pki=forge$k.pki||{};var oids$1=forge$k.pki.oids=forge$k.oids=forge$k.oids||{};function _IN(cr,ar){oids$1[cr]=ar,oids$1[ar]=cr}function _I_(cr,ar){oids$1[cr]=ar}_IN("1.2.840.113549.1.1.1","rsaEncryption");_IN("1.2.840.113549.1.1.4","md5WithRSAEncryption");_IN("1.2.840.113549.1.1.5","sha1WithRSAEncryption");_IN("1.2.840.113549.1.1.7","RSAES-OAEP");_IN("1.2.840.113549.1.1.8","mgf1");_IN("1.2.840.113549.1.1.9","pSpecified");_IN("1.2.840.113549.1.1.10","RSASSA-PSS");_IN("1.2.840.113549.1.1.11","sha256WithRSAEncryption");_IN("1.2.840.113549.1.1.12","sha384WithRSAEncryption");_IN("1.2.840.113549.1.1.13","sha512WithRSAEncryption");_IN("1.3.101.112","EdDSA25519");_IN("1.2.840.10040.4.3","dsa-with-sha1");_IN("1.3.14.3.2.7","desCBC");_IN("1.3.14.3.2.26","sha1");_IN("1.3.14.3.2.29","sha1WithRSASignature");_IN("2.16.840.1.101.3.4.2.1","sha256");_IN("2.16.840.1.101.3.4.2.2","sha384");_IN("2.16.840.1.101.3.4.2.3","sha512");_IN("2.16.840.1.101.3.4.2.4","sha224");_IN("2.16.840.1.101.3.4.2.5","sha512-224");_IN("2.16.840.1.101.3.4.2.6","sha512-256");_IN("1.2.840.113549.2.2","md2");_IN("1.2.840.113549.2.5","md5");_IN("1.2.840.113549.1.7.1","data");_IN("1.2.840.113549.1.7.2","signedData");_IN("1.2.840.113549.1.7.3","envelopedData");_IN("1.2.840.113549.1.7.4","signedAndEnvelopedData");_IN("1.2.840.113549.1.7.5","digestedData");_IN("1.2.840.113549.1.7.6","encryptedData");_IN("1.2.840.113549.1.9.1","emailAddress");_IN("1.2.840.113549.1.9.2","unstructuredName");_IN("1.2.840.113549.1.9.3","contentType");_IN("1.2.840.113549.1.9.4","messageDigest");_IN("1.2.840.113549.1.9.5","signingTime");_IN("1.2.840.113549.1.9.6","counterSignature");_IN("1.2.840.113549.1.9.7","challengePassword");_IN("1.2.840.113549.1.9.8","unstructuredAddress");_IN("1.2.840.113549.1.9.14","extensionRequest");_IN("1.2.840.113549.1.9.20","friendlyName");_IN("1.2.840.113549.1.9.21","localKeyId");_IN("1.2.840.113549.1.9.22.1","x509Certificate");_IN("1.2.840.113549.1.12.10.1.1","keyBag");_IN("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");_IN("1.2.840.113549.1.12.10.1.3","certBag");_IN("1.2.840.113549.1.12.10.1.4","crlBag");_IN("1.2.840.113549.1.12.10.1.5","secretBag");_IN("1.2.840.113549.1.12.10.1.6","safeContentsBag");_IN("1.2.840.113549.1.5.13","pkcs5PBES2");_IN("1.2.840.113549.1.5.12","pkcs5PBKDF2");_IN("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");_IN("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");_IN("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");_IN("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");_IN("1.2.840.113549.2.7","hmacWithSHA1");_IN("1.2.840.113549.2.8","hmacWithSHA224");_IN("1.2.840.113549.2.9","hmacWithSHA256");_IN("1.2.840.113549.2.10","hmacWithSHA384");_IN("1.2.840.113549.2.11","hmacWithSHA512");_IN("1.2.840.113549.3.7","des-EDE3-CBC");_IN("2.16.840.1.101.3.4.1.2","aes128-CBC");_IN("2.16.840.1.101.3.4.1.22","aes192-CBC");_IN("2.16.840.1.101.3.4.1.42","aes256-CBC");_IN("2.5.4.3","commonName");_IN("2.5.4.4","surname");_IN("2.5.4.5","serialNumber");_IN("2.5.4.6","countryName");_IN("2.5.4.7","localityName");_IN("2.5.4.8","stateOrProvinceName");_IN("2.5.4.9","streetAddress");_IN("2.5.4.10","organizationName");_IN("2.5.4.11","organizationalUnitName");_IN("2.5.4.12","title");_IN("2.5.4.13","description");_IN("2.5.4.15","businessCategory");_IN("2.5.4.17","postalCode");_IN("2.5.4.42","givenName");_IN("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");_IN("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");_IN("2.16.840.1.113730.1.1","nsCertType");_IN("2.16.840.1.113730.1.13","nsComment");_I_("2.5.29.1","authorityKeyIdentifier");_I_("2.5.29.2","keyAttributes");_I_("2.5.29.3","certificatePolicies");_I_("2.5.29.4","keyUsageRestriction");_I_("2.5.29.5","policyMapping");_I_("2.5.29.6","subtreesConstraint");_I_("2.5.29.7","subjectAltName");_I_("2.5.29.8","issuerAltName");_I_("2.5.29.9","subjectDirectoryAttributes");_I_("2.5.29.10","basicConstraints");_I_("2.5.29.11","nameConstraints");_I_("2.5.29.12","policyConstraints");_I_("2.5.29.13","basicConstraints");_IN("2.5.29.14","subjectKeyIdentifier");_IN("2.5.29.15","keyUsage");_I_("2.5.29.16","privateKeyUsagePeriod");_IN("2.5.29.17","subjectAltName");_IN("2.5.29.18","issuerAltName");_IN("2.5.29.19","basicConstraints");_I_("2.5.29.20","cRLNumber");_I_("2.5.29.21","cRLReason");_I_("2.5.29.22","expirationDate");_I_("2.5.29.23","instructionCode");_I_("2.5.29.24","invalidityDate");_I_("2.5.29.25","cRLDistributionPoints");_I_("2.5.29.26","issuingDistributionPoint");_I_("2.5.29.27","deltaCRLIndicator");_I_("2.5.29.28","issuingDistributionPoint");_I_("2.5.29.29","certificateIssuer");_I_("2.5.29.30","nameConstraints");_IN("2.5.29.31","cRLDistributionPoints");_IN("2.5.29.32","certificatePolicies");_I_("2.5.29.33","policyMappings");_I_("2.5.29.34","policyConstraints");_IN("2.5.29.35","authorityKeyIdentifier");_I_("2.5.29.36","policyConstraints");_IN("2.5.29.37","extKeyUsage");_I_("2.5.29.46","freshestCRL");_I_("2.5.29.54","inhibitAnyPolicy");_IN("1.3.6.1.4.1.11129.2.4.2","timestampList");_IN("1.3.6.1.5.5.7.1.1","authorityInfoAccess");_IN("1.3.6.1.5.5.7.3.1","serverAuth");_IN("1.3.6.1.5.5.7.3.2","clientAuth");_IN("1.3.6.1.5.5.7.3.3","codeSigning");_IN("1.3.6.1.5.5.7.3.4","emailProtection");_IN("1.3.6.1.5.5.7.3.8","timeStamping");var forge$j=forge$m,asn1$2=forge$j.asn1=forge$j.asn1||{};asn1$2.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};asn1$2.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};asn1$2.create=function(cr,ar,dr,fr,hr){if(forge$j.util.isArray(fr)){for(var pr=[],mr=0;mr<fr.length;++mr)fr[mr]!==void 0&&pr.push(fr[mr]);fr=pr}var gr={tagClass:cr,type:ar,constructed:dr,composed:dr||forge$j.util.isArray(fr),value:fr};return hr&&"bitStringContents"in hr&&(gr.bitStringContents=hr.bitStringContents,gr.original=asn1$2.copy(gr)),gr};asn1$2.copy=function(cr,ar){var dr;if(forge$j.util.isArray(cr)){dr=[];for(var fr=0;fr<cr.length;++fr)dr.push(asn1$2.copy(cr[fr],ar));return dr}return typeof cr=="string"?cr:(dr={tagClass:cr.tagClass,type:cr.type,constructed:cr.constructed,composed:cr.composed,value:asn1$2.copy(cr.value,ar)},ar&&!ar.excludeBitStringContents&&(dr.bitStringContents=cr.bitStringContents),dr)};asn1$2.equals=function(cr,ar,dr){if(forge$j.util.isArray(cr)){if(!forge$j.util.isArray(ar)||cr.length!==ar.length)return!1;for(var fr=0;fr<cr.length;++fr)if(!asn1$2.equals(cr[fr],ar[fr]))return!1;return!0}if(typeof cr!=typeof ar)return!1;if(typeof cr=="string")return cr===ar;var hr=cr.tagClass===ar.tagClass&&cr.type===ar.type&&cr.constructed===ar.constructed&&cr.composed===ar.composed&&asn1$2.equals(cr.value,ar.value);return dr&&dr.includeBitStringContents&&(hr=hr&&cr.bitStringContents===ar.bitStringContents),hr};asn1$2.getBerValueLength=function(cr){var ar=cr.getByte();if(ar!==128){var dr,fr=ar&128;return fr?dr=cr.getInt((ar&127)<<3):dr=ar,dr}};function _checkBufferLength(cr,ar,dr){if(dr>ar){var fr=new Error("Too few bytes to parse DER.");throw fr.available=cr.length(),fr.remaining=ar,fr.requested=dr,fr}}var _getValueLength=function(cr,ar){var dr=cr.getByte();if(ar--,dr!==128){var fr,hr=dr&128;if(!hr)fr=dr;else{var pr=dr&127;_checkBufferLength(cr,ar,pr),fr=cr.getInt(pr<<3)}if(fr<0)throw new Error("Negative length: "+fr);return fr}};asn1$2.fromDer=function(cr,ar){ar===void 0&&(ar={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof ar=="boolean"&&(ar={strict:ar,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in ar||(ar.strict=!0),"parseAllBytes"in ar||(ar.parseAllBytes=!0),"decodeBitStrings"in ar||(ar.decodeBitStrings=!0),typeof cr=="string"&&(cr=forge$j.util.createBuffer(cr));var dr=cr.length(),fr=_fromDer(cr,cr.length(),0,ar);if(ar.parseAllBytes&&cr.length()!==0){var hr=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw hr.byteCount=dr,hr.remaining=cr.length(),hr}return fr};function _fromDer(cr,ar,dr,fr){var hr;_checkBufferLength(cr,ar,2);var pr=cr.getByte();ar--;var mr=pr&192,gr=pr&31;hr=cr.length();var yr=_getValueLength(cr,ar);if(ar-=hr-cr.length(),yr!==void 0&&yr>ar){if(fr.strict){var xr=new Error("Too few bytes to read ASN.1 value.");throw xr.available=cr.length(),xr.remaining=ar,xr.requested=yr,xr}yr=ar}var wr,br,Sr=(pr&32)===32;if(Sr)if(wr=[],yr===void 0)for(;;){if(_checkBufferLength(cr,ar,2),cr.bytes(2)===String.fromCharCode(0,0)){cr.getBytes(2),ar-=2;break}hr=cr.length(),wr.push(_fromDer(cr,ar,dr+1,fr)),ar-=hr-cr.length()}else for(;yr>0;)hr=cr.length(),wr.push(_fromDer(cr,yr,dr+1,fr)),ar-=hr-cr.length(),yr-=hr-cr.length();if(wr===void 0&&mr===asn1$2.Class.UNIVERSAL&&gr===asn1$2.Type.BITSTRING&&(br=cr.bytes(yr)),wr===void 0&&fr.decodeBitStrings&&mr===asn1$2.Class.UNIVERSAL&&gr===asn1$2.Type.BITSTRING&&yr>1){var vr=cr.read,Er=ar,Ar=0;if(gr===asn1$2.Type.BITSTRING&&(_checkBufferLength(cr,ar,1),Ar=cr.getByte(),ar--),Ar===0)try{hr=cr.length();var _r={strict:!0,decodeBitStrings:!0},Cr=_fromDer(cr,ar,dr+1,_r),kr=hr-cr.length();ar-=kr,gr==asn1$2.Type.BITSTRING&&kr++;var Rr=Cr.tagClass;kr===yr&&(Rr===asn1$2.Class.UNIVERSAL||Rr===asn1$2.Class.CONTEXT_SPECIFIC)&&(wr=[Cr])}catch{}wr===void 0&&(cr.read=vr,ar=Er)}if(wr===void 0){if(yr===void 0){if(fr.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");yr=ar}if(gr===asn1$2.Type.BMPSTRING)for(wr="";yr>0;yr-=2)_checkBufferLength(cr,ar,2),wr+=String.fromCharCode(cr.getInt16()),ar-=2;else wr=cr.getBytes(yr),ar-=yr}var Ir=br===void 0?null:{bitStringContents:br};return asn1$2.create(mr,gr,Sr,wr,Ir)}asn1$2.toDer=function(cr){var ar=forge$j.util.createBuffer(),dr=cr.tagClass|cr.type,fr=forge$j.util.createBuffer(),hr=!1;if("bitStringContents"in cr&&(hr=!0,cr.original&&(hr=asn1$2.equals(cr,cr.original))),hr)fr.putBytes(cr.bitStringContents);else if(cr.composed){cr.constructed?dr|=32:fr.putByte(0);for(var pr=0;pr<cr.value.length;++pr)cr.value[pr]!==void 0&&fr.putBuffer(asn1$2.toDer(cr.value[pr]))}else if(cr.type===asn1$2.Type.BMPSTRING)for(var pr=0;pr<cr.value.length;++pr)fr.putInt16(cr.value.charCodeAt(pr));else cr.type===asn1$2.Type.INTEGER&&cr.value.length>1&&(cr.value.charCodeAt(0)===0&&!(cr.value.charCodeAt(1)&128)||cr.value.charCodeAt(0)===255&&(cr.value.charCodeAt(1)&128)===128)?fr.putBytes(cr.value.substr(1)):fr.putBytes(cr.value);if(ar.putByte(dr),fr.length()<=127)ar.putByte(fr.length()&127);else{var mr=fr.length(),gr="";do gr+=String.fromCharCode(mr&255),mr=mr>>>8;while(mr>0);ar.putByte(gr.length|128);for(var pr=gr.length-1;pr>=0;--pr)ar.putByte(gr.charCodeAt(pr))}return ar.putBuffer(fr),ar};asn1$2.oidToDer=function(cr){var ar=cr.split("."),dr=forge$j.util.createBuffer();dr.putByte(40*parseInt(ar[0],10)+parseInt(ar[1],10));for(var fr,hr,pr,mr,gr=2;gr<ar.length;++gr){fr=!0,hr=[],pr=parseInt(ar[gr],10);do mr=pr&127,pr=pr>>>7,fr||(mr|=128),hr.push(mr),fr=!1;while(pr>0);for(var yr=hr.length-1;yr>=0;--yr)dr.putByte(hr[yr])}return dr};asn1$2.derToOid=function(cr){var ar;typeof cr=="string"&&(cr=forge$j.util.createBuffer(cr));var dr=cr.getByte();ar=Math.floor(dr/40)+"."+dr%40;for(var fr=0;cr.length()>0;)dr=cr.getByte(),fr=fr<<7,dr&128?fr+=dr&127:(ar+="."+(fr+dr),fr=0);return ar};asn1$2.utcTimeToDate=function(cr){var ar=new Date,dr=parseInt(cr.substr(0,2),10);dr=dr>=50?1900+dr:2e3+dr;var fr=parseInt(cr.substr(2,2),10)-1,hr=parseInt(cr.substr(4,2),10),pr=parseInt(cr.substr(6,2),10),mr=parseInt(cr.substr(8,2),10),gr=0;if(cr.length>11){var yr=cr.charAt(10),xr=10;yr!=="+"&&yr!=="-"&&(gr=parseInt(cr.substr(10,2),10),xr+=2)}if(ar.setUTCFullYear(dr,fr,hr),ar.setUTCHours(pr,mr,gr,0),xr&&(yr=cr.charAt(xr),yr==="+"||yr==="-")){var wr=parseInt(cr.substr(xr+1,2),10),br=parseInt(cr.substr(xr+4,2),10),Sr=wr*60+br;Sr*=6e4,yr==="+"?ar.setTime(+ar-Sr):ar.setTime(+ar+Sr)}return ar};asn1$2.generalizedTimeToDate=function(cr){var ar=new Date,dr=parseInt(cr.substr(0,4),10),fr=parseInt(cr.substr(4,2),10)-1,hr=parseInt(cr.substr(6,2),10),pr=parseInt(cr.substr(8,2),10),mr=parseInt(cr.substr(10,2),10),gr=parseInt(cr.substr(12,2),10),yr=0,xr=0,wr=!1;cr.charAt(cr.length-1)==="Z"&&(wr=!0);var br=cr.length-5,Sr=cr.charAt(br);if(Sr==="+"||Sr==="-"){var vr=parseInt(cr.substr(br+1,2),10),Er=parseInt(cr.substr(br+4,2),10);xr=vr*60+Er,xr*=6e4,Sr==="+"&&(xr*=-1),wr=!0}return cr.charAt(14)==="."&&(yr=parseFloat(cr.substr(14),10)*1e3),wr?(ar.setUTCFullYear(dr,fr,hr),ar.setUTCHours(pr,mr,gr,yr),ar.setTime(+ar+xr)):(ar.setFullYear(dr,fr,hr),ar.setHours(pr,mr,gr,yr)),ar};asn1$2.dateToUtcTime=function(cr){if(typeof cr=="string")return cr;var ar="",dr=[];dr.push((""+cr.getUTCFullYear()).substr(2)),dr.push(""+(cr.getUTCMonth()+1)),dr.push(""+cr.getUTCDate()),dr.push(""+cr.getUTCHours()),dr.push(""+cr.getUTCMinutes()),dr.push(""+cr.getUTCSeconds());for(var fr=0;fr<dr.length;++fr)dr[fr].length<2&&(ar+="0"),ar+=dr[fr];return ar+="Z",ar};asn1$2.dateToGeneralizedTime=function(cr){if(typeof cr=="string")return cr;var ar="",dr=[];dr.push(""+cr.getUTCFullYear()),dr.push(""+(cr.getUTCMonth()+1)),dr.push(""+cr.getUTCDate()),dr.push(""+cr.getUTCHours()),dr.push(""+cr.getUTCMinutes()),dr.push(""+cr.getUTCSeconds());for(var fr=0;fr<dr.length;++fr)dr[fr].length<2&&(ar+="0"),ar+=dr[fr];return ar+="Z",ar};asn1$2.integerToDer=function(cr){var ar=forge$j.util.createBuffer();if(cr>=-128&&cr<128)return ar.putSignedInt(cr,8);if(cr>=-32768&&cr<32768)return ar.putSignedInt(cr,16);if(cr>=-8388608&&cr<8388608)return ar.putSignedInt(cr,24);if(cr>=-2147483648&&cr<2147483648)return ar.putSignedInt(cr,32);var dr=new Error("Integer too large; max is 32-bits.");throw dr.integer=cr,dr};asn1$2.derToInteger=function(cr){typeof cr=="string"&&(cr=forge$j.util.createBuffer(cr));var ar=cr.length()*8;if(ar>32)throw new Error("Integer too large; max is 32-bits.");return cr.getSignedInt(ar)};asn1$2.validate=function(cr,ar,dr,fr){var hr=!1;if((cr.tagClass===ar.tagClass||typeof ar.tagClass>"u")&&(cr.type===ar.type||typeof ar.type>"u"))if(cr.constructed===ar.constructed||typeof ar.constructed>"u"){if(hr=!0,ar.value&&forge$j.util.isArray(ar.value))for(var pr=0,mr=0;hr&&mr<ar.value.length;++mr)hr=ar.value[mr].optional||!1,cr.value[pr]&&(hr=asn1$2.validate(cr.value[pr],ar.value[mr],dr,fr),hr?++pr:ar.value[mr].optional&&(hr=!0)),!hr&&fr&&fr.push("["+ar.name+'] Tag class "'+ar.tagClass+'", type "'+ar.type+'" expected value length "'+ar.value.length+'", got "'+cr.value.length+'"');if(hr&&dr&&(ar.capture&&(dr[ar.capture]=cr.value),ar.captureAsn1&&(dr[ar.captureAsn1]=cr),ar.captureBitStringContents&&"bitStringContents"in cr&&(dr[ar.captureBitStringContents]=cr.bitStringContents),ar.captureBitStringValue&&"bitStringContents"in cr))if(cr.bitStringContents.length<2)dr[ar.captureBitStringValue]="";else{var gr=cr.bitStringContents.charCodeAt(0);if(gr!==0)throw new Error("captureBitStringValue only supported for zero unused bits");dr[ar.captureBitStringValue]=cr.bitStringContents.slice(1)}}else fr&&fr.push("["+ar.name+'] Expected constructed "'+ar.constructed+'", got "'+cr.constructed+'"');else fr&&(cr.tagClass!==ar.tagClass&&fr.push("["+ar.name+'] Expected tag class "'+ar.tagClass+'", got "'+cr.tagClass+'"'),cr.type!==ar.type&&fr.push("["+ar.name+'] Expected type "'+ar.type+'", got "'+cr.type+'"'));return hr};var _nonLatinRegex=/[^\\u0000-\\u00ff]/;asn1$2.prettyPrint=function(cr,ar,dr){var fr="";ar=ar||0,dr=dr||2,ar>0&&(fr+=`
`);for(var hr="",pr=0;pr<ar*dr;++pr)hr+=" ";switch(fr+=hr+"Tag: ",cr.tagClass){case asn1$2.Class.UNIVERSAL:fr+="Universal:";break;case asn1$2.Class.APPLICATION:fr+="Application:";break;case asn1$2.Class.CONTEXT_SPECIFIC:fr+="Context-Specific:";break;case asn1$2.Class.PRIVATE:fr+="Private:";break}if(cr.tagClass===asn1$2.Class.UNIVERSAL)switch(fr+=cr.type,cr.type){case asn1$2.Type.NONE:fr+=" (None)";break;case asn1$2.Type.BOOLEAN:fr+=" (Boolean)";break;case asn1$2.Type.INTEGER:fr+=" (Integer)";break;case asn1$2.Type.BITSTRING:fr+=" (Bit string)";break;case asn1$2.Type.OCTETSTRING:fr+=" (Octet string)";break;case asn1$2.Type.NULL:fr+=" (Null)";break;case asn1$2.Type.OID:fr+=" (Object Identifier)";break;case asn1$2.Type.ODESC:fr+=" (Object Descriptor)";break;case asn1$2.Type.EXTERNAL:fr+=" (External or Instance of)";break;case asn1$2.Type.REAL:fr+=" (Real)";break;case asn1$2.Type.ENUMERATED:fr+=" (Enumerated)";break;case asn1$2.Type.EMBEDDED:fr+=" (Embedded PDV)";break;case asn1$2.Type.UTF8:fr+=" (UTF8)";break;case asn1$2.Type.ROID:fr+=" (Relative Object Identifier)";break;case asn1$2.Type.SEQUENCE:fr+=" (Sequence)";break;case asn1$2.Type.SET:fr+=" (Set)";break;case asn1$2.Type.PRINTABLESTRING:fr+=" (Printable String)";break;case asn1$2.Type.IA5String:fr+=" (IA5String (ASCII))";break;case asn1$2.Type.UTCTIME:fr+=" (UTC time)";break;case asn1$2.Type.GENERALIZEDTIME:fr+=" (Generalized time)";break;case asn1$2.Type.BMPSTRING:fr+=" (BMP String)";break}else fr+=cr.type;if(fr+=`
`,fr+=hr+"Constructed: "+cr.constructed+`
`,cr.composed){for(var mr=0,gr="",pr=0;pr<cr.value.length;++pr)cr.value[pr]!==void 0&&(mr+=1,gr+=asn1$2.prettyPrint(cr.value[pr],ar+1,dr),pr+1<cr.value.length&&(gr+=","));fr+=hr+"Sub values: "+mr+gr}else{if(fr+=hr+"Value: ",cr.type===asn1$2.Type.OID){var yr=asn1$2.derToOid(cr.value);fr+=yr,forge$j.pki&&forge$j.pki.oids&&yr in forge$j.pki.oids&&(fr+=" ("+forge$j.pki.oids[yr]+") ")}if(cr.type===asn1$2.Type.INTEGER)try{fr+=asn1$2.derToInteger(cr.value)}catch{fr+="0x"+forge$j.util.bytesToHex(cr.value)}else if(cr.type===asn1$2.Type.BITSTRING){if(cr.value.length>1?fr+="0x"+forge$j.util.bytesToHex(cr.value.slice(1)):fr+="(none)",cr.value.length>0){var xr=cr.value.charCodeAt(0);xr==1?fr+=" (1 unused bit shown)":xr>1&&(fr+=" ("+xr+" unused bits shown)")}}else if(cr.type===asn1$2.Type.OCTETSTRING)_nonLatinRegex.test(cr.value)||(fr+="("+cr.value+") "),fr+="0x"+forge$j.util.bytesToHex(cr.value);else if(cr.type===asn1$2.Type.UTF8)try{fr+=forge$j.util.decodeUtf8(cr.value)}catch(wr){if(wr.message==="URI malformed")fr+="0x"+forge$j.util.bytesToHex(cr.value)+" (malformed UTF8)";else throw wr}else cr.type===asn1$2.Type.PRINTABLESTRING||cr.type===asn1$2.Type.IA5String?fr+=cr.value:_nonLatinRegex.test(cr.value)?fr+="0x"+forge$j.util.bytesToHex(cr.value):cr.value.length===0?fr+="[null]":fr+=cr.value}return fr};var forge$i=forge$m;forge$i.cipher=forge$i.cipher||{};forge$i.cipher.algorithms=forge$i.cipher.algorithms||{};forge$i.cipher.createCipher=function(cr,ar){var dr=cr;if(typeof dr=="string"&&(dr=forge$i.cipher.getAlgorithm(dr),dr&&(dr=dr())),!dr)throw new Error("Unsupported algorithm: "+cr);return new forge$i.cipher.BlockCipher({algorithm:dr,key:ar,decrypt:!1})};forge$i.cipher.createDecipher=function(cr,ar){var dr=cr;if(typeof dr=="string"&&(dr=forge$i.cipher.getAlgorithm(dr),dr&&(dr=dr())),!dr)throw new Error("Unsupported algorithm: "+cr);return new forge$i.cipher.BlockCipher({algorithm:dr,key:ar,decrypt:!0})};forge$i.cipher.registerAlgorithm=function(cr,ar){cr=cr.toUpperCase(),forge$i.cipher.algorithms[cr]=ar};forge$i.cipher.getAlgorithm=function(cr){return cr=cr.toUpperCase(),cr in forge$i.cipher.algorithms?forge$i.cipher.algorithms[cr]:null};var BlockCipher=forge$i.cipher.BlockCipher=function(cr){this.algorithm=cr.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=cr.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=cr.decrypt,this.algorithm.initialize(cr)};BlockCipher.prototype.start=function(cr){cr=cr||{};var ar={};for(var dr in cr)ar[dr]=cr[dr];ar.decrypt=this._decrypt,this._finish=!1,this._input=forge$i.util.createBuffer(),this.output=cr.output||forge$i.util.createBuffer(),this.mode.start(ar)};BlockCipher.prototype.update=function(cr){for(cr&&this._input.putBuffer(cr);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};BlockCipher.prototype.finish=function(cr){cr&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(dr){return cr(this.blockSize,dr,!1)},this.mode.unpad=function(dr){return cr(this.blockSize,dr,!0)});var ar={};return ar.decrypt=this._decrypt,ar.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,ar)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,ar))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,ar))};var forge$h=forge$m;forge$h.cipher=forge$h.cipher||{};var modes=forge$h.cipher.modes=forge$h.cipher.modes||{};modes.ecb=function(cr){cr=cr||{},this.name="ECB",this.cipher=cr.cipher,this.blockSize=cr.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes.ecb.prototype.start=function(cr){};modes.ecb.prototype.encrypt=function(cr,ar,dr){if(cr.length()<this.blockSize&&!(dr&&cr.length()>0))return!0;for(var fr=0;fr<this._ints;++fr)this._inBlock[fr]=cr.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var fr=0;fr<this._ints;++fr)ar.putInt32(this._outBlock[fr])};modes.ecb.prototype.decrypt=function(cr,ar,dr){if(cr.length()<this.blockSize&&!(dr&&cr.length()>0))return!0;for(var fr=0;fr<this._ints;++fr)this._inBlock[fr]=cr.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var fr=0;fr<this._ints;++fr)ar.putInt32(this._outBlock[fr])};modes.ecb.prototype.pad=function(cr,ar){var dr=cr.length()===this.blockSize?this.blockSize:this.blockSize-cr.length();return cr.fillWithByte(dr,dr),!0};modes.ecb.prototype.unpad=function(cr,ar){if(ar.overflow>0)return!1;var dr=cr.length(),fr=cr.at(dr-1);return fr>this.blockSize<<2?!1:(cr.truncate(fr),!0)};modes.cbc=function(cr){cr=cr||{},this.name="CBC",this.cipher=cr.cipher,this.blockSize=cr.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes.cbc.prototype.start=function(cr){if(cr.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in cr)this._iv=transformIV(cr.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};modes.cbc.prototype.encrypt=function(cr,ar,dr){if(cr.length()<this.blockSize&&!(dr&&cr.length()>0))return!0;for(var fr=0;fr<this._ints;++fr)this._inBlock[fr]=this._prev[fr]^cr.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var fr=0;fr<this._ints;++fr)ar.putInt32(this._outBlock[fr]);this._prev=this._outBlock};modes.cbc.prototype.decrypt=function(cr,ar,dr){if(cr.length()<this.blockSize&&!(dr&&cr.length()>0))return!0;for(var fr=0;fr<this._ints;++fr)this._inBlock[fr]=cr.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var fr=0;fr<this._ints;++fr)ar.putInt32(this._prev[fr]^this._outBlock[fr]);this._prev=this._inBlock.slice(0)};modes.cbc.prototype.pad=function(cr,ar){var dr=cr.length()===this.blockSize?this.blockSize:this.blockSize-cr.length();return cr.fillWithByte(dr,dr),!0};modes.cbc.prototype.unpad=function(cr,ar){if(ar.overflow>0)return!1;var dr=cr.length(),fr=cr.at(dr-1);return fr>this.blockSize<<2?!1:(cr.truncate(fr),!0)};modes.cfb=function(cr){cr=cr||{},this.name="CFB",this.cipher=cr.cipher,this.blockSize=cr.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=forge$h.util.createBuffer(),this._partialBytes=0};modes.cfb.prototype.start=function(cr){if(!("iv"in cr))throw new Error("Invalid IV parameter.");this._iv=transformIV(cr.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes.cfb.prototype.encrypt=function(cr,ar,dr){var fr=cr.length();if(fr===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&fr>=this.blockSize){for(var hr=0;hr<this._ints;++hr)this._inBlock[hr]=cr.getInt32()^this._outBlock[hr],ar.putInt32(this._inBlock[hr]);return}var pr=(this.blockSize-fr)%this.blockSize;pr>0&&(pr=this.blockSize-pr),this._partialOutput.clear();for(var hr=0;hr<this._ints;++hr)this._partialBlock[hr]=cr.getInt32()^this._outBlock[hr],this._partialOutput.putInt32(this._partialBlock[hr]);if(pr>0)cr.read-=this.blockSize;else for(var hr=0;hr<this._ints;++hr)this._inBlock[hr]=this._partialBlock[hr];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),pr>0&&!dr)return ar.putBytes(this._partialOutput.getBytes(pr-this._partialBytes)),this._partialBytes=pr,!0;ar.putBytes(this._partialOutput.getBytes(fr-this._partialBytes)),this._partialBytes=0};modes.cfb.prototype.decrypt=function(cr,ar,dr){var fr=cr.length();if(fr===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&fr>=this.blockSize){for(var hr=0;hr<this._ints;++hr)this._inBlock[hr]=cr.getInt32(),ar.putInt32(this._inBlock[hr]^this._outBlock[hr]);return}var pr=(this.blockSize-fr)%this.blockSize;pr>0&&(pr=this.blockSize-pr),this._partialOutput.clear();for(var hr=0;hr<this._ints;++hr)this._partialBlock[hr]=cr.getInt32(),this._partialOutput.putInt32(this._partialBlock[hr]^this._outBlock[hr]);if(pr>0)cr.read-=this.blockSize;else for(var hr=0;hr<this._ints;++hr)this._inBlock[hr]=this._partialBlock[hr];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),pr>0&&!dr)return ar.putBytes(this._partialOutput.getBytes(pr-this._partialBytes)),this._partialBytes=pr,!0;ar.putBytes(this._partialOutput.getBytes(fr-this._partialBytes)),this._partialBytes=0};modes.ofb=function(cr){cr=cr||{},this.name="OFB",this.cipher=cr.cipher,this.blockSize=cr.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$h.util.createBuffer(),this._partialBytes=0};modes.ofb.prototype.start=function(cr){if(!("iv"in cr))throw new Error("Invalid IV parameter.");this._iv=transformIV(cr.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes.ofb.prototype.encrypt=function(cr,ar,dr){var fr=cr.length();if(cr.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&fr>=this.blockSize){for(var hr=0;hr<this._ints;++hr)ar.putInt32(cr.getInt32()^this._outBlock[hr]),this._inBlock[hr]=this._outBlock[hr];return}var pr=(this.blockSize-fr)%this.blockSize;pr>0&&(pr=this.blockSize-pr),this._partialOutput.clear();for(var hr=0;hr<this._ints;++hr)this._partialOutput.putInt32(cr.getInt32()^this._outBlock[hr]);if(pr>0)cr.read-=this.blockSize;else for(var hr=0;hr<this._ints;++hr)this._inBlock[hr]=this._outBlock[hr];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),pr>0&&!dr)return ar.putBytes(this._partialOutput.getBytes(pr-this._partialBytes)),this._partialBytes=pr,!0;ar.putBytes(this._partialOutput.getBytes(fr-this._partialBytes)),this._partialBytes=0};modes.ofb.prototype.decrypt=modes.ofb.prototype.encrypt;modes.ctr=function(cr){cr=cr||{},this.name="CTR",this.cipher=cr.cipher,this.blockSize=cr.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$h.util.createBuffer(),this._partialBytes=0};modes.ctr.prototype.start=function(cr){if(!("iv"in cr))throw new Error("Invalid IV parameter.");this._iv=transformIV(cr.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes.ctr.prototype.encrypt=function(cr,ar,dr){var fr=cr.length();if(fr===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&fr>=this.blockSize)for(var hr=0;hr<this._ints;++hr)ar.putInt32(cr.getInt32()^this._outBlock[hr]);else{var pr=(this.blockSize-fr)%this.blockSize;pr>0&&(pr=this.blockSize-pr),this._partialOutput.clear();for(var hr=0;hr<this._ints;++hr)this._partialOutput.putInt32(cr.getInt32()^this._outBlock[hr]);if(pr>0&&(cr.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),pr>0&&!dr)return ar.putBytes(this._partialOutput.getBytes(pr-this._partialBytes)),this._partialBytes=pr,!0;ar.putBytes(this._partialOutput.getBytes(fr-this._partialBytes)),this._partialBytes=0}inc32(this._inBlock)};modes.ctr.prototype.decrypt=modes.ctr.prototype.encrypt;modes.gcm=function(cr){cr=cr||{},this.name="GCM",this.cipher=cr.cipher,this.blockSize=cr.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=forge$h.util.createBuffer(),this._partialBytes=0,this._R=3774873600};modes.gcm.prototype.start=function(cr){if(!("iv"in cr))throw new Error("Invalid IV parameter.");var ar=forge$h.util.createBuffer(cr.iv);this._cipherLength=0;var dr;if("additionalData"in cr?dr=forge$h.util.createBuffer(cr.additionalData):dr=forge$h.util.createBuffer(),"tagLength"in cr?this._tagLength=cr.tagLength:this._tagLength=128,this._tag=null,cr.decrypt&&(this._tag=forge$h.util.createBuffer(cr.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var fr=ar.length();if(fr===12)this._j0=[ar.getInt32(),ar.getInt32(),ar.getInt32(),1];else{for(this._j0=[0,0,0,0];ar.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[ar.getInt32(),ar.getInt32(),ar.getInt32(),ar.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(from64To32(fr*8)))}this._inBlock=this._j0.slice(0),inc32(this._inBlock),this._partialBytes=0,dr=forge$h.util.createBuffer(dr),this._aDataLength=from64To32(dr.length()*8);var hr=dr.length()%this.blockSize;for(hr&&dr.fillWithByte(0,this.blockSize-hr),this._s=[0,0,0,0];dr.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[dr.getInt32(),dr.getInt32(),dr.getInt32(),dr.getInt32()])};modes.gcm.prototype.encrypt=function(cr,ar,dr){var fr=cr.length();if(fr===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&fr>=this.blockSize){for(var hr=0;hr<this._ints;++hr)ar.putInt32(this._outBlock[hr]^=cr.getInt32());this._cipherLength+=this.blockSize}else{var pr=(this.blockSize-fr)%this.blockSize;pr>0&&(pr=this.blockSize-pr),this._partialOutput.clear();for(var hr=0;hr<this._ints;++hr)this._partialOutput.putInt32(cr.getInt32()^this._outBlock[hr]);if(pr<=0||dr){if(dr){var mr=fr%this.blockSize;this._cipherLength+=mr,this._partialOutput.truncate(this.blockSize-mr)}else this._cipherLength+=this.blockSize;for(var hr=0;hr<this._ints;++hr)this._outBlock[hr]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),pr>0&&!dr)return cr.read-=this.blockSize,ar.putBytes(this._partialOutput.getBytes(pr-this._partialBytes)),this._partialBytes=pr,!0;ar.putBytes(this._partialOutput.getBytes(fr-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),inc32(this._inBlock)};modes.gcm.prototype.decrypt=function(cr,ar,dr){var fr=cr.length();if(fr<this.blockSize&&!(dr&&fr>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),inc32(this._inBlock),this._hashBlock[0]=cr.getInt32(),this._hashBlock[1]=cr.getInt32(),this._hashBlock[2]=cr.getInt32(),this._hashBlock[3]=cr.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var hr=0;hr<this._ints;++hr)ar.putInt32(this._outBlock[hr]^this._hashBlock[hr]);fr<this.blockSize?this._cipherLength+=fr%this.blockSize:this._cipherLength+=this.blockSize};modes.gcm.prototype.afterFinish=function(cr,ar){var dr=!0;ar.decrypt&&ar.overflow&&cr.truncate(this.blockSize-ar.overflow),this.tag=forge$h.util.createBuffer();var fr=this._aDataLength.concat(from64To32(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,fr);var hr=[];this.cipher.encrypt(this._j0,hr);for(var pr=0;pr<this._ints;++pr)this.tag.putInt32(this._s[pr]^hr[pr]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),ar.decrypt&&this.tag.bytes()!==this._tag&&(dr=!1),dr};modes.gcm.prototype.multiply=function(cr,ar){for(var dr=[0,0,0,0],fr=ar.slice(0),hr=0;hr<128;++hr){var pr=cr[hr/32|0]&1<<31-hr%32;pr&&(dr[0]^=fr[0],dr[1]^=fr[1],dr[2]^=fr[2],dr[3]^=fr[3]),this.pow(fr,fr)}return dr};modes.gcm.prototype.pow=function(cr,ar){for(var dr=cr[3]&1,fr=3;fr>0;--fr)ar[fr]=cr[fr]>>>1|(cr[fr-1]&1)<<31;ar[0]=cr[0]>>>1,dr&&(ar[0]^=this._R)};modes.gcm.prototype.tableMultiply=function(cr){for(var ar=[0,0,0,0],dr=0;dr<32;++dr){var fr=dr/8|0,hr=cr[fr]>>>(7-dr%8)*4&15,pr=this._m[dr][hr];ar[0]^=pr[0],ar[1]^=pr[1],ar[2]^=pr[2],ar[3]^=pr[3]}return ar};modes.gcm.prototype.ghash=function(cr,ar,dr){return ar[0]^=dr[0],ar[1]^=dr[1],ar[2]^=dr[2],ar[3]^=dr[3],this.tableMultiply(ar)};modes.gcm.prototype.generateHashTable=function(cr,ar){for(var dr=8/ar,fr=4*dr,hr=16*dr,pr=new Array(hr),mr=0;mr<hr;++mr){var gr=[0,0,0,0],yr=mr/fr|0,xr=(fr-1-mr%fr)*ar;gr[yr]=1<<ar-1<<xr,pr[mr]=this.generateSubHashTable(this.multiply(gr,cr),ar)}return pr};modes.gcm.prototype.generateSubHashTable=function(cr,ar){var dr=1<<ar,fr=dr>>>1,hr=new Array(dr);hr[fr]=cr.slice(0);for(var pr=fr>>>1;pr>0;)this.pow(hr[2*pr],hr[pr]=[]),pr>>=1;for(pr=2;pr<fr;){for(var mr=1;mr<pr;++mr){var gr=hr[pr],yr=hr[mr];hr[pr+mr]=[gr[0]^yr[0],gr[1]^yr[1],gr[2]^yr[2],gr[3]^yr[3]]}pr*=2}for(hr[0]=[0,0,0,0],pr=fr+1;pr<dr;++pr){var xr=hr[pr^fr];hr[pr]=[cr[0]^xr[0],cr[1]^xr[1],cr[2]^xr[2],cr[3]^xr[3]]}return hr};function transformIV(cr,ar){if(typeof cr=="string"&&(cr=forge$h.util.createBuffer(cr)),forge$h.util.isArray(cr)&&cr.length>4){var dr=cr;cr=forge$h.util.createBuffer();for(var fr=0;fr<dr.length;++fr)cr.putByte(dr[fr])}if(cr.length()<ar)throw new Error("Invalid IV length; got "+cr.length()+" bytes and expected "+ar+" bytes.");if(!forge$h.util.isArray(cr)){for(var hr=[],pr=ar/4,fr=0;fr<pr;++fr)hr.push(cr.getInt32());cr=hr}return cr}function inc32(cr){cr[cr.length-1]=cr[cr.length-1]+1&4294967295}function from64To32(cr){return[cr/4294967296|0,cr&4294967295]}var forge$g=forge$m;forge$g.aes=forge$g.aes||{};forge$g.aes.startEncrypting=function(cr,ar,dr,fr){var hr=_createCipher$1({key:cr,output:dr,decrypt:!1,mode:fr});return hr.start(ar),hr};forge$g.aes.createEncryptionCipher=function(cr,ar){return _createCipher$1({key:cr,output:null,decrypt:!1,mode:ar})};forge$g.aes.startDecrypting=function(cr,ar,dr,fr){var hr=_createCipher$1({key:cr,output:dr,decrypt:!0,mode:fr});return hr.start(ar),hr};forge$g.aes.createDecryptionCipher=function(cr,ar){return _createCipher$1({key:cr,output:null,decrypt:!0,mode:ar})};forge$g.aes.Algorithm=function(cr,ar){init||initialize();var dr=this;dr.name=cr,dr.mode=new ar({blockSize:16,cipher:{encrypt:function(fr,hr){return _updateBlock$1(dr._w,fr,hr,!1)},decrypt:function(fr,hr){return _updateBlock$1(dr._w,fr,hr,!0)}}}),dr._init=!1};forge$g.aes.Algorithm.prototype.initialize=function(cr){if(!this._init){var ar=cr.key,dr;if(typeof ar=="string"&&(ar.length===16||ar.length===24||ar.length===32))ar=forge$g.util.createBuffer(ar);else if(forge$g.util.isArray(ar)&&(ar.length===16||ar.length===24||ar.length===32)){dr=ar,ar=forge$g.util.createBuffer();for(var fr=0;fr<dr.length;++fr)ar.putByte(dr[fr])}if(!forge$g.util.isArray(ar)){dr=ar,ar=[];var hr=dr.length();if(hr===16||hr===24||hr===32){hr=hr>>>2;for(var fr=0;fr<hr;++fr)ar.push(dr.getInt32())}}if(!forge$g.util.isArray(ar)||!(ar.length===4||ar.length===6||ar.length===8))throw new Error("Invalid key parameter.");var pr=this.mode.name,mr=["CFB","OFB","CTR","GCM"].indexOf(pr)!==-1;this._w=_expandKey(ar,cr.decrypt&&!mr),this._init=!0}};forge$g.aes._expandKey=function(cr,ar){return init||initialize(),_expandKey(cr,ar)};forge$g.aes._updateBlock=_updateBlock$1;registerAlgorithm$1("AES-ECB",forge$g.cipher.modes.ecb);registerAlgorithm$1("AES-CBC",forge$g.cipher.modes.cbc);registerAlgorithm$1("AES-CFB",forge$g.cipher.modes.cfb);registerAlgorithm$1("AES-OFB",forge$g.cipher.modes.ofb);registerAlgorithm$1("AES-CTR",forge$g.cipher.modes.ctr);registerAlgorithm$1("AES-GCM",forge$g.cipher.modes.gcm);function registerAlgorithm$1(cr,ar){var dr=function(){return new forge$g.aes.Algorithm(cr,ar)};forge$g.cipher.registerAlgorithm(cr,dr)}var init=!1,Nb=4,sbox,isbox,rcon,mix,imix;function initialize(){init=!0,rcon=[0,1,2,4,8,16,32,64,128,27,54];for(var cr=new Array(256),ar=0;ar<128;++ar)cr[ar]=ar<<1,cr[ar+128]=ar+128<<1^283;sbox=new Array(256),isbox=new Array(256),mix=new Array(4),imix=new Array(4);for(var ar=0;ar<4;++ar)mix[ar]=new Array(256),imix[ar]=new Array(256);for(var dr=0,fr=0,hr,pr,mr,gr,yr,xr,wr,ar=0;ar<256;++ar){gr=fr^fr<<1^fr<<2^fr<<3^fr<<4,gr=gr>>8^gr&255^99,sbox[dr]=gr,isbox[gr]=dr,yr=cr[gr],hr=cr[dr],pr=cr[hr],mr=cr[pr],xr=yr<<24^gr<<16^gr<<8^(gr^yr),wr=(hr^pr^mr)<<24^(dr^mr)<<16^(dr^pr^mr)<<8^(dr^hr^mr);for(var br=0;br<4;++br)mix[br][dr]=xr,imix[br][gr]=wr,xr=xr<<24|xr>>>8,wr=wr<<24|wr>>>8;dr===0?dr=fr=1:(dr=hr^cr[cr[cr[hr^mr]]],fr^=cr[cr[fr]])}}function _expandKey(cr,ar){for(var dr=cr.slice(0),fr,hr=1,pr=dr.length,mr=pr+6+1,gr=Nb*mr,yr=pr;yr<gr;++yr)fr=dr[yr-1],yr%pr===0?(fr=sbox[fr>>>16&255]<<24^sbox[fr>>>8&255]<<16^sbox[fr&255]<<8^sbox[fr>>>24]^rcon[hr]<<24,hr++):pr>6&&yr%pr===4&&(fr=sbox[fr>>>24]<<24^sbox[fr>>>16&255]<<16^sbox[fr>>>8&255]<<8^sbox[fr&255]),dr[yr]=dr[yr-pr]^fr;if(ar){var xr,wr=imix[0],br=imix[1],Sr=imix[2],vr=imix[3],Er=dr.slice(0);gr=dr.length;for(var yr=0,Ar=gr-Nb;yr<gr;yr+=Nb,Ar-=Nb)if(yr===0||yr===gr-Nb)Er[yr]=dr[Ar],Er[yr+1]=dr[Ar+3],Er[yr+2]=dr[Ar+2],Er[yr+3]=dr[Ar+1];else for(var _r=0;_r<Nb;++_r)xr=dr[Ar+_r],Er[yr+(3&-_r)]=wr[sbox[xr>>>24]]^br[sbox[xr>>>16&255]]^Sr[sbox[xr>>>8&255]]^vr[sbox[xr&255]];dr=Er}return dr}function _updateBlock$1(cr,ar,dr,fr){var hr=cr.length/4-1,pr,mr,gr,yr,xr;fr?(pr=imix[0],mr=imix[1],gr=imix[2],yr=imix[3],xr=isbox):(pr=mix[0],mr=mix[1],gr=mix[2],yr=mix[3],xr=sbox);var wr,br,Sr,vr,Er,Ar,_r;wr=ar[0]^cr[0],br=ar[fr?3:1]^cr[1],Sr=ar[2]^cr[2],vr=ar[fr?1:3]^cr[3];for(var Cr=3,kr=1;kr<hr;++kr)Er=pr[wr>>>24]^mr[br>>>16&255]^gr[Sr>>>8&255]^yr[vr&255]^cr[++Cr],Ar=pr[br>>>24]^mr[Sr>>>16&255]^gr[vr>>>8&255]^yr[wr&255]^cr[++Cr],_r=pr[Sr>>>24]^mr[vr>>>16&255]^gr[wr>>>8&255]^yr[br&255]^cr[++Cr],vr=pr[vr>>>24]^mr[wr>>>16&255]^gr[br>>>8&255]^yr[Sr&255]^cr[++Cr],wr=Er,br=Ar,Sr=_r;dr[0]=xr[wr>>>24]<<24^xr[br>>>16&255]<<16^xr[Sr>>>8&255]<<8^xr[vr&255]^cr[++Cr],dr[fr?3:1]=xr[br>>>24]<<24^xr[Sr>>>16&255]<<16^xr[vr>>>8&255]<<8^xr[wr&255]^cr[++Cr],dr[2]=xr[Sr>>>24]<<24^xr[vr>>>16&255]<<16^xr[wr>>>8&255]<<8^xr[br&255]^cr[++Cr],dr[fr?1:3]=xr[vr>>>24]<<24^xr[wr>>>16&255]<<16^xr[br>>>8&255]<<8^xr[Sr&255]^cr[++Cr]}function _createCipher$1(cr){cr=cr||{};var ar=(cr.mode||"CBC").toUpperCase(),dr="AES-"+ar,fr;cr.decrypt?fr=forge$g.cipher.createDecipher(dr,cr.key):fr=forge$g.cipher.createCipher(dr,cr.key);var hr=fr.start;return fr.start=function(pr,mr){var gr=null;mr instanceof forge$g.util.ByteBuffer&&(gr=mr,mr={}),mr=mr||{},mr.output=gr,mr.iv=pr,hr.call(fr,mr)},fr}var forge$f=forge$m;forge$f.des=forge$f.des||{};forge$f.des.startEncrypting=function(cr,ar,dr,fr){var hr=_createCipher({key:cr,output:dr,decrypt:!1,mode:fr||(ar===null?"ECB":"CBC")});return hr.start(ar),hr};forge$f.des.createEncryptionCipher=function(cr,ar){return _createCipher({key:cr,output:null,decrypt:!1,mode:ar})};forge$f.des.startDecrypting=function(cr,ar,dr,fr){var hr=_createCipher({key:cr,output:dr,decrypt:!0,mode:fr||(ar===null?"ECB":"CBC")});return hr.start(ar),hr};forge$f.des.createDecryptionCipher=function(cr,ar){return _createCipher({key:cr,output:null,decrypt:!0,mode:ar})};forge$f.des.Algorithm=function(cr,ar){var dr=this;dr.name=cr,dr.mode=new ar({blockSize:8,cipher:{encrypt:function(fr,hr){return _updateBlock(dr._keys,fr,hr,!1)},decrypt:function(fr,hr){return _updateBlock(dr._keys,fr,hr,!0)}}}),dr._init=!1};forge$f.des.Algorithm.prototype.initialize=function(cr){if(!this._init){var ar=forge$f.util.createBuffer(cr.key);if(this.name.indexOf("3DES")===0&&ar.length()!==24)throw new Error("Invalid Triple-DES key size: "+ar.length()*8);this._keys=_createKeys(ar),this._init=!0}};registerAlgorithm("DES-ECB",forge$f.cipher.modes.ecb);registerAlgorithm("DES-CBC",forge$f.cipher.modes.cbc);registerAlgorithm("DES-CFB",forge$f.cipher.modes.cfb);registerAlgorithm("DES-OFB",forge$f.cipher.modes.ofb);registerAlgorithm("DES-CTR",forge$f.cipher.modes.ctr);registerAlgorithm("3DES-ECB",forge$f.cipher.modes.ecb);registerAlgorithm("3DES-CBC",forge$f.cipher.modes.cbc);registerAlgorithm("3DES-CFB",forge$f.cipher.modes.cfb);registerAlgorithm("3DES-OFB",forge$f.cipher.modes.ofb);registerAlgorithm("3DES-CTR",forge$f.cipher.modes.ctr);function registerAlgorithm(cr,ar){var dr=function(){return new forge$f.des.Algorithm(cr,ar)};forge$f.cipher.registerAlgorithm(cr,dr)}var spfunction1=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],spfunction2=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],spfunction3=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],spfunction4=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],spfunction5=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],spfunction6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],spfunction7=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],spfunction8=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function _createKeys(cr){for(var ar=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],dr=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],fr=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],hr=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],pr=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],mr=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],gr=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],yr=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],xr=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],wr=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],br=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],Sr=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],vr=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],Er=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],Ar=cr.length()>8?3:1,_r=[],Cr=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],kr=0,Rr,Ir=0;Ir<Ar;Ir++){var Nr=cr.getInt32(),Pr=cr.getInt32();Rr=(Nr>>>4^Pr)&252645135,Pr^=Rr,Nr^=Rr<<4,Rr=(Pr>>>-16^Nr)&65535,Nr^=Rr,Pr^=Rr<<-16,Rr=(Nr>>>2^Pr)&858993459,Pr^=Rr,Nr^=Rr<<2,Rr=(Pr>>>-16^Nr)&65535,Nr^=Rr,Pr^=Rr<<-16,Rr=(Nr>>>1^Pr)&1431655765,Pr^=Rr,Nr^=Rr<<1,Rr=(Pr>>>8^Nr)&16711935,Nr^=Rr,Pr^=Rr<<8,Rr=(Nr>>>1^Pr)&1431655765,Pr^=Rr,Nr^=Rr<<1,Rr=Nr<<8|Pr>>>20&240,Nr=Pr<<24|Pr<<8&16711680|Pr>>>8&65280|Pr>>>24&240,Pr=Rr;for(var Tr=0;Tr<Cr.length;++Tr){Cr[Tr]?(Nr=Nr<<2|Nr>>>26,Pr=Pr<<2|Pr>>>26):(Nr=Nr<<1|Nr>>>27,Pr=Pr<<1|Pr>>>27),Nr&=-15,Pr&=-15;var Br=ar[Nr>>>28]|dr[Nr>>>24&15]|fr[Nr>>>20&15]|hr[Nr>>>16&15]|pr[Nr>>>12&15]|mr[Nr>>>8&15]|gr[Nr>>>4&15],Fr=yr[Pr>>>28]|xr[Pr>>>24&15]|wr[Pr>>>20&15]|br[Pr>>>16&15]|Sr[Pr>>>12&15]|vr[Pr>>>8&15]|Er[Pr>>>4&15];Rr=(Fr>>>16^Br)&65535,_r[kr++]=Br^Rr,_r[kr++]=Fr^Rr<<16}}return _r}function _updateBlock(cr,ar,dr,fr){var hr=cr.length===32?3:9,pr;hr===3?pr=fr?[30,-2,-2]:[0,32,2]:pr=fr?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var mr,gr=ar[0],yr=ar[1];mr=(gr>>>4^yr)&252645135,yr^=mr,gr^=mr<<4,mr=(gr>>>16^yr)&65535,yr^=mr,gr^=mr<<16,mr=(yr>>>2^gr)&858993459,gr^=mr,yr^=mr<<2,mr=(yr>>>8^gr)&16711935,gr^=mr,yr^=mr<<8,mr=(gr>>>1^yr)&1431655765,yr^=mr,gr^=mr<<1,gr=gr<<1|gr>>>31,yr=yr<<1|yr>>>31;for(var xr=0;xr<hr;xr+=3){for(var wr=pr[xr+1],br=pr[xr+2],Sr=pr[xr];Sr!=wr;Sr+=br){var vr=yr^cr[Sr],Er=(yr>>>4|yr<<28)^cr[Sr+1];mr=gr,gr=yr,yr=mr^(spfunction2[vr>>>24&63]|spfunction4[vr>>>16&63]|spfunction6[vr>>>8&63]|spfunction8[vr&63]|spfunction1[Er>>>24&63]|spfunction3[Er>>>16&63]|spfunction5[Er>>>8&63]|spfunction7[Er&63])}mr=gr,gr=yr,yr=mr}gr=gr>>>1|gr<<31,yr=yr>>>1|yr<<31,mr=(gr>>>1^yr)&1431655765,yr^=mr,gr^=mr<<1,mr=(yr>>>8^gr)&16711935,gr^=mr,yr^=mr<<8,mr=(yr>>>2^gr)&858993459,gr^=mr,yr^=mr<<2,mr=(gr>>>16^yr)&65535,yr^=mr,gr^=mr<<16,mr=(gr>>>4^yr)&252645135,yr^=mr,gr^=mr<<4,dr[0]=gr,dr[1]=yr}function _createCipher(cr){cr=cr||{};var ar=(cr.mode||"CBC").toUpperCase(),dr="DES-"+ar,fr;cr.decrypt?fr=forge$f.cipher.createDecipher(dr,cr.key):fr=forge$f.cipher.createCipher(dr,cr.key);var hr=fr.start;return fr.start=function(pr,mr){var gr=null;mr instanceof forge$f.util.ByteBuffer&&(gr=mr,mr={}),mr=mr||{},mr.output=gr,mr.iv=pr,hr.call(fr,mr)},fr}var forge$e=forge$m;forge$e.md=forge$e.md||{};forge$e.md.algorithms=forge$e.md.algorithms||{};var forge$d=forge$m,hmac=forge$d.hmac=forge$d.hmac||{};hmac.create=function(){var cr=null,ar=null,dr=null,fr=null,hr={};return hr.start=function(pr,mr){if(pr!==null)if(typeof pr=="string")if(pr=pr.toLowerCase(),pr in forge$d.md.algorithms)ar=forge$d.md.algorithms[pr].create();else throw new Error('Unknown hash algorithm "'+pr+'"');else ar=pr;if(mr===null)mr=cr;else{if(typeof mr=="string")mr=forge$d.util.createBuffer(mr);else if(forge$d.util.isArray(mr)){var gr=mr;mr=forge$d.util.createBuffer();for(var yr=0;yr<gr.length;++yr)mr.putByte(gr[yr])}var xr=mr.length();xr>ar.blockLength&&(ar.start(),ar.update(mr.bytes()),mr=ar.digest()),dr=forge$d.util.createBuffer(),fr=forge$d.util.createBuffer(),xr=mr.length();for(var yr=0;yr<xr;++yr){var gr=mr.at(yr);dr.putByte(54^gr),fr.putByte(92^gr)}if(xr<ar.blockLength)for(var gr=ar.blockLength-xr,yr=0;yr<gr;++yr)dr.putByte(54),fr.putByte(92);cr=mr,dr=dr.bytes(),fr=fr.bytes()}ar.start(),ar.update(dr)},hr.update=function(pr){ar.update(pr)},hr.getMac=function(){var pr=ar.digest().bytes();return ar.start(),ar.update(fr),ar.update(pr),ar.digest()},hr.digest=hr.getMac,hr};var forge$c=forge$m,pkcs5=forge$c.pkcs5=forge$c.pkcs5||{},crypto$1;forge$c.util.isNodejs&&!forge$c.options.usePureJavaScript&&(crypto$1=require$$1$1);forge$c.pbkdf2=pkcs5.pbkdf2=function(cr,ar,dr,fr,hr,pr){if(typeof hr=="function"&&(pr=hr,hr=null),forge$c.util.isNodejs&&!forge$c.options.usePureJavaScript&&crypto$1.pbkdf2&&(hr===null||typeof hr!="object")&&(crypto$1.pbkdf2Sync.length>4||!hr||hr==="sha1"))return typeof hr!="string"&&(hr="sha1"),cr=Buffer.from(cr,"binary"),ar=Buffer.from(ar,"binary"),pr?crypto$1.pbkdf2Sync.length===4?crypto$1.pbkdf2(cr,ar,dr,fr,function(Rr,Ir){if(Rr)return pr(Rr);pr(null,Ir.toString("binary"))}):crypto$1.pbkdf2(cr,ar,dr,fr,hr,function(Rr,Ir){if(Rr)return pr(Rr);pr(null,Ir.toString("binary"))}):crypto$1.pbkdf2Sync.length===4?crypto$1.pbkdf2Sync(cr,ar,dr,fr).toString("binary"):crypto$1.pbkdf2Sync(cr,ar,dr,fr,hr).toString("binary");if((typeof hr>"u"||hr===null)&&(hr="sha1"),typeof hr=="string"){if(!(hr in forge$c.md.algorithms))throw new Error("Unknown hash algorithm: "+hr);hr=forge$c.md[hr].create()}var mr=hr.digestLength;if(fr>4294967295*mr){var gr=new Error("Derived key is too long.");if(pr)return pr(gr);throw gr}var yr=Math.ceil(fr/mr),xr=fr-(yr-1)*mr,wr=forge$c.hmac.create();wr.start(hr,cr);var br="",Sr,vr,Er;if(!pr){for(var Ar=1;Ar<=yr;++Ar){wr.start(null,null),wr.update(ar),wr.update(forge$c.util.int32ToBytes(Ar)),Sr=Er=wr.digest().getBytes();for(var _r=2;_r<=dr;++_r)wr.start(null,null),wr.update(Er),vr=wr.digest().getBytes(),Sr=forge$c.util.xorBytes(Sr,vr,mr),Er=vr;br+=Ar<yr?Sr:Sr.substr(0,xr)}return br}var Ar=1,_r;function Cr(){if(Ar>yr)return pr(null,br);wr.start(null,null),wr.update(ar),wr.update(forge$c.util.int32ToBytes(Ar)),Sr=Er=wr.digest().getBytes(),_r=2,kr()}function kr(){if(_r<=dr)return wr.start(null,null),wr.update(Er),vr=wr.digest().getBytes(),Sr=forge$c.util.xorBytes(Sr,vr,mr),Er=vr,++_r,forge$c.util.setImmediate(kr);br+=Ar<yr?Sr:Sr.substr(0,xr),++Ar,Cr()}Cr()};var forge$b=forge$m,pem=forge$b.pem=forge$b.pem||{};pem.encode=function(cr,ar){ar=ar||{};var dr="-----BEGIN "+cr.type+`-----\r
`,fr;if(cr.procType&&(fr={name:"Proc-Type",values:[String(cr.procType.version),cr.procType.type]},dr+=foldHeader(fr)),cr.contentDomain&&(fr={name:"Content-Domain",values:[cr.contentDomain]},dr+=foldHeader(fr)),cr.dekInfo&&(fr={name:"DEK-Info",values:[cr.dekInfo.algorithm]},cr.dekInfo.parameters&&fr.values.push(cr.dekInfo.parameters),dr+=foldHeader(fr)),cr.headers)for(var hr=0;hr<cr.headers.length;++hr)dr+=foldHeader(cr.headers[hr]);return cr.procType&&(dr+=`\r
`),dr+=forge$b.util.encode64(cr.body,ar.maxline||64)+`\r
`,dr+="-----END "+cr.type+`-----\r
`,dr};pem.decode=function(cr){for(var ar=[],dr=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,fr=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,hr=/\r?\n/,pr;pr=dr.exec(cr),!!pr;){var mr=pr[1];mr==="NEW CERTIFICATE REQUEST"&&(mr="CERTIFICATE REQUEST");var gr={type:mr,procType:null,contentDomain:null,dekInfo:null,headers:[],body:forge$b.util.decode64(pr[3])};if(ar.push(gr),!!pr[2]){for(var yr=pr[2].split(hr),xr=0;pr&&xr<yr.length;){for(var wr=yr[xr].replace(/\s+$/,""),br=xr+1;br<yr.length;++br){var Sr=yr[br];if(!/\s/.test(Sr[0]))break;wr+=Sr,xr=br}if(pr=wr.match(fr),pr){for(var vr={name:pr[1],values:[]},Er=pr[2].split(","),Ar=0;Ar<Er.length;++Ar)vr.values.push(ltrim(Er[Ar]));if(gr.procType)if(!gr.contentDomain&&vr.name==="Content-Domain")gr.contentDomain=Er[0]||"";else if(!gr.dekInfo&&vr.name==="DEK-Info"){if(vr.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');gr.dekInfo={algorithm:Er[0],parameters:Er[1]||null}}else gr.headers.push(vr);else{if(vr.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(vr.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');gr.procType={version:Er[0],type:Er[1]}}}++xr}if(gr.procType==="ENCRYPTED"&&!gr.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(ar.length===0)throw new Error("Invalid PEM formatted message.");return ar};function foldHeader(cr){for(var ar=cr.name+": ",dr=[],fr=function(yr,xr){return" "+xr},hr=0;hr<cr.values.length;++hr)dr.push(cr.values[hr].replace(/^(\S+\r\n)/,fr));ar+=dr.join(",")+`\r
`;for(var pr=0,mr=-1,hr=0;hr<ar.length;++hr,++pr)if(pr>65&&mr!==-1){var gr=ar[mr];gr===","?(++mr,ar=ar.substr(0,mr)+`\r
 `+ar.substr(mr)):ar=ar.substr(0,mr)+`\r
`+gr+ar.substr(mr+1),pr=hr-mr-1,mr=-1,++hr}else(ar[hr]===" "||ar[hr]==="	"||ar[hr]===",")&&(mr=hr);return ar}function ltrim(cr){return cr.replace(/^\s+/,"")}var forge$a=forge$m,sha256=forge$a.sha256=forge$a.sha256||{};forge$a.md.sha256=forge$a.md.algorithms.sha256=sha256;sha256.create=function(){_initialized$2||_init$2();var cr=null,ar=forge$a.util.createBuffer(),dr=new Array(64),fr={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return fr.start=function(){fr.messageLength=0,fr.fullMessageLength=fr.messageLength64=[];for(var hr=fr.messageLengthSize/4,pr=0;pr<hr;++pr)fr.fullMessageLength.push(0);return ar=forge$a.util.createBuffer(),cr={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},fr},fr.start(),fr.update=function(hr,pr){pr==="utf8"&&(hr=forge$a.util.encodeUtf8(hr));var mr=hr.length;fr.messageLength+=mr,mr=[mr/4294967296>>>0,mr>>>0];for(var gr=fr.fullMessageLength.length-1;gr>=0;--gr)fr.fullMessageLength[gr]+=mr[1],mr[1]=mr[0]+(fr.fullMessageLength[gr]/4294967296>>>0),fr.fullMessageLength[gr]=fr.fullMessageLength[gr]>>>0,mr[0]=mr[1]/4294967296>>>0;return ar.putBytes(hr),_update$2(cr,dr,ar),(ar.read>2048||ar.length()===0)&&ar.compact(),fr},fr.digest=function(){var hr=forge$a.util.createBuffer();hr.putBytes(ar.bytes());var pr=fr.fullMessageLength[fr.fullMessageLength.length-1]+fr.messageLengthSize,mr=pr&fr.blockLength-1;hr.putBytes(_padding$2.substr(0,fr.blockLength-mr));for(var gr,yr,xr=fr.fullMessageLength[0]*8,wr=0;wr<fr.fullMessageLength.length-1;++wr)gr=fr.fullMessageLength[wr+1]*8,yr=gr/4294967296>>>0,xr+=yr,hr.putInt32(xr>>>0),xr=gr>>>0;hr.putInt32(xr);var br={h0:cr.h0,h1:cr.h1,h2:cr.h2,h3:cr.h3,h4:cr.h4,h5:cr.h5,h6:cr.h6,h7:cr.h7};_update$2(br,dr,hr);var Sr=forge$a.util.createBuffer();return Sr.putInt32(br.h0),Sr.putInt32(br.h1),Sr.putInt32(br.h2),Sr.putInt32(br.h3),Sr.putInt32(br.h4),Sr.putInt32(br.h5),Sr.putInt32(br.h6),Sr.putInt32(br.h7),Sr},fr};var _padding$2=null,_initialized$2=!1,_k$1=null;function _init$2(){_padding$2=String.fromCharCode(128),_padding$2+=forge$a.util.fillString(String.fromCharCode(0),64),_k$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized$2=!0}function _update$2(cr,ar,dr){for(var fr,hr,pr,mr,gr,yr,xr,wr,br,Sr,vr,Er,Ar,_r,Cr,kr=dr.length();kr>=64;){for(xr=0;xr<16;++xr)ar[xr]=dr.getInt32();for(;xr<64;++xr)fr=ar[xr-2],fr=(fr>>>17|fr<<15)^(fr>>>19|fr<<13)^fr>>>10,hr=ar[xr-15],hr=(hr>>>7|hr<<25)^(hr>>>18|hr<<14)^hr>>>3,ar[xr]=fr+ar[xr-7]+hr+ar[xr-16]|0;for(wr=cr.h0,br=cr.h1,Sr=cr.h2,vr=cr.h3,Er=cr.h4,Ar=cr.h5,_r=cr.h6,Cr=cr.h7,xr=0;xr<64;++xr)mr=(Er>>>6|Er<<26)^(Er>>>11|Er<<21)^(Er>>>25|Er<<7),gr=_r^Er&(Ar^_r),pr=(wr>>>2|wr<<30)^(wr>>>13|wr<<19)^(wr>>>22|wr<<10),yr=wr&br|Sr&(wr^br),fr=Cr+mr+gr+_k$1[xr]+ar[xr],hr=pr+yr,Cr=_r,_r=Ar,Ar=Er,Er=vr+fr>>>0,vr=Sr,Sr=br,br=wr,wr=fr+hr>>>0;cr.h0=cr.h0+wr|0,cr.h1=cr.h1+br|0,cr.h2=cr.h2+Sr|0,cr.h3=cr.h3+vr|0,cr.h4=cr.h4+Er|0,cr.h5=cr.h5+Ar|0,cr.h6=cr.h6+_r|0,cr.h7=cr.h7+Cr|0,kr-=64}}var forge$9=forge$m,_crypto$1=null;forge$9.util.isNodejs&&!forge$9.options.usePureJavaScript&&!process.versions["node-webkit"]&&(_crypto$1=require$$1$1);var prng=forge$9.prng=forge$9.prng||{};prng.create=function(cr){for(var ar={plugin:cr,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},dr=cr.md,fr=new Array(32),hr=0;hr<32;++hr)fr[hr]=dr.create();ar.pools=fr,ar.pool=0,ar.generate=function(xr,wr){if(!wr)return ar.generateSync(xr);var br=ar.plugin.cipher,Sr=ar.plugin.increment,vr=ar.plugin.formatKey,Er=ar.plugin.formatSeed,Ar=forge$9.util.createBuffer();ar.key=null,_r();function _r(Cr){if(Cr)return wr(Cr);if(Ar.length()>=xr)return wr(null,Ar.getBytes(xr));if(ar.generated>1048575&&(ar.key=null),ar.key===null)return forge$9.util.nextTick(function(){pr(_r)});var kr=br(ar.key,ar.seed);ar.generated+=kr.length,Ar.putBytes(kr),ar.key=vr(br(ar.key,Sr(ar.seed))),ar.seed=Er(br(ar.key,ar.seed)),forge$9.util.setImmediate(_r)}},ar.generateSync=function(xr){var wr=ar.plugin.cipher,br=ar.plugin.increment,Sr=ar.plugin.formatKey,vr=ar.plugin.formatSeed;ar.key=null;for(var Er=forge$9.util.createBuffer();Er.length()<xr;){ar.generated>1048575&&(ar.key=null),ar.key===null&&mr();var Ar=wr(ar.key,ar.seed);ar.generated+=Ar.length,Er.putBytes(Ar),ar.key=Sr(wr(ar.key,br(ar.seed))),ar.seed=vr(wr(ar.key,ar.seed))}return Er.getBytes(xr)};function pr(xr){if(ar.pools[0].messageLength>=32)return gr(),xr();var wr=32-ar.pools[0].messageLength<<5;ar.seedFile(wr,function(br,Sr){if(br)return xr(br);ar.collect(Sr),gr(),xr()})}function mr(){if(ar.pools[0].messageLength>=32)return gr();var xr=32-ar.pools[0].messageLength<<5;ar.collect(ar.seedFileSync(xr)),gr()}function gr(){ar.reseeds=ar.reseeds===4294967295?0:ar.reseeds+1;var xr=ar.plugin.md.create();xr.update(ar.keyBytes);for(var wr=1,br=0;br<32;++br)ar.reseeds%wr===0&&(xr.update(ar.pools[br].digest().getBytes()),ar.pools[br].start()),wr=wr<<1;ar.keyBytes=xr.digest().getBytes(),xr.start(),xr.update(ar.keyBytes);var Sr=xr.digest().getBytes();ar.key=ar.plugin.formatKey(ar.keyBytes),ar.seed=ar.plugin.formatSeed(Sr),ar.generated=0}function yr(xr){var wr=null,br=forge$9.util.globalScope,Sr=br.crypto||br.msCrypto;Sr&&Sr.getRandomValues&&(wr=function(Nr){return Sr.getRandomValues(Nr)});var vr=forge$9.util.createBuffer();if(wr)for(;vr.length()<xr;){var Er=Math.max(1,Math.min(xr-vr.length(),65536)/4),Ar=new Uint32Array(Math.floor(Er));try{wr(Ar);for(var _r=0;_r<Ar.length;++_r)vr.putInt32(Ar[_r])}catch(Nr){if(!(typeof QuotaExceededError<"u"&&Nr instanceof QuotaExceededError))throw Nr}}if(vr.length()<xr)for(var Cr,kr,Rr,Ir=Math.floor(Math.random()*65536);vr.length()<xr;){kr=16807*(Ir&65535),Cr=16807*(Ir>>16),kr+=(Cr&32767)<<16,kr+=Cr>>15,kr=(kr&2147483647)+(kr>>31),Ir=kr&4294967295;for(var _r=0;_r<3;++_r)Rr=Ir>>>(_r<<3),Rr^=Math.floor(Math.random()*256),vr.putByte(Rr&255)}return vr.getBytes(xr)}return _crypto$1?(ar.seedFile=function(xr,wr){_crypto$1.randomBytes(xr,function(br,Sr){if(br)return wr(br);wr(null,Sr.toString())})},ar.seedFileSync=function(xr){return _crypto$1.randomBytes(xr).toString()}):(ar.seedFile=function(xr,wr){try{wr(null,yr(xr))}catch(br){wr(br)}},ar.seedFileSync=yr),ar.collect=function(xr){for(var wr=xr.length,br=0;br<wr;++br)ar.pools[ar.pool].update(xr.substr(br,1)),ar.pool=ar.pool===31?0:ar.pool+1},ar.collectInt=function(xr,wr){for(var br="",Sr=0;Sr<wr;Sr+=8)br+=String.fromCharCode(xr>>Sr&255);ar.collect(br)},ar.registerWorker=function(xr){if(xr===self)ar.seedFile=function(br,Sr){function vr(Er){var Ar=Er.data;Ar.forge&&Ar.forge.prng&&(self.removeEventListener("message",vr),Sr(Ar.forge.prng.err,Ar.forge.prng.bytes))}self.addEventListener("message",vr),self.postMessage({forge:{prng:{needed:br}}})};else{var wr=function(br){var Sr=br.data;Sr.forge&&Sr.forge.prng&&ar.seedFile(Sr.forge.prng.needed,function(vr,Er){xr.postMessage({forge:{prng:{err:vr,bytes:Er}}})})};xr.addEventListener("message",wr)}},ar};var forge$8=forge$m;(function(){if(forge$8.random&&forge$8.random.getBytes){forge$8.random;return}(function(cr){var ar={},dr=new Array(4),fr=forge$8.util.createBuffer();ar.formatKey=function(br){var Sr=forge$8.util.createBuffer(br);return br=new Array(4),br[0]=Sr.getInt32(),br[1]=Sr.getInt32(),br[2]=Sr.getInt32(),br[3]=Sr.getInt32(),forge$8.aes._expandKey(br,!1)},ar.formatSeed=function(br){var Sr=forge$8.util.createBuffer(br);return br=new Array(4),br[0]=Sr.getInt32(),br[1]=Sr.getInt32(),br[2]=Sr.getInt32(),br[3]=Sr.getInt32(),br},ar.cipher=function(br,Sr){return forge$8.aes._updateBlock(br,Sr,dr,!1),fr.putInt32(dr[0]),fr.putInt32(dr[1]),fr.putInt32(dr[2]),fr.putInt32(dr[3]),fr.getBytes()},ar.increment=function(br){return++br[3],br},ar.md=forge$8.md.sha256;function hr(){var br=forge$8.prng.create(ar);return br.getBytes=function(Sr,vr){return br.generate(Sr,vr)},br.getBytesSync=function(Sr){return br.generate(Sr)},br}var pr=hr(),mr=null,gr=forge$8.util.globalScope,yr=gr.crypto||gr.msCrypto;if(yr&&yr.getRandomValues&&(mr=function(br){return yr.getRandomValues(br)}),forge$8.options.usePureJavaScript||!forge$8.util.isNodejs&&!mr){if(pr.collectInt(+new Date,32),typeof navigator<"u"){var xr="";for(var wr in navigator)try{typeof navigator[wr]=="string"&&(xr+=navigator[wr])}catch{}pr.collect(xr),xr=null}cr&&(cr().mousemove(function(br){pr.collectInt(br.clientX,16),pr.collectInt(br.clientY,16)}),cr().keypress(function(br){pr.collectInt(br.charCode,8)}))}if(!forge$8.random)forge$8.random=pr;else for(var wr in pr)forge$8.random[wr]=pr[wr];forge$8.random.createInstance=hr,forge$8.random})(typeof jQuery<"u"?jQuery:null)})();var forge$7=forge$m,piTable=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],rol=function(cr,ar){return cr<<ar&65535|(cr&65535)>>16-ar},ror=function(cr,ar){return(cr&65535)>>ar|cr<<16-ar&65535};forge$7.rc2=forge$7.rc2||{};forge$7.rc2.expandKey=function(cr,ar){typeof cr=="string"&&(cr=forge$7.util.createBuffer(cr)),ar=ar||128;var dr=cr,fr=cr.length(),hr=ar,pr=Math.ceil(hr/8),mr=255>>(hr&7),gr;for(gr=fr;gr<128;gr++)dr.putByte(piTable[dr.at(gr-1)+dr.at(gr-fr)&255]);for(dr.setAt(128-pr,piTable[dr.at(128-pr)&mr]),gr=127-pr;gr>=0;gr--)dr.setAt(gr,piTable[dr.at(gr+1)^dr.at(gr+pr)]);return dr};var createCipher=function(cr,ar,dr){var fr=!1,hr=null,pr=null,mr=null,gr,yr,xr,wr,br=[];for(cr=forge$7.rc2.expandKey(cr,ar),xr=0;xr<64;xr++)br.push(cr.getInt16Le());dr?(gr=function(Er){for(xr=0;xr<4;xr++)Er[xr]+=br[wr]+(Er[(xr+3)%4]&Er[(xr+2)%4])+(~Er[(xr+3)%4]&Er[(xr+1)%4]),Er[xr]=rol(Er[xr],s[xr]),wr++},yr=function(Er){for(xr=0;xr<4;xr++)Er[xr]+=br[Er[(xr+3)%4]&63]}):(gr=function(Er){for(xr=3;xr>=0;xr--)Er[xr]=ror(Er[xr],s[xr]),Er[xr]-=br[wr]+(Er[(xr+3)%4]&Er[(xr+2)%4])+(~Er[(xr+3)%4]&Er[(xr+1)%4]),wr--},yr=function(Er){for(xr=3;xr>=0;xr--)Er[xr]-=br[Er[(xr+3)%4]&63]});var Sr=function(Er){var Ar=[];for(xr=0;xr<4;xr++){var _r=hr.getInt16Le();mr!==null&&(dr?_r^=mr.getInt16Le():mr.putInt16Le(_r)),Ar.push(_r&65535)}wr=dr?0:63;for(var Cr=0;Cr<Er.length;Cr++)for(var kr=0;kr<Er[Cr][0];kr++)Er[Cr][1](Ar);for(xr=0;xr<4;xr++)mr!==null&&(dr?mr.putInt16Le(Ar[xr]):Ar[xr]^=mr.getInt16Le()),pr.putInt16Le(Ar[xr])},vr=null;return vr={start:function(Er,Ar){Er&&typeof Er=="string"&&(Er=forge$7.util.createBuffer(Er)),fr=!1,hr=forge$7.util.createBuffer(),pr=Ar||new forge$7.util.createBuffer,mr=Er,vr.output=pr},update:function(Er){for(fr||hr.putBuffer(Er);hr.length()>=8;)Sr([[5,gr],[1,yr],[6,gr],[1,yr],[5,gr]])},finish:function(Er){var Ar=!0;if(dr)if(Er)Ar=Er(8,hr,!dr);else{var _r=hr.length()===8?8:8-hr.length();hr.fillWithByte(_r,_r)}if(Ar&&(fr=!0,vr.update()),!dr&&(Ar=hr.length()===0,Ar))if(Er)Ar=Er(8,pr,!dr);else{var Cr=pr.length(),kr=pr.at(Cr-1);kr>Cr?Ar=!1:pr.truncate(kr)}return Ar}},vr};forge$7.rc2.startEncrypting=function(cr,ar,dr){var fr=forge$7.rc2.createEncryptionCipher(cr,128);return fr.start(ar,dr),fr};forge$7.rc2.createEncryptionCipher=function(cr,ar){return createCipher(cr,ar,!0)};forge$7.rc2.startDecrypting=function(cr,ar,dr){var fr=forge$7.rc2.createDecryptionCipher(cr,128);return fr.start(ar,dr),fr};forge$7.rc2.createDecryptionCipher=function(cr,ar){return createCipher(cr,ar,!1)};var forge$6=forge$m;forge$6.jsbn=forge$6.jsbn||{};var dbits;function BigInteger$2(cr,ar,dr){this.data=[],cr!=null&&(typeof cr=="number"?this.fromNumber(cr,ar,dr):ar==null&&typeof cr!="string"?this.fromString(cr,256):this.fromString(cr,ar))}forge$6.jsbn.BigInteger=BigInteger$2;function nbi(){return new BigInteger$2(null)}function am1(cr,ar,dr,fr,hr,pr){for(;--pr>=0;){var mr=ar*this.data[cr++]+dr.data[fr]+hr;hr=Math.floor(mr/67108864),dr.data[fr++]=mr&67108863}return hr}function am2(cr,ar,dr,fr,hr,pr){for(var mr=ar&32767,gr=ar>>15;--pr>=0;){var yr=this.data[cr]&32767,xr=this.data[cr++]>>15,wr=gr*yr+xr*mr;yr=mr*yr+((wr&32767)<<15)+dr.data[fr]+(hr&1073741823),hr=(yr>>>30)+(wr>>>15)+gr*xr+(hr>>>30),dr.data[fr++]=yr&1073741823}return hr}function am3(cr,ar,dr,fr,hr,pr){for(var mr=ar&16383,gr=ar>>14;--pr>=0;){var yr=this.data[cr]&16383,xr=this.data[cr++]>>14,wr=gr*yr+xr*mr;yr=mr*yr+((wr&16383)<<14)+dr.data[fr]+hr,hr=(yr>>28)+(wr>>14)+gr*xr,dr.data[fr++]=yr&268435455}return hr}typeof navigator>"u"?(BigInteger$2.prototype.am=am3,dbits=28):navigator.appName=="Microsoft Internet Explorer"?(BigInteger$2.prototype.am=am2,dbits=30):navigator.appName!="Netscape"?(BigInteger$2.prototype.am=am1,dbits=26):(BigInteger$2.prototype.am=am3,dbits=28);BigInteger$2.prototype.DB=dbits;BigInteger$2.prototype.DM=(1<<dbits)-1;BigInteger$2.prototype.DV=1<<dbits;var BI_FP=52;BigInteger$2.prototype.FV=Math.pow(2,BI_FP);BigInteger$2.prototype.F1=BI_FP-dbits;BigInteger$2.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(cr){return BI_RM.charAt(cr)}function intAt(cr,ar){var dr=BI_RC[cr.charCodeAt(ar)];return dr??-1}function bnpCopyTo(cr){for(var ar=this.t-1;ar>=0;--ar)cr.data[ar]=this.data[ar];cr.t=this.t,cr.s=this.s}function bnpFromInt(cr){this.t=1,this.s=cr<0?-1:0,cr>0?this.data[0]=cr:cr<-1?this.data[0]=cr+this.DV:this.t=0}function nbv(cr){var ar=nbi();return ar.fromInt(cr),ar}function bnpFromString(cr,ar){var dr;if(ar==16)dr=4;else if(ar==8)dr=3;else if(ar==256)dr=8;else if(ar==2)dr=1;else if(ar==32)dr=5;else if(ar==4)dr=2;else{this.fromRadix(cr,ar);return}this.t=0,this.s=0;for(var fr=cr.length,hr=!1,pr=0;--fr>=0;){var mr=dr==8?cr[fr]&255:intAt(cr,fr);if(mr<0){cr.charAt(fr)=="-"&&(hr=!0);continue}hr=!1,pr==0?this.data[this.t++]=mr:pr+dr>this.DB?(this.data[this.t-1]|=(mr&(1<<this.DB-pr)-1)<<pr,this.data[this.t++]=mr>>this.DB-pr):this.data[this.t-1]|=mr<<pr,pr+=dr,pr>=this.DB&&(pr-=this.DB)}dr==8&&cr[0]&128&&(this.s=-1,pr>0&&(this.data[this.t-1]|=(1<<this.DB-pr)-1<<pr)),this.clamp(),hr&&BigInteger$2.ZERO.subTo(this,this)}function bnpClamp(){for(var cr=this.s&this.DM;this.t>0&&this.data[this.t-1]==cr;)--this.t}function bnToString(cr){if(this.s<0)return"-"+this.negate().toString(cr);var ar;if(cr==16)ar=4;else if(cr==8)ar=3;else if(cr==2)ar=1;else if(cr==32)ar=5;else if(cr==4)ar=2;else return this.toRadix(cr);var dr=(1<<ar)-1,fr,hr=!1,pr="",mr=this.t,gr=this.DB-mr*this.DB%ar;if(mr-- >0)for(gr<this.DB&&(fr=this.data[mr]>>gr)>0&&(hr=!0,pr=int2char(fr));mr>=0;)gr<ar?(fr=(this.data[mr]&(1<<gr)-1)<<ar-gr,fr|=this.data[--mr]>>(gr+=this.DB-ar)):(fr=this.data[mr]>>(gr-=ar)&dr,gr<=0&&(gr+=this.DB,--mr)),fr>0&&(hr=!0),hr&&(pr+=int2char(fr));return hr?pr:"0"}function bnNegate(){var cr=nbi();return BigInteger$2.ZERO.subTo(this,cr),cr}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(cr){var ar=this.s-cr.s;if(ar!=0)return ar;var dr=this.t;if(ar=dr-cr.t,ar!=0)return this.s<0?-ar:ar;for(;--dr>=0;)if((ar=this.data[dr]-cr.data[dr])!=0)return ar;return 0}function nbits(cr){var ar=1,dr;return(dr=cr>>>16)!=0&&(cr=dr,ar+=16),(dr=cr>>8)!=0&&(cr=dr,ar+=8),(dr=cr>>4)!=0&&(cr=dr,ar+=4),(dr=cr>>2)!=0&&(cr=dr,ar+=2),(dr=cr>>1)!=0&&(cr=dr,ar+=1),ar}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this.data[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(cr,ar){var dr;for(dr=this.t-1;dr>=0;--dr)ar.data[dr+cr]=this.data[dr];for(dr=cr-1;dr>=0;--dr)ar.data[dr]=0;ar.t=this.t+cr,ar.s=this.s}function bnpDRShiftTo(cr,ar){for(var dr=cr;dr<this.t;++dr)ar.data[dr-cr]=this.data[dr];ar.t=Math.max(this.t-cr,0),ar.s=this.s}function bnpLShiftTo(cr,ar){var dr=cr%this.DB,fr=this.DB-dr,hr=(1<<fr)-1,pr=Math.floor(cr/this.DB),mr=this.s<<dr&this.DM,gr;for(gr=this.t-1;gr>=0;--gr)ar.data[gr+pr+1]=this.data[gr]>>fr|mr,mr=(this.data[gr]&hr)<<dr;for(gr=pr-1;gr>=0;--gr)ar.data[gr]=0;ar.data[pr]=mr,ar.t=this.t+pr+1,ar.s=this.s,ar.clamp()}function bnpRShiftTo(cr,ar){ar.s=this.s;var dr=Math.floor(cr/this.DB);if(dr>=this.t){ar.t=0;return}var fr=cr%this.DB,hr=this.DB-fr,pr=(1<<fr)-1;ar.data[0]=this.data[dr]>>fr;for(var mr=dr+1;mr<this.t;++mr)ar.data[mr-dr-1]|=(this.data[mr]&pr)<<hr,ar.data[mr-dr]=this.data[mr]>>fr;fr>0&&(ar.data[this.t-dr-1]|=(this.s&pr)<<hr),ar.t=this.t-dr,ar.clamp()}function bnpSubTo(cr,ar){for(var dr=0,fr=0,hr=Math.min(cr.t,this.t);dr<hr;)fr+=this.data[dr]-cr.data[dr],ar.data[dr++]=fr&this.DM,fr>>=this.DB;if(cr.t<this.t){for(fr-=cr.s;dr<this.t;)fr+=this.data[dr],ar.data[dr++]=fr&this.DM,fr>>=this.DB;fr+=this.s}else{for(fr+=this.s;dr<cr.t;)fr-=cr.data[dr],ar.data[dr++]=fr&this.DM,fr>>=this.DB;fr-=cr.s}ar.s=fr<0?-1:0,fr<-1?ar.data[dr++]=this.DV+fr:fr>0&&(ar.data[dr++]=fr),ar.t=dr,ar.clamp()}function bnpMultiplyTo(cr,ar){var dr=this.abs(),fr=cr.abs(),hr=dr.t;for(ar.t=hr+fr.t;--hr>=0;)ar.data[hr]=0;for(hr=0;hr<fr.t;++hr)ar.data[hr+dr.t]=dr.am(0,fr.data[hr],ar,hr,0,dr.t);ar.s=0,ar.clamp(),this.s!=cr.s&&BigInteger$2.ZERO.subTo(ar,ar)}function bnpSquareTo(cr){for(var ar=this.abs(),dr=cr.t=2*ar.t;--dr>=0;)cr.data[dr]=0;for(dr=0;dr<ar.t-1;++dr){var fr=ar.am(dr,ar.data[dr],cr,2*dr,0,1);(cr.data[dr+ar.t]+=ar.am(dr+1,2*ar.data[dr],cr,2*dr+1,fr,ar.t-dr-1))>=ar.DV&&(cr.data[dr+ar.t]-=ar.DV,cr.data[dr+ar.t+1]=1)}cr.t>0&&(cr.data[cr.t-1]+=ar.am(dr,ar.data[dr],cr,2*dr,0,1)),cr.s=0,cr.clamp()}function bnpDivRemTo(cr,ar,dr){var fr=cr.abs();if(!(fr.t<=0)){var hr=this.abs();if(hr.t<fr.t){ar?.fromInt(0),dr!=null&&this.copyTo(dr);return}dr==null&&(dr=nbi());var pr=nbi(),mr=this.s,gr=cr.s,yr=this.DB-nbits(fr.data[fr.t-1]);yr>0?(fr.lShiftTo(yr,pr),hr.lShiftTo(yr,dr)):(fr.copyTo(pr),hr.copyTo(dr));var xr=pr.t,wr=pr.data[xr-1];if(wr!=0){var br=wr*(1<<this.F1)+(xr>1?pr.data[xr-2]>>this.F2:0),Sr=this.FV/br,vr=(1<<this.F1)/br,Er=1<<this.F2,Ar=dr.t,_r=Ar-xr,Cr=ar??nbi();for(pr.dlShiftTo(_r,Cr),dr.compareTo(Cr)>=0&&(dr.data[dr.t++]=1,dr.subTo(Cr,dr)),BigInteger$2.ONE.dlShiftTo(xr,Cr),Cr.subTo(pr,pr);pr.t<xr;)pr.data[pr.t++]=0;for(;--_r>=0;){var kr=dr.data[--Ar]==wr?this.DM:Math.floor(dr.data[Ar]*Sr+(dr.data[Ar-1]+Er)*vr);if((dr.data[Ar]+=pr.am(0,kr,dr,_r,0,xr))<kr)for(pr.dlShiftTo(_r,Cr),dr.subTo(Cr,dr);dr.data[Ar]<--kr;)dr.subTo(Cr,dr)}ar!=null&&(dr.drShiftTo(xr,ar),mr!=gr&&BigInteger$2.ZERO.subTo(ar,ar)),dr.t=xr,dr.clamp(),yr>0&&dr.rShiftTo(yr,dr),mr<0&&BigInteger$2.ZERO.subTo(dr,dr)}}}function bnMod(cr){var ar=nbi();return this.abs().divRemTo(cr,null,ar),this.s<0&&ar.compareTo(BigInteger$2.ZERO)>0&&cr.subTo(ar,ar),ar}function Classic(cr){this.m=cr}function cConvert(cr){return cr.s<0||cr.compareTo(this.m)>=0?cr.mod(this.m):cr}function cRevert(cr){return cr}function cReduce(cr){cr.divRemTo(this.m,null,cr)}function cMulTo(cr,ar,dr){cr.multiplyTo(ar,dr),this.reduce(dr)}function cSqrTo(cr,ar){cr.squareTo(ar),this.reduce(ar)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var cr=this.data[0];if(!(cr&1))return 0;var ar=cr&3;return ar=ar*(2-(cr&15)*ar)&15,ar=ar*(2-(cr&255)*ar)&255,ar=ar*(2-((cr&65535)*ar&65535))&65535,ar=ar*(2-cr*ar%this.DV)%this.DV,ar>0?this.DV-ar:-ar}function Montgomery(cr){this.m=cr,this.mp=cr.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<cr.DB-15)-1,this.mt2=2*cr.t}function montConvert(cr){var ar=nbi();return cr.abs().dlShiftTo(this.m.t,ar),ar.divRemTo(this.m,null,ar),cr.s<0&&ar.compareTo(BigInteger$2.ZERO)>0&&this.m.subTo(ar,ar),ar}function montRevert(cr){var ar=nbi();return cr.copyTo(ar),this.reduce(ar),ar}function montReduce(cr){for(;cr.t<=this.mt2;)cr.data[cr.t++]=0;for(var ar=0;ar<this.m.t;++ar){var dr=cr.data[ar]&32767,fr=dr*this.mpl+((dr*this.mph+(cr.data[ar]>>15)*this.mpl&this.um)<<15)&cr.DM;for(dr=ar+this.m.t,cr.data[dr]+=this.m.am(0,fr,cr,ar,0,this.m.t);cr.data[dr]>=cr.DV;)cr.data[dr]-=cr.DV,cr.data[++dr]++}cr.clamp(),cr.drShiftTo(this.m.t,cr),cr.compareTo(this.m)>=0&&cr.subTo(this.m,cr)}function montSqrTo(cr,ar){cr.squareTo(ar),this.reduce(ar)}function montMulTo(cr,ar,dr){cr.multiplyTo(ar,dr),this.reduce(dr)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this.data[0]&1:this.s)==0}function bnpExp(cr,ar){if(cr>4294967295||cr<1)return BigInteger$2.ONE;var dr=nbi(),fr=nbi(),hr=ar.convert(this),pr=nbits(cr)-1;for(hr.copyTo(dr);--pr>=0;)if(ar.sqrTo(dr,fr),(cr&1<<pr)>0)ar.mulTo(fr,hr,dr);else{var mr=dr;dr=fr,fr=mr}return ar.revert(dr)}function bnModPowInt(cr,ar){var dr;return cr<256||ar.isEven()?dr=new Classic(ar):dr=new Montgomery(ar),this.exp(cr,dr)}BigInteger$2.prototype.copyTo=bnpCopyTo;BigInteger$2.prototype.fromInt=bnpFromInt;BigInteger$2.prototype.fromString=bnpFromString;BigInteger$2.prototype.clamp=bnpClamp;BigInteger$2.prototype.dlShiftTo=bnpDLShiftTo;BigInteger$2.prototype.drShiftTo=bnpDRShiftTo;BigInteger$2.prototype.lShiftTo=bnpLShiftTo;BigInteger$2.prototype.rShiftTo=bnpRShiftTo;BigInteger$2.prototype.subTo=bnpSubTo;BigInteger$2.prototype.multiplyTo=bnpMultiplyTo;BigInteger$2.prototype.squareTo=bnpSquareTo;BigInteger$2.prototype.divRemTo=bnpDivRemTo;BigInteger$2.prototype.invDigit=bnpInvDigit;BigInteger$2.prototype.isEven=bnpIsEven;BigInteger$2.prototype.exp=bnpExp;BigInteger$2.prototype.toString=bnToString;BigInteger$2.prototype.negate=bnNegate;BigInteger$2.prototype.abs=bnAbs;BigInteger$2.prototype.compareTo=bnCompareTo;BigInteger$2.prototype.bitLength=bnBitLength;BigInteger$2.prototype.mod=bnMod;BigInteger$2.prototype.modPowInt=bnModPowInt;BigInteger$2.ZERO=nbv(0);BigInteger$2.ONE=nbv(1);function bnClone(){var cr=nbi();return this.copyTo(cr),cr}function bnIntValue(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function bnByteValue(){return this.t==0?this.s:this.data[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this.data[0]<<16>>16}function bnpChunkSize(cr){return Math.floor(Math.LN2*this.DB/Math.log(cr))}function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function bnpToRadix(cr){if(cr==null&&(cr=10),this.signum()==0||cr<2||cr>36)return"0";var ar=this.chunkSize(cr),dr=Math.pow(cr,ar),fr=nbv(dr),hr=nbi(),pr=nbi(),mr="";for(this.divRemTo(fr,hr,pr);hr.signum()>0;)mr=(dr+pr.intValue()).toString(cr).substr(1)+mr,hr.divRemTo(fr,hr,pr);return pr.intValue().toString(cr)+mr}function bnpFromRadix(cr,ar){this.fromInt(0),ar==null&&(ar=10);for(var dr=this.chunkSize(ar),fr=Math.pow(ar,dr),hr=!1,pr=0,mr=0,gr=0;gr<cr.length;++gr){var yr=intAt(cr,gr);if(yr<0){cr.charAt(gr)=="-"&&this.signum()==0&&(hr=!0);continue}mr=ar*mr+yr,++pr>=dr&&(this.dMultiply(fr),this.dAddOffset(mr,0),pr=0,mr=0)}pr>0&&(this.dMultiply(Math.pow(ar,pr)),this.dAddOffset(mr,0)),hr&&BigInteger$2.ZERO.subTo(this,this)}function bnpFromNumber(cr,ar,dr){if(typeof ar=="number")if(cr<2)this.fromInt(1);else for(this.fromNumber(cr,dr),this.testBit(cr-1)||this.bitwiseTo(BigInteger$2.ONE.shiftLeft(cr-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(ar);)this.dAddOffset(2,0),this.bitLength()>cr&&this.subTo(BigInteger$2.ONE.shiftLeft(cr-1),this);else{var fr=new Array,hr=cr&7;fr.length=(cr>>3)+1,ar.nextBytes(fr),hr>0?fr[0]&=(1<<hr)-1:fr[0]=0,this.fromString(fr,256)}}function bnToByteArray(){var cr=this.t,ar=new Array;ar[0]=this.s;var dr=this.DB-cr*this.DB%8,fr,hr=0;if(cr-- >0)for(dr<this.DB&&(fr=this.data[cr]>>dr)!=(this.s&this.DM)>>dr&&(ar[hr++]=fr|this.s<<this.DB-dr);cr>=0;)dr<8?(fr=(this.data[cr]&(1<<dr)-1)<<8-dr,fr|=this.data[--cr]>>(dr+=this.DB-8)):(fr=this.data[cr]>>(dr-=8)&255,dr<=0&&(dr+=this.DB,--cr)),fr&128&&(fr|=-256),hr==0&&(this.s&128)!=(fr&128)&&++hr,(hr>0||fr!=this.s)&&(ar[hr++]=fr);return ar}function bnEquals(cr){return this.compareTo(cr)==0}function bnMin(cr){return this.compareTo(cr)<0?this:cr}function bnMax(cr){return this.compareTo(cr)>0?this:cr}function bnpBitwiseTo(cr,ar,dr){var fr,hr,pr=Math.min(cr.t,this.t);for(fr=0;fr<pr;++fr)dr.data[fr]=ar(this.data[fr],cr.data[fr]);if(cr.t<this.t){for(hr=cr.s&this.DM,fr=pr;fr<this.t;++fr)dr.data[fr]=ar(this.data[fr],hr);dr.t=this.t}else{for(hr=this.s&this.DM,fr=pr;fr<cr.t;++fr)dr.data[fr]=ar(hr,cr.data[fr]);dr.t=cr.t}dr.s=ar(this.s,cr.s),dr.clamp()}function op_and(cr,ar){return cr&ar}function bnAnd(cr){var ar=nbi();return this.bitwiseTo(cr,op_and,ar),ar}function op_or(cr,ar){return cr|ar}function bnOr(cr){var ar=nbi();return this.bitwiseTo(cr,op_or,ar),ar}function op_xor(cr,ar){return cr^ar}function bnXor(cr){var ar=nbi();return this.bitwiseTo(cr,op_xor,ar),ar}function op_andnot(cr,ar){return cr&~ar}function bnAndNot(cr){var ar=nbi();return this.bitwiseTo(cr,op_andnot,ar),ar}function bnNot(){for(var cr=nbi(),ar=0;ar<this.t;++ar)cr.data[ar]=this.DM&~this.data[ar];return cr.t=this.t,cr.s=~this.s,cr}function bnShiftLeft(cr){var ar=nbi();return cr<0?this.rShiftTo(-cr,ar):this.lShiftTo(cr,ar),ar}function bnShiftRight(cr){var ar=nbi();return cr<0?this.lShiftTo(-cr,ar):this.rShiftTo(cr,ar),ar}function lbit(cr){if(cr==0)return-1;var ar=0;return cr&65535||(cr>>=16,ar+=16),cr&255||(cr>>=8,ar+=8),cr&15||(cr>>=4,ar+=4),cr&3||(cr>>=2,ar+=2),cr&1||++ar,ar}function bnGetLowestSetBit(){for(var cr=0;cr<this.t;++cr)if(this.data[cr]!=0)return cr*this.DB+lbit(this.data[cr]);return this.s<0?this.t*this.DB:-1}function cbit(cr){for(var ar=0;cr!=0;)cr&=cr-1,++ar;return ar}function bnBitCount(){for(var cr=0,ar=this.s&this.DM,dr=0;dr<this.t;++dr)cr+=cbit(this.data[dr]^ar);return cr}function bnTestBit(cr){var ar=Math.floor(cr/this.DB);return ar>=this.t?this.s!=0:(this.data[ar]&1<<cr%this.DB)!=0}function bnpChangeBit(cr,ar){var dr=BigInteger$2.ONE.shiftLeft(cr);return this.bitwiseTo(dr,ar,dr),dr}function bnSetBit(cr){return this.changeBit(cr,op_or)}function bnClearBit(cr){return this.changeBit(cr,op_andnot)}function bnFlipBit(cr){return this.changeBit(cr,op_xor)}function bnpAddTo(cr,ar){for(var dr=0,fr=0,hr=Math.min(cr.t,this.t);dr<hr;)fr+=this.data[dr]+cr.data[dr],ar.data[dr++]=fr&this.DM,fr>>=this.DB;if(cr.t<this.t){for(fr+=cr.s;dr<this.t;)fr+=this.data[dr],ar.data[dr++]=fr&this.DM,fr>>=this.DB;fr+=this.s}else{for(fr+=this.s;dr<cr.t;)fr+=cr.data[dr],ar.data[dr++]=fr&this.DM,fr>>=this.DB;fr+=cr.s}ar.s=fr<0?-1:0,fr>0?ar.data[dr++]=fr:fr<-1&&(ar.data[dr++]=this.DV+fr),ar.t=dr,ar.clamp()}function bnAdd(cr){var ar=nbi();return this.addTo(cr,ar),ar}function bnSubtract(cr){var ar=nbi();return this.subTo(cr,ar),ar}function bnMultiply(cr){var ar=nbi();return this.multiplyTo(cr,ar),ar}function bnDivide(cr){var ar=nbi();return this.divRemTo(cr,ar,null),ar}function bnRemainder(cr){var ar=nbi();return this.divRemTo(cr,null,ar),ar}function bnDivideAndRemainder(cr){var ar=nbi(),dr=nbi();return this.divRemTo(cr,ar,dr),new Array(ar,dr)}function bnpDMultiply(cr){this.data[this.t]=this.am(0,cr-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(cr,ar){if(cr!=0){for(;this.t<=ar;)this.data[this.t++]=0;for(this.data[ar]+=cr;this.data[ar]>=this.DV;)this.data[ar]-=this.DV,++ar>=this.t&&(this.data[this.t++]=0),++this.data[ar]}}function NullExp(){}function nNop(cr){return cr}function nMulTo(cr,ar,dr){cr.multiplyTo(ar,dr)}function nSqrTo(cr,ar){cr.squareTo(ar)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(cr){return this.exp(cr,new NullExp)}function bnpMultiplyLowerTo(cr,ar,dr){var fr=Math.min(this.t+cr.t,ar);for(dr.s=0,dr.t=fr;fr>0;)dr.data[--fr]=0;var hr;for(hr=dr.t-this.t;fr<hr;++fr)dr.data[fr+this.t]=this.am(0,cr.data[fr],dr,fr,0,this.t);for(hr=Math.min(cr.t,ar);fr<hr;++fr)this.am(0,cr.data[fr],dr,fr,0,ar-fr);dr.clamp()}function bnpMultiplyUpperTo(cr,ar,dr){--ar;var fr=dr.t=this.t+cr.t-ar;for(dr.s=0;--fr>=0;)dr.data[fr]=0;for(fr=Math.max(ar-this.t,0);fr<cr.t;++fr)dr.data[this.t+fr-ar]=this.am(ar-fr,cr.data[fr],dr,0,0,this.t+fr-ar);dr.clamp(),dr.drShiftTo(1,dr)}function Barrett(cr){this.r2=nbi(),this.q3=nbi(),BigInteger$2.ONE.dlShiftTo(2*cr.t,this.r2),this.mu=this.r2.divide(cr),this.m=cr}function barrettConvert(cr){if(cr.s<0||cr.t>2*this.m.t)return cr.mod(this.m);if(cr.compareTo(this.m)<0)return cr;var ar=nbi();return cr.copyTo(ar),this.reduce(ar),ar}function barrettRevert(cr){return cr}function barrettReduce(cr){for(cr.drShiftTo(this.m.t-1,this.r2),cr.t>this.m.t+1&&(cr.t=this.m.t+1,cr.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);cr.compareTo(this.r2)<0;)cr.dAddOffset(1,this.m.t+1);for(cr.subTo(this.r2,cr);cr.compareTo(this.m)>=0;)cr.subTo(this.m,cr)}function barrettSqrTo(cr,ar){cr.squareTo(ar),this.reduce(ar)}function barrettMulTo(cr,ar,dr){cr.multiplyTo(ar,dr),this.reduce(dr)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(cr,ar){var dr=cr.bitLength(),fr,hr=nbv(1),pr;if(dr<=0)return hr;dr<18?fr=1:dr<48?fr=3:dr<144?fr=4:dr<768?fr=5:fr=6,dr<8?pr=new Classic(ar):ar.isEven()?pr=new Barrett(ar):pr=new Montgomery(ar);var mr=new Array,gr=3,yr=fr-1,xr=(1<<fr)-1;if(mr[1]=pr.convert(this),fr>1){var wr=nbi();for(pr.sqrTo(mr[1],wr);gr<=xr;)mr[gr]=nbi(),pr.mulTo(wr,mr[gr-2],mr[gr]),gr+=2}var br=cr.t-1,Sr,vr=!0,Er=nbi(),Ar;for(dr=nbits(cr.data[br])-1;br>=0;){for(dr>=yr?Sr=cr.data[br]>>dr-yr&xr:(Sr=(cr.data[br]&(1<<dr+1)-1)<<yr-dr,br>0&&(Sr|=cr.data[br-1]>>this.DB+dr-yr)),gr=fr;!(Sr&1);)Sr>>=1,--gr;if((dr-=gr)<0&&(dr+=this.DB,--br),vr)mr[Sr].copyTo(hr),vr=!1;else{for(;gr>1;)pr.sqrTo(hr,Er),pr.sqrTo(Er,hr),gr-=2;gr>0?pr.sqrTo(hr,Er):(Ar=hr,hr=Er,Er=Ar),pr.mulTo(Er,mr[Sr],hr)}for(;br>=0&&!(cr.data[br]&1<<dr);)pr.sqrTo(hr,Er),Ar=hr,hr=Er,Er=Ar,--dr<0&&(dr=this.DB-1,--br)}return pr.revert(hr)}function bnGCD(cr){var ar=this.s<0?this.negate():this.clone(),dr=cr.s<0?cr.negate():cr.clone();if(ar.compareTo(dr)<0){var fr=ar;ar=dr,dr=fr}var hr=ar.getLowestSetBit(),pr=dr.getLowestSetBit();if(pr<0)return ar;for(hr<pr&&(pr=hr),pr>0&&(ar.rShiftTo(pr,ar),dr.rShiftTo(pr,dr));ar.signum()>0;)(hr=ar.getLowestSetBit())>0&&ar.rShiftTo(hr,ar),(hr=dr.getLowestSetBit())>0&&dr.rShiftTo(hr,dr),ar.compareTo(dr)>=0?(ar.subTo(dr,ar),ar.rShiftTo(1,ar)):(dr.subTo(ar,dr),dr.rShiftTo(1,dr));return pr>0&&dr.lShiftTo(pr,dr),dr}function bnpModInt(cr){if(cr<=0)return 0;var ar=this.DV%cr,dr=this.s<0?cr-1:0;if(this.t>0)if(ar==0)dr=this.data[0]%cr;else for(var fr=this.t-1;fr>=0;--fr)dr=(ar*dr+this.data[fr])%cr;return dr}function bnModInverse(cr){var ar=cr.isEven();if(this.isEven()&&ar||cr.signum()==0)return BigInteger$2.ZERO;for(var dr=cr.clone(),fr=this.clone(),hr=nbv(1),pr=nbv(0),mr=nbv(0),gr=nbv(1);dr.signum()!=0;){for(;dr.isEven();)dr.rShiftTo(1,dr),ar?((!hr.isEven()||!pr.isEven())&&(hr.addTo(this,hr),pr.subTo(cr,pr)),hr.rShiftTo(1,hr)):pr.isEven()||pr.subTo(cr,pr),pr.rShiftTo(1,pr);for(;fr.isEven();)fr.rShiftTo(1,fr),ar?((!mr.isEven()||!gr.isEven())&&(mr.addTo(this,mr),gr.subTo(cr,gr)),mr.rShiftTo(1,mr)):gr.isEven()||gr.subTo(cr,gr),gr.rShiftTo(1,gr);dr.compareTo(fr)>=0?(dr.subTo(fr,dr),ar&&hr.subTo(mr,hr),pr.subTo(gr,pr)):(fr.subTo(dr,fr),ar&&mr.subTo(hr,mr),gr.subTo(pr,gr))}if(fr.compareTo(BigInteger$2.ONE)!=0)return BigInteger$2.ZERO;if(gr.compareTo(cr)>=0)return gr.subtract(cr);if(gr.signum()<0)gr.addTo(cr,gr);else return gr;return gr.signum()<0?gr.add(cr):gr}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(cr){var ar,dr=this.abs();if(dr.t==1&&dr.data[0]<=lowprimes[lowprimes.length-1]){for(ar=0;ar<lowprimes.length;++ar)if(dr.data[0]==lowprimes[ar])return!0;return!1}if(dr.isEven())return!1;for(ar=1;ar<lowprimes.length;){for(var fr=lowprimes[ar],hr=ar+1;hr<lowprimes.length&&fr<lplim;)fr*=lowprimes[hr++];for(fr=dr.modInt(fr);ar<hr;)if(fr%lowprimes[ar++]==0)return!1}return dr.millerRabin(cr)}function bnpMillerRabin(cr){var ar=this.subtract(BigInteger$2.ONE),dr=ar.getLowestSetBit();if(dr<=0)return!1;for(var fr=ar.shiftRight(dr),hr=bnGetPrng(),pr,mr=0;mr<cr;++mr){do pr=new BigInteger$2(this.bitLength(),hr);while(pr.compareTo(BigInteger$2.ONE)<=0||pr.compareTo(ar)>=0);var gr=pr.modPow(fr,this);if(gr.compareTo(BigInteger$2.ONE)!=0&&gr.compareTo(ar)!=0){for(var yr=1;yr++<dr&&gr.compareTo(ar)!=0;)if(gr=gr.modPowInt(2,this),gr.compareTo(BigInteger$2.ONE)==0)return!1;if(gr.compareTo(ar)!=0)return!1}}return!0}function bnGetPrng(){return{nextBytes:function(cr){for(var ar=0;ar<cr.length;++ar)cr[ar]=Math.floor(Math.random()*256)}}}BigInteger$2.prototype.chunkSize=bnpChunkSize;BigInteger$2.prototype.toRadix=bnpToRadix;BigInteger$2.prototype.fromRadix=bnpFromRadix;BigInteger$2.prototype.fromNumber=bnpFromNumber;BigInteger$2.prototype.bitwiseTo=bnpBitwiseTo;BigInteger$2.prototype.changeBit=bnpChangeBit;BigInteger$2.prototype.addTo=bnpAddTo;BigInteger$2.prototype.dMultiply=bnpDMultiply;BigInteger$2.prototype.dAddOffset=bnpDAddOffset;BigInteger$2.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger$2.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger$2.prototype.modInt=bnpModInt;BigInteger$2.prototype.millerRabin=bnpMillerRabin;BigInteger$2.prototype.clone=bnClone;BigInteger$2.prototype.intValue=bnIntValue;BigInteger$2.prototype.byteValue=bnByteValue;BigInteger$2.prototype.shortValue=bnShortValue;BigInteger$2.prototype.signum=bnSigNum;BigInteger$2.prototype.toByteArray=bnToByteArray;BigInteger$2.prototype.equals=bnEquals;BigInteger$2.prototype.min=bnMin;BigInteger$2.prototype.max=bnMax;BigInteger$2.prototype.and=bnAnd;BigInteger$2.prototype.or=bnOr;BigInteger$2.prototype.xor=bnXor;BigInteger$2.prototype.andNot=bnAndNot;BigInteger$2.prototype.not=bnNot;BigInteger$2.prototype.shiftLeft=bnShiftLeft;BigInteger$2.prototype.shiftRight=bnShiftRight;BigInteger$2.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger$2.prototype.bitCount=bnBitCount;BigInteger$2.prototype.testBit=bnTestBit;BigInteger$2.prototype.setBit=bnSetBit;BigInteger$2.prototype.clearBit=bnClearBit;BigInteger$2.prototype.flipBit=bnFlipBit;BigInteger$2.prototype.add=bnAdd;BigInteger$2.prototype.subtract=bnSubtract;BigInteger$2.prototype.multiply=bnMultiply;BigInteger$2.prototype.divide=bnDivide;BigInteger$2.prototype.remainder=bnRemainder;BigInteger$2.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger$2.prototype.modPow=bnModPow;BigInteger$2.prototype.modInverse=bnModInverse;BigInteger$2.prototype.pow=bnPow;BigInteger$2.prototype.gcd=bnGCD;BigInteger$2.prototype.isProbablePrime=bnIsProbablePrime;var forge$5=forge$m,sha1=forge$5.sha1=forge$5.sha1||{};forge$5.md.sha1=forge$5.md.algorithms.sha1=sha1;sha1.create=function(){_initialized$1||_init$1();var cr=null,ar=forge$5.util.createBuffer(),dr=new Array(80),fr={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return fr.start=function(){fr.messageLength=0,fr.fullMessageLength=fr.messageLength64=[];for(var hr=fr.messageLengthSize/4,pr=0;pr<hr;++pr)fr.fullMessageLength.push(0);return ar=forge$5.util.createBuffer(),cr={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},fr},fr.start(),fr.update=function(hr,pr){pr==="utf8"&&(hr=forge$5.util.encodeUtf8(hr));var mr=hr.length;fr.messageLength+=mr,mr=[mr/4294967296>>>0,mr>>>0];for(var gr=fr.fullMessageLength.length-1;gr>=0;--gr)fr.fullMessageLength[gr]+=mr[1],mr[1]=mr[0]+(fr.fullMessageLength[gr]/4294967296>>>0),fr.fullMessageLength[gr]=fr.fullMessageLength[gr]>>>0,mr[0]=mr[1]/4294967296>>>0;return ar.putBytes(hr),_update$1(cr,dr,ar),(ar.read>2048||ar.length()===0)&&ar.compact(),fr},fr.digest=function(){var hr=forge$5.util.createBuffer();hr.putBytes(ar.bytes());var pr=fr.fullMessageLength[fr.fullMessageLength.length-1]+fr.messageLengthSize,mr=pr&fr.blockLength-1;hr.putBytes(_padding$1.substr(0,fr.blockLength-mr));for(var gr,yr,xr=fr.fullMessageLength[0]*8,wr=0;wr<fr.fullMessageLength.length-1;++wr)gr=fr.fullMessageLength[wr+1]*8,yr=gr/4294967296>>>0,xr+=yr,hr.putInt32(xr>>>0),xr=gr>>>0;hr.putInt32(xr);var br={h0:cr.h0,h1:cr.h1,h2:cr.h2,h3:cr.h3,h4:cr.h4};_update$1(br,dr,hr);var Sr=forge$5.util.createBuffer();return Sr.putInt32(br.h0),Sr.putInt32(br.h1),Sr.putInt32(br.h2),Sr.putInt32(br.h3),Sr.putInt32(br.h4),Sr},fr};var _padding$1=null,_initialized$1=!1;function _init$1(){_padding$1=String.fromCharCode(128),_padding$1+=forge$5.util.fillString(String.fromCharCode(0),64),_initialized$1=!0}function _update$1(cr,ar,dr){for(var fr,hr,pr,mr,gr,yr,xr,wr,br=dr.length();br>=64;){for(hr=cr.h0,pr=cr.h1,mr=cr.h2,gr=cr.h3,yr=cr.h4,wr=0;wr<16;++wr)fr=dr.getInt32(),ar[wr]=fr,xr=gr^pr&(mr^gr),fr=(hr<<5|hr>>>27)+xr+yr+1518500249+fr,yr=gr,gr=mr,mr=(pr<<30|pr>>>2)>>>0,pr=hr,hr=fr;for(;wr<20;++wr)fr=ar[wr-3]^ar[wr-8]^ar[wr-14]^ar[wr-16],fr=fr<<1|fr>>>31,ar[wr]=fr,xr=gr^pr&(mr^gr),fr=(hr<<5|hr>>>27)+xr+yr+1518500249+fr,yr=gr,gr=mr,mr=(pr<<30|pr>>>2)>>>0,pr=hr,hr=fr;for(;wr<32;++wr)fr=ar[wr-3]^ar[wr-8]^ar[wr-14]^ar[wr-16],fr=fr<<1|fr>>>31,ar[wr]=fr,xr=pr^mr^gr,fr=(hr<<5|hr>>>27)+xr+yr+1859775393+fr,yr=gr,gr=mr,mr=(pr<<30|pr>>>2)>>>0,pr=hr,hr=fr;for(;wr<40;++wr)fr=ar[wr-6]^ar[wr-16]^ar[wr-28]^ar[wr-32],fr=fr<<2|fr>>>30,ar[wr]=fr,xr=pr^mr^gr,fr=(hr<<5|hr>>>27)+xr+yr+1859775393+fr,yr=gr,gr=mr,mr=(pr<<30|pr>>>2)>>>0,pr=hr,hr=fr;for(;wr<60;++wr)fr=ar[wr-6]^ar[wr-16]^ar[wr-28]^ar[wr-32],fr=fr<<2|fr>>>30,ar[wr]=fr,xr=pr&mr|gr&(pr^mr),fr=(hr<<5|hr>>>27)+xr+yr+2400959708+fr,yr=gr,gr=mr,mr=(pr<<30|pr>>>2)>>>0,pr=hr,hr=fr;for(;wr<80;++wr)fr=ar[wr-6]^ar[wr-16]^ar[wr-28]^ar[wr-32],fr=fr<<2|fr>>>30,ar[wr]=fr,xr=pr^mr^gr,fr=(hr<<5|hr>>>27)+xr+yr+3395469782+fr,yr=gr,gr=mr,mr=(pr<<30|pr>>>2)>>>0,pr=hr,hr=fr;cr.h0=cr.h0+hr|0,cr.h1=cr.h1+pr|0,cr.h2=cr.h2+mr|0,cr.h3=cr.h3+gr|0,cr.h4=cr.h4+yr|0,br-=64}}var forge$4=forge$m,pkcs1=forge$4.pkcs1=forge$4.pkcs1||{};pkcs1.encode_rsa_oaep=function(cr,ar,dr){var fr,hr,pr,mr;typeof dr=="string"?(fr=dr,hr=arguments[3]||void 0,pr=arguments[4]||void 0):dr&&(fr=dr.label||void 0,hr=dr.seed||void 0,pr=dr.md||void 0,dr.mgf1&&dr.mgf1.md&&(mr=dr.mgf1.md)),pr?pr.start():pr=forge$4.md.sha1.create(),mr||(mr=pr);var gr=Math.ceil(cr.n.bitLength()/8),yr=gr-2*pr.digestLength-2;if(ar.length>yr){var xr=new Error("RSAES-OAEP input message length is too long.");throw xr.length=ar.length,xr.maxLength=yr,xr}fr||(fr=""),pr.update(fr,"raw");for(var wr=pr.digest(),br="",Sr=yr-ar.length,vr=0;vr<Sr;vr++)br+="\0";var Er=wr.getBytes()+br+""+ar;if(!hr)hr=forge$4.random.getBytes(pr.digestLength);else if(hr.length!==pr.digestLength){var xr=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw xr.seedLength=hr.length,xr.digestLength=pr.digestLength,xr}var Ar=rsa_mgf1(hr,gr-pr.digestLength-1,mr),_r=forge$4.util.xorBytes(Er,Ar,Er.length),Cr=rsa_mgf1(_r,pr.digestLength,mr),kr=forge$4.util.xorBytes(hr,Cr,hr.length);return"\0"+kr+_r};pkcs1.decode_rsa_oaep=function(cr,ar,dr){var fr,hr,pr;typeof dr=="string"?(fr=dr,hr=arguments[3]||void 0):dr&&(fr=dr.label||void 0,hr=dr.md||void 0,dr.mgf1&&dr.mgf1.md&&(pr=dr.mgf1.md));var mr=Math.ceil(cr.n.bitLength()/8);if(ar.length!==mr){var _r=new Error("RSAES-OAEP encoded message length is invalid.");throw _r.length=ar.length,_r.expectedLength=mr,_r}if(hr===void 0?hr=forge$4.md.sha1.create():hr.start(),pr||(pr=hr),mr<2*hr.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");fr||(fr=""),hr.update(fr,"raw");for(var gr=hr.digest().getBytes(),yr=ar.charAt(0),xr=ar.substring(1,hr.digestLength+1),wr=ar.substring(1+hr.digestLength),br=rsa_mgf1(wr,hr.digestLength,pr),Sr=forge$4.util.xorBytes(xr,br,xr.length),vr=rsa_mgf1(Sr,mr-hr.digestLength-1,pr),Er=forge$4.util.xorBytes(wr,vr,wr.length),Ar=Er.substring(0,hr.digestLength),_r=yr!=="\0",Cr=0;Cr<hr.digestLength;++Cr)_r|=gr.charAt(Cr)!==Ar.charAt(Cr);for(var kr=1,Rr=hr.digestLength,Ir=hr.digestLength;Ir<Er.length;Ir++){var Nr=Er.charCodeAt(Ir),Pr=Nr&1^1,Tr=kr?65534:0;_r|=Nr&Tr,kr=kr&Pr,Rr+=kr}if(_r||Er.charCodeAt(Rr)!==1)throw new Error("Invalid RSAES-OAEP padding.");return Er.substring(Rr+1)};function rsa_mgf1(cr,ar,dr){dr||(dr=forge$4.md.sha1.create());for(var fr="",hr=Math.ceil(ar/dr.digestLength),pr=0;pr<hr;++pr){var mr=String.fromCharCode(pr>>24&255,pr>>16&255,pr>>8&255,pr&255);dr.start(),dr.update(cr+mr),fr+=dr.digest().getBytes()}return fr.substring(0,ar)}var forge$3=forge$m;(function(){if(forge$3.prime){forge$3.prime;return}var cr=forge$3.prime=forge$3.prime||{},ar=forge$3.jsbn.BigInteger,dr=[6,4,2,4,2,4,6,2],fr=new ar(null);fr.fromInt(30);var hr=function(br,Sr){return br|Sr};cr.generateProbablePrime=function(br,Sr,vr){typeof Sr=="function"&&(vr=Sr,Sr={}),Sr=Sr||{};var Er=Sr.algorithm||"PRIMEINC";typeof Er=="string"&&(Er={name:Er}),Er.options=Er.options||{};var Ar=Sr.prng||forge$3.random,_r={nextBytes:function(Cr){for(var kr=Ar.getBytesSync(Cr.length),Rr=0;Rr<Cr.length;++Rr)Cr[Rr]=kr.charCodeAt(Rr)}};if(Er.name==="PRIMEINC")return pr(br,_r,Er.options,vr);throw new Error("Invalid prime generation algorithm: "+Er.name)};function pr(br,Sr,vr,Er){return"workers"in vr?yr(br,Sr,vr,Er):mr(br,Sr,vr,Er)}function mr(br,Sr,vr,Er){var Ar=xr(br,Sr),_r=0,Cr=wr(Ar.bitLength());"millerRabinTests"in vr&&(Cr=vr.millerRabinTests);var kr=10;"maxBlockTime"in vr&&(kr=vr.maxBlockTime),gr(Ar,br,Sr,_r,Cr,kr,Er)}function gr(br,Sr,vr,Er,Ar,_r,Cr){var kr=+new Date;do{if(br.bitLength()>Sr&&(br=xr(Sr,vr)),br.isProbablePrime(Ar))return Cr(null,br);br.dAddOffset(dr[Er++%8],0)}while(_r<0||+new Date-kr<_r);forge$3.util.setImmediate(function(){gr(br,Sr,vr,Er,Ar,_r,Cr)})}function yr(br,Sr,vr,Er){if(typeof Worker>"u")return mr(br,Sr,vr,Er);var Ar=xr(br,Sr),_r=vr.workers,Cr=vr.workLoad||100,kr=Cr*30/8,Rr=vr.workerScript||"forge/prime.worker.js";if(_r===-1)return forge$3.util.estimateCores(function(Nr,Pr){Nr&&(Pr=2),_r=Pr-1,Ir()});Ir();function Ir(){_r=Math.max(1,_r);for(var Nr=[],Pr=0;Pr<_r;++Pr)Nr[Pr]=new Worker(Rr);for(var Pr=0;Pr<_r;++Pr)Nr[Pr].addEventListener("message",Br);var Tr=!1;function Br(Fr){if(!Tr){var jr=Fr.data;if(jr.found){for(var Ur=0;Ur<Nr.length;++Ur)Nr[Ur].terminate();return Tr=!0,Er(null,new ar(jr.prime,16))}Ar.bitLength()>br&&(Ar=xr(br,Sr));var qr=Ar.toString(16);Fr.target.postMessage({hex:qr,workLoad:Cr}),Ar.dAddOffset(kr,0)}}}}function xr(br,Sr){var vr=new ar(br,Sr),Er=br-1;return vr.testBit(Er)||vr.bitwiseTo(ar.ONE.shiftLeft(Er),hr,vr),vr.dAddOffset(31-vr.mod(fr).byteValue(),0),vr}function wr(br){return br<=100?27:br<=150?18:br<=200?15:br<=250?12:br<=300?9:br<=350?8:br<=400?7:br<=500?6:br<=600?5:br<=800?4:br<=1250?3:2}})();var forge$2=forge$m;if(typeof BigInteger$1>"u")var BigInteger$1=forge$2.jsbn.BigInteger;var _crypto=forge$2.util.isNodejs?require$$1$1:null,asn1$1=forge$2.asn1,util$5=forge$2.util;forge$2.pki=forge$2.pki||{};forge$2.pki.rsa=forge$2.rsa=forge$2.rsa||{};var pki$1=forge$2.pki,GCD_30_DELTA=[6,4,2,4,2,4,6,2],privateKeyValidator={name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},rsaPrivateKeyValidator={name:"RSAPrivateKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},rsaPublicKeyValidator={name:"RSAPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},publicKeyValidator=forge$2.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},digestInfoValidator={name:"DigestInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},emsaPkcs1v15encode=function(cr){var ar;if(cr.algorithm in pki$1.oids)ar=pki$1.oids[cr.algorithm];else{var dr=new Error("Unknown message digest algorithm.");throw dr.algorithm=cr.algorithm,dr}var fr=asn1$1.oidToDer(ar).getBytes(),hr=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]),pr=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]);pr.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,fr)),pr.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,""));var mr=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,cr.digest().getBytes());return hr.value.push(pr),hr.value.push(mr),asn1$1.toDer(hr).getBytes()},_modPow=function(cr,ar,dr){if(dr)return cr.modPow(ar.e,ar.n);if(!ar.p||!ar.q)return cr.modPow(ar.d,ar.n);ar.dP||(ar.dP=ar.d.mod(ar.p.subtract(BigInteger$1.ONE))),ar.dQ||(ar.dQ=ar.d.mod(ar.q.subtract(BigInteger$1.ONE))),ar.qInv||(ar.qInv=ar.q.modInverse(ar.p));var fr;do fr=new BigInteger$1(forge$2.util.bytesToHex(forge$2.random.getBytes(ar.n.bitLength()/8)),16);while(fr.compareTo(ar.n)>=0||!fr.gcd(ar.n).equals(BigInteger$1.ONE));cr=cr.multiply(fr.modPow(ar.e,ar.n)).mod(ar.n);for(var hr=cr.mod(ar.p).modPow(ar.dP,ar.p),pr=cr.mod(ar.q).modPow(ar.dQ,ar.q);hr.compareTo(pr)<0;)hr=hr.add(ar.p);var mr=hr.subtract(pr).multiply(ar.qInv).mod(ar.p).multiply(ar.q).add(pr);return mr=mr.multiply(fr.modInverse(ar.n)).mod(ar.n),mr};pki$1.rsa.encrypt=function(cr,ar,dr){var fr=dr,hr,pr=Math.ceil(ar.n.bitLength()/8);dr!==!1&&dr!==!0?(fr=dr===2,hr=_encodePkcs1_v1_5(cr,ar,dr)):(hr=forge$2.util.createBuffer(),hr.putBytes(cr));for(var mr=new BigInteger$1(hr.toHex(),16),gr=_modPow(mr,ar,fr),yr=gr.toString(16),xr=forge$2.util.createBuffer(),wr=pr-Math.ceil(yr.length/2);wr>0;)xr.putByte(0),--wr;return xr.putBytes(forge$2.util.hexToBytes(yr)),xr.getBytes()};pki$1.rsa.decrypt=function(cr,ar,dr,fr){var hr=Math.ceil(ar.n.bitLength()/8);if(cr.length!==hr){var pr=new Error("Encrypted message length is invalid.");throw pr.length=cr.length,pr.expected=hr,pr}var mr=new BigInteger$1(forge$2.util.createBuffer(cr).toHex(),16);if(mr.compareTo(ar.n)>=0)throw new Error("Encrypted message is invalid.");for(var gr=_modPow(mr,ar,dr),yr=gr.toString(16),xr=forge$2.util.createBuffer(),wr=hr-Math.ceil(yr.length/2);wr>0;)xr.putByte(0),--wr;return xr.putBytes(forge$2.util.hexToBytes(yr)),fr!==!1?_decodePkcs1_v1_5(xr.getBytes(),ar,dr):xr.getBytes()};pki$1.rsa.createKeyPairGenerationState=function(cr,ar,dr){typeof cr=="string"&&(cr=parseInt(cr,10)),cr=cr||2048,dr=dr||{};var fr=dr.prng||forge$2.random,hr={nextBytes:function(gr){for(var yr=fr.getBytesSync(gr.length),xr=0;xr<gr.length;++xr)gr[xr]=yr.charCodeAt(xr)}},pr=dr.algorithm||"PRIMEINC",mr;if(pr==="PRIMEINC")mr={algorithm:pr,state:0,bits:cr,rng:hr,eInt:ar||65537,e:new BigInteger$1(null),p:null,q:null,qBits:cr>>1,pBits:cr-(cr>>1),pqState:0,num:null,keys:null},mr.e.fromInt(mr.eInt);else throw new Error("Invalid key generation algorithm: "+pr);return mr};pki$1.rsa.stepKeyPairGenerationState=function(cr,ar){"algorithm"in cr||(cr.algorithm="PRIMEINC");var dr=new BigInteger$1(null);dr.fromInt(30);for(var fr=0,hr=function(br,Sr){return br|Sr},pr=+new Date,mr,gr=0;cr.keys===null&&(ar<=0||gr<ar);){if(cr.state===0){var yr=cr.p===null?cr.pBits:cr.qBits,xr=yr-1;cr.pqState===0?(cr.num=new BigInteger$1(yr,cr.rng),cr.num.testBit(xr)||cr.num.bitwiseTo(BigInteger$1.ONE.shiftLeft(xr),hr,cr.num),cr.num.dAddOffset(31-cr.num.mod(dr).byteValue(),0),fr=0,++cr.pqState):cr.pqState===1?cr.num.bitLength()>yr?cr.pqState=0:cr.num.isProbablePrime(_getMillerRabinTests(cr.num.bitLength()))?++cr.pqState:cr.num.dAddOffset(GCD_30_DELTA[fr++%8],0):cr.pqState===2?cr.pqState=cr.num.subtract(BigInteger$1.ONE).gcd(cr.e).compareTo(BigInteger$1.ONE)===0?3:0:cr.pqState===3&&(cr.pqState=0,cr.p===null?cr.p=cr.num:cr.q=cr.num,cr.p!==null&&cr.q!==null&&++cr.state,cr.num=null)}else if(cr.state===1)cr.p.compareTo(cr.q)<0&&(cr.num=cr.p,cr.p=cr.q,cr.q=cr.num),++cr.state;else if(cr.state===2)cr.p1=cr.p.subtract(BigInteger$1.ONE),cr.q1=cr.q.subtract(BigInteger$1.ONE),cr.phi=cr.p1.multiply(cr.q1),++cr.state;else if(cr.state===3)cr.phi.gcd(cr.e).compareTo(BigInteger$1.ONE)===0?++cr.state:(cr.p=null,cr.q=null,cr.state=0);else if(cr.state===4)cr.n=cr.p.multiply(cr.q),cr.n.bitLength()===cr.bits?++cr.state:(cr.q=null,cr.state=0);else if(cr.state===5){var wr=cr.e.modInverse(cr.phi);cr.keys={privateKey:pki$1.rsa.setPrivateKey(cr.n,cr.e,wr,cr.p,cr.q,wr.mod(cr.p1),wr.mod(cr.q1),cr.q.modInverse(cr.p)),publicKey:pki$1.rsa.setPublicKey(cr.n,cr.e)}}mr=+new Date,gr+=mr-pr,pr=mr}return cr.keys!==null};pki$1.rsa.generateKeyPair=function(cr,ar,dr,fr){if(arguments.length===1?typeof cr=="object"?(dr=cr,cr=void 0):typeof cr=="function"&&(fr=cr,cr=void 0):arguments.length===2?typeof cr=="number"?typeof ar=="function"?(fr=ar,ar=void 0):typeof ar!="number"&&(dr=ar,ar=void 0):(dr=cr,fr=ar,cr=void 0,ar=void 0):arguments.length===3&&(typeof ar=="number"?typeof dr=="function"&&(fr=dr,dr=void 0):(fr=dr,dr=ar,ar=void 0)),dr=dr||{},cr===void 0&&(cr=dr.bits||2048),ar===void 0&&(ar=dr.e||65537),!forge$2.options.usePureJavaScript&&!dr.prng&&cr>=256&&cr<=16384&&(ar===65537||ar===3)){if(fr){if(_detectNodeCrypto("generateKeyPair"))return _crypto.generateKeyPair("rsa",{modulusLength:cr,publicExponent:ar,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(gr,yr,xr){if(gr)return fr(gr);fr(null,{privateKey:pki$1.privateKeyFromPem(xr),publicKey:pki$1.publicKeyFromPem(yr)})});if(_detectSubtleCrypto("generateKey")&&_detectSubtleCrypto("exportKey"))return util$5.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:cr,publicExponent:_intToUint8Array(ar),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(gr){return util$5.globalScope.crypto.subtle.exportKey("pkcs8",gr.privateKey)}).then(void 0,function(gr){fr(gr)}).then(function(gr){if(gr){var yr=pki$1.privateKeyFromAsn1(asn1$1.fromDer(forge$2.util.createBuffer(gr)));fr(null,{privateKey:yr,publicKey:pki$1.setRsaPublicKey(yr.n,yr.e)})}});if(_detectSubtleMsCrypto("generateKey")&&_detectSubtleMsCrypto("exportKey")){var hr=util$5.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:cr,publicExponent:_intToUint8Array(ar),hash:{name:"SHA-256"}},!0,["sign","verify"]);hr.oncomplete=function(gr){var yr=gr.target.result,xr=util$5.globalScope.msCrypto.subtle.exportKey("pkcs8",yr.privateKey);xr.oncomplete=function(wr){var br=wr.target.result,Sr=pki$1.privateKeyFromAsn1(asn1$1.fromDer(forge$2.util.createBuffer(br)));fr(null,{privateKey:Sr,publicKey:pki$1.setRsaPublicKey(Sr.n,Sr.e)})},xr.onerror=function(wr){fr(wr)}},hr.onerror=function(gr){fr(gr)};return}}else if(_detectNodeCrypto("generateKeyPairSync")){var pr=_crypto.generateKeyPairSync("rsa",{modulusLength:cr,publicExponent:ar,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:pki$1.privateKeyFromPem(pr.privateKey),publicKey:pki$1.publicKeyFromPem(pr.publicKey)}}}var mr=pki$1.rsa.createKeyPairGenerationState(cr,ar,dr);if(!fr)return pki$1.rsa.stepKeyPairGenerationState(mr,0),mr.keys;_generateKeyPair(mr,dr,fr)};pki$1.setRsaPublicKey=pki$1.rsa.setPublicKey=function(cr,ar){var dr={n:cr,e:ar};return dr.encrypt=function(fr,hr,pr){if(typeof hr=="string"?hr=hr.toUpperCase():hr===void 0&&(hr="RSAES-PKCS1-V1_5"),hr==="RSAES-PKCS1-V1_5")hr={encode:function(gr,yr,xr){return _encodePkcs1_v1_5(gr,yr,2).getBytes()}};else if(hr==="RSA-OAEP"||hr==="RSAES-OAEP")hr={encode:function(gr,yr){return forge$2.pkcs1.encode_rsa_oaep(yr,gr,pr)}};else if(["RAW","NONE","NULL",null].indexOf(hr)!==-1)hr={encode:function(gr){return gr}};else if(typeof hr=="string")throw new Error('Unsupported encryption scheme: "'+hr+'".');var mr=hr.encode(fr,dr,!0);return pki$1.rsa.encrypt(mr,dr,!0)},dr.verify=function(fr,hr,pr,mr){typeof pr=="string"?pr=pr.toUpperCase():pr===void 0&&(pr="RSASSA-PKCS1-V1_5"),mr===void 0&&(mr={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in mr||(mr._parseAllDigestBytes=!0),pr==="RSASSA-PKCS1-V1_5"?pr={verify:function(yr,xr){xr=_decodePkcs1_v1_5(xr,dr,!0);var wr=asn1$1.fromDer(xr,{parseAllBytes:mr._parseAllDigestBytes}),br={},Sr=[];if(!asn1$1.validate(wr,digestInfoValidator,br,Sr)){var vr=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw vr.errors=Sr,vr}var Er=asn1$1.derToOid(br.algorithmIdentifier);if(!(Er===forge$2.oids.md2||Er===forge$2.oids.md5||Er===forge$2.oids.sha1||Er===forge$2.oids.sha224||Er===forge$2.oids.sha256||Er===forge$2.oids.sha384||Er===forge$2.oids.sha512||Er===forge$2.oids["sha512-224"]||Er===forge$2.oids["sha512-256"])){var vr=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw vr.oid=Er,vr}if((Er===forge$2.oids.md2||Er===forge$2.oids.md5)&&!("parameters"in br))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return yr===br.digest}}:(pr==="NONE"||pr==="NULL"||pr===null)&&(pr={verify:function(yr,xr){return xr=_decodePkcs1_v1_5(xr,dr,!0),yr===xr}});var gr=pki$1.rsa.decrypt(hr,dr,!0,!1);return pr.verify(fr,gr,dr.n.bitLength())},dr};pki$1.setRsaPrivateKey=pki$1.rsa.setPrivateKey=function(cr,ar,dr,fr,hr,pr,mr,gr){var yr={n:cr,e:ar,d:dr,p:fr,q:hr,dP:pr,dQ:mr,qInv:gr};return yr.decrypt=function(xr,wr,br){typeof wr=="string"?wr=wr.toUpperCase():wr===void 0&&(wr="RSAES-PKCS1-V1_5");var Sr=pki$1.rsa.decrypt(xr,yr,!1,!1);if(wr==="RSAES-PKCS1-V1_5")wr={decode:_decodePkcs1_v1_5};else if(wr==="RSA-OAEP"||wr==="RSAES-OAEP")wr={decode:function(vr,Er){return forge$2.pkcs1.decode_rsa_oaep(Er,vr,br)}};else if(["RAW","NONE","NULL",null].indexOf(wr)!==-1)wr={decode:function(vr){return vr}};else throw new Error('Unsupported encryption scheme: "'+wr+'".');return wr.decode(Sr,yr,!1)},yr.sign=function(xr,wr){var br=!1;typeof wr=="string"&&(wr=wr.toUpperCase()),wr===void 0||wr==="RSASSA-PKCS1-V1_5"?(wr={encode:emsaPkcs1v15encode},br=1):(wr==="NONE"||wr==="NULL"||wr===null)&&(wr={encode:function(){return xr}},br=1);var Sr=wr.encode(xr,yr.n.bitLength());return pki$1.rsa.encrypt(Sr,yr,br)},yr};pki$1.wrapRsaPrivateKey=function(cr){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(0).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(pki$1.oids.rsaEncryption).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,asn1$1.toDer(cr).getBytes())])};pki$1.privateKeyFromAsn1=function(cr){var ar={},dr=[];if(asn1$1.validate(cr,privateKeyValidator,ar,dr)&&(cr=asn1$1.fromDer(forge$2.util.createBuffer(ar.privateKey))),ar={},dr=[],!asn1$1.validate(cr,rsaPrivateKeyValidator,ar,dr)){var fr=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw fr.errors=dr,fr}var hr,pr,mr,gr,yr,xr,wr,br;return hr=forge$2.util.createBuffer(ar.privateKeyModulus).toHex(),pr=forge$2.util.createBuffer(ar.privateKeyPublicExponent).toHex(),mr=forge$2.util.createBuffer(ar.privateKeyPrivateExponent).toHex(),gr=forge$2.util.createBuffer(ar.privateKeyPrime1).toHex(),yr=forge$2.util.createBuffer(ar.privateKeyPrime2).toHex(),xr=forge$2.util.createBuffer(ar.privateKeyExponent1).toHex(),wr=forge$2.util.createBuffer(ar.privateKeyExponent2).toHex(),br=forge$2.util.createBuffer(ar.privateKeyCoefficient).toHex(),pki$1.setRsaPrivateKey(new BigInteger$1(hr,16),new BigInteger$1(pr,16),new BigInteger$1(mr,16),new BigInteger$1(gr,16),new BigInteger$1(yr,16),new BigInteger$1(xr,16),new BigInteger$1(wr,16),new BigInteger$1(br,16))};pki$1.privateKeyToAsn1=pki$1.privateKeyToRSAPrivateKey=function(cr){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(0).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(cr.n)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(cr.e)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(cr.d)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(cr.p)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(cr.q)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(cr.dP)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(cr.dQ)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(cr.qInv))])};pki$1.publicKeyFromAsn1=function(cr){var ar={},dr=[];if(asn1$1.validate(cr,publicKeyValidator,ar,dr)){var fr=asn1$1.derToOid(ar.publicKeyOid);if(fr!==pki$1.oids.rsaEncryption){var hr=new Error("Cannot read public key. Unknown OID.");throw hr.oid=fr,hr}cr=ar.rsaPublicKey}if(dr=[],!asn1$1.validate(cr,rsaPublicKeyValidator,ar,dr)){var hr=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw hr.errors=dr,hr}var pr=forge$2.util.createBuffer(ar.publicKeyModulus).toHex(),mr=forge$2.util.createBuffer(ar.publicKeyExponent).toHex();return pki$1.setRsaPublicKey(new BigInteger$1(pr,16),new BigInteger$1(mr,16))};pki$1.publicKeyToAsn1=pki$1.publicKeyToSubjectPublicKeyInfo=function(cr){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(pki$1.oids.rsaEncryption).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BITSTRING,!1,[pki$1.publicKeyToRSAPublicKey(cr)])])};pki$1.publicKeyToRSAPublicKey=function(cr){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(cr.n)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(cr.e))])};function _encodePkcs1_v1_5(cr,ar,dr){var fr=forge$2.util.createBuffer(),hr=Math.ceil(ar.n.bitLength()/8);if(cr.length>hr-11){var pr=new Error("Message is too long for PKCS#1 v1.5 padding.");throw pr.length=cr.length,pr.max=hr-11,pr}fr.putByte(0),fr.putByte(dr);var mr=hr-3-cr.length,gr;if(dr===0||dr===1){gr=dr===0?0:255;for(var yr=0;yr<mr;++yr)fr.putByte(gr)}else for(;mr>0;){for(var xr=0,wr=forge$2.random.getBytes(mr),yr=0;yr<mr;++yr)gr=wr.charCodeAt(yr),gr===0?++xr:fr.putByte(gr);mr=xr}return fr.putByte(0),fr.putBytes(cr),fr}function _decodePkcs1_v1_5(cr,ar,dr,fr){var hr=Math.ceil(ar.n.bitLength()/8),pr=forge$2.util.createBuffer(cr),mr=pr.getByte(),gr=pr.getByte();if(mr!==0||dr&&gr!==0&&gr!==1||!dr&&gr!=2||dr&&gr===0&&typeof fr>"u")throw new Error("Encryption block is invalid.");var yr=0;if(gr===0){yr=hr-3-fr;for(var xr=0;xr<yr;++xr)if(pr.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(gr===1)for(yr=0;pr.length()>1;){if(pr.getByte()!==255){--pr.read;break}++yr}else if(gr===2)for(yr=0;pr.length()>1;){if(pr.getByte()===0){--pr.read;break}++yr}var wr=pr.getByte();if(wr!==0||yr!==hr-3-pr.length())throw new Error("Encryption block is invalid.");return pr.getBytes()}function _generateKeyPair(cr,ar,dr){typeof ar=="function"&&(dr=ar,ar={}),ar=ar||{};var fr={algorithm:{name:ar.algorithm||"PRIMEINC",options:{workers:ar.workers||2,workLoad:ar.workLoad||100,workerScript:ar.workerScript}}};"prng"in ar&&(fr.prng=ar.prng),hr();function hr(){pr(cr.pBits,function(gr,yr){if(gr)return dr(gr);if(cr.p=yr,cr.q!==null)return mr(gr,cr.q);pr(cr.qBits,mr)})}function pr(gr,yr){forge$2.prime.generateProbablePrime(gr,fr,yr)}function mr(gr,yr){if(gr)return dr(gr);if(cr.q=yr,cr.p.compareTo(cr.q)<0){var xr=cr.p;cr.p=cr.q,cr.q=xr}if(cr.p.subtract(BigInteger$1.ONE).gcd(cr.e).compareTo(BigInteger$1.ONE)!==0){cr.p=null,hr();return}if(cr.q.subtract(BigInteger$1.ONE).gcd(cr.e).compareTo(BigInteger$1.ONE)!==0){cr.q=null,pr(cr.qBits,mr);return}if(cr.p1=cr.p.subtract(BigInteger$1.ONE),cr.q1=cr.q.subtract(BigInteger$1.ONE),cr.phi=cr.p1.multiply(cr.q1),cr.phi.gcd(cr.e).compareTo(BigInteger$1.ONE)!==0){cr.p=cr.q=null,hr();return}if(cr.n=cr.p.multiply(cr.q),cr.n.bitLength()!==cr.bits){cr.q=null,pr(cr.qBits,mr);return}var wr=cr.e.modInverse(cr.phi);cr.keys={privateKey:pki$1.rsa.setPrivateKey(cr.n,cr.e,wr,cr.p,cr.q,wr.mod(cr.p1),wr.mod(cr.q1),cr.q.modInverse(cr.p)),publicKey:pki$1.rsa.setPublicKey(cr.n,cr.e)},dr(null,cr.keys)}}function _bnToBytes(cr){var ar=cr.toString(16);ar[0]>="8"&&(ar="00"+ar);var dr=forge$2.util.hexToBytes(ar);return dr.length>1&&(dr.charCodeAt(0)===0&&!(dr.charCodeAt(1)&128)||dr.charCodeAt(0)===255&&(dr.charCodeAt(1)&128)===128)?dr.substr(1):dr}function _getMillerRabinTests(cr){return cr<=100?27:cr<=150?18:cr<=200?15:cr<=250?12:cr<=300?9:cr<=350?8:cr<=400?7:cr<=500?6:cr<=600?5:cr<=800?4:cr<=1250?3:2}function _detectNodeCrypto(cr){return forge$2.util.isNodejs&&typeof _crypto[cr]=="function"}function _detectSubtleCrypto(cr){return typeof util$5.globalScope<"u"&&typeof util$5.globalScope.crypto=="object"&&typeof util$5.globalScope.crypto.subtle=="object"&&typeof util$5.globalScope.crypto.subtle[cr]=="function"}function _detectSubtleMsCrypto(cr){return typeof util$5.globalScope<"u"&&typeof util$5.globalScope.msCrypto=="object"&&typeof util$5.globalScope.msCrypto.subtle=="object"&&typeof util$5.globalScope.msCrypto.subtle[cr]=="function"}function _intToUint8Array(cr){for(var ar=forge$2.util.hexToBytes(cr.toString(16)),dr=new Uint8Array(ar.length),fr=0;fr<ar.length;++fr)dr[fr]=ar.charCodeAt(fr);return dr}var forge$1=forge$m;if(typeof BigInteger>"u")var BigInteger=forge$1.jsbn.BigInteger;var asn1=forge$1.asn1,pki=forge$1.pki=forge$1.pki||{};pki.pbe=forge$1.pbe=forge$1.pbe||{};var oids=pki.oids,encryptedPrivateKeyValidator={name:"EncryptedPrivateKeyInfo",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},PBES2AlgorithmsValidator={name:"PBES2Algorithms",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pkcs12PbeParamsValidator={name:"pkcs-12PbeParams",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"iterations"}]};pki.encryptPrivateKeyInfo=function(cr,ar,dr){dr=dr||{},dr.saltSize=dr.saltSize||8,dr.count=dr.count||2048,dr.algorithm=dr.algorithm||"aes128",dr.prfAlgorithm=dr.prfAlgorithm||"sha1";var fr=forge$1.random.getBytesSync(dr.saltSize),hr=dr.count,pr=asn1.integerToDer(hr),mr,gr,yr;if(dr.algorithm.indexOf("aes")===0||dr.algorithm==="des"){var xr,wr,br;switch(dr.algorithm){case"aes128":mr=16,xr=16,wr=oids["aes128-CBC"],br=forge$1.aes.createEncryptionCipher;break;case"aes192":mr=24,xr=16,wr=oids["aes192-CBC"],br=forge$1.aes.createEncryptionCipher;break;case"aes256":mr=32,xr=16,wr=oids["aes256-CBC"],br=forge$1.aes.createEncryptionCipher;break;case"des":mr=8,xr=8,wr=oids.desCBC,br=forge$1.des.createEncryptionCipher;break;default:var Sr=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw Sr.algorithm=dr.algorithm,Sr}var vr="hmacWith"+dr.prfAlgorithm.toUpperCase(),Er=prfAlgorithmToMessageDigest(vr),Ar=forge$1.pkcs5.pbkdf2(ar,fr,hr,mr,Er),_r=forge$1.random.getBytesSync(xr),Cr=br(Ar);Cr.start(_r),Cr.update(asn1.toDer(cr)),Cr.finish(),yr=Cr.output.getBytes();var kr=createPbkdf2Params(fr,pr,mr,vr);gr=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids.pkcs5PBES2).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids.pkcs5PBKDF2).getBytes()),kr]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(wr).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,_r)])])])}else if(dr.algorithm==="3des"){mr=24;var Rr=new forge$1.util.ByteBuffer(fr),Ar=pki.pbe.generatePkcs12Key(ar,Rr,1,hr,mr),_r=pki.pbe.generatePkcs12Key(ar,Rr,2,hr,mr),Cr=forge$1.des.createEncryptionCipher(Ar);Cr.start(_r),Cr.update(asn1.toDer(cr)),Cr.finish(),yr=Cr.output.getBytes(),gr=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,fr),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,pr.getBytes())])])}else{var Sr=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw Sr.algorithm=dr.algorithm,Sr}var Ir=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[gr,asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,yr)]);return Ir};pki.decryptPrivateKeyInfo=function(cr,ar){var dr=null,fr={},hr=[];if(!asn1.validate(cr,encryptedPrivateKeyValidator,fr,hr)){var pr=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw pr.errors=hr,pr}var mr=asn1.derToOid(fr.encryptionOid),gr=pki.pbe.getCipher(mr,fr.encryptionParams,ar),yr=forge$1.util.createBuffer(fr.encryptedData);return gr.update(yr),gr.finish()&&(dr=asn1.fromDer(gr.output)),dr};pki.encryptedPrivateKeyToPem=function(cr,ar){var dr={type:"ENCRYPTED PRIVATE KEY",body:asn1.toDer(cr).getBytes()};return forge$1.pem.encode(dr,{maxline:ar})};pki.encryptedPrivateKeyFromPem=function(cr){var ar=forge$1.pem.decode(cr)[0];if(ar.type!=="ENCRYPTED PRIVATE KEY"){var dr=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw dr.headerType=ar.type,dr}if(ar.procType&&ar.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return asn1.fromDer(ar.body)};pki.encryptRsaPrivateKey=function(cr,ar,dr){if(dr=dr||{},!dr.legacy){var fr=pki.wrapRsaPrivateKey(pki.privateKeyToAsn1(cr));return fr=pki.encryptPrivateKeyInfo(fr,ar,dr),pki.encryptedPrivateKeyToPem(fr)}var hr,pr,mr,gr;switch(dr.algorithm){case"aes128":hr="AES-128-CBC",mr=16,pr=forge$1.random.getBytesSync(16),gr=forge$1.aes.createEncryptionCipher;break;case"aes192":hr="AES-192-CBC",mr=24,pr=forge$1.random.getBytesSync(16),gr=forge$1.aes.createEncryptionCipher;break;case"aes256":hr="AES-256-CBC",mr=32,pr=forge$1.random.getBytesSync(16),gr=forge$1.aes.createEncryptionCipher;break;case"3des":hr="DES-EDE3-CBC",mr=24,pr=forge$1.random.getBytesSync(8),gr=forge$1.des.createEncryptionCipher;break;case"des":hr="DES-CBC",mr=8,pr=forge$1.random.getBytesSync(8),gr=forge$1.des.createEncryptionCipher;break;default:var yr=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+dr.algorithm+'".');throw yr.algorithm=dr.algorithm,yr}var xr=forge$1.pbe.opensslDeriveBytes(ar,pr.substr(0,8),mr),wr=gr(xr);wr.start(pr),wr.update(asn1.toDer(pki.privateKeyToAsn1(cr))),wr.finish();var br={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:hr,parameters:forge$1.util.bytesToHex(pr).toUpperCase()},body:wr.output.getBytes()};return forge$1.pem.encode(br)};pki.decryptRsaPrivateKey=function(cr,ar){var dr=null,fr=forge$1.pem.decode(cr)[0];if(fr.type!=="ENCRYPTED PRIVATE KEY"&&fr.type!=="PRIVATE KEY"&&fr.type!=="RSA PRIVATE KEY"){var hr=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw hr.headerType=hr,hr}if(fr.procType&&fr.procType.type==="ENCRYPTED"){var pr,mr;switch(fr.dekInfo.algorithm){case"DES-CBC":pr=8,mr=forge$1.des.createDecryptionCipher;break;case"DES-EDE3-CBC":pr=24,mr=forge$1.des.createDecryptionCipher;break;case"AES-128-CBC":pr=16,mr=forge$1.aes.createDecryptionCipher;break;case"AES-192-CBC":pr=24,mr=forge$1.aes.createDecryptionCipher;break;case"AES-256-CBC":pr=32,mr=forge$1.aes.createDecryptionCipher;break;case"RC2-40-CBC":pr=5,mr=function(br){return forge$1.rc2.createDecryptionCipher(br,40)};break;case"RC2-64-CBC":pr=8,mr=function(br){return forge$1.rc2.createDecryptionCipher(br,64)};break;case"RC2-128-CBC":pr=16,mr=function(br){return forge$1.rc2.createDecryptionCipher(br,128)};break;default:var hr=new Error('Could not decrypt private key; unsupported encryption algorithm "'+fr.dekInfo.algorithm+'".');throw hr.algorithm=fr.dekInfo.algorithm,hr}var gr=forge$1.util.hexToBytes(fr.dekInfo.parameters),yr=forge$1.pbe.opensslDeriveBytes(ar,gr.substr(0,8),pr),xr=mr(yr);if(xr.start(gr),xr.update(forge$1.util.createBuffer(fr.body)),xr.finish())dr=xr.output.getBytes();else return dr}else dr=fr.body;return fr.type==="ENCRYPTED PRIVATE KEY"?dr=pki.decryptPrivateKeyInfo(asn1.fromDer(dr),ar):dr=asn1.fromDer(dr),dr!==null&&(dr=pki.privateKeyFromAsn1(dr)),dr};pki.pbe.generatePkcs12Key=function(cr,ar,dr,fr,hr,pr){var mr,gr;if(typeof pr>"u"||pr===null){if(!("sha1"in forge$1.md))throw new Error('"sha1" hash algorithm unavailable.');pr=forge$1.md.sha1.create()}var yr=pr.digestLength,xr=pr.blockLength,wr=new forge$1.util.ByteBuffer,br=new forge$1.util.ByteBuffer;if(cr!=null){for(gr=0;gr<cr.length;gr++)br.putInt16(cr.charCodeAt(gr));br.putInt16(0)}var Sr=br.length(),vr=ar.length(),Er=new forge$1.util.ByteBuffer;Er.fillWithByte(dr,xr);var Ar=xr*Math.ceil(vr/xr),_r=new forge$1.util.ByteBuffer;for(gr=0;gr<Ar;gr++)_r.putByte(ar.at(gr%vr));var Cr=xr*Math.ceil(Sr/xr),kr=new forge$1.util.ByteBuffer;for(gr=0;gr<Cr;gr++)kr.putByte(br.at(gr%Sr));var Rr=_r;Rr.putBuffer(kr);for(var Ir=Math.ceil(hr/yr),Nr=1;Nr<=Ir;Nr++){var Pr=new forge$1.util.ByteBuffer;Pr.putBytes(Er.bytes()),Pr.putBytes(Rr.bytes());for(var Tr=0;Tr<fr;Tr++)pr.start(),pr.update(Pr.getBytes()),Pr=pr.digest();var Br=new forge$1.util.ByteBuffer;for(gr=0;gr<xr;gr++)Br.putByte(Pr.at(gr%yr));var Fr=Math.ceil(vr/xr)+Math.ceil(Sr/xr),jr=new forge$1.util.ByteBuffer;for(mr=0;mr<Fr;mr++){var Ur=new forge$1.util.ByteBuffer(Rr.getBytes(xr)),qr=511;for(gr=Br.length()-1;gr>=0;gr--)qr=qr>>8,qr+=Br.at(gr)+Ur.at(gr),Ur.setAt(gr,qr&255);jr.putBuffer(Ur)}Rr=jr,wr.putBuffer(Pr)}return wr.truncate(wr.length()-hr),wr};pki.pbe.getCipher=function(cr,ar,dr){switch(cr){case pki.oids.pkcs5PBES2:return pki.pbe.getCipherForPBES2(cr,ar,dr);case pki.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pki.oids["pbewithSHAAnd40BitRC2-CBC"]:return pki.pbe.getCipherForPKCS12PBE(cr,ar,dr);default:var fr=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw fr.oid=cr,fr.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],fr}};pki.pbe.getCipherForPBES2=function(cr,ar,dr){var fr={},hr=[];if(!asn1.validate(ar,PBES2AlgorithmsValidator,fr,hr)){var pr=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw pr.errors=hr,pr}if(cr=asn1.derToOid(fr.kdfOid),cr!==pki.oids.pkcs5PBKDF2){var pr=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw pr.oid=cr,pr.supportedOids=["pkcs5PBKDF2"],pr}if(cr=asn1.derToOid(fr.encOid),cr!==pki.oids["aes128-CBC"]&&cr!==pki.oids["aes192-CBC"]&&cr!==pki.oids["aes256-CBC"]&&cr!==pki.oids["des-EDE3-CBC"]&&cr!==pki.oids.desCBC){var pr=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw pr.oid=cr,pr.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],pr}var mr=fr.kdfSalt,gr=forge$1.util.createBuffer(fr.kdfIterationCount);gr=gr.getInt(gr.length()<<3);var yr,xr;switch(pki.oids[cr]){case"aes128-CBC":yr=16,xr=forge$1.aes.createDecryptionCipher;break;case"aes192-CBC":yr=24,xr=forge$1.aes.createDecryptionCipher;break;case"aes256-CBC":yr=32,xr=forge$1.aes.createDecryptionCipher;break;case"des-EDE3-CBC":yr=24,xr=forge$1.des.createDecryptionCipher;break;case"desCBC":yr=8,xr=forge$1.des.createDecryptionCipher;break}var wr=prfOidToMessageDigest(fr.prfOid),br=forge$1.pkcs5.pbkdf2(dr,mr,gr,yr,wr),Sr=fr.encIv,vr=xr(br);return vr.start(Sr),vr};pki.pbe.getCipherForPKCS12PBE=function(cr,ar,dr){var fr={},hr=[];if(!asn1.validate(ar,pkcs12PbeParamsValidator,fr,hr)){var pr=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw pr.errors=hr,pr}var mr=forge$1.util.createBuffer(fr.salt),gr=forge$1.util.createBuffer(fr.iterations);gr=gr.getInt(gr.length()<<3);var yr,xr,wr;switch(cr){case pki.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:yr=24,xr=8,wr=forge$1.des.startDecrypting;break;case pki.oids["pbewithSHAAnd40BitRC2-CBC"]:yr=5,xr=8,wr=function(Ar,_r){var Cr=forge$1.rc2.createDecryptionCipher(Ar,40);return Cr.start(_r,null),Cr};break;default:var pr=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw pr.oid=cr,pr}var br=prfOidToMessageDigest(fr.prfOid),Sr=pki.pbe.generatePkcs12Key(dr,mr,1,gr,yr,br);br.start();var vr=pki.pbe.generatePkcs12Key(dr,mr,2,gr,xr,br);return wr(Sr,vr)};pki.pbe.opensslDeriveBytes=function(cr,ar,dr,fr){if(typeof fr>"u"||fr===null){if(!("md5"in forge$1.md))throw new Error('"md5" hash algorithm unavailable.');fr=forge$1.md.md5.create()}ar===null&&(ar="");for(var hr=[hash(fr,cr+ar)],pr=16,mr=1;pr<dr;++mr,pr+=16)hr.push(hash(fr,hr[mr-1]+cr+ar));return hr.join("").substr(0,dr)};function hash(cr,ar){return cr.start().update(ar).digest().getBytes()}function prfOidToMessageDigest(cr){var ar;if(!cr)ar="hmacWithSHA1";else if(ar=pki.oids[asn1.derToOid(cr)],!ar){var dr=new Error("Unsupported PRF OID.");throw dr.oid=cr,dr.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],dr}return prfAlgorithmToMessageDigest(ar)}function prfAlgorithmToMessageDigest(cr){var ar=forge$1.md;switch(cr){case"hmacWithSHA224":ar=forge$1.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":cr=cr.substr(8).toLowerCase();break;default:var dr=new Error("Unsupported PRF algorithm.");throw dr.algorithm=cr,dr.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],dr}if(!ar||!(cr in ar))throw new Error("Unknown hash algorithm: "+cr);return ar[cr].create()}function createPbkdf2Params(cr,ar,dr,fr){var hr=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,cr),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,ar.getBytes())]);return fr!=="hmacWithSHA1"&&hr.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge$1.util.hexToBytes(dr.toString(16))),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(pki.oids[fr]).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])),hr}function bigIntegerToUintBase64url(cr,ar){let dr=Uint8Array.from(cr.abs().toByteArray());if(dr=dr[0]===0?dr.subarray(1):dr,ar!=null){if(dr.length>ar)throw new Error("byte array longer than desired length");dr=concat([new Uint8Array(ar-dr.length),dr])}return toString$1(dr,"base64url")}function base64urlToBigInteger(cr){const ar=base64urlToBuffer(cr);return new forge$n.jsbn.BigInteger(toString$1(ar,"base16"),16)}function base64urlToBuffer(cr,ar){let dr=fromString(cr,"base64urlpad");if(ar!=null){if(dr.length>ar)throw new Error("byte array longer than desired length");dr=concat([new Uint8Array(ar-dr.length),dr])}return dr}function isPromise$2(cr){return cr==null?!1:typeof cr.then=="function"&&typeof cr.catch=="function"&&typeof cr.finally=="function"}const PUBLIC_KEY_BYTE_LENGTH=32,PRIVATE_KEY_BYTE_LENGTH=64,KEYS_BYTE_LENGTH=32;function generateKey$2(){const cr=ed25519.utils.randomPrivateKey(),ar=ed25519.getPublicKey(cr);return{privateKey:concatKeys(cr,ar),publicKey:ar}}function generateKeyFromSeed(cr){if(cr.length!==KEYS_BYTE_LENGTH)throw new TypeError('"seed" must be 32 bytes in length.');if(!(cr instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const ar=cr,dr=ed25519.getPublicKey(ar);return{privateKey:concatKeys(ar,dr),publicKey:dr}}function hashAndSign$2(cr,ar){const dr=cr.subarray(0,KEYS_BYTE_LENGTH);return ed25519.sign(ar instanceof Uint8Array?ar:ar.subarray(),dr)}function hashAndVerify$2(cr,ar,dr){return ed25519.verify(ar,dr instanceof Uint8Array?dr:dr.subarray(),cr)}function concatKeys(cr,ar){const dr=new Uint8Array(PRIVATE_KEY_BYTE_LENGTH);for(let fr=0;fr<KEYS_BYTE_LENGTH;fr++)dr[fr]=cr[fr],dr[KEYS_BYTE_LENGTH+fr]=ar[fr];return dr}const webcrypto={get(cr=globalThis){const ar=cr.crypto;if(ar==null||ar.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return ar}},derivedEmptyPasswordKey={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function create$2(cr){const ar=cr?.algorithm??"AES-GCM";let dr=cr?.keyLength??16;const fr=cr?.nonceLength??12,hr=cr?.digest??"SHA-256",pr=cr?.saltLength??16,mr=cr?.iterations??32767,gr=webcrypto.get();dr*=8;async function yr(br,Sr){const vr=gr.getRandomValues(new Uint8Array(pr)),Er=gr.getRandomValues(new Uint8Array(fr)),Ar={name:ar,iv:Er};typeof Sr=="string"&&(Sr=fromString(Sr));let _r;if(Sr.length===0){_r=await gr.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["encrypt"]);try{const kr={name:"PBKDF2",salt:vr,iterations:mr,hash:{name:hr}},Rr=await gr.subtle.importKey("raw",Sr,{name:"PBKDF2"},!1,["deriveKey"]);_r=await gr.subtle.deriveKey(kr,Rr,{name:ar,length:dr},!0,["encrypt"])}catch{_r=await gr.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["encrypt"])}}else{const kr={name:"PBKDF2",salt:vr,iterations:mr,hash:{name:hr}},Rr=await gr.subtle.importKey("raw",Sr,{name:"PBKDF2"},!1,["deriveKey"]);_r=await gr.subtle.deriveKey(kr,Rr,{name:ar,length:dr},!0,["encrypt"])}const Cr=await gr.subtle.encrypt(Ar,_r,br);return concat([vr,Ar.iv,new Uint8Array(Cr)])}async function xr(br,Sr){const vr=br.subarray(0,pr),Er=br.subarray(pr,pr+fr),Ar=br.subarray(pr+fr),_r={name:ar,iv:Er};typeof Sr=="string"&&(Sr=fromString(Sr));let Cr;if(Sr.length===0)try{const Rr={name:"PBKDF2",salt:vr,iterations:mr,hash:{name:hr}},Ir=await gr.subtle.importKey("raw",Sr,{name:"PBKDF2"},!1,["deriveKey"]);Cr=await gr.subtle.deriveKey(Rr,Ir,{name:ar,length:dr},!0,["decrypt"])}catch{Cr=await gr.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["decrypt"])}else{const Rr={name:"PBKDF2",salt:vr,iterations:mr,hash:{name:hr}},Ir=await gr.subtle.importKey("raw",Sr,{name:"PBKDF2"},!1,["deriveKey"]);Cr=await gr.subtle.deriveKey(Rr,Ir,{name:ar,length:dr},!0,["decrypt"])}const kr=await gr.subtle.decrypt(_r,Cr,Ar);return new Uint8Array(kr)}return{encrypt:yr,decrypt:xr}}async function exporter(cr,ar){const fr=await create$2().encrypt(cr,ar);return base64$2.encode(fr)}var KeyType;(function(cr){cr.RSA="RSA",cr.Ed25519="Ed25519",cr.Secp256k1="Secp256k1"})(KeyType||(KeyType={}));var __KeyTypeValues;(function(cr){cr[cr.RSA=0]="RSA",cr[cr.Ed25519=1]="Ed25519",cr[cr.Secp256k1=2]="Secp256k1"})(__KeyTypeValues||(__KeyTypeValues={}));(function(cr){cr.codec=()=>enumeration(__KeyTypeValues)})(KeyType||(KeyType={}));var PublicKey;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.Type!=null&&(fr.uint32(8),KeyType.codec().encode(dr.Type,fr)),dr.Data!=null&&(fr.uint32(18),fr.bytes(dr.Data)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.Type=KeyType.codec().decode(dr);break;case 2:hr.Data=dr.bytes();break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(PublicKey||(PublicKey={}));var PrivateKey;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.Type!=null&&(fr.uint32(8),KeyType.codec().encode(dr.Type,fr)),dr.Data!=null&&(fr.uint32(18),fr.bytes(dr.Data)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:hr.Type=KeyType.codec().decode(dr);break;case 2:hr.Data=dr.bytes();break;default:dr.skipType(mr&7);break}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(PrivateKey||(PrivateKey={}));class Ed25519PublicKey{_key;constructor(ar){this._key=ensureKey(ar,PUBLIC_KEY_BYTE_LENGTH)}verify(ar,dr){return hashAndVerify$2(this._key,dr,ar)}marshal(){return this._key}get bytes(){return PublicKey.encode({Type:KeyType.Ed25519,Data:this.marshal()}).subarray()}equals(ar){return equals(this.bytes,ar.bytes)}hash(){const ar=sha256$1.digest(this.bytes);return isPromise$2(ar)?ar.then(({bytes:dr})=>dr):ar.bytes}}class Ed25519PrivateKey{_key;_publicKey;constructor(ar,dr){this._key=ensureKey(ar,PRIVATE_KEY_BYTE_LENGTH),this._publicKey=ensureKey(dr,PUBLIC_KEY_BYTE_LENGTH)}sign(ar){return hashAndSign$2(this._key,ar)}get public(){return new Ed25519PublicKey(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey.encode({Type:KeyType.Ed25519,Data:this.marshal()}).subarray()}equals(ar){return equals(this.bytes,ar.bytes)}async hash(){const ar=sha256$1.digest(this.bytes);let dr;return isPromise$2(ar)?{bytes:dr}=await ar:dr=ar.bytes,dr}async id(){const ar=identity$1.digest(this.public.bytes);return base58btc.encode(ar.bytes).substring(1)}async export(ar,dr="libp2p-key"){if(dr==="libp2p-key")return exporter(this.bytes,ar);throw new CodeError$3(`export format '${dr}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function unmarshalEd25519PrivateKey(cr){if(cr.length>PRIVATE_KEY_BYTE_LENGTH){cr=ensureKey(cr,PRIVATE_KEY_BYTE_LENGTH+PUBLIC_KEY_BYTE_LENGTH);const fr=cr.subarray(0,PRIVATE_KEY_BYTE_LENGTH),hr=cr.subarray(PRIVATE_KEY_BYTE_LENGTH,cr.length);return new Ed25519PrivateKey(fr,hr)}cr=ensureKey(cr,PRIVATE_KEY_BYTE_LENGTH);const ar=cr.subarray(0,PRIVATE_KEY_BYTE_LENGTH),dr=cr.subarray(PUBLIC_KEY_BYTE_LENGTH);return new Ed25519PrivateKey(ar,dr)}function unmarshalEd25519PublicKey(cr){return cr=ensureKey(cr,PUBLIC_KEY_BYTE_LENGTH),new Ed25519PublicKey(cr)}async function generateKeyPair$2(){const{privateKey:cr,publicKey:ar}=generateKey$2();return new Ed25519PrivateKey(cr,ar)}async function generateKeyPairFromSeed(cr){const{privateKey:ar,publicKey:dr}=generateKeyFromSeed(cr);return new Ed25519PrivateKey(ar,dr)}function ensureKey(cr,ar){if(cr=Uint8Array.from(cr??[]),cr.length!==ar)throw new CodeError$3(`Key must be a Uint8Array of length ${ar}, got ${cr.length}`,"ERR_INVALID_KEY_TYPE");return cr}const Ed25519=Object.freeze(Object.defineProperty({__proto__:null,Ed25519PrivateKey,Ed25519PublicKey,generateKeyPair:generateKeyPair$2,generateKeyPairFromSeed,unmarshalEd25519PrivateKey,unmarshalEd25519PublicKey},Symbol.toStringTag,{value:"Module"})),bits={"P-256":256,"P-384":384,"P-521":521},curveTypes=Object.keys(bits);curveTypes.join(" / ");var forge=forge$m,sha512=forge.sha512=forge.sha512||{};forge.md.sha512=forge.md.algorithms.sha512=sha512;var sha384=forge.sha384=forge.sha512.sha384=forge.sha512.sha384||{};sha384.create=function(){return sha512.create("SHA-384")};forge.md.sha384=forge.md.algorithms.sha384=sha384;forge.sha512.sha256=forge.sha512.sha256||{create:function(){return sha512.create("SHA-512/256")}};forge.md["sha512/256"]=forge.md.algorithms["sha512/256"]=forge.sha512.sha256;forge.sha512.sha224=forge.sha512.sha224||{create:function(){return sha512.create("SHA-512/224")}};forge.md["sha512/224"]=forge.md.algorithms["sha512/224"]=forge.sha512.sha224;sha512.create=function(cr){if(_initialized||_init(),typeof cr>"u"&&(cr="SHA-512"),!(cr in _states))throw new Error("Invalid SHA-512 algorithm: "+cr);for(var ar=_states[cr],dr=null,fr=forge.util.createBuffer(),hr=new Array(80),pr=0;pr<80;++pr)hr[pr]=new Array(2);var mr=64;switch(cr){case"SHA-384":mr=48;break;case"SHA-512/256":mr=32;break;case"SHA-512/224":mr=28;break}var gr={algorithm:cr.replace("-","").toLowerCase(),blockLength:128,digestLength:mr,messageLength:0,fullMessageLength:null,messageLengthSize:16};return gr.start=function(){gr.messageLength=0,gr.fullMessageLength=gr.messageLength128=[];for(var yr=gr.messageLengthSize/4,xr=0;xr<yr;++xr)gr.fullMessageLength.push(0);fr=forge.util.createBuffer(),dr=new Array(ar.length);for(var xr=0;xr<ar.length;++xr)dr[xr]=ar[xr].slice(0);return gr},gr.start(),gr.update=function(yr,xr){xr==="utf8"&&(yr=forge.util.encodeUtf8(yr));var wr=yr.length;gr.messageLength+=wr,wr=[wr/4294967296>>>0,wr>>>0];for(var br=gr.fullMessageLength.length-1;br>=0;--br)gr.fullMessageLength[br]+=wr[1],wr[1]=wr[0]+(gr.fullMessageLength[br]/4294967296>>>0),gr.fullMessageLength[br]=gr.fullMessageLength[br]>>>0,wr[0]=wr[1]/4294967296>>>0;return fr.putBytes(yr),_update(dr,hr,fr),(fr.read>2048||fr.length()===0)&&fr.compact(),gr},gr.digest=function(){var yr=forge.util.createBuffer();yr.putBytes(fr.bytes());var xr=gr.fullMessageLength[gr.fullMessageLength.length-1]+gr.messageLengthSize,wr=xr&gr.blockLength-1;yr.putBytes(_padding.substr(0,gr.blockLength-wr));for(var br,Sr,vr=gr.fullMessageLength[0]*8,Er=0;Er<gr.fullMessageLength.length-1;++Er)br=gr.fullMessageLength[Er+1]*8,Sr=br/4294967296>>>0,vr+=Sr,yr.putInt32(vr>>>0),vr=br>>>0;yr.putInt32(vr);for(var Ar=new Array(dr.length),Er=0;Er<dr.length;++Er)Ar[Er]=dr[Er].slice(0);_update(Ar,hr,yr);var _r=forge.util.createBuffer(),Cr;cr==="SHA-512"?Cr=Ar.length:cr==="SHA-384"?Cr=Ar.length-2:Cr=Ar.length-4;for(var Er=0;Er<Cr;++Er)_r.putInt32(Ar[Er][0]),(Er!==Cr-1||cr!=="SHA-512/224")&&_r.putInt32(Ar[Er][1]);return _r},gr};var _padding=null,_initialized=!1,_k=null,_states=null;function _init(){_padding=String.fromCharCode(128),_padding+=forge.util.fillString(String.fromCharCode(0),128),_k=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],_states={},_states["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],_states["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],_states["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],_states["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],_initialized=!0}function _update(cr,ar,dr){for(var fr,hr,pr,mr,gr,yr,xr,wr,br,Sr,vr,Er,Ar,_r,Cr,kr,Rr,Ir,Nr,Pr,Tr,Br,Fr,jr,Ur,qr,Hr,Or,Mr,Lr,Vr,Jr,es,ns,Qr,zr=dr.length();zr>=128;){for(Mr=0;Mr<16;++Mr)ar[Mr][0]=dr.getInt32()>>>0,ar[Mr][1]=dr.getInt32()>>>0;for(;Mr<80;++Mr)Jr=ar[Mr-2],Lr=Jr[0],Vr=Jr[1],fr=((Lr>>>19|Vr<<13)^(Vr>>>29|Lr<<3)^Lr>>>6)>>>0,hr=((Lr<<13|Vr>>>19)^(Vr<<3|Lr>>>29)^(Lr<<26|Vr>>>6))>>>0,ns=ar[Mr-15],Lr=ns[0],Vr=ns[1],pr=((Lr>>>1|Vr<<31)^(Lr>>>8|Vr<<24)^Lr>>>7)>>>0,mr=((Lr<<31|Vr>>>1)^(Lr<<24|Vr>>>8)^(Lr<<25|Vr>>>7))>>>0,es=ar[Mr-7],Qr=ar[Mr-16],Vr=hr+es[1]+mr+Qr[1],ar[Mr][0]=fr+es[0]+pr+Qr[0]+(Vr/4294967296>>>0)>>>0,ar[Mr][1]=Vr>>>0;for(Ar=cr[0][0],_r=cr[0][1],Cr=cr[1][0],kr=cr[1][1],Rr=cr[2][0],Ir=cr[2][1],Nr=cr[3][0],Pr=cr[3][1],Tr=cr[4][0],Br=cr[4][1],Fr=cr[5][0],jr=cr[5][1],Ur=cr[6][0],qr=cr[6][1],Hr=cr[7][0],Or=cr[7][1],Mr=0;Mr<80;++Mr)xr=((Tr>>>14|Br<<18)^(Tr>>>18|Br<<14)^(Br>>>9|Tr<<23))>>>0,wr=((Tr<<18|Br>>>14)^(Tr<<14|Br>>>18)^(Br<<23|Tr>>>9))>>>0,br=(Ur^Tr&(Fr^Ur))>>>0,Sr=(qr^Br&(jr^qr))>>>0,gr=((Ar>>>28|_r<<4)^(_r>>>2|Ar<<30)^(_r>>>7|Ar<<25))>>>0,yr=((Ar<<4|_r>>>28)^(_r<<30|Ar>>>2)^(_r<<25|Ar>>>7))>>>0,vr=(Ar&Cr|Rr&(Ar^Cr))>>>0,Er=(_r&kr|Ir&(_r^kr))>>>0,Vr=Or+wr+Sr+_k[Mr][1]+ar[Mr][1],fr=Hr+xr+br+_k[Mr][0]+ar[Mr][0]+(Vr/4294967296>>>0)>>>0,hr=Vr>>>0,Vr=yr+Er,pr=gr+vr+(Vr/4294967296>>>0)>>>0,mr=Vr>>>0,Hr=Ur,Or=qr,Ur=Fr,qr=jr,Fr=Tr,jr=Br,Vr=Pr+hr,Tr=Nr+fr+(Vr/4294967296>>>0)>>>0,Br=Vr>>>0,Nr=Rr,Pr=Ir,Rr=Cr,Ir=kr,Cr=Ar,kr=_r,Vr=hr+mr,Ar=fr+pr+(Vr/4294967296>>>0)>>>0,_r=Vr>>>0;Vr=cr[0][1]+_r,cr[0][0]=cr[0][0]+Ar+(Vr/4294967296>>>0)>>>0,cr[0][1]=Vr>>>0,Vr=cr[1][1]+kr,cr[1][0]=cr[1][0]+Cr+(Vr/4294967296>>>0)>>>0,cr[1][1]=Vr>>>0,Vr=cr[2][1]+Ir,cr[2][0]=cr[2][0]+Rr+(Vr/4294967296>>>0)>>>0,cr[2][1]=Vr>>>0,Vr=cr[3][1]+Pr,cr[3][0]=cr[3][0]+Nr+(Vr/4294967296>>>0)>>>0,cr[3][1]=Vr>>>0,Vr=cr[4][1]+Br,cr[4][0]=cr[4][0]+Tr+(Vr/4294967296>>>0)>>>0,cr[4][1]=Vr>>>0,Vr=cr[5][1]+jr,cr[5][0]=cr[5][0]+Fr+(Vr/4294967296>>>0)>>>0,cr[5][1]=Vr>>>0,Vr=cr[6][1]+qr,cr[6][0]=cr[6][0]+Ur+(Vr/4294967296>>>0)>>>0,cr[6][1]=Vr>>>0,Vr=cr[7][1]+Or,cr[7][0]=cr[7][0]+Hr+(Vr/4294967296>>>0)>>>0,cr[7][1]=Vr>>>0,zr-=128}}function randomBytes(cr){if(isNaN(cr)||cr<=0)throw new CodeError$3("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return randomBytes$2(cr)}function convert(cr,ar){return ar.map(dr=>base64urlToBigInteger(cr[dr]))}function jwk2priv(cr){return forge$n.pki.setRsaPrivateKey(...convert(cr,["n","e","d","p","q","dp","dq","qi"]))}function jwk2pub(cr){return forge$n.pki.setRsaPublicKey(...convert(cr,["n","e"]))}function pkcs1ToJwk(cr){const ar=forge$n.asn1.fromDer(toString$1(cr,"ascii")),dr=forge$n.pki.privateKeyFromAsn1(ar);return{kty:"RSA",n:bigIntegerToUintBase64url(dr.n),e:bigIntegerToUintBase64url(dr.e),d:bigIntegerToUintBase64url(dr.d),p:bigIntegerToUintBase64url(dr.p),q:bigIntegerToUintBase64url(dr.q),dp:bigIntegerToUintBase64url(dr.dP),dq:bigIntegerToUintBase64url(dr.dQ),qi:bigIntegerToUintBase64url(dr.qInv),alg:"RS256"}}function jwkToPkcs1(cr){if(cr.n==null||cr.e==null||cr.d==null||cr.p==null||cr.q==null||cr.dp==null||cr.dq==null||cr.qi==null)throw new CodeError$3("JWK was missing components","ERR_INVALID_PARAMETERS");const ar=forge$n.pki.privateKeyToAsn1({n:base64urlToBigInteger(cr.n),e:base64urlToBigInteger(cr.e),d:base64urlToBigInteger(cr.d),p:base64urlToBigInteger(cr.p),q:base64urlToBigInteger(cr.q),dP:base64urlToBigInteger(cr.dp),dQ:base64urlToBigInteger(cr.dq),qInv:base64urlToBigInteger(cr.qi)});return fromString(forge$n.asn1.toDer(ar).getBytes(),"ascii")}function pkixToJwk(cr){const ar=forge$n.asn1.fromDer(toString$1(cr,"ascii")),dr=forge$n.pki.publicKeyFromAsn1(ar);return{kty:"RSA",n:bigIntegerToUintBase64url(dr.n),e:bigIntegerToUintBase64url(dr.e)}}function jwkToPkix(cr){if(cr.n==null||cr.e==null)throw new CodeError$3("JWK was missing components","ERR_INVALID_PARAMETERS");const ar=forge$n.pki.publicKeyToAsn1({n:base64urlToBigInteger(cr.n),e:base64urlToBigInteger(cr.e)});return fromString(forge$n.asn1.toDer(ar).getBytes(),"ascii")}async function generateKey$1(cr){const ar=await webcrypto.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:cr,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),dr=await exportKey(ar);return{privateKey:dr[0],publicKey:dr[1]}}async function unmarshalPrivateKey$1(cr){const dr=[await webcrypto.get().subtle.importKey("jwk",cr,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await derivePublicFromPrivate(cr)],fr=await exportKey({privateKey:dr[0],publicKey:dr[1]});return{privateKey:fr[0],publicKey:fr[1]}}async function hashAndSign$1(cr,ar){const dr=await webcrypto.get().subtle.importKey("jwk",cr,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),fr=await webcrypto.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},dr,ar instanceof Uint8Array?ar:ar.subarray());return new Uint8Array(fr,0,fr.byteLength)}async function hashAndVerify$1(cr,ar,dr){const fr=await webcrypto.get().subtle.importKey("jwk",cr,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return webcrypto.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},fr,ar,dr instanceof Uint8Array?dr:dr.subarray())}async function exportKey(cr){if(cr.privateKey==null||cr.publicKey==null)throw new CodeError$3("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([webcrypto.get().subtle.exportKey("jwk",cr.privateKey),webcrypto.get().subtle.exportKey("jwk",cr.publicKey)])}async function derivePublicFromPrivate(cr){return webcrypto.get().subtle.importKey("jwk",{kty:cr.kty,n:cr.n,e:cr.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function convertKey(cr,ar,dr,fr){const hr=ar?jwk2pub(cr):jwk2priv(cr),pr=toString$1(dr instanceof Uint8Array?dr:dr.subarray(),"ascii"),mr=fr(pr,hr);return fromString(mr,"ascii")}function encrypt(cr,ar){return convertKey(cr,!0,ar,(dr,fr)=>fr.encrypt(dr))}function decrypt(cr,ar){return convertKey(cr,!1,ar,(dr,fr)=>fr.decrypt(dr))}function keySize(cr){if(cr.kty!=="RSA")throw new CodeError$3("invalid key type","ERR_INVALID_KEY_TYPE");if(cr.n==null)throw new CodeError$3("invalid key modulus","ERR_INVALID_KEY_MODULUS");return fromString(cr.n,"base64url").length*8}const MAX_KEY_SIZE=8192;class RsaPublicKey{_key;constructor(ar){this._key=ar}verify(ar,dr){return hashAndVerify$1(this._key,dr,ar)}marshal(){return jwkToPkix(this._key)}get bytes(){return PublicKey.encode({Type:KeyType.RSA,Data:this.marshal()}).subarray()}encrypt(ar){return encrypt(this._key,ar)}equals(ar){return equals(this.bytes,ar.bytes)}hash(){const ar=sha256$1.digest(this.bytes);return isPromise$2(ar)?ar.then(({bytes:dr})=>dr):ar.bytes}}class RsaPrivateKey{_key;_publicKey;constructor(ar,dr){this._key=ar,this._publicKey=dr}genSecret(){return randomBytes(16)}sign(ar){return hashAndSign$1(this._key,ar)}get public(){if(this._publicKey==null)throw new CodeError$3("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new RsaPublicKey(this._publicKey)}decrypt(ar){return decrypt(this._key,ar)}marshal(){return jwkToPkcs1(this._key)}get bytes(){return PrivateKey.encode({Type:KeyType.RSA,Data:this.marshal()}).subarray()}equals(ar){return equals(this.bytes,ar.bytes)}hash(){const ar=sha256$1.digest(this.bytes);return isPromise$2(ar)?ar.then(({bytes:dr})=>dr):ar.bytes}async id(){const ar=await this.public.hash();return toString$1(ar,"base58btc")}async export(ar,dr="pkcs-8"){if(dr==="pkcs-8"){const fr=new forge$n.util.ByteBuffer(this.marshal()),hr=forge$n.asn1.fromDer(fr),pr=forge$n.pki.privateKeyFromAsn1(hr),mr={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return forge$n.pki.encryptRsaPrivateKey(pr,ar,mr)}else{if(dr==="libp2p-key")return exporter(this.bytes,ar);throw new CodeError$3(`export format '${dr}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}}async function unmarshalRsaPrivateKey(cr){const ar=pkcs1ToJwk(cr);if(keySize(ar)>MAX_KEY_SIZE)throw new CodeError$3("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const dr=await unmarshalPrivateKey$1(ar);return new RsaPrivateKey(dr.privateKey,dr.publicKey)}function unmarshalRsaPublicKey(cr){const ar=pkixToJwk(cr);if(keySize(ar)>MAX_KEY_SIZE)throw new CodeError$3("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new RsaPublicKey(ar)}async function fromJwk(cr){if(keySize(cr)>MAX_KEY_SIZE)throw new CodeError$3("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const ar=await unmarshalPrivateKey$1(cr);return new RsaPrivateKey(ar.privateKey,ar.publicKey)}async function generateKeyPair$1(cr){if(cr>MAX_KEY_SIZE)throw new CodeError$3("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const ar=await generateKey$1(cr);return new RsaPrivateKey(ar.privateKey,ar.publicKey)}const RSA=Object.freeze(Object.defineProperty({__proto__:null,MAX_KEY_SIZE,RsaPrivateKey,RsaPublicKey,fromJwk,generateKeyPair:generateKeyPair$1,unmarshalRsaPrivateKey,unmarshalRsaPublicKey},Symbol.toStringTag,{value:"Module"}));function generateKey(){return secp256k1.utils.randomPrivateKey()}function hashAndSign(cr,ar){const dr=sha256$1.digest(ar instanceof Uint8Array?ar:ar.subarray());if(isPromise$2(dr))return dr.then(({digest:fr})=>secp256k1.sign(fr,cr).toDERRawBytes()).catch(fr=>{throw new CodeError$3(String(fr),"ERR_INVALID_INPUT")});try{return secp256k1.sign(dr.digest,cr).toDERRawBytes()}catch(fr){throw new CodeError$3(String(fr),"ERR_INVALID_INPUT")}}function hashAndVerify(cr,ar,dr){const fr=sha256$1.digest(dr instanceof Uint8Array?dr:dr.subarray());if(isPromise$2(fr))return fr.then(({digest:hr})=>secp256k1.verify(ar,hr,cr)).catch(hr=>{throw new CodeError$3(String(hr),"ERR_INVALID_INPUT")});try{return secp256k1.verify(ar,fr.digest,cr)}catch(hr){throw new CodeError$3(String(hr),"ERR_INVALID_INPUT")}}function compressPublicKey(cr){return secp256k1.ProjectivePoint.fromHex(cr).toRawBytes(!0)}function validatePrivateKey(cr){try{secp256k1.getPublicKey(cr,!0)}catch(ar){throw new CodeError$3(String(ar),"ERR_INVALID_PRIVATE_KEY")}}function validatePublicKey(cr){try{secp256k1.ProjectivePoint.fromHex(cr)}catch(ar){throw new CodeError$3(String(ar),"ERR_INVALID_PUBLIC_KEY")}}function computePublicKey(cr){try{return secp256k1.getPublicKey(cr,!0)}catch(ar){throw new CodeError$3(String(ar),"ERR_INVALID_PRIVATE_KEY")}}class Secp256k1PublicKey{_key;constructor(ar){validatePublicKey(ar),this._key=ar}verify(ar,dr){return hashAndVerify(this._key,dr,ar)}marshal(){return compressPublicKey(this._key)}get bytes(){return PublicKey.encode({Type:KeyType.Secp256k1,Data:this.marshal()}).subarray()}equals(ar){return equals(this.bytes,ar.bytes)}async hash(){const ar=sha256$1.digest(this.bytes);let dr;return isPromise$2(ar)?{bytes:dr}=await ar:dr=ar.bytes,dr}}class Secp256k1PrivateKey{_key;_publicKey;constructor(ar,dr){this._key=ar,this._publicKey=dr??computePublicKey(ar),validatePrivateKey(this._key),validatePublicKey(this._publicKey)}sign(ar){return hashAndSign(this._key,ar)}get public(){return new Secp256k1PublicKey(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey.encode({Type:KeyType.Secp256k1,Data:this.marshal()}).subarray()}equals(ar){return equals(this.bytes,ar.bytes)}hash(){const ar=sha256$1.digest(this.bytes);return isPromise$2(ar)?ar.then(({bytes:dr})=>dr):ar.bytes}async id(){const ar=await this.public.hash();return toString$1(ar,"base58btc")}async export(ar,dr="libp2p-key"){if(dr==="libp2p-key")return exporter(this.bytes,ar);throw new CodeError$3(`export format '${dr}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function unmarshalSecp256k1PrivateKey(cr){return new Secp256k1PrivateKey(cr)}function unmarshalSecp256k1PublicKey(cr){return new Secp256k1PublicKey(cr)}async function generateKeyPair(){const cr=generateKey();return new Secp256k1PrivateKey(cr)}const Secp256k1=Object.freeze(Object.defineProperty({__proto__:null,Secp256k1PrivateKey,Secp256k1PublicKey,generateKeyPair,unmarshalSecp256k1PrivateKey,unmarshalSecp256k1PublicKey},Symbol.toStringTag,{value:"Module"})),supportedKeys={rsa:RSA,ed25519:Ed25519,secp256k1:Secp256k1};function unsupportedKey(cr){const ar=Object.keys(supportedKeys).join(" / ");return new CodeError$3(`invalid or unsupported key type ${cr}. Must be ${ar}`,"ERR_UNSUPPORTED_KEY_TYPE")}function typeToKey(cr){if(cr=cr.toLowerCase(),cr==="rsa"||cr==="ed25519"||cr==="secp256k1")return supportedKeys[cr];throw unsupportedKey(cr)}function unmarshalPublicKey(cr){const ar=PublicKey.decode(cr),dr=ar.Data??new Uint8Array;switch(ar.Type){case KeyType.RSA:return supportedKeys.rsa.unmarshalRsaPublicKey(dr);case KeyType.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PublicKey(dr);case KeyType.Secp256k1:return supportedKeys.secp256k1.unmarshalSecp256k1PublicKey(dr);default:throw unsupportedKey(ar.Type??"unknown")}}function marshalPublicKey(cr,ar){return ar=(ar??"rsa").toLowerCase(),typeToKey(ar),cr.bytes}async function unmarshalPrivateKey(cr){const ar=PrivateKey.decode(cr),dr=ar.Data??new Uint8Array;switch(ar.Type){case KeyType.RSA:return supportedKeys.rsa.unmarshalRsaPrivateKey(dr);case KeyType.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PrivateKey(dr);case KeyType.Secp256k1:return supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey(dr);default:throw unsupportedKey(ar.Type??"RSA")}}var NoiseExtensions;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{if(hr.lengthDelimited!==!1&&fr.fork(),dr.webtransportCerthashes!=null)for(const pr of dr.webtransportCerthashes)fr.uint32(10),fr.bytes(pr);hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={webtransportCerthashes:[]},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:{hr.webtransportCerthashes.push(dr.bytes());break}default:{dr.skipType(mr&7);break}}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(NoiseExtensions||(NoiseExtensions={}));var NoiseHandshakePayload;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.identityKey!=null&&dr.identityKey.byteLength>0&&(fr.uint32(10),fr.bytes(dr.identityKey)),dr.identitySig!=null&&dr.identitySig.byteLength>0&&(fr.uint32(18),fr.bytes(dr.identitySig)),dr.extensions!=null&&(fr.uint32(34),NoiseExtensions.codec().encode(dr.extensions,fr)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={identityKey:alloc$2(0),identitySig:alloc$2(0)},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:{hr.identityKey=dr.bytes();break}case 2:{hr.identitySig=dr.bytes();break}case 4:{hr.extensions=NoiseExtensions.codec().decode(dr,dr.uint32());break}default:{dr.skipType(mr&7);break}}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(NoiseHandshakePayload||(NoiseHandshakePayload={}));async function getPayload(cr,ar,dr){const fr=await signPayload(cr,getHandshakePayload(ar));if(cr.publicKey==null)throw new Error("PublicKey was missing from local PeerId");return createHandshakePayload(cr.publicKey,fr,dr)}function createHandshakePayload(cr,ar,dr){return NoiseHandshakePayload.encode({identityKey:cr,identitySig:ar,extensions:dr??{webtransportCerthashes:[]}}).subarray()}async function signPayload(cr,ar){if(cr.privateKey==null)throw new Error("PrivateKey was missing from PeerId");return(await unmarshalPrivateKey(cr.privateKey)).sign(ar)}async function getPeerIdFromPayload(cr){return peerIdFromKeys(cr.identityKey)}function decodePayload(cr){return NoiseHandshakePayload.decode(cr)}function getHandshakePayload(cr){const ar=fromString$1("noise-libp2p-static-key:");return cr instanceof Uint8Array?concat$2([ar,cr],ar.length+cr.length):(cr.prepend(ar),cr)}async function verifySignedPayload(cr,ar,dr){const fr=await peerIdFromKeys(ar.identityKey);if(!fr.equals(dr))throw new Error(`Payload identity key ${fr.toString()} does not match expected remote peer ${dr.toString()}`);const hr=getHandshakePayload(cr);if(fr.publicKey==null)throw new Error("PublicKey was missing from PeerId");if(ar.identitySig==null)throw new Error("Signature was missing from message");if(!await unmarshalPublicKey(fr.publicKey).verify(hr,ar.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return fr}function isValidPublicKey(cr){return!(!(cr instanceof Uint8Array)&&!isUint8ArrayList(cr)||cr.byteLength!==32)}const MIN_NONCE=0,MAX_NONCE=4294967295,ERR_MAX_NONCE="Cipherstate has reached maximum n, a new handshake must be performed";class Nonce{n;bytes;view;constructor(ar=MIN_NONCE){this.n=ar,this.bytes=alloc$2(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,ar,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>MAX_NONCE)throw new Error(ERR_MAX_NONCE)}}class AbstractHandshake{crypto;log;constructor(ar,dr){this.log=ar.logger.forComponent("libp2p:noise:abstract-handshake"),this.crypto=dr}encryptWithAd(ar,dr,fr){const hr=this.encrypt(ar.k,ar.n,dr,fr);return ar.n.increment(),hr}decryptWithAd(ar,dr,fr,hr){const{plaintext:pr,valid:mr}=this.decrypt(ar.k,ar.n,dr,fr,hr);return mr&&ar.n.increment(),{plaintext:pr,valid:mr}}hasKey(ar){return!this.isEmptyKey(ar.k)}createEmptyKey(){return alloc$2(32)}isEmptyKey(ar){const dr=this.createEmptyKey();return equals$1(dr,ar)}encrypt(ar,dr,fr,hr){return dr.assertValue(),this.crypto.chaCha20Poly1305Encrypt(hr,dr.getBytes(),fr,ar)}encryptAndHash(ar,dr){let fr;return this.hasKey(ar.cs)?fr=this.encryptWithAd(ar.cs,ar.h,dr):fr=dr,this.mixHash(ar,fr),fr}decrypt(ar,dr,fr,hr,pr){dr.assertValue();const mr=this.crypto.chaCha20Poly1305Decrypt(hr,dr.getBytes(),fr,ar,pr);return mr?{plaintext:mr,valid:!0}:{plaintext:alloc$2(0),valid:!1}}decryptAndHash(ar,dr){let fr,hr=!0;return this.hasKey(ar.cs)?{plaintext:fr,valid:hr}=this.decryptWithAd(ar.cs,ar.h,dr):fr=dr,this.mixHash(ar,dr),{plaintext:fr,valid:hr}}dh(ar,dr){try{const fr=this.crypto.generateX25519SharedKey(ar,dr);return fr.length===32?fr:fr.subarray(0,32)}catch(fr){const hr=fr;return this.log.error("error deriving shared key",hr),alloc$2(32)}}mixHash(ar,dr){ar.h=this.getHash(ar.h,dr)}getHash(ar,dr){return this.crypto.hashSHA256(new Uint8ArrayList(ar,dr))}mixKey(ar,dr){const[fr,hr]=this.crypto.getHKDF(ar.ck,dr);ar.cs=this.initializeKey(hr),ar.ck=fr}initializeKey(ar){return{k:ar,n:new Nonce}}initializeSymmetric(ar){const dr=fromString$1(ar,"utf-8"),fr=this.hashProtocolName(dr),hr=fr,pr=this.createEmptyKey();return{cs:this.initializeKey(pr),ck:hr,h:fr}}hashProtocolName(ar){if(ar.length<=32){const dr=alloc$2(32);return dr.set(ar),dr}else return this.getHash(ar,alloc$2(0))}split(ar){const[dr,fr]=this.crypto.getHKDF(ar.ck,alloc$2(0)),hr=this.initializeKey(dr),pr=this.initializeKey(fr);return{cs1:hr,cs2:pr}}writeMessageRegular(ar,dr){const fr=this.encryptWithAd(ar,alloc$2(0),dr),hr=this.createEmptyKey(),pr=alloc$2(0);return{ne:hr,ns:pr,ciphertext:fr}}readMessageRegular(ar,dr){return this.decryptWithAd(ar,alloc$2(0),dr.ciphertext)}}class XX extends AbstractHandshake{initializeInitiator(ar,dr,fr,hr){const pr="Noise_XX_25519_ChaChaPoly_SHA256",mr=this.initializeSymmetric(pr);this.mixHash(mr,ar);const gr=alloc$2(32);return{ss:mr,s:dr,rs:fr,psk:hr,re:gr}}initializeResponder(ar,dr,fr,hr){const pr="Noise_XX_25519_ChaChaPoly_SHA256",mr=this.initializeSymmetric(pr);this.mixHash(mr,ar);const gr=alloc$2(32);return{ss:mr,s:dr,rs:fr,psk:hr,re:gr}}writeMessageA(ar,dr,fr){const hr=alloc$2(0);fr!==void 0?ar.e=fr:ar.e=this.crypto.generateX25519KeyPair();const pr=ar.e.publicKey;this.mixHash(ar.ss,pr);const mr=this.encryptAndHash(ar.ss,dr);return{ne:pr,ns:hr,ciphertext:mr}}writeMessageB(ar,dr){ar.e=this.crypto.generateX25519KeyPair();const fr=ar.e.publicKey;this.mixHash(ar.ss,fr),this.mixKey(ar.ss,this.dh(ar.e.privateKey,ar.re));const hr=ar.s.publicKey,pr=this.encryptAndHash(ar.ss,hr);this.mixKey(ar.ss,this.dh(ar.s.privateKey,ar.re));const mr=this.encryptAndHash(ar.ss,dr);return{ne:fr,ns:pr,ciphertext:mr}}writeMessageC(ar,dr){const fr=ar.s.publicKey,hr=this.encryptAndHash(ar.ss,fr);this.mixKey(ar.ss,this.dh(ar.s.privateKey,ar.re));const pr=this.encryptAndHash(ar.ss,dr),gr={ne:this.createEmptyKey(),ns:hr,ciphertext:pr},{cs1:yr,cs2:xr}=this.split(ar.ss);return{h:ar.ss.h,messageBuffer:gr,cs1:yr,cs2:xr}}readMessageA(ar,dr){return isValidPublicKey(dr.ne)&&(ar.re=dr.ne),this.mixHash(ar.ss,ar.re),this.decryptAndHash(ar.ss,dr.ciphertext)}readMessageB(ar,dr){if(isValidPublicKey(dr.ne)&&(ar.re=dr.ne),this.mixHash(ar.ss,ar.re),!ar.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(ar.ss,this.dh(ar.e.privateKey,ar.re));const{plaintext:fr,valid:hr}=this.decryptAndHash(ar.ss,dr.ns);hr&&isValidPublicKey(fr)&&(ar.rs=fr),this.mixKey(ar.ss,this.dh(ar.e.privateKey,ar.rs));const{plaintext:pr,valid:mr}=this.decryptAndHash(ar.ss,dr.ciphertext);return{plaintext:pr,valid:hr&&mr}}readMessageC(ar,dr){const{plaintext:fr,valid:hr}=this.decryptAndHash(ar.ss,dr.ns);if(hr&&isValidPublicKey(fr)&&(ar.rs=fr),!ar.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(ar.ss,this.dh(ar.e.privateKey,ar.rs));const{plaintext:pr,valid:mr}=this.decryptAndHash(ar.ss,dr.ciphertext),{cs1:gr,cs2:yr}=this.split(ar.ss);return{h:ar.ss.h,plaintext:pr,valid:hr&&mr,cs1:gr,cs2:yr}}initSession(ar,dr,fr){const hr=this.createEmptyKey(),pr=alloc$2(32);let mr;return ar?mr=this.initializeInitiator(dr,fr,pr,hr):mr=this.initializeResponder(dr,fr,pr,hr),{hs:mr,i:ar,mc:0}}sendMessage(ar,dr,fr){let hr;if(ar.mc===0)hr=this.writeMessageA(ar.hs,dr,fr);else if(ar.mc===1)hr=this.writeMessageB(ar.hs,dr);else if(ar.mc===2){const{h:pr,messageBuffer:mr,cs1:gr,cs2:yr}=this.writeMessageC(ar.hs,dr);hr=mr,ar.h=pr,ar.cs1=gr,ar.cs2=yr}else if(ar.mc>2)if(ar.i){if(!ar.cs1)throw new Error("CS1 (cipher state) is not defined");hr=this.writeMessageRegular(ar.cs1,dr)}else{if(!ar.cs2)throw new Error("CS2 (cipher state) is not defined");hr=this.writeMessageRegular(ar.cs2,dr)}else throw new Error("Session invalid.");return ar.mc++,hr}recvMessage(ar,dr){let fr=alloc$2(0),hr=!1;if(ar.mc===0)({plaintext:fr,valid:hr}=this.readMessageA(ar.hs,dr));else if(ar.mc===1)({plaintext:fr,valid:hr}=this.readMessageB(ar.hs,dr));else if(ar.mc===2){const{h:pr,plaintext:mr,valid:gr,cs1:yr,cs2:xr}=this.readMessageC(ar.hs,dr);fr=mr,hr=gr,ar.h=pr,ar.cs1=yr,ar.cs2=xr}return ar.mc++,{plaintext:fr,valid:hr}}}function logLocalStaticKeys(cr,ar){!ar.enabled||!DUMP_SESSION_KEYS||(ar(`LOCAL_STATIC_PUBLIC_KEY ${toString$2(cr.publicKey,"hex")}`),ar(`LOCAL_STATIC_PRIVATE_KEY ${toString$2(cr.privateKey,"hex")}`))}function logLocalEphemeralKeys(cr,ar){!ar.enabled||!DUMP_SESSION_KEYS||(cr?(ar(`LOCAL_PUBLIC_EPHEMERAL_KEY ${toString$2(cr.publicKey,"hex")}`),ar(`LOCAL_PRIVATE_EPHEMERAL_KEY ${toString$2(cr.privateKey,"hex")}`)):ar("Missing local ephemeral keys."))}function logRemoteStaticKey(cr,ar){!ar.enabled||!DUMP_SESSION_KEYS||ar(`REMOTE_STATIC_PUBLIC_KEY ${toString$2(cr.subarray(),"hex")}`)}function logRemoteEphemeralKey(cr,ar){!ar.enabled||!DUMP_SESSION_KEYS||ar(`REMOTE_EPHEMERAL_PUBLIC_KEY ${toString$2(cr.subarray(),"hex")}`)}function logCipherState(cr,ar){!ar.enabled||!DUMP_SESSION_KEYS||(cr.cs1&&cr.cs2?(ar(`CIPHER_STATE_1 ${cr.cs1.n.getUint64()} ${toString$2(cr.cs1.k,"hex")}`),ar(`CIPHER_STATE_2 ${cr.cs2.n.getUint64()} ${toString$2(cr.cs2.k,"hex")}`)):ar("Missing cipher state."))}class XXHandshake{isInitiator;session;remotePeer;remoteExtensions={webtransportCerthashes:[]};payload;connection;xx;staticKeypair;prologue;log;constructor(ar,dr,fr,hr,pr,mr,gr,yr,xr){this.log=ar.logger.forComponent("libp2p:noise:xxhandshake"),this.isInitiator=dr,this.payload=fr,this.prologue=hr,this.staticKeypair=mr,this.connection=gr,yr&&(this.remotePeer=yr),this.xx=xr??new XX(ar,pr),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair)}async propose(){if(logLocalStaticKeys(this.session.hs.s,this.log),this.isInitiator){this.log.trace("Stage 0 - Initiator starting to send first message.");const ar=this.xx.sendMessage(this.session,alloc$2(0));await this.connection.write(encode0(ar)),this.log.trace("Stage 0 - Initiator finished sending first message."),logLocalEphemeralKeys(this.session.hs.e,this.log)}else{this.log.trace("Stage 0 - Responder waiting to receive first message...");const ar=decode0((await this.connection.read()).subarray()),{valid:dr}=this.xx.recvMessage(this.session,ar);if(!dr)throw new InvalidCryptoExchangeError("xx handshake stage 0 validation fail");this.log.trace("Stage 0 - Responder received first message."),logRemoteEphemeralKey(this.session.hs.re,this.log)}}async exchange(){if(this.isInitiator){this.log.trace("Stage 1 - Initiator waiting to receive first message from responder...");const ar=decode1((await this.connection.read()).subarray()),{plaintext:dr,valid:fr}=this.xx.recvMessage(this.session,ar);if(!fr)throw new InvalidCryptoExchangeError("xx handshake stage 1 validation fail");this.log.trace("Stage 1 - Initiator received the message."),logRemoteEphemeralKey(this.session.hs.re,this.log),logRemoteStaticKey(this.session.hs.rs,this.log),this.log.trace("Initiator going to check remote's signature...");try{const hr=decodePayload(dr);this.remotePeer=this.remotePeer||await getPeerIdFromPayload(hr),await verifySignedPayload(this.session.hs.rs,hr,this.remotePeer),this.setRemoteNoiseExtension(hr.extensions)}catch(hr){const pr=hr;throw new UnexpectedPeerError(`Error occurred while verifying signed payload: ${pr.message}`)}this.log.trace("All good with the signature!")}else{this.log.trace("Stage 1 - Responder sending out first message with signed payload and static key.");const ar=this.xx.sendMessage(this.session,this.payload);await this.connection.write(encode1(ar)),this.log.trace("Stage 1 - Responder sent the second handshake message with signed payload."),logLocalEphemeralKeys(this.session.hs.e,this.log)}}async finish(){if(this.isInitiator){this.log.trace("Stage 2 - Initiator sending third handshake message.");const ar=this.xx.sendMessage(this.session,this.payload);await this.connection.write(encode2(ar)),this.log.trace("Stage 2 - Initiator sent message with signed payload.")}else{this.log.trace("Stage 2 - Responder waiting for third handshake message...");const ar=decode2((await this.connection.read()).subarray()),{plaintext:dr,valid:fr}=this.xx.recvMessage(this.session,ar);if(!fr)throw new InvalidCryptoExchangeError("xx handshake stage 2 validation fail");this.log.trace("Stage 2 - Responder received the message, finished handshake.");try{const hr=decodePayload(dr);this.remotePeer=this.remotePeer||await getPeerIdFromPayload(hr),await verifySignedPayload(this.session.hs.rs,hr,this.remotePeer),this.setRemoteNoiseExtension(hr.extensions)}catch(hr){const pr=hr;throw new UnexpectedPeerError(`Error occurred while verifying signed payload: ${pr.message}`)}}logCipherState(this.session,this.log)}encrypt(ar,dr){const fr=this.getCS(dr);return this.xx.encryptWithAd(fr,alloc$2(0),ar)}decrypt(ar,dr,fr){const hr=this.getCS(dr,!1);return this.xx.decryptWithAd(hr,alloc$2(0),ar,fr)}getRemoteStaticKey(){return this.session.hs.rs}getCS(ar,dr=!0){if(!ar.cs1||!ar.cs2)throw new InvalidCryptoExchangeError("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?dr?ar.cs1:ar.cs2:dr?ar.cs2:ar.cs1}setRemoteNoiseExtension(ar){ar&&(this.remoteExtensions=ar)}}function registerMetrics(cr){return{xxHandshakeSuccesses:cr.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:cr.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:cr.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:cr.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:cr.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}class Noise{protocol="/noise";crypto;prologue;staticKeys;extensions;metrics;components;constructor(ar,dr={}){const{staticNoiseKey:fr,extensions:hr,crypto:pr,prologueBytes:mr}=dr,{metrics:gr}=ar;this.components=ar,this.crypto=pr??defaultCrypto,this.extensions=hr,this.metrics=gr?registerMetrics(gr):void 0,fr?this.staticKeys=this.crypto.generateX25519KeyPairFromSeed(fr):this.staticKeys=this.crypto.generateX25519KeyPair(),this.prologue=mr??alloc$2(0)}async secureOutbound(ar,dr,fr){const hr=lpStream(dr,{lengthEncoder:uint16BEEncode,lengthDecoder:uint16BEDecode,maxDataLength:NOISE_MSG_MAX_LENGTH_BYTES}),pr=await this.performHandshake({connection:hr,isInitiator:!0,localPeer:ar,remotePeer:fr}),mr=await this.createSecureConnection(hr,pr);return dr.source=mr.source,dr.sink=mr.sink,{conn:dr,remoteExtensions:pr.remoteExtensions,remotePeer:pr.remotePeer}}async secureInbound(ar,dr,fr){const hr=lpStream(dr,{lengthEncoder:uint16BEEncode,lengthDecoder:uint16BEDecode,maxDataLength:NOISE_MSG_MAX_LENGTH_BYTES}),pr=await this.performHandshake({connection:hr,isInitiator:!1,localPeer:ar,remotePeer:fr}),mr=await this.createSecureConnection(hr,pr);return dr.source=mr.source,dr.sink=mr.sink,{conn:dr,remotePeer:pr.remotePeer,remoteExtensions:pr.remoteExtensions}}async performHandshake(ar){const dr=await getPayload(ar.localPeer,this.staticKeys.publicKey,this.extensions);return this.performXXHandshake(ar,dr)}async performXXHandshake(ar,dr){const{isInitiator:fr,remotePeer:hr,connection:pr}=ar,mr=new XXHandshake(this.components,fr,dr,this.prologue,this.crypto,this.staticKeys,pr,hr);try{await mr.propose(),await mr.exchange(),await mr.finish(),this.metrics?.xxHandshakeSuccesses.increment()}catch(gr){if(this.metrics?.xxHandshakeErrors.increment(),gr instanceof Error)throw gr.message=`Error occurred during XX handshake: ${gr.message}`,gr}return mr}async createSecureConnection(ar,dr){const[fr,hr]=duplexPair(),pr=ar.unwrap();return await pipe(fr,encryptStream(dr,this.metrics),pr,mr=>decode(mr,{lengthDecoder:uint16BEDecode}),decryptStream(dr,this.metrics),fr),hr}}function noise(cr={}){return ar=>new Noise(ar,cr)}function getIterator(cr){if(cr!=null){if(typeof cr[Symbol.iterator]=="function")return cr[Symbol.iterator]();if(typeof cr[Symbol.asyncIterator]=="function")return cr[Symbol.asyncIterator]();if(typeof cr.next=="function")return cr}throw new Error("argument is not an iterator or iterable")}function isPromise$1(cr){return cr==null?!1:typeof cr.then=="function"&&typeof cr.catch=="function"&&typeof cr.finally=="function"}function closeSource(cr,ar){const dr=getIterator(cr).return?.();isPromise$1(dr)&&dr.catch(fr=>{ar.error("could not cause iterator to return",fr)})}var MessageTypes;(function(cr){cr[cr.NEW_STREAM=0]="NEW_STREAM",cr[cr.MESSAGE_RECEIVER=1]="MESSAGE_RECEIVER",cr[cr.MESSAGE_INITIATOR=2]="MESSAGE_INITIATOR",cr[cr.CLOSE_RECEIVER=3]="CLOSE_RECEIVER",cr[cr.CLOSE_INITIATOR=4]="CLOSE_INITIATOR",cr[cr.RESET_RECEIVER=5]="RESET_RECEIVER",cr[cr.RESET_INITIATOR=6]="RESET_INITIATOR"})(MessageTypes||(MessageTypes={}));const MessageTypeNames=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),InitiatorMessageTypes=Object.freeze({NEW_STREAM:MessageTypes.NEW_STREAM,MESSAGE:MessageTypes.MESSAGE_INITIATOR,CLOSE:MessageTypes.CLOSE_INITIATOR,RESET:MessageTypes.RESET_INITIATOR}),ReceiverMessageTypes=Object.freeze({MESSAGE:MessageTypes.MESSAGE_RECEIVER,CLOSE:MessageTypes.CLOSE_RECEIVER,RESET:MessageTypes.RESET_RECEIVER}),MAX_MSG_SIZE=1<<20,MAX_MSG_QUEUE_SIZE=4<<20;class Decoder{_buffer;_headerInfo;_maxMessageSize;_maxUnprocessedMessageQueueSize;constructor(ar=MAX_MSG_SIZE,dr=MAX_MSG_QUEUE_SIZE){this._buffer=new Uint8ArrayList,this._headerInfo=null,this._maxMessageSize=ar,this._maxUnprocessedMessageQueueSize=dr}write(ar){if(ar==null||ar.length===0)return[];if(this._buffer.append(ar),this._buffer.byteLength>this._maxUnprocessedMessageQueueSize)throw Object.assign(new Error("unprocessed message queue size too large!"),{code:"ERR_MSG_QUEUE_TOO_BIG"});const dr=[];for(;this._buffer.length!==0;){if(this._headerInfo==null)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(xr){if(xr.code==="ERR_MSG_TOO_BIG")throw xr;break}const{id:fr,type:hr,length:pr,offset:mr}=this._headerInfo;if(this._buffer.length-mr<pr)break;const yr={id:fr,type:hr};(hr===MessageTypes.NEW_STREAM||hr===MessageTypes.MESSAGE_INITIATOR||hr===MessageTypes.MESSAGE_RECEIVER)&&(yr.data=this._buffer.sublist(mr,mr+pr)),dr.push(yr),this._buffer.consume(mr+pr),this._headerInfo=null}return dr}_decodeHeader(ar){const{value:dr,offset:fr}=readVarInt(ar),{value:hr,offset:pr}=readVarInt(ar,fr),mr=dr&7;if(MessageTypeNames[mr]==null)throw new Error(`Invalid type received: ${mr}`);if(hr>this._maxMessageSize)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"});return{id:dr>>3,type:mr,offset:fr+pr,length:hr}}}const MSB=128,REST=127;function readVarInt(cr,ar=0){let dr=0,fr=0,hr=ar,pr;const mr=cr.length;do{if(hr>=mr||fr>49)throw ar=0,new RangeError("Could not decode varint");pr=cr.get(hr++),dr+=fr<28?(pr&REST)<<fr:(pr&REST)*Math.pow(2,fr),fr+=7}while(pr>=MSB);return ar=hr-ar,{value:dr,offset:ar}}const POOL_SIZE=10*1024;class Encoder{_pool;_poolOffset;constructor(){this._pool=allocUnsafe$1(POOL_SIZE),this._poolOffset=0}write(ar,dr){const fr=this._pool;let hr=this._poolOffset;encode$2(ar.id<<3|ar.type,fr,hr),hr+=encodingLength(ar.id<<3|ar.type),(ar.type===MessageTypes.NEW_STREAM||ar.type===MessageTypes.MESSAGE_INITIATOR||ar.type===MessageTypes.MESSAGE_RECEIVER)&&ar.data!=null?(encode$2(ar.data.length,fr,hr),hr+=encodingLength(ar.data.length)):(encode$2(0,fr,hr),hr+=encodingLength(0));const pr=fr.subarray(this._poolOffset,hr);POOL_SIZE-hr<100?(this._pool=allocUnsafe$1(POOL_SIZE),this._poolOffset=0):this._poolOffset=hr,dr.append(pr),(ar.type===MessageTypes.NEW_STREAM||ar.type===MessageTypes.MESSAGE_INITIATOR||ar.type===MessageTypes.MESSAGE_RECEIVER)&&ar.data!=null&&dr.append(ar.data)}}const encoder=new Encoder;async function*encode(cr){for await(const ar of cr){const dr=new Uint8ArrayList;encoder.write(ar,dr),yield dr}}const ERR_STREAM_RESET="ERR_STREAM_RESET",ERR_SINK_INVALID_STATE="ERR_SINK_INVALID_STATE",DEFAULT_SEND_CLOSE_WRITE_TIMEOUT=5e3;function isPromise(cr){return cr==null?!1:typeof cr.then=="function"&&typeof cr.catch=="function"&&typeof cr.finally=="function"}class AbstractStream{id;direction;timeline;protocol;metadata;source;status;readStatus;writeStatus;log;sinkController;sinkEnd;closed;endErr;streamSource;onEnd;onCloseRead;onCloseWrite;onReset;onAbort;sendCloseWriteTimeout;constructor(ar){this.sinkController=new AbortController,this.sinkEnd=pDefer(),this.closed=pDefer(),this.log=ar.log,this.status="open",this.readStatus="ready",this.writeStatus="ready",this.id=ar.id,this.metadata=ar.metadata??{},this.direction=ar.direction,this.timeline={open:Date.now()},this.sendCloseWriteTimeout=ar.sendCloseWriteTimeout??DEFAULT_SEND_CLOSE_WRITE_TIMEOUT,this.onEnd=ar.onEnd,this.onCloseRead=ar?.onCloseRead,this.onCloseWrite=ar?.onCloseWrite,this.onReset=ar?.onReset,this.onAbort=ar?.onAbort,this.source=this.streamSource=pushable$1({onEnd:dr=>{dr!=null?this.log.trace("source ended with error",dr):this.log.trace("source ended"),this.onSourceEnd(dr)}}),this.sink=this.sink.bind(this)}async sink(ar){if(this.writeStatus!=="ready")throw new CodeError$3(`writable end state is "${this.writeStatus}" not "ready"`,ERR_SINK_INVALID_STATE);try{this.writeStatus="writing";const dr={signal:this.sinkController.signal};if(this.direction==="outbound"){const hr=this.sendNewStream(dr);isPromise(hr)&&await hr}const fr=()=>{closeSource(ar,this.log)};try{this.sinkController.signal.addEventListener("abort",fr),this.log.trace("sink reading from source");for await(let hr of ar){hr=hr instanceof Uint8Array?new Uint8ArrayList(hr):hr;const pr=this.sendData(hr,dr);isPromise(pr)&&await pr}}finally{this.sinkController.signal.removeEventListener("abort",fr)}this.log.trace('sink finished reading from source, write status is "%s"',this.writeStatus),this.writeStatus==="writing"&&(this.writeStatus="closing",this.log.trace("send close write to remote"),await this.sendCloseWrite({signal:AbortSignal.timeout(this.sendCloseWriteTimeout)}),this.writeStatus="closed"),this.onSinkEnd()}catch(dr){throw this.log.trace("sink ended with error, calling abort with error",dr),this.abort(dr),dr}finally{this.log.trace("resolve sink end"),this.sinkEnd.resolve()}}onSourceEnd(ar){this.timeline.closeRead==null&&(this.timeline.closeRead=Date.now(),this.readStatus="closed",ar!=null&&this.endErr==null&&(this.endErr=ar),this.onCloseRead?.(),this.timeline.closeWrite!=null?(this.log.trace("source and sink ended"),this.timeline.close=Date.now(),this.status!=="aborted"&&this.status!=="reset"&&(this.status="closed"),this.onEnd!=null&&this.onEnd(this.endErr),this.closed.resolve()):this.log.trace("source ended, waiting for sink to end"))}onSinkEnd(ar){this.timeline.closeWrite==null&&(this.timeline.closeWrite=Date.now(),this.writeStatus="closed",ar!=null&&this.endErr==null&&(this.endErr=ar),this.onCloseWrite?.(),this.timeline.closeRead!=null?(this.log.trace("sink and source ended"),this.timeline.close=Date.now(),this.status!=="aborted"&&this.status!=="reset"&&(this.status="closed"),this.onEnd!=null&&this.onEnd(this.endErr),this.closed.resolve()):this.log.trace("sink ended, waiting for source to end"))}async close(ar){this.log.trace("closing gracefully"),this.status="closing",await Promise.all([this.closeRead(ar),this.closeWrite(ar)]),await raceSignal(this.closed.promise,ar?.signal),this.status="closed",this.log.trace("closed gracefully")}async closeRead(ar={}){if(this.readStatus==="closing"||this.readStatus==="closed")return;this.log.trace('closing readable end of stream with starting read status "%s"',this.readStatus);const dr=this.readStatus;this.readStatus="closing",this.status!=="reset"&&this.status!=="aborted"&&this.timeline.closeRead==null&&(this.log.trace("send close read to remote"),await this.sendCloseRead(ar)),dr==="ready"&&(this.log.trace("ending internal source queue with %d queued bytes",this.streamSource.readableLength),this.streamSource.end()),this.log.trace("closed readable end of stream")}async closeWrite(ar={}){this.writeStatus==="closing"||this.writeStatus==="closed"||(this.log.trace('closing writable end of stream with starting write status "%s"',this.writeStatus),this.writeStatus==="ready"&&(this.log.trace("sink was never sunk, sink an empty array"),await raceSignal(this.sink([]),ar.signal)),this.writeStatus==="writing"&&await new Promise((dr,fr)=>{queueMicrotask(()=>{this.log.trace("aborting source passed to .sink"),this.sinkController.abort(),raceSignal(this.sinkEnd.promise,ar.signal).then(dr,fr)})}),this.writeStatus="closed",this.log.trace("closed writable end of stream"))}abort(ar){if(this.status==="closed"||this.status==="aborted"||this.status==="reset")return;this.log("abort with error",ar),this.log("try to send reset to remote");const dr=this.sendReset();isPromise(dr)&&dr.catch(fr=>{this.log.error("error sending reset message",fr)}),this.status="aborted",this.timeline.abort=Date.now(),this._closeSinkAndSource(ar),this.onAbort?.(ar)}reset(){if(this.status==="closed"||this.status==="aborted"||this.status==="reset")return;const ar=new CodeError$3("stream reset",ERR_STREAM_RESET);this.status="reset",this.timeline.reset=Date.now(),this._closeSinkAndSource(ar),this.onReset?.()}_closeSinkAndSource(ar){this._closeSink(ar),this._closeSource(ar)}_closeSink(ar){this.writeStatus==="writing"&&(this.log.trace("end sink source"),this.sinkController.abort()),this.onSinkEnd(ar)}_closeSource(ar){this.readStatus!=="closing"&&this.readStatus!=="closed"&&(this.log.trace("ending source with %d bytes to be read by consumer",this.streamSource.readableLength),this.readStatus="closing",this.streamSource.end(ar))}remoteCloseWrite(){if(this.readStatus==="closing"||this.readStatus==="closed"){this.log("received remote close write but local source is already closed");return}this.log.trace("remote close write"),this._closeSource()}remoteCloseRead(){if(this.writeStatus==="closing"||this.writeStatus==="closed"){this.log("received remote close read but local sink is already closed");return}this.log.trace("remote close read"),this._closeSink()}destroy(){if(this.status==="closed"||this.status==="aborted"||this.status==="reset"){this.log("received destroy but we are already closed");return}this.log.trace("stream destroyed"),this._closeSinkAndSource()}sourcePush(ar){this.streamSource.push(ar)}sourceReadableLength(){return this.streamSource.readableLength}}class MplexStream extends AbstractStream{name;streamId;send;types;maxDataSize;constructor(ar){super(ar),this.types=ar.direction==="outbound"?InitiatorMessageTypes:ReceiverMessageTypes,this.send=ar.send,this.name=ar.name,this.streamId=ar.streamId,this.maxDataSize=ar.maxDataSize}async sendNewStream(){await this.send({id:this.streamId,type:InitiatorMessageTypes.NEW_STREAM,data:new Uint8ArrayList(fromString$1(this.name))})}async sendData(ar){for(ar=ar.sublist();ar.byteLength>0;){const dr=Math.min(ar.byteLength,this.maxDataSize);await this.send({id:this.streamId,type:this.types.MESSAGE,data:ar.sublist(0,dr)}),ar.consume(dr)}}async sendReset(){await this.send({id:this.streamId,type:this.types.RESET})}async sendCloseWrite(){await this.send({id:this.streamId,type:this.types.CLOSE})}async sendCloseRead(){}}function createStream$1(cr){const{id:ar,name:dr,send:fr,onEnd:hr,type:pr="initiator",maxMsgSize:mr=MAX_MSG_SIZE}=cr;return new MplexStream({id:pr==="initiator"?`i${ar}`:`r${ar}`,streamId:ar,name:`${dr??ar}`,direction:pr==="initiator"?"outbound":"inbound",maxDataSize:mr,onEnd:hr,send:fr,log:cr.logger.forComponent(`libp2p:mplex:stream:${pr}:${ar}`)})}const MAX_STREAMS_INBOUND_STREAMS_PER_CONNECTION=1024,MAX_STREAMS_OUTBOUND_STREAMS_PER_CONNECTION=1024,MAX_STREAM_BUFFER_SIZE=1024*1024*4,DISCONNECT_THRESHOLD=5,CLOSE_TIMEOUT=500;function printMessage(cr){const ar={...cr,type:`${MessageTypeNames[cr.type]} (${cr.type})`};return cr.type===MessageTypes.NEW_STREAM&&(ar.data=toString$2(cr.data instanceof Uint8Array?cr.data:cr.data.subarray())),(cr.type===MessageTypes.MESSAGE_INITIATOR||cr.type===MessageTypes.MESSAGE_RECEIVER)&&(ar.data=toString$2(cr.data instanceof Uint8Array?cr.data:cr.data.subarray(),"base16")),ar}class MplexStreamMuxer{protocol="/mplex/6.7.0";sink;source;log;_streamId;_streams;_init;_source;closeController;rateLimiter;closeTimeout;logger;constructor(ar,dr){dr=dr??{},this.log=ar.logger.forComponent("libp2p:mplex"),this.logger=ar.logger,this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._init=dr,this.closeTimeout=dr.closeTimeout??CLOSE_TIMEOUT,this.sink=this._createSink(),this._source=pushable$1({objectMode:!0,onEnd:()=>{for(const fr of this._streams.initiators.values())fr.destroy();for(const fr of this._streams.receivers.values())fr.destroy()}}),this.source=pipe(this._source,fr=>encode(fr)),this.closeController=new AbortController,this.rateLimiter=new RateLimiter({points:dr.disconnectThreshold??DISCONNECT_THRESHOLD,duration:1})}get streams(){const ar=[];for(const dr of this._streams.initiators.values())ar.push(dr);for(const dr of this._streams.receivers.values())ar.push(dr);return ar}newStream(ar){if(this.closeController.signal.aborted)throw new Error("Muxer already closed");const dr=this._streamId++;ar=ar==null?dr.toString():ar.toString();const fr=this._streams.initiators;return this._newStream({id:dr,name:ar,type:"initiator",registry:fr})}async close(ar){if(this.closeController.signal.aborted)return;const dr=ar?.signal??AbortSignal.timeout(this.closeTimeout);try{await Promise.all(this.streams.map(async fr=>fr.close({signal:dr}))),this._source.end(),await this._source.onEmpty({signal:dr}),this.closeController.abort()}catch(fr){this.abort(fr)}}abort(ar){this.closeController.signal.aborted||(this.streams.forEach(dr=>{dr.abort(ar)}),this.closeController.abort(ar))}_newReceiverStream(ar){const{id:dr,name:fr}=ar,hr=this._streams.receivers;return this._newStream({id:dr,name:fr,type:"receiver",registry:hr})}_newStream(ar){const{id:dr,name:fr,type:hr,registry:pr}=ar;if(this.log("new %s stream %s",hr,dr),hr==="initiator"&&this._streams.initiators.size===(this._init.maxOutboundStreams??MAX_STREAMS_OUTBOUND_STREAMS_PER_CONNECTION))throw new CodeError$3("Too many outbound streams open","ERR_TOO_MANY_OUTBOUND_STREAMS");if(pr.has(dr))throw new Error(`${hr} stream ${dr} already exists!`);const yr=createStream$1({id:dr,name:fr,send:async xr=>{this.log.enabled&&this.log.trace("%s stream %s send",hr,dr,printMessage(xr)),this._source.push(xr)},type:hr,onEnd:()=>{this.log("%s stream with id %s and protocol %s ended",hr,dr,yr.protocol),pr.delete(dr),this._init.onStreamEnd!=null&&this._init.onStreamEnd(yr)},maxMsgSize:this._init.maxMsgSize,logger:this.logger});return pr.set(dr,yr),yr}_createSink(){return async dr=>{const fr=()=>{closeSource(dr,this.log)};this.closeController.signal.addEventListener("abort",fr);try{const hr=new Decoder(this._init.maxMsgSize,this._init.maxUnprocessedMessageQueueSize);for await(const pr of dr)for(const mr of hr.write(pr))await this._handleIncoming(mr);this._source.end()}catch(hr){this.log("error in sink",hr),this._source.end(hr)}finally{this.closeController.signal.removeEventListener("abort",fr)}}}async _handleIncoming(ar){const{id:dr,type:fr}=ar;if(this.log.enabled&&this.log.trace("incoming message",printMessage(ar)),ar.type===MessageTypes.NEW_STREAM){if(this._streams.receivers.size===(this._init.maxInboundStreams??MAX_STREAMS_INBOUND_STREAMS_PER_CONNECTION)){this.log("too many inbound streams open"),this._source.push({id:dr,type:MessageTypes.RESET_RECEIVER});try{await this.rateLimiter.consume("new-stream",1)}catch{this.log("rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection"),this.abort(new Error("Too many open streams"));return}return}const gr=this._newReceiverStream({id:dr,name:toString$2(ar.data instanceof Uint8Array?ar.data:ar.data.subarray())});this._init.onIncomingStream!=null&&this._init.onIncomingStream(gr);return}const pr=((fr&1)===1?this._streams.initiators:this._streams.receivers).get(dr);if(pr==null){this.log("missing stream %s for message type %s",dr,MessageTypeNames[fr]);try{await this.rateLimiter.consume("missing-stream",1)}catch{this.log("rate limit hit when receiving messages for streams that do not exist - closing remote connection"),this.abort(new Error("Too many messages for missing streams"));return}return}const mr=this._init.maxStreamBufferSize??MAX_STREAM_BUFFER_SIZE;try{switch(fr){case MessageTypes.MESSAGE_INITIATOR:case MessageTypes.MESSAGE_RECEIVER:if(pr.sourceReadableLength()>mr)throw this._source.push({id:ar.id,type:fr===MessageTypes.MESSAGE_INITIATOR?MessageTypes.RESET_RECEIVER:MessageTypes.RESET_INITIATOR}),new CodeError$3("Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers","ERR_STREAM_INPUT_BUFFER_FULL");pr.sourcePush(ar.data);break;case MessageTypes.CLOSE_INITIATOR:case MessageTypes.CLOSE_RECEIVER:pr.remoteCloseWrite();break;case MessageTypes.RESET_INITIATOR:case MessageTypes.RESET_RECEIVER:pr.reset();break;default:this.log("unknown message type %s",fr)}}catch(gr){this.log.error("error while processing message",gr),pr.abort(gr)}}}class Mplex{protocol="/mplex/6.7.0";_init;components;constructor(ar,dr={}){this.components=ar,this._init=dr}createStreamMuxer(ar={}){return new MplexStreamMuxer(this.components,{...ar,...this._init})}}function mplex(cr={}){return ar=>new Mplex(ar,cr)}var codes;(function(cr){cr.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",cr.ERR_DATA_CHANNEL="ERR_DATA_CHANNEL",cr.ERR_CONNECTION_CLOSED="ERR_CONNECTION_CLOSED",cr.ERR_HASH_NOT_SUPPORTED="ERR_HASH_NOT_SUPPORTED",cr.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",cr.ERR_INVALID_FINGERPRINT="ERR_INVALID_FINGERPRINT",cr.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",cr.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",cr.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",cr.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS"})(codes||(codes={}));const browser=detect(),isFirefox=browser!=null&&browser.name==="firefox",nopSource=async function*cr(){},nopSink=async cr=>{},DATA_CHANNEL_DRAIN_TIMEOUT=30*1e3;function drainAndClose(cr,ar,dr=DATA_CHANNEL_DRAIN_TIMEOUT,fr){cr.readyState==="open"&&Promise.resolve().then(async()=>{if(cr.bufferedAmount>0){fr.log("%s drain channel with %d buffered bytes",ar,cr.bufferedAmount);const hr=pDefer();let pr=!1;cr.bufferedAmountLowThreshold=0;const mr=()=>{pr||(fr.log("%s drain channel closed before drain",ar),hr.resolve())};cr.addEventListener("close",mr,{once:!0}),cr.addEventListener("bufferedamountlow",()=>{pr=!0,cr.removeEventListener("close",mr),hr.resolve()}),await pTimeout(hr.promise,{milliseconds:dr})}}).then(async()=>{cr.readyState==="open"&&cr.close()}).catch(hr=>{fr.log.error("error closing outbound stream",hr)})}class WebRTCMultiaddrConnection{log;peerConnection;remoteAddr;timeline;metrics;source=nopSource();sink=nopSink;constructor(ar,dr){this.log=ar.logger.forComponent("libp2p:webrtc:maconn"),this.remoteAddr=dr.remoteAddr,this.timeline=dr.timeline,this.peerConnection=dr.peerConnection;const fr=this.peerConnection.connectionState;this.peerConnection.onconnectionstatechange=()=>{this.log.trace("peer connection state change",this.peerConnection.connectionState,"initial state",fr),(this.peerConnection.connectionState==="disconnected"||this.peerConnection.connectionState==="failed"||this.peerConnection.connectionState==="closed")&&(this.timeline.close=Date.now())}}async close(ar){this.log.trace("closing connection"),this.peerConnection.close(),this.timeline.close=Date.now(),this.metrics?.increment({close:!0})}abort(ar){this.log.error("closing connection due to error",ar),this.peerConnection.close(),this.timeline.close=Date.now(),this.metrics?.increment({abort:!0})}}const normalizeEmitter=cr=>{const ar=cr.on||cr.addListener||cr.addEventListener,dr=cr.off||cr.removeListener||cr.removeEventListener;if(!ar||!dr)throw new TypeError("Emitter is not compatible");return{addListener:ar.bind(cr),removeListener:dr.bind(cr)}};function pEventMultiple(cr,ar,dr){let fr;const hr=new Promise((pr,mr)=>{if(dr={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...dr},!(dr.count>=0&&(dr.count===Number.POSITIVE_INFINITY||Number.isInteger(dr.count))))throw new TypeError("The `count` option should be at least 0 or more");dr.signal?.throwIfAborted();const gr=[ar].flat(),yr=[],{addListener:xr,removeListener:wr}=normalizeEmitter(cr),br=(...vr)=>{const Er=dr.multiArgs?vr:vr[0];dr.filter&&!dr.filter(Er)||(yr.push(Er),dr.count===yr.length&&(fr(),pr(yr)))},Sr=vr=>{fr(),mr(vr)};fr=()=>{for(const vr of gr)wr(vr,br);for(const vr of dr.rejectionEvents)wr(vr,Sr)};for(const vr of gr)xr(vr,br);for(const vr of dr.rejectionEvents)xr(vr,Sr);dr.signal&&dr.signal.addEventListener("abort",()=>{Sr(dr.signal.reason)},{once:!0}),dr.resolveImmediately&&pr(yr)});if(hr.cancel=fr,typeof dr.timeout=="number"){const pr=pTimeout(hr,{milliseconds:dr.timeout});return pr.cancel=fr,pr}return hr}function pEvent(cr,ar,dr){typeof dr=="function"&&(dr={filter:dr}),dr={...dr,count:1,resolveImmediately:!1};const fr=pEventMultiple(cr,ar,dr),hr=fr.then(pr=>pr[0]);return hr.cancel=fr.cancel,hr}var Message$1;(function(cr){(function(fr){fr.FIN="FIN",fr.STOP_SENDING="STOP_SENDING",fr.RESET="RESET",fr.FIN_ACK="FIN_ACK"})(cr.Flag||(cr.Flag={}));let ar;(function(fr){fr[fr.FIN=0]="FIN",fr[fr.STOP_SENDING=1]="STOP_SENDING",fr[fr.RESET=2]="RESET",fr[fr.FIN_ACK=3]="FIN_ACK"})(ar||(ar={})),function(fr){fr.codec=()=>enumeration(ar)}(cr.Flag||(cr.Flag={}));let dr;cr.codec=()=>(dr==null&&(dr=message((fr,hr,pr={})=>{pr.lengthDelimited!==!1&&hr.fork(),fr.flag!=null&&(hr.uint32(8),cr.Flag.codec().encode(fr.flag,hr)),fr.message!=null&&(hr.uint32(18),hr.bytes(fr.message)),pr.lengthDelimited!==!1&&hr.ldelim()},(fr,hr)=>{const pr={},mr=hr==null?fr.len:fr.pos+hr;for(;fr.pos<mr;){const gr=fr.uint32();switch(gr>>>3){case 1:pr.flag=cr.Flag.codec().decode(fr);break;case 2:pr.message=fr.bytes();break;default:fr.skipType(gr&7);break}}return pr})),dr),cr.encode=fr=>encodeMessage(fr,cr.codec()),cr.decode=fr=>decodeMessage$1(fr,cr.codec())})(Message$1||(Message$1={}));const MAX_BUFFERED_AMOUNT=16*1024*1024,BUFFERED_AMOUNT_LOW_TIMEOUT=30*1e3,PROTOBUF_OVERHEAD=5,VARINT_LENGTH=2,MAX_MESSAGE_SIZE=16*1024,FIN_ACK_TIMEOUT=5e3,OPEN_TIMEOUT=5e3;class WebRTCStream extends AbstractStream{channel;incomingData;maxBufferedAmount;bufferedAmountLowEventTimeout;maxMessageSize;receiveFinAck;finAckTimeout;openTimeout;constructor(ar){const dr=ar.onEnd;switch(ar.onEnd=hr=>{this.log.trace("readable and writeable ends closed",this.status),Promise.resolve(async()=>{if(!(this.timeline.abort!=null||this.timeline.reset!==null))try{await pTimeout(this.receiveFinAck.promise,{milliseconds:this.finAckTimeout})}catch(pr){this.log.error("error receiving FIN_ACK",pr)}}).then(()=>{this.incomingData.end(),dr?.(hr)}).catch(pr=>{this.log.error("error ending stream",pr)})},super(ar),this.channel=ar.channel,this.channel.binaryType="arraybuffer",this.incomingData=pushable$1(),this.bufferedAmountLowEventTimeout=ar.bufferedAmountLowEventTimeout??BUFFERED_AMOUNT_LOW_TIMEOUT,this.maxBufferedAmount=ar.maxBufferedAmount??MAX_BUFFERED_AMOUNT,this.maxMessageSize=(ar.maxMessageSize??MAX_MESSAGE_SIZE)-PROTOBUF_OVERHEAD-VARINT_LENGTH,this.receiveFinAck=pDefer(),this.finAckTimeout=ar.closeTimeout??FIN_ACK_TIMEOUT,this.openTimeout=ar.openTimeout??OPEN_TIMEOUT,this.channel.readyState){case"open":this.timeline.open=new Date().getTime();break;case"closed":case"closing":(this.timeline.close===void 0||this.timeline.close===0)&&(this.timeline.close=Date.now());break;case"connecting":break;default:throw this.log.error("unknown datachannel state %s",this.channel.readyState),new CodeError$3("Unknown datachannel state","ERR_INVALID_STATE")}this.channel.onopen=hr=>{this.timeline.open=new Date().getTime()},this.channel.onclose=hr=>{this.receiveFinAck.resolve(),this.close().catch(pr=>{this.log.error("error closing stream after channel closed",pr)})},this.channel.onerror=hr=>{const pr=hr.error;this.abort(pr)},this.channel.onmessage=async hr=>{const{data:pr}=hr;pr===null||pr.byteLength===0||this.incomingData.push(new Uint8Array(pr,0,pr.byteLength))};const fr=this;Promise.resolve().then(async()=>{for await(const hr of decode(this.incomingData)){const pr=fr.processIncomingProtobuf(hr);pr!=null&&fr.sourcePush(new Uint8ArrayList(pr))}}).catch(hr=>{this.log.error("error processing incoming data channel messages",hr)})}sendNewStream(){}async _sendMessage(ar,dr=!0){if(dr&&this.channel.bufferedAmount>this.maxBufferedAmount)try{this.log('channel buffer is %d, wait for "bufferedamountlow" event',this.channel.bufferedAmount),await pEvent(this.channel,"bufferedamountlow",{timeout:this.bufferedAmountLowEventTimeout})}catch(fr){throw fr instanceof TimeoutError?new CodeError$3(`Timed out waiting for DataChannel buffer to clear after ${this.bufferedAmountLowEventTimeout}ms`,"ERR_BUFFER_CLEAR_TIMEOUT"):fr}if(this.channel.readyState==="closed"||this.channel.readyState==="closing")throw new CodeError$3(`Invalid datachannel state - ${this.channel.readyState}`,"ERR_INVALID_STATE");this.channel.readyState!=="open"&&(this.log('channel state is "%s" and not "open", waiting for "open" event before sending data',this.channel.readyState),await pEvent(this.channel,"open",{timeout:this.openTimeout}),this.log('channel state is now "%s", sending data',this.channel.readyState)),this.channel.send(ar.subarray())}async sendData(ar){for(ar=ar.sublist();ar.byteLength>0;){const dr=Math.min(ar.byteLength,this.maxMessageSize),fr=ar.subarray(0,dr),hr=Message$1.encode({message:fr}),pr=encode$1.single(hr);await this._sendMessage(pr),ar.consume(dr)}}async sendReset(){await this._sendFlag(Message$1.Flag.RESET)}async sendCloseWrite(ar){if(await this._sendFlag(Message$1.Flag.FIN)){this.log.trace("awaiting FIN_ACK");try{await raceSignal(this.receiveFinAck.promise,ar?.signal,{errorMessage:"sending close-write was aborted before FIN_ACK was received",errorCode:"ERR_FIN_ACK_NOT_RECEIVED"})}catch(fr){this.log.error("failed to await FIN_ACK",fr)}}else this.log.trace("sending FIN failed, not awaiting FIN_ACK");this.receiveFinAck.resolve()}async sendCloseRead(){await this._sendFlag(Message$1.Flag.STOP_SENDING)}processIncomingProtobuf(ar){const dr=Message$1.decode(ar);if(dr.flag!==void 0&&(this.log.trace('incoming flag %s, write status "%s", read status "%s"',dr.flag,this.writeStatus,this.readStatus),dr.flag===Message$1.Flag.FIN&&(this.remoteCloseWrite(),this.log.trace("sending FIN_ACK"),this._sendFlag(Message$1.Flag.FIN_ACK).catch(fr=>{this.log.error("error sending FIN_ACK immediately",fr)})),dr.flag===Message$1.Flag.RESET&&this.reset(),dr.flag===Message$1.Flag.STOP_SENDING&&this.remoteCloseRead(),dr.flag===Message$1.Flag.FIN_ACK&&(this.log.trace("received FIN_ACK"),this.receiveFinAck.resolve())),this.readStatus==="ready")return dr.message}async _sendFlag(ar){if(this.channel.readyState!=="open")return this.log.trace('not sending flag %s because channel is "%s" and not "open"',this.channel.readyState,ar.toString()),!1;this.log.trace("sending flag %s",ar.toString());const dr=Message$1.encode({flag:ar}),fr=encode$1.single(dr);try{return await this._sendMessage(fr,!1),!0}catch(hr){this.log.error("could not send flag %s",ar.toString(),hr)}return!1}}function createStream(cr){const{channel:ar,direction:dr}=cr;return new WebRTCStream({id:dr==="inbound"?`i${ar.id}`:`r${ar.id}`,log:cr.logger.forComponent(`libp2p:webrtc:stream:${dr}:${ar.id}`),...cr})}const PROTOCOL="/webrtc";class DataChannelMuxerFactory{protocol;peerConnection;bufferedStreams=[];metrics;dataChannelOptions;components;log;constructor(ar,dr){this.components=ar,this.peerConnection=dr.peerConnection,this.metrics=dr.metrics,this.protocol=dr.protocol??PROTOCOL,this.dataChannelOptions=dr.dataChannelOptions??{},this.log=ar.logger.forComponent("libp2p:webrtc:datachannelmuxerfactory"),this.peerConnection.ondatachannel=({channel:fr})=>{if(this.log.trace('incoming early datachannel with channel id %d and label "%s"',fr.id),fr.label==="init"){this.log.trace("closing early init channel"),fr.close();return}const hr={},pr=createStream({channel:fr,direction:"inbound",onEnd:mr=>{hr.onEnd(mr)},logger:ar.logger,...this.dataChannelOptions});hr.stream=pr,hr.channel=fr,hr.onEnd=()=>{this.bufferedStreams=this.bufferedStreams.filter(mr=>mr.stream.id!==pr.id)},this.bufferedStreams.push(hr)}}createStreamMuxer(ar){return new DataChannelMuxer(this.components,{...ar,peerConnection:this.peerConnection,dataChannelOptions:this.dataChannelOptions,metrics:this.metrics,streams:this.bufferedStreams,protocol:this.protocol})}}class DataChannelMuxer{init;streams;protocol;log;peerConnection;dataChannelOptions;metrics;logger;constructor(ar,dr){this.init=dr,this.log=ar.logger.forComponent("libp2p:webrtc:muxer"),this.logger=ar.logger,this.streams=dr.streams.map(fr=>fr.stream),this.peerConnection=dr.peerConnection,this.protocol=dr.protocol??PROTOCOL,this.metrics=dr.metrics,this.dataChannelOptions=dr.dataChannelOptions??{},this.peerConnection.ondatachannel=({channel:fr})=>{if(this.log.trace("incoming datachannel with channel id %d",fr.id),fr.label==="init"){this.log.trace("closing init channel"),fr.close();return}const hr=createStream({channel:fr,direction:"inbound",onEnd:()=>{this.log("incoming channel %s ended with state %s",fr.id,fr.readyState),this.#e(hr,fr)},logger:this.logger,...this.dataChannelOptions});this.streams.push(hr),this.metrics?.increment({incoming_stream:!0}),dr?.onIncomingStream?.(hr)},this.init.streams.length>0&&queueMicrotask(()=>{this.init.streams.forEach(fr=>{fr.onEnd=()=>{this.log("incoming early channel %s ended with state %s",fr.channel.id,fr.channel.readyState),this.#e(fr.stream,fr.channel)},this.metrics?.increment({incoming_stream:!0}),this.init?.onIncomingStream?.(fr.stream)})})}#e(ar,dr){this.log.trace("stream %s %s %s onEnd",ar.direction,ar.id,ar.protocol),drainAndClose(dr,`${ar.direction} ${ar.id} ${ar.protocol}`,this.dataChannelOptions.drainTimeout,{log:this.log}),this.streams=this.streams.filter(fr=>fr.id!==ar.id),this.metrics?.increment({stream_end:!0}),this.init?.onStreamEnd?.(ar)}async close(ar){try{await Promise.all(this.streams.map(async dr=>dr.close(ar)))}catch(dr){this.abort(dr)}}abort(ar){for(const dr of this.streams)dr.abort(ar)}source=nopSource();sink=nopSink;newStream(){const ar=this.peerConnection.createDataChannel("");this.log.trace("opened outgoing datachannel with channel id %s",ar.id);const dr=createStream({channel:ar,direction:"outbound",onEnd:()=>{this.log("outgoing channel %s ended with state %s",ar.id,ar.readyState),this.#e(dr,ar)},logger:this.logger,...this.dataChannelOptions});return this.streams.push(dr),this.metrics?.increment({outgoing_stream:!0}),dr}}const RTCPeerConnection=globalThis.RTCPeerConnection,RTCSessionDescription=globalThis.RTCSessionDescription,RTCIceCandidate=globalThis.RTCIceCandidate;var Message;(function(cr){(function(fr){fr.SDP_OFFER="SDP_OFFER",fr.SDP_ANSWER="SDP_ANSWER",fr.ICE_CANDIDATE="ICE_CANDIDATE"})(cr.Type||(cr.Type={}));let ar;(function(fr){fr[fr.SDP_OFFER=0]="SDP_OFFER",fr[fr.SDP_ANSWER=1]="SDP_ANSWER",fr[fr.ICE_CANDIDATE=2]="ICE_CANDIDATE"})(ar||(ar={})),function(fr){fr.codec=()=>enumeration(ar)}(cr.Type||(cr.Type={}));let dr;cr.codec=()=>(dr==null&&(dr=message((fr,hr,pr={})=>{pr.lengthDelimited!==!1&&hr.fork(),fr.type!=null&&(hr.uint32(8),cr.Type.codec().encode(fr.type,hr)),fr.data!=null&&(hr.uint32(18),hr.string(fr.data)),pr.lengthDelimited!==!1&&hr.ldelim()},(fr,hr)=>{const pr={},mr=hr==null?fr.len:fr.pos+hr;for(;fr.pos<mr;){const gr=fr.uint32();switch(gr>>>3){case 1:pr.type=cr.Type.codec().decode(fr);break;case 2:pr.data=fr.string();break;default:fr.skipType(gr&7);break}}return pr})),dr),cr.encode=fr=>encodeMessage(fr,cr.codec()),cr.decode=fr=>decodeMessage$1(fr,cr.codec())})(Message||(Message={}));const readCandidatesUntilConnected=async(cr,ar,dr)=>{try{const fr=pDefer();for(resolveOnConnected(cr,fr);;){const hr=await Promise.race([fr.promise,ar.read({signal:dr.signal})]);if(hr==null)break;if(hr.type!==Message.Type.ICE_CANDIDATE)throw new CodeError$3("ICE candidate message expected","ERR_NOT_ICE_CANDIDATE");const pr=JSON.parse(hr.data??"null");if(pr===""||pr===null){dr.log.trace("end-of-candidates received");continue}const mr=new RTCIceCandidate(pr);dr.log.trace("%s received new ICE candidate",dr.direction,mr);try{await cr.addIceCandidate(mr)}catch(gr){dr.log.error("%s bad candidate received",dr.direction,pr,gr)}}}catch(fr){if(dr.log.error("%s error parsing ICE candidate",dr.direction,fr),dr.signal?.aborted===!0)throw fr}};function getConnectionState(cr){return isFirefox?cr.iceConnectionState:cr.connectionState}function resolveOnConnected(cr,ar){cr[isFirefox?"oniceconnectionstatechange":"onconnectionstatechange"]=dr=>{switch(getConnectionState(cr)){case"connected":ar.resolve();break;case"failed":case"disconnected":case"closed":ar.reject(new CodeError$3("RTCPeerConnection was closed","ERR_CONNECTION_CLOSED_BEFORE_CONNECTED"));break}}}async function initiateConnection({peerConnection:cr,signal:ar,metrics:dr,multiaddr:fr,connectionManager:hr,transportManager:pr,log:mr}){const{baseAddr:gr}=splitAddr(fr);dr?.dialerEvents.increment({open:!0}),mr.trace("dialing base address: %a",gr);const yr=gr.getPeerId();if(yr==null)throw new CodeError$3("Relay peer was missing","ERR_INVALID_ADDRESS");const xr=hr.getConnections(peerIdFromString(yr));let wr,br=!1;xr.length===0?(wr=await pr.dial(gr,{signal:ar}),br=!0):wr=xr[0];try{const Sr=await wr.newStream(SIGNALING_PROTO_ID,{signal:ar,runOnTransientConnection:!0}),vr=pbStream(Sr).pb(Message);try{const Er=cr.createDataChannel("init");cr.onicecandidate=({candidate:kr})=>{const Rr=JSON.stringify(kr?.toJSON()??null);mr.trace("initiator sending ICE candidate %s",Rr),vr.write({type:Message.Type.ICE_CANDIDATE,data:Rr},{signal:ar}).catch(Ir=>{mr.error("error sending ICE candidate",Ir)})},cr.onicecandidateerror=kr=>{mr.error("initiator ICE candidate error",kr)};const Ar=await cr.createOffer().catch(kr=>{throw mr.error("could not execute createOffer",kr),new CodeError$3("Failed to set createOffer","ERR_SDP_HANDSHAKE_FAILED")});mr.trace("initiator send SDP offer %s",Ar.sdp),await vr.write({type:Message.Type.SDP_OFFER,data:Ar.sdp},{signal:ar}),await cr.setLocalDescription(Ar).catch(kr=>{throw mr.error("could not execute setLocalDescription",kr),new CodeError$3("Failed to set localDescription","ERR_SDP_HANDSHAKE_FAILED")});const _r=await vr.read({signal:ar});if(_r.type!==Message.Type.SDP_ANSWER)throw new CodeError$3("Remote should send an SDP answer","ERR_SDP_HANDSHAKE_FAILED");mr.trace("initiator receive SDP answer %s",_r.data);const Cr=new RTCSessionDescription({type:"answer",sdp:_r.data});return await cr.setRemoteDescription(Cr).catch(kr=>{throw mr.error("could not execute setRemoteDescription",kr),new CodeError$3("Failed to set remoteDescription","ERR_SDP_HANDSHAKE_FAILED")}),mr.trace("initiator read candidates until connected"),await readCandidatesUntilConnected(cr,vr,{direction:"initiator",signal:ar,log:mr}),mr.trace("initiator connected, closing init channel"),Er.close(),mr.trace("initiator closing signalling stream"),await vr.unwrap().unwrap().close({signal:ar}),mr.trace("initiator connected to remote address %s",fr),{remoteAddress:fr}}catch(Er){throw cr.close(),Sr.abort(Er),Er}finally{cr.onicecandidate=null,cr.onicecandidateerror=null}}finally{if(br)try{await wr.close({signal:ar})}catch(Sr){wr.abort(Sr)}}}class WebRTCPeerListener extends TypedEventEmitter{peerId;transportManager;shutdownController;constructor(ar,dr){super(),this.peerId=ar.peerId,this.transportManager=ar.transportManager,this.shutdownController=dr.shutdownController}async listen(){this.safeDispatchEvent("listening",{})}getAddrs(){return this.transportManager.getListeners().filter(ar=>ar!==this).map(ar=>ar.getAddrs().filter(dr=>Circuit.matches(dr)).map(dr=>dr.encapsulate(`/webrtc/p2p/${this.peerId}`))).flat()}async close(){this.shutdownController.abort(),this.safeDispatchEvent("close",{})}}async function handleIncomingStream({peerConnection:cr,stream:ar,signal:dr,connection:fr,log:hr}){hr.trace("new inbound signaling stream");const pr=pbStream(ar).pb(Message);try{cr.onicecandidate=({candidate:wr})=>{const br=JSON.stringify(wr?.toJSON()??null);hr.trace("recipient sending ICE candidate %s",br),pr.write({type:Message.Type.ICE_CANDIDATE,data:br},{signal:dr}).catch(Sr=>{hr.error("error sending ICE candidate",Sr)})};const gr=await pr.read({signal:dr});if(gr.type!==Message.Type.SDP_OFFER)throw new CodeError$3(`expected message type SDP_OFFER, received: ${gr.type??"undefined"} `,"ERR_SDP_HANDSHAKE_FAILED");hr.trace("recipient receive SDP offer %s",gr.data);const yr=new RTCSessionDescription({type:"offer",sdp:gr.data});await cr.setRemoteDescription(yr).catch(wr=>{throw hr.error("could not execute setRemoteDescription",wr),new CodeError$3("Failed to set remoteDescription","ERR_SDP_HANDSHAKE_FAILED")});const xr=await cr.createAnswer().catch(wr=>{throw hr.error("could not execute createAnswer",wr),new CodeError$3("Failed to create answer","ERR_SDP_HANDSHAKE_FAILED")});hr.trace("recipient send SDP answer %s",xr.sdp),await pr.write({type:Message.Type.SDP_ANSWER,data:xr.sdp},{signal:dr}),await cr.setLocalDescription(xr).catch(wr=>{throw hr.error("could not execute setLocalDescription",wr),new CodeError$3("Failed to set localDescription","ERR_SDP_HANDSHAKE_FAILED")}),hr.trace("recipient read candidates until connected"),await readCandidatesUntilConnected(cr,pr,{direction:"recipient",signal:dr,log:hr})}catch(gr){if(cr.connectionState!=="connected")throw hr.error("error while handling signaling stream from peer %a",fr.remoteAddr,gr),cr.close(),gr;hr("error while handling signaling stream from peer %a, ignoring as the RTCPeerConnection is already connected",fr.remoteAddr,gr)}const mr=multiaddr(`/webrtc/p2p/${fr.remoteAddr.getPeerId()}`);return hr.trace("recipient connected to remote address %s",mr),{remoteAddress:mr}}const WEBRTC_TRANSPORT="/webrtc",CIRCUIT_RELAY_TRANSPORT="/p2p-circuit",SIGNALING_PROTO_ID="/webrtc-signaling/0.0.1",INBOUND_CONNECTION_TIMEOUT=30*1e3;class WebRTCTransport{components;init;log;_started=!1;metrics;shutdownController;constructor(ar,dr={}){this.components=ar,this.init=dr,this.log=ar.logger.forComponent("libp2p:webrtc"),this.shutdownController=new AbortController,setMaxListeners(1/0,this.shutdownController.signal),ar.metrics!=null&&(this.metrics={dialerEvents:ar.metrics.registerCounterGroup("libp2p_webrtc_dialer_events_total",{label:"event",help:"Total count of WebRTC dialer events by type"}),listenerEvents:ar.metrics.registerCounterGroup("libp2p_webrtc_listener_events_total",{label:"event",help:"Total count of WebRTC listener events by type"})})}isStarted(){return this._started}async start(){await this.components.registrar.handle(SIGNALING_PROTO_ID,ar=>{this._onProtocol(ar).catch(dr=>{this.log.error("failed to handle incoming connect from %p",ar.connection.remotePeer,dr)})},{runOnTransientConnection:!0}),this._started=!0}async stop(){await this.components.registrar.unhandle(SIGNALING_PROTO_ID),this._started=!1}createListener(ar){return new WebRTCPeerListener(this.components,{shutdownController:this.shutdownController})}[Symbol.toStringTag]="@libp2p/webrtc";[transportSymbol]=!0;filter(ar){return ar.filter(WebRTC.exactMatch)}async dial(ar,dr){this.log.trace("dialing address: %a",ar);const fr=new RTCPeerConnection(this.init.rtcConfiguration),hr=new DataChannelMuxerFactory(this.components,{peerConnection:fr,dataChannelOptions:this.init.dataChannel}),{remoteAddress:pr}=await initiateConnection({peerConnection:fr,multiaddr:ar,dataChannelOptions:this.init.dataChannel,signal:dr.signal,connectionManager:this.components.connectionManager,transportManager:this.components.transportManager,log:this.log}),mr=new WebRTCMultiaddrConnection(this.components,{peerConnection:fr,timeline:{open:Date.now()},remoteAddr:pr,metrics:this.metrics?.dialerEvents}),gr=await dr.upgrader.upgradeOutbound(mr,{skipProtection:!0,skipEncryption:!0,muxerFactory:hr});return this._closeOnShutdown(fr,mr),gr}async _onProtocol({connection:ar,stream:dr}){const fr=AbortSignal.timeout(this.init.inboundConnectionTimeout??INBOUND_CONNECTION_TIMEOUT),hr=new RTCPeerConnection(this.init.rtcConfiguration),pr=new DataChannelMuxerFactory(this.components,{peerConnection:hr,dataChannelOptions:this.init.dataChannel});try{const{remoteAddress:mr}=await handleIncomingStream({peerConnection:hr,connection:ar,stream:dr,signal:fr,log:this.log}),gr=new WebRTCMultiaddrConnection(this.components,{peerConnection:hr,timeline:{open:new Date().getTime()},remoteAddr:mr,metrics:this.metrics?.listenerEvents});this._closeOnShutdown(hr,gr),await this.components.upgrader.upgradeInbound(gr,{skipEncryption:!0,skipProtection:!0,muxerFactory:pr}),await dr.close({signal:fr})}catch(mr){throw dr.abort(mr),mr}}_closeOnShutdown(ar,dr){const fr=()=>{dr.close().catch(hr=>{this.log.error("could not close WebRTCMultiaddrConnection",hr)})};this.shutdownController.signal.addEventListener("abort",fr),ar.addEventListener("close",()=>{this.shutdownController.signal.removeEventListener("abort",fr)})}}function splitAddr(cr){const ar=cr.toString().split(WEBRTC_TRANSPORT+"/");if(ar.length!==2)throw new CodeError$3("webrtc protocol was not present in multiaddr",codes.ERR_INVALID_MULTIADDR);if(!ar[0].includes(CIRCUIT_RELAY_TRANSPORT))throw new CodeError$3("p2p-circuit protocol was not present in multiaddr",codes.ERR_INVALID_MULTIADDR);let dr=multiaddr(ar[0]);const hr=multiaddr("/"+ar[1]).getPeerId();if(hr==null)throw new CodeError$3("destination peer id was missing",codes.ERR_INVALID_MULTIADDR);const pr=dr.protos().pop();if(pr===void 0)throw new CodeError$3("invalid multiaddr",codes.ERR_INVALID_MULTIADDR);return pr.name!=="p2p"&&(dr=dr.encapsulate(`/p2p/${hr}`)),{baseAddr:dr,peerId:peerIdFromString(hr)}}function webRTC(cr){return ar=>new WebRTCTransport(ar,cr)}const DEFAULT_BOOTSTRAP_TAG_NAME="bootstrap",DEFAULT_BOOTSTRAP_TAG_VALUE=50,DEFAULT_BOOTSTRAP_TAG_TTL=12e4,DEFAULT_BOOTSTRAP_DISCOVERY_TIMEOUT=1e3;class Bootstrap extends TypedEventEmitter{static tag="bootstrap";log;timer;list;timeout;components;_init;constructor(ar,dr={list:[]}){if(dr.list==null||dr.list.length===0)throw new Error("Bootstrap requires a list of peer addresses");super(),this.components=ar,this.log=ar.logger.forComponent("libp2p:bootstrap"),this.timeout=dr.timeout??DEFAULT_BOOTSTRAP_DISCOVERY_TIMEOUT,this.list=[];for(const fr of dr.list){if(!P2P.matches(fr)){this.log.error("Invalid multiaddr");continue}const hr=multiaddr(fr),pr=hr.getPeerId();if(pr==null){this.log.error("Invalid bootstrap multiaddr without peer id");continue}const mr={id:peerIdFromString(pr),multiaddrs:[hr]};this.list.push(mr)}this._init=dr}[peerDiscoverySymbol]=this;[Symbol.toStringTag]="@libp2p/bootstrap";isStarted(){return!!this.timer}start(){this.isStarted()||(this.log("Starting bootstrap node discovery, discovering peers after %s ms",this.timeout),this.timer=setTimeout(()=>{this._discoverBootstrapPeers().catch(ar=>{this.log.error(ar)})},this.timeout))}async _discoverBootstrapPeers(){if(this.timer!=null)for(const ar of this.list){if(await this.components.peerStore.merge(ar.id,{tags:{[this._init.tagName??DEFAULT_BOOTSTRAP_TAG_NAME]:{value:this._init.tagValue??DEFAULT_BOOTSTRAP_TAG_VALUE,ttl:this._init.tagTTL??DEFAULT_BOOTSTRAP_TAG_TTL}}}),this.timer==null)return;this.safeDispatchEvent("peer",{detail:ar})}}stop(){this.timer!=null&&clearTimeout(this.timer),this.timer=void 0}}function bootstrap(cr){return ar=>new Bootstrap(ar,cr)}const second$3=1e3,minute=60*second$3,FloodsubID="/floodsub/1.0.0",GossipsubIDv10="/meshsub/1.0.0",GossipsubIDv11="/meshsub/1.1.0",GossipsubD=6,GossipsubDlo=4,GossipsubDhi=12,GossipsubDscore=4,GossipsubDout=2,GossipsubHistoryLength=5,GossipsubHistoryGossip=3,GossipsubDlazy=6,GossipsubGossipFactor=.25,GossipsubGossipRetransmission=3,GossipsubHeartbeatInitialDelay=100,GossipsubHeartbeatInterval=second$3,GossipsubFanoutTTL=minute,GossipsubPrunePeers=16,GossipsubPruneBackoff=minute,GossipsubUnsubscribeBackoff=10*second$3,GossipsubPruneBackoffTicks=15,GossipsubDirectConnectTicks=300,GossipsubDirectConnectInitialDelay=second$3,GossipsubOpportunisticGraftTicks=60,GossipsubOpportunisticGraftPeers=2,GossipsubGraftFloodThreshold=10*second$3,GossipsubMaxIHaveLength=5e3,GossipsubMaxIHaveMessages=10,GossipsubIWantFollowupTime=3*second$3,GossipsubSeenTTL=2*minute,TimeCacheDuration=120*1e3,ERR_TOPIC_VALIDATOR_REJECT="ERR_TOPIC_VALIDATOR_REJECT",ERR_TOPIC_VALIDATOR_IGNORE="ERR_TOPIC_VALIDATOR_IGNORE",ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE=0,ACCEPT_FROM_WHITELIST_MAX_MESSAGES=128,ACCEPT_FROM_WHITELIST_DURATION_MS=1e3,DEFAULT_METRIC_MESH_MESSAGE_DELIVERIES_WINDOWS=1e3,BACKOFF_SLACK=1;var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(cr,ar){for(var dr=new Array(arguments.length-1),fr=0,hr=2,pr=!0;hr<arguments.length;)dr[fr++]=arguments[hr++];return new Promise(function(gr,yr){dr[fr]=function(wr){if(pr)if(pr=!1,wr)yr(wr);else{for(var br=new Array(arguments.length-1),Sr=0;Sr<br.length;)br[Sr++]=arguments[Sr];gr.apply(null,br)}};try{cr.apply(ar||null,dr)}catch(xr){pr&&(pr=!1,yr(xr))}})}var base64$1={};(function(cr){var ar=cr;ar.length=function(gr){var yr=gr.length;if(!yr)return 0;for(var xr=0;--yr%4>1&&gr.charAt(yr)==="=";)++xr;return Math.ceil(gr.length*3)/4-xr};for(var dr=new Array(64),fr=new Array(123),hr=0;hr<64;)fr[dr[hr]=hr<26?hr+65:hr<52?hr+71:hr<62?hr-4:hr-59|43]=hr++;ar.encode=function(gr,yr,xr){for(var wr=null,br=[],Sr=0,vr=0,Er;yr<xr;){var Ar=gr[yr++];switch(vr){case 0:br[Sr++]=dr[Ar>>2],Er=(Ar&3)<<4,vr=1;break;case 1:br[Sr++]=dr[Er|Ar>>4],Er=(Ar&15)<<2,vr=2;break;case 2:br[Sr++]=dr[Er|Ar>>6],br[Sr++]=dr[Ar&63],vr=0;break}Sr>8191&&((wr||(wr=[])).push(String.fromCharCode.apply(String,br)),Sr=0)}return vr&&(br[Sr++]=dr[Er],br[Sr++]=61,vr===1&&(br[Sr++]=61)),wr?(Sr&&wr.push(String.fromCharCode.apply(String,br.slice(0,Sr))),wr.join("")):String.fromCharCode.apply(String,br.slice(0,Sr))};var pr="invalid encoding";ar.decode=function(gr,yr,xr){for(var wr=xr,br=0,Sr,vr=0;vr<gr.length;){var Er=gr.charCodeAt(vr++);if(Er===61&&br>1)break;if((Er=fr[Er])===void 0)throw Error(pr);switch(br){case 0:Sr=Er,br=1;break;case 1:yr[xr++]=Sr<<2|(Er&48)>>4,Sr=Er,br=2;break;case 2:yr[xr++]=(Sr&15)<<4|(Er&60)>>2,Sr=Er,br=3;break;case 3:yr[xr++]=(Sr&3)<<6|Er,br=0;break}}if(br===1)throw Error(pr);return xr-wr},ar.test=function(gr){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(gr)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function cr(ar,dr,fr){return(this._listeners[ar]||(this._listeners[ar]=[])).push({fn:dr,ctx:fr||this}),this};EventEmitter.prototype.off=function cr(ar,dr){if(ar===void 0)this._listeners={};else if(dr===void 0)this._listeners[ar]=[];else for(var fr=this._listeners[ar],hr=0;hr<fr.length;)fr[hr].fn===dr?fr.splice(hr,1):++hr;return this};EventEmitter.prototype.emit=function cr(ar){var dr=this._listeners[ar];if(dr){for(var fr=[],hr=1;hr<arguments.length;)fr.push(arguments[hr++]);for(hr=0;hr<dr.length;)dr[hr].fn.apply(dr[hr++].ctx,fr)}return this};var float=factory(factory);function factory(cr){return typeof Float32Array<"u"?function(){var ar=new Float32Array([-0]),dr=new Uint8Array(ar.buffer),fr=dr[3]===128;function hr(yr,xr,wr){ar[0]=yr,xr[wr]=dr[0],xr[wr+1]=dr[1],xr[wr+2]=dr[2],xr[wr+3]=dr[3]}function pr(yr,xr,wr){ar[0]=yr,xr[wr]=dr[3],xr[wr+1]=dr[2],xr[wr+2]=dr[1],xr[wr+3]=dr[0]}cr.writeFloatLE=fr?hr:pr,cr.writeFloatBE=fr?pr:hr;function mr(yr,xr){return dr[0]=yr[xr],dr[1]=yr[xr+1],dr[2]=yr[xr+2],dr[3]=yr[xr+3],ar[0]}function gr(yr,xr){return dr[3]=yr[xr],dr[2]=yr[xr+1],dr[1]=yr[xr+2],dr[0]=yr[xr+3],ar[0]}cr.readFloatLE=fr?mr:gr,cr.readFloatBE=fr?gr:mr}():function(){function ar(fr,hr,pr,mr){var gr=hr<0?1:0;if(gr&&(hr=-hr),hr===0)fr(1/hr>0?0:2147483648,pr,mr);else if(isNaN(hr))fr(2143289344,pr,mr);else if(hr>34028234663852886e22)fr((gr<<31|2139095040)>>>0,pr,mr);else if(hr<11754943508222875e-54)fr((gr<<31|Math.round(hr/1401298464324817e-60))>>>0,pr,mr);else{var yr=Math.floor(Math.log(hr)/Math.LN2),xr=Math.round(hr*Math.pow(2,-yr)*8388608)&8388607;fr((gr<<31|yr+127<<23|xr)>>>0,pr,mr)}}cr.writeFloatLE=ar.bind(null,writeUintLE),cr.writeFloatBE=ar.bind(null,writeUintBE);function dr(fr,hr,pr){var mr=fr(hr,pr),gr=(mr>>31)*2+1,yr=mr>>>23&255,xr=mr&8388607;return yr===255?xr?NaN:gr*(1/0):yr===0?gr*1401298464324817e-60*xr:gr*Math.pow(2,yr-150)*(xr+8388608)}cr.readFloatLE=dr.bind(null,readUintLE),cr.readFloatBE=dr.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var ar=new Float64Array([-0]),dr=new Uint8Array(ar.buffer),fr=dr[7]===128;function hr(yr,xr,wr){ar[0]=yr,xr[wr]=dr[0],xr[wr+1]=dr[1],xr[wr+2]=dr[2],xr[wr+3]=dr[3],xr[wr+4]=dr[4],xr[wr+5]=dr[5],xr[wr+6]=dr[6],xr[wr+7]=dr[7]}function pr(yr,xr,wr){ar[0]=yr,xr[wr]=dr[7],xr[wr+1]=dr[6],xr[wr+2]=dr[5],xr[wr+3]=dr[4],xr[wr+4]=dr[3],xr[wr+5]=dr[2],xr[wr+6]=dr[1],xr[wr+7]=dr[0]}cr.writeDoubleLE=fr?hr:pr,cr.writeDoubleBE=fr?pr:hr;function mr(yr,xr){return dr[0]=yr[xr],dr[1]=yr[xr+1],dr[2]=yr[xr+2],dr[3]=yr[xr+3],dr[4]=yr[xr+4],dr[5]=yr[xr+5],dr[6]=yr[xr+6],dr[7]=yr[xr+7],ar[0]}function gr(yr,xr){return dr[7]=yr[xr],dr[6]=yr[xr+1],dr[5]=yr[xr+2],dr[4]=yr[xr+3],dr[3]=yr[xr+4],dr[2]=yr[xr+5],dr[1]=yr[xr+6],dr[0]=yr[xr+7],ar[0]}cr.readDoubleLE=fr?mr:gr,cr.readDoubleBE=fr?gr:mr}():function(){function ar(fr,hr,pr,mr,gr,yr){var xr=mr<0?1:0;if(xr&&(mr=-mr),mr===0)fr(0,gr,yr+hr),fr(1/mr>0?0:2147483648,gr,yr+pr);else if(isNaN(mr))fr(0,gr,yr+hr),fr(2146959360,gr,yr+pr);else if(mr>17976931348623157e292)fr(0,gr,yr+hr),fr((xr<<31|2146435072)>>>0,gr,yr+pr);else{var wr;if(mr<22250738585072014e-324)wr=mr/5e-324,fr(wr>>>0,gr,yr+hr),fr((xr<<31|wr/4294967296)>>>0,gr,yr+pr);else{var br=Math.floor(Math.log(mr)/Math.LN2);br===1024&&(br=1023),wr=mr*Math.pow(2,-br),fr(wr*4503599627370496>>>0,gr,yr+hr),fr((xr<<31|br+1023<<20|wr*1048576&1048575)>>>0,gr,yr+pr)}}}cr.writeDoubleLE=ar.bind(null,writeUintLE,0,4),cr.writeDoubleBE=ar.bind(null,writeUintBE,4,0);function dr(fr,hr,pr,mr,gr){var yr=fr(mr,gr+hr),xr=fr(mr,gr+pr),wr=(xr>>31)*2+1,br=xr>>>20&2047,Sr=4294967296*(xr&1048575)+yr;return br===2047?Sr?NaN:wr*(1/0):br===0?wr*5e-324*Sr:wr*Math.pow(2,br-1075)*(Sr+4503599627370496)}cr.readDoubleLE=dr.bind(null,readUintLE,0,4),cr.readDoubleBE=dr.bind(null,readUintBE,4,0)}(),cr}function writeUintLE(cr,ar,dr){ar[dr]=cr&255,ar[dr+1]=cr>>>8&255,ar[dr+2]=cr>>>16&255,ar[dr+3]=cr>>>24}function writeUintBE(cr,ar,dr){ar[dr]=cr>>>24,ar[dr+1]=cr>>>16&255,ar[dr+2]=cr>>>8&255,ar[dr+3]=cr&255}function readUintLE(cr,ar){return(cr[ar]|cr[ar+1]<<8|cr[ar+2]<<16|cr[ar+3]<<24)>>>0}function readUintBE(cr,ar){return(cr[ar]<<24|cr[ar+1]<<16|cr[ar+2]<<8|cr[ar+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(cr){}return null}var utf8$2={};(function(cr){var ar=cr;ar.length=function(fr){for(var hr=0,pr=0,mr=0;mr<fr.length;++mr)pr=fr.charCodeAt(mr),pr<128?hr+=1:pr<2048?hr+=2:(pr&64512)===55296&&(fr.charCodeAt(mr+1)&64512)===56320?(++mr,hr+=4):hr+=3;return hr},ar.read=function(fr,hr,pr){var mr=pr-hr;if(mr<1)return"";for(var gr=null,yr=[],xr=0,wr;hr<pr;)wr=fr[hr++],wr<128?yr[xr++]=wr:wr>191&&wr<224?yr[xr++]=(wr&31)<<6|fr[hr++]&63:wr>239&&wr<365?(wr=((wr&7)<<18|(fr[hr++]&63)<<12|(fr[hr++]&63)<<6|fr[hr++]&63)-65536,yr[xr++]=55296+(wr>>10),yr[xr++]=56320+(wr&1023)):yr[xr++]=(wr&15)<<12|(fr[hr++]&63)<<6|fr[hr++]&63,xr>8191&&((gr||(gr=[])).push(String.fromCharCode.apply(String,yr)),xr=0);return gr?(xr&&gr.push(String.fromCharCode.apply(String,yr.slice(0,xr))),gr.join("")):String.fromCharCode.apply(String,yr.slice(0,xr))},ar.write=function(fr,hr,pr){for(var mr=pr,gr,yr,xr=0;xr<fr.length;++xr)gr=fr.charCodeAt(xr),gr<128?hr[pr++]=gr:gr<2048?(hr[pr++]=gr>>6|192,hr[pr++]=gr&63|128):(gr&64512)===55296&&((yr=fr.charCodeAt(xr+1))&64512)===56320?(gr=65536+((gr&1023)<<10)+(yr&1023),++xr,hr[pr++]=gr>>18|240,hr[pr++]=gr>>12&63|128,hr[pr++]=gr>>6&63|128,hr[pr++]=gr&63|128):(hr[pr++]=gr>>12|224,hr[pr++]=gr>>6&63|128,hr[pr++]=gr&63|128);return pr-mr}})(utf8$2);var pool_1=pool;function pool(cr,ar,dr){var fr=dr||8192,hr=fr>>>1,pr=null,mr=fr;return function(yr){if(yr<1||yr>hr)return cr(yr);mr+yr>fr&&(pr=cr(fr),mr=0);var xr=ar.call(pr,mr,mr+=yr);return mr&7&&(mr=(mr|7)+1),xr}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=ar;var cr=requireMinimal();function ar(pr,mr){this.lo=pr>>>0,this.hi=mr>>>0}var dr=ar.zero=new ar(0,0);dr.toNumber=function(){return 0},dr.zzEncode=dr.zzDecode=function(){return this},dr.length=function(){return 1};var fr=ar.zeroHash="\0\0\0\0\0\0\0\0";ar.fromNumber=function(mr){if(mr===0)return dr;var gr=mr<0;gr&&(mr=-mr);var yr=mr>>>0,xr=(mr-yr)/4294967296>>>0;return gr&&(xr=~xr>>>0,yr=~yr>>>0,++yr>4294967295&&(yr=0,++xr>4294967295&&(xr=0))),new ar(yr,xr)},ar.from=function(mr){if(typeof mr=="number")return ar.fromNumber(mr);if(cr.isString(mr))if(cr.Long)mr=cr.Long.fromString(mr);else return ar.fromNumber(parseInt(mr,10));return mr.low||mr.high?new ar(mr.low>>>0,mr.high>>>0):dr},ar.prototype.toNumber=function(mr){if(!mr&&this.hi>>>31){var gr=~this.lo+1>>>0,yr=~this.hi>>>0;return gr||(yr=yr+1>>>0),-(gr+yr*4294967296)}return this.lo+this.hi*4294967296},ar.prototype.toLong=function(mr){return cr.Long?new cr.Long(this.lo|0,this.hi|0,!!mr):{low:this.lo|0,high:this.hi|0,unsigned:!!mr}};var hr=String.prototype.charCodeAt;return ar.fromHash=function(mr){return mr===fr?dr:new ar((hr.call(mr,0)|hr.call(mr,1)<<8|hr.call(mr,2)<<16|hr.call(mr,3)<<24)>>>0,(hr.call(mr,4)|hr.call(mr,5)<<8|hr.call(mr,6)<<16|hr.call(mr,7)<<24)>>>0)},ar.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},ar.prototype.zzEncode=function(){var mr=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^mr)>>>0,this.lo=(this.lo<<1^mr)>>>0,this},ar.prototype.zzDecode=function(){var mr=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^mr)>>>0,this.hi=(this.hi>>>1^mr)>>>0,this},ar.prototype.length=function(){var mr=this.lo,gr=(this.lo>>>28|this.hi<<4)>>>0,yr=this.hi>>>24;return yr===0?gr===0?mr<16384?mr<128?1:2:mr<2097152?3:4:gr<16384?gr<128?5:6:gr<2097152?7:8:yr<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(cr){var ar=cr;ar.asPromise=aspromise,ar.base64=base64$1,ar.EventEmitter=eventemitter,ar.float=float,ar.inquire=inquire_1,ar.utf8=utf8$2,ar.pool=pool_1,ar.LongBits=requireLongbits(),ar.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node),ar.global=ar.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,ar.emptyArray=Object.freeze?Object.freeze([]):[],ar.emptyObject=Object.freeze?Object.freeze({}):{},ar.isInteger=Number.isInteger||function(pr){return typeof pr=="number"&&isFinite(pr)&&Math.floor(pr)===pr},ar.isString=function(pr){return typeof pr=="string"||pr instanceof String},ar.isObject=function(pr){return pr&&typeof pr=="object"},ar.isset=ar.isSet=function(pr,mr){var gr=pr[mr];return gr!=null&&pr.hasOwnProperty(mr)?typeof gr!="object"||(Array.isArray(gr)?gr.length:Object.keys(gr).length)>0:!1},ar.Buffer=function(){try{var hr=ar.inquire("buffer").Buffer;return hr.prototype.utf8Write?hr:null}catch{return null}}(),ar._Buffer_from=null,ar._Buffer_allocUnsafe=null,ar.newBuffer=function(pr){return typeof pr=="number"?ar.Buffer?ar._Buffer_allocUnsafe(pr):new ar.Array(pr):ar.Buffer?ar._Buffer_from(pr):typeof Uint8Array>"u"?pr:new Uint8Array(pr)},ar.Array=typeof Uint8Array<"u"?Uint8Array:Array,ar.Long=ar.global.dcodeIO&&ar.global.dcodeIO.Long||ar.global.Long||ar.inquire("long"),ar.key2Re=/^true|false|0|1$/,ar.key32Re=/^-?(?:0|[1-9][0-9]*)$/,ar.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,ar.longToHash=function(pr){return pr?ar.LongBits.from(pr).toHash():ar.LongBits.zeroHash},ar.longFromHash=function(pr,mr){var gr=ar.LongBits.fromHash(pr);return ar.Long?ar.Long.fromBits(gr.lo,gr.hi,mr):gr.toNumber(!!mr)};function dr(hr,pr,mr){for(var gr=Object.keys(pr),yr=0;yr<gr.length;++yr)(hr[gr[yr]]===void 0||!mr)&&(hr[gr[yr]]=pr[gr[yr]]);return hr}ar.merge=dr,ar.lcFirst=function(pr){return pr.charAt(0).toLowerCase()+pr.substring(1)};function fr(hr){function pr(mr,gr){if(!(this instanceof pr))return new pr(mr,gr);Object.defineProperty(this,"message",{get:function(){return mr}}),Error.captureStackTrace?Error.captureStackTrace(this,pr):Object.defineProperty(this,"stack",{value:new Error().stack||""}),gr&&dr(this,gr)}return pr.prototype=Object.create(Error.prototype,{constructor:{value:pr,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return hr},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),pr}ar.newError=fr,ar.ProtocolError=fr("ProtocolError"),ar.oneOfGetter=function(pr){for(var mr={},gr=0;gr<pr.length;++gr)mr[pr[gr]]=1;return function(){for(var yr=Object.keys(this),xr=yr.length-1;xr>-1;--xr)if(mr[yr[xr]]===1&&this[yr[xr]]!==void 0&&this[yr[xr]]!==null)return yr[xr]}},ar.oneOfSetter=function(pr){return function(mr){for(var gr=0;gr<pr.length;++gr)pr[gr]!==mr&&delete this[pr[gr]]}},ar.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},ar._configure=function(){var hr=ar.Buffer;if(!hr){ar._Buffer_from=ar._Buffer_allocUnsafe=null;return}ar._Buffer_from=hr.from!==Uint8Array.from&&hr.from||function(mr,gr){return new hr(mr,gr)},ar._Buffer_allocUnsafe=hr.allocUnsafe||function(mr){return new hr(mr)}}}(minimal$1)),minimal$1}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(cr,ar,dr){this.fn=cr,this.len=ar,this.next=void 0,this.val=dr}function noop(){}function State(cr){this.head=cr.head,this.tail=cr.tail,this.len=cr.len,this.next=cr.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function cr(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function cr(ar){return new util$4.Array(ar)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function cr(ar,dr,fr){return this.tail=this.tail.next=new Op(ar,dr,fr),this.len+=dr,this};function writeByte(cr,ar,dr){ar[dr]=cr&255}function writeVarint32(cr,ar,dr){for(;cr>127;)ar[dr++]=cr&127|128,cr>>>=7;ar[dr]=cr}function VarintOp(cr,ar){this.len=cr,this.next=void 0,this.val=ar}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function cr(ar){return this.len+=(this.tail=this.tail.next=new VarintOp((ar=ar>>>0)<128?1:ar<16384?2:ar<2097152?3:ar<268435456?4:5,ar)).len,this};Writer$1.prototype.int32=function cr(ar){return ar<0?this._push(writeVarint64,10,LongBits$1.fromNumber(ar)):this.uint32(ar)};Writer$1.prototype.sint32=function cr(ar){return this.uint32((ar<<1^ar>>31)>>>0)};function writeVarint64(cr,ar,dr){for(;cr.hi;)ar[dr++]=cr.lo&127|128,cr.lo=(cr.lo>>>7|cr.hi<<25)>>>0,cr.hi>>>=7;for(;cr.lo>127;)ar[dr++]=cr.lo&127|128,cr.lo=cr.lo>>>7;ar[dr++]=cr.lo}Writer$1.prototype.uint64=function cr(ar){var dr=LongBits$1.from(ar);return this._push(writeVarint64,dr.length(),dr)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function cr(ar){var dr=LongBits$1.from(ar).zzEncode();return this._push(writeVarint64,dr.length(),dr)};Writer$1.prototype.bool=function cr(ar){return this._push(writeByte,1,ar?1:0)};function writeFixed32(cr,ar,dr){ar[dr]=cr&255,ar[dr+1]=cr>>>8&255,ar[dr+2]=cr>>>16&255,ar[dr+3]=cr>>>24}Writer$1.prototype.fixed32=function cr(ar){return this._push(writeFixed32,4,ar>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function cr(ar){var dr=LongBits$1.from(ar);return this._push(writeFixed32,4,dr.lo)._push(writeFixed32,4,dr.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function cr(ar){return this._push(util$4.float.writeFloatLE,4,ar)};Writer$1.prototype.double=function cr(ar){return this._push(util$4.float.writeDoubleLE,8,ar)};var writeBytes=util$4.Array.prototype.set?function cr(ar,dr,fr){dr.set(ar,fr)}:function cr(ar,dr,fr){for(var hr=0;hr<ar.length;++hr)dr[fr+hr]=ar[hr]};Writer$1.prototype.bytes=function cr(ar){var dr=ar.length>>>0;if(!dr)return this._push(writeByte,1,0);if(util$4.isString(ar)){var fr=Writer$1.alloc(dr=base64.length(ar));base64.decode(ar,fr,0),ar=fr}return this.uint32(dr)._push(writeBytes,dr,ar)};Writer$1.prototype.string=function cr(ar){var dr=utf8$1.length(ar);return dr?this.uint32(dr)._push(utf8$1.write,dr,ar):this._push(writeByte,1,0)};Writer$1.prototype.fork=function cr(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function cr(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function cr(){var ar=this.head,dr=this.tail,fr=this.len;return this.reset().uint32(fr),fr&&(this.tail.next=ar.next,this.tail=dr,this.len+=fr),this};Writer$1.prototype.finish=function cr(){for(var ar=this.head.next,dr=this.constructor.alloc(this.len),fr=0;ar;)ar.fn(ar.val,dr,fr),fr+=ar.len,ar=ar.next;return dr};Writer$1._configure=function(cr){BufferWriter$1=cr,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(ar,dr,fr){dr.set(ar,fr)}:function(ar,dr,fr){if(ar.copy)ar.copy(dr,fr,0,ar.length);else for(var hr=0;hr<ar.length;)dr[fr++]=ar[hr++]}};BufferWriter.prototype.bytes=function cr(ar){util$3.isString(ar)&&(ar=util$3._Buffer_from(ar,"base64"));var dr=ar.length>>>0;return this.uint32(dr),dr&&this._push(BufferWriter.writeBytesBuffer,dr,ar),this};function writeStringBuffer(cr,ar,dr){cr.length<40?util$3.utf8.write(cr,ar,dr):ar.utf8Write?ar.utf8Write(cr,dr):ar.write(cr,dr)}BufferWriter.prototype.string=function cr(ar){var dr=util$3.Buffer.byteLength(ar);return this.uint32(dr),dr&&this._push(writeStringBuffer,dr,ar),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(cr,ar){return RangeError("index out of range: "+cr.pos+" + "+(ar||1)+" > "+cr.len)}function Reader$1(cr){this.buf=cr,this.pos=0,this.len=cr.length}var create_array=typeof Uint8Array<"u"?function cr(ar){if(ar instanceof Uint8Array||Array.isArray(ar))return new Reader$1(ar);throw Error("illegal buffer")}:function cr(ar){if(Array.isArray(ar))return new Reader$1(ar);throw Error("illegal buffer")},create=function cr(){return util$2.Buffer?function(dr){return(Reader$1.create=function(hr){return util$2.Buffer.isBuffer(hr)?new BufferReader$1(hr):create_array(hr)})(dr)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function cr(){var ar=4294967295;return function(){if(ar=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(ar=(ar|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(ar=(ar|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(ar=(ar|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(ar=(ar|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return ar;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return ar}}();Reader$1.prototype.int32=function cr(){return this.uint32()|0};Reader$1.prototype.sint32=function cr(){var ar=this.uint32();return ar>>>1^-(ar&1)|0};function readLongVarint(){var cr=new LongBits(0,0),ar=0;if(this.len-this.pos>4){for(;ar<4;++ar)if(cr.lo=(cr.lo|(this.buf[this.pos]&127)<<ar*7)>>>0,this.buf[this.pos++]<128)return cr;if(cr.lo=(cr.lo|(this.buf[this.pos]&127)<<28)>>>0,cr.hi=(cr.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return cr;ar=0}else{for(;ar<3;++ar){if(this.pos>=this.len)throw indexOutOfRange(this);if(cr.lo=(cr.lo|(this.buf[this.pos]&127)<<ar*7)>>>0,this.buf[this.pos++]<128)return cr}return cr.lo=(cr.lo|(this.buf[this.pos++]&127)<<ar*7)>>>0,cr}if(this.len-this.pos>4){for(;ar<5;++ar)if(cr.hi=(cr.hi|(this.buf[this.pos]&127)<<ar*7+3)>>>0,this.buf[this.pos++]<128)return cr}else for(;ar<5;++ar){if(this.pos>=this.len)throw indexOutOfRange(this);if(cr.hi=(cr.hi|(this.buf[this.pos]&127)<<ar*7+3)>>>0,this.buf[this.pos++]<128)return cr}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function cr(){return this.uint32()!==0};function readFixed32_end(cr,ar){return(cr[ar-4]|cr[ar-3]<<8|cr[ar-2]<<16|cr[ar-1]<<24)>>>0}Reader$1.prototype.fixed32=function cr(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function cr(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function cr(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var ar=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,ar};Reader$1.prototype.double=function cr(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var ar=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,ar};Reader$1.prototype.bytes=function cr(){var ar=this.uint32(),dr=this.pos,fr=this.pos+ar;if(fr>this.len)throw indexOutOfRange(this,ar);if(this.pos+=ar,Array.isArray(this.buf))return this.buf.slice(dr,fr);if(dr===fr){var hr=util$2.Buffer;return hr?hr.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,dr,fr)};Reader$1.prototype.string=function cr(){var ar=this.bytes();return utf8.read(ar,0,ar.length)};Reader$1.prototype.skip=function cr(ar){if(typeof ar=="number"){if(this.pos+ar>this.len)throw indexOutOfRange(this,ar);this.pos+=ar}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(cr){switch(cr){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(cr=this.uint32()&7)!==4;)this.skipType(cr);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+cr+" at offset "+this.pos)}return this};Reader$1._configure=function(cr){BufferReader$1=cr,Reader$1.create=create(),BufferReader$1._configure();var ar=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[ar](!1)},uint64:function(){return readLongVarint.call(this)[ar](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[ar](!1)},fixed64:function(){return readFixed64.call(this)[ar](!0)},sfixed64:function(){return readFixed64.call(this)[ar](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(cr){Reader.call(this,cr)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function cr(){var ar=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+ar,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+ar,this.len))};BufferReader._configure();var rpc$1={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(cr,ar,dr){if(typeof cr!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=cr,this.requestDelimited=!!ar,this.responseDelimited=!!dr}Service.prototype.rpcCall=function cr(ar,dr,fr,hr,pr){if(!hr)throw TypeError("request must be specified");var mr=this;if(!pr)return util.asPromise(cr,mr,ar,dr,fr,hr);if(!mr.rpcImpl){setTimeout(function(){pr(Error("already ended"))},0);return}try{return mr.rpcImpl(ar,dr[mr.requestDelimited?"encodeDelimited":"encode"](hr).finish(),function(yr,xr){if(yr)return mr.emit("error",yr,ar),pr(yr);if(xr===null){mr.end(!0);return}if(!(xr instanceof fr))try{xr=fr[mr.responseDelimited?"decodeDelimited":"decode"](xr)}catch(wr){return mr.emit("error",wr,ar),pr(wr)}return mr.emit("data",xr,ar),pr(null,xr)})}catch(gr){mr.emit("error",gr,ar),setTimeout(function(){pr(gr)},0);return}};Service.prototype.end=function cr(ar){return this.rpcImpl&&(ar||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(cr){var ar=cr;ar.Service=service})(rpc$1);var roots={};(function(cr){var ar=cr;ar.build="minimal",ar.Writer=writer,ar.BufferWriter=writer_buffer,ar.Reader=reader,ar.BufferReader=reader_buffer,ar.util=requireMinimal(),ar.rpc=rpc$1,ar.roots=roots,ar.configure=dr;function dr(){ar.util._configure(),ar.Writer._configure(ar.BufferWriter),ar.Reader._configure(ar.BufferReader)}dr()})(indexMinimal);var minimal=indexMinimal;const protobuf=getDefaultExportFromCjs(minimal),defaultDecodeRpcLimits={maxSubscriptions:1/0,maxMessages:1/0,maxIhaveMessageIDs:1/0,maxIwantMessageIDs:1/0,maxControlMessages:1/0,maxPeerInfos:1/0};function decodeRpc(cr,ar){ar={...ar};const dr=protobuf.Reader.create(cr),fr=cr.length,hr=fr===void 0?dr.len:dr.pos+fr,pr={};for(;dr.pos<hr;){const mr=dr.uint32();switch(mr>>>3){case 1:pr.subscriptions!=null&&pr.subscriptions.length>0||(pr.subscriptions=[]),pr.subscriptions.length<ar.maxSubscriptions?pr.subscriptions.push(decodeSubOpts(dr,dr.uint32())):dr.skipType(mr&7);break;case 2:pr.messages!=null&&pr.messages.length>0||(pr.messages=[]),pr.messages.length<ar.maxMessages?pr.messages.push(decodeMessage(dr,dr.uint32())):dr.skipType(mr&7);break;case 3:pr.control=decodeControlMessage(dr,dr.uint32(),ar);break;default:dr.skipType(mr&7);break}}return pr}function decodeSubOpts(cr,ar){const dr=ar===void 0?cr.len:cr.pos+ar,fr={};for(;cr.pos<dr;){const hr=cr.uint32();switch(hr>>>3){case 1:fr.subscribe=cr.bool();break;case 2:fr.topic=cr.string();break;default:cr.skipType(hr&7);break}}return fr}function decodeMessage(cr,ar){const dr=ar===void 0?cr.len:cr.pos+ar,fr={};for(;cr.pos<dr;){const hr=cr.uint32();switch(hr>>>3){case 1:fr.from=cr.bytes();break;case 2:fr.data=cr.bytes();break;case 3:fr.seqno=cr.bytes();break;case 4:fr.topic=cr.string();break;case 5:fr.signature=cr.bytes();break;case 6:fr.key=cr.bytes();break;default:cr.skipType(hr&7);break}}if(!fr.topic)throw Error("missing required 'topic'");return fr}function decodeControlMessage(cr,ar,dr){const fr=ar===void 0?cr.len:cr.pos+ar,hr={};for(;cr.pos<fr;){const pr=cr.uint32();switch(pr>>>3){case 1:hr.ihave!=null&&hr.ihave.length>0||(hr.ihave=[]),hr.ihave.length<dr.maxControlMessages?hr.ihave.push(decodeControlIHave(cr,cr.uint32(),dr)):cr.skipType(pr&7);break;case 2:hr.iwant!=null&&hr.iwant.length>0||(hr.iwant=[]),hr.iwant.length<dr.maxControlMessages?hr.iwant.push(decodeControlIWant(cr,cr.uint32(),dr)):cr.skipType(pr&7);break;case 3:hr.graft!=null&&hr.graft.length>0||(hr.graft=[]),hr.graft.length<dr.maxControlMessages?hr.graft.push(decodeControlGraft(cr,cr.uint32())):cr.skipType(pr&7);break;case 4:hr.prune!=null&&hr.prune.length>0||(hr.prune=[]),hr.prune.length<dr.maxControlMessages?hr.prune.push(decodeControlPrune(cr,cr.uint32(),dr)):cr.skipType(pr&7);break;default:cr.skipType(pr&7);break}}return hr}function decodeControlIHave(cr,ar,dr){const fr=ar===void 0?cr.len:cr.pos+ar,hr={};for(;cr.pos<fr;){const pr=cr.uint32();switch(pr>>>3){case 1:hr.topicID=cr.string();break;case 2:hr.messageIDs!=null&&hr.messageIDs.length>0||(hr.messageIDs=[]),dr.maxIhaveMessageIDs-- >0?hr.messageIDs.push(cr.bytes()):cr.skipType(pr&7);break;default:cr.skipType(pr&7);break}}return hr}function decodeControlIWant(cr,ar,dr){const fr=ar===void 0?cr.len:cr.pos+ar,hr={};for(;cr.pos<fr;){const pr=cr.uint32();switch(pr>>>3){case 1:hr.messageIDs!=null&&hr.messageIDs.length>0||(hr.messageIDs=[]),dr.maxIwantMessageIDs-- >0?hr.messageIDs.push(cr.bytes()):cr.skipType(pr&7);break;default:cr.skipType(pr&7);break}}return hr}function decodeControlGraft(cr,ar){const dr=ar===void 0?cr.len:cr.pos+ar,fr={};for(;cr.pos<dr;){const hr=cr.uint32();switch(hr>>>3){case 1:fr.topicID=cr.string();break;default:cr.skipType(hr&7);break}}return fr}function decodeControlPrune(cr,ar,dr){const fr=ar===void 0?cr.len:cr.pos+ar,hr={};for(;cr.pos<fr;){const pr=cr.uint32();switch(pr>>>3){case 1:hr.topicID=cr.string();break;case 2:hr.peers!=null&&hr.peers.length>0||(hr.peers=[]),dr.maxPeerInfos-- >0?hr.peers.push(decodePeerInfo(cr,cr.uint32())):cr.skipType(pr&7);break;case 3:hr.backoff=cr.uint64();break;default:cr.skipType(pr&7);break}}return hr}function decodePeerInfo(cr,ar){const dr=ar===void 0?cr.len:cr.pos+ar,fr={};for(;cr.pos<dr;){const hr=cr.uint32();switch(hr>>>3){case 1:fr.peerID=cr.bytes();break;case 2:fr.signedPeerRecord=cr.bytes();break;default:cr.skipType(hr&7);break}}return fr}var rpc={exports:{}};(function(cr){(function(ar,dr){typeof commonjsRequire$1=="function"&&cr&&cr.exports&&(cr.exports=dr(minimal))})(commonjsGlobal,function(ar){var dr=ar.Reader,fr=ar.Writer,hr=ar.util,pr=ar.roots.default||(ar.roots.default={});return pr.RPC=function(){function mr(yr){if(this.subscriptions=[],this.messages=[],yr)for(var xr=Object.keys(yr),wr=0;wr<xr.length;++wr)yr[xr[wr]]!=null&&(this[xr[wr]]=yr[xr[wr]])}mr.prototype.subscriptions=hr.emptyArray,mr.prototype.messages=hr.emptyArray,mr.prototype.control=null;var gr;return Object.defineProperty(mr.prototype,"_control",{get:hr.oneOfGetter(gr=["control"]),set:hr.oneOfSetter(gr)}),mr.encode=function(xr,wr){if(wr||(wr=fr.create()),xr.subscriptions!=null&&xr.subscriptions.length)for(var br=0;br<xr.subscriptions.length;++br)pr.RPC.SubOpts.encode(xr.subscriptions[br],wr.uint32(10).fork()).ldelim();if(xr.messages!=null&&xr.messages.length)for(var br=0;br<xr.messages.length;++br)pr.RPC.Message.encode(xr.messages[br],wr.uint32(18).fork()).ldelim();return xr.control!=null&&Object.hasOwnProperty.call(xr,"control")&&pr.RPC.ControlMessage.encode(xr.control,wr.uint32(26).fork()).ldelim(),wr},mr.decode=function(xr,wr){xr instanceof dr||(xr=dr.create(xr));for(var br=wr===void 0?xr.len:xr.pos+wr,Sr=new pr.RPC;xr.pos<br;){var vr=xr.uint32();switch(vr>>>3){case 1:Sr.subscriptions&&Sr.subscriptions.length||(Sr.subscriptions=[]),Sr.subscriptions.push(pr.RPC.SubOpts.decode(xr,xr.uint32()));break;case 2:Sr.messages&&Sr.messages.length||(Sr.messages=[]),Sr.messages.push(pr.RPC.Message.decode(xr,xr.uint32()));break;case 3:Sr.control=pr.RPC.ControlMessage.decode(xr,xr.uint32());break;default:xr.skipType(vr&7);break}}return Sr},mr.fromObject=function(xr){if(xr instanceof pr.RPC)return xr;var wr=new pr.RPC;if(xr.subscriptions){if(!Array.isArray(xr.subscriptions))throw TypeError(".RPC.subscriptions: array expected");wr.subscriptions=[];for(var br=0;br<xr.subscriptions.length;++br){if(typeof xr.subscriptions[br]!="object")throw TypeError(".RPC.subscriptions: object expected");wr.subscriptions[br]=pr.RPC.SubOpts.fromObject(xr.subscriptions[br])}}if(xr.messages){if(!Array.isArray(xr.messages))throw TypeError(".RPC.messages: array expected");wr.messages=[];for(var br=0;br<xr.messages.length;++br){if(typeof xr.messages[br]!="object")throw TypeError(".RPC.messages: object expected");wr.messages[br]=pr.RPC.Message.fromObject(xr.messages[br])}}if(xr.control!=null){if(typeof xr.control!="object")throw TypeError(".RPC.control: object expected");wr.control=pr.RPC.ControlMessage.fromObject(xr.control)}return wr},mr.toObject=function(xr,wr){wr||(wr={});var br={};if((wr.arrays||wr.defaults)&&(br.subscriptions=[],br.messages=[]),xr.subscriptions&&xr.subscriptions.length){br.subscriptions=[];for(var Sr=0;Sr<xr.subscriptions.length;++Sr)br.subscriptions[Sr]=pr.RPC.SubOpts.toObject(xr.subscriptions[Sr],wr)}if(xr.messages&&xr.messages.length){br.messages=[];for(var Sr=0;Sr<xr.messages.length;++Sr)br.messages[Sr]=pr.RPC.Message.toObject(xr.messages[Sr],wr)}return xr.control!=null&&xr.hasOwnProperty("control")&&(br.control=pr.RPC.ControlMessage.toObject(xr.control,wr),wr.oneofs&&(br._control="control")),br},mr.prototype.toJSON=function(){return this.constructor.toObject(this,ar.util.toJSONOptions)},mr.SubOpts=function(){function yr(wr){if(wr)for(var br=Object.keys(wr),Sr=0;Sr<br.length;++Sr)wr[br[Sr]]!=null&&(this[br[Sr]]=wr[br[Sr]])}yr.prototype.subscribe=null,yr.prototype.topic=null;var xr;return Object.defineProperty(yr.prototype,"_subscribe",{get:hr.oneOfGetter(xr=["subscribe"]),set:hr.oneOfSetter(xr)}),Object.defineProperty(yr.prototype,"_topic",{get:hr.oneOfGetter(xr=["topic"]),set:hr.oneOfSetter(xr)}),yr.encode=function(br,Sr){return Sr||(Sr=fr.create()),br.subscribe!=null&&Object.hasOwnProperty.call(br,"subscribe")&&Sr.uint32(8).bool(br.subscribe),br.topic!=null&&Object.hasOwnProperty.call(br,"topic")&&Sr.uint32(18).string(br.topic),Sr},yr.decode=function(br,Sr){br instanceof dr||(br=dr.create(br));for(var vr=Sr===void 0?br.len:br.pos+Sr,Er=new pr.RPC.SubOpts;br.pos<vr;){var Ar=br.uint32();switch(Ar>>>3){case 1:Er.subscribe=br.bool();break;case 2:Er.topic=br.string();break;default:br.skipType(Ar&7);break}}return Er},yr.fromObject=function(br){if(br instanceof pr.RPC.SubOpts)return br;var Sr=new pr.RPC.SubOpts;return br.subscribe!=null&&(Sr.subscribe=!!br.subscribe),br.topic!=null&&(Sr.topic=String(br.topic)),Sr},yr.toObject=function(br,Sr){Sr||(Sr={});var vr={};return br.subscribe!=null&&br.hasOwnProperty("subscribe")&&(vr.subscribe=br.subscribe,Sr.oneofs&&(vr._subscribe="subscribe")),br.topic!=null&&br.hasOwnProperty("topic")&&(vr.topic=br.topic,Sr.oneofs&&(vr._topic="topic")),vr},yr.prototype.toJSON=function(){return this.constructor.toObject(this,ar.util.toJSONOptions)},yr}(),mr.Message=function(){function yr(wr){if(wr)for(var br=Object.keys(wr),Sr=0;Sr<br.length;++Sr)wr[br[Sr]]!=null&&(this[br[Sr]]=wr[br[Sr]])}yr.prototype.from=null,yr.prototype.data=null,yr.prototype.seqno=null,yr.prototype.topic="",yr.prototype.signature=null,yr.prototype.key=null;var xr;return Object.defineProperty(yr.prototype,"_from",{get:hr.oneOfGetter(xr=["from"]),set:hr.oneOfSetter(xr)}),Object.defineProperty(yr.prototype,"_data",{get:hr.oneOfGetter(xr=["data"]),set:hr.oneOfSetter(xr)}),Object.defineProperty(yr.prototype,"_seqno",{get:hr.oneOfGetter(xr=["seqno"]),set:hr.oneOfSetter(xr)}),Object.defineProperty(yr.prototype,"_signature",{get:hr.oneOfGetter(xr=["signature"]),set:hr.oneOfSetter(xr)}),Object.defineProperty(yr.prototype,"_key",{get:hr.oneOfGetter(xr=["key"]),set:hr.oneOfSetter(xr)}),yr.encode=function(br,Sr){return Sr||(Sr=fr.create()),br.from!=null&&Object.hasOwnProperty.call(br,"from")&&Sr.uint32(10).bytes(br.from),br.data!=null&&Object.hasOwnProperty.call(br,"data")&&Sr.uint32(18).bytes(br.data),br.seqno!=null&&Object.hasOwnProperty.call(br,"seqno")&&Sr.uint32(26).bytes(br.seqno),Sr.uint32(34).string(br.topic),br.signature!=null&&Object.hasOwnProperty.call(br,"signature")&&Sr.uint32(42).bytes(br.signature),br.key!=null&&Object.hasOwnProperty.call(br,"key")&&Sr.uint32(50).bytes(br.key),Sr},yr.decode=function(br,Sr){br instanceof dr||(br=dr.create(br));for(var vr=Sr===void 0?br.len:br.pos+Sr,Er=new pr.RPC.Message;br.pos<vr;){var Ar=br.uint32();switch(Ar>>>3){case 1:Er.from=br.bytes();break;case 2:Er.data=br.bytes();break;case 3:Er.seqno=br.bytes();break;case 4:Er.topic=br.string();break;case 5:Er.signature=br.bytes();break;case 6:Er.key=br.bytes();break;default:br.skipType(Ar&7);break}}if(!Er.hasOwnProperty("topic"))throw hr.ProtocolError("missing required 'topic'",{instance:Er});return Er},yr.fromObject=function(br){if(br instanceof pr.RPC.Message)return br;var Sr=new pr.RPC.Message;return br.from!=null&&(typeof br.from=="string"?hr.base64.decode(br.from,Sr.from=hr.newBuffer(hr.base64.length(br.from)),0):br.from.length&&(Sr.from=br.from)),br.data!=null&&(typeof br.data=="string"?hr.base64.decode(br.data,Sr.data=hr.newBuffer(hr.base64.length(br.data)),0):br.data.length&&(Sr.data=br.data)),br.seqno!=null&&(typeof br.seqno=="string"?hr.base64.decode(br.seqno,Sr.seqno=hr.newBuffer(hr.base64.length(br.seqno)),0):br.seqno.length&&(Sr.seqno=br.seqno)),br.topic!=null&&(Sr.topic=String(br.topic)),br.signature!=null&&(typeof br.signature=="string"?hr.base64.decode(br.signature,Sr.signature=hr.newBuffer(hr.base64.length(br.signature)),0):br.signature.length&&(Sr.signature=br.signature)),br.key!=null&&(typeof br.key=="string"?hr.base64.decode(br.key,Sr.key=hr.newBuffer(hr.base64.length(br.key)),0):br.key.length&&(Sr.key=br.key)),Sr},yr.toObject=function(br,Sr){Sr||(Sr={});var vr={};return Sr.defaults&&(vr.topic=""),br.from!=null&&br.hasOwnProperty("from")&&(vr.from=Sr.bytes===String?hr.base64.encode(br.from,0,br.from.length):Sr.bytes===Array?Array.prototype.slice.call(br.from):br.from,Sr.oneofs&&(vr._from="from")),br.data!=null&&br.hasOwnProperty("data")&&(vr.data=Sr.bytes===String?hr.base64.encode(br.data,0,br.data.length):Sr.bytes===Array?Array.prototype.slice.call(br.data):br.data,Sr.oneofs&&(vr._data="data")),br.seqno!=null&&br.hasOwnProperty("seqno")&&(vr.seqno=Sr.bytes===String?hr.base64.encode(br.seqno,0,br.seqno.length):Sr.bytes===Array?Array.prototype.slice.call(br.seqno):br.seqno,Sr.oneofs&&(vr._seqno="seqno")),br.topic!=null&&br.hasOwnProperty("topic")&&(vr.topic=br.topic),br.signature!=null&&br.hasOwnProperty("signature")&&(vr.signature=Sr.bytes===String?hr.base64.encode(br.signature,0,br.signature.length):Sr.bytes===Array?Array.prototype.slice.call(br.signature):br.signature,Sr.oneofs&&(vr._signature="signature")),br.key!=null&&br.hasOwnProperty("key")&&(vr.key=Sr.bytes===String?hr.base64.encode(br.key,0,br.key.length):Sr.bytes===Array?Array.prototype.slice.call(br.key):br.key,Sr.oneofs&&(vr._key="key")),vr},yr.prototype.toJSON=function(){return this.constructor.toObject(this,ar.util.toJSONOptions)},yr}(),mr.ControlMessage=function(){function yr(xr){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],xr)for(var wr=Object.keys(xr),br=0;br<wr.length;++br)xr[wr[br]]!=null&&(this[wr[br]]=xr[wr[br]])}return yr.prototype.ihave=hr.emptyArray,yr.prototype.iwant=hr.emptyArray,yr.prototype.graft=hr.emptyArray,yr.prototype.prune=hr.emptyArray,yr.encode=function(wr,br){if(br||(br=fr.create()),wr.ihave!=null&&wr.ihave.length)for(var Sr=0;Sr<wr.ihave.length;++Sr)pr.RPC.ControlIHave.encode(wr.ihave[Sr],br.uint32(10).fork()).ldelim();if(wr.iwant!=null&&wr.iwant.length)for(var Sr=0;Sr<wr.iwant.length;++Sr)pr.RPC.ControlIWant.encode(wr.iwant[Sr],br.uint32(18).fork()).ldelim();if(wr.graft!=null&&wr.graft.length)for(var Sr=0;Sr<wr.graft.length;++Sr)pr.RPC.ControlGraft.encode(wr.graft[Sr],br.uint32(26).fork()).ldelim();if(wr.prune!=null&&wr.prune.length)for(var Sr=0;Sr<wr.prune.length;++Sr)pr.RPC.ControlPrune.encode(wr.prune[Sr],br.uint32(34).fork()).ldelim();return br},yr.decode=function(wr,br){wr instanceof dr||(wr=dr.create(wr));for(var Sr=br===void 0?wr.len:wr.pos+br,vr=new pr.RPC.ControlMessage;wr.pos<Sr;){var Er=wr.uint32();switch(Er>>>3){case 1:vr.ihave&&vr.ihave.length||(vr.ihave=[]),vr.ihave.push(pr.RPC.ControlIHave.decode(wr,wr.uint32()));break;case 2:vr.iwant&&vr.iwant.length||(vr.iwant=[]),vr.iwant.push(pr.RPC.ControlIWant.decode(wr,wr.uint32()));break;case 3:vr.graft&&vr.graft.length||(vr.graft=[]),vr.graft.push(pr.RPC.ControlGraft.decode(wr,wr.uint32()));break;case 4:vr.prune&&vr.prune.length||(vr.prune=[]),vr.prune.push(pr.RPC.ControlPrune.decode(wr,wr.uint32()));break;default:wr.skipType(Er&7);break}}return vr},yr.fromObject=function(wr){if(wr instanceof pr.RPC.ControlMessage)return wr;var br=new pr.RPC.ControlMessage;if(wr.ihave){if(!Array.isArray(wr.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");br.ihave=[];for(var Sr=0;Sr<wr.ihave.length;++Sr){if(typeof wr.ihave[Sr]!="object")throw TypeError(".RPC.ControlMessage.ihave: object expected");br.ihave[Sr]=pr.RPC.ControlIHave.fromObject(wr.ihave[Sr])}}if(wr.iwant){if(!Array.isArray(wr.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");br.iwant=[];for(var Sr=0;Sr<wr.iwant.length;++Sr){if(typeof wr.iwant[Sr]!="object")throw TypeError(".RPC.ControlMessage.iwant: object expected");br.iwant[Sr]=pr.RPC.ControlIWant.fromObject(wr.iwant[Sr])}}if(wr.graft){if(!Array.isArray(wr.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");br.graft=[];for(var Sr=0;Sr<wr.graft.length;++Sr){if(typeof wr.graft[Sr]!="object")throw TypeError(".RPC.ControlMessage.graft: object expected");br.graft[Sr]=pr.RPC.ControlGraft.fromObject(wr.graft[Sr])}}if(wr.prune){if(!Array.isArray(wr.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");br.prune=[];for(var Sr=0;Sr<wr.prune.length;++Sr){if(typeof wr.prune[Sr]!="object")throw TypeError(".RPC.ControlMessage.prune: object expected");br.prune[Sr]=pr.RPC.ControlPrune.fromObject(wr.prune[Sr])}}return br},yr.toObject=function(wr,br){br||(br={});var Sr={};if((br.arrays||br.defaults)&&(Sr.ihave=[],Sr.iwant=[],Sr.graft=[],Sr.prune=[]),wr.ihave&&wr.ihave.length){Sr.ihave=[];for(var vr=0;vr<wr.ihave.length;++vr)Sr.ihave[vr]=pr.RPC.ControlIHave.toObject(wr.ihave[vr],br)}if(wr.iwant&&wr.iwant.length){Sr.iwant=[];for(var vr=0;vr<wr.iwant.length;++vr)Sr.iwant[vr]=pr.RPC.ControlIWant.toObject(wr.iwant[vr],br)}if(wr.graft&&wr.graft.length){Sr.graft=[];for(var vr=0;vr<wr.graft.length;++vr)Sr.graft[vr]=pr.RPC.ControlGraft.toObject(wr.graft[vr],br)}if(wr.prune&&wr.prune.length){Sr.prune=[];for(var vr=0;vr<wr.prune.length;++vr)Sr.prune[vr]=pr.RPC.ControlPrune.toObject(wr.prune[vr],br)}return Sr},yr.prototype.toJSON=function(){return this.constructor.toObject(this,ar.util.toJSONOptions)},yr}(),mr.ControlIHave=function(){function yr(wr){if(this.messageIDs=[],wr)for(var br=Object.keys(wr),Sr=0;Sr<br.length;++Sr)wr[br[Sr]]!=null&&(this[br[Sr]]=wr[br[Sr]])}yr.prototype.topicID=null,yr.prototype.messageIDs=hr.emptyArray;var xr;return Object.defineProperty(yr.prototype,"_topicID",{get:hr.oneOfGetter(xr=["topicID"]),set:hr.oneOfSetter(xr)}),yr.encode=function(br,Sr){if(Sr||(Sr=fr.create()),br.topicID!=null&&Object.hasOwnProperty.call(br,"topicID")&&Sr.uint32(10).string(br.topicID),br.messageIDs!=null&&br.messageIDs.length)for(var vr=0;vr<br.messageIDs.length;++vr)Sr.uint32(18).bytes(br.messageIDs[vr]);return Sr},yr.decode=function(br,Sr){br instanceof dr||(br=dr.create(br));for(var vr=Sr===void 0?br.len:br.pos+Sr,Er=new pr.RPC.ControlIHave;br.pos<vr;){var Ar=br.uint32();switch(Ar>>>3){case 1:Er.topicID=br.string();break;case 2:Er.messageIDs&&Er.messageIDs.length||(Er.messageIDs=[]),Er.messageIDs.push(br.bytes());break;default:br.skipType(Ar&7);break}}return Er},yr.fromObject=function(br){if(br instanceof pr.RPC.ControlIHave)return br;var Sr=new pr.RPC.ControlIHave;if(br.topicID!=null&&(Sr.topicID=String(br.topicID)),br.messageIDs){if(!Array.isArray(br.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");Sr.messageIDs=[];for(var vr=0;vr<br.messageIDs.length;++vr)typeof br.messageIDs[vr]=="string"?hr.base64.decode(br.messageIDs[vr],Sr.messageIDs[vr]=hr.newBuffer(hr.base64.length(br.messageIDs[vr])),0):br.messageIDs[vr].length&&(Sr.messageIDs[vr]=br.messageIDs[vr])}return Sr},yr.toObject=function(br,Sr){Sr||(Sr={});var vr={};if((Sr.arrays||Sr.defaults)&&(vr.messageIDs=[]),br.topicID!=null&&br.hasOwnProperty("topicID")&&(vr.topicID=br.topicID,Sr.oneofs&&(vr._topicID="topicID")),br.messageIDs&&br.messageIDs.length){vr.messageIDs=[];for(var Er=0;Er<br.messageIDs.length;++Er)vr.messageIDs[Er]=Sr.bytes===String?hr.base64.encode(br.messageIDs[Er],0,br.messageIDs[Er].length):Sr.bytes===Array?Array.prototype.slice.call(br.messageIDs[Er]):br.messageIDs[Er]}return vr},yr.prototype.toJSON=function(){return this.constructor.toObject(this,ar.util.toJSONOptions)},yr}(),mr.ControlIWant=function(){function yr(xr){if(this.messageIDs=[],xr)for(var wr=Object.keys(xr),br=0;br<wr.length;++br)xr[wr[br]]!=null&&(this[wr[br]]=xr[wr[br]])}return yr.prototype.messageIDs=hr.emptyArray,yr.encode=function(wr,br){if(br||(br=fr.create()),wr.messageIDs!=null&&wr.messageIDs.length)for(var Sr=0;Sr<wr.messageIDs.length;++Sr)br.uint32(10).bytes(wr.messageIDs[Sr]);return br},yr.decode=function(wr,br){wr instanceof dr||(wr=dr.create(wr));for(var Sr=br===void 0?wr.len:wr.pos+br,vr=new pr.RPC.ControlIWant;wr.pos<Sr;){var Er=wr.uint32();switch(Er>>>3){case 1:vr.messageIDs&&vr.messageIDs.length||(vr.messageIDs=[]),vr.messageIDs.push(wr.bytes());break;default:wr.skipType(Er&7);break}}return vr},yr.fromObject=function(wr){if(wr instanceof pr.RPC.ControlIWant)return wr;var br=new pr.RPC.ControlIWant;if(wr.messageIDs){if(!Array.isArray(wr.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");br.messageIDs=[];for(var Sr=0;Sr<wr.messageIDs.length;++Sr)typeof wr.messageIDs[Sr]=="string"?hr.base64.decode(wr.messageIDs[Sr],br.messageIDs[Sr]=hr.newBuffer(hr.base64.length(wr.messageIDs[Sr])),0):wr.messageIDs[Sr].length&&(br.messageIDs[Sr]=wr.messageIDs[Sr])}return br},yr.toObject=function(wr,br){br||(br={});var Sr={};if((br.arrays||br.defaults)&&(Sr.messageIDs=[]),wr.messageIDs&&wr.messageIDs.length){Sr.messageIDs=[];for(var vr=0;vr<wr.messageIDs.length;++vr)Sr.messageIDs[vr]=br.bytes===String?hr.base64.encode(wr.messageIDs[vr],0,wr.messageIDs[vr].length):br.bytes===Array?Array.prototype.slice.call(wr.messageIDs[vr]):wr.messageIDs[vr]}return Sr},yr.prototype.toJSON=function(){return this.constructor.toObject(this,ar.util.toJSONOptions)},yr}(),mr.ControlGraft=function(){function yr(wr){if(wr)for(var br=Object.keys(wr),Sr=0;Sr<br.length;++Sr)wr[br[Sr]]!=null&&(this[br[Sr]]=wr[br[Sr]])}yr.prototype.topicID=null;var xr;return Object.defineProperty(yr.prototype,"_topicID",{get:hr.oneOfGetter(xr=["topicID"]),set:hr.oneOfSetter(xr)}),yr.encode=function(br,Sr){return Sr||(Sr=fr.create()),br.topicID!=null&&Object.hasOwnProperty.call(br,"topicID")&&Sr.uint32(10).string(br.topicID),Sr},yr.decode=function(br,Sr){br instanceof dr||(br=dr.create(br));for(var vr=Sr===void 0?br.len:br.pos+Sr,Er=new pr.RPC.ControlGraft;br.pos<vr;){var Ar=br.uint32();switch(Ar>>>3){case 1:Er.topicID=br.string();break;default:br.skipType(Ar&7);break}}return Er},yr.fromObject=function(br){if(br instanceof pr.RPC.ControlGraft)return br;var Sr=new pr.RPC.ControlGraft;return br.topicID!=null&&(Sr.topicID=String(br.topicID)),Sr},yr.toObject=function(br,Sr){Sr||(Sr={});var vr={};return br.topicID!=null&&br.hasOwnProperty("topicID")&&(vr.topicID=br.topicID,Sr.oneofs&&(vr._topicID="topicID")),vr},yr.prototype.toJSON=function(){return this.constructor.toObject(this,ar.util.toJSONOptions)},yr}(),mr.ControlPrune=function(){function yr(wr){if(this.peers=[],wr)for(var br=Object.keys(wr),Sr=0;Sr<br.length;++Sr)wr[br[Sr]]!=null&&(this[br[Sr]]=wr[br[Sr]])}yr.prototype.topicID=null,yr.prototype.peers=hr.emptyArray,yr.prototype.backoff=null;var xr;return Object.defineProperty(yr.prototype,"_topicID",{get:hr.oneOfGetter(xr=["topicID"]),set:hr.oneOfSetter(xr)}),Object.defineProperty(yr.prototype,"_backoff",{get:hr.oneOfGetter(xr=["backoff"]),set:hr.oneOfSetter(xr)}),yr.encode=function(br,Sr){if(Sr||(Sr=fr.create()),br.topicID!=null&&Object.hasOwnProperty.call(br,"topicID")&&Sr.uint32(10).string(br.topicID),br.peers!=null&&br.peers.length)for(var vr=0;vr<br.peers.length;++vr)pr.RPC.PeerInfo.encode(br.peers[vr],Sr.uint32(18).fork()).ldelim();return br.backoff!=null&&Object.hasOwnProperty.call(br,"backoff")&&Sr.uint32(24).uint64(br.backoff),Sr},yr.decode=function(br,Sr){br instanceof dr||(br=dr.create(br));for(var vr=Sr===void 0?br.len:br.pos+Sr,Er=new pr.RPC.ControlPrune;br.pos<vr;){var Ar=br.uint32();switch(Ar>>>3){case 1:Er.topicID=br.string();break;case 2:Er.peers&&Er.peers.length||(Er.peers=[]),Er.peers.push(pr.RPC.PeerInfo.decode(br,br.uint32()));break;case 3:Er.backoff=br.uint64();break;default:br.skipType(Ar&7);break}}return Er},yr.fromObject=function(br){if(br instanceof pr.RPC.ControlPrune)return br;var Sr=new pr.RPC.ControlPrune;if(br.topicID!=null&&(Sr.topicID=String(br.topicID)),br.peers){if(!Array.isArray(br.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");Sr.peers=[];for(var vr=0;vr<br.peers.length;++vr){if(typeof br.peers[vr]!="object")throw TypeError(".RPC.ControlPrune.peers: object expected");Sr.peers[vr]=pr.RPC.PeerInfo.fromObject(br.peers[vr])}}return br.backoff!=null&&(hr.Long?(Sr.backoff=hr.Long.fromValue(br.backoff)).unsigned=!0:typeof br.backoff=="string"?Sr.backoff=parseInt(br.backoff,10):typeof br.backoff=="number"?Sr.backoff=br.backoff:typeof br.backoff=="object"&&(Sr.backoff=new hr.LongBits(br.backoff.low>>>0,br.backoff.high>>>0).toNumber(!0))),Sr},yr.toObject=function(br,Sr){Sr||(Sr={});var vr={};if((Sr.arrays||Sr.defaults)&&(vr.peers=[]),br.topicID!=null&&br.hasOwnProperty("topicID")&&(vr.topicID=br.topicID,Sr.oneofs&&(vr._topicID="topicID")),br.peers&&br.peers.length){vr.peers=[];for(var Er=0;Er<br.peers.length;++Er)vr.peers[Er]=pr.RPC.PeerInfo.toObject(br.peers[Er],Sr)}return br.backoff!=null&&br.hasOwnProperty("backoff")&&(typeof br.backoff=="number"?vr.backoff=Sr.longs===String?String(br.backoff):br.backoff:vr.backoff=Sr.longs===String?hr.Long.prototype.toString.call(br.backoff):Sr.longs===Number?new hr.LongBits(br.backoff.low>>>0,br.backoff.high>>>0).toNumber(!0):br.backoff,Sr.oneofs&&(vr._backoff="backoff")),vr},yr.prototype.toJSON=function(){return this.constructor.toObject(this,ar.util.toJSONOptions)},yr}(),mr.PeerInfo=function(){function yr(wr){if(wr)for(var br=Object.keys(wr),Sr=0;Sr<br.length;++Sr)wr[br[Sr]]!=null&&(this[br[Sr]]=wr[br[Sr]])}yr.prototype.peerID=null,yr.prototype.signedPeerRecord=null;var xr;return Object.defineProperty(yr.prototype,"_peerID",{get:hr.oneOfGetter(xr=["peerID"]),set:hr.oneOfSetter(xr)}),Object.defineProperty(yr.prototype,"_signedPeerRecord",{get:hr.oneOfGetter(xr=["signedPeerRecord"]),set:hr.oneOfSetter(xr)}),yr.encode=function(br,Sr){return Sr||(Sr=fr.create()),br.peerID!=null&&Object.hasOwnProperty.call(br,"peerID")&&Sr.uint32(10).bytes(br.peerID),br.signedPeerRecord!=null&&Object.hasOwnProperty.call(br,"signedPeerRecord")&&Sr.uint32(18).bytes(br.signedPeerRecord),Sr},yr.decode=function(br,Sr){br instanceof dr||(br=dr.create(br));for(var vr=Sr===void 0?br.len:br.pos+Sr,Er=new pr.RPC.PeerInfo;br.pos<vr;){var Ar=br.uint32();switch(Ar>>>3){case 1:Er.peerID=br.bytes();break;case 2:Er.signedPeerRecord=br.bytes();break;default:br.skipType(Ar&7);break}}return Er},yr.fromObject=function(br){if(br instanceof pr.RPC.PeerInfo)return br;var Sr=new pr.RPC.PeerInfo;return br.peerID!=null&&(typeof br.peerID=="string"?hr.base64.decode(br.peerID,Sr.peerID=hr.newBuffer(hr.base64.length(br.peerID)),0):br.peerID.length&&(Sr.peerID=br.peerID)),br.signedPeerRecord!=null&&(typeof br.signedPeerRecord=="string"?hr.base64.decode(br.signedPeerRecord,Sr.signedPeerRecord=hr.newBuffer(hr.base64.length(br.signedPeerRecord)),0):br.signedPeerRecord.length&&(Sr.signedPeerRecord=br.signedPeerRecord)),Sr},yr.toObject=function(br,Sr){Sr||(Sr={});var vr={};return br.peerID!=null&&br.hasOwnProperty("peerID")&&(vr.peerID=Sr.bytes===String?hr.base64.encode(br.peerID,0,br.peerID.length):Sr.bytes===Array?Array.prototype.slice.call(br.peerID):br.peerID,Sr.oneofs&&(vr._peerID="peerID")),br.signedPeerRecord!=null&&br.hasOwnProperty("signedPeerRecord")&&(vr.signedPeerRecord=Sr.bytes===String?hr.base64.encode(br.signedPeerRecord,0,br.signedPeerRecord.length):Sr.bytes===Array?Array.prototype.slice.call(br.signedPeerRecord):br.signedPeerRecord,Sr.oneofs&&(vr._signedPeerRecord="signedPeerRecord")),vr},yr.prototype.toJSON=function(){return this.constructor.toObject(this,ar.util.toJSONOptions)},yr}(),mr}(),pr})})(rpc);var rpcExports=rpc.exports;const cjs=getDefaultExportFromCjs(rpcExports),{RPC}=cjs;class MessageCache{gossip;msgs=new Map;msgIdToStrFn;history=[];notValidatedCount=0;constructor(ar,dr,fr){this.gossip=ar,this.msgIdToStrFn=fr;for(let hr=0;hr<dr;hr++)this.history[hr]=[]}get size(){return this.msgs.size}put(ar,dr,fr=!1){const{msgIdStr:hr}=ar;return this.msgs.has(hr)?!1:(this.msgs.set(hr,{message:dr,validated:fr,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...ar,topic:dr.topic}),fr||this.notValidatedCount++,!0)}observeDuplicate(ar,dr){const fr=this.msgs.get(ar);fr!=null&&!fr.validated&&fr.originatingPeers.add(dr)}get(ar){return this.msgs.get(this.msgIdToStrFn(ar))?.message}getWithIWantCount(ar,dr){const fr=this.msgs.get(ar);if(fr==null)return null;const hr=(fr.iwantCounts.get(dr)??0)+1;return fr.iwantCounts.set(dr,hr),{msg:fr.message,count:hr}}getGossipIDs(ar){const dr=new Map;for(let fr=0;fr<this.gossip;fr++)this.history[fr].forEach(hr=>{if((this.msgs.get(hr.msgIdStr)?.validated??!1)&&ar.has(hr.topic)){let mr=dr.get(hr.topic);mr==null&&(mr=[],dr.set(hr.topic,mr)),mr.push(hr.msgId)}});return dr}validate(ar){const dr=this.msgs.get(ar);if(dr==null)return null;dr.validated||this.notValidatedCount--;const{message:fr,originatingPeers:hr}=dr;return dr.validated=!0,dr.originatingPeers=new Set,{message:fr,originatingPeers:hr}}shift(){this.history[this.history.length-1].forEach(dr=>{const fr=this.msgs.get(dr.msgIdStr);fr!=null&&(this.msgs.delete(dr.msgIdStr),fr.validated||this.notValidatedCount--)}),this.history.pop(),this.history.unshift([])}remove(ar){const dr=this.msgs.get(ar);return dr==null?null:(this.msgs.delete(ar),dr)}}var SignaturePolicy;(function(cr){cr.StrictSign="StrictSign",cr.StrictNoSign="StrictNoSign"})(SignaturePolicy||(SignaturePolicy={}));var PublishConfigType;(function(cr){cr[cr.Signing=0]="Signing",cr[cr.Anonymous=1]="Anonymous"})(PublishConfigType||(PublishConfigType={}));var RejectReason;(function(cr){cr.Error="error",cr.Ignore="ignore",cr.Reject="reject",cr.Blacklisted="blacklisted"})(RejectReason||(RejectReason={}));var ValidateError;(function(cr){cr.InvalidSignature="invalid_signature",cr.InvalidSeqno="invalid_seqno",cr.InvalidPeerId="invalid_peerid",cr.SignaturePresent="signature_present",cr.SeqnoPresent="seqno_present",cr.FromPresent="from_present",cr.TransformFailed="transform_failed"})(ValidateError||(ValidateError={}));var MessageStatus;(function(cr){cr.duplicate="duplicate",cr.invalid="invalid",cr.valid="valid"})(MessageStatus||(MessageStatus={}));function rejectReasonFromAcceptance(cr){switch(cr){case TopicValidatorResult$1.Ignore:return RejectReason.Ignore;case TopicValidatorResult$1.Reject:return RejectReason.Reject;default:throw new Error("Unreachable")}}var MessageSource;(function(cr){cr.forward="forward",cr.publish="publish"})(MessageSource||(MessageSource={}));var InclusionReason;(function(cr){cr.Fanout="fanout",cr.Random="random",cr.Subscribed="subscribed",cr.Outbound="outbound",cr.NotEnough="not_enough",cr.Opportunistic="opportunistic"})(InclusionReason||(InclusionReason={}));var ChurnReason;(function(cr){cr.Dc="disconnected",cr.BadScore="bad_score",cr.Prune="prune",cr.Excess="excess"})(ChurnReason||(ChurnReason={}));var ScorePenalty;(function(cr){cr.GraftBackoff="graft_backoff",cr.BrokenPromise="broken_promise",cr.MessageDeficit="message_deficit",cr.IPColocation="IP_colocation"})(ScorePenalty||(ScorePenalty={}));var IHaveIgnoreReason;(function(cr){cr.LowScore="low_score",cr.MaxIhave="max_ihave",cr.MaxIasked="max_iasked"})(IHaveIgnoreReason||(IHaveIgnoreReason={}));var ScoreThreshold;(function(cr){cr.graylist="graylist",cr.publish="publish",cr.gossip="gossip",cr.mesh="mesh"})(ScoreThreshold||(ScoreThreshold={}));function getMetrics(cr,ar,dr){return{protocolsEnabled:cr.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:cr.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:cr.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:cr.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEventsFanout:cr.gauge({name:"gossipsub_mesh_peer_inclusion_events_fanout_total",help:"Number of times we include peers in a topic mesh for fanout reasons",labelNames:["topic"]}),meshPeerInclusionEventsRandom:cr.gauge({name:"gossipsub_mesh_peer_inclusion_events_random_total",help:"Number of times we include peers in a topic mesh for random reasons",labelNames:["topic"]}),meshPeerInclusionEventsSubscribed:cr.gauge({name:"gossipsub_mesh_peer_inclusion_events_subscribed_total",help:"Number of times we include peers in a topic mesh for subscribed reasons",labelNames:["topic"]}),meshPeerInclusionEventsOutbound:cr.gauge({name:"gossipsub_mesh_peer_inclusion_events_outbound_total",help:"Number of times we include peers in a topic mesh for outbound reasons",labelNames:["topic"]}),meshPeerInclusionEventsNotEnough:cr.gauge({name:"gossipsub_mesh_peer_inclusion_events_not_enough_total",help:"Number of times we include peers in a topic mesh for not_enough reasons",labelNames:["topic"]}),meshPeerInclusionEventsOpportunistic:cr.gauge({name:"gossipsub_mesh_peer_inclusion_events_opportunistic_total",help:"Number of times we include peers in a topic mesh for opportunistic reasons",labelNames:["topic"]}),meshPeerInclusionEventsUnknown:cr.gauge({name:"gossipsub_mesh_peer_inclusion_events_unknown_total",help:"Number of times we include peers in a topic mesh for unknown reasons",labelNames:["topic"]}),meshPeerChurnEventsDisconnected:cr.gauge({name:"gossipsub_peer_churn_events_disconnected_total",help:"Number of times we remove peers in a topic mesh for disconnected reasons",labelNames:["topic"]}),meshPeerChurnEventsBadScore:cr.gauge({name:"gossipsub_peer_churn_events_bad_score_total",help:"Number of times we remove peers in a topic mesh for bad_score reasons",labelNames:["topic"]}),meshPeerChurnEventsPrune:cr.gauge({name:"gossipsub_peer_churn_events_prune_total",help:"Number of times we remove peers in a topic mesh for prune reasons",labelNames:["topic"]}),meshPeerChurnEventsExcess:cr.gauge({name:"gossipsub_peer_churn_events_excess_total",help:"Number of times we remove peers in a topic mesh for excess reasons",labelNames:["topic"]}),meshPeerChurnEventsUnknown:cr.gauge({name:"gossipsub_peer_churn_events_unknown_total",help:"Number of times we remove peers in a topic mesh for unknown reasons",labelNames:["topic"]}),peersPerProtocol:cr.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:cr.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:cr.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),acceptedMessagesTotal:cr.gauge({name:"gossipsub_accepted_messages_total",help:"Total accepted messages for each topic",labelNames:["topic"]}),ignoredMessagesTotal:cr.gauge({name:"gossipsub_ignored_messages_total",help:"Total ignored messages for each topic",labelNames:["topic"]}),rejectedMessagesTotal:cr.gauge({name:"gossipsub_rejected_messages_total",help:"Total rejected messages for each topic",labelNames:["topic"]}),unknownValidationResultsTotal:cr.gauge({name:"gossipsub_unknown_validation_results_total",help:"Total unknown validation results for each topic",labelNames:["topic"]}),asyncValidationMcacheHit:cr.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),asyncValidationDelayFromFirstSeenSec:cr.histogram({name:"gossipsub_async_validation_delay_from_first_seen",help:"Async validation report delay from first seen in second",buckets:[.01,.03,.1,.3,1,3,10]}),asyncValidationUnknownFirstSeen:cr.gauge({name:"gossipsub_async_validation_unknown_first_seen_count_total",help:"Async validation report unknown first seen value for message"}),peerReadStreamError:cr.gauge({name:"gossipsub_peer_read_stream_err_count_total",help:"Peer read stream error"}),rpcRecvBytes:cr.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:cr.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:cr.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:cr.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:cr.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:cr.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:cr.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:cr.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:cr.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcDataError:cr.gauge({name:"gossipsub_rpc_data_err_count_total",help:"RPC data error"}),rpcRecvError:cr.gauge({name:"gossipsub_rpc_recv_err_count_total",help:"RPC recv error"}),rpcRecvNotAccepted:cr.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:cr.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:cr.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:cr.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:cr.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:cr.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:cr.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:cr.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:cr.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:cr.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:cr.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeersByTopic:cr.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),directPeersPublishedTotal:cr.gauge({name:"gossipsub_direct_peers_published_total",help:"Total direct peers that we publish a msg to",labelNames:["topic"]}),floodsubPeersPublishedTotal:cr.gauge({name:"gossipsub_floodsub_peers_published_total",help:"Total floodsub peers that we publish a msg to",labelNames:["topic"]}),meshPeersPublishedTotal:cr.gauge({name:"gossipsub_mesh_peers_published_total",help:"Total mesh peers that we publish a msg to",labelNames:["topic"]}),fanoutPeersPublishedTotal:cr.gauge({name:"gossipsub_fanout_peers_published_total",help:"Total fanout peers that we publish a msg to",labelNames:["topic"]}),msgPublishBytes:cr.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgPublishTime:cr.histogram({name:"gossipsub_msg_publish_seconds",help:"Total time in seconds to publish a message",buckets:[.001,.002,.005,.01,.1,.5,1],labelNames:["topic"]}),msgForwardCount:cr.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:cr.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:cr.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedError:cr.gauge({name:"gossipsub_msg_received_error_total",help:"Total count of recv msgs error",labelNames:["topic"]}),prevalidationInvalidTotal:cr.gauge({name:"gossipsub_pre_validation_invalid_total",help:"Total count of invalid messages received",labelNames:["topic"]}),prevalidationValidTotal:cr.gauge({name:"gossipsub_pre_validation_valid_total",help:"Total count of valid messages received",labelNames:["topic"]}),prevalidationDuplicateTotal:cr.gauge({name:"gossipsub_pre_validation_duplicate_total",help:"Total count of duplicate messages received",labelNames:["topic"]}),prevalidationUnknownTotal:cr.gauge({name:"gossipsub_pre_validation_unknown_status_total",help:"Total count of unknown_status messages received",labelNames:["topic"]}),msgReceivedInvalid:cr.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["error"]}),msgReceivedInvalidByTopic:cr.gauge({name:"gossipsub_msg_received_invalid_by_topic_total",help:"Tracks specific invalid message by topic",labelNames:["topic"]}),duplicateMsgDeliveryDelay:cr.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*dr.maxMeshMessageDeliveriesWindowSec,.5*dr.maxMeshMessageDeliveriesWindowSec,Number(dr.maxMeshMessageDeliveriesWindowSec),2*dr.maxMeshMessageDeliveriesWindowSec,4*dr.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:cr.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),duplicateMsgIgnored:cr.gauge({name:"gossisub_ignored_published_duplicate_msgs_total",help:"Total count of published duplicate message ignored by topic",labelNames:["topic"]}),scoreFnCalls:cr.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:cr.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:cr.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:cr.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:cr.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores"}),scoreWeights:cr.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:cr.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:cr.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:cr.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*dr.behaviourPenaltyThreshold,.5*dr.behaviourPenaltyThreshold,Number(dr.behaviourPenaltyThreshold),2*dr.behaviourPenaltyThreshold,4*dr.behaviourPenaltyThreshold]}),ihaveRcvIgnored:cr.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:cr.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:cr.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:cr.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:cr.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:cr.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:cr.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedFromDuplicate:cr.gauge({name:"gossipsub_iwant_promise_resolved_from_duplicate_total",help:"Total count of resolved IWANT promises from duplicate messages"}),iwantPromiseResolvedPeers:cr.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:cr.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantMessagePruned:cr.gauge({name:"gossipsub_iwant_message_pruned",help:"Total count of pruned IWANT messages"}),iwantPromiseDeliveryTime:cr.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*dr.gossipPromiseExpireSec,Number(dr.gossipPromiseExpireSec),2*dr.gossipPromiseExpireSec,4*dr.gossipPromiseExpireSec]}),iwantPromiseUntracked:cr.gauge({name:"gossip_iwant_promise_untracked",help:"Total count of untracked IWANT promise"}),connectedPeersBackoffSec:cr.histogram({name:"gossipsub_connected_peers_backoff_seconds",help:"Backoff time in seconds",buckets:[1,2,4,10,20,60,120]}),cacheSize:cr.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:cr.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),mcacheNotValidatedCount:cr.gauge({name:"gossipsub_mcache_not_validated_count",help:"Current mcache msg count not validated"}),fastMsgIdCacheCollision:cr.gauge({name:"gossipsub_fastmsgid_cache_collision_total",help:"Total count of key collisions on fastmsgid cache put"}),newConnectionCount:cr.gauge({name:"gossipsub_new_connection_total",help:"Total new connection by status",labelNames:["status"]}),topicStrToLabel:ar,toTopic(fr){return this.topicStrToLabel.get(fr)??fr},onJoin(fr){this.topicSubscriptionStatus.set({topicStr:fr},1),this.meshPeerCounts.set({topicStr:fr},0)},onLeave(fr){this.topicSubscriptionStatus.set({topicStr:fr},0),this.meshPeerCounts.set({topicStr:fr},0)},onAddToMesh(fr,hr,pr){const mr=this.toTopic(fr);switch(hr){case InclusionReason.Fanout:this.meshPeerInclusionEventsFanout.inc({topic:mr},pr);break;case InclusionReason.Random:this.meshPeerInclusionEventsRandom.inc({topic:mr},pr);break;case InclusionReason.Subscribed:this.meshPeerInclusionEventsSubscribed.inc({topic:mr},pr);break;case InclusionReason.Outbound:this.meshPeerInclusionEventsOutbound.inc({topic:mr},pr);break;case InclusionReason.NotEnough:this.meshPeerInclusionEventsNotEnough.inc({topic:mr},pr);break;case InclusionReason.Opportunistic:this.meshPeerInclusionEventsOpportunistic.inc({topic:mr},pr);break;default:this.meshPeerInclusionEventsUnknown.inc({topic:mr},pr);break}},onRemoveFromMesh(fr,hr,pr){const mr=this.toTopic(fr);switch(hr){case ChurnReason.Dc:this.meshPeerChurnEventsDisconnected.inc({topic:mr},pr);break;case ChurnReason.BadScore:this.meshPeerChurnEventsBadScore.inc({topic:mr},pr);break;case ChurnReason.Prune:this.meshPeerChurnEventsPrune.inc({topic:mr},pr);break;case ChurnReason.Excess:this.meshPeerChurnEventsExcess.inc({topic:mr},pr);break;default:this.meshPeerChurnEventsUnknown.inc({topic:mr},pr);break}},onReportValidation(fr,hr,pr){if(this.asyncValidationMcacheHit.inc({hit:fr!=null?"hit":"miss"}),fr!=null){const mr=this.toTopic(fr.message.topic);switch(hr){case TopicValidatorResult$1.Accept:this.acceptedMessagesTotal.inc({topic:mr});break;case TopicValidatorResult$1.Ignore:this.ignoredMessagesTotal.inc({topic:mr});break;case TopicValidatorResult$1.Reject:this.rejectedMessagesTotal.inc({topic:mr});break;default:this.unknownValidationResultsTotal.inc({topic:mr});break}}pr!=null?this.asyncValidationDelayFromFirstSeenSec.observe((Date.now()-pr)/1e3):this.asyncValidationUnknownFirstSeen.inc()},onScorePenalty(fr){this.scoringPenalties.inc({penalty:fr},1)},onIhaveRcv(fr,hr,pr){const mr=this.toTopic(fr);this.ihaveRcvMsgids.inc({topic:mr},hr),this.ihaveRcvNotSeenMsgids.inc({topic:mr},pr)},onIwantRcv(fr,hr){for(const[pr,mr]of fr){const gr=this.toTopic(pr);this.iwantRcvMsgids.inc({topic:gr},mr)}this.iwantRcvDonthaveMsgids.inc(hr)},onForwardMsg(fr,hr){const pr=this.toTopic(fr);this.msgForwardCount.inc({topic:pr},1),this.msgForwardPeers.inc({topic:pr},hr)},onPublishMsg(fr,hr,pr,mr,gr){const yr=this.toTopic(fr);this.msgPublishCount.inc({topic:yr},1),this.msgPublishBytes.inc({topic:yr},pr*mr),this.msgPublishPeersByTopic.inc({topic:yr},pr),this.directPeersPublishedTotal.inc({topic:yr},hr.direct),this.floodsubPeersPublishedTotal.inc({topic:yr},hr.floodsub),this.meshPeersPublishedTotal.inc({topic:yr},hr.mesh),this.fanoutPeersPublishedTotal.inc({topic:yr},hr.fanout),this.msgPublishTime.observe({topic:yr},gr/1e3)},onMsgRecvPreValidation(fr){const hr=this.toTopic(fr);this.msgReceivedPreValidation.inc({topic:hr},1)},onMsgRecvError(fr){const hr=this.toTopic(fr);this.msgReceivedError.inc({topic:hr},1)},onPrevalidationResult(fr,hr){const pr=this.toTopic(fr);switch(hr){case MessageStatus.duplicate:this.prevalidationDuplicateTotal.inc({topic:pr});break;case MessageStatus.invalid:this.prevalidationInvalidTotal.inc({topic:pr});break;case MessageStatus.valid:this.prevalidationValidTotal.inc({topic:pr});break;default:this.prevalidationUnknownTotal.inc({topic:pr});break}},onMsgRecvInvalid(fr,hr){const pr=this.toTopic(fr),mr=hr.reason===RejectReason.Error?hr.error:hr.reason;this.msgReceivedInvalid.inc({error:mr},1),this.msgReceivedInvalidByTopic.inc({topic:pr},1)},onDuplicateMsgDelivery(fr,hr,pr){const mr=this.toTopic(fr);this.duplicateMsgDeliveryDelay.observe({topic:mr},hr/1e3),pr&&this.duplicateMsgLateDelivery.inc({topic:mr},1)},onPublishDuplicateMsg(fr){const hr=this.toTopic(fr);this.duplicateMsgIgnored.inc({topic:hr},1)},onPeerReadStreamError(){this.peerReadStreamError.inc(1)},onRpcRecvError(){this.rpcRecvError.inc(1)},onRpcDataError(){this.rpcDataError.inc(1)},onRpcRecv(fr,hr){this.rpcRecvBytes.inc(hr),this.rpcRecvCount.inc(1),fr.subscriptions!=null&&this.rpcRecvSubscription.inc(fr.subscriptions.length),fr.messages!=null&&this.rpcRecvMessage.inc(fr.messages.length),fr.control!=null&&(this.rpcRecvControl.inc(1),fr.control.ihave!=null&&this.rpcRecvIHave.inc(fr.control.ihave.length),fr.control.iwant!=null&&this.rpcRecvIWant.inc(fr.control.iwant.length),fr.control.graft!=null&&this.rpcRecvGraft.inc(fr.control.graft.length),fr.control.prune!=null&&this.rpcRecvPrune.inc(fr.control.prune.length))},onRpcSent(fr,hr){if(this.rpcSentBytes.inc(hr),this.rpcSentCount.inc(1),fr.subscriptions!=null&&this.rpcSentSubscription.inc(fr.subscriptions.length),fr.messages!=null&&this.rpcSentMessage.inc(fr.messages.length),fr.control!=null){const pr=fr.control.ihave?.length??0,mr=fr.control.iwant?.length??0,gr=fr.control.graft?.length??0,yr=fr.control.prune?.length??0;pr>0&&this.rpcSentIHave.inc(pr),mr>0&&this.rpcSentIWant.inc(mr),gr>0&&this.rpcSentGraft.inc(gr),yr>0&&this.rpcSentPrune.inc(yr),(pr>0||mr>0||gr>0||yr>0)&&this.rpcSentControl.inc(1)}},registerScores(fr,hr){let pr=0,mr=0,gr=0,yr=0;for(const xr of fr)xr>=hr.graylistThreshold&&pr++,xr>=hr.publishThreshold&&mr++,xr>=hr.gossipThreshold&&gr++,xr>=0&&yr++;this.peersByScoreThreshold.set({threshold:ScoreThreshold.graylist},pr),this.peersByScoreThreshold.set({threshold:ScoreThreshold.publish},mr),this.peersByScoreThreshold.set({threshold:ScoreThreshold.gossip},gr),this.peersByScoreThreshold.set({threshold:ScoreThreshold.mesh},yr),this.score.set(fr)},registerScoreWeights(fr){for(const[hr,pr]of fr.byTopic)this.scoreWeights.set({topic:hr,p:"p1"},pr.p1w),this.scoreWeights.set({topic:hr,p:"p2"},pr.p2w),this.scoreWeights.set({topic:hr,p:"p3"},pr.p3w),this.scoreWeights.set({topic:hr,p:"p3b"},pr.p3bw),this.scoreWeights.set({topic:hr,p:"p4"},pr.p4w);this.scoreWeights.set({p:"p5"},fr.p5w),this.scoreWeights.set({p:"p6"},fr.p6w),this.scoreWeights.set({p:"p7"},fr.p7w)},registerScorePerMesh(fr,hr){const pr=new Map;fr.forEach((mr,gr)=>{const yr=this.topicStrToLabel.get(gr)??"unknown";let xr=pr.get(yr);xr==null&&(xr=new Set,pr.set(yr,xr)),mr.forEach(wr=>xr?.add(wr))});for(const[mr,gr]of pr){const yr=[];gr.forEach(xr=>{yr.push(hr.get(xr)??0)}),this.scorePerMesh.set({topic:mr},yr)}}}}const ERR_INVALID_PEER_SCORE_PARAMS="ERR_INVALID_PEER_SCORE_PARAMS",defaultPeerScoreParams={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:3600*1e3},defaultTopicScoreParams={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function createPeerScoreParams(cr={}){return{...defaultPeerScoreParams,...cr,topics:cr.topics!=null?Object.entries(cr.topics).reduce((ar,[dr,fr])=>(ar[dr]=createTopicScoreParams(fr),ar),{}):{}}}function createTopicScoreParams(cr={}){return{...defaultTopicScoreParams,...cr}}function validatePeerScoreParams(cr){for(const[ar,dr]of Object.entries(cr.topics))try{validateTopicScoreParams(dr)}catch(fr){throw new CodeError$3(`invalid score parameters for topic ${ar}: ${fr.message}`,ERR_INVALID_PEER_SCORE_PARAMS)}if(cr.topicScoreCap<0)throw new CodeError$3("invalid topic score cap; must be positive (or 0 for no cap)",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.appSpecificScore===null||cr.appSpecificScore===void 0)throw new CodeError$3("missing application specific score function",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.IPColocationFactorWeight>0)throw new CodeError$3("invalid IPColocationFactorWeight; must be negative (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.IPColocationFactorWeight!==0&&cr.IPColocationFactorThreshold<1)throw new CodeError$3("invalid IPColocationFactorThreshold; must be at least 1",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.behaviourPenaltyWeight>0)throw new CodeError$3("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.behaviourPenaltyWeight!==0&&(cr.behaviourPenaltyDecay<=0||cr.behaviourPenaltyDecay>=1))throw new CodeError$3("invalid BehaviourPenaltyDecay; must be between 0 and 1",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.decayInterval<1e3)throw new CodeError$3("invalid DecayInterval; must be at least 1s",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.decayToZero<=0||cr.decayToZero>=1)throw new CodeError$3("invalid DecayToZero; must be between 0 and 1",ERR_INVALID_PEER_SCORE_PARAMS)}function validateTopicScoreParams(cr){if(cr.topicWeight<0)throw new CodeError$3("invalid topic weight; must be >= 0",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.timeInMeshQuantum===0)throw new CodeError$3("invalid TimeInMeshQuantum; must be non zero",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.timeInMeshWeight<0)throw new CodeError$3("invalid TimeInMeshWeight; must be positive (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.timeInMeshWeight!==0&&cr.timeInMeshQuantum<=0)throw new CodeError$3("invalid TimeInMeshQuantum; must be positive",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.timeInMeshWeight!==0&&cr.timeInMeshCap<=0)throw new CodeError$3("invalid TimeInMeshCap; must be positive",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.firstMessageDeliveriesWeight<0)throw new CodeError$3("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.firstMessageDeliveriesWeight!==0&&(cr.firstMessageDeliveriesDecay<=0||cr.firstMessageDeliveriesDecay>=1))throw new CodeError$3("invalid FirstMessageDeliveriesDecay; must be between 0 and 1",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.firstMessageDeliveriesWeight!==0&&cr.firstMessageDeliveriesCap<=0)throw new CodeError$3("invalid FirstMessageDeliveriesCap; must be positive",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.meshMessageDeliveriesWeight>0)throw new CodeError$3("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.meshMessageDeliveriesWeight!==0&&(cr.meshMessageDeliveriesDecay<=0||cr.meshMessageDeliveriesDecay>=1))throw new CodeError$3("invalid MeshMessageDeliveriesDecay; must be between 0 and 1",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.meshMessageDeliveriesWeight!==0&&cr.meshMessageDeliveriesCap<=0)throw new CodeError$3("invalid MeshMessageDeliveriesCap; must be positive",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.meshMessageDeliveriesWeight!==0&&cr.meshMessageDeliveriesThreshold<=0)throw new CodeError$3("invalid MeshMessageDeliveriesThreshold; must be positive",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.meshMessageDeliveriesWindow<0)throw new CodeError$3("invalid MeshMessageDeliveriesWindow; must be non-negative",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.meshMessageDeliveriesWeight!==0&&cr.meshMessageDeliveriesActivation<1e3)throw new CodeError$3("invalid MeshMessageDeliveriesActivation; must be at least 1s",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.meshFailurePenaltyWeight>0)throw new CodeError$3("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.meshFailurePenaltyWeight!==0&&(cr.meshFailurePenaltyDecay<=0||cr.meshFailurePenaltyDecay>=1))throw new CodeError$3("invalid MeshFailurePenaltyDecay; must be between 0 and 1",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.invalidMessageDeliveriesWeight>0)throw new CodeError$3("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(cr.invalidMessageDeliveriesDecay<=0||cr.invalidMessageDeliveriesDecay>=1)throw new CodeError$3("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1",ERR_INVALID_PEER_SCORE_PARAMS)}const defaultPeerScoreThresholds={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function createPeerScoreThresholds(cr={}){return{...defaultPeerScoreThresholds,...cr}}function removeItemsFromSet(cr,ar,dr=()=>!0){const fr=new Set;if(ar<=0)return fr;for(const hr of cr){if(fr.size>=ar)break;dr(hr)&&(fr.add(hr),cr.delete(hr))}return fr}function removeFirstNItemsFromSet(cr,ar){return removeItemsFromSet(cr,ar,()=>!0)}class MapDef extends Map{getDefault;constructor(ar){super(),this.getDefault=ar}getOrDefault(ar){let dr=super.get(ar);return dr===void 0&&(dr=this.getDefault(),this.set(ar,dr)),dr}}function computeScore(cr,ar,dr,fr){let hr=0;Object.entries(ar.topics).forEach(([mr,gr])=>{const yr=dr.topics[mr];if(yr===void 0)return;let xr=0;if(gr.inMesh){let vr=gr.meshTime/yr.timeInMeshQuantum;vr>yr.timeInMeshCap&&(vr=yr.timeInMeshCap),xr+=vr*yr.timeInMeshWeight}let wr=gr.firstMessageDeliveries;if(wr>yr.firstMessageDeliveriesCap&&(wr=yr.firstMessageDeliveriesCap),xr+=wr*yr.firstMessageDeliveriesWeight,gr.meshMessageDeliveriesActive&&gr.meshMessageDeliveries<yr.meshMessageDeliveriesThreshold){const vr=yr.meshMessageDeliveriesThreshold-gr.meshMessageDeliveries,Er=vr*vr;xr+=Er*yr.meshMessageDeliveriesWeight}const br=gr.meshFailurePenalty;xr+=br*yr.meshFailurePenaltyWeight;const Sr=gr.invalidMessageDeliveries*gr.invalidMessageDeliveries;xr+=Sr*yr.invalidMessageDeliveriesWeight,hr+=xr*yr.topicWeight}),dr.topicScoreCap>0&&hr>dr.topicScoreCap&&(hr=dr.topicScoreCap);const pr=dr.appSpecificScore(cr);if(hr+=pr*dr.appSpecificWeight,ar.knownIPs.forEach(mr=>{if(dr.IPColocationFactorWhitelist.has(mr))return;const gr=fr.get(mr),yr=gr!=null?gr.size:0;if(yr>dr.IPColocationFactorThreshold){const xr=yr-dr.IPColocationFactorThreshold,wr=xr*xr;hr+=wr*dr.IPColocationFactorWeight}}),ar.behaviourPenalty>dr.behaviourPenaltyThreshold){const mr=ar.behaviourPenalty-dr.behaviourPenaltyThreshold,gr=mr*mr;hr+=gr*dr.behaviourPenaltyWeight}return hr}function Denque(cr,dr){var dr=dr||{};this._capacity=dr.capacity,this._head=0,this._tail=0,Array.isArray(cr)?this._fromArray(cr):(this._capacityMask=3,this._list=new Array(4))}Denque.prototype.peekAt=function cr(ar){var dr=ar;if(dr===(dr|0)){var fr=this.size();if(!(dr>=fr||dr<-fr))return dr<0&&(dr+=fr),dr=this._head+dr&this._capacityMask,this._list[dr]}};Denque.prototype.get=function cr(ar){return this.peekAt(ar)};Denque.prototype.peek=function cr(){if(this._head!==this._tail)return this._list[this._head]};Denque.prototype.peekFront=function cr(){return this.peek()};Denque.prototype.peekBack=function cr(){return this.peekAt(-1)};Object.defineProperty(Denque.prototype,"length",{get:function cr(){return this.size()}});Denque.prototype.size=function cr(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Denque.prototype.unshift=function cr(ar){if(arguments.length===0)return this.size();var dr=this._list.length;return this._head=this._head-1+dr&this._capacityMask,this._list[this._head]=ar,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Denque.prototype.shift=function cr(){var ar=this._head;if(ar!==this._tail){var dr=this._list[ar];return this._list[ar]=void 0,this._head=ar+1&this._capacityMask,ar<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),dr}};Denque.prototype.push=function cr(ar){if(arguments.length===0)return this.size();var dr=this._tail;return this._list[dr]=ar,this._tail=dr+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Denque.prototype.pop=function cr(){var ar=this._tail;if(ar!==this._head){var dr=this._list.length;this._tail=ar-1+dr&this._capacityMask;var fr=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&ar>1e4&&ar<=dr>>>2&&this._shrinkArray(),fr}};Denque.prototype.removeOne=function cr(ar){var dr=ar;if(dr===(dr|0)&&this._head!==this._tail){var fr=this.size(),hr=this._list.length;if(!(dr>=fr||dr<-fr)){dr<0&&(dr+=fr),dr=this._head+dr&this._capacityMask;var pr=this._list[dr],mr;if(ar<fr/2){for(mr=ar;mr>0;mr--)this._list[dr]=this._list[dr=dr-1+hr&this._capacityMask];this._list[dr]=void 0,this._head=this._head+1+hr&this._capacityMask}else{for(mr=fr-1-ar;mr>0;mr--)this._list[dr]=this._list[dr=dr+1+hr&this._capacityMask];this._list[dr]=void 0,this._tail=this._tail-1+hr&this._capacityMask}return pr}}};Denque.prototype.remove=function cr(ar,dr){var fr=ar,hr,pr=dr;if(fr===(fr|0)&&this._head!==this._tail){var mr=this.size(),gr=this._list.length;if(!(fr>=mr||fr<-mr||dr<1)){if(fr<0&&(fr+=mr),dr===1||!dr)return hr=new Array(1),hr[0]=this.removeOne(fr),hr;if(fr===0&&fr+dr>=mr)return hr=this.toArray(),this.clear(),hr;fr+dr>mr&&(dr=mr-fr);var yr;for(hr=new Array(dr),yr=0;yr<dr;yr++)hr[yr]=this._list[this._head+fr+yr&this._capacityMask];if(fr=this._head+fr&this._capacityMask,ar+dr===mr){for(this._tail=this._tail-dr+gr&this._capacityMask,yr=dr;yr>0;yr--)this._list[fr=fr+1+gr&this._capacityMask]=void 0;return hr}if(ar===0){for(this._head=this._head+dr+gr&this._capacityMask,yr=dr-1;yr>0;yr--)this._list[fr=fr+1+gr&this._capacityMask]=void 0;return hr}if(fr<mr/2){for(this._head=this._head+ar+dr+gr&this._capacityMask,yr=ar;yr>0;yr--)this.unshift(this._list[fr=fr-1+gr&this._capacityMask]);for(fr=this._head-1+gr&this._capacityMask;pr>0;)this._list[fr=fr-1+gr&this._capacityMask]=void 0,pr--;ar<0&&(this._tail=fr)}else{for(this._tail=fr,fr=fr+dr+gr&this._capacityMask,yr=mr-(dr+ar);yr>0;yr--)this.push(this._list[fr++]);for(fr=this._tail;pr>0;)this._list[fr=fr+1+gr&this._capacityMask]=void 0,pr--}return this._head<2&&this._tail>1e4&&this._tail<=gr>>>2&&this._shrinkArray(),hr}}};Denque.prototype.splice=function cr(ar,dr){var fr=ar;if(fr===(fr|0)){var hr=this.size();if(fr<0&&(fr+=hr),!(fr>hr))if(arguments.length>2){var pr,mr,gr,yr=arguments.length,xr=this._list.length,wr=2;if(!hr||fr<hr/2){for(mr=new Array(fr),pr=0;pr<fr;pr++)mr[pr]=this._list[this._head+pr&this._capacityMask];for(dr===0?(gr=[],fr>0&&(this._head=this._head+fr+xr&this._capacityMask)):(gr=this.remove(fr,dr),this._head=this._head+fr+xr&this._capacityMask);yr>wr;)this.unshift(arguments[--yr]);for(pr=fr;pr>0;pr--)this.unshift(mr[pr-1])}else{mr=new Array(hr-(fr+dr));var br=mr.length;for(pr=0;pr<br;pr++)mr[pr]=this._list[this._head+fr+dr+pr&this._capacityMask];for(dr===0?(gr=[],fr!=hr&&(this._tail=this._head+fr+xr&this._capacityMask)):(gr=this.remove(fr,dr),this._tail=this._tail-br+xr&this._capacityMask);wr<yr;)this.push(arguments[wr++]);for(pr=0;pr<br;pr++)this.push(mr[pr])}return gr}else return this.remove(fr,dr)}};Denque.prototype.clear=function cr(){this._list=new Array(this._list.length),this._head=0,this._tail=0};Denque.prototype.isEmpty=function cr(){return this._head===this._tail};Denque.prototype.toArray=function cr(){return this._copyArray(!1)};Denque.prototype._fromArray=function cr(ar){var dr=ar.length,fr=this._nextPowerOf2(dr);this._list=new Array(fr),this._capacityMask=fr-1,this._tail=dr;for(var hr=0;hr<dr;hr++)this._list[hr]=ar[hr]};Denque.prototype._copyArray=function cr(ar,dr){var fr=this._list,hr=fr.length,pr=this.length;if(dr=dr|pr,dr==pr&&this._head<this._tail)return this._list.slice(this._head,this._tail);var mr=new Array(dr),gr=0,yr;if(ar||this._head>this._tail){for(yr=this._head;yr<hr;yr++)mr[gr++]=fr[yr];for(yr=0;yr<this._tail;yr++)mr[gr++]=fr[yr]}else for(yr=this._head;yr<this._tail;yr++)mr[gr++]=fr[yr];return mr};Denque.prototype._growArray=function cr(){if(this._head!=0){var ar=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=ar}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};Denque.prototype._shrinkArray=function cr(){this._list.length>>>=1,this._capacityMask>>>=1};Denque.prototype._nextPowerOf2=function cr(ar){var dr=Math.log(ar)/Math.log(2),fr=1<<dr+1;return Math.max(fr,4)};var denque=Denque;const Denque$1=getDefaultExportFromCjs(denque);var DeliveryRecordStatus;(function(cr){cr[cr.unknown=0]="unknown",cr[cr.valid=1]="valid",cr[cr.invalid=2]="invalid",cr[cr.ignored=3]="ignored"})(DeliveryRecordStatus||(DeliveryRecordStatus={}));class MessageDeliveries{records;queue;constructor(){this.records=new Map,this.queue=new Denque$1}getRecord(ar){return this.records.get(ar)}ensureRecord(ar){let dr=this.records.get(ar);if(dr!=null)return dr;dr={status:DeliveryRecordStatus.unknown,firstSeenTsMs:Date.now(),validated:0,peers:new Set},this.records.set(ar,dr);const fr={msgId:ar,expire:Date.now()+TimeCacheDuration};return this.queue.push(fr),dr}gc(){const ar=Date.now();let dr=this.queue.peekFront();for(;dr!=null&&dr.expire<ar;)this.records.delete(dr.msgId),this.queue.shift(),dr=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}class PeerScore{params;metrics;peerStats=new Map;peerIPs=new MapDef(()=>new Set);scoreCache=new Map;deliveryRecords=new MessageDeliveries;_backgroundInterval;scoreCacheValidityMs;computeScore;log;constructor(ar,dr,fr,hr){this.params=ar,this.metrics=dr,validatePeerScoreParams(ar),this.scoreCacheValidityMs=hr.scoreCacheValidityMs,this.computeScore=hr.computeScore??computeScore,this.log=fr.forComponent("libp2p:gossipsub:score")}get size(){return this.peerStats.size}start(){if(this._backgroundInterval!=null){this.log("Peer score already running");return}this._backgroundInterval=setInterval(()=>{this.background()},this.params.decayInterval),this.log("started")}stop(){if(this._backgroundInterval==null){this.log("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),this.log("stopped")}background(){this.refreshScores(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map(([ar,dr])=>[ar,dr]))}messageFirstSeenTimestampMs(ar){const dr=this.deliveryRecords.getRecord(ar);return dr!=null?dr.firstSeenTsMs:null}refreshScores(){const ar=Date.now(),dr=this.params.decayToZero;this.peerStats.forEach((fr,hr)=>{if(!fr.connected){ar>fr.expire&&(this.removeIPsForPeer(hr,fr.knownIPs),this.peerStats.delete(hr),this.scoreCache.delete(hr));return}Object.entries(fr.topics).forEach(([pr,mr])=>{const gr=this.params.topics[pr];gr!==void 0&&(mr.firstMessageDeliveries*=gr.firstMessageDeliveriesDecay,mr.firstMessageDeliveries<dr&&(mr.firstMessageDeliveries=0),mr.meshMessageDeliveries*=gr.meshMessageDeliveriesDecay,mr.meshMessageDeliveries<dr&&(mr.meshMessageDeliveries=0),mr.meshFailurePenalty*=gr.meshFailurePenaltyDecay,mr.meshFailurePenalty<dr&&(mr.meshFailurePenalty=0),mr.invalidMessageDeliveries*=gr.invalidMessageDeliveriesDecay,mr.invalidMessageDeliveries<dr&&(mr.invalidMessageDeliveries=0),mr.inMesh&&(mr.meshTime=ar-mr.graftTime,mr.meshTime>gr.meshMessageDeliveriesActivation&&(mr.meshMessageDeliveriesActive=!0)))}),fr.behaviourPenalty*=this.params.behaviourPenaltyDecay,fr.behaviourPenalty<dr&&(fr.behaviourPenalty=0)})}score(ar){this.metrics?.scoreFnCalls.inc();const dr=this.peerStats.get(ar);if(dr==null)return 0;const fr=Date.now(),hr=this.scoreCache.get(ar);if(hr!=null&&hr.cacheUntil>fr)return hr.score;this.metrics?.scoreFnRuns.inc();const pr=this.computeScore(ar,dr,this.params,this.peerIPs),mr=fr+this.scoreCacheValidityMs;return hr!=null?(this.metrics?.scoreCachedDelta.observe(Math.abs(pr-hr.score)),hr.score=pr,hr.cacheUntil=mr):this.scoreCache.set(ar,{score:pr,cacheUntil:mr}),pr}addPenalty(ar,dr,fr){const hr=this.peerStats.get(ar);hr!=null&&(hr.behaviourPenalty+=dr,this.metrics?.onScorePenalty(fr))}addPeer(ar){const dr={connected:!0,expire:0,topics:{},knownIPs:new Set,behaviourPenalty:0};this.peerStats.set(ar,dr)}addIP(ar,dr){const fr=this.peerStats.get(ar);fr?.knownIPs.add(dr),this.peerIPs.getOrDefault(dr).add(ar)}removeIP(ar,dr){const fr=this.peerStats.get(ar);fr?.knownIPs.delete(dr);const hr=this.peerIPs.get(dr);hr!=null&&(hr.delete(ar),hr.size===0&&this.peerIPs.delete(dr))}removePeer(ar){const dr=this.peerStats.get(ar);if(dr!=null){if(this.score(ar)>0){this.removeIPsForPeer(ar,dr.knownIPs),this.peerStats.delete(ar);return}Object.entries(dr.topics).forEach(([fr,hr])=>{hr.firstMessageDeliveries=0;const pr=this.params.topics[fr].meshMessageDeliveriesThreshold;if(hr.inMesh&&hr.meshMessageDeliveriesActive&&hr.meshMessageDeliveries<pr){const mr=pr-hr.meshMessageDeliveries;hr.meshFailurePenalty+=mr*mr}hr.inMesh=!1,hr.meshMessageDeliveriesActive=!1}),dr.connected=!1,dr.expire=Date.now()+this.params.retainScore}}graft(ar,dr){const fr=this.peerStats.get(ar);if(fr!=null){const hr=this.getPtopicStats(fr,dr);hr!=null&&(hr.inMesh=!0,hr.graftTime=Date.now(),hr.meshTime=0,hr.meshMessageDeliveriesActive=!1)}}prune(ar,dr){const fr=this.peerStats.get(ar);if(fr!=null){const hr=this.getPtopicStats(fr,dr);if(hr!=null){const pr=this.params.topics[dr].meshMessageDeliveriesThreshold;if(hr.meshMessageDeliveriesActive&&hr.meshMessageDeliveries<pr){const mr=pr-hr.meshMessageDeliveries;hr.meshFailurePenalty+=mr*mr}hr.meshMessageDeliveriesActive=!1,hr.inMesh=!1}}}validateMessage(ar){this.deliveryRecords.ensureRecord(ar)}deliverMessage(ar,dr,fr){this.markFirstMessageDelivery(ar,fr);const hr=this.deliveryRecords.ensureRecord(dr),pr=Date.now();if(hr.status!==DeliveryRecordStatus.unknown){this.log("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",ar,pr-hr.firstSeenTsMs,DeliveryRecordStatus[hr.status]);return}hr.status=DeliveryRecordStatus.valid,hr.validated=pr,hr.peers.forEach(mr=>{mr!==ar.toString()&&this.markDuplicateMessageDelivery(mr,fr)})}rejectInvalidMessage(ar,dr){this.markInvalidMessageDelivery(ar,dr)}rejectMessage(ar,dr,fr,hr){switch(hr){case RejectReason.Error:this.markInvalidMessageDelivery(ar,fr);return;case RejectReason.Blacklisted:return}const pr=this.deliveryRecords.ensureRecord(dr);if(pr.status!==DeliveryRecordStatus.unknown){this.log("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",ar,Date.now()-pr.firstSeenTsMs,DeliveryRecordStatus[pr.status]);return}if(hr===RejectReason.Ignore){pr.status=DeliveryRecordStatus.ignored,pr.peers.clear();return}pr.status=DeliveryRecordStatus.invalid,this.markInvalidMessageDelivery(ar,fr),pr.peers.forEach(mr=>{this.markInvalidMessageDelivery(mr,fr)}),pr.peers.clear()}duplicateMessage(ar,dr,fr){const hr=this.deliveryRecords.ensureRecord(dr);if(!hr.peers.has(ar))switch(hr.status){case DeliveryRecordStatus.unknown:hr.peers.add(ar);break;case DeliveryRecordStatus.valid:hr.peers.add(ar),this.markDuplicateMessageDelivery(ar,fr,hr.validated);break;case DeliveryRecordStatus.invalid:this.markInvalidMessageDelivery(ar,fr);break;case DeliveryRecordStatus.ignored:break}}markInvalidMessageDelivery(ar,dr){const fr=this.peerStats.get(ar);if(fr!=null){const hr=this.getPtopicStats(fr,dr);hr!=null&&(hr.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(ar,dr){const fr=this.peerStats.get(ar);if(fr!=null){const hr=this.getPtopicStats(fr,dr);if(hr!=null){let pr=this.params.topics[dr].firstMessageDeliveriesCap;hr.firstMessageDeliveries=Math.min(pr,hr.firstMessageDeliveries+1),hr.inMesh&&(pr=this.params.topics[dr].meshMessageDeliveriesCap,hr.meshMessageDeliveries=Math.min(pr,hr.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(ar,dr,fr){const hr=this.peerStats.get(ar);if(hr!=null){const pr=fr!==void 0?Date.now():0,mr=this.getPtopicStats(hr,dr);if(mr!=null&&mr.inMesh){const gr=this.params.topics[dr];if(fr!==void 0){const xr=pr-fr,wr=xr>gr.meshMessageDeliveriesWindow;if(this.metrics?.onDuplicateMsgDelivery(dr,xr,wr),wr)return}const yr=gr.meshMessageDeliveriesCap;mr.meshMessageDeliveries=Math.min(yr,mr.meshMessageDeliveries+1)}}}removeIPsForPeer(ar,dr){for(const fr of dr){const hr=this.peerIPs.get(fr);hr!=null&&(hr.delete(ar),hr.size===0&&this.peerIPs.delete(fr))}}getPtopicStats(ar,dr){let fr=ar.topics[dr];return fr!==void 0?fr:this.params.topics[dr]!==void 0?(fr={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},ar.topics[dr]=fr,fr):null}}function computeScoreWeights(cr,ar,dr,fr,hr){let pr=0;const mr=new Map;if(Object.entries(ar.topics).forEach(([Sr,vr])=>{const Er=hr.get(Sr)??"unknown",Ar=dr.topics[Sr];if(Ar===void 0)return;let _r=mr.get(Er);_r==null&&(_r={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},mr.set(Er,_r));let Cr=0,kr=0,Rr=0,Ir=0,Nr=0;if(vr.inMesh){const Fr=Math.max(vr.meshTime/Ar.timeInMeshQuantum,Ar.timeInMeshCap);Cr+=Fr*Ar.timeInMeshWeight}let Pr=vr.firstMessageDeliveries;if(Pr>Ar.firstMessageDeliveriesCap&&(Pr=Ar.firstMessageDeliveriesCap),kr+=Pr*Ar.firstMessageDeliveriesWeight,vr.meshMessageDeliveriesActive&&vr.meshMessageDeliveries<Ar.meshMessageDeliveriesThreshold){const Fr=Ar.meshMessageDeliveriesThreshold-vr.meshMessageDeliveries,jr=Fr*Fr;Rr+=jr*Ar.meshMessageDeliveriesWeight}const Tr=vr.meshFailurePenalty;Ir+=Tr*Ar.meshFailurePenaltyWeight;const Br=vr.invalidMessageDeliveries*vr.invalidMessageDeliveries;Nr+=Br*Ar.invalidMessageDeliveriesWeight,pr+=(Cr+kr+Rr+Ir+Nr)*Ar.topicWeight,_r.p1w+=Cr,_r.p2w+=kr,_r.p3w+=Rr,_r.p3bw+=Ir,_r.p4w+=Nr}),dr.topicScoreCap>0&&pr>dr.topicScoreCap){pr=dr.topicScoreCap;const Sr=dr.topicScoreCap/pr;for(const vr of mr.values())vr.p1w*=Sr,vr.p2w*=Sr,vr.p3w*=Sr,vr.p3bw*=Sr,vr.p4w*=Sr}let gr=0,yr=0,xr=0;const wr=dr.appSpecificScore(cr);gr+=wr*dr.appSpecificWeight,ar.knownIPs.forEach(Sr=>{if(dr.IPColocationFactorWhitelist.has(Sr))return;const vr=fr.get(Sr),Er=vr!=null?vr.size:0;if(Er>dr.IPColocationFactorThreshold){const Ar=Er-dr.IPColocationFactorThreshold,_r=Ar*Ar;yr+=_r*dr.IPColocationFactorWeight}});const br=ar.behaviourPenalty*ar.behaviourPenalty;return xr+=br*dr.behaviourPenaltyWeight,pr+=gr+yr+xr,{byTopic:mr,p5w:gr,p6w:yr,p7w:xr,score:pr}}function computeAllPeersScoreWeights(cr,ar,dr,fr,hr){const pr={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(const mr of cr){const gr=ar.get(mr);if(gr!=null){const yr=computeScoreWeights(mr,gr,dr,fr,hr);for(const[xr,wr]of yr.byTopic){let br=pr.byTopic.get(xr);br==null&&(br={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},pr.byTopic.set(xr,br)),br.p1w.push(wr.p1w),br.p2w.push(wr.p2w),br.p3w.push(wr.p3w),br.p3bw.push(wr.p3bw),br.p4w.push(wr.p4w)}pr.p5w.push(yr.p5w),pr.p6w.push(yr.p6w),pr.p7w.push(yr.p7w),pr.score.push(yr.score)}else pr.p5w.push(0),pr.p6w.push(0),pr.p7w.push(0),pr.score.push(0)}return pr}class AbortError extends Error{constructor(ar,dr){super(ar??"The operation was aborted"),this.type="aborted",this.code=dr??"ABORT_ERR"}}function abortableSource(cr,ar,dr){const fr=dr??{},hr=getIterator(cr);async function*pr(){let mr;const gr=()=>{mr?.()};for(ar.addEventListener("abort",gr);;){let yr;try{if(ar.aborted){const{abortMessage:wr,abortCode:br}=fr;throw new AbortError(wr,br)}const xr=new Promise((wr,br)=>{mr=()=>{const{abortMessage:Sr,abortCode:vr}=fr;br(new AbortError(Sr,vr))}});yr=await Promise.race([xr,hr.next()]),mr=null}catch(xr){ar.removeEventListener("abort",gr);const wr=xr.type==="aborted"&&ar.aborted;if(wr&&fr.onAbort!=null&&fr.onAbort(cr),typeof hr.return=="function")try{const br=hr.return();br instanceof Promise&&br.catch(Sr=>{fr.onReturnError!=null&&fr.onReturnError(Sr)})}catch(br){fr.onReturnError!=null&&fr.onReturnError(br)}if(wr&&fr.returnOnAbort===!0)return;throw xr}if(yr.done===!0)break;yield yr.value}ar.removeEventListener("abort",gr)}return pr()}class OutboundStream{rawStream;pushable;lpPushable;closeController;maxBufferSize;constructor(ar,dr,fr){this.rawStream=ar,this.pushable=pushable$1({objectMode:!1}),this.lpPushable=pushable$1({objectMode:!1}),this.closeController=new AbortController,this.maxBufferSize=fr.maxBufferSize??1/0,pipe(abortableSource(this.pushable,this.closeController.signal,{returnOnAbort:!0}),hr=>encode$1(hr),this.rawStream).catch(dr),pipe(abortableSource(this.lpPushable,this.closeController.signal,{returnOnAbort:!0}),this.rawStream).catch(dr)}get protocol(){return this.rawStream.protocol}push(ar){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(ar)}pushPrefixed(ar){if(this.lpPushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.lpPushable.push(ar)}async close(){this.closeController.abort(),await this.pushable.return(),await this.lpPushable.return(),await this.rawStream.close()}}class InboundStream{source;rawStream;closeController;constructor(ar,dr={}){this.rawStream=ar,this.closeController=new AbortController,this.source=abortableSource(pipe(this.rawStream,fr=>decode(fr,dr)),this.closeController.signal,{returnOnAbort:!0})}async close(){this.closeController.abort(),await this.rawStream.close()}}class IWantTracer{gossipsubIWantFollowupMs;msgIdToStrFn;metrics;promises=new Map;requestMsByMsg=new Map;requestMsByMsgExpire;constructor(ar,dr,fr){this.gossipsubIWantFollowupMs=ar,this.msgIdToStrFn=dr,this.metrics=fr,this.requestMsByMsgExpire=10*ar}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(ar,dr){const fr=Math.floor(Math.random()*dr.length),hr=dr[fr],pr=this.msgIdToStrFn(hr);let mr=this.promises.get(pr);mr==null&&(mr=new Map,this.promises.set(pr,mr));const gr=Date.now();mr.has(ar)||(mr.set(ar,gr+this.gossipsubIWantFollowupMs),this.metrics!=null&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(pr)||this.requestMsByMsg.set(pr,gr)))}getBrokenPromises(){const ar=Date.now(),dr=new Map;let fr=0;return this.promises.forEach((hr,pr)=>{hr.forEach((mr,gr)=>{mr<ar&&(dr.set(gr,(dr.get(gr)??0)+1),hr.delete(gr),fr++)}),hr.size===0&&this.promises.delete(pr)}),this.metrics?.iwantPromiseBroken.inc(fr),dr}deliverMessage(ar,dr=!1){this.trackMessage(ar);const fr=this.promises.get(ar);fr!=null&&(this.promises.delete(ar),this.metrics!=null&&(this.metrics.iwantPromiseResolved.inc(1),dr&&this.metrics.iwantPromiseResolvedFromDuplicate.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(fr.size)))}rejectMessage(ar,dr){switch(this.trackMessage(ar),dr){case RejectReason.Error:return}this.promises.delete(ar)}clear(){this.promises.clear()}prune(){const ar=Date.now()-this.requestMsByMsgExpire;let dr=0;for(const[fr,hr]of this.requestMsByMsg.entries())if(hr<ar)this.requestMsByMsg.delete(fr),dr++;else break;this.metrics?.iwantMessagePruned.inc(dr)}trackMessage(ar){if(this.metrics!=null){const dr=this.requestMsByMsg.get(ar);dr!==void 0&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-dr)/1e3),this.requestMsByMsg.delete(ar))}}}const SignPrefix=fromString("libp2p-pubsub:");async function buildRawMessage(cr,ar,dr,fr){switch(cr.type){case PublishConfigType.Signing:{const hr={from:cr.author.toBytes(),data:fr,seqno:randomBytes(8),topic:ar,signature:void 0,key:void 0},pr=concat([SignPrefix,RPC.Message.encode(hr).finish()]);hr.signature=await cr.privateKey.sign(pr),hr.key=cr.key;const mr={type:"signed",from:cr.author,data:dr,sequenceNumber:BigInt(`0x${toString$1(hr.seqno,"base16")}`),topic:ar,signature:hr.signature,key:hr.key};return{raw:hr,msg:mr}}case PublishConfigType.Anonymous:return{raw:{from:void 0,data:fr,seqno:void 0,topic:ar,signature:void 0,key:void 0},msg:{type:"unsigned",data:dr,topic:ar}};default:throw new Error("Unreachable")}}async function validateToRawMessage(cr,ar){switch(cr){case StrictNoSign:return ar.signature!=null?{valid:!1,error:ValidateError.SignaturePresent}:ar.seqno!=null?{valid:!1,error:ValidateError.SeqnoPresent}:ar.key!=null?{valid:!1,error:ValidateError.FromPresent}:{valid:!0,message:{type:"unsigned",topic:ar.topic,data:ar.data??new Uint8Array(0)}};case StrictSign:{if(ar.seqno==null)return{valid:!1,error:ValidateError.InvalidSeqno};if(ar.seqno.length!==8)return{valid:!1,error:ValidateError.InvalidSeqno};if(ar.signature==null)return{valid:!1,error:ValidateError.InvalidSignature};if(ar.from==null)return{valid:!1,error:ValidateError.InvalidPeerId};let dr;try{dr=peerIdFromBytes(ar.from)}catch{return{valid:!1,error:ValidateError.InvalidPeerId}}let fr;if(ar.key!=null){if(fr=unmarshalPublicKey(ar.key),dr.publicKey!==void 0&&!equals(fr.bytes,dr.publicKey))return{valid:!1,error:ValidateError.InvalidPeerId}}else{if(dr.publicKey==null)return{valid:!1,error:ValidateError.InvalidPeerId};fr=unmarshalPublicKey(dr.publicKey)}const hr={from:ar.from,data:ar.data,seqno:ar.seqno,topic:ar.topic,signature:void 0,key:void 0},pr=concat([SignPrefix,RPC.Message.encode(hr).finish()]);return await fr.verify(pr,ar.signature)?{valid:!0,message:{type:"signed",from:dr,data:ar.data??new Uint8Array(0),sequenceNumber:BigInt(`0x${toString$1(ar.seqno,"base16")}`),topic:ar.topic,signature:ar.signature,key:ar.key??marshalPublicKey(fr)}}:{valid:!1,error:ValidateError.InvalidSignature}}default:throw new Error("Unreachable")}}function shuffle(cr){if(cr.length<=1)return cr;const ar=()=>Math.floor(Math.random()*Math.floor(cr.length));for(let dr=0;dr<cr.length;dr++){const fr=ar(),hr=cr[dr];cr[dr]=cr[fr],cr[fr]=hr}return cr}function messageIdToString(cr){return toString$1(cr,"base64")}async function getPublishConfigFromPeerId(cr,ar){switch(cr){case StrictSign:{if(ar==null)throw Error("Must provide PeerId");if(ar.privateKey==null)throw Error("Cannot sign message, no private key present");if(ar.publicKey==null)throw Error("Cannot sign message, no public key present");const dr=await unmarshalPrivateKey(ar.privateKey);return{type:PublishConfigType.Signing,author:ar,key:ar.publicKey,privateKey:dr}}case StrictNoSign:return{type:PublishConfigType.Anonymous};default:throw new Error(`Unknown signature policy "${cr}"`)}}const msgId=(cr,ar)=>{const dr=fromString$1(ar.toString(16).padStart(16,"0"),"base16"),fr=new Uint8Array(cr.length+dr.length);return fr.set(cr,0),fr.set(dr,cr.length),fr};function msgIdFnStrictSign(cr){if(cr.type!=="signed")throw new Error("expected signed message type");if(cr.sequenceNumber==null)throw Error("missing seqno field");return msgId(cr.from.toBytes(),cr.sequenceNumber)}async function msgIdFnStrictNoSign(cr){return sha256$1.encode(cr.data)}var Protocol;(function(cr){cr[cr.ip4=4]="ip4",cr[cr.ip6=41]="ip6"})(Protocol||(Protocol={}));function multiaddrToIPStr(cr){for(const ar of cr.tuples())switch(ar[0]){case Protocol.ip4:case Protocol.ip6:return convertToString(ar[0],ar[1])}return null}class SimpleTimeCache{entries=new Map;validityMs;constructor(ar){this.validityMs=ar.validityMs}get size(){return this.entries.size}put(ar,dr){return this.entries.has(ar)?!0:(this.entries.set(ar,{value:dr,validUntilMs:Date.now()+this.validityMs}),!1)}prune(){const ar=Date.now();for(const[dr,fr]of this.entries.entries())if(fr.validUntilMs<ar)this.entries.delete(dr);else break}has(ar){return this.entries.has(ar)}get(ar){const dr=this.entries.get(ar);return dr!=null&&dr.validUntilMs>=Date.now()?dr.value:void 0}clear(){this.entries.clear()}}const multicodec=GossipsubIDv11;var GossipStatusCode;(function(cr){cr[cr.started=0]="started",cr[cr.stopped=1]="stopped"})(GossipStatusCode||(GossipStatusCode={}));class GossipSub extends TypedEventEmitter{globalSignaturePolicy;multicodecs=[GossipsubIDv11,GossipsubIDv10];publishConfig;dataTransform;peers=new Set;streamsInbound=new Map;streamsOutbound=new Map;outboundInflightQueue=pushable$1({objectMode:!0});direct=new Set;floodsubPeers=new Set;seenCache;acceptFromWhitelist=new Map;topics=new Map;subscriptions=new Set;mesh=new Map;fanout=new Map;fanoutLastpub=new Map;gossip=new Map;control=new Map;peerhave=new Map;iasked=new Map;backoff=new Map;outbound=new Map;msgIdFn;fastMsgIdFn;msgIdToStrFn;fastMsgIdCache;publishedMessageIds;mcache;score;topicValidators=new Map;log;heartbeatTicks=0;gossipTracer;components;directPeerInitial=null;static multicodec=GossipsubIDv11;opts;decodeRpcLimits;metrics;status={code:GossipStatusCode.stopped};maxInboundStreams;maxOutboundStreams;allowedTopics;heartbeatTimer=null;constructor(ar,dr={}){super();const fr={fallbackToFloodsub:!0,floodPublish:!0,batchPublish:!1,doPX:!1,directPeers:[],D:GossipsubD,Dlo:GossipsubDlo,Dhi:GossipsubDhi,Dscore:GossipsubDscore,Dout:GossipsubDout,Dlazy:GossipsubDlazy,heartbeatInterval:GossipsubHeartbeatInterval,fanoutTTL:GossipsubFanoutTTL,mcacheLength:GossipsubHistoryLength,mcacheGossip:GossipsubHistoryGossip,seenTTL:GossipsubSeenTTL,gossipsubIWantFollowupMs:GossipsubIWantFollowupTime,prunePeers:GossipsubPrunePeers,pruneBackoff:GossipsubPruneBackoff,unsubcribeBackoff:GossipsubUnsubscribeBackoff,graftFloodThreshold:GossipsubGraftFloodThreshold,opportunisticGraftPeers:GossipsubOpportunisticGraftPeers,opportunisticGraftTicks:GossipsubOpportunisticGraftTicks,directConnectTicks:GossipsubDirectConnectTicks,...dr,scoreParams:createPeerScoreParams(dr.scoreParams),scoreThresholds:createPeerScoreThresholds(dr.scoreThresholds)};if(this.components=ar,this.decodeRpcLimits=fr.decodeRpcLimits??defaultDecodeRpcLimits,this.globalSignaturePolicy=fr.globalSignaturePolicy??StrictSign,fr.fallbackToFloodsub&&this.multicodecs.push(FloodsubID),this.log=ar.logger.forComponent(fr.debugName??"libp2p:gossipsub"),this.opts=fr,this.direct=new Set(fr.directPeers.map(hr=>hr.id.toString())),this.seenCache=new SimpleTimeCache({validityMs:fr.seenTTL}),this.publishedMessageIds=new SimpleTimeCache({validityMs:fr.seenTTL}),dr.msgIdFn!=null)this.msgIdFn=dr.msgIdFn;else switch(this.globalSignaturePolicy){case StrictSign:this.msgIdFn=msgIdFnStrictSign;break;case StrictNoSign:this.msgIdFn=msgIdFnStrictNoSign;break;default:throw new Error(`Invalid globalSignaturePolicy: ${this.globalSignaturePolicy}`)}if(dr.fastMsgIdFn!=null&&(this.fastMsgIdFn=dr.fastMsgIdFn,this.fastMsgIdCache=new SimpleTimeCache({validityMs:fr.seenTTL})),this.msgIdToStrFn=dr.msgIdToStrFn??messageIdToString,this.mcache=dr.messageCache??new MessageCache(fr.mcacheGossip,fr.mcacheLength,this.msgIdToStrFn),dr.dataTransform!=null&&(this.dataTransform=dr.dataTransform),dr.metricsRegister!=null){if(dr.metricsTopicStrToLabel==null)throw Error("Must set metricsTopicStrToLabel with metrics");const hr=Math.max(...Object.values(fr.scoreParams.topics).map(mr=>mr.meshMessageDeliveriesWindow),DEFAULT_METRIC_MESH_MESSAGE_DELIVERIES_WINDOWS),pr=getMetrics(dr.metricsRegister,dr.metricsTopicStrToLabel,{gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:fr.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:hr/1e3});pr.mcacheSize.addCollect(()=>{this.onScrapeMetrics(pr)});for(const mr of this.multicodecs)pr.protocolsEnabled.set({protocol:mr},1);this.metrics=pr}else this.metrics=null;this.gossipTracer=new IWantTracer(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new PeerScore(this.opts.scoreParams,this.metrics,this.components.logger,{scoreCacheValidityMs:fr.heartbeatInterval}),this.maxInboundStreams=dr.maxInboundStreams,this.maxOutboundStreams=dr.maxOutboundStreams,this.allowedTopics=fr.allowedTopics!=null?new Set(fr.allowedTopics):null}getPeers(){return[...this.peers.keys()].map(ar=>peerIdFromString(ar))}isStarted(){return this.status.code===GossipStatusCode.started}async start(){if(this.isStarted())return;this.log("starting"),this.publishConfig=await getPublishConfigFromPeerId(this.globalSignaturePolicy,this.components.peerId),this.outboundInflightQueue=pushable$1({objectMode:!0}),pipe(this.outboundInflightQueue,async pr=>{for await(const{peerId:mr,connection:gr}of pr)await this.createOutboundStream(mr,gr)}).catch(pr=>{this.log.error("outbound inflight queue error",pr)}),await Promise.all(this.opts.directPeers.map(async pr=>{await this.components.peerStore.merge(pr.id,{multiaddrs:pr.addrs})}));const ar=this.components.registrar;await Promise.all(this.multicodecs.map(async pr=>ar.handle(pr,this.onIncomingStream.bind(this),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams})));const dr={onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this)},fr=await Promise.all(this.multicodecs.map(async pr=>ar.register(pr,dr))),hr=setTimeout(this.runHeartbeat,GossipsubHeartbeatInitialDelay);this.status={code:GossipStatusCode.started,registrarTopologyIds:fr,heartbeatTimeout:hr,hearbeatStartMs:Date.now()+GossipsubHeartbeatInitialDelay},this.score.start(),this.directPeerInitial=setTimeout(()=>{Promise.resolve().then(async()=>{await Promise.all(Array.from(this.direct).map(async pr=>this.connect(pr)))}).catch(pr=>{this.log(pr)})},GossipsubDirectConnectInitialDelay),this.log("started")}async stop(){if(this.log("stopping"),this.status.code!==GossipStatusCode.started)return;const{registrarTopologyIds:ar}=this.status;this.status={code:GossipStatusCode.stopped};const dr=this.components.registrar;await Promise.all(this.multicodecs.map(async hr=>dr.unhandle(hr))),ar.forEach(hr=>{dr.unregister(hr)}),this.outboundInflightQueue.end();const fr=[];for(const hr of this.streamsOutbound.values())fr.push(hr.close());this.streamsOutbound.clear();for(const hr of this.streamsInbound.values())fr.push(hr.close());this.streamsInbound.clear(),await Promise.all(fr),this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer!=null&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache!=null&&this.fastMsgIdCache.clear(),this.directPeerInitial!=null&&clearTimeout(this.directPeerInitial),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream({stream:ar,connection:dr}){if(!this.isStarted())return;const fr=dr.remotePeer;this.addPeer(fr,dr.direction,dr.remoteAddr),this.createInboundStream(fr,ar),this.outboundInflightQueue.push({peerId:fr,connection:dr})}onPeerConnected(ar,dr){this.metrics?.newConnectionCount.inc({status:dr.status}),!(!this.isStarted()||dr.status!=="open")&&(this.addPeer(ar,dr.direction,dr.remoteAddr),this.outboundInflightQueue.push({peerId:ar,connection:dr}))}onPeerDisconnected(ar){this.log("connection ended %p",ar),this.removePeer(ar)}async createOutboundStream(ar,dr){if(!this.isStarted())return;const fr=ar.toString();if(this.peers.has(fr)&&!this.streamsOutbound.has(fr))try{const hr=new OutboundStream(await dr.newStream(this.multicodecs),mr=>{this.log.error("outbound pipe error",mr)},{maxBufferSize:this.opts.maxOutboundBufferSize});this.log("create outbound stream %p",ar),this.streamsOutbound.set(fr,hr);const pr=hr.protocol;pr===FloodsubID&&this.floodsubPeers.add(fr),this.metrics?.peersPerProtocol.inc({protocol:pr},1),this.subscriptions.size>0&&(this.log("send subscriptions to",fr),this.sendSubscriptions(fr,Array.from(this.subscriptions),!0))}catch(hr){this.log.error("createOutboundStream error",hr)}}createInboundStream(ar,dr){if(!this.isStarted())return;const fr=ar.toString();if(!this.peers.has(fr))return;const hr=this.streamsInbound.get(fr);hr!==void 0&&(this.log("replacing existing inbound steam %s",fr),hr.close().catch(mr=>{this.log.error(mr)})),this.log("create inbound stream %s",fr);const pr=new InboundStream(dr,{maxDataLength:this.opts.maxInboundDataLength});this.streamsInbound.set(fr,pr),this.pipePeerReadStream(ar,pr.source).catch(mr=>{this.log(mr)})}addPeer(ar,dr,fr){const hr=ar.toString();if(!this.peers.has(hr)){this.log("new peer %p",ar),this.peers.add(hr),this.score.addPeer(hr);const pr=multiaddrToIPStr(fr);pr!==null?this.score.addIP(hr,pr):this.log("Added peer has no IP in current address %s %s",hr,fr.toString()),this.outbound.has(hr)||this.outbound.set(hr,dr==="outbound")}}removePeer(ar){const dr=ar.toString();if(!this.peers.has(dr))return;this.log("delete peer %p",ar),this.peers.delete(dr);const fr=this.streamsOutbound.get(dr),hr=this.streamsInbound.get(dr);fr!=null&&this.metrics?.peersPerProtocol.inc({protocol:fr.protocol},-1),fr?.close().catch(pr=>{this.log.error(pr)}),hr?.close().catch(pr=>{this.log.error(pr)}),this.streamsOutbound.delete(dr),this.streamsInbound.delete(dr);for(const pr of this.topics.values())pr.delete(dr);for(const[pr,mr]of this.mesh)mr.delete(dr)&&this.metrics?.onRemoveFromMesh(pr,ChurnReason.Dc,1);for(const pr of this.fanout.values())pr.delete(dr);this.floodsubPeers.delete(dr),this.gossip.delete(dr),this.control.delete(dr),this.outbound.delete(dr),this.score.removePeer(dr),this.acceptFromWhitelist.delete(dr)}get started(){return this.status.code===GossipStatusCode.started}getMeshPeers(ar){const dr=this.mesh.get(ar);return dr!=null?Array.from(dr):[]}getSubscribers(ar){const dr=this.topics.get(ar);return(dr!=null?Array.from(dr):[]).map(fr=>peerIdFromString(fr))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(ar,dr){try{await pipe(dr,async fr=>{for await(const hr of fr)try{const pr=hr.subarray(),mr=decodeRpc(pr,this.decodeRpcLimits);if(this.metrics?.onRpcRecv(mr,pr.length),this.opts.awaitRpcHandler)try{await this.handleReceivedRpc(ar,mr)}catch(gr){this.metrics?.onRpcRecvError(),this.log(gr)}else this.handleReceivedRpc(ar,mr).catch(gr=>{this.metrics?.onRpcRecvError(),this.log(gr)})}catch(pr){this.metrics?.onRpcDataError(),this.log(pr)}})}catch(fr){this.metrics?.onPeerReadStreamError(),this.handlePeerReadStreamError(fr,ar)}}handlePeerReadStreamError(ar,dr){this.log.error(ar),this.onPeerDisconnected(dr)}async handleReceivedRpc(ar,dr){if(!this.acceptFrom(ar.toString())){this.log("received message from unacceptable peer %p",ar),this.metrics?.rpcRecvNotAccepted.inc();return}const fr=dr.subscriptions!=null?dr.subscriptions.length:0,hr=dr.messages!=null?dr.messages.length:0;let pr=0,mr=0,gr=0,yr=0;if(dr.control!=null&&(dr.control.ihave!=null&&(pr=dr.control.ihave.length),dr.control.iwant!=null&&(mr=dr.control.iwant.length),dr.control.graft!=null&&(gr=dr.control.graft.length),dr.control.prune!=null&&(yr=dr.control.prune.length)),this.log(`rpc.from ${ar.toString()} subscriptions ${fr} messages ${hr} ihave ${pr} iwant ${mr} graft ${gr} prune ${yr}`),dr.subscriptions!=null&&dr.subscriptions.length>0){const xr=[];dr.subscriptions.forEach(wr=>{const br=wr.topic,Sr=wr.subscribe===!0;if(br!=null){if(this.allowedTopics!=null&&!this.allowedTopics.has(br))return;this.handleReceivedSubscription(ar,br,Sr),xr.push({topic:br,subscribe:Sr})}}),this.safeDispatchEvent("subscription-change",{detail:{peerId:ar,subscriptions:xr}})}if(dr.messages!=null)for(const xr of dr.messages){if(this.allowedTopics!=null&&!this.allowedTopics.has(xr.topic))continue;const wr=this.handleReceivedMessage(ar,xr).catch(br=>{this.metrics?.onMsgRecvError(xr.topic),this.log(br)});this.opts.awaitRpcMessageHandler&&await wr}dr.control!=null&&await this.handleControlMessage(ar.toString(),dr.control)}handleReceivedSubscription(ar,dr,fr){this.log("subscription update from %p topic %s",ar,dr);let hr=this.topics.get(dr);hr==null&&(hr=new Set,this.topics.set(dr,hr)),fr?hr.add(ar.toString()):hr.delete(ar.toString())}async handleReceivedMessage(ar,dr){this.metrics?.onMsgRecvPreValidation(dr.topic);const fr=await this.validateReceivedMessage(ar,dr);this.metrics?.onPrevalidationResult(dr.topic,fr.code);const hr=fr.code;switch(hr){case MessageStatus.duplicate:this.score.duplicateMessage(ar.toString(),fr.msgIdStr,dr.topic),this.gossipTracer.deliverMessage(fr.msgIdStr,!0),this.mcache.observeDuplicate(fr.msgIdStr,ar.toString());return;case MessageStatus.invalid:if(fr.msgIdStr!=null){const pr=fr.msgIdStr;this.score.rejectMessage(ar.toString(),pr,dr.topic,fr.reason),this.gossipTracer.rejectMessage(pr,fr.reason)}else this.score.rejectInvalidMessage(ar.toString(),dr.topic);this.metrics?.onMsgRecvInvalid(dr.topic,fr);return;case MessageStatus.valid:this.score.validateMessage(fr.messageId.msgIdStr),this.gossipTracer.deliverMessage(fr.messageId.msgIdStr),this.mcache.put(fr.messageId,dr,!this.opts.asyncValidation),this.subscriptions.has(dr.topic)&&(!this.components.peerId.equals(ar)||this.opts.emitSelf)&&(super.dispatchEvent(new CustomEvent$2("gossipsub:message",{detail:{propagationSource:ar,msgId:fr.messageId.msgIdStr,msg:fr.msg}})),super.dispatchEvent(new CustomEvent$2("message",{detail:fr.msg}))),this.opts.asyncValidation||this.forwardMessage(fr.messageId.msgIdStr,dr,ar.toString());break;default:throw new Error(`Invalid validation result: ${hr}`)}}async validateReceivedMessage(ar,dr){const fr=this.fastMsgIdFn?.(dr),hr=fr!==void 0?this.fastMsgIdCache?.get(fr):void 0;if(hr!=null)return{code:MessageStatus.duplicate,msgIdStr:hr};const pr=await validateToRawMessage(this.globalSignaturePolicy,dr);if(!pr.valid)return{code:MessageStatus.invalid,reason:RejectReason.Error,error:pr.error};const mr=pr.message;try{this.dataTransform!=null&&(mr.data=this.dataTransform.inboundTransform(dr.topic,mr.data))}catch(br){return this.log("Invalid message, transform failed",br),{code:MessageStatus.invalid,reason:RejectReason.Error,error:ValidateError.TransformFailed}}const gr=await this.msgIdFn(mr),yr=this.msgIdToStrFn(gr),xr={msgId:gr,msgIdStr:yr};if(fr!==void 0&&this.fastMsgIdCache!=null&&this.fastMsgIdCache.put(fr,yr)&&this.metrics?.fastMsgIdCacheCollision.inc(),this.seenCache.has(yr))return{code:MessageStatus.duplicate,msgIdStr:yr};this.seenCache.put(yr);const wr=this.topicValidators.get(dr.topic);if(wr!=null){let br;try{br=await wr(ar,mr)}catch(Sr){const vr=Sr.code;vr===ERR_TOPIC_VALIDATOR_IGNORE&&(br=TopicValidatorResult$1.Ignore),vr===ERR_TOPIC_VALIDATOR_REJECT?br=TopicValidatorResult$1.Reject:br=TopicValidatorResult$1.Ignore}if(br!==TopicValidatorResult$1.Accept)return{code:MessageStatus.invalid,reason:rejectReasonFromAcceptance(br),msgIdStr:yr}}return{code:MessageStatus.valid,messageId:xr,msg:mr}}getScore(ar){return this.score.score(ar)}sendSubscriptions(ar,dr,fr){this.sendRpc(ar,{subscriptions:dr.map(hr=>({topic:hr,subscribe:fr}))})}async handleControlMessage(ar,dr){if(dr===void 0)return;const fr=dr.ihave!=null?this.handleIHave(ar,dr.ihave):[],hr=dr.iwant!=null?this.handleIWant(ar,dr.iwant):[],pr=dr.graft!=null?await this.handleGraft(ar,dr.graft):[];if(dr.prune!=null&&await this.handlePrune(ar,dr.prune),fr.length===0&&hr.length===0&&pr.length===0)return;const mr=this.sendRpc(ar,{messages:hr,control:{iwant:fr,prune:pr}}),gr=fr[0]?.messageIDs;gr!=null&&(mr?this.gossipTracer.addPromise(ar,gr):this.metrics?.iwantPromiseUntracked.inc(1))}acceptFrom(ar){if(this.direct.has(ar))return!0;const dr=Date.now(),fr=this.acceptFromWhitelist.get(ar);if(fr!=null&&fr.messagesAccepted<ACCEPT_FROM_WHITELIST_MAX_MESSAGES&&fr.acceptUntil>=dr)return fr.messagesAccepted+=1,!0;const hr=this.score.score(ar);return hr>=ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE?this.acceptFromWhitelist.set(ar,{messagesAccepted:0,acceptUntil:dr+ACCEPT_FROM_WHITELIST_DURATION_MS}):this.acceptFromWhitelist.delete(ar),hr>=this.opts.scoreThresholds.graylistThreshold}handleIHave(ar,dr){if(dr.length===0)return[];const fr=this.score.score(ar);if(fr<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",ar,fr),this.metrics?.ihaveRcvIgnored.inc({reason:IHaveIgnoreReason.LowScore}),[];const hr=(this.peerhave.get(ar)??0)+1;if(this.peerhave.set(ar,hr),hr>GossipsubMaxIHaveMessages)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",ar,hr),this.metrics?.ihaveRcvIgnored.inc({reason:IHaveIgnoreReason.MaxIhave}),[];const pr=this.iasked.get(ar)??0;if(pr>=GossipsubMaxIHaveLength)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",ar,pr),this.metrics?.ihaveRcvIgnored.inc({reason:IHaveIgnoreReason.MaxIasked}),[];const mr=new Map;if(dr.forEach(({topicID:xr,messageIDs:wr})=>{if(xr==null||wr==null||!this.mesh.has(xr))return;let br=0;wr.forEach(Sr=>{const vr=this.msgIdToStrFn(Sr);this.seenCache.has(vr)||(mr.set(vr,Sr),br++)}),this.metrics?.onIhaveRcv(xr,wr.length,br)}),mr.size===0)return[];let gr=mr.size;gr+pr>GossipsubMaxIHaveLength&&(gr=GossipsubMaxIHaveLength-pr),this.log("IHAVE: Asking for %d out of %d messages from %s",gr,mr.size,ar);let yr=Array.from(mr.values());return shuffle(yr),yr=yr.slice(0,gr),this.iasked.set(ar,pr+gr),[{messageIDs:yr}]}handleIWant(ar,dr){if(dr.length===0)return[];const fr=this.score.score(ar);if(fr<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",ar,fr),[];const hr=new Map,pr=new Map;let mr=0;return dr.forEach(({messageIDs:gr})=>{gr?.forEach(yr=>{const xr=this.msgIdToStrFn(yr),wr=this.mcache.getWithIWantCount(xr,ar);if(wr==null){mr++;return}if(pr.set(wr.msg.topic,1+(pr.get(wr.msg.topic)??0)),wr.count>GossipsubGossipRetransmission){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",ar,yr);return}hr.set(xr,wr.msg)})}),this.metrics?.onIwantRcv(pr,mr),hr.size===0?(this.log("IWANT: Could not provide any wanted messages to %s",ar),[]):(this.log("IWANT: Sending %d messages to %s",hr.size,ar),Array.from(hr.values()))}async handleGraft(ar,dr){const fr=[],hr=this.score.score(ar),pr=Date.now();let mr=this.opts.doPX;if(dr.forEach(({topicID:yr})=>{if(yr==null)return;const xr=this.mesh.get(yr);if(xr==null){mr=!1;return}if(xr.has(ar))return;if(this.direct.has(ar)){this.log("GRAFT: ignoring request from direct peer %s",ar),fr.push(yr),mr=!1;return}const wr=this.backoff.get(yr)?.get(ar);if(typeof wr=="number"&&pr<wr){this.log("GRAFT: ignoring backed off peer %s",ar),this.score.addPenalty(ar,1,ScorePenalty.GraftBackoff),mr=!1;const br=wr+this.opts.graftFloodThreshold-this.opts.pruneBackoff;pr<br&&this.score.addPenalty(ar,1,ScorePenalty.GraftBackoff),this.addBackoff(ar,yr),fr.push(yr);return}if(hr<0){this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",ar,hr,yr),fr.push(yr),mr=!1,this.addBackoff(ar,yr);return}if(xr.size>=this.opts.Dhi&&!(this.outbound.get(ar)??!1)){fr.push(yr),this.addBackoff(ar,yr);return}this.log("GRAFT: Add mesh link from %s in %s",ar,yr),this.score.graft(ar,yr),xr.add(ar),this.metrics?.onAddToMesh(yr,InclusionReason.Subscribed,1)}),fr.length===0)return[];const gr=!1;return Promise.all(fr.map(async yr=>this.makePrune(ar,yr,mr,gr)))}async handlePrune(ar,dr){const fr=this.score.score(ar);for(const{topicID:hr,backoff:pr,peers:mr}of dr){if(hr==null)continue;const gr=this.mesh.get(hr);if(gr==null)return;if(this.log("PRUNE: Remove mesh link to %s in %s",ar,hr),this.score.prune(ar,hr),gr.has(ar)&&(gr.delete(ar),this.metrics?.onRemoveFromMesh(hr,ChurnReason.Prune,1)),typeof pr=="number"&&pr>0?this.doAddBackoff(ar,hr,pr*1e3):this.addBackoff(ar,hr),mr!=null&&mr.length>0){if(fr<this.opts.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",ar,fr,hr);continue}await this.pxConnect(mr)}}}addBackoff(ar,dr){this.doAddBackoff(ar,dr,this.opts.pruneBackoff)}doAddBackoff(ar,dr,fr){let hr=this.backoff.get(dr);hr==null&&(hr=new Map,this.backoff.set(dr,hr));const pr=Date.now()+fr;(hr.get(ar)??0)<pr&&hr.set(ar,pr)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((ar,dr)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",dr,ar),this.score.addPenalty(dr,ar,ScorePenalty.BrokenPromise)})}clearBackoff(){if(this.heartbeatTicks%GossipsubPruneBackoffTicks!==0)return;const ar=Date.now();this.backoff.forEach((dr,fr)=>{dr.forEach((hr,pr)=>{hr+BACKOFF_SLACK*this.opts.heartbeatInterval<ar&&dr.delete(pr)}),dr.size===0&&this.backoff.delete(fr)})}async directConnect(){const ar=[];this.direct.forEach(dr=>{this.streamsOutbound.has(dr)||ar.push(dr)}),await Promise.all(ar.map(async dr=>this.connect(dr)))}async pxConnect(ar){ar.length>this.opts.prunePeers&&(shuffle(ar),ar=ar.slice(0,this.opts.prunePeers));const dr=[];await Promise.all(ar.map(async fr=>{if(fr.peerID==null)return;const hr=peerIdFromBytes(fr.peerID),pr=hr.toString();if(!this.peers.has(pr)){if(fr.signedPeerRecord==null){dr.push(pr);return}try{if(!await this.components.peerStore.consumePeerRecord(fr.signedPeerRecord,hr)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}dr.push(pr)}catch{this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}})),dr.length!==0&&await Promise.all(dr.map(async fr=>this.connect(fr)))}async connect(ar){this.log("Initiating connection with %s",ar);const dr=peerIdFromString(ar),fr=await this.components.connectionManager.openConnection(dr);for(const hr of this.multicodecs)for(const pr of this.components.registrar.getTopologies(hr))pr.onConnect?.(dr,fr)}subscribe(ar){if(this.status.code!==GossipStatusCode.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(ar)){this.subscriptions.add(ar);for(const dr of this.peers.keys())this.sendSubscriptions(dr,[ar],!0)}this.join(ar)}unsubscribe(ar){if(this.status.code!==GossipStatusCode.started)throw new Error("Pubsub is not started");const dr=this.subscriptions.delete(ar);if(this.log("unsubscribe from %s - am subscribed %s",ar,dr),dr)for(const fr of this.peers.keys())this.sendSubscriptions(fr,[ar],!1);this.leave(ar)}join(ar){if(this.status.code!==GossipStatusCode.started)throw new Error("Gossipsub has not started");if(this.mesh.has(ar))return;this.log("JOIN %s",ar),this.metrics?.onJoin(ar);const dr=new Set,fr=this.backoff.get(ar),hr=this.fanout.get(ar);if(hr!=null&&(this.fanout.delete(ar),this.fanoutLastpub.delete(ar),hr.forEach(pr=>{!this.direct.has(pr)&&this.score.score(pr)>=0&&(fr==null||!fr.has(pr))&&dr.add(pr)}),this.metrics?.onAddToMesh(ar,InclusionReason.Fanout,dr.size)),dr.size<this.opts.D){const pr=dr.size;this.getRandomGossipPeers(ar,this.opts.D,gr=>!dr.has(gr)&&!this.direct.has(gr)&&this.score.score(gr)>=0&&(fr==null||!fr.has(gr))).forEach(gr=>{dr.add(gr)}),this.metrics?.onAddToMesh(ar,InclusionReason.Random,dr.size-pr)}this.mesh.set(ar,dr),dr.forEach(pr=>{this.log("JOIN: Add mesh link to %s in %s",pr,ar),this.sendGraft(pr,ar)})}leave(ar){if(this.status.code!==GossipStatusCode.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",ar),this.metrics?.onLeave(ar);const dr=this.mesh.get(ar);dr!=null&&(Promise.all(Array.from(dr).map(async fr=>{this.log("LEAVE: Remove mesh link to %s in %s",fr,ar),await this.sendPrune(fr,ar)})).catch(fr=>{this.log("Error sending prunes to mesh peers",fr)}),this.mesh.delete(ar))}selectPeersToForward(ar,dr,fr){const hr=new Set,pr=this.topics.get(ar);pr!=null&&(this.direct.forEach(gr=>{pr.has(gr)&&dr!==gr&&!(fr?.has(gr)??!1)&&hr.add(gr)}),this.floodsubPeers.forEach(gr=>{pr.has(gr)&&dr!==gr&&!(fr?.has(gr)??!1)&&this.score.score(gr)>=this.opts.scoreThresholds.publishThreshold&&hr.add(gr)}));const mr=this.mesh.get(ar);return mr!=null&&mr.size>0&&mr.forEach(gr=>{dr!==gr&&!(fr?.has(gr)??!1)&&hr.add(gr)}),hr}selectPeersToPublish(ar){const dr=new Set,fr={direct:0,floodsub:0,mesh:0,fanout:0},hr=this.topics.get(ar);if(hr!=null)if(this.opts.floodPublish)hr.forEach(pr=>{this.direct.has(pr)?(dr.add(pr),fr.direct++):this.score.score(pr)>=this.opts.scoreThresholds.publishThreshold&&(dr.add(pr),fr.floodsub++)});else{this.direct.forEach(mr=>{hr.has(mr)&&(dr.add(mr),fr.direct++)}),this.floodsubPeers.forEach(mr=>{hr.has(mr)&&this.score.score(mr)>=this.opts.scoreThresholds.publishThreshold&&(dr.add(mr),fr.floodsub++)});const pr=this.mesh.get(ar);if(pr!=null&&pr.size>0)pr.forEach(mr=>{dr.add(mr),fr.mesh++});else{const mr=this.fanout.get(ar);if(mr!=null&&mr.size>0)mr.forEach(gr=>{dr.add(gr),fr.fanout++});else{const gr=this.getRandomGossipPeers(ar,this.opts.D,yr=>this.score.score(yr)>=this.opts.scoreThresholds.publishThreshold);gr.size>0&&(this.fanout.set(ar,gr),gr.forEach(yr=>{dr.add(yr),fr.fanout++}))}this.fanoutLastpub.set(ar,Date.now())}}return{tosend:dr,tosendCount:fr}}forwardMessage(ar,dr,fr,hr){fr!=null&&this.score.deliverMessage(fr,ar,dr.topic);const pr=this.selectPeersToForward(dr.topic,fr,hr);pr.forEach(mr=>{this.sendRpc(mr,{messages:[dr]})}),this.metrics?.onForwardMsg(dr.topic,pr.size)}async publish(ar,dr,fr){const hr=Date.now(),pr=this.dataTransform!=null?this.dataTransform.outboundTransform(ar,dr):dr;if(this.publishConfig==null)throw Error("PublishError.Uninitialized");const{raw:mr,msg:gr}=await buildRawMessage(this.publishConfig,ar,dr,pr),yr=await this.msgIdFn(gr),xr=this.msgIdToStrFn(yr),wr=fr?.ignoreDuplicatePublishError??this.opts.ignoreDuplicatePublishError;if(this.seenCache.has(xr)){if(wr)return this.metrics?.onPublishDuplicateMsg(ar),{recipients:[]};throw Error("PublishError.Duplicate")}const{tosend:br,tosendCount:Sr}=this.selectPeersToPublish(ar),vr=this.opts.emitSelf&&this.subscriptions.has(ar),Er=fr?.allowPublishToZeroPeers??this.opts.allowPublishToZeroPeers;if(br.size===0&&!Er&&!vr)throw Error("PublishError.InsufficientPeers");this.seenCache.put(xr),this.mcache.put({msgId:yr,msgIdStr:xr},mr,!0),this.publishedMessageIds.put(xr);const Ar=fr?.batchPublish??this.opts.batchPublish,_r={messages:[mr]};if(Ar)this.sendRpcInBatch(br,_r);else for(const kr of br)this.sendRpc(kr,_r)||br.delete(kr);const Cr=Date.now()-hr;return this.metrics?.onPublishMsg(ar,Sr,br.size,mr.data!=null?mr.data.length:0,Cr),vr&&(br.add(this.components.peerId.toString()),super.dispatchEvent(new CustomEvent$2("gossipsub:message",{detail:{propagationSource:this.components.peerId,msgId:xr,msg:gr}})),super.dispatchEvent(new CustomEvent$2("message",{detail:gr}))),{recipients:Array.from(br.values()).map(kr=>peerIdFromString(kr))}}sendRpcInBatch(ar,dr){const fr=RPC.encode(dr).finish(),hr=encode$1.single(fr);for(const pr of ar){const mr=this.streamsOutbound.get(pr);if(mr==null){this.log(`Cannot send RPC to ${pr} as there is no open stream to it available`),ar.delete(pr);continue}try{mr.pushPrefixed(hr)}catch(gr){ar.delete(pr),this.log.error(`Cannot send rpc to ${pr}`,gr)}this.metrics?.onRpcSent(dr,fr.length)}}reportMessageValidationResult(ar,dr,fr){let hr;if(fr===TopicValidatorResult$1.Accept){if(hr=this.mcache.validate(ar),hr!=null){const{message:mr,originatingPeers:gr}=hr;this.score.deliverMessage(dr,ar,mr.topic),this.forwardMessage(ar,hr.message,dr,gr)}}else if(hr=this.mcache.remove(ar),hr!=null){const mr=rejectReasonFromAcceptance(fr),{message:gr,originatingPeers:yr}=hr;this.score.rejectMessage(dr,ar,gr.topic,mr);for(const xr of yr)this.score.rejectMessage(xr,ar,gr.topic,mr)}const pr=this.score.messageFirstSeenTimestampMs(ar);this.metrics?.onReportValidation(hr,fr,pr)}sendGraft(ar,dr){const fr=[{topicID:dr}];this.sendRpc(ar,{control:{graft:fr}})}async sendPrune(ar,dr){const hr=[await this.makePrune(ar,dr,this.opts.doPX,!0)];this.sendRpc(ar,{control:{prune:hr}})}sendRpc(ar,dr){const fr=this.streamsOutbound.get(ar);if(fr==null)return this.log(`Cannot send RPC to ${ar} as there is no open stream to it available`),!1;const hr=this.control.get(ar);hr!=null&&(this.piggybackControl(ar,dr,hr),this.control.delete(ar));const pr=this.gossip.get(ar);pr!=null&&(this.piggybackGossip(ar,dr,pr),this.gossip.delete(ar));const mr=RPC.encode(dr).finish();try{fr.push(mr)}catch(gr){return this.log.error(`Cannot send rpc to ${ar}`,gr),hr!=null&&this.control.set(ar,hr),pr!=null&&this.gossip.set(ar,pr),!1}return this.metrics?.onRpcSent(dr,mr.length),!0}piggybackControl(ar,dr,fr){if(fr.graft!=null){dr.control==null&&(dr.control={}),dr.control.graft==null&&(dr.control.graft=[]);for(const hr of fr.graft)hr.topicID!=null&&(this.mesh.get(hr.topicID)?.has(ar)??!1)&&dr.control.graft.push(hr)}if(fr.prune!=null){dr.control==null&&(dr.control={}),dr.control.prune==null&&(dr.control.prune=[]);for(const hr of fr.prune)hr.topicID!=null&&!(this.mesh.get(hr.topicID)?.has(ar)??!1)&&dr.control.prune.push(hr)}}piggybackGossip(ar,dr,fr){dr.control==null&&(dr.control={}),dr.control.ihave=fr}async sendGraftPrune(ar,dr,fr){const hr=this.opts.doPX,pr=!1;for(const[mr,gr]of ar){const yr=gr.map(br=>({topicID:br}));let xr=[];const wr=dr.get(mr);wr!=null&&(xr=await Promise.all(wr.map(async br=>this.makePrune(mr,br,hr&&!(fr.get(mr)??!1),pr))),dr.delete(mr)),this.sendRpc(mr,{control:{graft:yr,prune:xr}})}for(const[mr,gr]of dr){const yr=await Promise.all(gr.map(async xr=>this.makePrune(mr,xr,hr&&!(fr.get(mr)??!1),pr)));this.sendRpc(mr,{control:{prune:yr}})}}emitGossip(ar){const dr=this.mcache.getGossipIDs(new Set(ar.keys()));for(const[fr,hr]of ar)this.doEmitGossip(fr,hr,dr.get(fr)??[])}doEmitGossip(ar,dr,fr){if(fr.length===0||(shuffle(fr),fr.length>GossipsubMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",fr.length),dr.size===0))return;let hr=this.opts.Dlazy;const pr=GossipsubGossipFactor*dr.size;let mr=dr;pr>hr&&(hr=pr),hr>mr.size?hr=mr.size:mr=shuffle(Array.from(mr)).slice(0,hr),mr.forEach(gr=>{let yr=fr;fr.length>GossipsubMaxIHaveLength&&(yr=shuffle(yr.slice()).slice(0,GossipsubMaxIHaveLength)),this.pushGossip(gr,{topicID:ar,messageIDs:yr})})}flush(){for(const[ar,dr]of this.gossip.entries())this.gossip.delete(ar),this.sendRpc(ar,{control:{ihave:dr}});for(const[ar,dr]of this.control.entries())this.control.delete(ar),this.sendRpc(ar,{control:{graft:dr.graft,prune:dr.prune}})}pushGossip(ar,dr){this.log("Add gossip to %s",ar);const fr=this.gossip.get(ar)??[];this.gossip.set(ar,fr.concat(dr))}async makePrune(ar,dr,fr,hr){if(this.score.prune(ar,dr),this.streamsOutbound.get(ar)?.protocol===GossipsubIDv10)return{topicID:dr,peers:[]};const pr=hr?this.opts.unsubcribeBackoff:this.opts.pruneBackoff,mr=pr/1e3;if(this.doAddBackoff(ar,dr,pr),!fr)return{topicID:dr,peers:[],backoff:mr};const gr=this.getRandomGossipPeers(dr,this.opts.prunePeers,xr=>xr!==ar&&this.score.score(xr)>=0),yr=await Promise.all(Array.from(gr).map(async xr=>{const wr=peerIdFromString(xr);let br;try{br=await this.components.peerStore.get(wr)}catch(Sr){if(Sr.code!=="ERR_NOT_FOUND")throw Sr}return{peerID:wr.toBytes(),signedPeerRecord:br?.peerRecordEnvelope}}));return{topicID:dr,peers:yr,backoff:mr}}runHeartbeat=()=>{const ar=this.metrics?.heartbeatDuration.startTimer();this.heartbeat().catch(dr=>{this.log("Error running heartbeat",dr)}).finally(()=>{if(ar?.(),this.status.code===GossipStatusCode.started){clearTimeout(this.status.heartbeatTimeout);let dr=this.opts.heartbeatInterval-(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;dr<this.opts.heartbeatInterval*.25&&(dr+=this.opts.heartbeatInterval,this.metrics?.heartbeatSkipped.inc()),this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,dr)}})};async heartbeat(){const{D:ar,Dlo:dr,Dhi:fr,Dscore:hr,Dout:pr,fanoutTTL:mr}=this.opts;this.heartbeatTicks++;const gr=new Map,yr=Er=>{let Ar=gr.get(Er);return Ar===void 0&&(Ar=this.score.score(Er),gr.set(Er,Ar)),Ar},xr=new Map,wr=new Map,br=new Map;this.clearBackoff(),this.peerhave.clear(),this.metrics?.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks===0&&await this.directConnect(),this.fastMsgIdCache?.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();const Sr=new Map;this.mesh.forEach((Er,Ar)=>{const _r=this.topics.get(Ar),Cr=new Set,kr=new Set;if(Sr.set(Ar,kr),_r!=null){const Nr=shuffle(Array.from(_r)),Pr=this.backoff.get(Ar);for(const Tr of Nr){const Br=this.streamsOutbound.get(Tr);if(Br!=null&&this.multicodecs.includes(Br.protocol)&&!Er.has(Tr)&&!this.direct.has(Tr)){const Fr=yr(Tr);(Pr==null||!Pr.has(Tr))&&Fr>=0&&Cr.add(Tr),Fr>=this.opts.scoreThresholds.gossipThreshold&&kr.add(Tr)}}}const Rr=(Nr,Pr)=>{this.log("HEARTBEAT: Remove mesh link to %s in %s",Nr,Ar),this.addBackoff(Nr,Ar),Er.delete(Nr),yr(Nr)>=this.opts.scoreThresholds.gossipThreshold&&kr.add(Nr),this.metrics?.onRemoveFromMesh(Ar,Pr,1);const Tr=wr.get(Nr);Tr==null?wr.set(Nr,[Ar]):Tr.push(Ar)},Ir=(Nr,Pr)=>{this.log("HEARTBEAT: Add mesh link to %s in %s",Nr,Ar),this.score.graft(Nr,Ar),Er.add(Nr),kr.delete(Nr),this.metrics?.onAddToMesh(Ar,Pr,1);const Tr=xr.get(Nr);Tr==null?xr.set(Nr,[Ar]):Tr.push(Ar)};if(Er.forEach(Nr=>{const Pr=yr(Nr);Pr<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",Nr,Pr,Ar),Rr(Nr,ChurnReason.BadScore),br.set(Nr,!0))}),Er.size<dr){const Nr=ar-Er.size;removeFirstNItemsFromSet(Cr,Nr).forEach(Tr=>{Ir(Tr,InclusionReason.NotEnough)})}if(Er.size>fr){let Nr=Array.from(Er);Nr.sort((Tr,Br)=>yr(Br)-yr(Tr)),Nr=Nr.slice(0,hr).concat(shuffle(Nr.slice(hr)));let Pr=0;if(Nr.slice(0,ar).forEach(Tr=>{(this.outbound.get(Tr)??!1)&&Pr++}),Pr<pr){const Tr=Fr=>{const jr=Nr[Fr];for(let Ur=Fr;Ur>0;Ur--)Nr[Ur]=Nr[Ur-1];Nr[0]=jr};if(Pr>0){let Fr=Pr;for(let jr=1;jr<ar&&Fr>0;jr++)(this.outbound.get(Nr[jr])??!1)&&(Tr(jr),Fr--)}let Br=ar-Pr;for(let Fr=ar;Fr<Nr.length&&Br>0;Fr++)(this.outbound.get(Nr[Fr])??!1)&&(Tr(Fr),Br--)}Nr.slice(ar).forEach(Tr=>{Rr(Tr,ChurnReason.Excess)})}if(Er.size>=dr){let Nr=0;if(Er.forEach(Pr=>{(this.outbound.get(Pr)??!1)&&Nr++}),Nr<pr){const Pr=pr-Nr;removeItemsFromSet(Cr,Pr,Br=>this.outbound.get(Br)===!0).forEach(Br=>{Ir(Br,InclusionReason.Outbound)})}}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks===0&&Er.size>1){const Nr=Array.from(Er).sort((Br,Fr)=>yr(Br)-yr(Fr)),Pr=Math.floor(Er.size/2),Tr=yr(Nr[Pr]);if(Tr<this.opts.scoreThresholds.opportunisticGraftThreshold){const Br=this.opts.opportunisticGraftPeers,Fr=removeItemsFromSet(Cr,Br,jr=>yr(jr)>Tr);for(const jr of Fr)this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",jr,Ar),Ir(jr,InclusionReason.Opportunistic)}}});const vr=Date.now();this.fanoutLastpub.forEach((Er,Ar)=>{Er+mr<vr&&(this.fanout.delete(Ar),this.fanoutLastpub.delete(Ar))}),this.fanout.forEach((Er,Ar)=>{const _r=this.topics.get(Ar);Er.forEach(Ir=>{(!(_r?.has(Ir)??!1)||yr(Ir)<this.opts.scoreThresholds.publishThreshold)&&Er.delete(Ir)});const Cr=this.topics.get(Ar),kr=[],Rr=new Set;if(Sr.set(Ar,Rr),Cr!=null){const Ir=shuffle(Array.from(Cr));for(const Nr of Ir){const Pr=this.streamsOutbound.get(Nr);if(Pr!=null&&this.multicodecs.includes(Pr.protocol)&&!Er.has(Nr)&&!this.direct.has(Nr)){const Tr=yr(Nr);Tr>=this.opts.scoreThresholds.publishThreshold&&kr.push(Nr),Tr>=this.opts.scoreThresholds.gossipThreshold&&Rr.add(Nr)}}}if(Er.size<ar){const Ir=ar-Er.size;kr.slice(0,Ir).forEach(Nr=>{Er.add(Nr),Rr?.delete(Nr)})}}),this.emitGossip(Sr),await this.sendGraftPrune(xr,wr,br),this.flush(),this.mcache.shift(),this.dispatchEvent(new CustomEvent$2("gossipsub:heartbeat"))}getRandomGossipPeers(ar,dr,fr=()=>!0){const hr=this.topics.get(ar);if(hr==null)return new Set;let pr=[];return hr.forEach(mr=>{const gr=this.streamsOutbound.get(mr);gr!=null&&this.multicodecs.includes(gr.protocol)&&fr(mr)&&pr.push(mr)}),pr=shuffle(pr),dr>0&&pr.length>dr&&(pr=pr.slice(0,dr)),new Set(pr)}onScrapeMetrics(ar){ar.mcacheSize.set(this.mcache.size),ar.mcacheNotValidatedCount.set(this.mcache.notValidatedCount),ar.cacheSize.set({cache:"direct"},this.direct.size),ar.cacheSize.set({cache:"seenCache"},this.seenCache.size),ar.cacheSize.set({cache:"fastMsgIdCache"},this.fastMsgIdCache?.size??0),ar.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),ar.cacheSize.set({cache:"mcache"},this.mcache.size),ar.cacheSize.set({cache:"score"},this.score.size),ar.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),ar.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),ar.cacheSize.set({cache:"topics"},this.topics.size),ar.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),ar.cacheSize.set({cache:"mesh"},this.mesh.size),ar.cacheSize.set({cache:"fanout"},this.fanout.size),ar.cacheSize.set({cache:"peers"},this.peers.size),ar.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),ar.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),ar.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),ar.cacheSize.set({cache:"gossip"},this.gossip.size),ar.cacheSize.set({cache:"control"},this.control.size),ar.cacheSize.set({cache:"peerhave"},this.peerhave.size),ar.cacheSize.set({cache:"outbound"},this.outbound.size);let dr=0;const fr=Date.now();ar.connectedPeersBackoffSec.reset();for(const gr of this.backoff.values()){dr+=gr.size;for(const[yr,xr]of gr.entries())this.peers.has(yr)&&ar.connectedPeersBackoffSec.observe(Math.max(0,xr-fr)/1e3)}ar.cacheSize.set({cache:"backoff"},dr);for(const[gr,yr]of this.topics)ar.topicPeersCount.set({topicStr:gr},yr.size);for(const[gr,yr]of this.mesh)ar.meshPeerCounts.set({topicStr:gr},yr.size);const hr=[],pr=new Map;ar.behaviourPenalty.reset();for(const gr of this.peers.keys()){const yr=this.score.score(gr);hr.push(yr),pr.set(gr,yr),ar.behaviourPenalty.observe(this.score.peerStats.get(gr)?.behaviourPenalty??0)}ar.registerScores(hr,this.opts.scoreThresholds),ar.registerScorePerMesh(this.mesh,pr);const mr=computeAllPeersScoreWeights(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,ar.topicStrToLabel);ar.registerScoreWeights(mr)}}function gossipsub(cr={}){return ar=>new GossipSub(ar,cr)}function lowerBound(cr,ar,dr){let fr=0,hr=cr.length;for(;hr>0;){const pr=Math.trunc(hr/2);let mr=fr+pr;dr(cr[mr],ar)<=0?(fr=++mr,hr-=pr+1):hr=pr}return fr}class PriorityQueue{#e=[];enqueue(ar,dr){dr={priority:0,...dr};const fr={priority:dr.priority,run:ar};if(this.size&&this.#e[this.size-1].priority>=dr.priority){this.#e.push(fr);return}const hr=lowerBound(this.#e,fr,(pr,mr)=>mr.priority-pr.priority);this.#e.splice(hr,0,fr)}dequeue(){return this.#e.shift()?.run}filter(ar){return this.#e.filter(dr=>dr.priority===ar.priority).map(dr=>dr.run)}get size(){return this.#e.length}}class PQueue extends EventEmitter$2{#e;#t;#r=0;#n;#s;#a=0;#i;#o;#c;#d;#u=0;#f;#l;#h;timeout;constructor(ar){if(super(),ar={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue,...ar},!(typeof ar.intervalCap=="number"&&ar.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${ar.intervalCap?.toString()??""}\` (${typeof ar.intervalCap})`);if(ar.interval===void 0||!(Number.isFinite(ar.interval)&&ar.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${ar.interval?.toString()??""}\` (${typeof ar.interval})`);this.#e=ar.carryoverConcurrencyCount,this.#t=ar.intervalCap===Number.POSITIVE_INFINITY||ar.interval===0,this.#n=ar.intervalCap,this.#s=ar.interval,this.#c=new ar.queueClass,this.#d=ar.queueClass,this.concurrency=ar.concurrency,this.timeout=ar.timeout,this.#h=ar.throwOnTimeout===!0,this.#l=ar.autoStart===!1}get#m(){return this.#t||this.#r<this.#n}get#p(){return this.#u<this.#f}#x(){this.#u--,this.#w(),this.emit("next")}#g(){this.#E(),this.#v(),this.#o=void 0}get#y(){const ar=Date.now();if(this.#i===void 0){const dr=this.#a-ar;if(dr<0)this.#r=this.#e?this.#u:0;else return this.#o===void 0&&(this.#o=setTimeout(()=>{this.#g()},dr)),!0}return!1}#w(){if(this.#c.size===0)return this.#i&&clearInterval(this.#i),this.#i=void 0,this.emit("empty"),this.#u===0&&this.emit("idle"),!1;if(!this.#l){const ar=!this.#y;if(this.#m&&this.#p){const dr=this.#c.dequeue();return dr?(this.emit("active"),dr(),ar&&this.#v(),!0):!1}}return!1}#v(){this.#t||this.#i!==void 0||(this.#i=setInterval(()=>{this.#E()},this.#s),this.#a=Date.now()+this.#s)}#E(){this.#r===0&&this.#u===0&&this.#i&&(clearInterval(this.#i),this.#i=void 0),this.#r=this.#e?this.#u:0,this.#b()}#b(){for(;this.#w(););}get concurrency(){return this.#f}set concurrency(ar){if(!(typeof ar=="number"&&ar>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${ar}\` (${typeof ar})`);this.#f=ar,this.#b()}async#_(ar){return new Promise((dr,fr)=>{ar.addEventListener("abort",()=>{fr(ar.reason)},{once:!0})})}async add(ar,dr={}){return dr={timeout:this.timeout,throwOnTimeout:this.#h,...dr},new Promise((fr,hr)=>{this.#c.enqueue(async()=>{this.#u++,this.#r++;try{dr.signal?.throwIfAborted();let pr=ar({signal:dr.signal});dr.timeout&&(pr=pTimeout(Promise.resolve(pr),{milliseconds:dr.timeout})),dr.signal&&(pr=Promise.race([pr,this.#_(dr.signal)]));const mr=await pr;fr(mr),this.emit("completed",mr)}catch(pr){if(pr instanceof TimeoutError&&!dr.throwOnTimeout){fr();return}hr(pr),this.emit("error",pr)}finally{this.#x()}},dr),this.emit("add"),this.#w()})}async addAll(ar,dr){return Promise.all(ar.map(async fr=>this.add(fr,dr)))}start(){return this.#l?(this.#l=!1,this.#b(),this):this}pause(){this.#l=!0}clear(){this.#c=new this.#d}async onEmpty(){this.#c.size!==0&&await this.#S("empty")}async onSizeLessThan(ar){this.#c.size<ar||await this.#S("next",()=>this.#c.size<ar)}async onIdle(){this.#u===0&&this.#c.size===0||await this.#S("idle")}async#S(ar,dr){return new Promise(fr=>{const hr=()=>{dr&&!dr()||(this.off(ar,hr),fr())};this.on(ar,hr)})}get size(){return this.#c.size}sizeBy(ar){return this.#c.filter(ar).length}get pending(){return this.#u}get isPaused(){return this.#l}}var Node$1;(function(cr){let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.level!=null&&dr.level!==0&&(fr.uint32(8),fr.uint32(dr.level)),dr.key!=null&&dr.key.byteLength>0&&(fr.uint32(18),fr.bytes(dr.key)),dr.hash!=null&&dr.hash.byteLength>0&&(fr.uint32(26),fr.bytes(dr.hash)),dr.value!=null&&(fr.uint32(34),fr.bytes(dr.value)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={level:0,key:new Uint8Array(0),hash:new Uint8Array(0)},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:{hr.level=dr.uint32();break}case 2:{hr.key=dr.bytes();break}case 3:{hr.hash=dr.bytes();break}case 4:{hr.value=dr.bytes();break}default:{dr.skipType(mr&7);break}}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(Node$1||(Node$1={}));var Request$1;(function(cr){(function(dr){let fr;dr.codec=()=>(fr==null&&(fr=message((hr,pr,mr={})=>{mr.lengthDelimited!==!1&&pr.fork(),mr.lengthDelimited!==!1&&pr.ldelim()},(hr,pr)=>{const mr={},gr=pr==null?hr.len:hr.pos+pr;for(;hr.pos<gr;){const yr=hr.uint32();switch(yr>>>3){default:{hr.skipType(yr&7);break}}}return mr})),fr),dr.encode=hr=>encodeMessage(hr,dr.codec()),dr.decode=hr=>decodeMessage$1(hr,dr.codec())})(cr.GetRootRequest||(cr.GetRootRequest={})),function(dr){let fr;dr.codec=()=>(fr==null&&(fr=message((hr,pr,mr={})=>{mr.lengthDelimited!==!1&&pr.fork(),hr.level!=null&&hr.level!==0&&(pr.uint32(8),pr.uint32(hr.level)),hr.key!=null&&hr.key.byteLength>0&&(pr.uint32(18),pr.bytes(hr.key)),mr.lengthDelimited!==!1&&pr.ldelim()},(hr,pr)=>{const mr={level:0,key:new Uint8Array(0)},gr=pr==null?hr.len:hr.pos+pr;for(;hr.pos<gr;){const yr=hr.uint32();switch(yr>>>3){case 1:{mr.level=hr.uint32();break}case 2:{mr.key=hr.bytes();break}default:{hr.skipType(yr&7);break}}}return mr})),fr),dr.encode=hr=>encodeMessage(hr,dr.codec()),dr.decode=hr=>decodeMessage$1(hr,dr.codec())}(cr.GetNodeRequest||(cr.GetNodeRequest={})),function(dr){let fr;dr.codec=()=>(fr==null&&(fr=message((hr,pr,mr={})=>{mr.lengthDelimited!==!1&&pr.fork(),hr.level!=null&&hr.level!==0&&(pr.uint32(8),pr.uint32(hr.level)),hr.key!=null&&hr.key.byteLength>0&&(pr.uint32(18),pr.bytes(hr.key)),mr.lengthDelimited!==!1&&pr.ldelim()},(hr,pr)=>{const mr={level:0,key:new Uint8Array(0)},gr=pr==null?hr.len:hr.pos+pr;for(;hr.pos<gr;){const yr=hr.uint32();switch(yr>>>3){case 1:{mr.level=hr.uint32();break}case 2:{mr.key=hr.bytes();break}default:{hr.skipType(yr&7);break}}}return mr})),fr),dr.encode=hr=>encodeMessage(hr,dr.codec()),dr.decode=hr=>decodeMessage$1(hr,dr.codec())}(cr.GetChildrenRequest||(cr.GetChildrenRequest={}));let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.getRoot!=null&&(fr.uint32(10),cr.GetRootRequest.codec().encode(dr.getRoot,fr)),dr.getNode!=null&&(fr.uint32(18),cr.GetNodeRequest.codec().encode(dr.getNode,fr)),dr.getChildren!=null&&(fr.uint32(26),cr.GetChildrenRequest.codec().encode(dr.getChildren,fr)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:{hr.getRoot=cr.GetRootRequest.codec().decode(dr,dr.uint32());break}case 2:{hr.getNode=cr.GetNodeRequest.codec().decode(dr,dr.uint32());break}case 3:{hr.getChildren=cr.GetChildrenRequest.codec().decode(dr,dr.uint32());break}default:{dr.skipType(mr&7);break}}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(Request$1||(Request$1={}));var Response$1;(function(cr){(function(dr){let fr;dr.codec=()=>(fr==null&&(fr=message((hr,pr,mr={})=>{mr.lengthDelimited!==!1&&pr.fork(),hr.root!=null&&(pr.uint32(10),Node$1.codec().encode(hr.root,pr)),mr.lengthDelimited!==!1&&pr.ldelim()},(hr,pr)=>{const mr={},gr=pr==null?hr.len:hr.pos+pr;for(;hr.pos<gr;){const yr=hr.uint32();switch(yr>>>3){case 1:{mr.root=Node$1.codec().decode(hr,hr.uint32());break}default:{hr.skipType(yr&7);break}}}return mr})),fr),dr.encode=hr=>encodeMessage(hr,dr.codec()),dr.decode=hr=>decodeMessage$1(hr,dr.codec())})(cr.GetRootResponse||(cr.GetRootResponse={})),function(dr){let fr;dr.codec=()=>(fr==null&&(fr=message((hr,pr,mr={})=>{mr.lengthDelimited!==!1&&pr.fork(),hr.node!=null&&(pr.uint32(10),Node$1.codec().encode(hr.node,pr)),mr.lengthDelimited!==!1&&pr.ldelim()},(hr,pr)=>{const mr={},gr=pr==null?hr.len:hr.pos+pr;for(;hr.pos<gr;){const yr=hr.uint32();switch(yr>>>3){case 1:{mr.node=Node$1.codec().decode(hr,hr.uint32());break}default:{hr.skipType(yr&7);break}}}return mr})),fr),dr.encode=hr=>encodeMessage(hr,dr.codec()),dr.decode=hr=>decodeMessage$1(hr,dr.codec())}(cr.GetNodeResponse||(cr.GetNodeResponse={})),function(dr){let fr;dr.codec=()=>(fr==null&&(fr=message((hr,pr,mr={})=>{if(mr.lengthDelimited!==!1&&pr.fork(),hr.children!=null)for(const gr of hr.children)pr.uint32(10),Node$1.codec().encode(gr,pr);mr.lengthDelimited!==!1&&pr.ldelim()},(hr,pr)=>{const mr={children:[]},gr=pr==null?hr.len:hr.pos+pr;for(;hr.pos<gr;){const yr=hr.uint32();switch(yr>>>3){case 1:{mr.children.push(Node$1.codec().decode(hr,hr.uint32()));break}default:{hr.skipType(yr&7);break}}}return mr})),fr),dr.encode=hr=>encodeMessage(hr,dr.codec()),dr.decode=hr=>decodeMessage$1(hr,dr.codec())}(cr.GetChildrenResponse||(cr.GetChildrenResponse={}));let ar;cr.codec=()=>(ar==null&&(ar=message((dr,fr,hr={})=>{hr.lengthDelimited!==!1&&fr.fork(),dr.getRoot!=null&&(fr.uint32(10),cr.GetRootResponse.codec().encode(dr.getRoot,fr)),dr.getNode!=null&&(fr.uint32(18),cr.GetNodeResponse.codec().encode(dr.getNode,fr)),dr.getChildren!=null&&(fr.uint32(26),cr.GetChildrenResponse.codec().encode(dr.getChildren,fr)),hr.lengthDelimited!==!1&&fr.ldelim()},(dr,fr)=>{const hr={},pr=fr==null?dr.len:dr.pos+fr;for(;dr.pos<pr;){const mr=dr.uint32();switch(mr>>>3){case 1:{hr.getRoot=cr.GetRootResponse.codec().decode(dr,dr.uint32());break}case 2:{hr.getNode=cr.GetNodeResponse.codec().decode(dr,dr.uint32());break}case 3:{hr.getChildren=cr.GetChildrenResponse.codec().decode(dr,dr.uint32());break}default:{dr.skipType(mr&7);break}}}return hr})),ar),cr.encode=dr=>encodeMessage(dr,cr.codec()),cr.decode=dr=>decodeMessage$1(dr,cr.codec())})(Response$1||(Response$1={}));const encodeKey=cr=>cr??new Uint8Array([]);function encodeNode({level:cr,key:ar,hash:dr,value:fr}){return fr===void 0?{level:cr,key:encodeKey(ar),hash:dr}:{level:cr,key:encodeKey(ar),hash:dr,value:fr}}const decodeKey=cr=>cr.length===0?null:cr;function decodeNode({level:cr,key:ar,hash:dr,value:fr}){return fr===void 0?{level:cr,key:decodeKey(ar),hash:dr}:{level:cr,key:decodeKey(ar),hash:dr,value:fr}}async function*decodeResponses(cr){for await(const ar of cr)yield Response$1.decode(ar.subarray())}async function*encodeRequests(cr){for await(const ar of cr)yield Request$1.encode(ar)}class Client{constructor(ar){this.stream=ar,this.log=logger("canvas:sync:client"),this.requests=pushable$1({objectMode:!0}),this.responses=pipe(ar,decode,decodeResponses),pipe(this.requests,encodeRequests,encode$1,ar).catch(dr=>{dr instanceof Error?ar.abort(dr):ar.abort(new Error("internal error"))})}end(){this.requests.end()}async getRoot(){const{getRoot:ar}=await this.get({getRoot:{}});return assert$4(ar,"invalid RPC response type"),assert$4(ar.root,"missing `root` in getRoot RPC response"),decodeNode(ar.root)}async getNode(ar,dr){const{getNode:fr}=await this.get({getNode:{level:ar,key:encodeKey(dr)}});return assert$4(fr,"invalid RPC response type"),fr.node?decodeNode(fr.node):null}async getChildren(ar,dr){const{getChildren:fr}=await this.get({getChildren:{level:ar,key:encodeKey(dr)}});return assert$4(fr,"invalid RPC response type"),assert$4(fr.children,"missing `children` in getChildren RPC response"),fr.children.map(decodeNode)}async get(ar){this.requests.push(ar);const{done:dr,value:fr}=await this.responses.next();if(dr)throw this.log.error("stream %s ended prematurely: %O",this.stream.id,fr),new Error("stream ended prematurely");return fr}}async function*encodeResponses(cr){for await(const ar of cr)yield Response$1.encode(ar)}async function*decodeRequests(cr){for await(const ar of cr)yield Request$1.decode(ar.subarray())}class Server{constructor(ar){this.source=ar,this.log=logger("canvas:sync:server")}async*handle(ar){for await(const dr of ar)if(dr.getRoot!==void 0){const fr=await this.source.getRoot();yield{getRoot:{root:encodeNode(fr)}}}else if(dr.getNode!==void 0){const{level:fr,key:hr}=dr.getNode;assert$4(fr!=null,"missing level in getNode request");const pr=await this.source.getNode(fr,hr??null);pr===null?yield{getNode:{}}:yield{getNode:{node:encodeNode(pr)}}}else if(dr.getChildren!==void 0){assert$4(dr.getChildren,"missing request body");const{level:fr,key:hr}=dr.getChildren;assert$4(fr!=null,"missing level in getChildren request"),yield{getChildren:{children:(await this.source.getChildren(fr,hr??null)).map(encodeNode)}}}else throw new Error("invalid request type")}}const second$2=1e3,MIN_CONNECTIONS$1=2,MAX_CONNECTIONS$1=10,MAX_INBOUND_STREAMS=64,MAX_OUTBOUND_STREAMS=64,MAX_SYNC_QUEUE_SIZE=8,SYNC_COOLDOWN_PERIOD=20*second$2,SYNC_RETRY_INTERVAL=3*second$2,SYNC_RETRY_LIMIT=5;var __classPrivateFieldGet$6=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},__classPrivateFieldSet$5=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},_SyncService_controller,_SyncService_registrarId;class SyncService{constructor(ar,dr,fr){this.components=ar,this.messages=dr,this.topologyPeers=new Set,this.syncQueue=new PQueue({concurrency:1}),this.syncQueuePeers=new Set,this.syncHistory=new CacheMap(MAX_SYNC_QUEUE_SIZE),_SyncService_controller.set(this,new AbortController),_SyncService_registrarId.set(this,null),this.handleIncomingStream=async({connection:hr,stream:pr})=>{const mr=hr.remotePeer;this.log("opened incoming stream %s from peer %p",pr.id,mr);const gr=new DelayableController(3*second$2),yr=anySignal([__classPrivateFieldGet$6(this,_SyncService_controller,"f").signal,gr.signal]);yr.addEventListener("abort",xr=>{pr.status==="open"&&pr.abort(new Error("TIMEOUT"))});try{await this.messages.serve(async xr=>{const wr=new Server(xr);await pipe(pr.source,decode,decodeRequests,br=>(gr.delay(),wr.handle(br)),encodeResponses,encode$1,pr.sink)},{targetId:mr.toString()}),this.log("closed incoming stream %s from peer %p",pr.id,mr)}catch(xr){this.log.error("aborting incoming stream %s from peer %p: %O",pr.id,mr,xr),xr instanceof Error?pr.abort(xr):pr.abort(new Error("internal error"))}finally{yr.clear()}},this.log=logger(`canvas:gossiplog:[${this.topic}]:sync`),this.protocol=`/gossiplog/sync/v1/${dr.topic}`,this.maxInboundStreams=fr.maxInboundStreams??MAX_INBOUND_STREAMS,this.maxOutboundStreams=fr.maxOutboundStreams??MAX_OUTBOUND_STREAMS,this.minConnections=fr.minConnections??MIN_CONNECTIONS$1,this.maxConnections=fr.maxConnections??MAX_CONNECTIONS$1}isStarted(){return __classPrivateFieldGet$6(this,_SyncService_registrarId,"f")!==null}get topic(){return this.messages.topic}async start(){this.log("starting sync service"),await this.components.registrar.handle(this.protocol,this.handleIncomingStream,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}),__classPrivateFieldSet$5(this,_SyncService_registrarId,await this.components.registrar.register(this.protocol,{min:this.minConnections,max:this.maxConnections,onConnect:(ar,dr)=>{this.topologyPeers.add(ar.toString()),this.log("connected to peer %p",ar),this.scheduleSync(ar)},onDisconnect:ar=>{this.log("disconnected from %p",ar),this.topologyPeers.delete(ar.toString())}}),"f")}async stop(){__classPrivateFieldGet$6(this,_SyncService_registrarId,"f")!==null&&(this.log("stopping sync service"),__classPrivateFieldGet$6(this,_SyncService_controller,"f").abort(),this.syncQueue.clear(),await this.syncQueue.onIdle(),await this.components.registrar.unhandle(this.protocol),__classPrivateFieldGet$6(this,_SyncService_registrarId,"f")!==null&&(this.components.registrar.unregister(__classPrivateFieldGet$6(this,_SyncService_registrarId,"f")),__classPrivateFieldSet$5(this,_SyncService_registrarId,null,"f")))}scheduleSync(ar){const dr=ar.toString();if(this.syncQueuePeers.has(dr)){this.log("already queued sync with %p",ar);return}if(this.syncQueue.size>=MAX_SYNC_QUEUE_SIZE){this.log("sync queue is full",this.topic);return}const fr=this.syncHistory.get(dr);if(fr!==void 0){const hr=performance.now()-fr;if(this.log("last sync with %p was %ds ago",ar,Math.floor(hr/1e3)),hr<SYNC_COOLDOWN_PERIOD)return}this.syncQueuePeers.add(dr),this.syncQueue.add(async()=>{const[hr,pr]=sortPair(this.components.peerId,ar);if(hr.equals(this.components.peerId)){const mr=Math.floor(Math.random()*SYNC_RETRY_INTERVAL);this.log("waiting an initial %dms",mr),await this.wait(mr)}for(let mr=0;mr<SYNC_RETRY_LIMIT;mr++)try{const gr=await this.dial(ar);if(gr===null)throw new Error("failed to open stream");return await this.sync(ar,gr)}catch(gr){if(gr instanceof SyncTimeoutError?this.log("merkle sync timed out with %p, waiting to continue",ar):gr instanceof SyncDeadlockError?this.log("started merkle sync concurrently with %p, retrying to break deadlock",ar):this.log.error("failed to sync with peer: %O",gr),__classPrivateFieldGet$6(this,_SyncService_controller,"f").signal.aborted)break;{const yr=Math.floor(Math.random()*SYNC_RETRY_INTERVAL);this.log("waiting %dms before trying again (%d/%d)",yr,mr+1,SYNC_RETRY_LIMIT),await this.wait(yr);continue}}throw new Error("exceeded sync retry limit")}).then(()=>this.syncHistory.set(dr,performance.now())).catch(hr=>this.log.error("sync failed: %O",hr)).finally(()=>this.syncQueuePeers.delete(dr))}async sync(ar,dr){const fr=new DelayableController(3*second$2),hr=anySignal([__classPrivateFieldGet$6(this,_SyncService_controller,"f").signal,fr.signal]);hr.addEventListener("abort",mr=>{dr.status==="open"&&dr.abort(new Error("TIMEOUT"))});const pr=new Client(dr);try{this.log("initiating sync with peer %p",ar);const{root:mr,messageCount:gr}=await this.messages.sync(pr,{sourceId:ar.toString(),timeoutController:fr});this.log("finished sync with peer %p, got root hash %s (%s messages)",ar,bytesToHex$1(mr.hash),gr)}finally{hr.clear(),pr.end(),this.log("closed outgoing stream %s to peer %p",dr.id,ar)}}async dial(ar){const dr=[...this.components.connectionManager.getConnections(ar)];if(dr.length===0)return this.log("no longer connected to peer %p",ar),null;shuffle$1(dr);for(const fr of dr)if(!fr.transient){this.log("opening outgoing stream on connection %s",fr.id);try{const hr=await fr.newStream(this.protocol);return this.log("opened outgoing stream %s to peer %p",hr.id,ar),hr}catch(hr){this.log.error("failed to open outgoing stream: %O",hr);continue}}return null}async wait(ar){await wait(ar,{signal:__classPrivateFieldGet$6(this,_SyncService_controller,"f").signal})}}_SyncService_controller=new WeakMap,_SyncService_registrarId=new WeakMap;var __classPrivateFieldSet$4=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},__classPrivateFieldGet$5=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_GossipLogService_started,_GossipLogService_messageLogs,_GossipLogService_syncServices,_GossipLogService_pubsub;class GossipLogService extends TypedEventEmitter{static extractGossipSub(ar){const{pubsub:dr}=ar;return assert$4(dr!==void 0,"pubsub service not found"),assert$4(dr instanceof GossipSub),dr}constructor(ar,dr){super(),this.components=ar,this.log=logger("canvas:gossiplog"),_GossipLogService_started.set(this,!1),_GossipLogService_messageLogs.set(this,new Map),_GossipLogService_syncServices.set(this,new Map),_GossipLogService_pubsub.set(this,void 0),this.forwardEvent=fr=>this.safeDispatchEvent(fr.type,fr),this.handleMessage=async({detail:fr})=>{if(!fr.topic.startsWith(GossipLogService.topicPrefix))return;const hr=fr.topic.slice(GossipLogService.topicPrefix.length),pr=__classPrivateFieldGet$5(this,_GossipLogService_messageLogs,"f").get(hr);if(pr===void 0)return;const[mr,gr,yr]=pr.decode(fr.data);this.log("received message %s via gossipsub on %s",mr,hr),await pr.insert(gr,yr)},this.sync=dr.sync??!0,__classPrivateFieldSet$4(this,_GossipLogService_pubsub,GossipLogService.extractGossipSub(ar),"f")}isStarted(){return __classPrivateFieldGet$5(this,_GossipLogService_started,"f")}async start(){this.log("start"),__classPrivateFieldGet$5(this,_GossipLogService_pubsub,"f").addEventListener("message",this.handleMessage),__classPrivateFieldSet$4(this,_GossipLogService_started,!0,"f")}async afterStart(){this.log("afterStart");for(const ar of __classPrivateFieldGet$5(this,_GossipLogService_syncServices,"f").values())await ar.start();for(const ar of __classPrivateFieldGet$5(this,_GossipLogService_messageLogs,"f").keys())__classPrivateFieldGet$5(this,_GossipLogService_pubsub,"f").subscribe(GossipLogService.topicPrefix+ar)}async beforeStop(){this.log("beforeStop"),await Promise.all(Array.from(__classPrivateFieldGet$5(this,_GossipLogService_syncServices,"f").values()).map(ar=>ar.stop())),__classPrivateFieldGet$5(this,_GossipLogService_syncServices,"f").clear()}async stop(){this.log("stop"),__classPrivateFieldGet$5(this,_GossipLogService_pubsub,"f").removeEventListener("message",this.handleMessage),__classPrivateFieldGet$5(this,_GossipLogService_messageLogs,"f").clear(),__classPrivateFieldGet$5(this,_GossipLogService_syncServices,"f").clear(),__classPrivateFieldSet$4(this,_GossipLogService_started,!1,"f")}async subscribe(ar,dr={}){if(this.log("subscribing to %s",ar.topic),__classPrivateFieldGet$5(this,_GossipLogService_messageLogs,"f").set(ar.topic,ar),ar.addEventListener("sync",this.forwardEvent),ar.addEventListener("commit",this.forwardEvent),ar.addEventListener("message",this.forwardEvent),this.sync){const fr=new SyncService(this.components,ar,dr);__classPrivateFieldGet$5(this,_GossipLogService_syncServices,"f").set(ar.topic,fr),__classPrivateFieldGet$5(this,_GossipLogService_started,"f")&&await fr.start()}__classPrivateFieldGet$5(this,_GossipLogService_started,"f")&&__classPrivateFieldGet$5(this,_GossipLogService_pubsub,"f").subscribe(GossipLogService.topicPrefix+ar.topic)}async unsubscribe(ar){this.log("unsubscribing from %s",ar),__classPrivateFieldGet$5(this,_GossipLogService_started,"f")&&__classPrivateFieldGet$5(this,_GossipLogService_pubsub,"f").unsubscribe(GossipLogService.topicPrefix+ar);const dr=__classPrivateFieldGet$5(this,_GossipLogService_syncServices,"f").get(ar);dr!==void 0&&(await dr.stop(),__classPrivateFieldGet$5(this,_GossipLogService_syncServices,"f").delete(ar));const fr=__classPrivateFieldGet$5(this,_GossipLogService_messageLogs,"f").get(ar);fr!==void 0&&(fr.removeEventListener("sync",this.forwardEvent),fr.removeEventListener("commit",this.forwardEvent),fr.removeEventListener("message",this.forwardEvent),__classPrivateFieldGet$5(this,_GossipLogService_messageLogs,"f").delete(ar))}async append(ar,dr,fr={}){const hr=__classPrivateFieldGet$5(this,_GossipLogService_messageLogs,"f").get(ar);assert$4(hr!==void 0,"no subscription for topic");const{id:pr,signature:mr,message:gr,result:yr}=await hr.append(dr,fr);if(__classPrivateFieldGet$5(this,_GossipLogService_started,"f")){const[xr,wr]=hr.encode(mr,gr);assert$4(decodeId(xr)===pr);const br=__classPrivateFieldGet$5(this,_GossipLogService_pubsub,"f").publish(GossipLogService.topicPrefix+ar,wr).then(({recipients:Sr})=>(this.log("published message %s to %d recipients %O",pr,Sr.length,Sr),Sr),Sr=>(this.log.error("failed to publish event: %O",Sr),[]));return{id:pr,result:yr,recipients:br}}else return{id:pr,result:yr,recipients:Promise.resolve([])}}async insert(ar,dr){const fr=__classPrivateFieldGet$5(this,_GossipLogService_messageLogs,"f").get(dr.topic);assert$4(fr!==void 0,"topic not found");const{id:hr}=await fr.insert(ar,dr);if(__classPrivateFieldGet$5(this,_GossipLogService_started,"f")){const[pr,mr]=fr.encode(ar,dr),gr=decodeId(pr),yr=__classPrivateFieldGet$5(this,_GossipLogService_pubsub,"f").publish(GossipLogService.topicPrefix+dr.topic,mr).then(({recipients:xr})=>(this.log("published message %s to %d recipients %O",gr,xr.length,xr),xr),xr=>(this.log.error("failed to publish event: %O",xr),[]));return{id:gr,recipients:yr}}else return{id:hr,recipients:Promise.resolve([])}}getTopics(){return[...__classPrivateFieldGet$5(this,_GossipLogService_messageLogs,"f").keys()]}}_GossipLogService_started=new WeakMap,_GossipLogService_messageLogs=new WeakMap,_GossipLogService_syncServices=new WeakMap,_GossipLogService_pubsub=new WeakMap;GossipLogService.topicPrefix="canvas/";const gossiplog=cr=>ar=>new GossipLogService(ar,cr);function isLoopbackAddr(cr){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(cr)||/^::1$/.test(cr)}function isLoopback(cr){const{address:ar}=cr.nodeAddress();return isLoopbackAddr(ar)}const second$1=1e3;function assert$2(cr,ar){if(!cr)throw new Error(ar??"assertion failed")}var __classPrivateFieldGet$4=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},__classPrivateFieldSet$3=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},_DiscoveryService_discoveryQueue,_DiscoveryService_dialQueue,_DiscoveryService_registrarId,_DiscoveryService_heartbeatTimer,_DiscoveryService_evictionTimer;const defaultHeartbeatInterval=60*1e3,defaultEvictionInterval=5*1e3,defaultEvictionThreshold=90*1e3,defaultResponseHeartbeatThreshold=15*1e3;class DiscoveryService extends TypedEventEmitter{static extractGossipSub(ar){return assert$2(ar.pubsub!==void 0),ar.pubsub}static extractFetchService(ar){return assert$2(ar.fetch!==void 0),ar.fetch}constructor(ar,dr){super(),this.components=ar,this.log=logger("canvas:discovery"),this.topologyPeers=new Set,this.discoveryPeers={},this.lastResponseHeartbeat=new Date().getTime(),_DiscoveryService_discoveryQueue.set(this,new PQueue({concurrency:1})),_DiscoveryService_dialQueue.set(this,new PQueue({concurrency:5})),_DiscoveryService_registrarId.set(this,null),_DiscoveryService_heartbeatTimer.set(this,null),_DiscoveryService_evictionTimer.set(this,null),this.handleFetch=async fr=>{if(!fr.startsWith(DiscoveryService.FETCH_KEY_PREFIX)&&!fr.startsWith(DiscoveryService.FETCH_ALL_KEY_PREFIX))return;const hr=fr.startsWith(DiscoveryService.FETCH_KEY_PREFIX)?fr.slice(DiscoveryService.FETCH_KEY_PREFIX.length):fr.slice(DiscoveryService.FETCH_ALL_KEY_PREFIX.length),pr=fr.startsWith(DiscoveryService.FETCH_ALL_KEY_PREFIX);pr?this.log("handling fetch request for all peers"):this.log("handling fetch request for peers on topic %s",hr);const mr=this.pubsub.getSubscribers(hr);if(pr){const yr=mr.map(xr=>xr.toString());for(const xr of Object.values(this.discoveryPeers).map(wr=>wr.peerId))yr.includes(xr.toString())||mr.push(xr)}const gr=new Map;for(const yr of mr){const{peerRecordEnvelope:xr}=await this.components.peerStore.get(yr);xr!==void 0&&gr.set(yr,{topics:this.discoveryPeers[yr.toString()].topics??[],address:this.discoveryPeers[yr.toString()].address??null,env:this.discoveryPeers[yr.toString()].env??null,peerRecordEnvelope:xr})}return pr?this.log("found %d known peers for all topics: %o",gr.size,[...gr.keys()]):this.log("found %d subscribers for topic %s: %o",gr.size,hr,[...gr.keys()]),encode$9([...gr.values()])},this.pubsub=DiscoveryService.extractGossipSub(ar),this.fetch=DiscoveryService.extractFetchService(ar),this.minPeersPerTopic=dr.minPeersPerTopic??DiscoveryService.MIN_PEERS_PER_TOPIC,this.autoDialPriority=dr.autoDialPriority??DiscoveryService.AUTO_DIAL_PRIORITY,this.topicFilter=dr.topicFilter??(fr=>!0),this.discoveryTopic=dr.discoveryTopic??null,this.discoveryInterval=dr.discoveryInterval??defaultHeartbeatInterval,this.evictionInterval=dr.evictionInterval??defaultEvictionInterval,this.evictionThreshold=dr.evictionThreshold??defaultEvictionThreshold,this.responseHeartbeatThreshold=dr.responseHeartbeatThreshold??defaultResponseHeartbeatThreshold,this.addressFilter=dr.addressFilter??(fr=>!0),this.signers=dr.signers??null,this.appTopic=dr.appTopic??null,this.trackAllPeers=dr.trackAllPeers??!1}get[(_DiscoveryService_discoveryQueue=new WeakMap,_DiscoveryService_dialQueue=new WeakMap,_DiscoveryService_registrarId=new WeakMap,_DiscoveryService_heartbeatTimer=new WeakMap,_DiscoveryService_evictionTimer=new WeakMap,peerDiscoverySymbol)](){return this}get[Symbol.toStringTag](){return"@canvas-js/discovery"}isStarted(){return __classPrivateFieldGet$4(this,_DiscoveryService_registrarId,"f")===null}async start(){this.fetch.registerLookupFunction(DiscoveryService.FETCH_ALL_KEY_PREFIX,this.handleFetch),this.fetch.registerLookupFunction(DiscoveryService.FETCH_KEY_PREFIX,this.handleFetch),__classPrivateFieldSet$3(this,_DiscoveryService_registrarId,await this.components.registrar.register(multicodec,{onConnect:(ar,dr)=>{dr.transient||(this.topologyPeers.add(ar.toString()),this.handleConnect(dr))},onDisconnect:ar=>{this.topologyPeers.delete(ar.toString()),delete this.discoveryPeers[ar.toString()]}}),"f")}async afterStart(){this.log("afterStart",this.discoveryTopic),this.discoveryTopic!==null&&(this.pubsub.subscribe(this.discoveryTopic),this.pubsub.addEventListener("message",async({detail:ar})=>{if(ar.topic!==this.discoveryTopic)return;const dr=decode$6(ar.data);if(assert$2(typeof dr=="object",'typeof payload === "object"'),dr instanceof Uint8Array)return;const{topics:fr,address:hr,env:pr,peerRecordEnvelope:mr}=dr;assert$2(Array.isArray(fr),"expected Array.isArray(topics)"),assert$2(mr instanceof Uint8Array,"expected peerRecordEnvelope instanceof Uint8Array");const{peerId:gr,multiaddrs:yr}=await this.openPeerRecord(mr);this.log("received heartbeat from %s with topics %o",gr,fr),this.dispatchEvent(new CustomEvent$2("peer:topics",{detail:{peerId:gr,topics:fr}})),this.handlePeerEvent(gr,yr,pr,hr,fr,"active");const xr=this.pubsub.getTopics().filter(wr=>fr.includes(wr));if(xr.length!==0){await this.components.peerStore.consumePeerRecord(mr,gr),this.dispatchEvent(new CustomEvent$2("peer",{detail:{id:gr,multiaddrs:yr,protocols:[]}}));for(const wr of xr)this.pubsub.getMeshPeers(wr).length>=this.minPeersPerTopic||await this.connect(gr,yr)}}),__classPrivateFieldSet$3(this,_DiscoveryService_heartbeatTimer,setInterval(()=>this.publishHeartbeat(),this.discoveryInterval),"f"),this.components.events.addEventListener("connection:open",({detail:ar})=>{setTimeout(()=>{this.publishHeartbeat(),this.lastResponseHeartbeat=0},1e3)},{once:!0}),this.addEventListener("presence:join",({detail:{peerId:ar}})=>{this.lastResponseHeartbeat>new Date().getTime()-this.responseHeartbeatThreshold||(this.lastResponseHeartbeat=new Date().getTime(),this.publishHeartbeat())}),setTimeout(()=>{Object.entries(this.discoveryPeers).forEach(([ar,{lastSeen:dr}])=>{dr===null&&(delete this.discoveryPeers[ar.toString()],this.dispatchEvent(new CustomEvent$2("presence:leave",{detail:{peerId:ar,peers:this.discoveryPeers}})))})},this.discoveryInterval+this.evictionInterval),__classPrivateFieldSet$3(this,_DiscoveryService_evictionTimer,setInterval(()=>{Object.entries(this.discoveryPeers).forEach(([ar,{lastSeen:dr}])=>{dr!==null&&dr<new Date().getTime()-this.evictionThreshold&&(delete this.discoveryPeers[ar.toString()],this.dispatchEvent(new CustomEvent$2("presence:leave",{detail:{peerId:ar,peers:this.discoveryPeers}})))})},this.evictionInterval),"f"))}async publishHeartbeat(){if(this.log("publishing heartbeat"),this.discoveryTopic===null||__classPrivateFieldGet$4(this,_DiscoveryService_heartbeatTimer,"f")===null)return;const ar=this.pubsub.getTopics().filter(yr=>this.topicFilter(yr)),dr=this.components.addressManager.getAddresses().filter(yr=>!isLoopback(yr)&&!isPrivate(yr));dr.length===0&&this.log.error("no multiaddrs to publish");let fr=null;if(this.appTopic!==null&&this.signers!==null)for(const yr of this.signers.getAll())try{const xr=Date.now();fr=(await yr.getSession(this.appTopic,{timestamp:xr,fromCache:!0})).address}catch{continue}const hr=new PeerRecord({multiaddrs:dr,peerId:this.components.peerId}),pr=await RecordEnvelope.seal(hr,this.components.peerId),gr={topics:ar,address:fr,env:typeof window=="object"?"browser":"server",peerRecordEnvelope:pr.marshal()};this.pubsub.publish(this.discoveryTopic,encode$9(gr)).then(({recipients:yr})=>this.log("published heartbeat to %d recipients",yr.length),yr=>this.log.error("failed to publish heartbeat: %o",yr))}async beforeStop(){__classPrivateFieldGet$4(this,_DiscoveryService_heartbeatTimer,"f")!==null&&(clearInterval(__classPrivateFieldGet$4(this,_DiscoveryService_heartbeatTimer,"f")),__classPrivateFieldSet$3(this,_DiscoveryService_heartbeatTimer,null,"f")),__classPrivateFieldGet$4(this,_DiscoveryService_evictionTimer,"f")!==null&&(clearInterval(__classPrivateFieldGet$4(this,_DiscoveryService_evictionTimer,"f")),__classPrivateFieldSet$3(this,_DiscoveryService_evictionTimer,null,"f")),this.fetch.unregisterLookupFunction(DiscoveryService.FETCH_KEY_PREFIX,this.handleFetch),this.fetch.unregisterLookupFunction(DiscoveryService.FETCH_ALL_KEY_PREFIX,this.handleFetch),__classPrivateFieldGet$4(this,_DiscoveryService_discoveryQueue,"f").clear(),await __classPrivateFieldGet$4(this,_DiscoveryService_discoveryQueue,"f").onIdle()}async stop(){__classPrivateFieldGet$4(this,_DiscoveryService_registrarId,"f")!==null&&(this.components.registrar.unregister(__classPrivateFieldGet$4(this,_DiscoveryService_registrarId,"f")),__classPrivateFieldSet$3(this,_DiscoveryService_registrarId,null,"f"))}handleConnect(ar){this.log("new connection to peer %p",ar.remotePeer),__classPrivateFieldGet$4(this,_DiscoveryService_discoveryQueue,"f").add(async()=>{for(const dr of this.pubsub.getTopics().filter(this.topicFilter)){const fr=this.pubsub.getMeshPeers(dr);if(fr.length>=this.minPeersPerTopic)continue;this.log("want more peers for topic %s",dr);const hr=(this.trackAllPeers?DiscoveryService.FETCH_ALL_KEY_PREFIX:DiscoveryService.FETCH_KEY_PREFIX)+dr;this.log("fetching new peers from %p",hr,ar.remotePeer);const pr=await this.fetch.fetch(ar.remotePeer,hr).catch(gr=>{});if(pr===void 0){this.log("no response from %p",ar.remotePeer);continue}const mr=decode$6(pr);if(assert$2(Array.isArray(mr),"expected Array.isArray(peers)"),this.log("got %d peers via fetch from %p",mr.length,ar.remotePeer),mr[0]instanceof Uint8Array)return;for(const{topics:gr,address:yr,env:xr,peerRecordEnvelope:wr}of mr){assert$2(Array.isArray(gr),"expected Array.isArray(topics)"),assert$2(wr instanceof Uint8Array,"expected record instanceof Uint8Array");const{peerId:br,multiaddrs:Sr}=await this.openPeerRecord(wr);if(br.equals(this.components.peerId))return;if(fr.includes(br.toString()))return;this.dispatchEvent(new CustomEvent$2("peer",{detail:{id:br,multiaddrs:Sr,protocols:[]}})),this.handlePeerEvent(br,Sr,xr,yr,gr,"passive"),await this.components.peerStore.consumePeerRecord(wr,br),__classPrivateFieldGet$4(this,_DiscoveryService_dialQueue,"f").add(()=>this.connect(br,Sr))}}}).catch(dr=>{this.log.error("error handling new connection to %p: %O",ar.remoteAddr.toString(),dr)})}async openPeerRecord(ar){const dr=await RecordEnvelope.openAndCertify(ar,PeerRecord.DOMAIN),{peerId:fr,multiaddrs:hr}=PeerRecord.createFromProtobuf(dr.payload);return assert$2(dr.peerId.equals(fr),"expected envelope.peerId.equals(peerId)"),{peerId:fr,multiaddrs:hr}}connect(ar,dr){if(ar.equals(this.components.peerId))return this.log("cannot connect to self"),Promise.resolve();if(this.components.connectionManager.getConnections(ar).length>0)return Promise.resolve();const hr=dr.filter(pr=>this.addressFilter(pr)).map(pr=>{const mr=pr.toString();return mr.endsWith(`/p2p/${ar}`)?pr:multiaddr(`${mr}/p2p/${ar}`)});return hr.length===0?(this.log("no dialable addresses"),Promise.resolve()):(this.log("dialing %O",hr.map(pr=>pr.toString())),this.components.connectionManager.openConnection(hr,{priority:this.autoDialPriority}).then(()=>{this.log("connection opened successfully")},pr=>this.log.error("failed to open new connection to %p: %O",ar,pr)))}async handlePeerEvent(ar,dr,fr,hr=null,pr=[],mr){const gr=this.discoveryPeers[ar.toString()]!==void 0;let yr=null;mr==="passive"&&this.discoveryPeers[ar.toString()]?yr=this.discoveryPeers[ar.toString()].lastSeen:mr==="active"&&(yr=new Date().getTime()),this.discoveryPeers[ar.toString()]?(this.discoveryPeers[ar.toString()].lastSeen=yr,this.discoveryPeers[ar.toString()].env=fr,this.discoveryPeers[ar.toString()].address=hr,this.discoveryPeers[ar.toString()].topics=pr):this.discoveryPeers[ar.toString()]={peerId:ar,lastSeen:yr,env:fr,address:hr,topics:pr};const wr=this.pubsub.getTopics().filter(br=>pr.includes(br)).length>0||this.trackAllPeers;!gr&&wr&&this.dispatchEvent(new CustomEvent$2("presence:join",{detail:{peerId:ar,env:fr,address:hr,topics:pr,peers:this.discoveryPeers}}))}}DiscoveryService.FETCH_KEY_PREFIX="discovery/";DiscoveryService.FETCH_ALL_KEY_PREFIX="discovery-all/";DiscoveryService.MIN_PEERS_PER_TOPIC=5;DiscoveryService.NEW_CONNECTION_TIMEOUT=20*second$1;DiscoveryService.NEW_STREAM_TIMEOUT=10*second$1;DiscoveryService.AUTO_DIAL_PRIORITY=1;function discovery(cr={}){return ar=>new DiscoveryService(ar,cr)}const defaultBootstrapList=["/dns4/canvas-bootstrap-p0.fly.dev/tcp/443/wss/p2p/12D3KooWP4DLJuVUKoThfzYugv8c326MuM2Tx38ybvEyDjLQkE2o","/dns4/canvas-bootstrap-p1.fly.dev/tcp/443/wss/p2p/12D3KooWRftkCBMtYou4pM3VKdqkKVDAsWXnc8NabUNzx7gp7cPT","/dns4/canvas-bootstrap-p2.fly.dev/tcp/443/wss/p2p/12D3KooWPopNdRnzswSd8oVxrUBKGhgKzkYALETK7EHkToy7DKk3"],second=1e3,PING_TIMEOUT=3*second,MIN_CONNECTIONS=5,MAX_CONNECTIONS=300,DIAL_CONCURRENCY=10;function getLibp2pOptions(cr,ar,dr){const fr=dr.announce??[],hr=dr.enableWebRTC??!1,pr=dr.listen??(hr?["/webrtc"]:[]),mr=dr.bootstrapList??defaultBootstrapList;for(const xr of fr)console.log(`[canvas] Announcing on ${xr}/p2p/${cr}`);for(const xr of pr)console.log(`[canvas] Listening on ${xr}`);const gr=new Set;for(const xr of mr){const wr=multiaddr(xr).getPeerId();wr!==null&&gr.add(wr)}function yr(xr){return!1}return{start:!dr.offline,peerId:cr,addresses:{listen:pr,announce:fr},connectionGater:{denyDialMultiaddr:yr},connectionManager:{minConnections:dr.minConnections??MIN_CONNECTIONS,maxConnections:dr.maxConnections??MAX_CONNECTIONS,autoDialConcurrency:DIAL_CONCURRENCY},transports:[webSockets({filter:all}),...hr?[circuitRelayTransport({discoverRelays:mr.length}),webRTC({})]:[]],connectionEncryption:[noise()],streamMuxers:[mplex({disconnectThreshold:20})],peerDiscovery:mr.length===0?[]:[bootstrap({list:mr})],services:{identify:identify({protocolPrefix:"canvas"}),ping:ping({protocolPrefix:"canvas",maxInboundStreams:32,maxOutboundStreams:32,timeout:PING_TIMEOUT,runOnTransientConnection:!1}),pubsub:gossipsub({emitSelf:!1,fallbackToFloodsub:!1,allowPublishToZeroPeers:!0,globalSignaturePolicy:"StrictNoSign",scoreParams:{behaviourPenaltyWeight:-1,retainScore:10*1e3},scoreThresholds:{gossipThreshold:-999999999,publishThreshold:-999999999,graylistThreshold:-999999999}}),gossiplog:gossiplog({}),fetch:fetch$1({protocolPrefix:"canvas"}),discovery:discovery({discoveryTopic:dr.discoveryTopic,discoveryInterval:dr.discoveryInterval,trackAllPeers:dr.trackAllPeers,evictionThreshold:dr.presenceTimeout,topicFilter:xr=>xr.startsWith(GossipLogService.topicPrefix),addressFilter:xr=>WebSockets$2.matches(xr)||WebSocketsSecure$1.matches(xr)||hr&&WebRTC.matches(xr),signers:dr.signers,appTopic:ar})}}}const target={openDB:({topic:cr},ar,{indexHistory:dr}={})=>ModelDB.initialize({name:`canvas/${cr}/db`,models:ar,indexHistory:dr}),openGossipLog:({topic:cr},ar)=>GossipLog.open(ar),async createLibp2p(cr,ar){const dr=await getPeerId(cr);return await createLibp2p(getLibp2pOptions(dr,cr.topic,ar))}};async function getPeerId({topic:cr}){const ar=`canvas/${cr}/peer-id`,dr=localStorage.getItem(ar);let fr;if(dr===null){fr=await createEd25519PeerId();const hr=exportToProtobuf(fr);localStorage.setItem(ar,base64$4.baseEncode(hr))}else fr=await createFromProtobuf(base64$4.baseDecode(dr));return new Promise(hr=>{navigator.locks.request(`canvas:libp2p-lock:${fr.toString()}`,{ifAvailable:!0},async pr=>(pr||(fr=await createEd25519PeerId()),hr(fr),new Promise(mr=>{})))})}async function E(cr){let ar=c(await cr),[dr,fr,{QuickJSWASMModule:hr}]=await Promise.all([ar.importModuleLoader().then(c),ar.importFFI(),__vitePreload(()=>import("./module-3DA4OHAX-3f842ae2.js"),[]).then(c)]),pr=await dr();pr.type="sync";let mr=new fr(pr);return new hr(pr,mr)}function c(cr){return cr&&"default"in cr&&cr.default?cr.default&&"default"in cr.default&&cr.default.default?cr.default.default:cr.default:cr}function $(cr){return"error"in cr}var i$1={type:"sync",importFFI:()=>__vitePreload(()=>import("./ffi-464dd487.js"),[]).then(cr=>cr.QuickJSFFI),importModuleLoader:()=>__vitePreload(()=>import("./emscripten-module.browser-b6b06c07.js"),[]).then(cr=>cr.default)},o=i$1;async function M(cr=o){return E(cr)}var i;async function d(){return i??(i=M().then(cr=>cr)),await i}function assert$1(cr,ar){if(!cr)throw new Error(ar??"assertion failed")}const mapValues$1=(cr,ar)=>Object.fromEntries(Object.entries(cr).map(([dr,fr])=>[dr,ar(fr)]));class VMError extends Error{constructor(ar){super(`[${ar.name}: ${ar.message}]`),this.err=ar}}var __classPrivateFieldGet$3=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},_VM_globalCache,_VM_localCache;class VM{static async initialize(ar={}){const fr=(await d()).newRuntime(),hr=fr.newContext();return new VM(fr,hr,ar)}constructor(ar,dr,fr){this.runtime=ar,this.context=dr,this.log=logger("canvas:vm"),_VM_globalCache.set(this,new Map),_VM_localCache.set(this,new Set),this.get=pr=>{const mr=__classPrivateFieldGet$3(this,_VM_globalCache,"f").get(pr);if(mr!==void 0)return mr;const gr=pr.split("."),yr=gr.pop();assert$1(yr!==void 0);const xr=gr.length>0?this.get(gr.join(".")):this.context.global,wr=this.context.getProp(xr,yr);return __classPrivateFieldGet$3(this,_VM_globalCache,"f").set(pr,wr),wr},this.resolvePromise=pr=>new Promise((mr,gr)=>{this.context.resolvePromise(pr).then(yr=>{$(yr)?gr(yr.error.consume(this.unwrapError)):mr(yr.value)},gr),this.runtime.executePendingJobs()}),this.call=(pr,mr,gr)=>{const yr=this.context.callFunction(typeof pr=="string"?this.get(pr):pr,typeof mr=="string"?this.get(mr):mr,...gr);return this.unwrapResult(yr)},this.callAsync=async(pr,mr,gr)=>{const yr=this.call(pr,mr,gr);return this.isInstanceOf(yr,this.get("Promise"))?yr.consume(this.resolvePromise):yr},this.unwrapError=pr=>new VMError(this.context.dump(pr)),this.wrapError=pr=>{const mr=pr instanceof Error?pr:new Error(String(pr));let gr="Error";mr instanceof SyntaxError?gr="SyntaxError":mr instanceof TypeError?gr="TypeError":mr instanceof RangeError&&(gr="RangeError");const yr=[this.context.newString(mr.message)];try{const xr=this.call(gr,this.context.null,yr);return mr.stack!==void 0&&this.context.setProp(xr,"stack",this.context.newString(mr.stack)),xr}finally{yr.forEach(xr=>xr.dispose())}},this.unwrapResult=pr=>{if($(pr))throw pr.error.consume(this.unwrapError);return pr.value},this.getBoolean=pr=>!!this.context.getNumber(pr),this.getUint8Array=pr=>Uint8Array.from(this.call("Array.from","Array",[pr]).consume(this.context.dump)),this.newUint8Array=pr=>{const mr=Array.from(pr).map(gr=>this.context.newNumber(gr));return this.wrapArray(mr).consume(gr=>this.call("Uint8Array.from","Uint8Array",[gr]))},this.wrapArray=pr=>{const mr=this.context.newArray();for(const gr of pr)this.call("Array.prototype.push",mr,[gr]).dispose(),gr.dispose();return mr},this.unwrapArray=(pr,mr)=>{const gr=this.context.getProp(pr,"length").consume(this.context.getNumber),yr=new Array(gr);for(let xr=0;xr<gr;xr++){const wr=this.context.newNumber(xr).consume(br=>this.context.getProp(pr,br));mr===void 0?yr[xr]=wr:yr[xr]=mr(wr)}return yr},this.wrapObject=pr=>{const mr=this.context.newObject();for(const[gr,yr]of Object.entries(pr))yr.consume(xr=>this.context.setProp(mr,gr,xr));return mr},this.unwrapObject=(pr,mr)=>{const gr={},yr=this.call("Object.keys",this.context.null,[pr]).consume(this.unwrapArray);for(const xr of yr){const wr=this.context.getProp(pr,xr),br=xr.consume(this.context.getString);mr===void 0?gr[br]=wr:gr[br]=mr(wr)}return gr},this.wrapValue=pr=>pr===void 0?this.context.undefined:pr===null?this.context.null:typeof pr=="boolean"?pr?this.context.true:this.context.false:typeof pr=="number"?this.context.newNumber(pr):typeof pr=="string"?this.context.newString(pr):pr instanceof Uint8Array?this.newUint8Array(pr):Array.isArray(pr)?this.wrapArray(pr.map(this.wrapValue)):this.wrapObject(mapValues$1(pr,this.wrapValue)),this.is=(pr,mr)=>this.call("Object.is",this.context.null,[pr,mr]).consume(this.context.dump),this.isArray=pr=>this.context.typeof(pr)==="object"&&this.call("Array.isArray",this.context.null,[pr]).consume(this.context.dump),this.isInstanceOf=(pr,mr)=>this.context.typeof(pr)==="object"&&this.context.getProp(pr,"constructor").consume(gr=>this.is(gr,mr)),this.isUint8Array=pr=>this.isInstanceOf(pr,this.get("Uint8Array")),this.unwrapValue=pr=>{if(this.is(pr,this.context.undefined))throw new Error("cannot unwrap `undefined`");return this.is(pr,this.context.null)?null:this.context.typeof(pr)==="boolean"?this.getBoolean(pr):this.context.typeof(pr)==="number"?this.context.getNumber(pr):this.context.typeof(pr)==="string"?this.context.getString(pr):this.isUint8Array(pr)?this.getUint8Array(pr):this.isArray(pr)?this.unwrapArray(pr,mr=>mr.consume(this.unwrapValue)):this.unwrapObject(pr,mr=>mr.consume(this.unwrapValue))},this.wrapFunction=pr=>{const mr=gr=>gr===void 0?this.context.undefined:this.wrapValue(gr);return this.context.newFunction(pr.name,(...gr)=>{let yr;this.log("invoking function");try{yr=pr(...gr.map(this.unwrapValue))}catch(xr){return this.log("caught error in wrapped function: %O",xr),this.wrapError(xr)}if(this.log("got result"),yr instanceof Promise){const xr=this.context.newPromise();return yr.then(wr=>{this.log("resolving deferred promise");const br=mr(wr);xr.settled.then(()=>br.dispose()),xr.resolve(br)},wr=>{this.log("rejecting deferred promise"),xr.reject(this.wrapError(wr))}),xr.settled.finally(()=>this.runtime.executePendingJobs()),xr.handle}else return mr(yr)})},this.unwrapFunction=(pr,mr)=>{const gr=pr.dup();__classPrivateFieldGet$3(this,_VM_localCache,"f").add(gr);let yr=gr;return mr!==void 0&&(yr=mr.dup(),__classPrivateFieldGet$3(this,_VM_localCache,"f").add(yr)),(...xr)=>{const wr=xr.map(this.wrapValue);try{const br=this.call(gr,yr,wr);if(this.context.typeof(br)!=="undefined")return br.consume(this.unwrapValue)}finally{wr.forEach(br=>br.dispose())}}},this.unwrapFunctionAsync=(pr,mr)=>{const gr=this.cache(pr),yr=mr?this.cache(mr):gr;return async(...xr)=>{const wr=xr.map(this.wrapValue);try{const br=await this.callAsync(gr,yr,wr);if(this.context.typeof(br)!=="undefined")return br.consume(this.unwrapValue)}finally{wr.forEach(br=>br.dispose())}}},this.cache=pr=>{const mr=pr.dup();return __classPrivateFieldGet$3(this,_VM_localCache,"f").add(mr),mr},this.runtime.setMemoryLimit(fr.runtimeMemoryLimit??VM.RUNTIME_MEMORY_LIMIT);const hr=fr.log??((...pr)=>console.log("[vm]",...pr));this.setGlobalValues({console:this.wrapObject({log:this.wrapFunction((...pr)=>void hr(...pr))})})}dispose(){for(const[ar,dr]of __classPrivateFieldGet$3(this,_VM_globalCache,"f"))dr.dispose(),__classPrivateFieldGet$3(this,_VM_globalCache,"f").delete(ar);for(const ar of __classPrivateFieldGet$3(this,_VM_localCache,"f"))ar.dispose(),__classPrivateFieldGet$3(this,_VM_localCache,"f").delete(ar);this.context.dispose(),this.runtime.dispose()}setGlobalValues(ar){for(const[dr,fr]of Object.entries(ar))fr.consume(hr=>this.context.setProp(this.context.global,dr,hr))}execute(ar,dr={}){const fr=dr.uri??`canvas:${bytesToHex$1(sha256$3(ar))}`;this.unwrapResult(this.context.evalCode(ar,fr,{type:"globalThis",strict:!0})).dispose()}async import(ar,dr={}){const fr=dr.uri??`canvas:${bytesToHex$1(sha256$3(ar))}`;this.runtime.setModuleLoader(hr=>hr===fr?ar:{error:new Error("module not found")});try{return await this.unwrapResult(this.context.evalCode(`import("${fr}")`,void 0,{type:"globalThis",strict:!0})).consume(this.resolvePromise)}finally{this.runtime.removeModuleLoader()}}}_VM_globalCache=new WeakMap,_VM_localCache=new WeakMap;VM.RUNTIME_MEMORY_LIMIT=1024*640;function assert(cr,ar){if(!cr)throw new Error(ar??"assertion failed")}const mapEntries=(cr,ar)=>Object.fromEntries(Object.entries(cr).map(([dr,fr])=>[dr,ar([dr,fr])])),mapValues=(cr,ar)=>Object.fromEntries(Object.entries(cr).map(([dr,fr])=>[dr,ar(fr)]));class AbstractRuntime{static getModelSchema(ar,dr){return dr.indexHistory?{...ar,...AbstractRuntime.sessionsModel,...AbstractRuntime.effectsModel}:{...ar,...AbstractRuntime.sessionsModel,...AbstractRuntime.versionsModel}}constructor(ar,dr){this.indexHistory=ar,this.ignoreMissingActions=dr,this.log=logger("canvas:runtime")}async close(){await this.db.close()}getConsumer(){const ar=this;return async function(dr,fr,hr){if(assert(fr!==null,"missing message signature"),AbstractRuntime.isSession(hr)){const{publicKey:pr,address:mr,timestamp:gr,duration:yr}=hr.payload,xr=ar.signers.getAll().find(wr=>wr.match(mr));assert(xr!==void 0,"no signer found"),assert(pr===fr.publicKey),await xr.verifySession(ar.topic,hr.payload),await ar.db.set("$sessions",{message_id:dr,public_key:pr,address:mr,expiration:yr===null?Number.MAX_SAFE_INTEGER:gr+yr,rawMessage:bytesToHex$1(encode$9(hr)),rawSignature:bytesToHex$1(encode$9(fr))})}else if(AbstractRuntime.isAction(hr)){const{address:pr,timestamp:mr}=hr.payload;if((await ar.db.query("$sessions",{where:{public_key:fr.publicKey,address:pr,expiration:{gte:mr}}})).length===0)throw new Error(`missing session ${fr.publicKey} for $${pr}`);const yr=mapValues(ar.db.models,()=>({})),xr=await ar.execute({txn:this,modelEntries:yr,id:dr,signature:fr,message:hr}),wr=[];for(const[br,Sr]of Object.entries(yr))for(const[vr,Er]of Object.entries(Sr)){const Ar=AbstractRuntime.getKeyHash(vr);if(ar.indexHistory){const _r=`${br}/${Ar}/${dr}`,Cr=await ar.db.query("$effects",{select:{key:!0},where:{key:{gt:_r,lte:`${br}/${Ar}/${MAX_MESSAGE_ID}`}},limit:1});if(wr.push({model:"$effects",operation:"set",value:{key:_r,value:Er&&encode$9(Er)}}),Cr.length>0){ar.log("skipping effect %o because it is superceeded by effects %O",[vr,Er],Cr);continue}}else{const _r=`${br}/${Ar}`,Cr=await ar.db.get("$versions",_r),{version:kr}=Cr??{version:null};assert(kr===null||kr instanceof Uint8Array,"expected version === null || version instanceof Uint8Array");const Rr=encodeId(dr);if(kr!==null&&lessThan(Rr,kr))continue;wr.push({model:"$versions",operation:"set",value:{key:_r,version:Rr}})}Er===null?wr.push({model:br,operation:"delete",key:vr}):wr.push({model:br,operation:"set",value:Er})}return ar.log("applying effects %O",wr),wr.length>0&&await ar.db.apply(wr),xr}else throw new Error("invalid message payload type")}}async getModelValue(ar,dr,fr){if(!this.indexHistory)throw new Error("cannot call .get if indexHistory is disabled");if(assert(ar.txn.ancestors!==void 0,"expected txn.ancestors !== undefined"),ar.modelEntries[dr][fr]!==void 0)return ar.modelEntries[dr][fr];const hr=AbstractRuntime.getKeyHash(fr),pr=`${dr}/${hr}/${MIN_MESSAGE_ID}`;let mr=`${dr}/${hr}/${MAX_MESSAGE_ID}`;for(;;){const gr=await this.db.query("$effects",{where:{key:{gte:pr,lt:mr}},orderBy:{key:"desc"},limit:1});if(gr.length===0)return null;const[{key:yr,value:xr}]=gr,[{},{},wr]=yr.split("/");mr=yr;const br=new Set;for(const Sr of ar.message.parents)if(await AbstractGossipLog.isAncestor(ar.txn,Sr,wr,br))return decode$6(xr);mr=yr}}}AbstractRuntime.effectsModel={$effects:{key:"primary",value:"bytes?"}};AbstractRuntime.versionsModel={$versions:{key:"primary",version:"bytes"}};AbstractRuntime.sessionsModel={$sessions:{message_id:"primary",public_key:"string",address:"string",expiration:"integer?",rawMessage:"string",rawSignature:"string",$indexes:[["address"],["public_key"]]}};AbstractRuntime.isAction=cr=>cr.payload.type==="action";AbstractRuntime.isSession=cr=>cr.payload.type==="session";AbstractRuntime.getKeyHash=cr=>bytesToHex$1(blake3(cr,{dkLen:16}));var __classPrivateFieldGet$2=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},__classPrivateFieldSet$2=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},_ContractRuntime_databaseAPI,_ContractRuntime_context;class ContractRuntime extends AbstractRuntime{static async init(ar,dr,fr,hr={}){const{runtimeMemoryLimit:pr,indexHistory:mr=!0,ignoreMissingActions:gr=!1}=hr,xr=`canvas:${getCID(fr,{codec:"raw",digest:"blake3-128"}).toString()}`,wr=await VM.initialize({runtimeMemoryLimit:pr}),{topic:br,models:Sr,actions:vr,...Er}=await wr.import(fr,{uri:xr}).then(Ir=>Ir.consume(wr.unwrapObject));for(const[Ir,Nr]of Object.entries(Er))console.warn(`extraneous export ${JSON.stringify(Ir)}`),Nr.dispose();assert(br!==void 0,"missing `topic` export");const Ar=br.consume(wr.context.getString);assert(vr!==void 0,"missing `actions` export");const _r={},Cr=mapEntries(vr.consume(wr.unwrapObject),([Ir,Nr])=>{if(wr.context.typeof(Nr)==="function")return _r[Ir]={toTyped:Br=>Br,toRepresentation:Br=>Br},Nr.consume(wr.cache);const{apply:Pr,argsType:Tr}=Nr.consume(wr.unwrapObject);if(assert(wr.context.typeof(Pr)==="function","expected action[name].apply to be a function"),Tr!==void 0){const{schema:Br,name:Fr}=Tr.consume(wr.unwrapObject);_r[Ir]=create$3(fromDSL(Br.consume(wr.context.getString)),Fr.consume(wr.context.getString))}else _r[Ir]={toTyped:Br=>Br,toRepresentation:Br=>Br};return Pr.consume(wr.cache)});assert(Sr!==void 0,"missing `models` export");const kr=Sr.consume(wr.context.dump),Rr=await target.openDB({path:ar,topic:Ar},AbstractRuntime.getModelSchema(kr,{indexHistory:mr}));return new ContractRuntime(Ar,dr,Rr,wr,Cr,_r,mr,gr)}constructor(ar,dr,fr,hr,pr,mr,gr,yr){super(gr,yr),this.topic=ar,this.signers=dr,this.db=fr,this.vm=hr,this.actions=pr,this.argsTransformers=mr,_ContractRuntime_databaseAPI.set(this,void 0),_ContractRuntime_context.set(this,null),__classPrivateFieldSet$2(this,_ContractRuntime_databaseAPI,hr.wrapObject({get:hr.wrapFunction((xr,wr)=>(assert(__classPrivateFieldGet$2(this,_ContractRuntime_context,"f")!==null,"expected this.#context !== null"),assert(typeof xr=="string",'expected typeof model === "string"'),assert(typeof wr=="string",'expected typeof key === "string"'),this.getModelValue(__classPrivateFieldGet$2(this,_ContractRuntime_context,"f"),xr,wr))),set:hr.context.newFunction("set",(xr,wr)=>{assert(__classPrivateFieldGet$2(this,_ContractRuntime_context,"f")!==null,"expected this.#modelEntries !== null");const br=hr.context.getString(xr);assert(this.db.models[br]!==void 0,"model not found");const Sr=this.vm.unwrapValue(wr);validateModelValue(this.db.models[br],Sr);const{primaryKey:vr}=this.db.models[br],Er=Sr[vr];assert(typeof Er=="string","expected value[primaryKey] to be a string"),__classPrivateFieldGet$2(this,_ContractRuntime_context,"f").modelEntries[br][Er]=Sr}),delete:hr.context.newFunction("delete",(xr,wr)=>{assert(__classPrivateFieldGet$2(this,_ContractRuntime_context,"f")!==null,"expected this.#modelEntries !== null");const br=hr.context.getString(xr);assert(this.db.models[br]!==void 0,"model not found");const Sr=hr.context.getString(wr);__classPrivateFieldGet$2(this,_ContractRuntime_context,"f").modelEntries[br][Sr]=null})}).consume(hr.cache),"f")}async close(){try{await super.close()}finally{this.vm.dispose()}}get actionNames(){return Object.keys(this.actions)}async execute(ar){const{address:dr,name:fr,args:hr,blockhash:pr,timestamp:mr}=ar.message.payload,gr=this.actions[fr],yr=this.argsTransformers[fr];if(gr===void 0||yr===void 0){if(this.ignoreMissingActions)return;throw new Error(`invalid action name: ${fr}`)}const xr=yr.toTyped(hr);assert(xr!==void 0,"action args did not validate the provided schema type"),__classPrivateFieldSet$2(this,_ContractRuntime_context,ar,"f");const wr=this.vm.wrapValue(xr),br=this.vm.wrapValue({id:ar.id,address:dr,blockhash:pr,timestamp:mr});try{const Sr=await this.vm.callAsync(gr,gr,[__classPrivateFieldGet$2(this,_ContractRuntime_databaseAPI,"f"),wr,br]);return Sr.consume(vr=>{if(this.vm.context.typeof(vr)!=="undefined")return this.vm.unwrapValue(Sr)})}finally{wr.dispose(),br.dispose(),__classPrivateFieldSet$2(this,_ContractRuntime_context,null,"f")}}}_ContractRuntime_databaseAPI=new WeakMap,_ContractRuntime_context=new WeakMap;var __classPrivateFieldGet$1=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},__classPrivateFieldSet$1=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},_FunctionRuntime_context,_FunctionRuntime_db;const identity=cr=>cr;class FunctionRuntime extends AbstractRuntime{static async init(ar,dr,fr,hr={}){assert(fr.actions!==void 0,"contract initialized without actions"),assert(fr.models!==void 0,"contract initialized without models"),assert(fr.topic!==void 0,"contract initialized without topic");const{indexHistory:pr=!0,ignoreMissingActions:mr=!1}=hr,gr=AbstractRuntime.getModelSchema(fr.models,{indexHistory:pr}),yr=await target.openDB({path:ar,topic:fr.topic},gr),xr={},wr=mapEntries(fr.actions,([br,Sr])=>{if(typeof Sr=="function")return xr[br]={toTyped:identity,toRepresentation:identity},Sr;if(Sr.argsType!==void 0){const{schema:vr,name:Er}=Sr.argsType;xr[br]=create$3(fromDSL(vr),Er)}else xr[br]={toTyped:identity,toRepresentation:identity};return Sr.apply});return new FunctionRuntime(fr.topic,dr,yr,wr,xr,pr,mr)}constructor(ar,dr,fr,hr,pr,mr,gr){super(mr,gr),this.topic=ar,this.signers=dr,this.db=fr,this.actions=hr,this.argsTransformers=pr,_FunctionRuntime_context.set(this,null),_FunctionRuntime_db.set(this,void 0),__classPrivateFieldSet$1(this,_FunctionRuntime_db,{get:async(yr,xr)=>(assert(__classPrivateFieldGet$1(this,_FunctionRuntime_context,"f")!==null,"expected this.#context !== null"),await this.getModelValue(__classPrivateFieldGet$1(this,_FunctionRuntime_context,"f"),yr,xr)),set:async(yr,xr)=>{assert(__classPrivateFieldGet$1(this,_FunctionRuntime_context,"f")!==null,"expected this.#context !== null"),validateModelValue(this.db.models[yr],xr);const{primaryKey:wr}=this.db.models[yr],br=xr[wr];__classPrivateFieldGet$1(this,_FunctionRuntime_context,"f").modelEntries[yr][br]=xr},delete:async(yr,xr)=>{assert(__classPrivateFieldGet$1(this,_FunctionRuntime_context,"f")!==null,"expected this.#context !== null"),__classPrivateFieldGet$1(this,_FunctionRuntime_context,"f").modelEntries[yr][xr]=null}},"f")}get actionNames(){return Object.keys(this.actions)}async execute(ar){const{publicKey:dr}=ar.signature,{address:fr,name:hr,args:pr,blockhash:mr,timestamp:gr}=ar.message.payload,yr=this.argsTransformers[hr],xr=this.actions[hr];if(xr===void 0||yr===void 0){if(this.ignoreMissingActions)return;throw new Error(`invalid action name: ${hr}`)}const wr=yr.toTyped(pr);assert(wr!==void 0,"action args did not validate the provided schema type"),__classPrivateFieldSet$1(this,_FunctionRuntime_context,ar,"f");try{return await xr(__classPrivateFieldGet$1(this,_FunctionRuntime_db,"f"),wr,{id:ar.id,publicKey:dr,address:fr,blockhash:mr,timestamp:gr})}finally{__classPrivateFieldSet$1(this,_FunctionRuntime_context,null,"f")}}}_FunctionRuntime_context=new WeakMap,_FunctionRuntime_db=new WeakMap;async function createRuntime(cr,ar,dr,fr={}){return typeof dr=="string"?ContractRuntime.init(cr,ar,dr,fr):FunctionRuntime.init(cr,ar,dr,fr)}const schema=`
type Action struct {
  address   String
  name      String
  args      any
  timestamp Int
  blockhash nullable String
}

type Session struct {
  address   String
  publicKey String
  authorizationData any
  timestamp Int
  duration  nullable Int
  blockhash nullable String
}

type Payload union {
  | Action "action"
  | Session "session"
} representation inline {
  discriminantKey "type"
}
`,{toTyped}=create$3(fromDSL(schema),"Payload");function validatePayload(cr){return toTyped(cr)!==void 0}var __classPrivateFieldGet=globalThis&&globalThis.__classPrivateFieldGet||function(cr,ar,dr,fr){if(dr==="a"&&!fr)throw new TypeError("Private accessor was defined without a getter");if(typeof ar=="function"?cr!==ar||!fr:!ar.has(cr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dr==="m"?fr:dr==="a"?fr.call(cr):fr?fr.value:ar.get(cr)},__classPrivateFieldSet=globalThis&&globalThis.__classPrivateFieldSet||function(cr,ar,dr,fr,hr){if(fr==="m")throw new TypeError("Private method is not writable");if(fr==="a"&&!hr)throw new TypeError("Private accessor was defined without a setter");if(typeof ar=="function"?cr!==ar||!hr:!ar.has(cr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fr==="a"?hr.call(cr,dr):hr?hr.value=dr:ar.set(cr,dr),dr},_Canvas_open;class Canvas extends TypedEventEmitter{static async initialize(ar){const{path:dr=null,contract:fr,signers:hr=[],runtimeMemoryLimit:pr,indexHistory:mr=!0,ignoreMissingActions:gr=!1,offline:yr,disablePing:xr}=ar,wr=new SignerCache(hr.length===0?[new SIWESigner]:hr),br=await createRuntime(dr,wr,fr,{runtimeMemoryLimit:pr,ignoreMissingActions:gr}),Sr=br.topic,vr=await Promise.resolve(ar.libp2p??target.createLibp2p({topic:Sr,path:dr},{...ar,signers:wr})),Er=await target.openGossipLog({topic:Sr,path:dr},{topic:br.topic,apply:br.getConsumer(),validate:validatePayload,indexAncestors:mr});return await vr.services.gossiplog.subscribe(Er,{}),new Canvas(wr,vr,Er,br,yr,xr)}constructor(ar,dr,fr,hr,pr,mr){super(),this.signers=ar,this.libp2p=dr,this.messageLog=fr,this.runtime=hr,this.actions={},this.peers=[],this._connections=[],this.connections={},this.status="disconnected",this.controller=new AbortController,this.log=logger("canvas:core"),_Canvas_open.set(this,!0),this.db=hr.db,this.log("initialized with peerId %p",dr.peerId),this.libp2p.addEventListener("peer:discovery",({detail:{id:yr,multiaddrs:xr}})=>{this.log("discovered peer %p with addresses %o",yr,xr)}),this.libp2p.addEventListener("peer:connect",({detail:yr})=>{this.log("connected to %p",yr),this.dispatchEvent(new CustomEvent$2("connect",{detail:{peer:yr.toString()}})),this.peers=[...this.peers,yr]}),this.libp2p.addEventListener("peer:disconnect",({detail:yr})=>{this.log("disconnected %p",yr),this.dispatchEvent(new CustomEvent$2("disconnect",{detail:{peer:yr.toString()}})),this.peers=this.peers.filter(xr=>xr.toString()!==yr.toString()),delete this.connections[yr.toString()],this.updateStatus()}),this.libp2p.services.discovery.addEventListener("presence:join",({detail:{peerId:yr,env:xr,address:wr,topics:br,peers:Sr}})=>{this.log("discovered peer %p with addresses %o",yr),this.dispatchEvent(new CustomEvent$2("presence:join",{detail:{peerId:yr,env:xr,address:wr,topics:br,peers:{...Sr}}}))}),this.libp2p.services.discovery.addEventListener("presence:leave",({detail:{peerId:yr,peers:xr}})=>{this.log("discovered peer %p with addresses %o",yr),this.dispatchEvent(new CustomEvent$2("presence:leave",{detail:{peerId:yr,peers:{...xr}}}))}),this.libp2p.addEventListener("connection:open",({detail:yr})=>{this._connections=[...this._connections,yr];const xr=yr.remoteAddr.getPeerId()?.toString();if(xr&&!this.connections[xr]){const wr=this.peers.find(br=>br.toString()===xr);if(!wr)return;this.connections[xr]={peer:wr,status:"connecting",connections:[yr]},this.dispatchEvent(new CustomEvent$2("connections:updated",{detail:{connections:this.connections,status:this.status}}))}}),this.libp2p.addEventListener("connection:close",({detail:yr})=>{this._connections=this._connections.filter(({id:wr})=>wr!==yr.id);const xr=yr.remoteAddr.getPeerId()?.toString();xr&&this.connections[xr]&&(this.connections[xr].connections=this.connections[xr].connections.filter(({id:wr})=>wr!==yr.id),this.updateStatus())});const gr=()=>{this.pingTimer=setInterval(()=>{const yr=this.libp2p.services.pubsub.getSubscribers(GossipLogService.topicPrefix+this.topic),xr=this.peers.map(wr=>this.libp2p.services.ping.ping(wr).then(br=>{this.connections[wr.toString()]={peer:wr,status:yr.find(Sr=>Sr.toString()===wr.toString())?"online":"waiting",connections:this._connections.filter(Sr=>Sr.remotePeer.toString()===wr.toString())}}).catch(br=>{this.connections[wr.toString()]={peer:wr,status:"offline",connections:this._connections.filter(Sr=>Sr.remotePeer.toString()===wr.toString())}}));Promise.allSettled(xr).then(()=>{this.updateStatus(),this.dispatchEvent(new CustomEvent$2("connections:updated",{detail:{connections:{...this.connections},status:this.status}}))})},3e3)};pr&&!mr?this.libp2p.addEventListener("start",yr=>{gr()}):mr||gr(),this.libp2p.addEventListener("stop",yr=>{clearInterval(this.pingTimer)}),this.messageLog.addEventListener("message",yr=>this.safeDispatchEvent("message",yr)),this.messageLog.addEventListener("commit",yr=>this.safeDispatchEvent("commit",yr)),this.messageLog.addEventListener("sync",yr=>this.safeDispatchEvent("sync",yr));for(const yr of hr.actionNames){const xr=async(wr,br={})=>{const Sr=br.signer??ar.getFirst();assert(Sr!==void 0,"signer not found");const vr=Date.now(),Er=await Sr.getSession(this.topic,{timestamp:vr}),{address:Ar,publicKey:_r}=Er,Cr=await hr.db.query("$sessions",{where:{address:Ar,public_key:_r,expiration:{gt:vr}},limit:1});if(this.log("got %d matching sessions: %o",Cr.length,Cr),Cr.length===0){const{id:Tr}=await this.append(Er,{signer:Sr});this.log("created session %s",Tr)}else try{const Tr=Cr[0],Br=decode$6(hexToBytes$1(Tr.rawSignature)),Fr=decode$6(hexToBytes$1(Tr.rawMessage));this.insert(Br,Fr)}catch{this.log("failed to rebroadcast session for action")}const kr=hr.argsTransformers[yr];assert(kr!==void 0,"invalid action name");const Rr=kr.toRepresentation(wr);assert(Rr!==void 0,"action args did not validate the provided schema type");const{id:Ir,result:Nr,recipients:Pr}=await this.append({type:"action",address:Ar,name:yr,args:Rr,blockhash:null,timestamp:vr},{signer:Sr});return this.log("applied action %s and got result %o",Ir,Nr),{id:Ir,result:Nr,recipients:Pr}};Object.assign(this.actions,{[yr]:xr})}}updateSigners(ar){this.signers.updateSigners(ar)}updateStatus(){const dr=Object.entries(this.connections).some(([fr,hr])=>hr.status==="online")?"connected":"disconnected";this.status!==dr&&this.dispatchEvent(new CustomEvent$2("connections:updated",{detail:{connections:{...this.connections},status:dr}})),this.status=dr}get peerId(){return this.libp2p.peerId}get topic(){return this.messageLog.topic}async close(){__classPrivateFieldGet(this,_Canvas_open,"f")&&(__classPrivateFieldSet(this,_Canvas_open,!1,"f"),this.controller.abort(),await this.libp2p.stop(),await this.messageLog.close(),await this.runtime.close(),this.dispatchEvent(new CustomEvent$2("connections:updated",{detail:{connections:{}}})),this.dispatchEvent(new Event("close")),this.log("closed"))}getApplicationData(){const ar=Object.fromEntries(Object.entries(this.db.models).filter(([dr])=>!dr.startsWith("$")));return{peerId:this.peerId.toString(),topic:this.topic,models:ar,actions:Object.keys(this.actions)}}async insert(ar,dr){assert(dr.topic===this.topic,"invalid message topic");const{id:fr}=await this.libp2p.services.gossiplog.insert(ar,dr);return{id:fr}}async append(ar,dr){return this.libp2p.services.gossiplog.append(this.topic,ar,dr)}async getMessage(ar){return await this.messageLog.get(ar)}async*getMessages(ar=null,dr=null,fr={}){yield*this.messageLog.iterate(ar,dr,fr)}}_Canvas_open=new WeakMap;const useCanvas=cr=>{const[ar,dr]=reactExports.useState(),[fr,hr]=reactExports.useState(),pr=reactExports.useRef(!1);reactExports.useEffect(()=>{pr.current||(pr.current=!0,Canvas.initialize(cr).then(yr=>{dr(yr)}).catch(yr=>{console.error(yr),hr(yr)}))},[]);const mr=cr.signers??[],gr=mr.map(yr=>yr.key).join("+");return reactExports.useEffect(()=>{ar&&ar.updateSigners(mr)},[gr]),{app:ar,error:fr}};function useLiveQuery(cr,ar,dr={}){return useLiveQuery$1(cr?.db,ar,dr)}function useCurrentTime(){const[cr,ar]=reactExports.useState(DateTime$1.now());return reactExports.useEffect(()=>{const dr=setInterval(()=>{ar(DateTime$1.now())},1e3);return()=>clearInterval(dr)},[]),cr}const createContract=cr=>({topic:`${cr}.canvas.xyz`,models:{message:{id:"primary",address:"string",name:"string",color:"string",content:"string",timestamp:"integer",$indexes:["user","timestamp"]}},actions:{async createMessage(dr,{content:fr,name:hr,color:pr},{id:mr,address:gr,timestamp:yr}){await dr.set("message",{id:mr,address:gr,content:fr,name:hr,color:pr,timestamp:yr})}}});function Chat(){const{networkLayer:{components:{Name:cr},network:{matchEntity:ar},utils:{sendAnalyticsEvent:dr}},phaserLayer:{api:{mapInteraction:{disableMapInteraction:fr,enableMapInteraction:hr}}}}=useMUD(),pr=useExternalAccount(),mr=reactExports.useMemo(()=>Wallet$1.createRandom(),[]),gr=reactExports.useMemo(()=>createContract(ar??""),[ar]),{app:yr}=useCanvas({contract:gr,indexHistory:!1,discoveryTopic:"canvas-discovery",signers:[new SIWESigner({signer:mr})],bootstrapList:["/dns4/canvas-chat-discovery-p0.fly.dev/tcp/443/wss/p2p/12D3KooWG1zzEepzv5ib5Rz16Z4PXVfNRffXBGwf7wM8xoNAbJW7","/dns4/canvas-chat-discovery-p1.fly.dev/tcp/443/wss/p2p/12D3KooWNfH4Z4ayppVFyTKv8BBYLLvkR1nfWkjcSTqYdS4gTueq","/dns4/canvas-chat-discovery-p2.fly.dev/tcp/443/wss/p2p/12D3KooWRBdFp5T1fgjWdPSCf9cDqcCASMBgcLqjzzBvptjAfAxN","/dns4/peer.canvasjs.org/tcp/443/wss/p2p/12D3KooWFYvDDRpXtheKXgQyPf7sfK2DxS1vkripKQUS2aQz5529"]}),xr=useCurrentTime(),wr=5,[br,Sr]=reactExports.useState(DateTime$1.now()),[vr,Er]=reactExports.useState(!1),Ar=reactExports.useCallback(()=>{Ir.current?.focus(),fr(),Er(!0),Sr(DateTime$1.now())},[fr]),_r=reactExports.useCallback(()=>{vr&&(Ir.current?.blur(),hr(),Er(!1),Sr(DateTime$1.now()))},[hr,vr]),Cr=useCurrentPlayer(ar??""),[kr,Rr]=reactExports.useState(""),Ir=reactExports.useRef(null),Nr=reactExports.useRef(null),Pr=useLiveQuery(yr,"message",{orderBy:{timestamp:"asc"}});reactExports.useEffect(()=>{Sr(DateTime$1.now()),Nr.current?.scrollIntoView()},[Pr]),reactExports.useEffect(()=>{br.plus({seconds:wr}).diff(xr).milliseconds>0||Nr.current?.scrollIntoView()},[_r,br,xr]);const Tr=reactExports.useCallback(async()=>{if(!yr)return;if(kr.length===0){_r();return}const Br=pr.address?addressToEntityID(pr.address):BYTES32_ZERO,Fr=g$7(cr,Br)?.value??"Spectator";try{Rr(""),_r(),await yr.actions.createMessage({content:kr,name:Fr,color:Cr.playerColor.color.toString(16)}),dr("sent-message",{matchEntity:ar})}catch(jr){console.error(jr)}},[cr,yr,_r,Cr.playerColor.color,pr.address,ar,kr,dr]);return reactExports.useEffect(()=>{const Br=Fr=>{document.activeElement!==Ir.current&&(Fr.key==="Enter"&&(Ar(),Fr.preventDefault()),Fr.key==="Escape"&&_r())};return document.addEventListener("keydown",Br),()=>{document.removeEventListener("keydown",Br)}},[_r,Ar]),jsxRuntimeExports.jsx("div",{style:{opacity:br.plus({seconds:wr}).diff(xr).milliseconds>0?1:0},onMouseMove:()=>{Sr(DateTime$1.now())},className:"absolute bottom-12 left-0 h-[160px] w-[300px] rounded border border-ss-stroke bg-black/25 transition-all duration-300",children:jsxRuntimeExports.jsxs("div",{className:"h-full w-full",children:[jsxRuntimeExports.jsx("div",{className:"w-full overflow-y-auto",children:jsxRuntimeExports.jsxs("ul",{style:{overflowAnchor:"none"},className:"h-full w-full px-2 space-y-1 flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"grow"}),(Pr??[]).map(Br=>jsxRuntimeExports.jsxs("li",{style:{textShadow:"0 0 2px black",overflowWrap:"anywhere"},className:"flex text-white items-baseline flex-wrap space-x-1 w-full",children:[jsxRuntimeExports.jsxs("span",{style:{color:Br.color},className:"font-bold",children:[Br.name,":"]}),jsxRuntimeExports.jsx("span",{children:Br.content})]},Br.id)),jsxRuntimeExports.jsx("div",{ref:Nr})]})}),jsxRuntimeExports.jsx("div",{className:"h-2"}),jsxRuntimeExports.jsxs("form",{onSubmit:Br=>{Br.preventDefault(),Tr()},onKeyDown:Br=>{Ir.current===document.activeElement&&(Br.key==="Escape"&&_r(),Sr(DateTime$1.now()))},className:"relative",children:[jsxRuntimeExports.jsx("div",{style:{display:vr?"block":"none"},className:"absolute left-2 top-[5px] text-white",children:"[All]"}),jsxRuntimeExports.jsx("input",{onFocus:()=>{Sr(DateTime$1.now()),Er(!0)},ref:Ir,type:"text",className:"w-full outline-none px-2 pl-[46px] text-white py-1 bg-black/70 opacity-0 focus:opacity-100 border border-ss-stroke rounded",value:kr,placeholder:"Type a message",onChange:Br=>Rr(Br.target.value),disabled:!yr||yr.status!=="connected"}),vr&&(yr?.status==="connected"?jsxRuntimeExports.jsx("div",{className:"absolute top-[9px] right-2 w-4 h-4 rounded-full bg-green-500"}):jsxRuntimeExports.jsx("div",{className:"absolute top-[9px] right-2 w-4 h-4 rounded-full animate-pulse bg-red-500"}))]})]})})}function Bar({backgroundColor:cr,backgroundColorShadow:ar,color:dr,colorShadow:fr,widthPercent:hr,label:pr,labelColor:mr}){return jsxRuntimeExports.jsx("div",{className:"flex gap-x-2 shadow-ss-small",children:jsxRuntimeExports.jsxs("div",{style:{backgroundColor:cr,borderBottom:`2px solid ${ar}`},className:"relative w-[140px] h-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-0 h-6 border-b-2",style:{width:`${hr}%`,backgroundColor:dr,borderBottom:`2px solid ${fr}`}}),jsxRuntimeExports.jsx("div",{className:"absolute font-medium text-[14px] translate-y-[1px] right-1/2 translate-x-1/2",style:{color:`${mr}`},children:pr})]})})}function TerrainTypeImage({terrain:cr}){return cr===TerrainTypes.Mountain?jsxRuntimeExports.jsx("div",{className:"rounded overflow-hidden",children:jsxRuntimeExports.jsx(SpriteImage,{scale:1,spriteKey:Sprites.MountainPreview})}):cr===TerrainTypes.Forest?jsxRuntimeExports.jsx("div",{className:"rounded overflow-hidden",children:jsxRuntimeExports.jsx(SpriteImage,{scale:1,spriteKey:Sprites.ForestPreview})}):jsxRuntimeExports.jsx("div",{className:"rounded overflow-hidden",children:jsxRuntimeExports.jsx(SpriteImage,{scale:1,spriteKey:Sprites.GrassPreview})})}function ArmorModifierImage({modifier:cr}){return cr<=-30?jsxRuntimeExports.jsxs("div",{className:"flex gap-x-1",children:[jsxRuntimeExports.jsx(SpriteImage,{scale:1.5,spriteKey:Sprites.Armor}),jsxRuntimeExports.jsx(SpriteImage,{scale:1.5,spriteKey:Sprites.Armor})]}):cr<=-15?jsxRuntimeExports.jsxs("div",{className:"flex gap-x-1",children:[jsxRuntimeExports.jsx(SpriteImage,{scale:1.5,spriteKey:Sprites.Armor}),jsxRuntimeExports.jsx(SpriteImage,{scale:1.5,spriteKey:Sprites.NoArmor})]}):jsxRuntimeExports.jsxs("div",{className:"flex gap-x-1",children:[jsxRuntimeExports.jsx(SpriteImage,{scale:1.5,spriteKey:Sprites.NoArmor}),jsxRuntimeExports.jsx(SpriteImage,{scale:1.5,spriteKey:Sprites.NoArmor})]})}function getHealthBarColor(cr,ar){const dr=cr/ar;return dr>.6?{main:"#47EB47",shadow:"#14B614"}:dr>.25?{main:"#FFE119",shadow:"#CCB100"}:{main:"#E6194B",shadow:"#A11135"}}function EntityInfo({entity:cr}){const{networkLayer:{components:{UnitType:ar,StructureType:dr,TerrainType:fr,Combat:hr,ArmorModifier:pr,ChargeCap:mr,Charger:gr}},headlessLayer:{components:{OnCooldown:yr}},localLayer:{components:{LocalPosition:xr},api:{getOwnerColor:wr}}}=useMUD(),br=wr(cr),Sr=H$4(xr,cr)??{x:0,y:0},vr=te$5([Ye$3(fr),Je$2(xr,Sr)])[0]??BYTES32_ZERO,Er=g$7(fr,vr)?.value??0,Ar=g$7(pr,vr)?.value??0,_r=g$7(ar,cr)?.value??0,Cr=g$7(dr,cr)?.value??0,kr=_r?UnitTypeSprites[_r]:StructureTypeSprites[Cr],Rr=H$4(hr,cr),Ir=!!H$4(yr,cr)?.value,Nr=H$4(mr,cr),Pr=g$7(gr,cr),Tr=Sprites.Banner,Br=Rr&&Pr&&Nr&&Nr.totalCharged!==Nr.cap;return jsxRuntimeExports.jsxs(Card,{className:"flex p-2 gap-x-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative bg-white w-[96px] h-[96px] rounded border border-ss-stroke overflow-hidden",children:[!Cr&&_r!==UnitTypes.Brute?jsxRuntimeExports.jsx("div",{className:"-translate-x-1/3",children:jsxRuntimeExports.jsx(SpriteImage,{spriteKey:kr,colorName:br.name,scale:5})}):null,_r===UnitTypes.Brute?jsxRuntimeExports.jsx("div",{className:"-translate-x-2/3 -translate-y-[26px]",children:jsxRuntimeExports.jsx(SpriteImage,{spriteKey:kr,colorName:br.name,scale:4})}):null,Cr===StructureTypes.GoldMine?jsxRuntimeExports.jsx("div",{className:"-translate-x-[42px] -translate-y-6",children:jsxRuntimeExports.jsx(SpriteImage,{spriteKey:kr,colorName:br.name,scale:3})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),Cr===StructureTypes.Settlement?jsxRuntimeExports.jsx("div",{className:"-translate-x-[24px] translate-y-1",children:jsxRuntimeExports.jsx(SpriteImage,{spriteKey:kr,colorName:br.name,scale:2})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),Cr===StructureTypes.SpawnSettlement?jsxRuntimeExports.jsx("div",{className:"-translate-x-[18px] translate-y-3",children:jsxRuntimeExports.jsx(SpriteImage,{spriteKey:kr,colorName:br.name,scale:2})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0",children:jsxRuntimeExports.jsx(SpriteImage,{spriteKey:Tr,colorName:br.name,scale:4})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-y-2",children:[Rr&&jsxRuntimeExports.jsx(Bar,{backgroundColor:"#FFFFFF",backgroundColorShadow:"#DBDBDB",color:getHealthBarColor(Rr.health,Rr.maxHealth).main,colorShadow:getHealthBarColor(Rr.health,Rr.maxHealth).shadow,widthPercent:Rr.health/Rr.maxHealth*100,label:`${(Rr.health/Rr.maxHealth*100).toFixed(0)}%`,labelColor:"#000000"}),!Rr&&jsxRuntimeExports.jsx(Bar,{backgroundColor:"#B3B3B3",backgroundColorShadow:"#757575",color:"#E6194B",colorShadow:"#A11135",widthPercent:0,label:"Depleted",labelColor:"#25241D"}),!!_r&&jsxRuntimeExports.jsx(Bar,{backgroundColor:"#B3B3B3",backgroundColorShadow:"#757575",color:Ir?"#B3B3B3":"#8CBEEF",colorShadow:"#4797E5",widthPercent:Ir?0:100,label:Ir?"Exhausted":"Ready",labelColor:Ir?"#5D5D4C":"#25241D"}),Br&&jsxRuntimeExports.jsx(Bar,{backgroundColor:"#FFFFFF",backgroundColorShadow:"#DBDBDB",color:"#FFD34B",colorShadow:"#E5AD00",widthPercent:(Nr.cap-Nr.totalCharged)/Nr.cap*100,label:`${Nr.cap-Nr.totalCharged}g`,labelColor:"#25241D"}),Rr&&Br&&jsxRuntimeExports.jsxs("div",{className:"flex align-items-center justify-between mt-1",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 scale-75 -translate-y-1 -translate-x-1",children:jsxRuntimeExports.jsx(SpriteImage,{spriteKey:Sprites.Gold,scale:1.2})}),jsxRuntimeExports.jsxs("div",{className:"text-black font-medium text-[14px]",children:[Pr.value,"g/turn"]})]}),!!_r&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between items-center",children:[jsxRuntimeExports.jsx(TerrainTypeImage,{terrain:Er}),jsxRuntimeExports.jsx(ArmorModifierImage,{modifier:Ar})]})})]})]})}function SelectedEntity(){const{localLayer:{components:{Selected:cr}}}=useMUD(),ar=te$5([Ye$3(cr)])[0];return jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 mb-1",children:ar&&jsxRuntimeExports.jsx(EntityInfo,{entity:ar})})}const MatchPageTitle=({matchEntity:cr})=>{const{networkLayer:{components:{MatchIndex:ar}}}=useMUD(),dr=H$4(ar,cr??"__undefined__")?.matchIndex;return reactExports.useEffect(()=>{if(dr==null)return;const fr=document.title;return document.title=`Match #${dr}`,()=>{document.title=fr}},[dr]),null},UIRoot=()=>{const cr=useStore(dr=>({networkLayer:dr.networkLayer,headlessLayer:dr.headlessLayer,localLayer:dr.localLayer,phaserLayer:dr.phaserLayer}));if(!cr.networkLayer||!cr.headlessLayer||!cr.localLayer||!cr.phaserLayer)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const{matchEntity:ar}=cr.networkLayer.network;return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(Layer,{style:{inset:"24px",overflow:"hidden"},children:[ar?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(MatchPageTitle,{matchEntity:ar}),jsxRuntimeExports.jsx(Leaderboard,{matchEntity:ar}),jsxRuntimeExports.jsx(GameOutcome,{matchEntity:ar}),jsxRuntimeExports.jsx(Factory,{matchEntity:ar}),jsxRuntimeExports.jsx(PreGame,{matchEntity:ar}),jsxRuntimeExports.jsx(TurnInfo,{matchEntity:ar}),jsxRuntimeExports.jsx(TopRight,{}),jsxRuntimeExports.jsx(Chat,{}),jsxRuntimeExports.jsx(SelectedEntity,{}),jsxRuntimeExports.jsx(PlayerNameHover,{})]}):jsxRuntimeExports.jsx(Body,{className:"fixed text-black bg-ss-bg-0 rounded-lg p-4 w-96 h-96",children:jsxRuntimeExports.jsx("div",{children:"You have not set the match ID URL param!"})}),jsxRuntimeExports.jsx(SyncStatus,{}),jsxRuntimeExports.jsx(TransactionDebug,{}),jsxRuntimeExports.jsx(Admin$1,{})]})})},getBurnerWallet=()=>{const cr=new URLSearchParams(window.location.search).get("privateKey");if(cr)return new Wallet$1(cr).privateKey;const ar="mud:burnerWallet",dr=localStorage.getItem(ar);if(dr)return dr;const fr=Wallet$1.createRandom();return localStorage.setItem(ar,fr.privateKey),fr.privateKey},worldsJson={892:{address:"0x209055a26551c6c4d664839946dbcd9287c054ba",blockNumber:613673},894:{address:"0xe233198863b75acc6e1af43daff3f5918e35875e",blockNumber:118442},901:{address:"0x1e589d0f5eee235ba1c677fb4f173e052a16f754",blockNumber:3724506},4242:{address:"0xb3E07bba6F2899b5528E5Dd331a6548Feb044eB5",blockNumber:20074768},4243:{address:"0x960c82BBB934c160365f2Bf73964a22992B819Ac",blockNumber:4860686},17001:{address:"0x7203e7adfdf38519e1ff4f8da7dcdc969371f377",blockNumber:895629},31337:{address:"0xe3a6d6d5570f1d87d45036eac17342ffe32d8f46"}};var t={name:"Lattice Testnet",id:4242,network:"lattice-testnet",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://follower.testnet-chain.linfra.xyz"],webSocket:["wss://follower.testnet-chain.linfra.xyz"]},public:{http:["https://follower.testnet-chain.linfra.xyz"],webSocket:["wss://follower.testnet-chain.linfra.xyz"]}},blockExplorers:{default:{name:"Otterscan",url:"https://explorer.testnet-chain.linfra.xyz"}},faucetUrl:"https://faucet.testnet-mud-services.linfra.xyz"},r={...foundry,fees:{defaultPriorityFee:()=>0n}};const redstone={name:"Redstone Testnet",id:894,network:"redstone-testnet",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://894.quarry.linfra.xyz"],webSocket:["wss://894.quarry.linfra.xyz/ws"]},public:{http:["https://894.quarry.linfra.xyz"],webSocket:["wss://894.quarry.linfra.xyz/ws"]}},faucetUrl:"https://894-faucet.quarry.linfra.xyz/trpc",indexerUrl:"https://894-indexer.quarry.linfra.xyz/trpc"},redstoneHolesky={id:17001,name:"Redstone Holesky",network:"redstone-holesky",summary:{location:"Holesky"},description:"Redstone Holesky",nativeCurrency:{decimals:18,name:"Holesky Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.holesky.redstone.xyz"],webSocket:["wss://rpc.holesky.redstone.xyz/ws"]},public:{http:["https://rpc.holesky.redstone.xyz"],webSocket:["wss://rpc.holesky.redstone.xyz/ws"]}},blockExplorers:{default:{name:"Blockscout",url:"https://explorer.holesky.redstone.xyz"}},indexerUrl:"https://indexer.skystrife.xyz",testnet:!0},supportedChains=[r,t,redstone,redstoneHolesky],LIVE_WORLDS=worldsJson,getWorldFromChainId=cr=>LIVE_WORLDS[cr.toString()],getChain=cr=>{const ar=supportedChains.findIndex(fr=>fr.id===cr),dr=supportedChains[ar];if(!dr)throw new Error(`Chain ${cr} not supported`);return dr};async function getNetworkConfig(){const cr=new URLSearchParams(window.location.search),ar=Number(cr.get("chainId")||redstoneHolesky.id),dr=getChain(ar),fr=getWorldFromChainId(dr.id),hr=cr.get("worldAddress")||fr?.address;if(!hr)throw new Error(`No world address found for chain ${ar}. Did you run \`mud deploy\`?`);const pr=cr.has("initialBlockNumber")?Number(cr.get("initialBlockNumber")):fr?.blockNumber??-1;let mr=dr.indexerUrl;cr.has("disableIndexer")&&(mr=void 0);const gr=cr.get("match"),yr=gr??null;return{clock:{period:1e3,initialTime:0,syncInterval:2e3},provider:{chainId:ar,jsonRpcUrl:cr.get("rpc")??dr.rpcUrls.default.http[0],wsRpcUrl:cr.get("wsRpc")??dr.rpcUrls.default.webSocket?.[0]},privateKey:cr.has("anon")?Wallet$1.createRandom().privateKey:getBurnerWallet(),useBurner:cr.has("useBurner"),chainId:ar,faucetServiceUrl:cr.get("faucet")??dr.faucetUrl,worldAddress:hr,initialBlockNumber:pr,disableCache:!0,matchEntity:yr,chain:dr,indexerUrl:mr}}const useNetworkLayer=()=>{const cr=reactExports.useMemo(async()=>createNetworkLayer(await getNetworkConfig()),[]);return reactExports.useEffect(()=>()=>{cr.then(ar=>ar.network.world.dispose())},[cr]),usePromiseValue(cr)};function useObservableValue(cr,ar){const[dr,fr]=reactExports.useState(ar);return reactExports.useEffect(()=>{if(!cr)return;const hr=cr.subscribe(fr);return()=>hr.unsubscribe()},[cr]),dr}const LoadingScreen=({networkLayer:cr,usePrepTime:ar})=>{const[dr,fr]=React.useState(!1),[hr,pr]=reactExports.useState(0),[mr,gr]=reactExports.useState(!1),yr=useObservableValue(reactExports.useMemo(()=>{if(!cr)return;const{components:{SyncProgress:_r},utils:{sendAnalyticsEvent:Cr}}=cr;return Cr("loading-screen",{startTime:Math.floor(DateTime$1.now().toSeconds())}),concat$8([1],_r.update$).pipe(map$1(()=>g$7(_r,f$8)??null),ur())},[cr]),{message:"Connecting",percentage:0,step:M$4.INITIALIZE,lastBlockNumberProcessed:0n,latestBlockNumber:0n}),[xr,wr]=React.useState(!1);reactExports.useEffect(()=>{if(!xr&&cr&&yr.step===M$4.LIVE){const{utils:{sendAnalyticsEvent:_r}}=cr;wr(!0),_r("loading-screen",{endTime:Math.floor(DateTime$1.now().toSeconds())})}},[yr,cr,xr,ar]),reactExports.useEffect(()=>{ar&&cr&&yr.step===M$4.LIVE&&gr(!0)},[yr,cr,hr,ar]);const br=10;if(reactExports.useEffect(()=>{if(!mr)return;const _r=setInterval(()=>{pr(Cr=>Cr===100?(clearInterval(_r),Cr):Cr+1)},br*1e3/100);return()=>clearInterval(_r)},[cr,br,mr,ar]),dr)return null;const Sr=ar?hr===100:yr.step===M$4.LIVE,vr=yr.step===M$4.LIVE&&ar,Er=vr?"Preparing Game":yr.message,Ar=vr?hr:yr.percentage;return jsxRuntimeExports.jsxs("div",{style:{zIndex:1e3,background:"linear-gradient(rgba(24, 23, 16, 0.4), rgba(24, 23, 16, 0.4)), url(assets/ss-splash-1.png)",backgroundPosition:"right",backgroundSize:"cover"},className:"fixed items-center justify-center w-screen h-screen bg-black p-12 flex flex-col",children:[jsxRuntimeExports.jsxs(Card,{primary:!0,className:"flex flex-col w-[540px] p-8 justify-items",children:[jsxRuntimeExports.jsx(OverlineLarge,{style:{fontSize:"80px",lineHeight:"110%",letterSpacing:"-2%"},className:"normal-case text-center",children:"Sky Strife"}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsxs(Body,{className:"text-ss-text-light text-center",children:["Sky Strife is a fully onchain RTS. Compete for control of islands, earn ",EMOJI,", and summon your own matches."]}),Sr?jsxRuntimeExports.jsxs("div",{className:"flex flex-col mt-8 grow",children:[jsxRuntimeExports.jsx(Body,{className:"text-center text-ss-text-default",children:"Connected!"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",size:"lg",onClick:()=>{fr(!0)},className:"mt-4 w-full",children:"Play"}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx("a",{className:"w-full",href:"https://latticexyz.notion.site/How-to-play-Sky-Strife-8c9f951c605e487cad9e8158bc641835?pvs=4}",target:"_blank",rel:"noreferrer",children:jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",size:"lg",className:"w-full",children:"How To Play"})})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-row w-full mt-8 justify-center items-center",children:[jsxRuntimeExports.jsx("img",{height:"64px",width:"64px",src:"/public/assets/dragoon_attack.gif"}),jsxRuntimeExports.jsx("div",{className:"w-4"}),jsxRuntimeExports.jsxs(Body,{className:"text-center text-3xl text-ss-text-default",children:[Er,jsxRuntimeExports.jsxs("div",{className:"text-ss-blue",children:["(",Ar,"%)"]})]}),jsxRuntimeExports.jsx("div",{className:"w-4"}),jsxRuntimeExports.jsx("img",{height:"64px",width:"64px",src:"/public/assets/dragoon_attack.gif"})]})]}),jsxRuntimeExports.jsx("div",{className:"stretch"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between stretch",children:[jsxRuntimeExports.jsxs("div",{className:"absolute bottom-6 left-6 flex justify-between",children:[jsxRuntimeExports.jsx(Link,{className:"text-ss-gold",href:LATTICE_URL,children:"lattice.xyz"}),jsxRuntimeExports.jsx("div",{className:"w-6 text-center text-ss-divider-stroke",children:"|"}),jsxRuntimeExports.jsx(Link,{className:"text-ss-gold",href:DISCORD_URL,children:"join discord"}),jsxRuntimeExports.jsx("div",{className:"w-6 text-center text-ss-divider-stroke",children:"|"}),jsxRuntimeExports.jsx(Link,{className:"text-ss-gold",href:HOW_TO_PLAY_URL,children:"getting started"})]}),jsxRuntimeExports.jsxs(Caption,{className:"absolute bottom-6 right-6 ml-4 text-neutral-300",children:["powered by"," ",jsxRuntimeExports.jsx(Link,{className:"text-ss-gold",href:MUD_URL,children:"MUD"})]})]})]})},{publicClient:publicClient$2}=configureChains([mainnet],[publicProvider()]),wagmiConfig$2=createConfig({publicClient:publicClient$2}),SkyStrife=()=>{const cr=useNetworkLayer();return reactExports.useEffect(()=>{cr&&useStore.setState({networkLayer:cr})},[cr]),jsxRuntimeExports.jsx(WagmiConfig,{config:cr?cr.network.wagmiConfig:wagmiConfig$2,children:jsxRuntimeExports.jsx(RainbowKitProvider,{chains:cr?cr.network.chains:[],children:jsxRuntimeExports.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative"},children:[jsxRuntimeExports.jsx(LoadingScreen,{networkLayer:cr,usePrepTime:!0}),jsxRuntimeExports.jsx(UIRoot,{}),jsxRuntimeExports.jsx(HeadlessLayer,{networkLayer:cr})]})})})},IconButton=cr=>{const{type:ar,className:dr,disabled:fr,children:hr}=cr;return jsxRuntimeExports.jsx("button",{type:ar||"button",disabled:fr,style:{lineHeight:"24px",letterSpacing:"1px"},className:twMerge("cursor-pointer group transition enabled:active:translate-y-0.5 rounded text-ss-text-light","disabled:grayscale-[60%] disabled:cursor-not-allowed disabled:aria-busy:cursor-wait","uppercase",dr),...cr,children:jsxRuntimeExports.jsx("span",{className:"inline-grid pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("span",{className:twMerge("p-2 border border-solid border-ss-stroke rounded bg-ss-bg-0","row-start-1 col-start-1 transition opacity-100 translate-y-0 group-[[aria-busy=true]]:-translate-y-3 group-[[aria-busy=true]]:opacity-0"),children:hr})})})};function Discord(){return jsxRuntimeExports.jsx("svg",{className:"fill-black",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("g",{id:"discord",children:jsxRuntimeExports.jsx("path",{id:"Vector",d:"M19.6239 4.40924C18.2217 3.75698 16.7181 3.27642 15.1459 3.00119C15.1173 2.99587 15.0887 3.00915 15.0739 3.0357C14.8805 3.38439 14.6663 3.83928 14.5163 4.19682C12.8254 3.94018 11.1431 3.94018 9.48679 4.19682C9.33676 3.83133 9.11478 3.38439 8.92053 3.0357C8.90578 3.01003 8.87718 2.99676 8.84855 3.00119C7.27725 3.27554 5.7736 3.7561 4.37052 4.40924C4.35838 4.41455 4.34797 4.4234 4.34106 4.4349C1.48894 8.75464 0.707629 12.9682 1.09092 17.1295C1.09265 17.1499 1.10392 17.1693 1.11953 17.1817C3.00127 18.5827 4.82406 19.4332 6.61301 19.9969C6.64164 20.0058 6.67197 19.9952 6.69019 19.9713C7.11337 19.3854 7.49059 18.7677 7.81402 18.1181C7.83311 18.08 7.81489 18.0349 7.77588 18.0198C7.17754 17.7897 6.6078 17.5092 6.05975 17.1906C6.0164 17.1649 6.01293 17.1021 6.05281 17.072C6.16814 16.9844 6.2835 16.8932 6.39363 16.8012C6.41355 16.7843 6.44131 16.7808 6.46474 16.7914C10.0652 18.4579 13.9631 18.4579 17.521 16.7914C17.5445 16.7799 17.5722 16.7835 17.593 16.8003C17.7032 16.8923 17.8185 16.9844 17.9347 17.072C17.9746 17.1021 17.972 17.1649 17.9286 17.1906C17.3806 17.5154 16.8108 17.7897 16.2116 18.0189C16.1726 18.034 16.1553 18.08 16.1744 18.1181C16.5047 18.7668 16.882 19.3845 17.2973 19.9704C17.3147 19.9952 17.3459 20.0058 17.3745 19.9969C19.1721 19.4332 20.9949 18.5827 22.8766 17.1817C22.8931 17.1693 22.9035 17.1508 22.9053 17.1304C23.364 12.3195 22.1369 8.14045 19.6525 4.43578C19.6465 4.4234 19.6361 4.41455 19.6239 4.40924ZM8.35169 14.5957C7.26771 14.5957 6.37454 13.5868 6.37454 12.3478C6.37454 11.1088 7.25039 10.0999 8.35169 10.0999C9.46163 10.0999 10.3462 11.1176 10.3288 12.3478C10.3288 13.5868 9.45296 14.5957 8.35169 14.5957ZM15.6619 14.5957C14.5779 14.5957 13.6847 13.5868 13.6847 12.3478C13.6847 11.1088 14.5606 10.0999 15.6619 10.0999C16.7718 10.0999 17.6563 11.1176 17.639 12.3478C17.639 13.5868 16.7718 14.5957 15.6619 14.5957Z"})})})}function DesignSystem(){return jsxRuntimeExports.jsxs("div",{className:"bg-slate-200 min-h-screen h-fit",children:[jsxRuntimeExports.jsxs("div",{className:"p-8",children:[jsxRuntimeExports.jsx(OverlineLarge,{children:"Buttons"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",children:"Primary"})," ",jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",size:"lg",children:"Primary Large"})," ","",jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",disabled:!0,children:"Disabled"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",children:"Secondary Medium"}),"",jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",disabled:!0,children:"Disabled"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",children:"Tertiary"}),"",jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",disabled:!0,children:"Disabled"})]}),jsxRuntimeExports.jsx("div",{className:"w-full border border-solid border-black/10"}),jsxRuntimeExports.jsxs("div",{className:"p-8",children:[jsxRuntimeExports.jsx(OverlineLarge,{className:"mb-2",children:"Typography"}),jsxRuntimeExports.jsx(OverlineLarge,{children:"Overline Large"}),jsxRuntimeExports.jsx(OverlineSmall,{children:"Overline Small"}),jsxRuntimeExports.jsx(Heading,{children:"Heading"}),jsxRuntimeExports.jsx(Body,{children:"Body"}),jsxRuntimeExports.jsx(Caption,{children:"Caption"})]}),jsxRuntimeExports.jsx("div",{className:"w-full border border-solid border-black/10"}),jsxRuntimeExports.jsxs("div",{className:"p-8",children:[jsxRuntimeExports.jsx(OverlineLarge,{className:"mb-2",children:"Cards"}),jsxRuntimeExports.jsxs(Card,{primary:!0,children:[jsxRuntimeExports.jsx(OverlineLarge,{children:"Card / Primary"}),jsxRuntimeExports.jsx("div",{className:"mb-4"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",className:"w-full",children:"Join"}),jsxRuntimeExports.jsx("div",{className:"mb-2"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",className:"w-full",children:"Spectate"})]}),jsxRuntimeExports.jsx("div",{className:"mb-4"}),jsxRuntimeExports.jsxs(Card,{primary:!1,children:[jsxRuntimeExports.jsx(OverlineLarge,{children:"Card / Primary"}),jsxRuntimeExports.jsx("div",{className:"mb-4"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",className:"w-full",children:"Spectate"})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-8",children:[jsxRuntimeExports.jsx(OverlineLarge,{className:"mb-2",children:"Icon Buttons"}),jsxRuntimeExports.jsx(IconButton,{children:jsxRuntimeExports.jsx(Discord,{})})]})]})}function Header$1(){return jsxRuntimeExports.jsx("div",{className:twMerge("bg-ss-bg-1 border-b border-ss-stroke z-20 px-8 py-4 flex flex-row justify-between items-center"),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-row justify-between w-full h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsx(OverlineLarge,{className:"normal-case h-[32px]",style:{fontSize:"32px"},children:"Sky Strife"}),jsxRuntimeExports.jsxs(Caption,{className:"ml-4",children:["powered by ",jsxRuntimeExports.jsx(Link,{href:MUD_URL,children:"MUD"})]})]}),jsxRuntimeExports.jsx(NetworkStatus,{})]})})}function Twitter(){return jsxRuntimeExports.jsx("svg",{className:"fill-black",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M7.92098 21C16.2208 21 20.7618 14.0741 20.7618 8.0699C20.7618 7.8752 20.7575 7.67616 20.7489 7.48146C21.6322 6.83819 22.3945 6.04141 23 5.12857C22.1773 5.49714 21.3038 5.73785 20.4094 5.84248C21.3512 5.27405 22.0563 4.38106 22.3941 3.32906C21.5082 3.85777 20.5393 4.23073 19.529 4.43196C18.8483 3.70363 17.9482 3.22139 16.968 3.0598C15.9879 2.89821 14.9821 3.06626 14.1063 3.53798C13.2304 4.00969 12.5333 4.7588 12.1227 5.66948C11.7121 6.58016 11.6108 7.60169 11.8346 8.57613C10.0406 8.48548 8.28561 8.01622 6.68332 7.19877C5.08102 6.38131 3.66722 5.23392 2.53355 3.83097C1.95737 4.83129 1.78105 6.01501 2.04044 7.14153C2.29984 8.26805 2.97547 9.25286 3.93004 9.89579C3.21341 9.87288 2.51248 9.6786 1.88516 9.32899V9.38523C1.88451 10.435 2.24492 11.4526 2.90512 12.265C3.56531 13.0775 4.48455 13.6346 5.50656 13.8418C4.84272 14.0247 4.14598 14.0513 3.47027 13.9197C3.75867 14.8225 4.31978 15.6121 5.07529 16.1783C5.8308 16.7446 6.74303 17.0592 7.68465 17.0782C6.08606 18.3427 4.11133 19.0285 2.07852 19.0253C1.71801 19.0247 1.35787 19.0025 1 18.9586C3.06512 20.2927 5.4674 21.0013 7.92098 21Z",fill:"#424038"})})}function Tutorial(){return jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M10 3.04201C8.35161 1.56337 6.2144 0.746952 4 0.750009C2.948 0.750009 1.938 0.930009 1 1.26201V15.512C1.96362 15.172 2.97816 14.9989 4 15C6.305 15 8.408 15.867 10 17.292M10 3.04201C11.6483 1.56328 13.7856 0.746857 16 0.750009C17.052 0.750009 18.062 0.930009 19 1.26201V15.512C18.0364 15.172 17.0218 14.9989 16 15C13.7856 14.997 11.6484 15.8134 10 17.292M10 3.04201V17.292",stroke:"#5D5D4C",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function SeasonPassImg({colored:cr=!0,className:ar}){const dr=cr?"season-pass-0.2":"season-pass-0.2-bw";return jsxRuntimeExports.jsx("img",{src:`public/assets/${dr}.png`,alt:"Season Pass",className:twMerge(`lightgray -2.259px -15.671px / 106.667% 150.588% no-repeat] bg-[url(packages/client/src/public/assets/${dr}.png)`,ar)})}function useSeasonPassPrice(cr){const{components:{SeasonPassConfig:ar,SeasonPassLastSaleAt:dr}}=useAmalgema(),fr=H$4(ar,f$8),hr=H$4(dr,f$8);return reactExports.useMemo(()=>{if(!fr||!hr)return 0n;const{startingPrice:mr,rate:gr,minPrice:yr}=fr,xr=cr-hr.lastSaleAt,wr=mr*gr/10000000000n*xr;return mr>wr&&mr-wr>yr?mr-wr:yr},[fr,hr,cr])}function SeasonPass$1({account:cr}){const{externalWorldContract:ar,network:{publicClient:dr,waitForTransaction:fr},components:{SeasonPassConfig:hr,SeasonPassLastSaleAt:pr,SeasonTimes:mr}}=useAmalgema(),[gr,yr]=reactExports.useState(DateTime$1.now().toSeconds()),[xr,wr]=reactExports.useState(!1),[br,Sr]=reactExports.useState(!1),[vr,Er]=reactExports.useState(10);reactExports.useEffect(()=>{br&&Er(10)},[br]);const[Ar,_r]=reactExports.useState(!1);reactExports.useEffect(()=>{const Jr=pr.update$.subscribe(()=>{_r(!0),setTimeout(()=>{_r(!1)},100)});return()=>Jr.unsubscribe()},[]),reactExports.useEffect(()=>{const Jr=setInterval(()=>{yr(DateTime$1.now().toSeconds())},1e3);return()=>clearInterval(Jr)},[]);const Cr=H$4(hr,f$8),kr=Number(Cr?.mintCutoff??0n),Rr=kr-gr,Ir=H$4(mr,f$8),Nr=Number(Ir?.seasonEnd??0n)-gr,Pr=Duration$1.fromObject({seconds:Rr}),Tr=Duration$1.fromObject({seconds:Nr}),Br=useMainWalletBalance(),Fr=DateTime$1.fromSeconds(Number(Ir?.seasonStart??0n)),jr=DateTime$1.fromSeconds(Number(Ir?.seasonEnd??0n)),Ur=useSeasonPassExternalWallet(),qr=useSeasonPassPrice(BigInt(Math.floor(gr))),Hr=qr+(br?qr*BigInt(vr)/100n:0n),{nativeCurrency:Or}=dr.chain,Mr=Br?.value&&Br.value>=Hr;let Lr="";Mr||(Lr="not enough funds");const Vr=reactExports.useCallback(Jr=>`${parseFloat(formatEther(Jr)).toFixed(6)} ${Or.symbol}`,[Or.symbol]);return Rr>0?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start self-stretch rounded-sm border border-ss-stroke bg-ss-bg-0",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col justify-center items-center self-stretch py-3 px-4 border-b border-ss-stroke",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center",children:[jsxRuntimeExports.jsx(Caption,{className:"text-ss-text-x-light leading-6",children:"Minting ends in:"}),jsxRuntimeExports.jsx("div",{className:"text-ss-text-default text-[2rem] font-medium font-mono leading-8 uppercase",children:Pr.toFormat("dd:hh:mm:ss")})]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start gap-3 self-stretch p-4",children:[Ur?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 self-stretch",children:[jsxRuntimeExports.jsx(SeasonPassImg,{className:"w-[100px]"}),jsxRuntimeExports.jsxs("div",{className:"frame_530 flex flex-col items-start",children:[jsxRuntimeExports.jsx(Heading,{className:"text-ss-text-default",children:" Season Pass"}),jsxRuntimeExports.jsx(Caption,{className:"text-ss-text-light",children:"You have the Season Pass for this Season!"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 self-stretch",children:[jsxRuntimeExports.jsx(SeasonPassImg,{className:"w-[100px]",colored:!1}),jsxRuntimeExports.jsxs("div",{className:"frame_530 flex flex-col items-start",children:[jsxRuntimeExports.jsx(Heading,{className:"text-ss-text-default",children:"Season Pass"}),jsxRuntimeExports.jsx(Caption,{className:"text-ss-text-light",children:"Mint a Season Pass to gain access exclusive perks and features!"})]})]}),Ur?jsxRuntimeExports.jsxs("div",{className:"mx-auto text-ss-text-light",children:["Current Price: ",Vr(qr)]}):jsxRuntimeExports.jsxs(Modal,{open:xr,setOpen:wr,title:`Season Pass (${SEASON_NAME})`,trigger:jsxRuntimeExports.jsxs(Button$1,{style:{transition:"all 0.1s ease-in-out",transform:Ar?"scale(1.2)":"scale(1)"},buttonType:"primary",size:"md",className:"w-full",disabled:!cr,children:["mint - ",Vr(qr)]}),footer:jsxRuntimeExports.jsxs("div",{className:"flex space-x-4 w-full",children:[jsxRuntimeExports.jsx(Button$1,{onClick:()=>wr(!1),buttonType:"tertiary",className:"w-full",children:"cancel"}),jsxRuntimeExports.jsx(PromiseButton,{disabled:!Mr,promise:async()=>{const Jr=await ar?.write.buySeasonPass([cr],{value:Hr});Jr&&await fr(Jr)},buttonType:"secondary",size:"md",className:"w-full",children:Mr?`mint - ${Vr(qr)}`:Lr})]}),children:[jsxRuntimeExports.jsxs("div",{className:"flex space-x-6",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-around border border-ss-stroke bg-white w-fit p-2 rounded-md",children:jsxRuntimeExports.jsx(SeasonPassImg,{className:"w-[180px]"})}),jsxRuntimeExports.jsxs("div",{className:"grow flex flex-col justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center px-3 py-2 bg-ss-bg-2",children:[jsxRuntimeExports.jsx("span",{className:"text-ss-text-x-light",children:"Season Starts"}),jsxRuntimeExports.jsx("span",{children:Fr.toFormat("LLL dd")})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center px-3 py-2 bg-ss-bg-2",children:[jsxRuntimeExports.jsx("span",{className:"text-ss-text-x-light",children:"Minting Ends"}),jsxRuntimeExports.jsx("span",{children:DateTime$1.fromSeconds(kr).toFormat("LLL dd")})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center px-3 py-2 bg-ss-bg-2",children:[jsxRuntimeExports.jsx("span",{className:"text-ss-text-x-light",children:"Season Ends"}),jsxRuntimeExports.jsx("span",{children:jr.toFormat("LLL dd")})]})]})]}),jsxRuntimeExports.jsx("div",{className:"h-8"}),jsxRuntimeExports.jsxs(Body,{className:"text-ss-text-default",children:["The ",jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Sky Strife Season Pass"}),", for ",SEASON_NAME,", gives you access to exclusive perks and features:"]}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-ss-text-light p-4",children:[jsxRuntimeExports.jsx("li",{children:"Access to exclusive free matches summoned from the Sky Pool."}),jsxRuntimeExports.jsx("li",{children:"Unlock additional features for creating matches."}),jsxRuntimeExports.jsxs("ul",{className:"pl-8 list-disc list-inside",children:[jsxRuntimeExports.jsx("li",{children:"Create private matches with a custom access list."}),jsxRuntimeExports.jsx("li",{children:"Set entrance fees and custom rewards."})]}),jsxRuntimeExports.jsx("li",{children:"Exclusive maps from the current season."})]}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsxs("div",{className:"flex w-full space-x-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center px-3 py-2 bg-ss-bg-2 grow",children:[jsxRuntimeExports.jsx("span",{className:"text-ss-text-x-light",children:"Starting Price"}),jsxRuntimeExports.jsx("span",{children:"0.01 ETH"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center px-3 py-2 bg-ss-bg-2 grow",children:[jsxRuntimeExports.jsx("span",{className:"text-ss-text-x-light",children:"Current Price"}),jsxRuntimeExports.jsx("span",{children:Vr(qr)})]})]}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsxs(Body,{className:"text-ss-text-default",children:["The Season Pass price increases with every sale, then decreases over time according to Dutch Auction rules. Read about it ",jsxRuntimeExports.jsx(Link,{children:"here"}),"."]}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default",children:"The Season Pass is non-transferable and can only be minted once per account."}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-baseline gap-3",children:[jsxRuntimeExports.jsx("label",{htmlFor:"slippage-checkbox",children:jsxRuntimeExports.jsxs(Body,{className:"text-ss-text-default",children:["Enable Slippage Protection ",jsxRuntimeExports.jsx("br",{})," (send more ETH than needed in case the price increases while your transaction is confirming)"]})}),jsxRuntimeExports.jsx("input",{id:"slippage-checkbox",type:"checkbox",checked:br,onChange:Jr=>Sr(Jr.target.checked)})]}),br&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx("input",{type:"range",min:10,max:40,value:vr,onChange:Jr=>Er(Number(Jr.target.value))}),jsxRuntimeExports.jsxs(Body,{className:"text-ss-text-default",children:[vr,"% - Send ",Vr(qr*(BigInt(vr)+100n)/100n)," (excess ETH will be refunded)"]})]})]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start self-stretch rounded-sm border border-ss-stroke bg-ss-bg-0",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col justify-center items-center self-stretch py-3 px-4 border-b border-ss-stroke",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center",children:[jsxRuntimeExports.jsxs(Caption,{className:"text-ss-text-x-light leading-6",children:[SEASON_NAME," ends in:"]}),jsxRuntimeExports.jsx("div",{className:"text-ss-text-default text-[2rem] font-medium font-mono leading-8",children:Tr.toFormat("dd:hh:mm:ss")})]})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-start gap-3 self-stretch p-4",children:Ur?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 self-stretch",children:[jsxRuntimeExports.jsx(SeasonPassImg,{className:"w-[100px]"}),jsxRuntimeExports.jsxs("div",{className:"frame_530 flex flex-col items-start",children:[jsxRuntimeExports.jsx(Heading,{className:"text-ss-text-default",children:"Season Pass"}),jsxRuntimeExports.jsx(Caption,{className:"text-ss-text-light",children:"Minting has ended. You are a Season Pass holder this season!"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 self-stretch",children:[jsxRuntimeExports.jsx(SeasonPassImg,{className:"w-[100px]",colored:!1}),jsxRuntimeExports.jsxs("div",{className:"frame_530 flex flex-col items-start",children:[jsxRuntimeExports.jsx(Heading,{className:"text-ss-text-default",children:"Season Pass"}),jsxRuntimeExports.jsx(Caption,{className:"text-ss-text-light",children:"Minting has ended. You are not a Season Pass holder this season."})]})]})})]})}function HoleskyEth(){const[cr,ar]=reactExports.useState(!1);return jsxRuntimeExports.jsx("div",{className:"flex flex-col items-start self-stretch rounded-sm border border-ss-stroke bg-ss-bg-0",children:jsxRuntimeExports.jsxs(Modal,{open:cr,setOpen:ar,title:"Holesky ETH",trigger:jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",size:"md",className:"w-full",children:"Need Holesky ETH?"}),footer:jsxRuntimeExports.jsxs("div",{className:"flex space-x-4 w-full",children:[jsxRuntimeExports.jsx("a",{href:DISCORD_URL,className:"w-full",target:"_blank",rel:"noreferrer",children:jsxRuntimeExports.jsx(Button$1,{onClick:()=>ar(!1),buttonType:"tertiary",className:"w-full",children:"Need help?"})}),jsxRuntimeExports.jsx(Button$1,{onClick:()=>ar(!1),buttonType:"secondary",className:"w-full",children:"Okay, I'm all set!"})]}),children:[jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default",children:"Looks like you dont have any Holesky ETH on Redstone. We can help!"}),jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default",children:jsxRuntimeExports.jsxs("ul",{className:"list-disc ml-8 my-4",children:[jsxRuntimeExports.jsxs("li",{children:["Visit one of the following faucets:",jsxRuntimeExports.jsxs("ul",{className:"list-decimal ml-8",children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{href:"https://holesky-faucet.pk910.de",children:"holesky faucet"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{href:"https://faucet.quicknode.com/ethereum",children:"quicknode"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Link,{href:"https://stakely.io/en/faucet/ethereum-holesky-testnet-eth",children:"stakely"})})]})]}),jsxRuntimeExports.jsxs("li",{children:["Visit the ",jsxRuntimeExports.jsx(Link,{href:"https://redstone.xyz/deposit",children:"Redstone Bridge"})," and deposit your Holesky ETH to Redstone."]}),jsxRuntimeExports.jsxs("li",{children:["Come back to ",jsxRuntimeExports.jsx(Link,{href:"https://playtest.skystrife.xyz",children:"https://playtest.skystrife.xyz"}),", fund your session wallet, and join your first match!"]})]})})]})})}const MATCH_COST=100000000000000000000n;function MatchCost(){const cr=useOrbBalance();return jsxRuntimeExports.jsxs("div",{className:"flex flex-row w-full",children:[jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx(OverlineSmall,{className:"text-ss-text-x-light",children:"Your Resources"}),jsxRuntimeExports.jsx(OrbInput,{amount:cr})]}),jsxRuntimeExports.jsx("div",{className:"w-8"}),jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx(OverlineSmall,{className:"text-ss-text-x-light",children:"Match Cost"}),jsxRuntimeExports.jsx(OrbInput,{amount:MATCH_COST})]})]})}function getOldestMatchInWindow(cr,ar,dr){const{components:{MatchSky:fr}}=cr,hr=ar>dr?ar-dr:0,pr=A$6([Ye$3(fr)]);let mr,gr=BigInt(2)**BigInt(256)-BigInt(1);for(const yr of pr){const xr=de$2(fr,yr).createdAt;xr>hr&&xr<gr&&(gr=xr,mr=yr)}return mr}const findOldestMatchInWindow=cr=>{const ar=getSkypoolConfig(cr);if(!ar)return;const dr=BigInt(Math.floor(DateTime$1.now().toUTC().toSeconds()));return getOldestMatchInWindow(cr,BigInt(dr),ar.window)},getReward=(cr,ar)=>ar<200?5n*cr:ar<400?4n*cr:ar<600?3n*cr:ar<800?2n*cr:ar<1e3?cr:ar<1200?4n*cr/5n:ar<1400?3n*cr/5n:ar<1600?2n*cr/5n:ar<1800?1n*cr/5n:ar<2e3?1n*cr/10n:0n;function getSkypoolConfig(cr){const{components:{SkyPoolConfig:ar}}=cr,dr=[...A$6([Ye$3(ar)])][0],fr=g$7(ar,dr);if(fr)return fr}function getMatchRewardAtTime(cr,ar){const{components:{LastMatchIndex:dr,MatchIndex:fr}}=cr,hr=getSkypoolConfig(cr);if(!hr)return 0n;const{cost:pr,window:mr}=hr,gr=getOldestMatchInWindow(cr,ar,mr),yr=(g$7(dr,f$8)?.matchIndex??0)+1,xr=g$7(fr,gr??"0")?.matchIndex??yr,wr=yr-xr;return getReward(pr,wr)}function useCurrentBlockTime(){const cr=useAmalgema(),{network:{publicClient:ar}}=cr,[dr,fr]=reactExports.useState(0n);return reactExports.useEffect(()=>ar.watchBlockNumber({onBlockNumber:async hr=>{const pr=await ar.getBlock({blockNumber:hr});fr(pr.timestamp)}}),[cr,ar]),dr}function useCurrentMatchReward(){const cr=useAmalgema(),[ar,dr]=reactExports.useState(0n),fr=useCurrentBlockTime();return reactExports.useEffect(()=>{const hr=getMatchRewardAtTime(cr,fr);dr(hr)},[fr,cr]),ar}const DECIMALS=18;function Resources(){const{externalWalletClient:cr,components:{ERC20Registry:ar,Orb_Balances:dr}}=useAmalgema(),{address:fr}=useExternalAccount$1(),hr=H$4(ar,"0x6e734f7262000000000000000000000000000000000000000000000000000000"),pr=H$4(dr,fr?addressToEntityID(fr):"0");return jsxRuntimeExports.jsx("div",{className:"flex justify-between",onClick:()=>{cr&&hr&&cr.watchAsset({type:"ERC20",options:{address:hr.erc20Address,decimals:DECIMALS,symbol:EMOJI}})},children:jsxRuntimeExports.jsx(LabeledOrbInput,{amount:pr?pr.value:0n,label:"My Resources"})})}function InventorySidebar(){const{address:cr}=useExternalAccount$1(),ar=useCurrentMatchReward();return jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-ss-bg-1 border-l border-ss-stroke h-screen overflow-y-auto p-8 pt-4 items-stretch w-[420px] shrink-0",children:[jsxRuntimeExports.jsx(CurrentProfile,{}),jsxRuntimeExports.jsx("div",{className:"h-4 shrink-0"}),jsxRuntimeExports.jsx(HoleskyEth,{}),jsxRuntimeExports.jsx("div",{className:"h-4 shrink-0"}),jsxRuntimeExports.jsx(SeasonPass$1,{account:cr}),jsxRuntimeExports.jsx("div",{className:"h-4"}),cr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"h-8 shrink-0"}),jsxRuntimeExports.jsx(SessionWalletManager,{})]}),jsxRuntimeExports.jsx("div",{className:"h-8 shrink-0"}),jsxRuntimeExports.jsx(Resources,{}),jsxRuntimeExports.jsx("div",{className:"h-2 shrink-0"}),jsxRuntimeExports.jsx(LabeledOrbInput,{amount:MATCH_COST,label:"Match Creation Cost"}),jsxRuntimeExports.jsx("div",{className:"h-2 shrink-0"}),jsxRuntimeExports.jsx(LabeledOrbInput,{amount:ar,label:"Current Match Reward"}),jsxRuntimeExports.jsx("div",{className:"h-2 shrink-0"}),jsxRuntimeExports.jsx("div",{className:"h-[100%]"}),jsxRuntimeExports.jsx(OverlineSmall,{children:"How to Play"}),jsxRuntimeExports.jsx("div",{className:"h-2 shrink-0"}),jsxRuntimeExports.jsx("div",{className:"bg-ss-bg-0 rounded border border-ss-stroke w-full flex flex-col p-4",children:jsxRuntimeExports.jsxs("ol",{className:"list-decimal px-4",children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default",children:"Players spawn with a castle, hero, and 1,000 gold to summon units with."})}),jsxRuntimeExports.jsx("div",{className:"h-2"}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default",children:"Capture mines to generate more gold."})}),jsxRuntimeExports.jsx("div",{className:"h-2"}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default",children:"Fight your opponents armies and destroy their castle to defeat them."})}),jsxRuntimeExports.jsx("div",{className:"h-2"}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default",children:"Be the last castle standing to win."})}),jsxRuntimeExports.jsx("div",{className:"h-2"}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(Body,{className:"text-ss-text-default",children:["The top players earn ",EMOJI," which can be used to create more matches."]})})]})}),jsxRuntimeExports.jsx("div",{className:"h-6 shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex h-fit",children:[jsxRuntimeExports.jsx("a",{href:FEEDBACK_URL,className:"grow",target:"_blank",rel:"noreferrer",children:jsxRuntimeExports.jsx(Button$1,{style:{fontSize:"12px"},className:"w-full text-sm",buttonType:"tertiary",children:"Submit Feedback"})}),jsxRuntimeExports.jsx("div",{className:"w-8"}),jsxRuntimeExports.jsx("a",{href:DISCORD_URL,target:"_blank",rel:"noreferrer",children:jsxRuntimeExports.jsx(IconButton,{children:jsxRuntimeExports.jsx(Discord,{})})}),jsxRuntimeExports.jsx("div",{className:"w-2"}),jsxRuntimeExports.jsx("a",{href:TWITTER_URL,target:"_blank",rel:"noreferrer",children:jsxRuntimeExports.jsx(IconButton,{children:jsxRuntimeExports.jsx(Twitter,{})})}),jsxRuntimeExports.jsx("div",{className:"w-2"}),jsxRuntimeExports.jsx("a",{href:HOW_TO_PLAY_URL,target:"_blank",rel:"noreferrer",children:jsxRuntimeExports.jsx(IconButton,{children:jsxRuntimeExports.jsx(Tutorial,{})})})]})]})}const ConfirmedIcon=()=>jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("g",{id:"Frame",children:jsxRuntimeExports.jsx("path",{id:"Vector",d:"M9 12.75L11.25 15L15 9.75M21 12C21 13.1819 20.7672 14.3522 20.3149 15.4442C19.8626 16.5361 19.1997 17.5282 18.364 18.364C17.5282 19.1997 16.5361 19.8626 15.4442 20.3149C14.3522 20.7672 13.1819 21 12 21C10.8181 21 9.64778 20.7672 8.55585 20.3149C7.46392 19.8626 6.47177 19.1997 5.63604 18.364C4.80031 17.5282 4.13738 16.5361 3.68508 15.4442C3.23279 14.3522 3 13.1819 3 12C3 9.61305 3.94821 7.32387 5.63604 5.63604C7.32387 3.94821 9.61305 3 12 3C14.3869 3 16.6761 3.94821 18.364 5.63604C20.0518 7.32387 21 9.61305 21 12Z",stroke:"#25241D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),cache={};function getTransactionReceipt(cr,ar){return cache[ar.id]||(cache[ar.id]=ar.result.then(dr=>cr.waitForTransactionReceipt({hash:dr}))),cache[ar.id]}const ExclaimIcon=()=>jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("g",{id:"Frame",children:jsxRuntimeExports.jsx("path",{id:"Vector",d:"M12 9V12.75M21 12C21 13.1819 20.7672 14.3522 20.3149 15.4442C19.8626 16.5361 19.1997 17.5282 18.364 18.364C17.5282 19.1997 16.5361 19.8626 15.4442 20.3149C14.3522 20.7672 13.1819 21 12 21C10.8181 21 9.64778 20.7672 8.55585 20.3149C7.46392 19.8626 6.47177 19.1997 5.63604 18.364C4.80031 17.5282 4.13738 16.5361 3.68508 15.4442C3.23279 14.3522 3 13.1819 3 12C3 9.61305 3.94821 7.32387 5.63604 5.63604C7.32387 3.94821 9.61305 3 12 3C14.3869 3 16.6761 3.94821 18.364 5.63604C20.0518 7.32387 21 9.61305 21 12ZM12 15.75H12.008V15.758H12V15.75Z",stroke:"#25241D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),AUTOMATIC_DISMISS_TIME=1e4,messagePending=({functionName:cr,args:ar})=>cr==="copyMap"?"Summoning Island":cr==="createMatch"||cr==="createMatchSeasonPass"?"Creating Match":cr==="register"?"Registering":cr==="setName"?"Setting Name":cr==="setMembers"?"Setting Members":cr==="registerDelegation"?"Registering Delegation":cr==="buySeasonPass"?"Buying Season Pass":cr==="batchCall"&&ar?ar[0].map(fr=>messagePending(decodeFunctionData({abi:IWorldAbi,data:fr.callData}))).join(", "):cr,messageConfirmed=({functionName:cr,args:ar})=>cr==="copyMap"?"Island Summoned":cr==="createMatch"||cr==="createMatchSeasonPass"?"Created Match":cr==="register"?"Registered":cr==="setName"?"Set Name":cr==="setMembers"?"Set Members":cr==="registerDelegation"?"Registered Delegation":cr==="buySeasonPass"?"Bought Season Pass":cr==="batchCall"&&ar?ar[0].map(fr=>messageConfirmed(decodeFunctionData({abi:IWorldAbi,data:fr.callData}))).join(", "):cr,messageFailed=({functionName:cr,args:ar})=>cr==="copyMap"?"Island Summoning Failed":cr==="createMatch"||cr==="createMatchSeasonPass"?"Creating Match Failed":cr==="register"?"Registering Failed":cr==="setName"?"Setting Name Failed":cr==="setMembers"?"Setting Members failed":cr==="registerDelegation"?"Registering Delegation Failed":cr==="buySeasonPass"?"Buying Season Pass Failed":cr==="batchCall"&&ar?ar[0].map(fr=>messageFailed(decodeFunctionData({abi:IWorldAbi,data:fr.callData}))).join(", "):cr,ConfirmedTransaction=({startDismiss:cr,timeUntilDismiss:ar,onClick:dr,message:fr,hash:hr,blockExplorer:pr})=>jsxRuntimeExports.jsxs("div",{style:{border:"1px solid #4FC530",boxShadow:"2px 2px 0px 0px rgba(24, 23, 16, 0.90)"},className:"bg-[#E3FFDB] rounded-lg overflow-hidden",children:[cr&&jsxRuntimeExports.jsx("div",{className:"bg-[#4FC530] h-1 rounded-lg",style:{width:`${ar/AUTOMATIC_DISMISS_TIME*100}%`}}),jsxRuntimeExports.jsxs("div",{className:"flex px-4 py-3",children:[jsxRuntimeExports.jsx(ConfirmedIcon,{}),jsxRuntimeExports.jsxs("div",{className:"ml-2 grow",children:[jsxRuntimeExports.jsx("div",{className:"text-[#2E2D27]",children:fr}),pr&&jsxRuntimeExports.jsx(Link,{className:"text-ss-text-light hover:text-[#2E2D27] underline",href:`${pr}/tx/${hr}`,children:"View on block explorer"})]}),jsxRuntimeExports.jsx("div",{onClick:dr,children:jsxRuntimeExports.jsx(CrossIcon,{})})]})]}),FailedTransaction=({startDismiss:cr,timeUntilDismiss:ar,onClick:dr,message:fr,hash:hr,blockExplorer:pr})=>jsxRuntimeExports.jsxs("div",{style:{border:"1px solid #D62F15",boxShadow:"2px 2px 0px 0px rgba(24, 23, 16, 0.90)"},className:"bg-[#FFDCD6] rounded-lg overflow-hidden",children:[cr&&jsxRuntimeExports.jsx("div",{className:"bg-[#FF8888] h-1 rounded-lg",style:{width:`${ar/AUTOMATIC_DISMISS_TIME*100}%`}}),jsxRuntimeExports.jsxs("div",{className:"flex px-4 py-3",children:[jsxRuntimeExports.jsx(ExclaimIcon,{}),jsxRuntimeExports.jsxs("div",{className:"ml-2 grow",children:[jsxRuntimeExports.jsx("div",{className:"text-[#2E2D27]",children:fr}),pr&&jsxRuntimeExports.jsx(Link,{className:"text-ss-text-light hover:text-[#2E2D27] underline",href:`${pr}/tx/${hr}`,children:"View on block explorer"})]}),jsxRuntimeExports.jsx("div",{onClick:dr,children:jsxRuntimeExports.jsx(CrossIcon,{})})]})]}),PendingTransaction=({message:cr})=>jsxRuntimeExports.jsxs("div",{style:{border:"1px solid #EBA433",boxShadow:"2px 2px 0px 0px rgba(24, 23, 16, 0.90)"},className:"bg-[#FFE8C2] rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"h-[4px]"}),jsxRuntimeExports.jsxs("div",{className:"flex px-4 py-3 items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-1"}),jsxRuntimeExports.jsx(PendingIcon,{}),jsxRuntimeExports.jsx("div",{className:"w-1"}),jsxRuntimeExports.jsx("div",{className:"ml-2 grow",children:jsxRuntimeExports.jsx("div",{children:cr})})]})]}),TransactionSummary=({write:cr,dismissedTransactions:ar,setDismissedTransactions:dr})=>{const{network:{publicClient:fr}}=useAmalgema(),[hr,pr]=reactExports.useState(AUTOMATIC_DISMISS_TIME),[mr,gr]=reactExports.useState(!1),yr=ae$4(cr.result),xr=getTransactionReceipt(fr,cr),wr=ae$4(xr),br=fr.chain.blockExplorers?.default.url,Sr=yr.status==="pending"||wr.status==="pending",vr=yr.status==="rejected"||wr.status==="fulfilled"&&wr.value.status==="reverted";let Er=cr.request.functionName,Ar=cr.request.args;if(Er==="call"||Er==="callFrom"){const _r=cr.request?.args?.length?cr.request.args[cr.request.args.length-1]:"0x",Cr=decodeFunctionData({abi:IWorldAbi,data:_r});Er=Cr.functionName,Ar=Cr.args}return reactExports.useEffect(()=>{if(!mr)return;const _r=setInterval(()=>{pr(Cr=>Cr-10)},10);return()=>clearInterval(_r)},[mr]),reactExports.useEffect(()=>{hr<=0&&dr([...ar,cr.id])}),reactExports.useEffect(()=>{wr.status==="fulfilled"&&gr(!0)},[wr]),jsxRuntimeExports.jsx("div",{children:Sr?jsxRuntimeExports.jsx(PendingTransaction,{message:messagePending({functionName:Er,args:Ar})}):vr?jsxRuntimeExports.jsx(FailedTransaction,{startDismiss:mr,timeUntilDismiss:hr,onClick:()=>dr([...ar,cr.id]),message:messageFailed({functionName:Er,args:Ar}),hash:yr.status==="fulfilled"?yr.value:void 0,blockExplorer:br}):jsxRuntimeExports.jsx(ConfirmedTransaction,{startDismiss:mr,timeUntilDismiss:hr,onClick:()=>dr([...ar,cr.id]),message:messageConfirmed({functionName:Er,args:Ar}),hash:yr.status==="fulfilled"?yr.value:void 0,blockExplorer:br})})};function DisplayTransactions({writes:cr}){const[ar,dr]=reactExports.useState([]),fr=cr.filter(hr=>!ar.includes(hr.id));return fr.length>0&&jsxRuntimeExports.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 my-8 w-96",children:fr.slice(0,3).map((hr,pr)=>pr===0?jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full",children:jsxRuntimeExports.jsx("div",{className:"absolute top-8 w-80 z-20",children:jsxRuntimeExports.jsx(TransactionSummary,{write:hr,dismissedTransactions:ar,setDismissedTransactions:dr})})},hr.id):pr===1?jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full",children:jsxRuntimeExports.jsx("div",{className:"absolute top-4 w-72 z-10",children:jsxRuntimeExports.jsx(TransactionSummary,{write:hr,dismissedTransactions:ar,setDismissedTransactions:dr})})},hr.id):jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full",children:jsxRuntimeExports.jsx("div",{className:"absolute top-0 w-64 z-0",children:jsxRuntimeExports.jsx(TransactionSummary,{write:hr,dismissedTransactions:ar,setDismissedTransactions:dr})})},hr.id))})}function Transactions(){const{writes:cr}=useAmalgema();return jsxRuntimeExports.jsx(DisplayTransactions,{writes:cr})}function FullscreenModal({children:cr}){return jsxRuntimeExports.jsx("div",{style:{background:"rgba(24, 23, 16, 0.65)",zIndex:100},className:"fixed top-0 left-0 w-screen h-screen flex flex-col justify-around",children:jsxRuntimeExports.jsx(Card,{primary:!0,className:"bg-ss-bg-1 flex flex-col justify-center mx-auto p-8 w-[624px]",children:cr})})}function ChooseUsernameModal(){const{components:{Name:cr}}=useAmalgema(),[ar,dr]=reactExports.useState(!1),[fr,hr]=reactExports.useState(!1),{address:pr}=useExternalAccount$1(),mr=H$4(cr,pr?addressToEntityID(pr):"0")?.value;return reactExports.useEffect(()=>{pr&&(fr||mr&&mr.length>0?dr(!1):dr(!0))},[pr,mr,fr]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ar&&jsxRuntimeExports.jsxs(FullscreenModal,{children:[jsxRuntimeExports.jsx(ChooseUsernameForm,{}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",className:"uppercase w-full",onClick:()=>{hr(!0)},children:"Skip"})]})})}const ComponentBrowser=()=>{const cr=useAmalgema(),{network:{world:ar,worldContract:dr},components:fr}=cr,[hr,pr]=reactExports.useState(!1);return reactExports.useEffect(()=>{const mr=gr=>{gr.key==="|"&&pr(yr=>!yr)};return window.addEventListener("keydown",mr),()=>{window.removeEventListener("keydown",mr)}},[]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:hr&&jsxRuntimeExports.jsx("div",{className:"h-screen w-screen absolute top-0 left-0 z-50",children:jsxRuntimeExports.jsx(ot$1,{world:ar,layers:{network:cr},devHighlightComponent:ie$4(ar,{value:P$1.OptionalNumber},{}),setContractComponentValue:(mr,gr,yr)=>{const xr=Object.values(fr).find(wr=>wr.id===gr.id);if(xr&&xr.metadata){const wr=[],br=ft$3(xr.metadata.keySchema,mr);Object.values(br).forEach(Ar=>wr.push(Ar));const{staticData:Sr,encodedLengths:vr,dynamicData:Er}=z$2(xr.metadata.valueSchema,yr);dr.write.setRecord([xr.id,wr,Sr,vr,Er])}}})})})};function DevTools(){return useAmalgema(),reactExports.useEffect(()=>{},[]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}const HOURS_BETWEEN_MATCHES=12;function createMatchTimes(cr,ar=1){const fr=cr.set({hour:0,minute:0,second:0,millisecond:0}),hr=[];for(let pr=0;pr<ar;pr++)for(let mr=0;mr<=24;mr+=HOURS_BETWEEN_MATCHES)hr.push(fr.set({hour:mr,day:cr.day+pr}));return hr}function nowGmt$1(){return DateTime$1.now().setZone("GMT")}function MatchCountdown(){const[cr,ar]=reactExports.useState(nowGmt$1()),dr=reactExports.useMemo(()=>createMatchTimes(cr),[cr]),fr=dr.find(pr=>pr>cr)||dr[0],hr=Duration$1.fromObject({seconds:fr.diff(cr).as("seconds")});return reactExports.useEffect(()=>{const pr=setInterval(()=>{ar(nowGmt$1())},1e3);return()=>clearInterval(pr)},[]),jsxRuntimeExports.jsxs(Card,{primary:!0,children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row justify-between",children:[jsxRuntimeExports.jsxs(OverlineSmall,{children:[SEASON_NAME," matches"]}),jsxRuntimeExports.jsx(OverlineSmall,{children:"matches summoned in:"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"w-[640px]",children:["Matches are created every ",HOURS_BETWEEN_MATCHES," hours starting at 12:00 AM GMT. There are normal, free matches, and matches exclusive to Season Pass holders."]}),jsxRuntimeExports.jsx("div",{className:"text-4xl font-medium font-mono",children:hr.toFormat("hh:mm:ss")})]})]})}function Welcome(){const{components:{SeasonTimes:cr}}=useAmalgema(),ar=H$4(cr,f$8),dr=DateTime$1.fromSeconds(Number(ar?.seasonEnd||0)).setZone("GMT"),[fr,hr]=useLocalStorageState("welcome-open",{defaultValue:!0});return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:fr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Card,{primary:!0,className:"p-0 px-4",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-row gap-4 items-center",children:[jsxRuntimeExports.jsx(SeasonPassImg,{className:"w-[100px] -ml-2"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs(Heading,{className:"text-[#1A6CBC]",children:["Welcome to ",SEASON_NAME,"!"]}),jsxRuntimeExports.jsxs(Heading,{children:["Daily matches until ",dr.toLocaleString(DateTime$1.DATETIME_HUGE)]})]}),jsxRuntimeExports.jsx("div",{className:"grow"}),jsxRuntimeExports.jsx("button",{className:"-mt-12",onClick:()=>hr(!1),children:jsxRuntimeExports.jsx(CrossIcon,{})})]})})}),jsxRuntimeExports.jsx("div",{className:"h-6"})]})})}const selectReset="";function $e02a7d9cb1dc128c$export$c74125a8e3af6bb2(cr){const ar=cr+"CollectionProvider",[dr,fr]=$c512c27ab02ef895$export$50c7b4e9d9f19c1(ar),[hr,pr]=dr(ar,{collectionRef:{current:null},itemMap:new Map}),mr=vr=>{const{scope:Er,children:Ar}=vr,_r=React.useRef(null),Cr=React.useRef(new Map).current;return React.createElement(hr,{scope:Er,itemMap:Cr,collectionRef:_r},Ar)},gr=cr+"CollectionSlot",yr=React.forwardRef((vr,Er)=>{const{scope:Ar,children:_r}=vr,Cr=pr(gr,Ar),kr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Er,Cr.collectionRef);return React.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{ref:kr},_r)}),xr=cr+"CollectionItemSlot",wr="data-radix-collection-item",br=React.forwardRef((vr,Er)=>{const{scope:Ar,children:_r,...Cr}=vr,kr=React.useRef(null),Rr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(Er,kr),Ir=pr(xr,Ar);return React.useEffect(()=>(Ir.itemMap.set(kr,{ref:kr,...Cr}),()=>void Ir.itemMap.delete(kr))),React.createElement($5e63c961fc1ce211$export$8c6ed5c666ac1360,{[wr]:"",ref:Rr},_r)});function Sr(vr){const Er=pr(cr+"CollectionConsumer",vr);return React.useCallback(()=>{const _r=Er.collectionRef.current;if(!_r)return[];const Cr=Array.from(_r.querySelectorAll(`[${wr}]`));return Array.from(Er.itemMap.values()).sort((Ir,Nr)=>Cr.indexOf(Ir.ref.current)-Cr.indexOf(Nr.ref.current))},[Er.collectionRef,Er.itemMap])}return[{Provider:mr,Slot:yr,ItemSlot:br},Sr,fr]}const $f631663db3294ace$var$DirectionContext=reactExports.createContext(void 0);function $f631663db3294ace$export$b39126d51d94e6f3(cr){const ar=reactExports.useContext($f631663db3294ace$var$DirectionContext);return cr||ar||"ltr"}const arrow=cr=>{function ar(dr){return{}.hasOwnProperty.call(dr,"current")}return{name:"arrow",options:cr,fn(dr){const{element:fr,padding:hr}=typeof cr=="function"?cr(dr):cr;return fr&&ar(fr)?fr.current!=null?arrow$1({element:fr.current,padding:hr}).fn(dr):{}:fr?arrow$1({element:fr,padding:hr}).fn(dr):{}}}};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(cr,ar){if(cr===ar)return!0;if(typeof cr!=typeof ar)return!1;if(typeof cr=="function"&&cr.toString()===ar.toString())return!0;let dr,fr,hr;if(cr&&ar&&typeof cr=="object"){if(Array.isArray(cr)){if(dr=cr.length,dr!=ar.length)return!1;for(fr=dr;fr--!==0;)if(!deepEqual(cr[fr],ar[fr]))return!1;return!0}if(hr=Object.keys(cr),dr=hr.length,dr!==Object.keys(ar).length)return!1;for(fr=dr;fr--!==0;)if(!{}.hasOwnProperty.call(ar,hr[fr]))return!1;for(fr=dr;fr--!==0;){const pr=hr[fr];if(!(pr==="_owner"&&cr.$$typeof)&&!deepEqual(cr[pr],ar[pr]))return!1}return!0}return cr!==cr&&ar!==ar}function getDPR(cr){return typeof window>"u"?1:(cr.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(cr,ar){const dr=getDPR(cr);return Math.round(ar*dr)/dr}function useLatestRef(cr){const ar=reactExports.useRef(cr);return index(()=>{ar.current=cr}),ar}function useFloating(cr){cr===void 0&&(cr={});const{placement:ar="bottom",strategy:dr="absolute",middleware:fr=[],platform:hr,elements:{reference:pr,floating:mr}={},transform:gr=!0,whileElementsMounted:yr,open:xr}=cr,[wr,br]=reactExports.useState({x:0,y:0,strategy:dr,placement:ar,middlewareData:{},isPositioned:!1}),[Sr,vr]=reactExports.useState(fr);deepEqual(Sr,fr)||vr(fr);const[Er,Ar]=reactExports.useState(null),[_r,Cr]=reactExports.useState(null),kr=reactExports.useCallback(Lr=>{Lr!=Pr.current&&(Pr.current=Lr,Ar(Lr))},[Ar]),Rr=reactExports.useCallback(Lr=>{Lr!==Tr.current&&(Tr.current=Lr,Cr(Lr))},[Cr]),Ir=pr||Er,Nr=mr||_r,Pr=reactExports.useRef(null),Tr=reactExports.useRef(null),Br=reactExports.useRef(wr),Fr=useLatestRef(yr),jr=useLatestRef(hr),Ur=reactExports.useCallback(()=>{if(!Pr.current||!Tr.current)return;const Lr={placement:ar,strategy:dr,middleware:Sr};jr.current&&(Lr.platform=jr.current),computePosition(Pr.current,Tr.current,Lr).then(Vr=>{const Jr={...Vr,isPositioned:!0};qr.current&&!deepEqual(Br.current,Jr)&&(Br.current=Jr,reactDomExports.flushSync(()=>{br(Jr)}))})},[Sr,ar,dr,jr]);index(()=>{xr===!1&&Br.current.isPositioned&&(Br.current.isPositioned=!1,br(Lr=>({...Lr,isPositioned:!1})))},[xr]);const qr=reactExports.useRef(!1);index(()=>(qr.current=!0,()=>{qr.current=!1}),[]),index(()=>{if(Ir&&(Pr.current=Ir),Nr&&(Tr.current=Nr),Ir&&Nr){if(Fr.current)return Fr.current(Ir,Nr,Ur);Ur()}},[Ir,Nr,Ur,Fr]);const Hr=reactExports.useMemo(()=>({reference:Pr,floating:Tr,setReference:kr,setFloating:Rr}),[kr,Rr]),Or=reactExports.useMemo(()=>({reference:Ir,floating:Nr}),[Ir,Nr]),Mr=reactExports.useMemo(()=>{const Lr={position:dr,left:0,top:0};if(!Or.floating)return Lr;const Vr=roundByDPR(Or.floating,wr.x),Jr=roundByDPR(Or.floating,wr.y);return gr?{...Lr,transform:"translate("+Vr+"px, "+Jr+"px)",...getDPR(Or.floating)>=1.5&&{willChange:"transform"}}:{position:dr,left:Vr,top:Jr}},[dr,gr,Or.floating,wr.x,wr.y]);return reactExports.useMemo(()=>({...wr,update:Ur,refs:Hr,elements:Or,floatingStyles:Mr}),[wr,Ur,Hr,Or,Mr])}function $db6c3485150b8e66$export$1ab7ae714698c4b8(cr){const[ar,dr]=reactExports.useState(void 0);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(cr){dr({width:cr.offsetWidth,height:cr.offsetHeight});const fr=new ResizeObserver(hr=>{if(!Array.isArray(hr)||!hr.length)return;const pr=hr[0];let mr,gr;if("borderBoxSize"in pr){const yr=pr.borderBoxSize,xr=Array.isArray(yr)?yr[0]:yr;mr=xr.inlineSize,gr=xr.blockSize}else mr=cr.offsetWidth,gr=cr.offsetHeight;dr({width:mr,height:gr})});return fr.observe(cr,{box:"border-box"}),()=>fr.unobserve(cr)}else dr(void 0)},[cr]),ar}const $cf1ac5d9fe0e8206$var$POPPER_NAME="Popper",[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cf1ac5d9fe0e8206$var$POPPER_NAME),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$POPPER_NAME),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=cr=>{const{__scopePopper:ar,children:dr}=cr,[fr,hr]=reactExports.useState(null);return reactExports.createElement($cf1ac5d9fe0e8206$var$PopperProvider,{scope:ar,anchor:fr,onAnchorChange:hr},dr)},$cf1ac5d9fe0e8206$var$ANCHOR_NAME="PopperAnchor",$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=reactExports.forwardRef((cr,ar)=>{const{__scopePopper:dr,virtualRef:fr,...hr}=cr,pr=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$ANCHOR_NAME,dr),mr=reactExports.useRef(null),gr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ar,mr);return reactExports.useEffect(()=>{pr.onAnchorChange(fr?.current||mr.current)}),fr?null:reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},hr,{ref:gr}))}),$cf1ac5d9fe0e8206$var$CONTENT_NAME="PopperContent",[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=reactExports.forwardRef((cr,ar)=>{var dr,fr,hr,pr,mr,gr,yr,xr;const{__scopePopper:wr,side:br="bottom",sideOffset:Sr=0,align:vr="center",alignOffset:Er=0,arrowPadding:Ar=0,avoidCollisions:_r=!0,collisionBoundary:Cr=[],collisionPadding:kr=0,sticky:Rr="partial",hideWhenDetached:Ir=!1,updatePositionStrategy:Nr="optimized",onPlaced:Pr,...Tr}=cr,Br=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,wr),[Fr,jr]=reactExports.useState(null),Ur=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ar,os=>jr(os)),[qr,Hr]=reactExports.useState(null),Or=$db6c3485150b8e66$export$1ab7ae714698c4b8(qr),Mr=(dr=Or?.width)!==null&&dr!==void 0?dr:0,Lr=(fr=Or?.height)!==null&&fr!==void 0?fr:0,Vr=br+(vr!=="center"?"-"+vr:""),Jr=typeof kr=="number"?kr:{top:0,right:0,bottom:0,left:0,...kr},es=Array.isArray(Cr)?Cr:[Cr],ns=es.length>0,Qr={padding:Jr,boundary:es.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:ns},{refs:zr,floatingStyles:Wr,placement:ss,isPositioned:Xr,middlewareData:ts}=useFloating({strategy:"fixed",placement:Vr,whileElementsMounted:(...os)=>autoUpdate(...os,{animationFrame:Nr==="always"}),elements:{reference:Br.anchor},middleware:[offset({mainAxis:Sr+Lr,alignmentAxis:Er}),_r&&shift({mainAxis:!0,crossAxis:!1,limiter:Rr==="partial"?limitShift():void 0,...Qr}),_r&&flip({...Qr}),size({...Qr,apply:({elements:os,rects:bs,availableWidth:ws,availableHeight:As})=>{const{width:gs,height:vs}=bs.reference,Ps=os.floating.style;Ps.setProperty("--radix-popper-available-width",`${ws}px`),Ps.setProperty("--radix-popper-available-height",`${As}px`),Ps.setProperty("--radix-popper-anchor-width",`${gs}px`),Ps.setProperty("--radix-popper-anchor-height",`${vs}px`)}}),qr&&arrow({element:qr,padding:Ar}),$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:Mr,arrowHeight:Lr}),Ir&&hide({strategy:"referenceHidden",...Qr})]}),[fs,rs]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(ss),as=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Pr);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{Xr&&as?.()},[Xr,as]);const ps=(hr=ts.arrow)===null||hr===void 0?void 0:hr.x,xs=(pr=ts.arrow)===null||pr===void 0?void 0:pr.y,Ss=((mr=ts.arrow)===null||mr===void 0?void 0:mr.centerOffset)!==0,[Ns,Ts]=reactExports.useState();return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{Fr&&Ts(window.getComputedStyle(Fr).zIndex)},[Fr]),reactExports.createElement("div",{ref:zr.setFloating,"data-radix-popper-content-wrapper":"",style:{...Wr,transform:Xr?Wr.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ns,"--radix-popper-transform-origin":[(gr=ts.transformOrigin)===null||gr===void 0?void 0:gr.x,(yr=ts.transformOrigin)===null||yr===void 0?void 0:yr.y].join(" ")},dir:cr.dir},reactExports.createElement($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:wr,placedSide:fs,onArrowChange:Hr,arrowX:ps,arrowY:xs,shouldHideArrow:Ss},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-side":fs,"data-align":rs},Tr,{ref:Ur,style:{...Tr.style,animation:Xr?void 0:"none",opacity:(xr=ts.hide)!==null&&xr!==void 0&&xr.referenceHidden?0:void 0}}))))});function $cf1ac5d9fe0e8206$var$isNotNull(cr){return cr!==null}const $cf1ac5d9fe0e8206$var$transformOrigin=cr=>({name:"transformOrigin",options:cr,fn(ar){var dr,fr,hr,pr,mr;const{placement:gr,rects:yr,middlewareData:xr}=ar,br=((dr=xr.arrow)===null||dr===void 0?void 0:dr.centerOffset)!==0,Sr=br?0:cr.arrowWidth,vr=br?0:cr.arrowHeight,[Er,Ar]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(gr),_r={start:"0%",center:"50%",end:"100%"}[Ar],Cr=((fr=(hr=xr.arrow)===null||hr===void 0?void 0:hr.x)!==null&&fr!==void 0?fr:0)+Sr/2,kr=((pr=(mr=xr.arrow)===null||mr===void 0?void 0:mr.y)!==null&&pr!==void 0?pr:0)+vr/2;let Rr="",Ir="";return Er==="bottom"?(Rr=br?_r:`${Cr}px`,Ir=`${-vr}px`):Er==="top"?(Rr=br?_r:`${Cr}px`,Ir=`${yr.floating.height+vr}px`):Er==="right"?(Rr=`${-vr}px`,Ir=br?_r:`${kr}px`):Er==="left"&&(Rr=`${yr.floating.width+vr}px`,Ir=br?_r:`${kr}px`),{data:{x:Rr,y:Ir}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(cr){const[ar,dr="center"]=cr.split("-");return[ar,dr]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,$d7bdfb9eb0fdf311$var$ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",$d7bdfb9eb0fdf311$var$EVENT_OPTIONS={bubbles:!1,cancelable:!0},$d7bdfb9eb0fdf311$var$GROUP_NAME="RovingFocusGroup",[$d7bdfb9eb0fdf311$var$Collection,$d7bdfb9eb0fdf311$var$useCollection,$d7bdfb9eb0fdf311$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($d7bdfb9eb0fdf311$var$GROUP_NAME),[$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext,$d7bdfb9eb0fdf311$export$c7109489551a4f4]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($d7bdfb9eb0fdf311$var$GROUP_NAME,[$d7bdfb9eb0fdf311$var$createCollectionScope]),[$d7bdfb9eb0fdf311$var$RovingFocusProvider,$d7bdfb9eb0fdf311$var$useRovingFocusContext]=$d7bdfb9eb0fdf311$var$createRovingFocusGroupContext($d7bdfb9eb0fdf311$var$GROUP_NAME),$d7bdfb9eb0fdf311$export$8699f7c8af148338=reactExports.forwardRef((cr,ar)=>reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Provider,{scope:cr.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.Slot,{scope:cr.__scopeRovingFocusGroup},reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusGroupImpl,_extends$1({},cr,{ref:ar}))))),$d7bdfb9eb0fdf311$var$RovingFocusGroupImpl=reactExports.forwardRef((cr,ar)=>{const{__scopeRovingFocusGroup:dr,orientation:fr,loop:hr=!1,dir:pr,currentTabStopId:mr,defaultCurrentTabStopId:gr,onCurrentTabStopIdChange:yr,onEntryFocus:xr,...wr}=cr,br=reactExports.useRef(null),Sr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ar,br),vr=$f631663db3294ace$export$b39126d51d94e6f3(pr),[Er=null,Ar]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:mr,defaultProp:gr,onChange:yr}),[_r,Cr]=reactExports.useState(!1),kr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(xr),Rr=$d7bdfb9eb0fdf311$var$useCollection(dr),Ir=reactExports.useRef(!1),[Nr,Pr]=reactExports.useState(0);return reactExports.useEffect(()=>{const Tr=br.current;if(Tr)return Tr.addEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,kr),()=>Tr.removeEventListener($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,kr)},[kr]),reactExports.createElement($d7bdfb9eb0fdf311$var$RovingFocusProvider,{scope:dr,orientation:fr,dir:vr,loop:hr,currentTabStopId:Er,onItemFocus:reactExports.useCallback(Tr=>Ar(Tr),[Ar]),onItemShiftTab:reactExports.useCallback(()=>Cr(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>Pr(Tr=>Tr+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>Pr(Tr=>Tr-1),[])},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({tabIndex:_r||Nr===0?-1:0,"data-orientation":fr},wr,{ref:Sr,style:{outline:"none",...cr.style},onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onMouseDown,()=>{Ir.current=!0}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onFocus,Tr=>{const Br=!Ir.current;if(Tr.target===Tr.currentTarget&&Br&&!_r){const Fr=new CustomEvent($d7bdfb9eb0fdf311$var$ENTRY_FOCUS,$d7bdfb9eb0fdf311$var$EVENT_OPTIONS);if(Tr.currentTarget.dispatchEvent(Fr),!Fr.defaultPrevented){const jr=Rr().filter(Mr=>Mr.focusable),Ur=jr.find(Mr=>Mr.active),qr=jr.find(Mr=>Mr.id===Er),Or=[Ur,qr,...jr].filter(Boolean).map(Mr=>Mr.ref.current);$d7bdfb9eb0fdf311$var$focusFirst(Or)}}Ir.current=!1}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onBlur,()=>Cr(!1))})))}),$d7bdfb9eb0fdf311$var$ITEM_NAME="RovingFocusGroupItem",$d7bdfb9eb0fdf311$export$ab9df7c53fe8454=reactExports.forwardRef((cr,ar)=>{const{__scopeRovingFocusGroup:dr,focusable:fr=!0,active:hr=!1,tabStopId:pr,...mr}=cr,gr=$1746a345f3d73bb7$export$f680877a34711e37(),yr=pr||gr,xr=$d7bdfb9eb0fdf311$var$useRovingFocusContext($d7bdfb9eb0fdf311$var$ITEM_NAME,dr),wr=xr.currentTabStopId===yr,br=$d7bdfb9eb0fdf311$var$useCollection(dr),{onFocusableItemAdd:Sr,onFocusableItemRemove:vr}=xr;return reactExports.useEffect(()=>{if(fr)return Sr(),()=>vr()},[fr,Sr,vr]),reactExports.createElement($d7bdfb9eb0fdf311$var$Collection.ItemSlot,{scope:dr,id:yr,focusable:fr,active:hr},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({tabIndex:wr?0:-1,"data-orientation":xr.orientation},mr,{ref:ar,onMouseDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onMouseDown,Er=>{fr?xr.onItemFocus(yr):Er.preventDefault()}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onFocus,()=>xr.onItemFocus(yr)),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onKeyDown,Er=>{if(Er.key==="Tab"&&Er.shiftKey){xr.onItemShiftTab();return}if(Er.target!==Er.currentTarget)return;const Ar=$d7bdfb9eb0fdf311$var$getFocusIntent(Er,xr.orientation,xr.dir);if(Ar!==void 0){Er.preventDefault();let Cr=br().filter(kr=>kr.focusable).map(kr=>kr.ref.current);if(Ar==="last")Cr.reverse();else if(Ar==="prev"||Ar==="next"){Ar==="prev"&&Cr.reverse();const kr=Cr.indexOf(Er.currentTarget);Cr=xr.loop?$d7bdfb9eb0fdf311$var$wrapArray(Cr,kr+1):Cr.slice(kr+1)}setTimeout(()=>$d7bdfb9eb0fdf311$var$focusFirst(Cr))}})})))}),$d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $d7bdfb9eb0fdf311$var$getDirectionAwareKey(cr,ar){return ar!=="rtl"?cr:cr==="ArrowLeft"?"ArrowRight":cr==="ArrowRight"?"ArrowLeft":cr}function $d7bdfb9eb0fdf311$var$getFocusIntent(cr,ar,dr){const fr=$d7bdfb9eb0fdf311$var$getDirectionAwareKey(cr.key,dr);if(!(ar==="vertical"&&["ArrowLeft","ArrowRight"].includes(fr))&&!(ar==="horizontal"&&["ArrowUp","ArrowDown"].includes(fr)))return $d7bdfb9eb0fdf311$var$MAP_KEY_TO_FOCUS_INTENT[fr]}function $d7bdfb9eb0fdf311$var$focusFirst(cr){const ar=document.activeElement;for(const dr of cr)if(dr===ar||(dr.focus(),document.activeElement!==ar))return}function $d7bdfb9eb0fdf311$var$wrapArray(cr,ar){return cr.map((dr,fr)=>cr[(ar+fr)%cr.length])}const $d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9=$d7bdfb9eb0fdf311$export$8699f7c8af148338,$d7bdfb9eb0fdf311$export$6d08773d2e66f8f2=$d7bdfb9eb0fdf311$export$ab9df7c53fe8454,$6cc32821e9371a1c$var$SELECTION_KEYS=["Enter"," "],$6cc32821e9371a1c$var$FIRST_KEYS=["ArrowDown","PageUp","Home"],$6cc32821e9371a1c$var$LAST_KEYS=["ArrowUp","PageDown","End"],$6cc32821e9371a1c$var$FIRST_LAST_KEYS=[...$6cc32821e9371a1c$var$FIRST_KEYS,...$6cc32821e9371a1c$var$LAST_KEYS],$6cc32821e9371a1c$var$MENU_NAME="Menu",[$6cc32821e9371a1c$var$Collection,$6cc32821e9371a1c$var$useCollection,$6cc32821e9371a1c$var$createCollectionScope]=$e02a7d9cb1dc128c$export$c74125a8e3af6bb2($6cc32821e9371a1c$var$MENU_NAME),[$6cc32821e9371a1c$var$createMenuContext,$6cc32821e9371a1c$export$4027731b685e72eb]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($6cc32821e9371a1c$var$MENU_NAME,[$6cc32821e9371a1c$var$createCollectionScope,$cf1ac5d9fe0e8206$export$722aac194ae923,$d7bdfb9eb0fdf311$export$c7109489551a4f4]),$6cc32821e9371a1c$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),$6cc32821e9371a1c$var$useRovingFocusGroupScope=$d7bdfb9eb0fdf311$export$c7109489551a4f4(),[$6cc32821e9371a1c$var$MenuProvider,$6cc32821e9371a1c$var$useMenuContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$MENU_NAME),[$6cc32821e9371a1c$var$MenuRootProvider,$6cc32821e9371a1c$var$useMenuRootContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$MENU_NAME),$6cc32821e9371a1c$export$d9b273488cd8ce6f=cr=>{const{__scopeMenu:ar,open:dr=!1,children:fr,dir:hr,onOpenChange:pr,modal:mr=!0}=cr,gr=$6cc32821e9371a1c$var$usePopperScope(ar),[yr,xr]=reactExports.useState(null),wr=reactExports.useRef(!1),br=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(pr),Sr=$f631663db3294ace$export$b39126d51d94e6f3(hr);return reactExports.useEffect(()=>{const vr=()=>{wr.current=!0,document.addEventListener("pointerdown",Er,{capture:!0,once:!0}),document.addEventListener("pointermove",Er,{capture:!0,once:!0})},Er=()=>wr.current=!1;return document.addEventListener("keydown",vr,{capture:!0}),()=>{document.removeEventListener("keydown",vr,{capture:!0}),document.removeEventListener("pointerdown",Er,{capture:!0}),document.removeEventListener("pointermove",Er,{capture:!0})}},[]),reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,gr,reactExports.createElement($6cc32821e9371a1c$var$MenuProvider,{scope:ar,open:dr,onOpenChange:br,content:yr,onContentChange:xr},reactExports.createElement($6cc32821e9371a1c$var$MenuRootProvider,{scope:ar,onClose:reactExports.useCallback(()=>br(!1),[br]),isUsingKeyboardRef:wr,dir:Sr,modal:mr},fr)))},$6cc32821e9371a1c$export$9fa5ebd18bee4d43=reactExports.forwardRef((cr,ar)=>{const{__scopeMenu:dr,...fr}=cr,hr=$6cc32821e9371a1c$var$usePopperScope(dr);return reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$1({},hr,fr,{ref:ar}))}),$6cc32821e9371a1c$var$PORTAL_NAME="MenuPortal",[$6cc32821e9371a1c$var$PortalProvider,$6cc32821e9371a1c$var$usePortalContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$PORTAL_NAME,{forceMount:void 0}),$6cc32821e9371a1c$var$CONTENT_NAME="MenuContent",[$6cc32821e9371a1c$var$MenuContentProvider,$6cc32821e9371a1c$var$useMenuContentContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$CONTENT_NAME),$6cc32821e9371a1c$export$479f0f2f71193efe=reactExports.forwardRef((cr,ar)=>{const dr=$6cc32821e9371a1c$var$usePortalContext($6cc32821e9371a1c$var$CONTENT_NAME,cr.__scopeMenu),{forceMount:fr=dr.forceMount,...hr}=cr,pr=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,cr.__scopeMenu),mr=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$CONTENT_NAME,cr.__scopeMenu);return reactExports.createElement($6cc32821e9371a1c$var$Collection.Provider,{scope:cr.__scopeMenu},reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:fr||pr.open},reactExports.createElement($6cc32821e9371a1c$var$Collection.Slot,{scope:cr.__scopeMenu},mr.modal?reactExports.createElement($6cc32821e9371a1c$var$MenuRootContentModal,_extends$1({},hr,{ref:ar})):reactExports.createElement($6cc32821e9371a1c$var$MenuRootContentNonModal,_extends$1({},hr,{ref:ar})))))}),$6cc32821e9371a1c$var$MenuRootContentModal=reactExports.forwardRef((cr,ar)=>{const dr=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,cr.__scopeMenu),fr=reactExports.useRef(null),hr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ar,fr);return reactExports.useEffect(()=>{const pr=fr.current;if(pr)return hideOthers(pr)},[]),reactExports.createElement($6cc32821e9371a1c$var$MenuContentImpl,_extends$1({},cr,{ref:hr,trapFocus:dr.open,disableOutsidePointerEvents:dr.open,disableOutsideScroll:!0,onFocusOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onFocusOutside,pr=>pr.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>dr.onOpenChange(!1)}))}),$6cc32821e9371a1c$var$MenuRootContentNonModal=reactExports.forwardRef((cr,ar)=>{const dr=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,cr.__scopeMenu);return reactExports.createElement($6cc32821e9371a1c$var$MenuContentImpl,_extends$1({},cr,{ref:ar,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>dr.onOpenChange(!1)}))}),$6cc32821e9371a1c$var$MenuContentImpl=reactExports.forwardRef((cr,ar)=>{const{__scopeMenu:dr,loop:fr=!1,trapFocus:hr,onOpenAutoFocus:pr,onCloseAutoFocus:mr,disableOutsidePointerEvents:gr,onEntryFocus:yr,onEscapeKeyDown:xr,onPointerDownOutside:wr,onFocusOutside:br,onInteractOutside:Sr,onDismiss:vr,disableOutsideScroll:Er,...Ar}=cr,_r=$6cc32821e9371a1c$var$useMenuContext($6cc32821e9371a1c$var$CONTENT_NAME,dr),Cr=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$CONTENT_NAME,dr),kr=$6cc32821e9371a1c$var$usePopperScope(dr),Rr=$6cc32821e9371a1c$var$useRovingFocusGroupScope(dr),Ir=$6cc32821e9371a1c$var$useCollection(dr),[Nr,Pr]=reactExports.useState(null),Tr=reactExports.useRef(null),Br=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ar,Tr,_r.onContentChange),Fr=reactExports.useRef(0),jr=reactExports.useRef(""),Ur=reactExports.useRef(0),qr=reactExports.useRef(null),Hr=reactExports.useRef("right"),Or=reactExports.useRef(0),Mr=Er?$epM9y$RemoveScroll:reactExports.Fragment,Lr=Er?{as:$5e63c961fc1ce211$export$8c6ed5c666ac1360,allowPinchZoom:!0}:void 0,Vr=es=>{var ns,Qr;const zr=jr.current+es,Wr=Ir().filter(as=>!as.disabled),ss=document.activeElement,Xr=(ns=Wr.find(as=>as.ref.current===ss))===null||ns===void 0?void 0:ns.textValue,ts=Wr.map(as=>as.textValue),fs=$6cc32821e9371a1c$var$getNextMatch(ts,zr,Xr),rs=(Qr=Wr.find(as=>as.textValue===fs))===null||Qr===void 0?void 0:Qr.ref.current;(function as(ps){jr.current=ps,window.clearTimeout(Fr.current),ps!==""&&(Fr.current=window.setTimeout(()=>as(""),1e3))})(zr),rs&&setTimeout(()=>rs.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(Fr.current),[]),$3db38b7d1fb3fe6a$export$b7ece24a22aeda8c();const Jr=reactExports.useCallback(es=>{var ns,Qr;return Hr.current===((ns=qr.current)===null||ns===void 0?void 0:ns.side)&&$6cc32821e9371a1c$var$isPointerInGraceArea(es,(Qr=qr.current)===null||Qr===void 0?void 0:Qr.area)},[]);return reactExports.createElement($6cc32821e9371a1c$var$MenuContentProvider,{scope:dr,searchRef:jr,onItemEnter:reactExports.useCallback(es=>{Jr(es)&&es.preventDefault()},[Jr]),onItemLeave:reactExports.useCallback(es=>{var ns;Jr(es)||((ns=Tr.current)===null||ns===void 0||ns.focus(),Pr(null))},[Jr]),onTriggerLeave:reactExports.useCallback(es=>{Jr(es)&&es.preventDefault()},[Jr]),pointerGraceTimerRef:Ur,onPointerGraceIntentChange:reactExports.useCallback(es=>{qr.current=es},[])},reactExports.createElement(Mr,Lr,reactExports.createElement($d3863c46a17e8a28$export$20e40289641fbbb6,{asChild:!0,trapped:hr,onMountAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(pr,es=>{var ns;es.preventDefault(),(ns=Tr.current)===null||ns===void 0||ns.focus()}),onUnmountAutoFocus:mr},reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:gr,onEscapeKeyDown:xr,onPointerDownOutside:wr,onFocusOutside:br,onInteractOutside:Sr,onDismiss:vr},reactExports.createElement($d7bdfb9eb0fdf311$export$be92b6f5f03c0fe9,_extends$1({asChild:!0},Rr,{dir:Cr.dir,orientation:"vertical",loop:fr,currentTabStopId:Nr,onCurrentTabStopIdChange:Pr,onEntryFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(yr,es=>{Cr.isUsingKeyboardRef.current||es.preventDefault()})}),reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$1({role:"menu","aria-orientation":"vertical","data-state":$6cc32821e9371a1c$var$getOpenState(_r.open),"data-radix-menu-content":"",dir:Cr.dir},kr,Ar,{ref:Br,style:{outline:"none",...Ar.style},onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(Ar.onKeyDown,es=>{const Qr=es.target.closest("[data-radix-menu-content]")===es.currentTarget,zr=es.ctrlKey||es.altKey||es.metaKey,Wr=es.key.length===1;Qr&&(es.key==="Tab"&&es.preventDefault(),!zr&&Wr&&Vr(es.key));const ss=Tr.current;if(es.target!==ss||!$6cc32821e9371a1c$var$FIRST_LAST_KEYS.includes(es.key))return;es.preventDefault();const ts=Ir().filter(fs=>!fs.disabled).map(fs=>fs.ref.current);$6cc32821e9371a1c$var$LAST_KEYS.includes(es.key)&&ts.reverse(),$6cc32821e9371a1c$var$focusFirst(ts)}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onBlur,es=>{es.currentTarget.contains(es.target)||(window.clearTimeout(Fr.current),jr.current="")}),onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onPointerMove,$6cc32821e9371a1c$var$whenMouse(es=>{const ns=es.target,Qr=Or.current!==es.clientX;if(es.currentTarget.contains(ns)&&Qr){const zr=es.clientX>Or.current?"right":"left";Hr.current=zr,Or.current=es.clientX}}))})))))))}),$6cc32821e9371a1c$export$22a631d1f72787bb=reactExports.forwardRef((cr,ar)=>{const{__scopeMenu:dr,...fr}=cr;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"group"},fr,{ref:ar}))}),$6cc32821e9371a1c$var$ITEM_NAME="MenuItem",$6cc32821e9371a1c$var$ITEM_SELECT="menu.itemSelect",$6cc32821e9371a1c$export$2ce376c2cc3355c8=reactExports.forwardRef((cr,ar)=>{const{disabled:dr=!1,onSelect:fr,...hr}=cr,pr=reactExports.useRef(null),mr=$6cc32821e9371a1c$var$useMenuRootContext($6cc32821e9371a1c$var$ITEM_NAME,cr.__scopeMenu),gr=$6cc32821e9371a1c$var$useMenuContentContext($6cc32821e9371a1c$var$ITEM_NAME,cr.__scopeMenu),yr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ar,pr),xr=reactExports.useRef(!1),wr=()=>{const br=pr.current;if(!dr&&br){const Sr=new CustomEvent($6cc32821e9371a1c$var$ITEM_SELECT,{bubbles:!0,cancelable:!0});br.addEventListener($6cc32821e9371a1c$var$ITEM_SELECT,vr=>fr?.(vr),{once:!0}),$8927f6f2acc4f386$export$6d1a0317bde7de7f(br,Sr),Sr.defaultPrevented?xr.current=!1:mr.onClose()}};return reactExports.createElement($6cc32821e9371a1c$var$MenuItemImpl,_extends$1({},hr,{ref:yr,disabled:dr,onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onClick,wr),onPointerDown:br=>{var Sr;(Sr=cr.onPointerDown)===null||Sr===void 0||Sr.call(cr,br),xr.current=!0},onPointerUp:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onPointerUp,br=>{var Sr;xr.current||(Sr=br.currentTarget)===null||Sr===void 0||Sr.click()}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onKeyDown,br=>{const Sr=gr.searchRef.current!=="";dr||Sr&&br.key===" "||$6cc32821e9371a1c$var$SELECTION_KEYS.includes(br.key)&&(br.currentTarget.click(),br.preventDefault())})}))}),$6cc32821e9371a1c$var$MenuItemImpl=reactExports.forwardRef((cr,ar)=>{const{__scopeMenu:dr,disabled:fr=!1,textValue:hr,...pr}=cr,mr=$6cc32821e9371a1c$var$useMenuContentContext($6cc32821e9371a1c$var$ITEM_NAME,dr),gr=$6cc32821e9371a1c$var$useRovingFocusGroupScope(dr),yr=reactExports.useRef(null),xr=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(ar,yr),[wr,br]=reactExports.useState(!1),[Sr,vr]=reactExports.useState("");return reactExports.useEffect(()=>{const Er=yr.current;if(Er){var Ar;vr(((Ar=Er.textContent)!==null&&Ar!==void 0?Ar:"").trim())}},[pr.children]),reactExports.createElement($6cc32821e9371a1c$var$Collection.ItemSlot,{scope:dr,disabled:fr,textValue:hr??Sr},reactExports.createElement($d7bdfb9eb0fdf311$export$6d08773d2e66f8f2,_extends$1({asChild:!0},gr,{focusable:!fr}),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({role:"menuitem","data-highlighted":wr?"":void 0,"aria-disabled":fr||void 0,"data-disabled":fr?"":void 0},pr,{ref:xr,onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onPointerMove,$6cc32821e9371a1c$var$whenMouse(Er=>{fr?mr.onItemLeave(Er):(mr.onItemEnter(Er),Er.defaultPrevented||Er.currentTarget.focus())})),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onPointerLeave,$6cc32821e9371a1c$var$whenMouse(Er=>mr.onItemLeave(Er))),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onFocus,()=>br(!0)),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onBlur,()=>br(!1))}))))}),$6cc32821e9371a1c$var$RADIO_GROUP_NAME="MenuRadioGroup",[$6cc32821e9371a1c$var$RadioGroupProvider,$6cc32821e9371a1c$var$useRadioGroupContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$RADIO_GROUP_NAME,{value:void 0,onValueChange:()=>{}}),$6cc32821e9371a1c$export$ea2200c9eee416b3=reactExports.forwardRef((cr,ar)=>{const{value:dr,onValueChange:fr,...hr}=cr,pr=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(fr);return reactExports.createElement($6cc32821e9371a1c$var$RadioGroupProvider,{scope:cr.__scopeMenu,value:dr,onValueChange:pr},reactExports.createElement($6cc32821e9371a1c$export$22a631d1f72787bb,_extends$1({},hr,{ref:ar})))}),$6cc32821e9371a1c$var$RADIO_ITEM_NAME="MenuRadioItem",$6cc32821e9371a1c$export$69bd225e9817f6d0=reactExports.forwardRef((cr,ar)=>{const{value:dr,...fr}=cr,hr=$6cc32821e9371a1c$var$useRadioGroupContext($6cc32821e9371a1c$var$RADIO_ITEM_NAME,cr.__scopeMenu),pr=dr===hr.value;return reactExports.createElement($6cc32821e9371a1c$var$ItemIndicatorProvider,{scope:cr.__scopeMenu,checked:pr},reactExports.createElement($6cc32821e9371a1c$export$2ce376c2cc3355c8,_extends$1({role:"menuitemradio","aria-checked":pr},fr,{ref:ar,"data-state":$6cc32821e9371a1c$var$getCheckedState(pr),onSelect:$e42e1063c40fb3ef$export$b9ecd428b558ff10(fr.onSelect,()=>{var mr;return(mr=hr.onValueChange)===null||mr===void 0?void 0:mr.call(hr,dr)},{checkForDefaultPrevented:!1})})))}),$6cc32821e9371a1c$var$ITEM_INDICATOR_NAME="MenuItemIndicator",[$6cc32821e9371a1c$var$ItemIndicatorProvider,$6cc32821e9371a1c$var$useItemIndicatorContext]=$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$ITEM_INDICATOR_NAME,{checked:!1}),$6cc32821e9371a1c$var$SUB_NAME="MenuSub";$6cc32821e9371a1c$var$createMenuContext($6cc32821e9371a1c$var$SUB_NAME);function $6cc32821e9371a1c$var$getOpenState(cr){return cr?"open":"closed"}function $6cc32821e9371a1c$var$isIndeterminate(cr){return cr==="indeterminate"}function $6cc32821e9371a1c$var$getCheckedState(cr){return $6cc32821e9371a1c$var$isIndeterminate(cr)?"indeterminate":cr?"checked":"unchecked"}function $6cc32821e9371a1c$var$focusFirst(cr){const ar=document.activeElement;for(const dr of cr)if(dr===ar||(dr.focus(),document.activeElement!==ar))return}function $6cc32821e9371a1c$var$wrapArray(cr,ar){return cr.map((dr,fr)=>cr[(ar+fr)%cr.length])}function $6cc32821e9371a1c$var$getNextMatch(cr,ar,dr){const hr=ar.length>1&&Array.from(ar).every(xr=>xr===ar[0])?ar[0]:ar,pr=dr?cr.indexOf(dr):-1;let mr=$6cc32821e9371a1c$var$wrapArray(cr,Math.max(pr,0));hr.length===1&&(mr=mr.filter(xr=>xr!==dr));const yr=mr.find(xr=>xr.toLowerCase().startsWith(hr.toLowerCase()));return yr!==dr?yr:void 0}function $6cc32821e9371a1c$var$isPointInPolygon(cr,ar){const{x:dr,y:fr}=cr;let hr=!1;for(let pr=0,mr=ar.length-1;pr<ar.length;mr=pr++){const gr=ar[pr].x,yr=ar[pr].y,xr=ar[mr].x,wr=ar[mr].y;yr>fr!=wr>fr&&dr<(xr-gr)*(fr-yr)/(wr-yr)+gr&&(hr=!hr)}return hr}function $6cc32821e9371a1c$var$isPointerInGraceArea(cr,ar){if(!ar)return!1;const dr={x:cr.clientX,y:cr.clientY};return $6cc32821e9371a1c$var$isPointInPolygon(dr,ar)}function $6cc32821e9371a1c$var$whenMouse(cr){return ar=>ar.pointerType==="mouse"?cr(ar):void 0}const $6cc32821e9371a1c$export$be92b6f5f03c0fe9=$6cc32821e9371a1c$export$d9b273488cd8ce6f,$6cc32821e9371a1c$export$b688253958b8dfe7=$6cc32821e9371a1c$export$9fa5ebd18bee4d43,$6cc32821e9371a1c$export$7c6e2c02157bb7d2=$6cc32821e9371a1c$export$479f0f2f71193efe,$6cc32821e9371a1c$export$a98f0dcb43a68a25=$6cc32821e9371a1c$export$ea2200c9eee416b3,$6cc32821e9371a1c$export$371ab307eab489c0=$6cc32821e9371a1c$export$69bd225e9817f6d0,$d08ef79370b62062$var$DROPDOWN_MENU_NAME="DropdownMenu",[$d08ef79370b62062$var$createDropdownMenuContext,$d08ef79370b62062$export$c0623cd925aeb687]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($d08ef79370b62062$var$DROPDOWN_MENU_NAME,[$6cc32821e9371a1c$export$4027731b685e72eb]),$d08ef79370b62062$var$useMenuScope=$6cc32821e9371a1c$export$4027731b685e72eb(),[$d08ef79370b62062$var$DropdownMenuProvider,$d08ef79370b62062$var$useDropdownMenuContext]=$d08ef79370b62062$var$createDropdownMenuContext($d08ef79370b62062$var$DROPDOWN_MENU_NAME),$d08ef79370b62062$export$e44a253a59704894=cr=>{const{__scopeDropdownMenu:ar,children:dr,dir:fr,open:hr,defaultOpen:pr,onOpenChange:mr,modal:gr=!0}=cr,yr=$d08ef79370b62062$var$useMenuScope(ar),xr=reactExports.useRef(null),[wr=!1,br]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:hr,defaultProp:pr,onChange:mr});return reactExports.createElement($d08ef79370b62062$var$DropdownMenuProvider,{scope:ar,triggerId:$1746a345f3d73bb7$export$f680877a34711e37(),triggerRef:xr,contentId:$1746a345f3d73bb7$export$f680877a34711e37(),open:wr,onOpenChange:br,onOpenToggle:reactExports.useCallback(()=>br(Sr=>!Sr),[br]),modal:gr},reactExports.createElement($6cc32821e9371a1c$export$be92b6f5f03c0fe9,_extends$1({},yr,{open:wr,onOpenChange:br,dir:fr,modal:gr}),dr))},$d08ef79370b62062$var$TRIGGER_NAME="DropdownMenuTrigger",$d08ef79370b62062$export$d2469213b3befba9=reactExports.forwardRef((cr,ar)=>{const{__scopeDropdownMenu:dr,disabled:fr=!1,...hr}=cr,pr=$d08ef79370b62062$var$useDropdownMenuContext($d08ef79370b62062$var$TRIGGER_NAME,dr),mr=$d08ef79370b62062$var$useMenuScope(dr);return reactExports.createElement($6cc32821e9371a1c$export$b688253958b8dfe7,_extends$1({asChild:!0},mr),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({type:"button",id:pr.triggerId,"aria-haspopup":"menu","aria-expanded":pr.open,"aria-controls":pr.open?pr.contentId:void 0,"data-state":pr.open?"open":"closed","data-disabled":fr?"":void 0,disabled:fr},hr,{ref:$6ed0406888f73fc4$export$43e446d32b3d21af(ar,pr.triggerRef),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onPointerDown,gr=>{!fr&&gr.button===0&&gr.ctrlKey===!1&&(pr.onOpenToggle(),pr.open||gr.preventDefault())}),onKeyDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onKeyDown,gr=>{fr||(["Enter"," "].includes(gr.key)&&pr.onOpenToggle(),gr.key==="ArrowDown"&&pr.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(gr.key)&&gr.preventDefault())})})))}),$d08ef79370b62062$var$CONTENT_NAME="DropdownMenuContent",$d08ef79370b62062$export$6e76d93a37c01248=reactExports.forwardRef((cr,ar)=>{const{__scopeDropdownMenu:dr,...fr}=cr,hr=$d08ef79370b62062$var$useDropdownMenuContext($d08ef79370b62062$var$CONTENT_NAME,dr),pr=$d08ef79370b62062$var$useMenuScope(dr),mr=reactExports.useRef(!1);return reactExports.createElement($6cc32821e9371a1c$export$7c6e2c02157bb7d2,_extends$1({id:hr.contentId,"aria-labelledby":hr.triggerId},pr,fr,{ref:ar,onCloseAutoFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onCloseAutoFocus,gr=>{var yr;mr.current||(yr=hr.triggerRef.current)===null||yr===void 0||yr.focus(),mr.current=!1,gr.preventDefault()}),onInteractOutside:$e42e1063c40fb3ef$export$b9ecd428b558ff10(cr.onInteractOutside,gr=>{const yr=gr.detail.originalEvent,xr=yr.button===0&&yr.ctrlKey===!0,wr=yr.button===2||xr;(!hr.modal||wr)&&(mr.current=!0)}),style:{...cr.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),$d08ef79370b62062$export$3323ad73d55f587e=reactExports.forwardRef((cr,ar)=>{const{__scopeDropdownMenu:dr,...fr}=cr,hr=$d08ef79370b62062$var$useMenuScope(dr);return reactExports.createElement($6cc32821e9371a1c$export$a98f0dcb43a68a25,_extends$1({},hr,fr,{ref:ar}))}),$d08ef79370b62062$export$e4f69b41b1637536=reactExports.forwardRef((cr,ar)=>{const{__scopeDropdownMenu:dr,...fr}=cr,hr=$d08ef79370b62062$var$useMenuScope(dr);return reactExports.createElement($6cc32821e9371a1c$export$371ab307eab489c0,_extends$1({},hr,fr,{ref:ar}))}),$d08ef79370b62062$export$be92b6f5f03c0fe9=$d08ef79370b62062$export$e44a253a59704894,$d08ef79370b62062$export$41fb9f06171c75f4=$d08ef79370b62062$export$d2469213b3befba9,$d08ef79370b62062$export$7c6e2c02157bb7d2=$d08ef79370b62062$export$6e76d93a37c01248,$d08ef79370b62062$export$a98f0dcb43a68a25=$d08ef79370b62062$export$3323ad73d55f587e,$d08ef79370b62062$export$371ab307eab489c0=$d08ef79370b62062$export$e4f69b41b1637536;function LevelName({levelId:cr}){const{network:{components:{LevelInSeasonPassRotation:ar,OfficialLevel:dr}},utils:{getLevelSpawns:fr}}=useAmalgema(),hr=hexToString(cr,{size:32}),pr=g$7(dr,cr)?.value,mr=H$4(ar,cr),gr=fr(cr).length;return jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-center",children:[mr&&mr.value?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SeasonPassIcon,{}),jsxRuntimeExports.jsx("div",{className:"w-1"})]}):null,pr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ConfirmedCheck,{}),jsxRuntimeExports.jsx("div",{className:"w-1"})]}),jsxRuntimeExports.jsx("span",{className:"font-bold",children:hr})," (",gr," players)"]})}function ChooseLevel({levelId:cr,setLevelId:ar,setRewardPercentages:dr,hasSeasonPass:fr}){const{network:{components:{LevelTemplates:hr,LevelInStandardRotation:pr,LevelInSeasonPassRotation:mr,OfficialLevel:gr}},utils:{getLevelSpawns:yr}}=useAmalgema(),xr=te$5([Ye$3(hr),Je$2(pr,{value:!0})]),wr=te$5([Ye$3(hr),Je$2(mr,{value:!0})]),br=xr.concat(wr);return reactExports.useEffect(()=>{if(cr.length===0)return;const Sr=yr(cr).length,vr=Array(Sr).fill(0n);vr.push(0n),dr(vr)},[yr,cr,dr]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(OverlineSmall,{className:"w-full text-left text-ss-text-x-light",children:["Map Selection",jsxRuntimeExports.jsx(RequiredAsterisk,{})]}),jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default",children:"Select a map for players to compete on."}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs($d08ef79370b62062$export$be92b6f5f03c0fe9,{children:[jsxRuntimeExports.jsx($d08ef79370b62062$export$41fb9f06171c75f4,{className:"w-full",children:jsxRuntimeExports.jsx("div",{className:"w-full p-2 border rounded-md bg-white text-ss-text-default",children:jsxRuntimeExports.jsx(LevelName,{levelId:cr})})}),jsxRuntimeExports.jsx($d08ef79370b62062$export$7c6e2c02157bb7d2,{children:jsxRuntimeExports.jsx($d08ef79370b62062$export$a98f0dcb43a68a25,{value:cr,onValueChange:ar,children:br.map(Sr=>{const vr=!!wr.find(Er=>Er===Sr);return jsxRuntimeExports.jsx($d08ef79370b62062$export$371ab307eab489c0,{disabled:vr&&!fr,value:Sr,className:twMerge("w-96 p-2 border rounded-md text-ss-text-default",Sr===cr?"bg-ss-blue-hover":"bg-white",vr&&!fr?"bg-gray-200 text-gray-400":"hover:bg-ss-blue-hover"),children:jsxRuntimeExports.jsx(LevelName,{levelId:Sr})},Sr)})})})]}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx("div",{className:"absolute right-4 top-[14px]",children:jsxRuntimeExports.jsx(ChevronDown,{})})]}),jsxRuntimeExports.jsx(LevelDisplay,{levelId:cr})]})]})}function Header({closeModal:cr}){return jsxRuntimeExports.jsxs("div",{className:"absolute top-0 left-0 flex flex-row justify-between items-center bg-white w-full pt-8 p-6 pb-4 border-b border-ss-stroke z-50",style:{},children:[jsxRuntimeExports.jsx(OverlineLarge,{children:"Create match"}),jsxRuntimeExports.jsx("div",{className:"w-10"}),jsxRuntimeExports.jsx("button",{onClick:()=>cr(),children:jsxRuntimeExports.jsx(CrossIcon,{})})]})}function createMatchEntity(){const cr=Math.floor(Math.random()*Number(maxInt32));return matchIdToEntity(cr)}function useSkyPoolConfig(){const{network:{components:{SkyPoolConfig:cr}}}=useAmalgema(),ar=te$5([Ye$3(cr)])[0];return H$4(cr,ar)}const useHasSkyKeyExternalWallet=()=>{const{externalWalletClient:cr,components:{SkyKey_Balances:ar}}=useAmalgema(),dr=H$4(ar,cr&&cr.account?addressToEntityID(cr.account.address):"0");return dr?dr&&dr.value>0:!1};function Footer({matchName:cr,levelId:ar,matchType:dr,entranceFee:fr,rewardPercentages:hr,allowedAddresses:pr,close:mr}){const gr=useAmalgema(),{externalWalletClient:yr,network:{walletClient:xr},utils:{getLevelSpawns:wr,hasSystemDelegation:br},externalWorldContract:Sr,executeSystemWithExternalWallet:vr,components:{HeroInRotation:Er}}=gr,Ar=useSkyPoolConfig(),_r=useOrbBalance(),Cr=useHasSkyKeyExternalWallet(),[kr,Rr]=reactExports.useState(!1),Ir=[...A$6([Je$2(Er,{value:!0})])][0],[Nr,Pr]=reactExports.useState(Ir),Tr=wr(ar),Br=Tr.length,Fr=async ts=>{if(kr||!Sr)return;Rr(!0);let fs=!1;try{await ts(),fs=!0}catch(rs){console.error(rs)}Rr(!1),fs&&mr()},jr=async()=>{Fr(async()=>{const ts=createMatchEntity(),fs=[{systemId:MATCH_SYSTEM_ID,functionName:"createMatch",args:[cr,findOldestMatchInWindow(gr)||ts,ts,ar]},{systemId:COPY_MAP_SYSTEM_ID,functionName:"copyMap",args:[ts]}];await vr({systemCall:"batchCall",systemId:"CreateMatch",args:[[P$2(IWorldAbi,fs).map(([rs,as])=>({systemId:rs,callData:as}))]]})})},Ur=async()=>{Fr(async()=>{const ts=createMatchEntity(),fs=[{systemId:MATCH_SYSTEM_ID,functionName:"createMatchSeasonPass",args:[cr,findOldestMatchInWindow(gr)||ts,ts,ar,SEASON_PASS_ONLY_SYSTEM_ID,fr,hr]},{systemId:COPY_MAP_SYSTEM_ID,functionName:"copyMap",args:[ts]}];await vr({systemCall:"batchCall",systemId:"CreateMatch",args:[[P$2(IWorldAbi,fs).map(([rs,as])=>({systemId:rs,callData:as}))]]})})},qr=async()=>{Fr(async()=>{const ts=createMatchEntity(),fs=wr(ar),rs=yr&&yr.account&&br(yr.account.address,xr.account.address,LOBBY_SYSTEM_ID),as=[{systemId:MATCH_SYSTEM_ID,functionName:"createMatch",args:[cr,findOldestMatchInWindow(gr)||ts,ts,ar]},{systemId:PLAYER_REGISTER_SYSTEM_ID,functionName:"register",args:[ts,fs[0],Nr]},{systemId:COPY_MAP_SYSTEM_ID,functionName:"copyMap",args:[ts]}];await vr({systemCall:"batchCall",systemId:"CreateAndJoinMatch",args:[[P$2(IWorldAbi,rs?as:[...as,...getDelegationSystemCalls(xr.account.address)]).map(([xs,Ss])=>({systemId:xs,callData:Ss}))]]});const ps=getMatchUrl(ts);window.location.assign(ps)})},Hr=async()=>{Fr(async()=>{const ts=createMatchEntity();await vr({systemCall:"batchCall",systemId:"CreatePrivateMatch",args:[[P$2(IWorldAbi,[{systemId:MATCH_SYSTEM_ID,functionName:"createMatchSeasonPass",args:[cr,findOldestMatchInWindow(gr)||ts,ts,ar,ALLOW_LIST_SYSTEM_ID,fr,hr]},{systemId:ALLOW_LIST_SYSTEM_ID,functionName:"setMembers",args:[ts,pr]},{systemId:COPY_MAP_SYSTEM_ID,functionName:"copyMap",args:[ts]}]).map(([fs,rs])=>({systemId:fs,callData:rs}))]]})})},Or=async()=>{Fr(async()=>{const ts=createMatchEntity(),fs=[{systemId:MATCH_SYSTEM_ID,functionName:"createMatchSeasonPass",args:[cr,findOldestMatchInWindow(gr)||ts,ts,ar,padHex("0x",{size:32}),fr,hr]},{systemId:COPY_MAP_SYSTEM_ID,functionName:"copyMap",args:[ts]}];await vr({systemCall:"batchCall",systemId:"CreateMatch",args:[[P$2(IWorldAbi,[...fs]).map(([rs,as])=>({systemId:rs,callData:as}))]]})})},Mr=async()=>{Fr(async()=>{const ts=createMatchEntity(),fs=yr&&yr.account&&br(yr.account.address,xr.account.address,LOBBY_SYSTEM_ID),rs=[{systemId:MATCH_SYSTEM_ID,functionName:"createMatchSeasonPass",args:[cr,findOldestMatchInWindow(gr)||ts,ts,ar,padHex("0x",{size:32}),fr,hr]},{systemId:PLAYER_REGISTER_SYSTEM_ID,functionName:"register",args:[ts,Tr[0],Nr]},{systemId:COPY_MAP_SYSTEM_ID,functionName:"copyMap",args:[ts]}];await vr({systemCall:"batchCall",systemId:"CreateAndJoinMatch",args:[[P$2(IWorldAbi,fs?rs:[...rs,...getDelegationSystemCalls(xr.account.address)]).map(([ps,xs])=>({systemId:ps,callData:xs}))]]});const as=getMatchUrl(ts);window.location.assign(as)})},Lr=async()=>{Fr(async()=>{const ts=createMatchEntity(),fs=yr&&yr.account&&br(yr.account.address,xr.account.address,LOBBY_SYSTEM_ID),rs=[{systemId:MATCH_SYSTEM_ID,functionName:"createMatchSeasonPass",args:[cr,findOldestMatchInWindow(gr)||ts,ts,ar,ALLOW_LIST_SYSTEM_ID,fr,hr]},{systemId:ALLOW_LIST_SYSTEM_ID,functionName:"setMembers",args:[ts,pr]},{systemId:PLAYER_REGISTER_SYSTEM_ID,functionName:"register",args:[ts,Tr[0],Nr]},{systemId:COPY_MAP_SYSTEM_ID,functionName:"copyMap",args:[ts]}];await vr({systemCall:"batchCall",systemId:"CreateAndJoinPrivateMatch",args:[[P$2(IWorldAbi,fs?rs:[...rs,...getDelegationSystemCalls(xr.account.address)]).map(([ps,xs])=>({systemId:ps,callData:xs}))]]});const as=getMatchUrl(ts);window.location.assign(as)})},Vr=async()=>{Fr(async()=>{const ts=createMatchEntity(),fs=yr&&yr.account&&br(yr.account.address,xr.account.address,LOBBY_SYSTEM_ID),rs=[{systemId:MATCH_SYSTEM_ID,functionName:"createMatchSeasonPass",args:[cr,findOldestMatchInWindow(gr)||ts,ts,ar,SEASON_PASS_ONLY_SYSTEM_ID,fr,hr]},{systemId:PLAYER_REGISTER_SYSTEM_ID,functionName:"register",args:[ts,Tr[0],Nr]},{systemId:COPY_MAP_SYSTEM_ID,functionName:"copyMap",args:[ts]}];await vr({systemCall:"batchCall",systemId:"CreateAndJoinMatch",args:[[P$2(IWorldAbi,fs?rs:[...rs,...getDelegationSystemCalls(xr.account.address)]).map(([ps,xs])=>({systemId:ps,callData:xs}))]]});const as=getMatchUrl(ts);window.location.assign(as)})},Jr=cr.length===0,es=ar.length===0,ns=dr==="private"&&pr.length!==Br,Qr=fr>0&&hr.reduce((ts,fs)=>ts+fs,0n)!==100n,Wr=!Cr&&(_r??0n)<(Ar?.cost??0n)||Jr||es||ns||kr||Qr;let ss=jr;fr>0&&(ss=Or),dr==="private"&&(ss=Hr),dr==="season-pass"&&(ss=Ur);let Xr=qr;return fr>0&&(Xr=Mr),dr==="private"&&(Xr=Lr),dr==="season-pass"&&(Xr=Vr),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-0 left-0 py-4 px-6 bg-white border-t border-ss-stroke flex flex-row w-full z-50",children:[jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",className:"w-full shadow-ss-small disabled:shadow-ss-small active:shadow-ss-small-active",disabled:Wr,onClick:ss,children:kr?"creating...":"create match"}),jsxRuntimeExports.jsx("div",{className:"w-8"}),jsxRuntimeExports.jsx(HeroModal,{hero:Nr,setHero:Pr,trigger:jsxRuntimeExports.jsx(Button$1,{disabled:Wr,buttonType:"secondary",className:"w-full",children:"create and join match"}),footer:jsxRuntimeExports.jsxs("div",{className:"flex w-full gap-x-4 justify-between",children:[jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$f39c2d165cd861fe,{asChild:!0,children:jsxRuntimeExports.jsx(Button$1,{className:"w-full",buttonType:"tertiary",children:"cancel"})}),jsxRuntimeExports.jsx(Button$1,{onClick:Xr,disabled:Wr,buttonType:"primary",className:"w-full",children:kr?"creating...":"create and join match"})]})})]})}const Checkbox=({isChecked:cr,setIsChecked:ar,disabled:dr,uncheckedLabel:fr,checkedLabel:hr})=>jsxRuntimeExports.jsx("div",{className:twMerge(dr?"cursor-not-allowed hover:cursor-not-allowed":"cursor-pointer","flex items-center space-x-4"),children:jsxRuntimeExports.jsxs("label",{className:"",children:[jsxRuntimeExports.jsx("span",{className:twMerge("text-ss-text-x-light",!cr&&"text-ss-text-default ",cr&&"line-through"),children:fr}),jsxRuntimeExports.jsxs("div",{className:"relative inline-block w-12 ml-2 align-middle select-none transition duration-200 ease-in",children:[jsxRuntimeExports.jsx("input",{disabled:dr,type:"checkbox",checked:cr,onChange:()=>ar(!cr),className:"hidden"}),jsxRuntimeExports.jsx("span",{className:"block w-10 h-6 bg-gray-400 rounded-full shadow-inner"}),jsxRuntimeExports.jsx("span",{className:`absolute transition-all block w-6 h-6 mt-px ml-px rounded-full shadow top-[-1px] left-[-1px] focus-within:shadow-outline ${cr?"bg-blue-500 translate-x-4":"bg-white"}`})]}),jsxRuntimeExports.jsx("span",{className:twMerge("text-ss-text-x-light",cr&&"text-ss-text-default",!cr&&"line-through"),children:hr})]})});function WorldSvg(){return jsxRuntimeExports.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M10 17.5C11.6625 17.4999 13.2779 16.9477 14.5925 15.93C15.9072 14.9124 16.8466 13.4869 17.2633 11.8775M10 17.5C8.33751 17.4999 6.72212 16.9477 5.40748 15.93C4.09284 14.9124 3.1534 13.4869 2.73667 11.8775M10 17.5C12.0708 17.5 13.75 14.1417 13.75 10C13.75 5.85833 12.0708 2.5 10 2.5M10 17.5C7.92917 17.5 6.25 14.1417 6.25 10C6.25 5.85833 7.92917 2.5 10 2.5M17.2633 11.8775C17.4175 11.2775 17.5 10.6483 17.5 10C17.5021 8.71009 17.1699 7.44166 16.5358 6.31833M17.2633 11.8775C15.041 13.1095 12.541 13.754 10 13.75C7.365 13.75 4.88917 13.0708 2.73667 11.8775M2.73667 11.8775C2.57896 11.2641 2.49944 10.6333 2.5 10C2.5 8.6625 2.85 7.40583 3.46417 6.31833M10 2.5C11.3302 2.49945 12.6366 2.8528 13.7852 3.5238C14.9337 4.19481 15.8831 5.15931 16.5358 6.31833M10 2.5C8.6698 2.49945 7.3634 2.8528 6.21484 3.5238C5.06628 4.19481 4.11692 5.15931 3.46417 6.31833M16.5358 6.31833C14.7214 7.88994 12.4004 8.75345 10 8.75C7.50167 8.75 5.21667 7.83333 3.46417 6.31833",stroke:"#25241D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function SearchSvg(){return jsxRuntimeExports.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M16.4999 16.5007L12.1691 12.1698M12.1691 12.1698C13.3412 10.9977 13.9997 9.4079 13.9997 7.75023C13.9997 6.09257 13.3412 4.5028 12.1691 3.33065C10.9969 2.1585 9.40717 1.5 7.7495 1.5C6.09184 1.5 4.50207 2.1585 3.32992 3.33065C2.15777 4.5028 1.49927 6.09257 1.49927 7.75023C1.49927 9.4079 2.15777 10.9977 3.32992 12.1698C4.50207 13.342 6.09184 14.0005 7.7495 14.0005C9.40717 14.0005 10.9969 13.342 12.1691 12.1698Z",stroke:"#25241D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function MatchType({matchType:cr,setMatchType:ar,levelId:dr,allowedAddresses:fr,setAllowedAddresses:hr,hasSeasonPass:pr}){const{components:{Name:mr},utils:{getLevelSpawns:gr},externalWalletClient:yr}=useAmalgema(),xr=lodashExports.toLower(yr?.account?.address)??"";reactExports.useEffect(()=>{cr==="public"?hr([]):cr==="private"&&hr([xr])},[cr,hr,xr]);const[wr,br]=reactExports.useState(""),[Sr,vr]=reactExports.useState([]),Er=te$5([Ye$3(mr)]),Ar=Er.map(Pr=>X$5(Pr)),_r=Er.map(Pr=>de$2(mr,Pr).value),Cr=_r.reduce((Pr,Tr,Br)=>(Pr[Tr]=Ar[Br],Pr),{}),kr=lodashExports.reject([..._r,...Ar],Pr=>fr.includes(Pr)||fr.includes(Cr[Pr])),Rr=gr(dr).length,Ir=Pr=>{fr.includes(Pr)||hr([...fr,Pr])},Nr=()=>{const Pr=Cr[wr]??wr;isAddress(Pr)&&(Ir(Pr),br(""),vr([]))};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(OverlineSmall,{className:"text-ss-text-x-light",children:"Match type"}),jsxRuntimeExports.jsx(Body,{className:"text-ss-default",children:"Select the type of match you would like to create."}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsx("div",{onClick:()=>ar("public"),className:twMerge("flex flex-col items-center justify-around w-full h-[128px] rounded-md","border border-[#DDDAD0] bg-white hover:border-[#1A6CBC] hover:bg-blue-300/30",cr==="public"&&"border-[#1A6CBC] bg-blue-300/30"),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col text-center items-center p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(WorldSvg,{})," ",jsxRuntimeExports.jsx("div",{className:"w-1"})," Public Match"]}),jsxRuntimeExports.jsx("div",{className:"h-2"}),jsxRuntimeExports.jsx(Body,{style:{fontSize:"12px"},children:"Allow any wallet address to register for your match."})]})}),jsxRuntimeExports.jsx("div",{className:"w-8"}),jsxRuntimeExports.jsx("div",{onClick:()=>{pr&&ar("private")},className:twMerge("flex flex-col items-center justify-around w-full h-[128px] rounded-md","border border-[#DDDAD0] bg-white hover:border-[#1A6CBC] hover:bg-blue-300/30",!pr&&"border-[#DDDAD0] bg-white cursor-not-allowed",(cr==="private"||cr==="season-pass")&&"border-[#1A6CBC] bg-blue-300/30"),children:jsxRuntimeExports.jsxs("div",{"data-tooltip-id":"match-type-tooltip","data-tooltip-content":"You must own the Season Pass to access this feature.",className:"flex flex-col text-center items-center p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(SeasonPassIcon,{})," ",jsxRuntimeExports.jsx("div",{className:"w-1"})," Private Match"]}),jsxRuntimeExports.jsx("div",{className:"h-2"}),jsxRuntimeExports.jsx(Body,{style:{fontSize:"12px"},children:"Allow only specific wallet addresses to register for your match."})]})})]}),cr!=="public"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"h-6"}),jsxRuntimeExports.jsx(Checkbox,{isChecked:cr==="season-pass",setIsChecked:Pr=>{ar(Pr?"season-pass":"private")},uncheckedLabel:"Custom access list",checkedLabel:"Season pass holders only"})]}),cr==="private"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"h-6"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(OverlineSmall,{className:"text-ss-text-x-light",children:"Allowed addresses"}),jsxRuntimeExports.jsxs(Body,{className:"text-ss-default",children:["Add at least ",Rr," wallet addresses to continue."]}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsxs("div",{className:"flex w-full space-x-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative w-full",children:[jsxRuntimeExports.jsx("label",{htmlFor:"search",className:"absolute top-[12px] left-[12px]",children:jsxRuntimeExports.jsx(SearchSvg,{})}),jsxRuntimeExports.jsx("form",{className:"h-full",onSubmit:Pr=>{Pr.preventDefault(),Nr()},children:jsxRuntimeExports.jsx("input",{id:"search",type:"text",placeholder:"Enter a wallet address",value:wr,onChange:Pr=>{const Tr=Pr.target.value;if(br(Tr),Tr){const Br=kr.filter(Fr=>Fr.toLowerCase().includes(Tr.toLowerCase())).slice(0,5);vr(Br)}else vr([])},className:"p-2 pl-10 border border-gray-300 rounded w-full"})}),Sr.length>0&&jsxRuntimeExports.jsx("div",{className:"absolute top-full left-0 mt-2 w-full rounded-md shadow-lg bg-white z-10",children:Sr.map((Pr,Tr)=>jsxRuntimeExports.jsx("div",{onClick:()=>{Ir(Cr[Pr]??Pr),br(""),vr([])},className:"text-gray-900 p-2 hover:bg-gray-200 cursor-pointer",children:Pr},Tr))})]}),jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",className:"h-full",onClick:()=>Nr(),children:"Add"})]}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col space-y-2",children:lodashExports.times(Rr,Pr=>jsxRuntimeExports.jsxs("div",{className:"relative flex",children:[jsxRuntimeExports.jsx("input",{className:twMerge("w-full bg-ss-bg-2 px-4 py-2 border border-[#DDDAD0]"),type:"text",value:fr[Pr]??"",readOnly:!0,disabled:!0}),fr[Pr]&&jsxRuntimeExports.jsx("button",{className:"absolute right-6 top-2 cursor-pointer",onClick:()=>{hr(fr.filter((Tr,Br)=>Br!==Pr))},children:jsxRuntimeExports.jsx(CrossIcon,{})})]}))})]})]}),jsxRuntimeExports.jsx(B$1,{style:{display:pr?"none":"block"},opacity:1,id:"match-type-tooltip",variant:"light"})]})}const INITIAL_FEE=50000000000000000000n;function EntranceFee({entranceFee:cr,setEntranceFee:ar,levelId:dr,hasSeasonPass:fr}){const{utils:{getLevelSpawns:hr}}=useAmalgema(),[pr,mr]=reactExports.useState(!1),gr=hr(dr).length,yr=BigInt(gr)*cr;return reactExports.useEffect(()=>{pr&&ar(INITIAL_FEE)},[pr,ar]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(OverlineSmall,{className:"text-ss-text-x-light",children:[jsxRuntimeExports.jsx(SeasonPassIcon,{})," Entrance Fee"]}),jsxRuntimeExports.jsx(Body,{className:"text-ss-default",children:"Set an entrance fee for each player to pay when joining."}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsxs("div",{className:"w-full flex items-center h-[30px]",children:[jsxRuntimeExports.jsx("div",{className:"w-1/2","data-tooltip-id":"entrance-fee-tooltip","data-tooltip-content":"You must own the Season Pass to access this feature.",children:jsxRuntimeExports.jsx(Checkbox,{disabled:!fr,isChecked:pr,setIsChecked:xr=>{mr(xr),xr||ar(BigInt(0))},uncheckedLabel:"Free Entry",checkedLabel:"Entrance Fee"})}),pr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4"}),jsxRuntimeExports.jsxs("div",{className:"flex w-1/2",children:[jsxRuntimeExports.jsx(OrbInput,{className:"bg-white",amount:cr,setAmount:ar}),jsxRuntimeExports.jsxs("div",{className:twMerge("relative w-full"),children:[jsxRuntimeExports.jsx("input",{className:twMerge("w-full bg-ss-bg-2 px-4 py-2 border border-[#DDDAD0]"),type:"text",value:`x${gr} = ${formatEther(yr)}`,readOnly:!0}),jsxRuntimeExports.jsx("span",{className:"absolute right-3 top-[8px]",children:""})]})]})]})]}),jsxRuntimeExports.jsx(B$1,{variant:"light",place:"bottom",opacity:1,style:{display:fr?"none":"block"},id:"entrance-fee-tooltip"})]})}function Row$1({children:cr}){return jsxRuntimeExports.jsx("div",{className:"w-full flex flex-row items-center space-x-4 space-y-3",children:cr})}function MatchRewards({entranceFee:cr,rewardPercentages:ar,setRewardPercentages:dr,levelId:fr}){const{components:{MatchRewardPercentages:hr},utils:{getLevelSpawns:pr}}=useAmalgema(),mr=pr(fr).length,gr=BigInt(mr)*cr,yr=ar[ar.length-1]??0n,xr=useCurrentMatchReward(),wr=H$4(hr,padHex(mr.toString(16),{size:32}))?.percentages??[],br=ar.reduce((vr,Er)=>vr+Er,0n);let Sr="";return br>100?Sr="Total percentage cannot exceed 100%":br<100&&(Sr="Total percentage must be 100%"),cr===0n?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(OverlineSmall,{children:"Match rewards"}),jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default",children:"The rewards for the top players in your match. This varies depending on the how many matches were created in the past 7 days."}),jsxRuntimeExports.jsx("div",{className:"h-6"}),wr.slice(0,wr.length-1).map((vr,Er)=>{const _r=(wr[Er]??0n)*xr/100n,Cr=vr*gr/100n+_r;return jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx("div",{className:"w-1/2 flex items-center justify-between",children:jsxRuntimeExports.jsxs(Body,{className:"text-ss-text-default underline",children:[ordinalSuffix(Er+1)," place"]})}),jsxRuntimeExports.jsx(OrbInput,{containerClassName:"w-1/3",amount:Cr})]},Er)})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(OverlineSmall,{children:"Match rewards"}),jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default",children:"There are default rewards for match participants, but you may split the entrance fee amongst winners of the match and yourself."}),jsxRuntimeExports.jsx("div",{className:"h-6"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx("div",{className:"w-1/2",children:jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default underline",children:"Your earnings"})}),jsxRuntimeExports.jsxs("div",{className:"w-1/2 flex",children:[jsxRuntimeExports.jsx(PercentageInput,{className:"bg-white",amount:yr,setAmount:vr=>{const Er=[...ar];Er[ar.length-1]=vr,dr(Er)}}),jsxRuntimeExports.jsx(OrbInput,{amount:yr*gr/100n})]})]}),ar.slice(0,ar.length-1).map((vr,Er)=>{const _r=(wr[Er]??0n)*xr/100n,Cr=vr*gr/100n;return jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsxs("div",{className:"w-1/2 flex items-center justify-between",children:[jsxRuntimeExports.jsxs(Body,{className:"text-ss-text-default underline",children:[ordinalSuffix(Er+1)," place"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center w-1/2 space-x-4",children:[jsxRuntimeExports.jsx(OrbInput,{amount:_r}),jsxRuntimeExports.jsx("div",{children:"+"})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-1/2 flex",children:[jsxRuntimeExports.jsx(PercentageInput,{className:"bg-white",amount:vr,setAmount:kr=>{const Rr=[...ar];Rr[Er]=kr,dr(Rr)}}),jsxRuntimeExports.jsx(OrbInput,{amount:Cr})]})]},Er)}),jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx("div",{className:"w-1/2",children:jsxRuntimeExports.jsx(Body,{className:"text-ss-text-default underline",children:"Total"})}),jsxRuntimeExports.jsxs("div",{className:"w-1/2",children:[jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx(PercentageInput,{className:twMerge(Sr&&"border border-red-500 text-red-500"),amount:br}),jsxRuntimeExports.jsx(OrbInput,{className:twMerge(Sr&&"border border-red-500 text-red-500"),amount:br*gr/100n})]}),Sr?jsxRuntimeExports.jsx(Body,{className:"text-red-500",children:Sr}):jsxRuntimeExports.jsx("div",{className:"h-6"})]})]})]})]})}function MatchName({matchName:cr,setMatchName:ar}){const[fr,hr]=reactExports.useState(null);return reactExports.useEffect(()=>{cr.length===0?hr("Match name is required."):hr(null)},[cr,ar]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(OverlineSmall,{className:"w-full text-left text-ss-text-x-light",children:["match name",jsxRuntimeExports.jsx(RequiredAsterisk,{})]}),jsxRuntimeExports.jsx("input",{className:twMerge("w-full h-12 px-4 rounded-md border",fr&&"border-red-500"),value:cr,maxLength:24,onChange:pr=>ar(pr.target.value),placeholder:"Enter match name"}),jsxRuntimeExports.jsx("div",{className:"h-1"}),jsxRuntimeExports.jsxs("p",{className:"w-full text-left text-ss-text-x-light text-[12px]",children:["24 characters max - ",24-cr.length," characters remaining. ",fr&&jsxRuntimeExports.jsx("span",{className:"text-red-500 text-[12px] normal-case",children:fr})]})]})}function ArrowSvg(){return jsxRuntimeExports.jsx("svg",{width:"12",height:"14",viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M11 6L6 1M6 1L1 6M6 1V13",stroke:"#25241D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function SummonIslandForm({closeModal:cr}){const{network:{components:{LevelTemplates:ar,LevelInStandardRotation:dr}}}=useAmalgema(),[fr,hr]=reactExports.useState(0),pr=reactExports.useRef(null);reactExports.useEffect(()=>{if(!pr.current)return;const Ir=pr.current,Nr=()=>{const Pr=Ir.scrollTop??0,Tr=Ir.scrollHeight??0,Br=Ir.clientHeight??0,Fr=Pr/(Tr-Br)*100;hr(Fr)};return Ir.addEventListener("scroll",Nr),()=>Ir.removeEventListener("scroll",Nr)},[]);const mr=useSeasonPassExternalWallet(),[gr,yr]=reactExports.useState(""),xr=te$5([Ye$3(ar),Je$2(dr,{value:!0})]),[wr,br]=reactExports.useState(xr[0]??""),[Sr,vr]=reactExports.useState("public"),[Er,Ar]=reactExports.useState([]),[_r,Cr]=reactExports.useState(0n),[kr,Rr]=reactExports.useState([]);return jsxRuntimeExports.jsx("div",{style:{background:"rgba(24, 23, 16, 0.65)",zIndex:100},className:"fixed top-0 left-0 w-screen h-screen flex flex-col justify-around",children:jsxRuntimeExports.jsxs(Card,{className:"relative w-[640px] max-w-[640px] h-3/4 mx-auto p-0",children:[jsxRuntimeExports.jsx(Header,{closeModal:cr}),jsxRuntimeExports.jsxs("div",{ref:pr,className:"h-full overflow-y-scroll px-6",children:[jsxRuntimeExports.jsx("div",{className:"h-20"}),jsxRuntimeExports.jsx(MatchName,{matchName:gr,setMatchName:yr}),jsxRuntimeExports.jsx("div",{className:"h-12"}),jsxRuntimeExports.jsx(ChooseLevel,{hasSeasonPass:mr,levelId:wr,setLevelId:br,setRewardPercentages:Rr}),jsxRuntimeExports.jsx("div",{className:"h-12"}),jsxRuntimeExports.jsx(MatchCost,{}),jsxRuntimeExports.jsx("div",{className:"h-12"}),jsxRuntimeExports.jsx(EntranceFee,{hasSeasonPass:mr,entranceFee:_r,setEntranceFee:Cr,levelId:wr}),jsxRuntimeExports.jsx("div",{className:"h-12"}),jsxRuntimeExports.jsx(MatchRewards,{entranceFee:_r,rewardPercentages:kr,setRewardPercentages:Rr,levelId:wr}),jsxRuntimeExports.jsx("div",{className:"h-6"}),jsxRuntimeExports.jsx(MatchType,{matchType:Sr,setMatchType:vr,allowedAddresses:Er,setAllowedAddresses:Ar,levelId:wr,hasSeasonPass:mr}),jsxRuntimeExports.jsx("div",{style:{left:"calc(50% - 40px)",bottom:"100px",boxShadow:"2px 2px 8px 0px rgba(24, 23, 16, 0.16), 2px 2px 16px 0px rgba(24, 23, 16, 0.12)",display:fr<100?"flex":"none"},className:"absolute bg-white rounded-lg p-2 w-[80px] justify-around",children:jsxRuntimeExports.jsx("div",{style:{transform:"rotate(180deg)"},children:jsxRuntimeExports.jsx(ArrowSvg,{})})}),jsxRuntimeExports.jsx("div",{className:"h-20"}),jsxRuntimeExports.jsx("div",{className:"h-10"})]}),jsxRuntimeExports.jsx(Footer,{close:cr,matchName:gr,levelId:wr,matchType:Sr,allowedAddresses:Er,entranceFee:_r,rewardPercentages:kr})]})})}function useSummonIslandModal(){const[cr,ar]=reactExports.useState(!1);return{modalOpen:cr,setModalOpen:ar,modal:cr?jsxRuntimeExports.jsx(SummonIslandForm,{closeModal:()=>ar(!1)}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}}function Plus(cr){return jsxRuntimeExports.jsx("svg",{...cr,width:"16",height:"16",viewBox:"0 0 16 16",className:"fill-current text-ss-text-default",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 0C8.55228 0 9 0.447715 9 1V7H15C15.5523 7 16 7.44772 16 8C16 8.55228 15.5523 9 15 9H9V15C9 15.5523 8.55228 16 8 16C7.44772 16 7 15.5523 7 15V9H1C0.447715 9 0 8.55228 0 8C0 7.44772 0.447715 7 1 7H7V1C7 0.447715 7.44772 0 8 0Z"})})}function usePagination({totalItems:cr,pageSize:ar}){const[dr,fr]=reactExports.useState(1),hr=({children:gr,onClick:yr,disabled:xr})=>jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",className:twMerge("mx-2",xr?"text-ss-text-light bg-white hover:bg-white disabled:hover:bg-white":"text-ss-text"),onClick:yr,disabled:xr,children:gr}),pr=Math.max(Math.ceil(cr/ar),1);if(pr===1)return{page:1,form:null};const mr=jsxRuntimeExports.jsxs("div",{className:"flex items-center text-ss-text-light",children:[jsxRuntimeExports.jsx(hr,{disabled:dr===1,onClick:()=>fr(1),children:"1"}),dr>2&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[dr>3&&jsxRuntimeExports.jsx("span",{className:"mr-2 font-mono px-1",children:"..."}),jsxRuntimeExports.jsx(hr,{onClick:()=>fr(dr-1),children:dr-1})]}),dr!==1&&dr!==pr&&jsxRuntimeExports.jsx(hr,{disabled:!0,children:dr}),dr<pr-1&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(hr,{onClick:()=>fr(dr+1),children:dr+1}),dr<pr-2&&jsxRuntimeExports.jsx("span",{className:"mr-2 font-mono px-1",children:"..."})]}),pr>1&&jsxRuntimeExports.jsx(hr,{disabled:dr===pr,onClick:()=>fr(pr),children:pr})]});return{page:dr,form:mr}}function MatchListingContainer({allMatches:cr,matchRowComponent:ar,header:dr}){const{page:hr,form:pr}=usePagination({totalItems:cr.length,pageSize:10}),mr=cr.slice((hr-1)*10,hr*10);return jsxRuntimeExports.jsxs("div",{className:"grow flex flex-col relative",children:[dr&&jsxRuntimeExports.jsx("div",{className:"flex flex-row w-full bg-ss-bg-1 h-[48px] px-4 border-b border-ss-stroke",children:dr}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row gap-x-8 w-full items-center bg-white h-[48px] px-4 text-ss-text-light text-sm uppercase border-b border-ss-stroke",children:[jsxRuntimeExports.jsx("div",{className:"grow min-w-[120px] text-left",children:"Match Name"}),jsxRuntimeExports.jsx("div",{className:"w-[100px] text-center shrink-0",children:"Players"}),jsxRuntimeExports.jsx("div",{className:"w-[120px] text-center shrink-0",children:"Map"}),jsxRuntimeExports.jsx("div",{className:"w-[100px] text-center shrink-0",children:"Entrance Fee"}),jsxRuntimeExports.jsx("div",{className:"w-[100px] text-center shrink-0",children:"Reward Pool"}),jsxRuntimeExports.jsx("div",{className:"w-[100px] text-center shrink-0"})]}),jsxRuntimeExports.jsxs("div",{style:{height:`calc(100% - ${dr?96:48}px)`,top:`${dr?96:48}px`},className:"absolute left-0 overflow-y-scroll w-full",children:[mr.map(gr=>React.createElement(ar,{matchEntity:gr,key:gr})),jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx("div",{className:"w-fit mx-auto",children:pr}),jsxRuntimeExports.jsx("div",{className:"h-4"})]})]})]})}function ViewOnlyMatchListingContainer({allMatches:cr,matchRowComponent:ar,header:dr}){const{page:hr,form:pr}=usePagination({totalItems:cr.length,pageSize:10}),mr=cr.slice((hr-1)*10,hr*10);return jsxRuntimeExports.jsxs("div",{className:"grow flex flex-col relative",children:[dr&&jsxRuntimeExports.jsx("div",{className:"flex flex-row w-full bg-ss-bg-1 h-[48px] px-4 border-b border-ss-stroke",children:dr}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row gap-x-8 w-full items-center bg-white h-[48px] px-4 text-ss-text-light text-sm uppercase border-b border-ss-stroke",children:[jsxRuntimeExports.jsx("div",{className:"grow min-w-[120px] text-left",children:"Match Name"}),jsxRuntimeExports.jsx("div",{className:"w-[120px] text-center",children:"Date Played"}),jsxRuntimeExports.jsx("div",{className:"w-[120px] text-center shrink-0",children:"Map"}),jsxRuntimeExports.jsx("div",{className:"w-[240px] text-left shrink-0",children:"Players"})]}),jsxRuntimeExports.jsxs("div",{style:{height:`calc(100% - ${dr?96:48}px)`,top:`${dr?96:48}px`},className:"absolute left-0 overflow-y-scroll w-full",children:[mr.map(gr=>React.createElement(ar,{matchEntity:gr,key:gr})),jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx("div",{className:"w-fit mx-auto",children:pr}),jsxRuntimeExports.jsx("div",{className:"h-4"})]})]})]})}function MatchPlayers({matchEntity:cr}){const{components:{MatchConfig:ar,SpawnReservedBy:dr,OwnedBy:fr},utils:{getLevelSpawns:hr}}=useAmalgema(),pr=H$4(ar,cr),mr=pr?hr(pr.levelId):[];return jsxRuntimeExports.jsxs("div",{"data-tooltip-id":`match-players-tooltip-${cr}`,className:"flex flex-row w-full group",children:[mr.map((gr,yr)=>{const xr=le$3(dr,w$9(dr.metadata.keySchema,{matchEntity:cr,index:gr}));return jsxRuntimeExports.jsx("div",{className:twMerge("h-[24px] w-full border border-ss-white",xr?"bg-ss-blue":"bg-ss-bg-0",yr===0?"rounded-l-md":yr===mr.length-1?"rounded-r-md":""),children:xr&&jsxRuntimeExports.jsxs(Body,{className:"w-full h-full flex flex-col items-center justify-around text-ss-text-default",children:["P",yr+1]})},`spawn-${yr}`)}),jsxRuntimeExports.jsx(B$1,{id:`match-players-tooltip-${cr}`,variant:"light",place:"top",opacity:1,render:()=>jsxRuntimeExports.jsx("div",{className:"w-[120px]",children:mr.map((gr,yr)=>{const xr=g$7(dr,w$9(dr.metadata.keySchema,{matchEntity:cr,index:gr}));if(!xr)return jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("div",{children:["P",yr+1]}),jsxRuntimeExports.jsx("div",{children:"empty"})]},`spawn-${yr}`);const wr=encodeMatchEntity(cr,xr.value),br=g$7(fr,wr);return jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("div",{children:["P",yr+1]}),jsxRuntimeExports.jsx("div",{children:br?jsxRuntimeExports.jsx(DisplayNameWithLink,{entity:br.value}):"empty"})]},`spawn-${yr}`)})})})]})}function OrbDisplay({amount:cr}){return jsxRuntimeExports.jsx("div",{className:"w-[100px] px-3 py-1 flex flex-row items-center border border-ss-stroke bg-ss-bg-0 rounded-3xl text-center text-ss-text-default",children:jsxRuntimeExports.jsxs("span",{className:"w-fit mx-auto",children:[" ",cr]})})}function MatchRow({matchEntity:cr}){const{components:{MatchConfig:ar,MatchSweepstake:dr,MatchName:fr,MatchAccessControl:hr,MatchIndex:pr,OfficialLevel:mr}}=useAmalgema(),gr=g$7(hr,cr),yr=g$7(ar,cr),xr=g$7(pr,cr)?.matchIndex??0,wr=hexToString(yr?.levelId??"0x",{size:32}),br=g$7(mr,yr?.levelId)?.value,Sr=g$7(fr,cr)?.value??wr,vr=gr&&gr.systemId===ALLOW_LIST_SYSTEM_ID,Er=gr&&gr.systemId===SEASON_PASS_ONLY_SYSTEM_ID,{totalRewards:Ar}=useMatchRewards(cr),_r=Ar.reduce((kr,Rr)=>kr+Rr.value,0n),Cr=g$7(dr,cr);return jsxRuntimeExports.jsxs("div",{className:"flex gap-x-8 h-[72px] w-full border-b border-ss-stroke bg-white px-4 items-center text-ss-text-x-light transition-all hover:bg-ss-bg-0",children:[jsxRuntimeExports.jsx("div",{className:"grow min-w-[120px] text-left flex gap-x-2 items-center text-ss-text-default overflow-clip whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-x-1",children:[Er&&jsxRuntimeExports.jsx(SeasonPassIcon,{}),vr&&jsxRuntimeExports.jsx("span",{children:""}),Sr," ",jsxRuntimeExports.jsxs("span",{className:"text-ss-text-x-light",children:["#",xr]})]}),yr&&jsxRuntimeExports.jsx(CreatedBy,{createdBy:yr.createdBy})]})}),jsxRuntimeExports.jsx("div",{className:"w-[100px] text-center shrink-0",children:jsxRuntimeExports.jsx(MatchPlayers,{matchEntity:cr})}),jsxRuntimeExports.jsxs("div",{className:"w-[120px] flex items-center gap-x-1 text-center shrink-0",children:[br&&jsxRuntimeExports.jsx(ConfirmedCheck,{}),wr]}),jsxRuntimeExports.jsx("div",{className:"w-[100px] text-center shrink-0",children:Cr&&Cr.entranceFee?jsxRuntimeExports.jsx(OrbDisplay,{amount:parseFloat(formatEther(Cr?.entranceFee))}):jsxRuntimeExports.jsx("span",{children:"-"})}),jsxRuntimeExports.jsx("div",{className:"w-[100px] text-center shrink-0",children:jsxRuntimeExports.jsx(OrbDisplay,{amount:parseFloat(formatEther(_r))})}),jsxRuntimeExports.jsx("div",{className:"w-[100px] text-center shrink-0",children:jsxRuntimeExports.jsx(JoinModal,{matchEntity:cr,children:jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",className:"w-full py-1 px-2",children:"open"})})})]},`${cr}-table-row`)}function OpenMatches({matches:cr}){const{network:{components:{MatchSweepstake:ar,MatchAccessControl:dr,MatchAllowed:fr}},externalWalletClient:hr}=useAmalgema(),[pr,mr]=reactExports.useState(!0),gr=useSeasonPassExternalWallet(),yr=useOrbBalance(),xr=reactExports.useMemo(()=>pr?cr.filter(wr=>{const br=g$7(dr,wr),Sr=br&&br.systemId===ALLOW_LIST_SYSTEM_ID,vr=br&&br.systemId===SEASON_PASS_ONLY_SYSTEM_ID;if(Sr&&![...A$6([Ye$3(fr)])].map(_r=>ft$3(fr.metadata.keySchema,_r)).some(({matchEntity:_r,account:Cr})=>hr&&hr.account&&_r===wr&&Cr===hr.account.address)||vr&&!gr)return!1;const Er=g$7(ar,wr)?.entranceFee;return!(Er&&Er>yr)}):cr,[dr,fr,ar,hr,gr,cr,pr,yr]);return jsxRuntimeExports.jsx(MatchListingContainer,{allMatches:xr,matchRowComponent:MatchRow,header:jsxRuntimeExports.jsx(Checkbox,{isChecked:pr,setIsChecked:mr,uncheckedLabel:"Show All Matches",checkedLabel:"Only Joinable"})})}function SpectateMatches({matches:cr}){return jsxRuntimeExports.jsx(MatchListingContainer,{allMatches:cr,matchRowComponent:MatchRow})}const PlayerName=({entity:cr})=>{const{components:{OwnedBy:ar}}=useAmalgema(),dr=g$7(ar,cr);return jsxRuntimeExports.jsx(DisplayNameWithLink,{entity:dr?.value??""})};function MatchRanking({matchEntity:cr}){const{components:{MatchRanking:ar}}=useAmalgema(),dr=g$7(ar,cr)?.value??[];return jsxRuntimeExports.jsx("div",{className:"w-full flex flex-wrap",children:dr.map((fr,hr)=>jsxRuntimeExports.jsxs("span",{className:"w-1/2 flex items-baseline gap-x-1 text-ss-text-default overflow-auto",children:[hr+1," ",jsxRuntimeExports.jsx(PlayerName,{entity:encodeMatchEntity(cr,fr)})]},`rank-${hr}`))})}function ViewOnlyMatchRow({matchEntity:cr}){const{components:{MatchConfig:ar,MatchName:dr,MatchAccessControl:fr,MatchIndex:hr,OfficialLevel:pr}}=useAmalgema(),mr=g$7(fr,cr),gr=g$7(ar,cr),yr=g$7(hr,cr)?.matchIndex??0,xr=DateTime$1.fromSeconds(Number(gr?.startTime??0n)),wr=gr?.levelId??"0x",br=hexToString(wr,{size:32}),Sr=g$7(pr,wr)?.value,vr=g$7(dr,cr)?.value??br,Er=mr&&mr.systemId===ALLOW_LIST_SYSTEM_ID,Ar=mr&&mr.systemId===SEASON_PASS_ONLY_SYSTEM_ID;return jsxRuntimeExports.jsxs("div",{className:"flex gap-x-8 h-[72px] w-full border-b border-ss-stroke bg-white px-4 items-center text-ss-text-x-light transition-all hover:bg-ss-bg-0",children:[jsxRuntimeExports.jsx("div",{className:"grow min-w-[120px] text-left flex gap-x-2 items-center text-ss-text-default overflow-clip whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-x-1",children:[Ar&&jsxRuntimeExports.jsx(SeasonPassIcon,{}),Er&&jsxRuntimeExports.jsx("span",{children:""}),vr," ",jsxRuntimeExports.jsxs("span",{className:"text-ss-text-x-light",children:["#",yr]})]}),gr&&jsxRuntimeExports.jsx(CreatedBy,{createdBy:gr.createdBy})]})}),jsxRuntimeExports.jsxs("div",{className:"w-[120px] flex flex-col text-center shrink-0",children:[jsxRuntimeExports.jsx("span",{className:"text-ss-text-light",children:xr.toLocaleString(DateTime$1.DATE_SHORT)}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:xr.toFormat("h:mm a")})]}),jsxRuntimeExports.jsxs("div",{className:"w-[120px] flex items-center gap-x-1 text-center shrink-0",children:[Sr&&jsxRuntimeExports.jsx(ConfirmedCheck,{}),br]}),jsxRuntimeExports.jsx("div",{className:"w-[240px] text-center shrink-0",children:jsxRuntimeExports.jsx(MatchRanking,{matchEntity:cr})})]},`${cr}-table-row`)}function HistoricalMatches({matches:cr}){return jsxRuntimeExports.jsx(ViewOnlyMatchListingContainer,{allMatches:cr,matchRowComponent:ViewOnlyMatchRow})}const BUGGED_MATCHES=["0x72ae50e300000000000000000000000000000000000000000000000000000000","0x7b1b8d9000000000000000000000000000000000000000000000000000000000"];function MatchTable$1(){const{components:{MatchConfig:cr,MatchFinished:ar,MatchJoinable:dr,MatchReady:fr,MatchPlayers:hr}}=useAmalgema(),[pr,mr]=reactExports.useState("play"),gr=te$5([Ye$3(cr),Je$2(dr,{value:!0}),Ye$3(fr),Ge$2(ar)]),yr=te$5([Ye$3(cr),Je$2(dr,{value:!0}),Ge$2(fr),Ge$2(ar)]),xr=gr.concat(yr).filter(Ir=>!BUGGED_MATCHES.includes(Ir)),wr=reactExports.useMemo(()=>xr.sort((Ir,Nr)=>{const Pr=g$7(hr,Ir)?.value.length??0,Tr=g$7(hr,Nr)?.value.length??0;if(Pr!==Tr)return Tr-Pr;const Br=g$7(cr,Ir),Fr=g$7(cr,Nr);return Number((Fr?.registrationTime??0n)-(Br?.registrationTime??0n))}),[cr,hr,xr]),br=te$5([Ye$3(cr),Ye$3(ar)]);br.sort((Ir,Nr)=>{const Pr=g$7(cr,Ir)?.startTime??0n,Tr=g$7(cr,Nr)?.startTime??0n;return Number(Tr-Pr)});const Sr=te$5([Je$2(dr,{value:!1}),Ye$3(cr),Ge$2(ar)]),vr=60n*60n,Er=reactExports.useMemo(()=>Sr.filter(Ir=>(g$7(cr,Ir)?.startTime??0n)+vr>BigInt(Math.floor(Date.now()/1e3))).sort((Ir,Nr)=>{const Pr=g$7(cr,Ir),Tr=g$7(cr,Nr);return Number((Tr?.startTime??0n)-(Pr?.startTime??0n))}),[cr,Sr,vr]),{externalWalletClient:Ar}=useAmalgema(),{openConnectModal:_r}=useConnectModal(),{setModalOpen:Cr,modal:kr}=useSummonIslandModal(),Rr=(Ir,Nr,Pr)=>jsxRuntimeExports.jsxs("button",{onClick:()=>mr(Ir),className:twMerge("text-ss-text-light h-full text-lg w-1/3",pr===Ir?"bg-ss-gold text-ss-text-default":"hover:bg-ss-gold hover:text-ss-text-default"),children:[Nr," ",jsxRuntimeExports.jsxs("span",{className:"text-ss-text-default",children:["(",Pr??"0",")"]})]});return jsxRuntimeExports.jsxs("div",{className:"grow flex flex-col p-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex w-full",children:[jsxRuntimeExports.jsxs(Card,{primary:!1,className:"w-1/2 p-0 flex",children:[Rr("play","Play",wr.length),Rr("spectate","Spectate",Er.length),Rr("historical","History",br.length)]}),jsxRuntimeExports.jsx("div",{className:"grow"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",size:"lg",onClick:()=>{if(!Ar){_r&&_r();return}Cr(!0)},children:jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-center justify-center h-fit",children:[jsxRuntimeExports.jsx(Plus,{})," ",jsxRuntimeExports.jsx("div",{className:"w-4"})," ",jsxRuntimeExports.jsx("span",{children:"create match"})]})}),kr]}),jsxRuntimeExports.jsx("div",{className:"h-6 shrink-0"}),jsxRuntimeExports.jsxs(Card,{className:"grow flex flex-col w-full p-0",children:[pr==="play"&&jsxRuntimeExports.jsx(OpenMatches,{matches:wr}),pr==="spectate"&&jsxRuntimeExports.jsx(SpectateMatches,{matches:Er}),pr==="historical"&&jsxRuntimeExports.jsx(HistoricalMatches,{matches:br})]})]})}function AnnouncementModal(){return jsxRuntimeExports.jsxs("div",{className:"fixed top-0x left-1/3 uppercase z-50 w-fit px-4 mt-3 flex items-center",children:["new update! ",jsxRuntimeExports.jsx("div",{className:"w-3"}),jsxRuntimeExports.jsxs(Modal,{footer:jsxRuntimeExports.jsx($5d3850c4d0b4e6c7$export$f39c2d165cd861fe,{asChild:!0,className:"w-fit",children:jsxRuntimeExports.jsx(Button$1,{className:"mx-auto",buttonType:"primary",children:"start playing"})}),title:"announcements",trigger:jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",children:"read patch notes"}),children:[jsxRuntimeExports.jsx(Heading,{children:"New units, combat redesign, and more!"}),jsxRuntimeExports.jsx(OverlineSmall,{children:"Feb 23rd, 2024"}),jsxRuntimeExports.jsx(Heading,{className:"mt-6 mb-4 font-bold text-ss-text-default",children:"COUNTERS"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-ss-text-light",children:[jsxRuntimeExports.jsx("li",{children:"Each unit type (Swordsman, Archer, etc.) now has a set of advantages and disadvantages against other units"}),jsxRuntimeExports.jsxs("li",{children:["These damage multipliers range anywhere from"," ",jsxRuntimeExports.jsx("span",{className:"font-bold text-ss-text-default",children:"0.5x to 2.5x"})," damage!"]}),jsxRuntimeExports.jsxs("li",{children:["For example, ",jsxRuntimeExports.jsx("span",{className:"font-bold text-ss-text-default",children:"Knights"})," now one-shot-kill"," ",jsxRuntimeExports.jsx("span",{className:"font-bold text-ss-text-default",children:"Archers"})," and"," ",jsxRuntimeExports.jsx("span",{className:"font-bold text-ss-text-default",children:"Pillagers"}),", and"," ",jsxRuntimeExports.jsx("span",{className:"font-bold text-ss-text-default",children:"Archers"})," now one-shot-kill"," ",jsxRuntimeExports.jsx("span",{className:"font-bold text-ss-text-default",children:"Swordsmen"}),"!"]})]}),jsxRuntimeExports.jsx(Body,{className:"mt-4",children:"See below for a detailed look at how units counter each other! "}),jsxRuntimeExports.jsx("div",{className:"px-8 py-4",children:jsxRuntimeExports.jsx("img",{src:"/public/assets/rps-diagram.png",alt:"Rock-Paper-Scissors Unit Diagram"})}),jsxRuntimeExports.jsx(Heading,{className:"mt-6 mb-4 font-bold text-ss-text-default",children:"NEW UNITS"}),jsxRuntimeExports.jsxs("div",{className:"text-ss-text-light",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-ss-text-default",children:"The Brute"}),": The second most expensive unit, slow, tanky, and very strong against all other melee units (especially Swordsmen and Knights). Very vulnerable to Archers and Catapults."]}),jsxRuntimeExports.jsx("div",{className:"px-8 py-4",children:jsxRuntimeExports.jsx("img",{src:"/public/assets/brute.png",alt:"Brute sprite"})}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-ss-text-default",children:"The Catapult"}),": The most expensive unit, slow, not so tanky, and can attack only while stationary. Vulnerable to Pillagers and Knights but strongest against Brutes and Structures."]}),jsxRuntimeExports.jsx("div",{className:"px-8 py-4",children:jsxRuntimeExports.jsx("img",{src:"/public/assets/catapult.png",alt:"Catapult sprite"})})]}),jsxRuntimeExports.jsx(Heading,{className:"mt-6 mb-4 font-bold text-ss-text-default",children:"LATENCY IMPROVEMENTS"}),jsxRuntimeExports.jsx("p",{className:"text-ss-text-light",children:"Making the game a better experience for players all across the globe is a high priority for us, so we've upgraded the client in a way that will reduce the competitive edge that players with low ping have over players with high ping."}),jsxRuntimeExports.jsx(Heading,{className:"mt-6 mb-4 font-bold text-ss-text-default",children:"UI IMPROVEMENTS"}),jsxRuntimeExports.jsxs("div",{className:"mt-6 mb-4 text-ss-text-light",children:[jsxRuntimeExports.jsx("p",{className:"text-ss-text-default mb-2 font-medium",children:"Combat preview"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside",children:[jsxRuntimeExports.jsx("li",{children:"See a flashing skull when an attacker or defender will die from an attack."}),jsxRuntimeExports.jsx("li",{children:"See an up or down arrow based on whether an attack is advantageous or disadvantageous."}),jsxRuntimeExports.jsx("li",{children:"See the armor bonus units receive from the terrain they're standing on"}),jsxRuntimeExports.jsx("li",{children:"New health bars that will improve their legibility"})]}),jsxRuntimeExports.jsx("p",{className:"text-ss-text-default mb-2 mt-4 font-medium",children:"Unit/Structure Inspect Panel"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside",children:[jsxRuntimeExports.jsx("li",{children:"See terrain bonuses a unit currently has."}),jsxRuntimeExports.jsx("li",{children:"See whether or not a unit is ready to move + attack!"}),jsxRuntimeExports.jsx("li",{children:"See health remaining on units and structures, and gold remaining on structures"})]})]}),jsxRuntimeExports.jsx("div",{className:"px-8 py-4",children:jsxRuntimeExports.jsx("img",{src:"/public/assets/combat-ui.gif",alt:"a GIF of a combat preview"})}),jsxRuntimeExports.jsx(Heading,{className:"mt-6 mb-4 font-bold text-ss-text-default",children:"OTHER CHANGES"}),jsxRuntimeExports.jsx("div",{className:"mt-6 mb-4 text-ss-text-light",children:jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Gold amounts, across the board, were reduced by 4x for simplicity (e.g., a unit costing 400g is now 100g, mines giving 200g is now 50g, etc.)."}),jsxRuntimeExports.jsx("li",{children:"Each hero has been assigned a class so that its damage multipliers align with units:"}),jsxRuntimeExports.jsx("li",{children:"Pikeman  Halberdier (Anti-cavalry)"}),jsxRuntimeExports.jsx("li",{children:"Archer  Marksman (Ranged infantry)"}),jsxRuntimeExports.jsx("li",{children:"Knight  Dragoon (Cavalry)"})]})})]})]})}const RELEASE_TIME=DateTime$1.fromSeconds(1701086400).setZone("GMT"),AmalgemaUIRoot=()=>useStore(dr=>({networkLayer:dr.networkLayer})).networkLayer?DateTime$1.now().setZone("GMT")<RELEASE_TIME?jsxRuntimeExports.jsxs("div",{className:"h-screen w-screen flex flex-col justify-center items-center",children:[jsxRuntimeExports.jsx("div",{style:{background:"linear-gradient(152deg, rgba(244, 243, 241, 0.98) 0%, rgba(244, 243, 241, 0.88) 100%), url(/assets/ship-background.jpeg), lightgray -381.491px 0.145px / 126.42% 100% no-repeat",backgroundSize:"cover",backgroundPosition:"right",zIndex:-2},className:"fixed top-0 left-0 h-screen w-screen bg-cover"}),jsxRuntimeExports.jsx("div",{className:"text-4xl font-bold",children:"Sky Strife will be available at 12pm GMT."})]}):jsxRuntimeExports.jsxs("div",{className:"flex h-screen",children:[jsxRuntimeExports.jsx(DevTools,{}),jsxRuntimeExports.jsxs("div",{className:"h-screen flex flex-col grow",children:[jsxRuntimeExports.jsx(Header$1,{}),jsxRuntimeExports.jsx("div",{style:{background:"linear-gradient(152deg, rgba(244, 243, 241, 0.98) 0%, rgba(244, 243, 241, 0.88) 100%), url(/assets/ship-background.jpeg), lightgray -381.491px 0.145px / 126.42% 100% no-repeat",backgroundSize:"cover",backgroundPosition:"right",zIndex:-2},className:"fixed top-0 left-0 h-screen w-screen bg-cover"}),jsxRuntimeExports.jsxs("div",{className:"grow px-8 py-6 flex flex-col",children:[jsxRuntimeExports.jsx(Welcome,{}),jsxRuntimeExports.jsx(MatchCountdown,{}),jsxRuntimeExports.jsx("div",{className:"h-6"}),jsxRuntimeExports.jsx(MatchTable$1,{})]})]}),jsxRuntimeExports.jsx(InventorySidebar,{}),jsxRuntimeExports.jsx(Transactions,{}),jsxRuntimeExports.jsx(ChooseUsernameModal,{}),jsxRuntimeExports.jsx(AnnouncementModal,{}),jsxRuntimeExports.jsx(ComponentBrowser,{})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),{publicClient:publicClient$1}=configureChains([mainnet],[publicProvider()]),wagmiConfig$1=createConfig({publicClient:publicClient$1}),Amalgema=()=>jsxRuntimeExports.jsx(AmalgemaMenu,{}),AmalgemaMenu=()=>{const cr=useNetworkLayer();return reactExports.useEffect(()=>{cr&&(useStore.setState({networkLayer:cr}),document.title="Sky Strife - Main Menu")},[cr]),jsxRuntimeExports.jsx(WagmiConfig,{config:cr?cr.network.wagmiConfig:wagmiConfig$1,children:jsxRuntimeExports.jsx(RainbowKitProvider,{chains:cr?cr.network.chains:[],children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(LoadingScreen,{networkLayer:cr}),jsxRuntimeExports.jsx(AmalgemaUIRoot,{})]})})})},AmalgemaLockScreen=()=>jsxRuntimeExports.jsxs("div",{className:"h-screen w-screen flex flex-col justify-center items-center",children:[jsxRuntimeExports.jsx("div",{style:{background:"linear-gradient(152deg, rgba(244, 243, 241, 0.98) 0%, rgba(244, 243, 241, 0.88) 100%), url(/assets/ship-background.jpeg), lightgray -381.491px 0.145px / 126.42% 100% no-repeat",backgroundSize:"cover",backgroundPosition:"right",zIndex:-2},className:"fixed top-0 left-0 h-screen w-screen bg-cover"}),jsxRuntimeExports.jsx("div",{className:"text-4xl font-bold",children:"Major update incoming"}),jsxRuntimeExports.jsx("div",{className:"h-3"}),jsxRuntimeExports.jsxs("div",{className:"text-xl text-ss-text-default text-center mt-3",children:["Sky Strife will be back in the next hour  with new combat, new units, and more!",jsxRuntimeExports.jsxs("div",{children:["Follow along on"," ",jsxRuntimeExports.jsx(Link,{style:{fontSize:"18px"},href:DISCORD_URL,children:"Discord"})," ","for more updates."]})]})]});function BrutalistCard(cr){const{borderSize:ar,shadowOffset:dr,clickable:fr}=cr,hr="#CDC098",[pr,mr]=reactExports.useState(0),[gr]=reactExports.useState(ar??1),[yr,xr]=reactExports.useState(dr??3),[wr,br]=reactExports.useState(!1);return reactExports.useEffect(()=>{fr&&(wr?(mr(1),xr((dr??3)-1)):(mr(0),xr(dr??3)))},[ar,dr,fr,wr]),jsxRuntimeExports.jsx("div",{onMouseEnter:()=>br(!0),onMouseLeave:()=>br(!1),onMouseDown:()=>{fr&&(xr(Sr=>Sr-1),mr(Sr=>Sr+1))},onMouseUp:()=>{fr&&(xr(Sr=>Sr+1),mr(Sr=>Sr-1))},style:{...cr.style,boxShadow:`${yr}px ${yr}px 0 0 #000000`,backgroundColor:"#e3e2dd",transform:`translate(${pr}px, ${pr}px)`,border:`${gr??3}px solid #e3e2dd`,transition:"all 0.1s ease-in-out"},className:twMerge("bg-gray h-full w-full rounded text-black/80",cr.className,fr&&wr&&"cursor-pointer"),children:jsxRuntimeExports.jsx("div",{style:{transition:"all 0.1s ease-in-out",border:`${gr??1}px solid ${fr&&wr?Color$1(hr).darken(.2).toString():Color$1(hr)}`},className:"h-full w-full rounded",children:cr.children})})}var COMMON_MIME_TYPES=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function toFileWithPath(cr,ar){var dr=withMimeType(cr);if(typeof dr.path!="string"){var fr=cr.webkitRelativePath;Object.defineProperty(dr,"path",{value:typeof ar=="string"?ar:typeof fr=="string"&&fr.length>0?fr:cr.name,writable:!1,configurable:!1,enumerable:!0})}return dr}function withMimeType(cr){var ar=cr.name,dr=ar&&ar.lastIndexOf(".")!==-1;if(dr&&!cr.type){var fr=ar.split(".").pop().toLowerCase(),hr=COMMON_MIME_TYPES.get(fr);hr&&Object.defineProperty(cr,"type",{value:hr,writable:!1,configurable:!1,enumerable:!0})}return cr}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(cr){return __awaiter$d(this,void 0,void 0,function(){return __generator$4(this,function(ar){return[2,isDragEvt(cr)&&cr.dataTransfer?getDataTransferFiles(cr.dataTransfer,cr.type):getInputFiles(cr)]})})}function isDragEvt(cr){return!!cr.dataTransfer}function getInputFiles(cr){var ar=isInput(cr.target)?cr.target.files?fromList(cr.target.files):[]:[];return ar.map(function(dr){return toFileWithPath(dr)})}function isInput(cr){return cr!==null}function getDataTransferFiles(cr,ar){return __awaiter$d(this,void 0,void 0,function(){var dr,fr;return __generator$4(this,function(hr){switch(hr.label){case 0:return cr.items?(dr=fromList(cr.items).filter(function(pr){return pr.kind==="file"}),ar!=="drop"?[2,dr]:[4,Promise.all(dr.map(toFilePromises))]):[3,2];case 1:return fr=hr.sent(),[2,noIgnoredFiles(flatten(fr))];case 2:return[2,noIgnoredFiles(fromList(cr.files).map(function(pr){return toFileWithPath(pr)}))]}})})}function noIgnoredFiles(cr){return cr.filter(function(ar){return FILES_TO_IGNORE.indexOf(ar.name)===-1})}function fromList(cr){for(var ar=[],dr=0;dr<cr.length;dr++){var fr=cr[dr];ar.push(fr)}return ar}function toFilePromises(cr){if(typeof cr.webkitGetAsEntry!="function")return fromDataTransferItem(cr);var ar=cr.webkitGetAsEntry();return ar&&ar.isDirectory?fromDirEntry(ar):fromDataTransferItem(cr)}function flatten(cr){return cr.reduce(function(ar,dr){return __spread$2(ar,Array.isArray(dr)?flatten(dr):[dr])},[])}function fromDataTransferItem(cr){var ar=cr.getAsFile();if(!ar)return Promise.reject(cr+" is not a File");var dr=toFileWithPath(ar);return Promise.resolve(dr)}function fromEntry(cr){return __awaiter$d(this,void 0,void 0,function(){return __generator$4(this,function(ar){return[2,cr.isDirectory?fromDirEntry(cr):fromFileEntry(cr)]})})}function fromDirEntry(cr){var ar=cr.createReader();return new Promise(function(dr,fr){var hr=[];function pr(){var mr=this;ar.readEntries(function(gr){return __awaiter$d(mr,void 0,void 0,function(){var yr,xr,wr;return __generator$4(this,function(br){switch(br.label){case 0:if(gr.length)return[3,5];br.label=1;case 1:return br.trys.push([1,3,,4]),[4,Promise.all(hr)];case 2:return yr=br.sent(),dr(yr),[3,4];case 3:return xr=br.sent(),fr(xr),[3,4];case 4:return[3,6];case 5:wr=Promise.all(gr.map(fromEntry)),hr.push(wr),pr(),br.label=6;case 6:return[2]}})})},function(gr){fr(gr)})}pr()})}function fromFileEntry(cr){return __awaiter$d(this,void 0,void 0,function(){return __generator$4(this,function(ar){return[2,new Promise(function(dr,fr){cr.file(function(hr){var pr=toFileWithPath(hr,cr.fullPath);dr(pr)},function(hr){fr(hr)})})]})})}function _regeneratorRuntime(){_regeneratorRuntime=function(){return cr};var cr={},ar=Object.prototype,dr=ar.hasOwnProperty,fr=Object.defineProperty||function(qr,Hr,Or){qr[Hr]=Or.value},hr=typeof Symbol=="function"?Symbol:{},pr=hr.iterator||"@@iterator",mr=hr.asyncIterator||"@@asyncIterator",gr=hr.toStringTag||"@@toStringTag";function yr(qr,Hr,Or){return Object.defineProperty(qr,Hr,{value:Or,enumerable:!0,configurable:!0,writable:!0}),qr[Hr]}try{yr({},"")}catch{yr=function(Hr,Or,Mr){return Hr[Or]=Mr}}function xr(qr,Hr,Or,Mr){var Lr=Hr&&Hr.prototype instanceof Sr?Hr:Sr,Vr=Object.create(Lr.prototype),Jr=new Fr(Mr||[]);return fr(Vr,"_invoke",{value:Nr(qr,Or,Jr)}),Vr}function wr(qr,Hr,Or){try{return{type:"normal",arg:qr.call(Hr,Or)}}catch(Mr){return{type:"throw",arg:Mr}}}cr.wrap=xr;var br={};function Sr(){}function vr(){}function Er(){}var Ar={};yr(Ar,pr,function(){return this});var _r=Object.getPrototypeOf,Cr=_r&&_r(_r(jr([])));Cr&&Cr!==ar&&dr.call(Cr,pr)&&(Ar=Cr);var kr=Er.prototype=Sr.prototype=Object.create(Ar);function Rr(qr){["next","throw","return"].forEach(function(Hr){yr(qr,Hr,function(Or){return this._invoke(Hr,Or)})})}function Ir(qr,Hr){function Or(Lr,Vr,Jr,es){var ns=wr(qr[Lr],qr,Vr);if(ns.type!=="throw"){var Qr=ns.arg,zr=Qr.value;return zr&&typeof zr=="object"&&dr.call(zr,"__await")?Hr.resolve(zr.__await).then(function(Wr){Or("next",Wr,Jr,es)},function(Wr){Or("throw",Wr,Jr,es)}):Hr.resolve(zr).then(function(Wr){Qr.value=Wr,Jr(Qr)},function(Wr){return Or("throw",Wr,Jr,es)})}es(ns.arg)}var Mr;fr(this,"_invoke",{value:function(Lr,Vr){function Jr(){return new Hr(function(es,ns){Or(Lr,Vr,es,ns)})}return Mr=Mr?Mr.then(Jr,Jr):Jr()}})}function Nr(qr,Hr,Or){var Mr="suspendedStart";return function(Lr,Vr){if(Mr==="executing")throw new Error("Generator is already running");if(Mr==="completed"){if(Lr==="throw")throw Vr;return Ur()}for(Or.method=Lr,Or.arg=Vr;;){var Jr=Or.delegate;if(Jr){var es=Pr(Jr,Or);if(es){if(es===br)continue;return es}}if(Or.method==="next")Or.sent=Or._sent=Or.arg;else if(Or.method==="throw"){if(Mr==="suspendedStart")throw Mr="completed",Or.arg;Or.dispatchException(Or.arg)}else Or.method==="return"&&Or.abrupt("return",Or.arg);Mr="executing";var ns=wr(qr,Hr,Or);if(ns.type==="normal"){if(Mr=Or.done?"completed":"suspendedYield",ns.arg===br)continue;return{value:ns.arg,done:Or.done}}ns.type==="throw"&&(Mr="completed",Or.method="throw",Or.arg=ns.arg)}}}function Pr(qr,Hr){var Or=Hr.method,Mr=qr.iterator[Or];if(Mr===void 0)return Hr.delegate=null,Or==="throw"&&qr.iterator.return&&(Hr.method="return",Hr.arg=void 0,Pr(qr,Hr),Hr.method==="throw")||Or!=="return"&&(Hr.method="throw",Hr.arg=new TypeError("The iterator does not provide a '"+Or+"' method")),br;var Lr=wr(Mr,qr.iterator,Hr.arg);if(Lr.type==="throw")return Hr.method="throw",Hr.arg=Lr.arg,Hr.delegate=null,br;var Vr=Lr.arg;return Vr?Vr.done?(Hr[qr.resultName]=Vr.value,Hr.next=qr.nextLoc,Hr.method!=="return"&&(Hr.method="next",Hr.arg=void 0),Hr.delegate=null,br):Vr:(Hr.method="throw",Hr.arg=new TypeError("iterator result is not an object"),Hr.delegate=null,br)}function Tr(qr){var Hr={tryLoc:qr[0]};1 in qr&&(Hr.catchLoc=qr[1]),2 in qr&&(Hr.finallyLoc=qr[2],Hr.afterLoc=qr[3]),this.tryEntries.push(Hr)}function Br(qr){var Hr=qr.completion||{};Hr.type="normal",delete Hr.arg,qr.completion=Hr}function Fr(qr){this.tryEntries=[{tryLoc:"root"}],qr.forEach(Tr,this),this.reset(!0)}function jr(qr){if(qr){var Hr=qr[pr];if(Hr)return Hr.call(qr);if(typeof qr.next=="function")return qr;if(!isNaN(qr.length)){var Or=-1,Mr=function Lr(){for(;++Or<qr.length;)if(dr.call(qr,Or))return Lr.value=qr[Or],Lr.done=!1,Lr;return Lr.value=void 0,Lr.done=!0,Lr};return Mr.next=Mr}}return{next:Ur}}function Ur(){return{value:void 0,done:!0}}return vr.prototype=Er,fr(kr,"constructor",{value:Er,configurable:!0}),fr(Er,"constructor",{value:vr,configurable:!0}),vr.displayName=yr(Er,gr,"GeneratorFunction"),cr.isGeneratorFunction=function(qr){var Hr=typeof qr=="function"&&qr.constructor;return!!Hr&&(Hr===vr||(Hr.displayName||Hr.name)==="GeneratorFunction")},cr.mark=function(qr){return Object.setPrototypeOf?Object.setPrototypeOf(qr,Er):(qr.__proto__=Er,yr(qr,gr,"GeneratorFunction")),qr.prototype=Object.create(kr),qr},cr.awrap=function(qr){return{__await:qr}},Rr(Ir.prototype),yr(Ir.prototype,mr,function(){return this}),cr.AsyncIterator=Ir,cr.async=function(qr,Hr,Or,Mr,Lr){Lr===void 0&&(Lr=Promise);var Vr=new Ir(xr(qr,Hr,Or,Mr),Lr);return cr.isGeneratorFunction(Hr)?Vr:Vr.next().then(function(Jr){return Jr.done?Jr.value:Vr.next()})},Rr(kr),yr(kr,gr,"Generator"),yr(kr,pr,function(){return this}),yr(kr,"toString",function(){return"[object Generator]"}),cr.keys=function(qr){var Hr=Object(qr),Or=[];for(var Mr in Hr)Or.push(Mr);return Or.reverse(),function Lr(){for(;Or.length;){var Vr=Or.pop();if(Vr in Hr)return Lr.value=Vr,Lr.done=!1,Lr}return Lr.done=!0,Lr}},cr.values=jr,Fr.prototype={constructor:Fr,reset:function(qr){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Br),!qr)for(var Hr in this)Hr.charAt(0)==="t"&&dr.call(this,Hr)&&!isNaN(+Hr.slice(1))&&(this[Hr]=void 0)},stop:function(){this.done=!0;var qr=this.tryEntries[0].completion;if(qr.type==="throw")throw qr.arg;return this.rval},dispatchException:function(qr){if(this.done)throw qr;var Hr=this;function Or(ns,Qr){return Vr.type="throw",Vr.arg=qr,Hr.next=ns,Qr&&(Hr.method="next",Hr.arg=void 0),!!Qr}for(var Mr=this.tryEntries.length-1;Mr>=0;--Mr){var Lr=this.tryEntries[Mr],Vr=Lr.completion;if(Lr.tryLoc==="root")return Or("end");if(Lr.tryLoc<=this.prev){var Jr=dr.call(Lr,"catchLoc"),es=dr.call(Lr,"finallyLoc");if(Jr&&es){if(this.prev<Lr.catchLoc)return Or(Lr.catchLoc,!0);if(this.prev<Lr.finallyLoc)return Or(Lr.finallyLoc)}else if(Jr){if(this.prev<Lr.catchLoc)return Or(Lr.catchLoc,!0)}else{if(!es)throw new Error("try statement without catch or finally");if(this.prev<Lr.finallyLoc)return Or(Lr.finallyLoc)}}}},abrupt:function(qr,Hr){for(var Or=this.tryEntries.length-1;Or>=0;--Or){var Mr=this.tryEntries[Or];if(Mr.tryLoc<=this.prev&&dr.call(Mr,"finallyLoc")&&this.prev<Mr.finallyLoc){var Lr=Mr;break}}Lr&&(qr==="break"||qr==="continue")&&Lr.tryLoc<=Hr&&Hr<=Lr.finallyLoc&&(Lr=null);var Vr=Lr?Lr.completion:{};return Vr.type=qr,Vr.arg=Hr,Lr?(this.method="next",this.next=Lr.finallyLoc,br):this.complete(Vr)},complete:function(qr,Hr){if(qr.type==="throw")throw qr.arg;return qr.type==="break"||qr.type==="continue"?this.next=qr.arg:qr.type==="return"?(this.rval=this.arg=qr.arg,this.method="return",this.next="end"):qr.type==="normal"&&Hr&&(this.next=Hr),br},finish:function(qr){for(var Hr=this.tryEntries.length-1;Hr>=0;--Hr){var Or=this.tryEntries[Hr];if(Or.finallyLoc===qr)return this.complete(Or.completion,Or.afterLoc),Br(Or),br}},catch:function(qr){for(var Hr=this.tryEntries.length-1;Hr>=0;--Hr){var Or=this.tryEntries[Hr];if(Or.tryLoc===qr){var Mr=Or.completion;if(Mr.type==="throw"){var Lr=Mr.arg;Br(Or)}return Lr}}throw new Error("illegal catch attempt")},delegateYield:function(qr,Hr,Or){return this.delegate={iterator:jr(qr),resultName:Hr,nextLoc:Or},this.method==="next"&&(this.arg=void 0),br}},cr}function asyncGeneratorStep(cr,ar,dr,fr,hr,pr,mr){try{var gr=cr[pr](mr),yr=gr.value}catch(xr){dr(xr);return}gr.done?ar(yr):Promise.resolve(yr).then(fr,hr)}function _asyncToGenerator(cr){return function(){var ar=this,dr=arguments;return new Promise(function(fr,hr){var pr=cr.apply(ar,dr);function mr(yr){asyncGeneratorStep(pr,fr,hr,mr,gr,"next",yr)}function gr(yr){asyncGeneratorStep(pr,fr,hr,mr,gr,"throw",yr)}mr(void 0)})}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(cr){for(var ar=1;ar<arguments.length;ar++){var dr=arguments[ar];for(var fr in dr)Object.prototype.hasOwnProperty.call(dr,fr)&&(cr[fr]=dr[fr])}return cr},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(cr,ar){if(cr==null)return{};var dr={},fr=Object.keys(cr),hr,pr;for(pr=0;pr<fr.length;pr++)hr=fr[pr],!(ar.indexOf(hr)>=0)&&(dr[hr]=cr[hr]);return dr}var BYTES_PER_MEGABYTE=1e6,FileSizeValidator=function(){function cr(){}var ar=cr.prototype;return ar.validateBeforeParsing=function(){var dr=_asyncToGenerator(_regeneratorRuntime().mark(function hr(pr,mr){var gr,yr,xr;return _regeneratorRuntime().wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(gr=pr.minFileSize,yr=pr.maxFileSize,!(!gr&&!yr)){br.next=3;break}return br.abrupt("return",Promise.resolve());case 3:return xr=mr.map(function(Sr){return getFileSizeError({minFileSize:gr,maxFileSize:yr,fileSize:Sr.size})}).filter(function(Sr){return!!Sr}),br.abrupt("return",xr.length>0?Promise.reject(xr[0]):Promise.resolve());case 5:case"end":return br.stop()}},hr)}));function fr(hr,pr){return dr.apply(this,arguments)}return fr}(),ar.validateAfterParsing=function(){var dr=_asyncToGenerator(_regeneratorRuntime().mark(function hr(pr,mr){return _regeneratorRuntime().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return yr.abrupt("return",Promise.resolve());case 1:case"end":return yr.stop()}},hr)}));function fr(hr,pr){return dr.apply(this,arguments)}return fr}(),cr}(),getFileSizeError=function cr(ar){var dr=ar.fileSize,fr=ar.maxFileSize,hr=ar.minFileSize;if(hr){var pr=hr*BYTES_PER_MEGABYTE;if(dr<pr)return{fileSizeTooSmall:!0}}if(fr){var mr=fr*BYTES_PER_MEGABYTE;if(dr>mr)return{fileSizeToolarge:!0}}},FilesLimitValidator=function(){function cr(){}var ar=cr.prototype;return ar.validateBeforeParsing=function(fr,hr){var pr=fr.limitFilesConfig;if(pr){if(pr.max&&hr.length>pr.max)return Promise.reject({maxLimitExceeded:!0});if(pr.min&&hr.length<pr.min)return Promise.reject({minLimitNotReached:!0})}return Promise.resolve()},ar.validateAfterParsing=function(){return Promise.resolve()},cr}();function openFileDialog(cr,ar,dr,fr){var hr=document.createElement("input");hr.style.display="none",document.body.appendChild(hr),hr.type="file",cr!=="*"&&(hr.accept=cr),hr.multiple=ar,hr.addEventListener("change",function(pr){dr(pr),document.body.removeChild(hr)}),fr&&fr(hr),hr.dispatchEvent(new MouseEvent("click"))}var ImageDimensionsValidator=function(){function cr(){}var ar=cr.prototype;return ar.validateBeforeParsing=function(){return Promise.resolve()},ar.validateAfterParsing=function(fr,hr,pr){var mr=fr.readAs,gr=fr.imageSizeRestrictions;return mr==="DataURL"&&gr&&isImage(hr.type)?checkImageDimensions(pr.result,gr):Promise.resolve()},cr}(),isImage=function cr(ar){return ar.startsWith("image")},checkImageDimensions=function cr(ar,dr){return new Promise(function(fr,hr){var pr=new Image;pr.onload=function(){var mr=dr.maxHeight,gr=dr.maxWidth,yr=dr.minHeight,xr=dr.minWidth,wr=this.width,br=this.height,Sr={};mr&&mr<br&&(Sr=_extends({},Sr,{imageHeightTooBig:!0})),yr&&yr>br&&(Sr=_extends({},Sr,{imageHeightTooSmall:!0})),gr&&gr<wr&&(Sr=_extends({},Sr,{imageWidthTooBig:!0})),xr&&xr>wr&&(Sr=_extends({},Sr,{imageWidthTooSmall:!0})),Object.keys(Sr).length?hr(Sr):fr()},pr.onerror=function(){hr({imageNotLoaded:!0})},pr.src=ar})},_excluded=["name"],VALIDATORS=[new FileSizeValidator,new FilesLimitValidator,new ImageDimensionsValidator];function useFilePicker(cr){var ar=cr.accept,dr=ar===void 0?"*":ar,fr=cr.multiple,hr=fr===void 0?!0:fr,pr=cr.readAs,mr=pr===void 0?"Text":pr,gr=cr.readFilesContent,yr=gr===void 0?!0:gr,xr=cr.validators,wr=xr===void 0?[]:xr,br=cr.onFilesSelected,Sr=cr.onFilesSuccessfulySelected,vr=cr.onFilesRejected,Er=cr.initializeWithCustomParameters,Ar=reactExports.useState([]),_r=Ar[0],Cr=Ar[1],kr=reactExports.useState([]),Rr=kr[0],Ir=kr[1],Nr=reactExports.useState([]),Pr=Nr[0],Tr=Nr[1],Br=reactExports.useState(!1),Fr=Br[0],jr=Br[1],Ur=reactExports.useCallback(function(){Cr([]),Ir([]),Tr([])},[]),qr=function(Mr){return new Promise(function(){var Lr=_asyncToGenerator(_regeneratorRuntime().mark(function Vr(Jr,es){var ns,Qr,zr;return _regeneratorRuntime().wrap(function(ss){for(;;)switch(ss.prev=ss.next){case 0:ns=new FileReader,Qr=ns["readAs"+mr],Qr.call(ns,Mr),zr=function(ts){var fs=ts.name,rs=fs===void 0?Mr.name:fs,as=_objectWithoutPropertiesLoose(ts,_excluded);es(_extends({name:rs,fileSizeToolarge:!1,fileSizeTooSmall:!1},as))},ns.onload=_asyncToGenerator(_regeneratorRuntime().mark(function Xr(){return _regeneratorRuntime().wrap(function(fs){for(;;)switch(fs.prev=fs.next){case 0:return fs.abrupt("return",Promise.all(VALIDATORS.concat(wr).map(function(rs){return rs.validateAfterParsing(cr,Mr,ns).catch(function(as){return Promise.reject(zr(as))})})).then(function(){return Jr(_extends({},Mr,{content:ns.result,name:Mr.name,lastModified:Mr.lastModified}))}).catch(function(){}));case 1:case"end":return fs.stop()}},Xr)})),ns.onerror=function(){zr({readerError:ns.error,plainFile:Mr})};case 6:case"end":return ss.stop()}},Vr)}));return function(Vr,Jr){return Lr.apply(this,arguments)}}())},Hr=function(){var Mr=dr instanceof Array?dr.join(","):dr;openFileDialog(Mr,hr,function(){var Lr=_asyncToGenerator(_regeneratorRuntime().mark(function Vr(Jr){var es,ns,Qr,zr,Wr,ss;return _regeneratorRuntime().wrap(function(ts){for(;;)switch(ts.prev=ts.next){case 0:return Ur(),es=Jr.target,ns=es.files?Array.from(es.files):[],jr(!0),ts.next=6,Promise.all(VALIDATORS.concat(wr).map(function(fs){return fs.validateBeforeParsing(cr,ns).catch(function(rs){return rs})}));case 6:if(Qr=ts.sent.filter(Boolean),Cr(ns),Tr(Qr),!Qr.length){ts.next=14;break}return jr(!1),vr?.({errors:Qr}),br?.({errors:Qr}),ts.abrupt("return");case 14:if(yr){ts.next=18;break}return jr(!1),br?.({plainFiles:ns,filesContent:[]}),ts.abrupt("return");case 18:return ts.next=20,fromEvent(Jr);case 20:return zr=ts.sent,Wr=[],ts.next=24,Promise.all(zr.map(function(fs){return qr(fs).catch(function(rs){rs.plainFile=fs,Wr.push(rs)})}));case 24:if(ss=ts.sent,jr(!1),!Wr.length){ts.next=33;break}return Cr([]),Ir([]),Tr(function(fs){return[].concat(fs,Wr)}),vr?.({errors:Wr}),br?.({errors:Qr.concat(Wr)}),ts.abrupt("return");case 33:Ir(ss),Cr(ns),Tr([]),Sr?.({filesContent:ss,plainFiles:ns}),br?.({plainFiles:ns,filesContent:ss});case 38:case"end":return ts.stop()}},Vr)}));return function(Vr){return Lr.apply(this,arguments)}}(),Er)};return[Hr,{filesContent:Rr,errors:Pr,loading:Fr,plainFiles:_r,clear:Ur}]}const STATE_UPDATES_PER_TX=25;async function bulkUploadMap(cr,ar,dr,fr){console.log(`Uploading ${fr} level`);const hr=Array.from(y$7(dr,STATE_UPDATES_PER_TX));await Promise.all(hr.map(async pr=>{const mr=stringToHex(fr,{size:32}),gr=pr.map(Sr=>stringToHex(Sr.templateId,{size:32})),yr=pr.map(Sr=>Sr.values.Position.x),xr=pr.map(Sr=>Sr.values.Position.y);let wr=!1,br=0;for(;!wr&&br<3;)try{const Sr=await cr.network.worldContract.write.callFrom(a$3({abi:IWorldAbi,from:ar,systemId:LEVEL_UPLOAD_SYSTEM_ID,functionName:"uploadLevel",args:[mr,gr,yr,xr]}));await cr.network.waitForTransaction(Sr),wr=!0}catch(Sr){console.log(Sr),br++;continue}if(!wr)throw new Error(`Failed to upload ${fr} level`);return!0})),console.log(`Uploaded ${fr} level!`)}const MapUpload=()=>{const cr=useAmalgema(),{externalWalletClient:ar,externalWorldContract:dr,network:{walletClient:fr},utils:{hasSystemDelegation:hr}}=cr,{address:pr}=useExternalAccount$1(),[mr,gr]=useFilePicker({accept:".json"}),[yr,xr]=reactExports.useState(!1),[wr,br]=reactExports.useState(""),{filesContent:Sr,loading:vr}=gr,Er=pr?hr(pr,fr.account.address,LEVEL_UPLOAD_SYSTEM_ID):!1;return jsxRuntimeExports.jsxs("form",{className:"flex flex-col",onSubmit:async Ar=>{if(Ar.preventDefault(),ar&&ar.account){xr(!0);try{await bulkUploadMap(cr,ar.account.address,JSON.parse(Sr[0].content),wr)}finally{xr(!1)}}},children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsxs("div",{className:"border border-gray-900 m-1 p-1",children:[jsxRuntimeExports.jsx(OverlineSmall,{children:"Step 0: delegate to operator"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col m-2",children:jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",disabled:Er,onClick:()=>{dr&&dr.write.registerDelegation([fr.account.address,SYSTEMBOUND_DELEGATION,encodeFunctionData({abi:DelegationAbi,functionName:"initDelegation",args:[fr.account.address,LEVEL_UPLOAD_SYSTEM_ID,maxUint256]})])},children:"Delegate"})})]}),jsxRuntimeExports.jsxs("div",{className:"border border-gray-900 m-1 p-1",children:[jsxRuntimeExports.jsx(OverlineSmall,{children:"Step 1: upload file"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-32 m-2",children:[jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",onClick:mr,children:"Choose Level File"}),Sr&&jsxRuntimeExports.jsx("div",{children:Sr.map(Ar=>jsxRuntimeExports.jsx("div",{children:Ar.name},Ar.name))})]})]}),jsxRuntimeExports.jsxs("div",{className:"border border-gray-900 m-1 p-1",children:[jsxRuntimeExports.jsx(OverlineSmall,{children:"Step 2: choose name"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col h-32 m-2",children:jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Level Name",onChange:Ar=>br(Ar.target.value)})})]})]}),vr&&jsxRuntimeExports.jsx("div",{children:"Loading..."}),jsxRuntimeExports.jsx(Button$1,{type:"submit",disabled:yr||wr===""||!Sr[0],buttonType:"primary",children:"Upload!"})]})},CreateLevel=({close:cr})=>{const ar=reactExports.useRef(null);return reactExports.useEffect(()=>{const dr=fr=>{fr.key==="Escape"&&cr()};return document.addEventListener("keydown",dr),()=>{document.removeEventListener("keydown",dr)}},[cr]),useOnClickOutside(ar,cr),jsxRuntimeExports.jsx("div",{style:{background:"rgba(24, 23, 16, 0.65)",zIndex:100},className:"fixed top-0 left-0 w-screen h-screen flex flex-col justify-around",children:jsxRuntimeExports.jsx("div",{ref:ar,className:"mx-auto",children:jsxRuntimeExports.jsxs(BrutalistCard,{className:"h-fit",children:[jsxRuntimeExports.jsx("div",{className:"p-8",children:jsxRuntimeExports.jsxs("div",{className:"flex w-full justify-between",children:[jsxRuntimeExports.jsx(OverlineLarge,{children:"Create Level"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",onClick:cr,className:"h-fit",children:jsxRuntimeExports.jsx(CrossIcon,{})})]})}),jsxRuntimeExports.jsx(MapUpload,{})]})})})};function StandardRotation({levelId:cr}){const{components:{LevelInStandardRotation:ar},externalWorldContract:dr}=useAmalgema(),fr=H$4(ar,cr),hr=fr&&fr.value;return jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",onClick:()=>{dr&&dr.write.setRotationStandard([cr,!hr])},style:{color:hr?"green":"darkred"},children:hr?"true":"false"})})}function SeasonPassRotation({levelId:cr}){const{components:{LevelInSeasonPassRotation:ar},externalWorldContract:dr}=useAmalgema(),fr=H$4(ar,cr),hr=fr&&fr.value;return jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",onClick:()=>{dr&&dr.write.setRotationSeasonPass([cr,!hr])},style:{color:hr?"green":"darkred"},children:hr?"true":"false"})})}function OfficialLevel({levelId:cr}){const{components:{OfficialLevel:ar},externalWorldContract:dr}=useAmalgema(),fr=H$4(ar,cr),hr=fr&&fr.value;return jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",onClick:()=>{dr&&dr.write.setOfficial([cr,!hr])},style:{color:hr?"green":"darkred"},children:hr?"true":"false"})})}function Levels(){const{components:{LevelTemplates:cr}}=useAmalgema(),[ar,dr]=reactExports.useState(!1),fr=te$5([Ye$3(cr)]).map(hr=>{const{value:pr}=de$2(cr,hr);return{levelId:hr,value:pr}});return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsx("div",{className:"w-full text-3xl text-left p-1",children:"Levels"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",onClick:()=>dr(!0),children:"Create level"})]}),jsxRuntimeExports.jsxs("table",{className:"w-full text-lg text-left text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("thead",{className:"text-xl text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"ID"}),jsxRuntimeExports.jsx("th",{children:"Size"}),jsxRuntimeExports.jsx("th",{children:"In standard rotation?"}),jsxRuntimeExports.jsx("th",{children:"In season pass rotation?"}),jsxRuntimeExports.jsx("th",{children:"Official Level?"}),jsxRuntimeExports.jsx("th",{children:"Preview"})]})}),jsxRuntimeExports.jsx("tbody",{children:fr.map(({levelId:hr,value:pr})=>jsxRuntimeExports.jsxs("tr",{className:"border-4",children:[jsxRuntimeExports.jsx("td",{children:hexToString(hr)}),jsxRuntimeExports.jsx("td",{children:pr.length}),jsxRuntimeExports.jsx(StandardRotation,{levelId:hr}),jsxRuntimeExports.jsx(SeasonPassRotation,{levelId:hr}),jsxRuntimeExports.jsx(OfficialLevel,{levelId:hr}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx("div",{className:"w-64 h-64"})})]},hr))})]}),ar&&jsxRuntimeExports.jsx(CreateLevel,{close:()=>dr(!1)})]})}function Player({entity:cr,index:ar,matchesJoined:dr}){const{components:{Name:fr,Orb_Balances:hr}}=useAmalgema(),pr=H$4(fr,cr),mr=useSeasonPass(X$5(cr)),gr=H$4(hr,cr);return jsxRuntimeExports.jsxs("tr",{className:"border-4",children:[jsxRuntimeExports.jsx("td",{children:ar+1}),jsxRuntimeExports.jsx("td",{children:X$5(cr)}),jsxRuntimeExports.jsxs("td",{children:[pr?pr.value:null," ",mr?jsxRuntimeExports.jsx(SeasonPassIcon,{}):""]}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsxs("div",{children:[formatEther(gr?gr.value:0n),"",jsxRuntimeExports.jsx("br",{}),dr," matches joined"]})})]},cr)}function Players(){const{components:{MatchPlayer:cr,Name:ar}}=useAmalgema(),dr=te$5([Ye$3(cr)]),fr=te$5([Ye$3(ar)]),hr=lodashExports.uniq(dr.map(mr=>addressToEntityID(ft$3(cr.metadata.keySchema,mr).playerAddress))),pr=dr.reduce((mr,gr)=>{const{playerAddress:yr}=ft$3(cr.metadata.keySchema,gr),xr=addressToEntityID(yr);return{...mr,[xr]:(mr[xr]||0)+1}},{});return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"w-full text-3xl text-left p-1",children:"Players"}),jsxRuntimeExports.jsx("div",{className:"w-full text-lg text-left p-1",children:"(that have set a Name)"})]}),jsxRuntimeExports.jsxs("table",{className:"w-full text-lg text-left text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("thead",{className:"text-xl text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{}),jsxRuntimeExports.jsx("th",{children:"Address"}),jsxRuntimeExports.jsx("th",{children:"Name"}),jsxRuntimeExports.jsx("th",{children:"Info"})]})}),jsxRuntimeExports.jsx("tbody",{children:lodashExports.uniq([...hr,...fr]).map((mr,gr)=>jsxRuntimeExports.jsx(Player,{entity:mr,index:gr,matchesJoined:pr[mr]},gr))})]})]})}function StandardHero({templateId:cr}){const{components:{HeroInRotation:ar},network:{worldContract:dr}}=useAmalgema(),fr=H$4(ar,cr),hr=fr&&fr.value;return jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",onClick:()=>dr.write.setHeroInRotation([cr,!hr]),style:{color:hr?"green":"darkred"},children:hr?"true":"false"})})}function SeasonPassHero({templateId:cr}){const{components:{HeroInSeasonPassRotation:ar},network:{worldContract:dr}}=useAmalgema(),fr=H$4(ar,cr),hr=fr&&fr.value;return jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",onClick:()=>dr.write.setHeroInSeasonPassRotation([cr,!hr]),style:{color:hr?"green":"darkred"},children:hr?"true":"false"})})}const Templates=()=>{const{components:{TemplateTables:cr},utils:{getTemplateValueStrict:ar}}=useAmalgema(),dr=te$5([Ye$3(cr)]).map(fr=>{const{value:hr}=de$2(cr,fr),pr={};return hr.forEach(mr=>pr[mr]=ar(mr,fr)),{templateId:fr,values:pr}});return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex flex-row",children:jsxRuntimeExports.jsx("div",{className:"w-full text-3xl text-left p-1",children:"Templates"})}),jsxRuntimeExports.jsxs("table",{className:"w-full text-lg text-left text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("thead",{className:"text-xl text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"ID"}),jsxRuntimeExports.jsx("th",{children:"Size"}),jsxRuntimeExports.jsx("th",{children:"Is standard hero?"}),jsxRuntimeExports.jsx("th",{children:"Is season pass hero?"}),jsxRuntimeExports.jsx("th",{children:"Components"})]})}),jsxRuntimeExports.jsx("tbody",{children:dr.map(({templateId:fr,values:hr})=>jsxRuntimeExports.jsxs("tr",{className:"border-4",children:[jsxRuntimeExports.jsx("td",{children:hexToString(fr)}),jsxRuntimeExports.jsx("td",{children:Object.keys(hr).length}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx(StandardHero,{templateId:fr})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx(SeasonPassHero,{templateId:fr})}),jsxRuntimeExports.jsx("td",{children:Object.entries(hr).map(([pr,mr])=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{children:I$4(pr).name},pr),jsxRuntimeExports.jsx("div",{children:JSON.stringify(mr)})]},pr))})]},fr))})]})]})};function Delegations(){const{components:{UserDelegationControl:cr,SystemboundDelegations:ar}}=useAmalgema(),dr=te$5([Ye$3(cr)]).map(fr=>{const{delegator:hr,delegatee:pr}=ft$3(cr.metadata.keySchema,fr),{delegationControlId:mr}=de$2(cr,fr);let gr;return mr===SYSTEMBOUND_DELEGATION&&(gr=Array.from(A$6([Ye$3(ar)])).map(yr=>ft$3(ar.metadata.keySchema,yr)).filter(yr=>yr.delegator===hr&&yr.delegatee===pr).map(yr=>I$4(yr.systemId).name)),{delegator:hr,delegatee:pr,delegationControlId:mr,systemNames:gr}});return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:jsxRuntimeExports.jsx("div",{className:"w-full text-3xl text-left p-1",children:"Delegations"})}),jsxRuntimeExports.jsxs("table",{className:"w-full text-lg text-left text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("thead",{className:"text-xl text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Delegator"}),jsxRuntimeExports.jsx("th",{children:"Delegatee"}),jsxRuntimeExports.jsx("th",{children:"Type"}),jsxRuntimeExports.jsx("th",{children:"Systems"})]})}),jsxRuntimeExports.jsx("tbody",{children:dr.map(({delegator:fr,delegatee:hr,delegationControlId:pr,systemNames:mr},gr)=>jsxRuntimeExports.jsxs("tr",{className:"border-4",children:[jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx(DisplayNameUnformatted,{entity:addressToEntityID(fr)})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx(DisplayNameUnformatted,{entity:addressToEntityID(hr)})}),jsxRuntimeExports.jsx("td",{children:I$4(pr).name}),jsxRuntimeExports.jsx("td",{children:mr?mr.join(","):null})]},gr))})]})]})}const transparent="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",DisplayLevel=({level:cr})=>{const{network:{components:{LevelPosition:ar}},utils:{getLevelPositionStrict:dr}}=useAmalgema(),fr=te$5([Ye$3(ar)]).map(wr=>ft$3(ar.metadata.keySchema,wr)).filter(({levelId:wr})=>wr===cr).map(({index:wr})=>dr(cr,wr)),hr=Math.min(...fr.map(wr=>wr.x)),pr=Math.max(...fr.map(wr=>wr.x)),mr=Math.min(...fr.map(wr=>wr.y)),gr=Math.max(...fr.map(wr=>wr.y)),yr=Math.max(pr,gr),xr=Math.min(hr,mr);return jsxRuntimeExports.jsx("div",{className:"bg-blue-300",children:jsxRuntimeExports.jsx("table",{children:jsxRuntimeExports.jsx("tbody",{children:Array.from(pe$3(yr-xr+3,1,xr-1)).map(wr=>jsxRuntimeExports.jsx("tr",{children:Array.from(pe$3(yr-xr+3,1,xr-1)).map(br=>jsxRuntimeExports.jsx("td",{className:"p-0",children:fr.some(({x:Sr,y:vr})=>Sr===br&&vr===wr)?jsxRuntimeExports.jsx("img",{src:"./assets/grass.png",width:"20"}):jsxRuntimeExports.jsx("img",{src:transparent,width:"20"})},`${br},${wr}`))},wr))})})})};function nowGmt(){return DateTime$1.now().setZone("GMT")}const CreateMatch=({close:cr})=>{const ar=useAmalgema(),{externalWorldContract:dr,network:{components:{LevelTemplates:fr,LevelInStandardRotation:hr,LevelInSeasonPassRotation:pr},waitForTransaction:mr,walletClient:gr,worldContract:yr},utils:{hasSystemDelegation:xr}}=ar,[wr,br]=reactExports.useState(nowGmt()),Sr=reactExports.useMemo(()=>createMatchTimes(wr),[wr]);reactExports.useEffect(()=>{const Ur=setInterval(()=>{br(nowGmt())},1e3);return()=>clearInterval(Ur)},[]);const[vr,Er]=reactExports.useState(""),[Ar,_r]=reactExports.useState(),[Cr,kr]=useLocalStorageState("registration-time",{defaultValue:Math.floor(DateTime$1.now().toSeconds())}),[Rr,Ir]=reactExports.useState(!1),[Nr,Pr]=reactExports.useState(1),{address:Tr}=useExternalAccount(),Br=Tr?xr(Tr,gr.account.address,MATCH_SYSTEM_ID):!1,Fr=reactExports.useRef(null),jr=te$5([Ye$3(fr)]).filter(Ur=>g$7(hr,Ur)?.value||g$7(pr,Ur)?.value).map(Ur=>({id:Ur,name:hexToString(Ur,{size:32})}));return reactExports.useEffect(()=>{const Ur=qr=>{qr.key==="Escape"&&cr()};return document.addEventListener("keydown",Ur),()=>{document.removeEventListener("keydown",Ur)}},[cr]),useOnClickOutside(Fr,cr),jsxRuntimeExports.jsx("div",{style:{background:"rgba(24, 23, 16, 0.65)",zIndex:100},className:"fixed top-0 left-0 w-screen h-screen flex flex-col justify-around",children:jsxRuntimeExports.jsx("div",{ref:Fr,className:"mx-auto",children:jsxRuntimeExports.jsx(BrutalistCard,{className:"w-96 h-fit",children:jsxRuntimeExports.jsxs("div",{className:"p-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex w-full justify-between",children:[jsxRuntimeExports.jsx(OverlineLarge,{children:"Create Match"}),jsxRuntimeExports.jsx("div",{className:"w-10"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",onClick:cr,className:"h-fit",children:jsxRuntimeExports.jsx(CrossIcon,{})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[!Br&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(OverlineLarge,{children:"Give permission for burner wallet to create matches"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col m-2",children:jsxRuntimeExports.jsx(PromiseButton,{buttonType:"primary",disabled:Br,promise:async()=>{if(dr)return await dr.write.registerDelegation([gr.account.address,SYSTEMBOUND_DELEGATION,encodeFunctionData({abi:DelegationAbi,functionName:"initDelegation",args:[gr.account.address,MATCH_SYSTEM_ID,maxUint256]})])},children:"Delegate"})})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-row justify-between p-1",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xl",children:"Options"}),jsxRuntimeExports.jsxs("div",{children:["Match Name (will be the same for all matches created):",jsxRuntimeExports.jsx("input",{type:"text",value:vr,onChange:Ur=>Er(Ur.target.value),placeholder:"Match Name",maxLength:24})]}),"Level:",jsxRuntimeExports.jsxs("select",{value:Ar,onChange:Ur=>_r(Ur.target.value),children:[jsxRuntimeExports.jsx("option",{value:void 0,children:"Select a level"}),jr.map(({id:Ur,name:qr})=>jsxRuntimeExports.jsx("option",{value:Ur,children:qr},Ur))]})]})}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"registration-time",children:"Registration Time (epoch time):"}),jsxRuntimeExports.jsx("input",{type:"number",id:"registration-time",value:Cr,onChange:Ur=>kr(Number(Ur.target.value)),min:DateTime$1.now().toSeconds()}),jsxRuntimeExports.jsx("div",{className:"flex w-full",children:Sr.map(Ur=>jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",onClick:()=>{kr(Ur.toSeconds())},children:Ur.toFormat("HH:mm:ss")},Ur.toSeconds()))}),jsxRuntimeExports.jsxs("div",{children:["Local Time:"," ",jsxRuntimeExports.jsx("span",{className:"text-ss-blue-hover bg-grey-500",children:DateTime$1.fromSeconds(Cr).toFormat("yyyy-MM-dd HH:mm:ss")})," ",jsxRuntimeExports.jsx("br",{}),"UTC Time:"," ",jsxRuntimeExports.jsxs("span",{className:"text-ss-blue-hover bg-grey-500",children:[DateTime$1.fromSeconds(Cr).toUTC().toFormat("yyyy-MM-dd HH:mm:ss")," "]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"season-pass-only",children:"Season Pass Only:"}),jsxRuntimeExports.jsx("input",{type:"checkbox",id:"season-pass-only",checked:Rr,onChange:Ur=>Ir(Ur.target.checked)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"num-to-create",children:"Number to Create:"}),jsxRuntimeExports.jsx("input",{type:"number",id:"num-to-create",value:Nr,onChange:Ur=>Pr(Number(Ur.target.value)),min:1})]}),jsxRuntimeExports.jsx("div",{className:"h-4"}),jsxRuntimeExports.jsx(PromiseButton,{className:"m-1",disabled:!Ar||Ar==="Select a level",buttonType:"secondary",promise:async()=>{if(!dr||!Tr)return;const Ur=[],qr=[];for(let Hr=0;Hr<Nr;Hr++){const Or=createMatchEntity();qr.push(Or);const Mr=await yr.write.callFrom(a$3({abi:IWorldAbi,from:Tr,systemId:MATCH_SYSTEM_ID,functionName:"createMatchSkyKey",args:[vr,findOldestMatchInWindow(ar)??Or,Or,Ar,Rr?SEASON_PASS_ONLY_SYSTEM_ID:padHex("0x"),0n,[],BigInt(Cr)]})),Lr=mr(Mr);Ur.push(Lr)}await Promise.all(Ur);for(const Hr of qr)await yr.write.copyMap([Hr]);cr()},children:"Create"})]}),Ar&&Ar!=="Select a level"&&jsxRuntimeExports.jsx(DisplayLevel,{level:Ar})]})})})})};function MatchNumber({matchEntity:cr}){const{networkLayer:ar}=useStore();if(!ar)throw new Error("network layer not ready");const{MatchIndex:dr}=ar.components,fr=H$4(dr,cr)?.matchIndex;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:fr?`#${fr}`:"??"})}const CopyButton=({matchEntity:cr})=>{const{network:{components:{LevelTemplates:ar,MatchConfig:dr,MatchMapCopyProgress:fr},worldContract:hr}}=useAmalgema(),pr=H$4(fr,cr),{levelId:mr}=de$2(dr,cr),gr=g$7(ar,mr),yr=pr&&gr?Math.round(Number(pr.value*100n)/gr.value.length):0;return jsxRuntimeExports.jsxs(Button$1,{buttonType:"primary",onClick:()=>{hr.write.copyMap([cr])},children:["Copy (",yr,"%)"]})},Row=({matchEntity:cr})=>{const{components:{MatchConfig:ar,MatchFinished:dr,MatchReady:fr,SpawnReservedBy:hr,MatchAccessControl:pr,MatchName:mr},utils:{getLevelSpawns:gr},externalWorldContract:yr}=useAmalgema(),xr=g$7(ar,cr),wr=xr?gr(xr.levelId):[],br=H$4(fr,cr),Sr=g$7(dr,cr),vr=xr?.levelId?hexToString(xr.levelId,{size:32}):"N/A",Er=g$7(mr,cr)?.value??"",Ar=DateTime$1.fromSeconds(Number(xr?.registrationTime??0n)),_r=g$7(pr,cr),Cr=_r&&_r.systemId===SEASON_PASS_ONLY_SYSTEM_ID;return jsxRuntimeExports.jsxs("tr",{className:"border border-black border-b-2",children:[jsxRuntimeExports.jsxs("td",{children:["(",jsxRuntimeExports.jsx(MatchNumber,{matchEntity:cr}),") ",jsxRuntimeExports.jsx("span",{className:"text-bold text-black",children:Er})]}),jsxRuntimeExports.jsx("td",{children:vr}),jsxRuntimeExports.jsxs("td",{children:[wr.length," players max"]}),jsxRuntimeExports.jsx("td",{children:Sr?"Yes":"No"}),jsxRuntimeExports.jsx("td",{children:Cr?"Yes":"No"}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsxs("div",{children:["GMT Time: ",Ar.setZone("GMT").toFormat("yyyy-MM-dd HH:mm:ss"),jsxRuntimeExports.jsx("br",{}),"Local Time: ",Ar.toFormat("yyyy-MM-dd HH:mm:ss")]})}),jsxRuntimeExports.jsx("td",{children:br?jsxRuntimeExports.jsx("a",{href:getMatchUrl(cr),children:jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",children:"Join"})}):jsxRuntimeExports.jsx(CopyButton,{matchEntity:cr})}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx(Button$1,{buttonType:"secondary",onClick:()=>{yr&&yr.write.adminDestroyMatch([cr])},children:"destroy match"})})]},cr)},MatchTable=({matches:cr})=>{const[ar,dr]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row",children:[jsxRuntimeExports.jsx("div",{className:"w-full text-3xl text-left p-1",children:"Matches"}),jsxRuntimeExports.jsx(Button$1,{buttonType:"primary",onClick:()=>dr(!0),children:"Create match"})]}),jsxRuntimeExports.jsxs("table",{className:"w-full text-lg text-left text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("thead",{className:"text-xl text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Lobby"}),jsxRuntimeExports.jsx("th",{children:"Map"}),jsxRuntimeExports.jsx("th",{children:"Players"}),jsxRuntimeExports.jsx("th",{children:"Finished?"}),jsxRuntimeExports.jsx("th",{children:"Season Pass Only?"}),jsxRuntimeExports.jsx("th",{children:"Registration Time"}),jsxRuntimeExports.jsx("th",{}),jsxRuntimeExports.jsx("th",{})]})}),jsxRuntimeExports.jsx("tbody",{children:cr.map(fr=>jsxRuntimeExports.jsx(Row,{matchEntity:fr},fr))})]}),ar&&jsxRuntimeExports.jsx(CreateMatch,{close:()=>dr(!1)})]})},Matches=()=>{const{components:{MatchConfig:cr,MatchIndex:ar,MatchFinished:dr}}=useAmalgema(),[fr,hr]=reactExports.useState(!1),[pr,mr]=reactExports.useState(!1),gr=te$5([Ye$3(cr),fr?Ye$3(dr):Ge$2(dr)]).filter(Sr=>{if(!pr)return!0;const vr=g$7(cr,Sr);return Number(vr?.registrationTime??0)<DateTime$1.now().toUTC().toSeconds()});gr.sort((Sr,vr)=>{const Er=g$7(ar,Sr)?.matchIndex||0,Ar=g$7(ar,vr)?.matchIndex||0;return Number(Ar)-Number(Er)});const yr=10,{form:xr,page:wr}=usePagination({totalItems:gr.length,pageSize:yr}),br=gr.slice((wr-1)*yr,wr*yr);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex",children:[xr,jsxRuntimeExports.jsx("div",{className:"w-8"}),jsxRuntimeExports.jsx(Checkbox,{checkedLabel:"Show finished matches",uncheckedLabel:"Hide finished matches",isChecked:fr,setIsChecked:hr}),jsxRuntimeExports.jsx(Checkbox,{checkedLabel:"Hide matches scheduled in the future",uncheckedLabel:"Show",isChecked:pr,setIsChecked:mr})]}),jsxRuntimeExports.jsx(MatchTable,{matches:br})]})};function SeasonPass(){const{externalWorldContract:cr}=useAmalgema(),[ar,dr]=reactExports.useState(""),[fr,hr]=reactExports.useState(0),[pr,mr]=reactExports.useState(0),[gr,yr]=reactExports.useState(0),[xr,wr]=reactExports.useState(0),[br,Sr]=reactExports.useState(0),[vr,Er]=reactExports.useState(0),[Ar,_r]=reactExports.useState(0),[Cr,kr]=reactExports.useState(0),{address:Rr}=useExternalAccount(),Ir=Math.floor(DateTime$1.now().toSeconds()),{data:Nr}=useBalance({address:cr?.address,watch:!0});return jsxRuntimeExports.jsxs("div",{className:"flex gap-x-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col w-[400px] max-auto h-fit border-4",children:[jsxRuntimeExports.jsx("div",{className:`
          bg-red-500
          text-white
          text-center
          text-2xl
          font-bold
          p-2
          border-b-4
        `,children:"WARNING: Creating this Season Pass will require a client deploy to update the UI. Go to extraTables.ts and change SEASON_PASS_NAMESPACE to the name you chose here. The name does not matter as long as it is unique."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-x-2",children:[jsxRuntimeExports.jsx("label",{children:"Name"}),jsxRuntimeExports.jsx("input",{className:"bg-slate-300",type:"text",maxLength:14,value:ar,onChange:Pr=>dr(Pr.target.value)})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-x-2",children:[jsxRuntimeExports.jsx("label",{children:"Season Start"}),jsxRuntimeExports.jsx("input",{className:"bg-slate-300",type:"number",value:fr,onChange:Pr=>hr(Number(Pr.target.value))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-x-2",children:[jsxRuntimeExports.jsx("label",{children:"Season End"}),jsxRuntimeExports.jsx("input",{className:"bg-slate-300",type:"number",value:pr,onChange:Pr=>mr(Number(Pr.target.value))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-x-2",children:[jsxRuntimeExports.jsx("label",{children:"Mint End"}),jsxRuntimeExports.jsx("input",{className:"bg-slate-300",type:"number",value:gr,onChange:Pr=>yr(Number(Pr.target.value))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-x-2",children:[jsxRuntimeExports.jsx("label",{children:"Decrease Rate"}),jsxRuntimeExports.jsx("input",{className:"bg-slate-300",type:"number",value:xr,onChange:Pr=>wr(Number(Pr.target.value))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-x-2",children:[jsxRuntimeExports.jsx("label",{children:"Starting Price"}),jsxRuntimeExports.jsx("input",{className:"bg-slate-300",type:"number",value:br,onChange:Pr=>Sr(Number(Pr.target.value))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-x-2",children:[jsxRuntimeExports.jsx("label",{children:"Min Price"}),jsxRuntimeExports.jsx("input",{className:"bg-slate-300",type:"number",value:vr,onChange:Pr=>Er(Number(Pr.target.value))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-x-2",children:[jsxRuntimeExports.jsx("label",{children:"Price Increase Percent"}),jsxRuntimeExports.jsx("input",{className:"bg-slate-300",type:"number",value:Ar,onChange:Pr=>_r(Number(Pr.target.value))})]}),jsxRuntimeExports.jsx(PromiseButton,{buttonType:"primary",className:"w-[120px]",disabled:!ar||!fr||!pr||!gr||!xr||!br||!vr||!Ar,promise:async()=>{cr&&await cr.write.createNewSeasonPass([stringToHex(ar,{size:14}),BigInt(fr),BigInt(pr),BigInt(gr),BigInt(xr),parseEther(br.toString()),parseEther(vr.toString()),BigInt(Ar)])},children:"Create Pass"}),"Now Epoch: ",Ir]}),jsxRuntimeExports.jsxs("div",{className:"border-4",children:[jsxRuntimeExports.jsx(Heading,{children:"Withdraw ETH"}),jsxRuntimeExports.jsxs("div",{children:["World Balance: ",formatEther(Nr?.value??0n)]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-x-2",children:[jsxRuntimeExports.jsx("label",{children:"ETH to Withdraw"}),jsxRuntimeExports.jsx("input",{className:"bg-slate-300",type:"number",value:Cr,onChange:Pr=>kr(Number(Pr.target.value))})]}),jsxRuntimeExports.jsx(PromiseButton,{buttonType:"primary",className:"w-[120px]",disabled:!Cr,promise:async()=>{!cr||!Rr||await cr.write.withdrawEth([Rr,parseEther(Cr.toString(),"wei")])},children:"Withdraw ETH"})]})]})}const AdminPage=()=>{const{network:{initialiseWallet:cr}}=useAmalgema(),[ar,dr]=reactExports.useState("Matches"),fr=useAccount(),{address:hr}=fr;reactExports.useEffect(()=>{hr&&cr(hr)},[hr,cr]);let pr=null;return ar==="Matches"&&(pr=jsxRuntimeExports.jsx(Matches,{})),ar==="Templates"&&(pr=jsxRuntimeExports.jsx(Templates,{})),ar==="Levels"&&(pr=jsxRuntimeExports.jsx(Levels,{})),ar==="Players"&&(pr=jsxRuntimeExports.jsx(Players,{})),ar==="Delegations"&&(pr=jsxRuntimeExports.jsx(Delegations,{})),ar==="Season Pass"&&(pr=jsxRuntimeExports.jsx(SeasonPass,{})),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ConnectButton,{}),jsxRuntimeExports.jsx("div",{children:["Matches","Templates","Levels","Players","Delegations","Season Pass"].map(mr=>jsxRuntimeExports.jsx(Button$1,{buttonType:"tertiary",onClick:()=>dr(mr),children:mr},mr))}),pr]})},AdminUIRoot=()=>useStore(ar=>({networkLayer:ar.networkLayer})).networkLayer?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(AdminPage,{})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),{publicClient}=configureChains([mainnet],[publicProvider()]),wagmiConfig=createConfig({publicClient}),Admin=()=>{const cr=useNetworkLayer();return reactExports.useEffect(()=>{cr&&useStore.setState({networkLayer:cr})},[cr]),jsxRuntimeExports.jsx(WagmiConfig,{config:cr?cr.network.wagmiConfig:wagmiConfig,children:jsxRuntimeExports.jsxs(RainbowKitProvider,{chains:cr?cr.network.chains:[],children:[jsxRuntimeExports.jsx(LoadingScreen,{networkLayer:cr}),jsxRuntimeExports.jsx(AdminUIRoot,{})]})})},router=createBrowserRouter([{path:"/",element:jsxRuntimeExports.jsx(Amalgema,{})},{path:"/match",element:jsxRuntimeExports.jsx(SkyStrife,{})},{path:"/admin",element:jsxRuntimeExports.jsx(Admin,{})},{path:"/design-system",element:jsxRuntimeExports.jsx(DesignSystem,{})}]),rootElement=document.getElementById("react-root");if(!rootElement)throw new Error("React root not found");const root=client$1.createRoot(rootElement);root.render(jsxRuntimeExports.jsx(RouterProvider,{router}));export{$$4 as $,h$5 as A,ut$2 as B,ct$1 as C,Dt$1 as D,at$1 as E,Fn$1 as F,q$4 as G,H$2 as H,te$2 as I,Jn$1 as J,Kn$1 as K,Ln$1 as L,et$1 as M,N$5 as N,nt$1 as O,Mn$1 as P,mt$1 as Q,Re$2 as R,yt$1 as S,j$4 as T,U$2 as U,Vn$1 as V,zn$1 as W,Xt$1 as X,B$3 as Y,Zt$1 as Z,_$3 as _,require$$0$8 as a,At$1 as a0,pt$1 as a1,$t$1 as a2,er$1 as a3,Kt$1 as a4,Mt$1 as a5,cn$1 as a6,un$1 as a7,Ft$1 as a8,an$1 as a9,getWindowMetadata_1 as aA,splitOnFirst as aB,filterObj as aC,strictUriEncode as aD,decodeUriComponent as aE,encodeUtf8$1 as aF,dijkstraExports as aG,Vt$1 as aa,Gt$1 as ab,Ht$1 as ac,Wt$1 as ad,Qt$1 as ae,qt$1 as af,Bt$1 as ag,zt$1 as ah,Lt$1 as ai,Xe$1 as aj,oe$2 as ak,S$4 as al,Rn$1 as am,getLocation_1 as an,getLocalStorage_1 as ao,getNavigator_1 as ap,getFromWindow_1 as aq,getFromWindowOrThrow_1 as ar,getDocumentOrThrow_1 as as,getDocument_1 as at,getNavigatorOrThrow_1 as au,getLocationOrThrow_1 as av,getCryptoOrThrow_1 as aw,getCrypto_1 as ax,getLocalStorageOrThrow_1 as ay,detect as az,binary as b,cjs$3 as c,random$1 as d,concat$7 as e,fromString$5 as f,w$6 as g,Dn$1 as h,kn$1 as i,jn$1 as j,kt$1 as k,ee$2 as l,it$1 as m,lt$1 as n,Nt$1 as o,p$4 as p,bt$1 as q,require$$1$1 as r,st$1 as s,toString$6 as t,ft$1 as u,dt$1 as v,wipe$1 as w,xn$1 as x,xt$1 as y,jt$1 as z};
//# sourceMappingURL=index-f634db56.js.map
