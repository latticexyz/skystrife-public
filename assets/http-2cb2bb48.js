import{g as Q}from"./react-60d820b0.js";import{a as we}from"./index-df08c3bd.js";var j={exports:{}},_=typeof Reflect=="object"?Reflect:null,q=_&&typeof _.apply=="function"?_.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},A;_&&typeof _.ownKeys=="function"?A=_.ownKeys:Object.getOwnPropertySymbols?A=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:A=function(e){return Object.getOwnPropertyNames(e)};function _e(t){console&&console.warn&&console.warn(t)}var Y=Number.isNaN||function(e){return e!==e};function u(){u.init.call(this)}j.exports=u;j.exports.once=Te;u.EventEmitter=u;u.prototype._events=void 0;u.prototype._eventsCount=0;u.prototype._maxListeners=void 0;var J=10;function P(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return J},set:function(t){if(typeof t!="number"||t<0||Y(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");J=t}});u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};u.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Y(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Z(t){return t._maxListeners===void 0?u.defaultMaxListeners:t._maxListeners}u.prototype.getMaxListeners=function(){return Z(this)};u.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var o=e==="error",a=this._events;if(a!==void 0)o=o&&a.error===void 0;else if(!o)return!1;if(o){var c;if(r.length>0&&(c=r[0]),c instanceof Error)throw c;var y=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw y.context=c,y}var b=a[e];if(b===void 0)return!1;if(typeof b=="function")q(b,this,r);else for(var O=b.length,E=se(b,O),i=0;i<O;++i)q(E[i],this,r);return!0};function ee(t,e,r,i){var o,a,c;if(P(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),c=a[e]),c===void 0)c=a[e]=r,++t._eventsCount;else if(typeof c=="function"?c=a[e]=i?[r,c]:[c,r]:i?c.unshift(r):c.push(r),o=Z(t),o>0&&c.length>o&&!c.warned){c.warned=!0;var y=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");y.name="MaxListenersExceededWarning",y.emitter=t,y.type=e,y.count=c.length,_e(y)}return t}u.prototype.addListener=function(e,r){return ee(this,e,r,!1)};u.prototype.on=u.prototype.addListener;u.prototype.prependListener=function(e,r){return ee(this,e,r,!0)};function Re(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function te(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},o=Re.bind(i);return o.listener=r,i.wrapFn=o,o}u.prototype.once=function(e,r){return P(r),this.on(e,te(this,e,r)),this};u.prototype.prependOnceListener=function(e,r){return P(r),this.prependListener(e,te(this,e,r)),this};u.prototype.removeListener=function(e,r){var i,o,a,c,y;if(P(r),o=this._events,o===void 0)return this;if(i=o[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(a=-1,c=i.length-1;c>=0;c--)if(i[c]===r||i[c].listener===r){y=i[c].listener,a=c;break}if(a<0)return this;a===0?i.shift():Le(i,a),i.length===1&&(o[e]=i[0]),o.removeListener!==void 0&&this.emit("removeListener",e,y||r)}return this};u.prototype.off=u.prototype.removeListener;u.prototype.removeAllListeners=function(e){var r,i,o;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var a=Object.keys(i),c;for(o=0;o<a.length;++o)c=a[o],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(e,r[o]);return this};function re(t,e,r){var i=t._events;if(i===void 0)return[];var o=i[e];return o===void 0?[]:typeof o=="function"?r?[o.listener||o]:[o]:r?Oe(o):se(o,o.length)}u.prototype.listeners=function(e){return re(this,e,!0)};u.prototype.rawListeners=function(e){return re(this,e,!1)};u.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ne.call(t,e)};u.prototype.listenerCount=ne;function ne(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}u.prototype.eventNames=function(){return this._eventsCount>0?A(this._events):[]};function se(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function Le(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Oe(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Te(t,e){return new Promise(function(r,i){function o(c){t.removeListener(e,a),i(c)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",o),r([].slice.call(arguments))}ie(t,e,a,{once:!0}),e!=="error"&&Ae(t,o,{once:!0})})}function Ae(t,e,r){typeof t.on=="function"&&ie(t,"error",e,r)}function ie(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function o(a){i.once&&t.removeEventListener(e,o),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var M=j.exports;const st=Q(M),Pe=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),xe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(i,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Ce(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return xe(t)}catch{return t}}function $(t){return typeof t=="string"?t:Pe(t)||""}const Se="PARSE_ERROR",Be="INVALID_REQUEST",De="METHOD_NOT_FOUND",je="INVALID_PARAMS",oe="INTERNAL_ERROR",I="SERVER_ERROR",Me=[-32700,-32600,-32601,-32602,-32603],L={[Se]:{code:-32700,message:"Parse error"},[Be]:{code:-32600,message:"Invalid Request"},[De]:{code:-32601,message:"Method not found"},[je]:{code:-32602,message:"Invalid params"},[oe]:{code:-32603,message:"Internal error"},[I]:{code:-32e3,message:"Server error"}},ae=I;function Ie(t){return Me.includes(t)}function V(t){return Object.keys(L).includes(t)?L[t]:L[ae]}function Ne(t){const e=Object.values(L).find(r=>r.code===t);return e||L[ae]}function Ue(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Fe={},m={},k;function He(){if(k)return m;k=1,Object.defineProperty(m,"__esModule",{value:!0}),m.isBrowserCryptoAvailable=m.getSubtleCrypto=m.getBrowerCrypto=void 0;function t(){return globalThis?.crypto||globalThis?.msCrypto||{}}m.getBrowerCrypto=t;function e(){const i=t();return i.subtle||i.webkitSubtle}m.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return m.isBrowserCryptoAvailable=r,m}var g={},W;function qe(){if(W)return g;W=1,Object.defineProperty(g,"__esModule",{value:!0}),g.isBrowser=g.isNode=g.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}g.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}g.isNode=e;function r(){return!t()&&!e()}return g.isBrowser=r,g}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=we;e.__exportStar(He(),t),e.__exportStar(qe(),t)})(Fe);function ce(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Je(t=6){return BigInt(ce(t))}function $e(t,e,r){return{id:r||ce(),jsonrpc:"2.0",method:t,params:e}}function it(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Ve(t,e,r){return{id:t,jsonrpc:"2.0",error:ke(e,r)}}function ke(t,e){return typeof t>"u"?V(oe):(typeof t=="string"&&(t=Object.assign(Object.assign({},V(I)),{message:t})),typeof e<"u"&&(t.data=e),Ie(t.code)&&(t=Ne(t.code)),t)}class fe{}class ot extends fe{constructor(e){super()}}class We extends fe{constructor(){super()}}class Ge extends We{constructor(e){super()}}const Ke="^https?:",Xe="^wss?:";function ze(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function ue(t,e){const r=ze(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function G(t){return ue(t,Ke)}function at(t){return ue(t,Xe)}function ct(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function he(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function ft(t){return he(t)&&"method"in t}function Qe(t){return he(t)&&(Ye(t)||le(t))}function Ye(t){return"result"in t}function le(t){return"error"in t}class ut extends Ge{constructor(e){super(e),this.events=new M.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict($e(e.method,e.params||[],e.id||Je().toString()),r)}async requestStrict(e,r){return new Promise(async(i,o)=>{if(!this.connection.connected)try{await this.open()}catch(a){o(a)}this.events.on(`${e.id}`,a=>{le(a)?o(a.error):i(a.result)});try{await this.connection.send(e,r)}catch(a){o(a)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Qe(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var D={exports:{}};(function(t,e){var r=function(){function o(){this.fetch=!1,this.DOMException=globalThis.DOMException}return o.prototype=globalThis,new o}();(function(o){(function(a){var c={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function y(n){return n&&DataView.prototype.isPrototypeOf(n)}if(c.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],O=ArrayBuffer.isView||function(n){return n&&b.indexOf(Object.prototype.toString.call(n))>-1};function E(n){if(typeof n!="string"&&(n=String(n)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(n))throw new TypeError("Invalid character in header field name");return n.toLowerCase()}function N(n){return typeof n!="string"&&(n=String(n)),n}function x(n){var s={next:function(){var f=n.shift();return{done:f===void 0,value:f}}};return c.iterable&&(s[Symbol.iterator]=function(){return s}),s}function l(n){this.map={},n instanceof l?n.forEach(function(s,f){this.append(f,s)},this):Array.isArray(n)?n.forEach(function(s){this.append(s[0],s[1])},this):n&&Object.getOwnPropertyNames(n).forEach(function(s){this.append(s,n[s])},this)}l.prototype.append=function(n,s){n=E(n),s=N(s);var f=this.map[n];this.map[n]=f?f+", "+s:s},l.prototype.delete=function(n){delete this.map[E(n)]},l.prototype.get=function(n){return n=E(n),this.has(n)?this.map[n]:null},l.prototype.has=function(n){return this.map.hasOwnProperty(E(n))},l.prototype.set=function(n,s){this.map[E(n)]=N(s)},l.prototype.forEach=function(n,s){for(var f in this.map)this.map.hasOwnProperty(f)&&n.call(s,this.map[f],f,this)},l.prototype.keys=function(){var n=[];return this.forEach(function(s,f){n.push(f)}),x(n)},l.prototype.values=function(){var n=[];return this.forEach(function(s){n.push(s)}),x(n)},l.prototype.entries=function(){var n=[];return this.forEach(function(s,f){n.push([f,s])}),x(n)},c.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);function C(n){if(n.bodyUsed)return Promise.reject(new TypeError("Already read"));n.bodyUsed=!0}function U(n){return new Promise(function(s,f){n.onload=function(){s(n.result)},n.onerror=function(){f(n.error)}})}function de(n){var s=new FileReader,f=U(s);return s.readAsArrayBuffer(n),f}function pe(n){var s=new FileReader,f=U(s);return s.readAsText(n),f}function ye(n){for(var s=new Uint8Array(n),f=new Array(s.length),p=0;p<s.length;p++)f[p]=String.fromCharCode(s[p]);return f.join("")}function F(n){if(n.slice)return n.slice(0);var s=new Uint8Array(n.byteLength);return s.set(new Uint8Array(n)),s.buffer}function H(){return this.bodyUsed=!1,this._initBody=function(n){this._bodyInit=n,n?typeof n=="string"?this._bodyText=n:c.blob&&Blob.prototype.isPrototypeOf(n)?this._bodyBlob=n:c.formData&&FormData.prototype.isPrototypeOf(n)?this._bodyFormData=n:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(n)?this._bodyText=n.toString():c.arrayBuffer&&c.blob&&y(n)?(this._bodyArrayBuffer=F(n.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(n)||O(n))?this._bodyArrayBuffer=F(n):this._bodyText=n=Object.prototype.toString.call(n):this._bodyText="",this.headers.get("content-type")||(typeof n=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(n)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var n=C(this);if(n)return n;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?C(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(de)}),this.text=function(){var n=C(this);if(n)return n;if(this._bodyBlob)return pe(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(ye(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(ge)}),this.json=function(){return this.text().then(JSON.parse)},this}var ve=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function me(n){var s=n.toUpperCase();return ve.indexOf(s)>-1?s:n}function w(n,s){s=s||{};var f=s.body;if(n instanceof w){if(n.bodyUsed)throw new TypeError("Already read");this.url=n.url,this.credentials=n.credentials,s.headers||(this.headers=new l(n.headers)),this.method=n.method,this.mode=n.mode,this.signal=n.signal,!f&&n._bodyInit!=null&&(f=n._bodyInit,n.bodyUsed=!0)}else this.url=String(n);if(this.credentials=s.credentials||this.credentials||"same-origin",(s.headers||!this.headers)&&(this.headers=new l(s.headers)),this.method=me(s.method||this.method||"GET"),this.mode=s.mode||this.mode||null,this.signal=s.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&f)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(f)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function ge(n){var s=new FormData;return n.trim().split("&").forEach(function(f){if(f){var p=f.split("="),d=p.shift().replace(/\+/g," "),h=p.join("=").replace(/\+/g," ");s.append(decodeURIComponent(d),decodeURIComponent(h))}}),s}function be(n){var s=new l,f=n.replace(/\r?\n[\t ]+/g," ");return f.split(/\r?\n/).forEach(function(p){var d=p.split(":"),h=d.shift().trim();if(h){var T=d.join(":").trim();s.append(h,T)}}),s}H.call(w.prototype);function v(n,s){s||(s={}),this.type="default",this.status=s.status===void 0?200:s.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in s?s.statusText:"OK",this.headers=new l(s.headers),this.url=s.url||"",this._initBody(n)}H.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},v.error=function(){var n=new v(null,{status:0,statusText:""});return n.type="error",n};var Ee=[301,302,303,307,308];v.redirect=function(n,s){if(Ee.indexOf(s)===-1)throw new RangeError("Invalid status code");return new v(null,{status:s,headers:{location:n}})},a.DOMException=o.DOMException;try{new a.DOMException}catch{a.DOMException=function(s,f){this.message=s,this.name=f;var p=Error(s);this.stack=p.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function S(n,s){return new Promise(function(f,p){var d=new w(n,s);if(d.signal&&d.signal.aborted)return p(new a.DOMException("Aborted","AbortError"));var h=new XMLHttpRequest;function T(){h.abort()}h.onload=function(){var R={status:h.status,statusText:h.statusText,headers:be(h.getAllResponseHeaders()||"")};R.url="responseURL"in h?h.responseURL:R.headers.get("X-Request-URL");var B="response"in h?h.response:h.responseText;f(new v(B,R))},h.onerror=function(){p(new TypeError("Network request failed"))},h.ontimeout=function(){p(new TypeError("Network request failed"))},h.onabort=function(){p(new a.DOMException("Aborted","AbortError"))},h.open(d.method,d.url,!0),d.credentials==="include"?h.withCredentials=!0:d.credentials==="omit"&&(h.withCredentials=!1),"responseType"in h&&c.blob&&(h.responseType="blob"),d.headers.forEach(function(R,B){h.setRequestHeader(B,R)}),d.signal&&(d.signal.addEventListener("abort",T),h.onreadystatechange=function(){h.readyState===4&&d.signal.removeEventListener("abort",T)}),h.send(typeof d._bodyInit>"u"?null:d._bodyInit)})}return S.polyfill=!0,o.fetch||(o.fetch=S,o.Headers=l,o.Request=w,o.Response=v),a.Headers=l,a.Request=w,a.Response=v,a.fetch=S,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(D,D.exports);var Ze=D.exports;const K=Q(Ze),et={Accept:"application/json","Content-Type":"application/json"},tt="POST",X={headers:et,method:tt},z=10;class ht{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new M.EventEmitter,this.isAvailable=!1,this.registering=!1,!G(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const i=$(e),a=await(await K(this.url,Object.assign(Object.assign({},X),{body:i}))).json();this.onPayload({data:a})}catch(i){this.onError(e.id,i)}}async register(e=this.url){if(!G(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,o)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),o(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=$({id:1,jsonrpc:"2.0",method:"test",params:[]});await K(e,Object.assign(Object.assign({},X),{body:r}))}this.onOpen()}catch(r){const i=this.parseError(r);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ce(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const i=this.parseError(r),o=i.message||i.toString(),a=Ve(e,o);this.events.emit("payload",a)}parseError(e,r=this.url){return Ue(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>z&&this.events.setMaxListeners(z)}}export{st as E,ht as H,ot as I,ut as J,ct as a,Ce as b,Fe as c,ft as d,M as e,Ve as f,Qe as g,it as h,at as i,Ye as j,le as k,$e as l,Je as m,ce as n,Ue as p,$ as s};
//# sourceMappingURL=http-2cb2bb48.js.map
